import{i as L,s as A,a as B,j as f,k as y,h as D,f as w,n as F,o as N,p as G}from"./eo-dash.BJZRaexd.js";import{f as H,r as I,a as c,o as i,b as C,K as J,j as g,E as K,g as h,h as O}from"./framework.67QTkEGu.js";import"./item.BmAbL_Ub.js";import"./commonjsHelpers.Cpj98o6Y.js";const P={class:"d-flex flex-column"},R=["for"],U={key:0,class:"mt-2 mb-2"},$={__name:"EodashLayerControl",props:{map:{type:String,default:"first"},tools:{type:Array,default:()=>["datetime","info","config","legend","opacity"]},title:{type:String||Boolean,default:"Layers"},cssVars:{type:Object}},setup(r){const o=r,_={tools:o.tools,style:o.cssVars},{selectedCompareStac:v,selectedStac:x}=A(B()),E=H(()=>o.map==="second"?f.value!==null&&v.value!==null:y.value!==null&&x.value!==null),S=o.map==="second"?D:w,l=o.map==="second"?f:y,V=I(null),k=async e=>{var m;const{layer:n,datetime:j}=e.detail,u=await G(S,n);let s=[];u&&(s=await u.updateLayerJson(j,n.get("id"),o.map));const t=(m=s==null?void 0:s.find(a=>{var d;return((d=a==null?void 0:a.properties)==null?void 0:d.id)==="AnalysisGroup"}))==null?void 0:m.layers;t!=null&&t.length&&(t==null||t.forEach(a=>{a.properties.layerControlExpand=!0,a.properties.layerControlToolsExpand=!0}),l.value.layers=s)};let p;const T=e=>{clearTimeout(p),p=setTimeout(()=>{k(e)},500)},b=e=>{o.map==="second"?F.value=e.detail.jsonformValue:N.value=e.detail.jsonformValue};return(e,n)=>(i(),c("span",P,[E.value?(i(),c("eox-layercontrol",J({key:g(l)},_,{for:g(l),"onDatetime:updated":T,toolsAsList:"true",style:{"--eox-background-color":"transparent"},ref_key:"eoxLayercontrol",ref:V,"on:layerConfig:change":b}),[K(e.$slots,"layerstitle",{},()=>[h("div",null,[r.title?(i(),c("p",U,[h("strong",null,O(r.title),1)])):C("v-if",!0)])],!0)],16,R)):C("v-if",!0)]))}},W=L($,[["__scopeId","data-v-88d02d9c"]]);export{W as default};
