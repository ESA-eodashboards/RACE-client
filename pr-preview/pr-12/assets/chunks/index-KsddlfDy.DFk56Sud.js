const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/raw-Ctlamky6.lG6ojroe.js","assets/chunks/basedecoder-DZxXIv4c.B2c5_Eok.js","assets/chunks/lzw-D2MxT2zA.DmRYnG5C.js","assets/chunks/jpeg-CsvjaiEQ.A0lbw6YY.js","assets/chunks/deflate-BsBbGVWD.DOOJQnHL.js","assets/chunks/pako.esm-KbdoS3Oq.BkaqWuDM.js","assets/chunks/packbits-DJxVZ9kH.CBEwDSj4.js","assets/chunks/lerc-D727YvsH.wPAbfslz.js","assets/chunks/framework.Dq13AWfp.js","assets/chunks/eo-dash.CtD2bBo2.js","assets/chunks/item.CC2Khh23.js","assets/chunks/commonjsHelpers.BosuxZz1.js","assets/chunks/MinesweeperDialog-BHyRua-S.BZzZD5V8.js","assets/chunks/SpeciesList-DcryRTei.yF7x0Ryu.js","assets/chunks/VDialog-BaQLBvpo.BGn7NqxT.js","assets/chunks/forwardRefs-BhNIWTeV.SlFjBT82.js","assets/chunks/transition-DsIbBNxB.Co-1cbYr.js","assets/chunks/VCard-DrMmfMY3.CsSWSfHx.js","assets/chunks/VImg-C80IpapS.BYGTHQr_.js","assets/chunks/index.DK02avya.js","assets/chunks/easing-CH0-9wR8.CTB3jml5.js","assets/chunks/webimage-Bg_w2qlD.C0wZFOAS.js"])))=>i.map(i=>d[i]);
var $r=Object.defineProperty;var Jr=(a,e,t)=>e in a?$r(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var Mi=(a,e,t)=>Jr(a,typeof e!="symbol"?e+"":e,t);import{f as Qr,ak as Us,m as el,q as tl,a as nl,o as al,D as Di,w as il,I as sl,h as rl,j as st,au as ll,a1 as ft}from"./framework.Dq13AWfp.js";import{_ as ol,V as _l,bb as cl,ba as $a,bc as zs,bd as se,be as J,bf as pt,bg as tn,bh as ze,bi as ul,bj as nn,bk as on,bl as dl,bm as hl,bn as Xt,bo as Vs,bp as Hs,bq as js,br as Dt,bs as fl,bt as ml,bu as Fa,bv as Ja,bw as Kn,bx as Ue,by as yn,bz as Yt,bA as Le,bB as Qa,bC as gl,bD as pl,bE as bn,bF as Ks,bG as ut,bH as yl,bI as bl,bJ as wl,bK as xl,bL as El,bM as ue,bN as _n,bO as Sl,bP as Rl,bQ as an,bR as $,bS as Il,bT as sn,bU as Al,bV as te,bW as ei,bX as We,bY as Oi,bZ as vl,b_ as Cl,b$ as Pi,c0 as kl,c1 as Ws,c2 as Ll,c3 as Fi,c4 as Ni,c5 as Na,c6 as Tl,c7 as Xs,c8 as Ml,c9 as Dl,ca as Ba,cb as Ol,cc as Pl,cd as vn,ce as Bi,cf as Gi,cg as Fl,ch as Nl,ci as Bl,cj as Gl,ck as Ul,cl as ke,cm as zl,cn as Vl,co as Hl,cp as jl,cq as Kl}from"./eo-dash.CtD2bBo2.js";import{M as Wl,g as Xl}from"./MinesweeperDialog-BHyRua-S.BZzZD5V8.js";import{p as ma}from"./index.DK02avya.js";import{i as Yl,e as Zl}from"./easing-CH0-9wR8.CTB3jml5.js";import"./item.CC2Khh23.js";import"./commonjsHelpers.BosuxZz1.js";import"./SpeciesList-DcryRTei.yF7x0Ryu.js";import"./VDialog-BaQLBvpo.BGn7NqxT.js";import"./forwardRefs-BhNIWTeV.SlFjBT82.js";import"./transition-DsIbBNxB.Co-1cbYr.js";import"./VCard-DrMmfMY3.CsSWSfHx.js";import"./VImg-C80IpapS.BYGTHQr_.js";const It={ADD:"add",REMOVE:"remove"},Ui={LENGTH:"length"};class Cn extends Ja{constructor(e,t,n){super(e),this.element=t,this.index=n}}class ql extends Dt{constructor(e,t){if(super(),t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,i=this.array_.length;n<i;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,i=t.length;n<i;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Ui.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Cn(It.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,i=t.length;n<i;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Cn(It.REMOVE,t,e)),t}setAt(e,t){const n=this.getLength();if(e>=n){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Cn(It.REMOVE,i,e)),this.dispatchEvent(new Cn(It.ADD,t,e))}updateLength_(){this.set(Ui.LENGTH,this.array_.length)}assertUnique_(e,t){for(let n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===e&&n!==t)throw new Error("Duplicate item added to a unique collection")}}const lt={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose"},dt=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",$l=dt.includes("safari")&&!dt.includes("chrom");$l&&(dt.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(dt));dt.includes("webkit")&&dt.includes("edge");dt.includes("macintosh");const ti=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Jl=typeof Image<"u"&&Image.prototype.decode;(function(){let a=!1;try{const e=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return a})();const G={IDLE:0,LOADING:1,LOADED:2,ERROR:3};function re(a,e,t,n){let i;return t&&t.length?i=t.shift():ti?i=new OffscreenCanvas(a||300,e||300):i=document.createElement("canvas"),a&&(i.width=a),e&&(i.height=e),i.getContext("2d",n)}let ga;function Wn(){return ga||(ga=re(1,1)),ga}function Ql(a){const e=a.canvas;e.width=1,e.height=1,a.clearRect(0,0,1,1)}const ni=[NaN,NaN,NaN,0];let pa;function eo(){return pa||(pa=re(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),pa}const to=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,no=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,ao=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,io=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function kn(a,e){return a.endsWith("%")?Number(a.substring(0,a.length-1))/e:Number(a)}function rn(a){throw new Error('failed to parse "'+a+'" as color')}function Ys(a){if(a.toLowerCase().startsWith("rgb")){const s=a.match(no)||a.match(to)||a.match(ao);if(s){const r=s[4],l=100/255;return[$(kn(s[1],l)+.5|0,0,255),$(kn(s[2],l)+.5|0,0,255),$(kn(s[3],l)+.5|0,0,255),r!==void 0?$(kn(r,100),0,1):1]}rn(a)}if(a.startsWith("#")){if(io.test(a)){const s=a.substring(1),r=s.length<=4?1:2,l=[0,0,0,255];for(let o=0,c=s.length;o<c;o+=r){let _=parseInt(s.substring(o,o+r),16);r===1&&(_+=_<<4),l[o/r]=_}return l[3]=l[3]/255,l}rn(a)}const e=eo();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=a,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=a,e.fillStyle===t&&rn(a));const n=e.fillStyle;if(n.startsWith("#")||n.startsWith("rgba"))return Ys(n);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=Xs(i[3]/255,3),i}function so(a){return typeof a=="string"?a:ii(a)}const ro=1024,Vt={};let ya=0;function lo(a){if(a.length===4)return a;const e=a.slice();return e[3]=1,e}function ba(a){return a>.0031308?Math.pow(a,1/2.4)*269.025-14.025:a*3294.6}function wa(a){return a>.2068965?Math.pow(a,3):(a-4/29)*(108/841)}function xa(a){return a>10.314724?Math.pow((a+14.025)/269.025,2.4):a/3294.6}function Ea(a){return a>.0088564?Math.pow(a,1/3):a/(108/841)+4/29}function zi(a){const e=xa(a[0]),t=xa(a[1]),n=xa(a[2]),i=Ea(e*.222488403+t*.716873169+n*.06060791),s=500*(Ea(e*.452247074+t*.399439023+n*.148375274)-i),r=200*(i-Ea(e*.016863605+t*.117638439+n*.865350722)),l=Math.atan2(r,s)*(180/Math.PI);return[116*i-16,Math.sqrt(s*s+r*r),l<0?l+360:l,a[3]]}function oo(a){const e=(a[0]+16)/116,t=a[1],n=a[2]*Math.PI/180,i=wa(e),s=wa(e+t/500*Math.cos(n)),r=wa(e-t/200*Math.sin(n)),l=ba(s*3.021973625-i*1.617392459-r*.404875592),o=ba(s*-.943766287+i*1.916279586+r*.027607165),c=ba(s*.069407491-i*.22898585+r*1.159737864);return[$(l+.5|0,0,255),$(o+.5|0,0,255),$(c+.5|0,0,255),a[3]]}function ai(a){if(a==="none")return ni;if(Vt.hasOwnProperty(a))return Vt[a];if(ya>=ro){let t=0;for(const n in Vt)t++&3||(delete Vt[n],--ya)}const e=Ys(a);e.length!==4&&rn(a);for(const t of e)isNaN(t)&&rn(a);return Vt[a]=e,++ya,e}function Ct(a){return Array.isArray(a)?a:ai(a)}function ii(a){let e=a[0];e!=(e|0)&&(e=e+.5|0);let t=a[1];t!=(t|0)&&(t=t+.5|0);let n=a[2];n!=(n|0)&&(n=n+.5|0);const i=a[3]===void 0?1:Math.round(a[3]*1e3)/1e3;return"rgba("+e+","+t+","+n+","+i+")"}function _o(a,e){return new Promise((t,n)=>{function i(){r(),t(a)}function s(){r(),n(new Error("Image load error"))}function r(){a.removeEventListener("load",i),a.removeEventListener("error",s)}a.addEventListener("load",i),a.addEventListener("error",s)})}function co(a,e){return e&&(a.src=e),a.src&&Jl?new Promise((t,n)=>a.decode().then(()=>t(a)).catch(i=>a.complete&&a.width?t(a):n(i))):_o(a)}class uo{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];!(e++&3)&&!n.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,n){const i=Sa(e,t,n);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,n){const i=Sa(e,t,n);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,n,i,s){const r=Sa(e,t,n),l=r in this.cache_;this.cache_[r]=i,s&&(i.getImageState()===G.IDLE&&i.load(),i.getImageState()===G.LOADING?i.ready().then(()=>{this.patternCache_[r]=Wn().createPattern(i.getImage(1),"repeat")}):this.patternCache_[r]=Wn().createPattern(i.getImage(1),"repeat")),l||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Sa(a,e,t){const n=t?Ct(t):"null";return e+":"+a+":"+n}const Me=new uo;let Ht=null;class Zs extends Vl{constructor(e,t,n,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=s,this.imageState_=i===void 0?G.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===G.LOADED){Ht||(Ht=re(1,1,void 0,{willReadFrequently:!0})),Ht.drawImage(this.image_,0,0);try{Ht.getImageData(0,0,1,1),this.tainted_=!1}catch{Ht=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(ze.CHANGE)}handleImageError_(){this.imageState_=G.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=G.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=re(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===G.IDLE){this.image_||this.initializeImage_(),this.imageState_=G.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&co(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==G.LOADED)return;const t=this.image_,n=re(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=n.canvas;n.scale(e,e),n.drawImage(t,0,0),n.globalCompositeOperation="multiply",n.fillStyle=so(this.color_),n.fillRect(0,0,i.width/e,i.height/e),n.globalCompositeOperation="destination-in",n.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===G.LOADED||this.imageState_===G.ERROR)e();else{const t=()=>{(this.imageState_===G.LOADED||this.imageState_===G.ERROR)&&(this.removeEventListener(ze.CHANGE,t),e())};this.addEventListener(ze.CHANGE,t)}})),this.ready_}}function si(a,e,t,n,i,s){let r=e===void 0?void 0:Me.get(e,t,i);return r||(r=new Zs(a,a&&"src"in a?a.src||void 0:e,t,n,i),Me.set(e,t,i,r,s)),s&&r&&!Me.getPattern(e,t,i)&&Me.set(e,t,i,r,s),r}function De(a){return a?Array.isArray(a)?ii(a):typeof a=="object"&&"src"in a?ho(a):a:null}function ho(a){if(!a.offset||!a.size)return Me.getPattern(a.src,"anonymous",a.color);const e=a.src+":"+a.offset,t=Me.getPattern(e,void 0,a.color);if(t)return t;const n=Me.get(a.src,"anonymous",null);if(n.getImageState()!==G.LOADED)return null;const i=re(a.size[0],a.size[1]);return i.drawImage(n.getImage(1),a.offset[0],a.offset[1],a.size[0],a.size[1],0,0,a.size[0],a.size[1]),si(i.canvas,e,void 0,G.LOADED,a.color,!0),Me.getPattern(e,void 0,a.color)}class qs{drawCustom(e,t,n,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,n){}drawFeature(e,t,n){}drawGeometryCollection(e,t,n){}drawLineString(e,t,n){}drawMultiLineString(e,t,n){}drawMultiPoint(e,t,n){}drawMultiPolygon(e,t,n){}drawPoint(e,t,n){}drawPolygon(e,t,n){}drawText(e,t,n){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const fo=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),Vi=["style","variant","weight","size","lineHeight","family"],Ga={normal:400,bold:700},Ua=function(a){const e=a.match(fo);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let n=0,i=Vi.length;n<i;++n){const s=e[n+1];s!==void 0&&(t[Vi[n]]=typeof s=="string"?s.trim():s)}return isNaN(Number(t.weight))&&t.weight in Ga&&(t.weight=Ga[t.weight]),t.families=t.family.split(/,\s?/).map(n=>n.trim().replace(/^['"]|['"]$/g,"")),t},$s="10px sans-serif",le="#000",kt="round",Ve=[],He=0,Lt="round",cn=10,un="#000",dn="center",Xn="middle",ot=[0,0,0,0],hn=1,jt=new Dt;let Kt=null,Hi;const za={},mo=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function go(a,e,t){return`${a} ${e} 16px "${t}"`}const po=function(){let e,t;async function n(s){await t.ready;const r=await t.load(s);if(r.length===0)return!1;const l=Ua(s),o=l.families[0].toLowerCase(),c=l.weight;return r.some(_=>{const u=_.family.replace(/^['"]|['"]$/g,"").toLowerCase(),d=Ga[_.weight]||_.weight;return u===o&&_.style===l.style&&d==c})}async function i(){await t.ready;let s=!0;const r=jt.getProperties(),l=Object.keys(r).filter(o=>r[o]<100);for(let o=l.length-1;o>=0;--o){const c=l[o];let _=r[c];_<100&&(await n(c)?(Hl(za),jt.set(c,100)):(_+=10,jt.set(c,_,!0),_<100&&(s=!1)))}e=void 0,s||(e=setTimeout(i,100))}return async function(s){t||(t=ti?self.fonts:document.fonts);const r=Ua(s);if(!r)return;const l=r.families;let o=!1;for(const c of l){if(mo.has(c))continue;const _=go(r.style,r.weight,c);jt.get(_)===void 0&&(jt.set(_,0,!0),o=!0)}o&&(clearTimeout(e),e=setTimeout(i,100))}}(),yo=function(){let a;return function(e){let t=za[e];if(t==null){if(ti){const n=Ua(e),i=Js(e,"Žg");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else a||(a=document.createElement("div"),a.innerHTML="M",a.style.minHeight="0",a.style.maxHeight="none",a.style.height="auto",a.style.padding="0",a.style.border="none",a.style.position="absolute",a.style.display="block",a.style.left="-99999px"),a.style.font=e,document.body.appendChild(a),t=a.offsetHeight,document.body.removeChild(a);za[e]=t}return t}}();function Js(a,e){return Kt||(Kt=re(1,1)),a!=Hi&&(Kt.font=a,Hi=Kt.font),Kt.measureText(e)}function Qs(a,e){return Js(a,e).width}function ji(a,e,t){if(e in t)return t[e];const n=e.split(`
`).reduce((i,s)=>Math.max(i,Qs(a,s)),0);return t[e]=n,n}function bo(a,e){const t=[],n=[],i=[];let s=0,r=0,l=0,o=0;for(let c=0,_=e.length;c<=_;c+=2){const u=e[c];if(u===`
`||c===_){s=Math.max(s,r),i.push(r),r=0,l+=o,o=0;continue}const d=e[c+1]||a.font,h=Qs(d,u);t.push(h),r+=h;const f=yo(d);n.push(f),o=Math.max(o,f)}return{width:s,height:l,widths:t,heights:n,lineWidths:i}}function wo(a,e,t,n,i,s,r,l,o,c,_){a.save(),t!==1&&(a.globalAlpha===void 0?a.globalAlpha=u=>u.globalAlpha*=t:a.globalAlpha*=t),e&&a.transform.apply(a,e),n.contextInstructions?(a.translate(o,c),a.scale(_[0],_[1]),xo(n,a)):_[0]<0||_[1]<0?(a.translate(o,c),a.scale(_[0],_[1]),a.drawImage(n,i,s,r,l,0,0,r,l)):a.drawImage(n,i,s,r,l,o,c,r*_[0],l*_[1]),a.restore()}function xo(a,e){const t=a.contextInstructions;for(let n=0,i=t.length;n<i;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}class Eo extends qs{constructor(e,t,n,i,s,r,l){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=i,this.transformRotation_=i?Xs(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=r,this.userTransform_=l,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=ut()}drawImages_(e,t,n,i){if(!this.image_)return;const s=sn(e,t,n,i,this.transform_,this.pixelCoordinates_),r=this.context_,l=this.tmpLocalTransform_,o=r.globalAlpha;this.imageOpacity_!=1&&(r.globalAlpha=o*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let _=0,u=s.length;_<u;_+=2){const d=s[_]-this.imageAnchorX_,h=s[_+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const f=d+this.imageAnchorX_,g=h+this.imageAnchorY_;_n(l,f,g,1,1,c,-f,-g),r.save(),r.transform.apply(r,l),r.translate(f,g),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.restore()}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,h,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(r.globalAlpha=o)}drawText_(e,t,n,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=sn(e,t,n,i,this.transform_,this.pixelCoordinates_),r=this.context_;let l=this.textRotation_;for(this.transformRotation_===0&&(l-=this.viewRotation_),this.textRotateWithView_&&(l+=this.viewRotation_);t<n;t+=i){const o=s[t]+this.textOffsetX_,c=s[t+1]+this.textOffsetY_;l!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(r.save(),r.translate(o-this.textOffsetX_,c-this.textOffsetY_),r.rotate(l),r.translate(this.textOffsetX_,this.textOffsetY_),r.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&r.strokeText(this.text_,0,0),this.textFillState_&&r.fillText(this.text_,0,0),r.restore()):(this.textStrokeState_&&r.strokeText(this.text_,o,c),this.textFillState_&&r.fillText(this.text_,o,c))}}moveToLineTo_(e,t,n,i,s){const r=this.context_,l=sn(e,t,n,i,this.transform_,this.pixelCoordinates_);r.moveTo(l[0],l[1]);let o=l.length;s&&(o-=2);for(let c=2;c<o;c+=2)r.lineTo(l[c],l[c+1]);return s&&r.closePath(),n}drawRings_(e,t,n,i){for(let s=0,r=n.length;s<r;++s)t=this.moveToLineTo_(e,t,n[s],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Le(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=Ml(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],i=t[3]-t[1],s=Math.sqrt(n*n+i*i),r=this.context_;r.beginPath(),r.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const n=t.getGeometryFunction()(e);n&&(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let n=0,i=t.length;n<i;++n)this.drawGeometry(t[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Le(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Le(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=e.getFlatCoordinates();let s=0;const r=e.getEnds(),l=e.getStride();n.beginPath();for(let o=0,c=r.length;o<c;++o)s=this.moveToLineTo_(i,s,r[o],l,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Le(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Le(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),r=e.getStride();t.beginPath();for(let l=0,o=s.length;l<o;++l){const c=s[l];i=this.drawRings_(n,i,c,r)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),bn(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,n=this.contextTextState_,i=e.textAlign?e.textAlign:dn;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=i&&(n.textAlign=i,t.textAlign=i),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const n=e.getColor();this.fillState_={fillStyle:De(n||le)}}if(!t)this.strokeState_=null;else{const n=t.getColor(),i=t.getLineCap(),s=t.getLineDash(),r=t.getLineDashOffset(),l=t.getLineJoin(),o=t.getWidth(),c=t.getMiterLimit(),_=s||Ve;this.strokeState_={lineCap:i!==void 0?i:kt,lineDash:this.pixelRatio_===1?_:_.map(u=>u*this.pixelRatio_),lineDashOffset:(r||He)*this.pixelRatio_,lineJoin:l!==void 0?l:Lt,lineWidth:(o!==void 0?o:hn)*this.pixelRatio_,miterLimit:c!==void 0?c:cn,strokeStyle:De(n||un)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const n=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*n,this.imageAnchorY_=i[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const r=e.getScaleArray();this.imageScale_=[r[0]*this.pixelRatio_/n,r[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const h=t.getColor();this.textFillState_={fillStyle:De(h||le)}}const n=e.getStroke();if(!n)this.textStrokeState_=null;else{const h=n.getColor(),f=n.getLineCap(),g=n.getLineDash(),m=n.getLineDashOffset(),p=n.getLineJoin(),y=n.getWidth(),E=n.getMiterLimit();this.textStrokeState_={lineCap:f!==void 0?f:kt,lineDash:g||Ve,lineDashOffset:m||He,lineJoin:p!==void 0?p:Lt,lineWidth:y!==void 0?y:hn,miterLimit:E!==void 0?E:cn,strokeStyle:De(h||un)}}const i=e.getFont(),s=e.getOffsetX(),r=e.getOffsetY(),l=e.getRotateWithView(),o=e.getRotation(),c=e.getScaleArray(),_=e.getText(),u=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:i!==void 0?i:$s,textAlign:u!==void 0?u:dn,textBaseline:d!==void 0?d:Xn},this.text_=_!==void 0?Array.isArray(_)?_.reduce((h,f,g)=>h+=g%2?" ":f,""):_:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=r!==void 0?this.pixelRatio_*r:0,this.textRotateWithView_=l!==void 0?l:!1,this.textRotation_=o!==void 0?o:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const So=.5,er={Point:To,LineString:Co,Polygon:Do,MultiPoint:Mo,MultiLineString:ko,MultiPolygon:Lo,GeometryCollection:vo,Circle:Io};function Ro(a,e){return parseInt(J(a),10)-parseInt(J(e),10)}function Ki(a,e){const t=tr(a,e);return t*t}function tr(a,e){return So*a/e}function Io(a,e,t,n,i){const s=t.getFill(),r=t.getStroke();if(s||r){const o=a.getBuilder(t.getZIndex(),"Circle");o.setFillStrokeStyle(s,r),o.drawCircle(e,n,i)}const l=t.getText();if(l&&l.getText()){const o=a.getBuilder(t.getZIndex(),"Text");o.setTextStyle(l),o.drawText(e,n)}}function Wi(a,e,t,n,i,s,r,l){const o=[],c=t.getImage();if(c){let d=!0;const h=c.getImageState();h==G.LOADED||h==G.ERROR?d=!1:h==G.IDLE&&c.load(),d&&o.push(c.ready())}const _=t.getFill();_&&_.loading()&&o.push(_.ready());const u=o.length>0;return u&&Promise.all(o).then(()=>i(null)),Ao(a,e,t,n,s,r,l),u}function Ao(a,e,t,n,i,s,r){const l=t.getGeometryFunction()(e);if(!l)return;const o=l.simplifyTransformed(n,i);if(t.getRenderer())nr(a,o,t,e,r);else{const _=er[o.getType()];_(a,o,t,e,r,s)}}function nr(a,e,t,n,i){if(e.getType()=="GeometryCollection"){const r=e.getGeometries();for(let l=0,o=r.length;l<o;++l)nr(a,r[l],t,n,i);return}a.getBuilder(t.getZIndex(),"Default").drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer(),i)}function vo(a,e,t,n,i,s){const r=e.getGeometriesArray();let l,o;for(l=0,o=r.length;l<o;++l){const c=er[r[l].getType()];c(a,r[l],t,n,i,s)}}function Co(a,e,t,n,i){const s=t.getStroke();if(s){const l=a.getBuilder(t.getZIndex(),"LineString");l.setFillStrokeStyle(null,s),l.drawLineString(e,n,i)}const r=t.getText();if(r&&r.getText()){const l=a.getBuilder(t.getZIndex(),"Text");l.setTextStyle(r),l.drawText(e,n,i)}}function ko(a,e,t,n,i){const s=t.getStroke();if(s){const l=a.getBuilder(t.getZIndex(),"LineString");l.setFillStrokeStyle(null,s),l.drawMultiLineString(e,n,i)}const r=t.getText();if(r&&r.getText()){const l=a.getBuilder(t.getZIndex(),"Text");l.setTextStyle(r),l.drawText(e,n,i)}}function Lo(a,e,t,n,i){const s=t.getFill(),r=t.getStroke();if(r||s){const o=a.getBuilder(t.getZIndex(),"Polygon");o.setFillStrokeStyle(s,r),o.drawMultiPolygon(e,n,i)}const l=t.getText();if(l&&l.getText()){const o=a.getBuilder(t.getZIndex(),"Text");o.setTextStyle(l),o.drawText(e,n,i)}}function To(a,e,t,n,i,s){const r=t.getImage(),l=t.getText(),o=l&&l.getText(),c=s&&r&&o?{}:void 0;if(r){if(r.getImageState()!=G.LOADED)return;const _=a.getBuilder(t.getZIndex(),"Image");_.setImageStyle(r,c),_.drawPoint(e,n,i)}if(o){const _=a.getBuilder(t.getZIndex(),"Text");_.setTextStyle(l,c),_.drawText(e,n,i)}}function Mo(a,e,t,n,i,s){const r=t.getImage(),l=r&&r.getOpacity()!==0,o=t.getText(),c=o&&o.getText(),_=s&&l&&c?{}:void 0;if(l){if(r.getImageState()!=G.LOADED)return;const u=a.getBuilder(t.getZIndex(),"Image");u.setImageStyle(r,_),u.drawMultiPoint(e,n,i)}if(c){const u=a.getBuilder(t.getZIndex(),"Text");u.setTextStyle(o,_),u.drawText(e,n,i)}}function Do(a,e,t,n,i){const s=t.getFill(),r=t.getStroke();if(s||r){const o=a.getBuilder(t.getZIndex(),"Polygon");o.setFillStrokeStyle(s,r),o.drawPolygon(e,n,i)}const l=t.getText();if(l&&l.getText()){const o=a.getBuilder(t.getZIndex(),"Text");o.setTextStyle(l),o.drawText(e,n,i)}}let Oo=!1;function Po(a,e,t,n,i,s,r){const l=new XMLHttpRequest;l.open("GET",typeof a=="function"?a(t,n,i):a,!0),e.getType()=="arraybuffer"&&(l.responseType="arraybuffer"),l.withCredentials=Oo,l.onload=function(o){if(!l.status||l.status>=200&&l.status<300){const c=e.getType();try{let _;c=="text"||c=="json"?_=l.responseText:c=="xml"?_=l.responseXML||l.responseText:c=="arraybuffer"&&(_=l.response),_?s(e.readFeatures(_,{extent:t,featureProjection:i}),e.readProjection(_)):r()}catch{r()}}else r()},l.onerror=r,l.send()}function Xi(a,e){return function(t,n,i,s,r){Po(a,e,t,n,i,(l,o)=>{this.addFeatures(l),s!==void 0&&s(l)},()=>{this.changed(),r!==void 0&&r()})}}function Fo(a,e){return[[-1/0,-1/0,1/0,1/0]]}function ar(a,e,t=0,n=a.length-1,i=No){for(;n>t;){if(n-t>600){const o=n-t+1,c=e-t+1,_=Math.log(o),u=.5*Math.exp(2*_/3),d=.5*Math.sqrt(_*u*(o-u)/o)*(c-o/2<0?-1:1),h=Math.max(t,Math.floor(e-c*u/o+d)),f=Math.min(n,Math.floor(e+(o-c)*u/o+d));ar(a,e,h,f,i)}const s=a[e];let r=t,l=n;for(Wt(a,t,e),i(a[n],s)>0&&Wt(a,t,n);r<l;){for(Wt(a,r,l),r++,l--;i(a[r],s)<0;)r++;for(;i(a[l],s)>0;)l--}i(a[t],s)===0?Wt(a,t,l):(l++,Wt(a,l,n)),l<=e&&(t=l+1),e<=l&&(n=l-1)}}function Wt(a,e,t){const n=a[e];a[e]=a[t],a[t]=n}function No(a,e){return a<e?-1:a>e?1:0}let ir=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!Tn(e,t))return n;const i=this.toBBox,s=[];for(;t;){for(let r=0;r<t.children.length;r++){const l=t.children[r],o=t.leaf?i(l):l;Tn(e,o)&&(t.leaf?n.push(l):Ia(e,o)?this._all(l,n):s.push(l))}t=s.pop()}return n}collides(e){let t=this.data;if(!Tn(e,t))return!1;const n=[];for(;t;){for(let i=0;i<t.children.length;i++){const s=t.children[i],r=t.leaf?this.toBBox(s):s;if(Tn(e,r)){if(t.leaf||Ia(e,r))return!0;n.push(s)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=St([]),this}remove(e,t){if(!e)return this;let n=this.data;const i=this.toBBox(e),s=[],r=[];let l,o,c;for(;n||s.length;){if(n||(n=s.pop(),o=s[s.length-1],l=r.pop(),c=!0),n.leaf){const _=Bo(e,n.children,t);if(_!==-1)return n.children.splice(_,1),s.push(n),this._condense(s),this}!c&&!n.leaf&&Ia(n,i)?(s.push(n),r.push(l),l=0,o=n,n=n.children[0]):o?(l++,n=o.children[l],c=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,i){const s=n-t+1;let r=this._maxEntries,l;if(s<=r)return l=St(e.slice(t,n+1)),yt(l,this.toBBox),l;i||(i=Math.ceil(Math.log(s)/Math.log(r)),r=Math.ceil(s/Math.pow(r,i-1))),l=St([]),l.leaf=!1,l.height=i;const o=Math.ceil(s/r),c=o*Math.ceil(Math.sqrt(r));Yi(e,t,n,c,this.compareMinX);for(let _=t;_<=n;_+=c){const u=Math.min(_+c-1,n);Yi(e,_,u,o,this.compareMinY);for(let d=_;d<=u;d+=o){const h=Math.min(d+o-1,u);l.children.push(this._build(e,d,h,i-1))}}return yt(l,this.toBBox),l}_chooseSubtree(e,t,n,i){for(;i.push(t),!(t.leaf||i.length-1===n);){let s=1/0,r=1/0,l;for(let o=0;o<t.children.length;o++){const c=t.children[o],_=Ra(c),u=zo(e,c)-_;u<r?(r=u,s=_<s?_:s,l=c):u===r&&_<s&&(s=_,l=c)}t=l||t.children[0]}return t}_insert(e,t,n){const i=n?e:this.toBBox(e),s=[],r=this._chooseSubtree(i,this.data,t,s);for(r.children.push(e),qt(r,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)}_split(e,t){const n=e[t],i=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,i);const r=this._chooseSplitIndex(n,s,i),l=St(n.children.splice(r,n.children.length-r));l.height=n.height,l.leaf=n.leaf,yt(n,this.toBBox),yt(l,this.toBBox),t?e[t-1].children.push(l):this._splitRoot(n,l)}_splitRoot(e,t){this.data=St([e,t]),this.data.height=e.height+1,this.data.leaf=!1,yt(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let i,s=1/0,r=1/0;for(let l=t;l<=n-t;l++){const o=Zt(e,0,l,this.toBBox),c=Zt(e,l,n,this.toBBox),_=Vo(o,c),u=Ra(o)+Ra(c);_<s?(s=_,i=l,r=u<r?u:r):_===s&&u<r&&(r=u,i=l)}return i||n-t}_chooseSplitAxis(e,t,n){const i=e.leaf?this.compareMinX:Go,s=e.leaf?this.compareMinY:Uo,r=this._allDistMargin(e,t,n,i),l=this._allDistMargin(e,t,n,s);r<l&&e.children.sort(i)}_allDistMargin(e,t,n,i){e.children.sort(i);const s=this.toBBox,r=Zt(e,0,t,s),l=Zt(e,n-t,n,s);let o=Ln(r)+Ln(l);for(let c=t;c<n-t;c++){const _=e.children[c];qt(r,e.leaf?s(_):_),o+=Ln(r)}for(let c=n-t-1;c>=t;c--){const _=e.children[c];qt(l,e.leaf?s(_):_),o+=Ln(l)}return o}_adjustParentBBoxes(e,t,n){for(let i=n;i>=0;i--)qt(t[i],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():yt(e[t],this.toBBox)}};function Bo(a,e,t){if(!t)return e.indexOf(a);for(let n=0;n<e.length;n++)if(t(a,e[n]))return n;return-1}function yt(a,e){Zt(a,0,a.children.length,e,a)}function Zt(a,e,t,n,i){i||(i=St(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<t;s++){const r=a.children[s];qt(i,a.leaf?n(r):r)}return i}function qt(a,e){return a.minX=Math.min(a.minX,e.minX),a.minY=Math.min(a.minY,e.minY),a.maxX=Math.max(a.maxX,e.maxX),a.maxY=Math.max(a.maxY,e.maxY),a}function Go(a,e){return a.minX-e.minX}function Uo(a,e){return a.minY-e.minY}function Ra(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function Ln(a){return a.maxX-a.minX+(a.maxY-a.minY)}function zo(a,e){return(Math.max(e.maxX,a.maxX)-Math.min(e.minX,a.minX))*(Math.max(e.maxY,a.maxY)-Math.min(e.minY,a.minY))}function Vo(a,e){const t=Math.max(a.minX,e.minX),n=Math.max(a.minY,e.minY),i=Math.min(a.maxX,e.maxX),s=Math.min(a.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,s-n)}function Ia(a,e){return a.minX<=e.minX&&a.minY<=e.minY&&e.maxX<=a.maxX&&e.maxY<=a.maxY}function Tn(a,e){return e.minX<=a.maxX&&e.minY<=a.maxY&&e.maxX>=a.minX&&e.maxY>=a.minY}function St(a){return{children:a,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Yi(a,e,t,n,i){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=n)continue;const r=e+Math.ceil((t-e)/n/2)*n;ar(a,r,e,t,i),s.push(e,r,r,t)}}class Zi{constructor(e){this.rbush_=new ir(e),this.items_={}}insert(e,t){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[J(t)]=n}load(e,t){const n=new Array(t.length);for(let i=0,s=t.length;i<s;i++){const r=e[i],l=t[i],o={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:l};n[i]=o,this.items_[J(l)]=o}this.rbush_.load(n)}remove(e){const t=J(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){const n=this.items_[J(t)],i=[n.minX,n.minY,n.maxX,n.maxY];Vs(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let i=0,s=e.length;i<s;i++)if(n=t(e[i]),n)return n;return n}isEmpty(){return on(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Fa(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Ho extends Dt{constructor(e){super(),this.projection=fl(e.projection),this.attributions_=qi(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,i){t.viewResolver=n,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=qi(e),this.changed()}setState(e){this.state_=e,this.changed()}}function qi(a){return a?typeof a=="function"?a:(Array.isArray(a)||(a=[a]),e=>a):null}const ge={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class Xe extends Ja{constructor(e,t,n){super(e),this.feature=t,this.features=n}}class jo extends Ho{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.loader_=zs,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(se(this.format_,"`format` must be set when `url` is set"),this.loader_=Xi(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Fo;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Zi:null,this.loadedExtentsRtree_=new Zi,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,i;Array.isArray(e.features)?i=e.features:e.features&&(n=e.features,i=n.getArray()),!t&&n===void 0&&(n=new ql(i)),i!==void 0&&this.addFeaturesInternal(i),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=J(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const n=e.getGeometry();if(n){const i=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Xe(ge.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof pt||(this.featureChangeKeys_[e]=[tn(t,ze.CHANGE,this.handleFeatureChange_,this),tn(t,ul.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let n=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof pt){const s=this.idIndex_[i];s instanceof pt?Array.isArray(s)?s.push(t):this.idIndex_[i]=[s,t]:n=!1}else n=!1}return n&&(se(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],n=[],i=[];for(let s=0,r=e.length;s<r;s++){const l=e[s],o=J(l);this.addToIndex_(o,l)&&n.push(l)}for(let s=0,r=n.length;s<r;s++){const l=n[s],o=J(l);this.setupChangeEvents_(o,l);const c=l.getGeometry();if(c){const _=c.getExtent();t.push(_),i.push(l)}else this.nullGeometryFeatures_[o]=l}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(ge.ADDFEATURE))for(let s=0,r=n.length;s<r;s++)this.dispatchEvent(new Xe(ge.ADDFEATURE,n[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(ge.ADDFEATURE,function(n){t||(t=!0,e.push(n.feature),t=!1)}),this.addEventListener(ge.REMOVEFEATURE,function(n){t||(t=!0,e.remove(n.feature),t=!1)}),e.addEventListener(It.ADD,n=>{t||(t=!0,this.addFeature(n.element),t=!1)}),e.addEventListener(It.REMOVE,n=>{t||(t=!0,this.removeFeature(n.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(nn);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(n=>{this.removeFeatureInternal(n)});for(const n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Xe(ge.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(i){const s=i.getGeometry();if(s instanceof pt||s.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){const i=n.getGeometry();if(i instanceof pt||i.intersectsExtent(e)){const s=t(n);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),on(this.nullGeometryFeatures_)||dl(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){t.push(n)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=hl(e,t);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const n=e[0],i=e[1];let s=null;const r=[NaN,NaN];let l=1/0;const o=[-1/0,-1/0,1/0,1/0];return t=t||ml,this.featuresRtree_.forEachInExtent(o,function(c){if(t(c)){const _=c.getGeometry(),u=l;if(l=_ instanceof pt?0:_.closestPointXY(n,i,r,l),l<u){s=c;const d=Math.sqrt(l);o[0]=n-d,o[1]=i-d,o[2]=n+d,o[3]=i+d}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,n=J(t),i=t.getGeometry();if(!i)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{const r=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(r,t)):this.featuresRtree_&&this.featuresRtree_.update(r,t)}const s=t.getId();if(s!==void 0){const r=s.toString();this.idIndex_[r]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[r]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new Xe(ge.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:J(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&on(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){const i=this.loadedExtentsRtree_,s=this.strategy_(e,t,n);for(let r=0,l=s.length;r<l;++r){const o=s[r];i.forEachInExtent(o,function(_){return Xt(_.extent,o)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Xe(ge.FEATURESLOADSTART)),this.loader_.call(this,o,t,n,_=>{--this.loadingExtentsCount_,this.dispatchEvent(new Xe(ge.FEATURESLOADEND,void 0,_))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Xe(ge.FEATURESLOADERROR))}),i.insert(o,{extent:o.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,n=t.forEachInExtent(e,function(i){if(Vs(i.extent,e))return i});n&&t.remove(n)}removeFeatures(e){let t=!1;for(let n=0,i=e.length;n<i;++n)t=this.removeFeatureInternal(e[n])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=J(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const n=this.featureChangeKeys_[t];n==null||n.forEach(nn),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const s=i.toString(),r=this.idIndex_[s];r===e?delete this.idIndex_[s]:Array.isArray(r)&&(r.splice(r.indexOf(e),1),r.length===1&&(this.idIndex_[s]=r[0]))}return delete this.uidIndex_[t],this.hasListener(ge.REMOVEFEATURE)&&this.dispatchEvent(new Xe(ge.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){se(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(Xi(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class ye{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new ye({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=si(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===G.IDLE&&t.load(),t.getImageState()===G.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?J(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Ct(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class we{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new we({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function Tt(a,e){return Array.isArray(a)?a:(e===void 0?e=[a,a]:(e[0]=a,e[1]=a),e)}class Jn{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Tt(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Jn({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return te()}getImage(e){return te()}getHitDetectionImage(){return te()}getPixelRatio(e){return 1}getImageState(){return te()}getImageSize(){return te()}getOrigin(){return te()}getSize(){return te()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Tt(e)}listenImageChange(e){te()}load(){te()}unlistenImageChange(e){te()}ready(){return Promise.resolve()}}class Qn extends Jn{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.imageState_=this.fill_&&this.fill_.loading()?G.LOADING:G.LOADED,this.imageState_===G.LOADING&&this.ready().then(()=>this.imageState_=G.LOADED),this.render()}clone(){const e=this.getScale(),t=new Qn({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var s,r;const t=(s=this.fill_)==null?void 0:s.getKey(),n=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let i=(r=Me.get(n,null,null))==null?void 0:r.getImage(1);if(!i){const l=this.renderOptions_,o=Math.ceil(l.size*e),c=re(o,o);this.draw_(l,c,e),i=c.canvas,Me.set(n,null,null,new Zs(i,void 0,null,G.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const S=i;i=s,s=S}const r=this.radius2_===void 0?this.points_:this.points_*2,l=2*Math.PI/r,o=s*Math.sin(l),c=Math.sqrt(s*s-o*o),_=i-c,u=Math.sqrt(o*o+_*_),d=u/o;if(e==="miter"&&d<=n)return d*t;const h=t/2/d,f=t/2*(_/u),m=Math.sqrt((i+h)*(i+h)+f*f)-i;if(this.radius2_===void 0||e==="bevel")return m*2;const p=i*Math.sin(l),y=Math.sqrt(i*i-p*p),E=s-y,x=Math.sqrt(p*p+E*E)/p;if(x<=n){const S=x*t/2-s-i;return 2*Math.max(m,S)}return m*2}createRenderOptions(){let e=kt,t=Lt,n=0,i=null,s=0,r,l=0;this.stroke_&&(r=De(this.stroke_.getColor()??un),l=this.stroke_.getWidth()??hn,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Lt,e=this.stroke_.getLineCap()??kt,n=this.stroke_.getMiterLimit()??cn);const o=this.calculateLineJoinSize_(t,l,n),c=Math.max(this.radius,this.radius2_||0),_=Math.ceil(2*c+o);return{strokeStyle:r,strokeWidth:l,size:_,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:t,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=le),t.fillStyle=De(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let n=this.fill_.getColor(),i=0;typeof n=="string"&&(n=Ct(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0&&(t=re(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const n=this.radius;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const i=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,r=2*Math.PI/t;for(let l=0;l<t;l++){const o=s+l*r,c=l%2===0?n:i;e.lineTo(c*Math.cos(o),c*Math.sin(o))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=le,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class ea extends Qn{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new ea({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Ee{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=$i,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Ee({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=$i,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function Ko(a){let e;if(typeof a=="function")e=a;else{let t;Array.isArray(a)?t=a:(se(typeof a.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[a]),e=function(){return t}}return e}let Aa=null;function sr(a,e){if(!Aa){const t=new ye({color:"rgba(255,255,255,0.4)"}),n=new we({color:"#3399CC",width:1.25});Aa=[new Ee({image:new ea({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return Aa}function $i(a){return a.getGeometry()}const Wo="#333";class _t{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=Tt(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new ye({color:Wo}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new _t({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Tt(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const pe={ANIMATING:0,INTERACTING:1},k={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Mn=[k.FILL],$e=[k.STROKE],ct=[k.BEGIN_PATH],Ji=[k.CLOSE_PATH];class wn extends qs{constructor(e,t,n,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(n){return n*t})}appendFlatPointCoordinates(e,t){const n=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let r=s.length;for(let l=0,o=e.length;l<o;l+=t)i[0]=e[l],i[1]=e[l+1],Ba(n,i)&&(s[r++]=i[0],s[r++]=i[1]);return r}appendFlatLineCoordinates(e,t,n,i,s,r){const l=this.coordinates;let o=l.length;const c=this.getBufferedMaxExtent();r&&(t+=i);let _=e[t],u=e[t+1];const d=this.tmpCoordinate_;let h=!0,f,g,m;for(f=t+i;f<n;f+=i)d[0]=e[f],d[1]=e[f+1],m=Ol(c,d),m!==g?(h&&(l[o++]=_,l[o++]=u,h=!1),l[o++]=d[0],l[o++]=d[1]):m===Pl.INTERSECTING?(l[o++]=d[0],l[o++]=d[1],h=!1):h=!0,_=d[0],u=d[1],g=m;return(s&&h||f===t+i)&&(l[o++]=_,l[o++]=u),o}drawCustomCoordinates_(e,t,n,i,s){for(let r=0,l=n.length;r<l;++r){const o=n[r],c=this.appendFlatLineCoordinates(e,t,o,i,!1,!1);s.push(c),t=o}return t}drawCustom(e,t,n,i,s){this.beginGeometry(e,t,s);const r=e.getType(),l=e.getStride(),o=this.coordinates.length;let c,_,u,d,h;switch(r){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),d=[];const f=e.getEndss();h=0;for(let g=0,m=f.length;g<m;++g){const p=[];h=this.drawCustomCoordinates_(c,h,f[g],l,p),d.push(p)}this.instructions.push([k.CUSTOM,o,d,e,n,Gi,s]),this.hitDetectionInstructions.push([k.CUSTOM,o,d,e,i||n,Gi,s]);break;case"Polygon":case"MultiLineString":u=[],c=r=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),h=this.drawCustomCoordinates_(c,0,e.getEnds(),l,u),this.instructions.push([k.CUSTOM,o,u,e,n,Bi,s]),this.hitDetectionInstructions.push([k.CUSTOM,o,u,e,i||n,Bi,s]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),_=this.appendFlatLineCoordinates(c,0,c.length,l,!1,!1),this.instructions.push([k.CUSTOM,o,_,e,n,vn,s]),this.hitDetectionInstructions.push([k.CUSTOM,o,_,e,i||n,vn,s]);break;case"MultiPoint":c=e.getFlatCoordinates(),_=this.appendFlatPointCoordinates(c,l),_>o&&(this.instructions.push([k.CUSTOM,o,_,e,n,vn,s]),this.hitDetectionInstructions.push([k.CUSTOM,o,_,e,i||n,vn,s]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),_=this.coordinates.length,this.instructions.push([k.CUSTOM,o,_,e,n,void 0,s]),this.hitDetectionInstructions.push([k.CUSTOM,o,_,e,i||n,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,n){this.beginGeometryInstruction1_=[k.BEGIN_GEOMETRY,t,0,e,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[k.BEGIN_GEOMETRY,t,0,e,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const n=e.length;let i,s,r=-1;for(t=0;t<n;++t)i=e[t],s=i[0],s==k.END_GEOMETRY?r=t:s==k.BEGIN_GEOMETRY&&(i[2]=t,Fl(this.hitDetectionInstructions,r,t),r=-1)}fillStyleToState(e,t={}){if(e){const n=e.getColor();t.fillPatternScale=n&&typeof n=="object"&&"src"in n?this.pixelRatio:1,t.fillStyle=De(n||le)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const n=e.getColor();t.strokeStyle=De(n||un);const i=e.getLineCap();t.lineCap=i!==void 0?i:kt;const s=e.getLineDash();t.lineDash=s?s.slice():Ve;const r=e.getLineDashOffset();t.lineDashOffset=r||He;const l=e.getLineJoin();t.lineJoin=l!==void 0?l:Lt;const o=e.getWidth();t.lineWidth=o!==void 0?o:hn;const c=e.getMiterLimit();t.miterLimit=c!==void 0?c:cn,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const n=this.state;this.fillStyleToState(e,n),this.strokeStyleToState(t,n)}createFill(e){const t=e.fillStyle,n=[k.SET_FILL_STYLE,t];return typeof t!="string"&&n.push(e.fillPatternScale),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[k.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const n=e.fillStyle;(typeof n!="string"||e.currentFillStyle!=n)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){const n=e.strokeStyle,i=e.lineCap,s=e.lineDash,r=e.lineDashOffset,l=e.lineJoin,o=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=i||s!=e.currentLineDash&&!bn(e.currentLineDash,s)||e.currentLineDashOffset!=r||e.currentLineJoin!=l||e.currentLineWidth!=o||e.currentMiterLimit!=c)&&(t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=r,e.currentLineJoin=l,e.currentLineWidth=o,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[k.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Nl(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Qa(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Xo extends wn{constructor(e,t,n,i){super(e,t,n,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,n){if(!this.image_||this.maxExtent&&!Ba(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,n);const i=e.getFlatCoordinates(),s=e.getStride(),r=this.coordinates.length,l=this.appendFlatPointCoordinates(i,s);this.instructions.push([k.DRAW_IMAGE,r,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([k.DRAW_IMAGE,r,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,n){if(!this.image_)return;this.beginGeometry(e,t,n);const i=e.getFlatCoordinates(),s=[];for(let o=0,c=i.length;o<c;o+=e.getStride())(!this.maxExtent||Ba(this.maxExtent,i.slice(o,o+2)))&&s.push(i[o],i[o+1]);const r=this.coordinates.length,l=this.appendFlatPointCoordinates(s,2);this.instructions.push([k.DRAW_IMAGE,r,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([k.DRAW_IMAGE,r,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const n=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class Yo extends wn{constructor(e,t,n,i){super(e,t,n,i)}drawFlatCoordinates_(e,t,n,i){const s=this.coordinates.length,r=this.appendFlatLineCoordinates(e,t,n,i,!1,!1),l=[k.MOVE_TO_LINE_TO,s,r];return this.instructions.push(l),this.hitDetectionInstructions.push(l),n}drawLineString(e,t,n){const i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([k.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ve,He],ct);const l=e.getFlatCoordinates(),o=e.getStride();this.drawFlatCoordinates_(l,0,l.length,o),this.hitDetectionInstructions.push($e),this.endGeometry(t)}drawMultiLineString(e,t,n){const i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([k.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ve,He],ct);const l=e.getEnds(),o=e.getFlatCoordinates(),c=e.getStride();let _=0;for(let u=0,d=l.length;u<d;++u)_=this.drawFlatCoordinates_(o,_,l[u],c);this.hitDetectionInstructions.push($e),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push($e),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push($e),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(ct)}}class Qi extends wn{constructor(e,t,n,i){super(e,t,n,i)}drawFlatCoordinatess_(e,t,n,i){const s=this.state,r=s.fillStyle!==void 0,l=s.strokeStyle!==void 0,o=n.length;this.instructions.push(ct),this.hitDetectionInstructions.push(ct);for(let c=0;c<o;++c){const _=n[c],u=this.coordinates.length,d=this.appendFlatLineCoordinates(e,t,_,i,!0,!l),h=[k.MOVE_TO_LINE_TO,u,d];this.instructions.push(h),this.hitDetectionInstructions.push(h),l&&(this.instructions.push(Ji),this.hitDetectionInstructions.push(Ji)),t=_}return r&&(this.instructions.push(Mn),this.hitDetectionInstructions.push(Mn)),l&&(this.instructions.push($e),this.hitDetectionInstructions.push($e)),t}drawCircle(e,t,n){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([k.SET_FILL_STYLE,le]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([k.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ve,He]);const l=e.getFlatCoordinates(),o=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1);const _=[k.CIRCLE,c];this.instructions.push(ct,_),this.hitDetectionInstructions.push(ct,_),i.fillStyle!==void 0&&(this.instructions.push(Mn),this.hitDetectionInstructions.push(Mn)),i.strokeStyle!==void 0&&(this.instructions.push($e),this.hitDetectionInstructions.push($e)),this.endGeometry(t)}drawPolygon(e,t,n){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([k.SET_FILL_STYLE,le]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([k.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ve,He]);const l=e.getEnds(),o=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(o,0,l,c),this.endGeometry(t)}drawMultiPolygon(e,t,n){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([k.SET_FILL_STYLE,le]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([k.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ve,He]);const l=e.getEndss(),o=e.getOrientedFlatCoordinates(),c=e.getStride();let _=0;for(let u=0,d=l.length;u<d;++u)_=this.drawFlatCoordinatess_(o,_,l[u],c);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let n=0,i=t.length;n<i;++n)t[n]=Dl(t[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function Zo(a,e,t,n,i){const s=[];let r=t,l=0,o=e.slice(t,2);for(;l<a&&r+i<n;){const[c,_]=o.slice(-2),u=e[r+i],d=e[r+i+1],h=Math.sqrt((u-c)*(u-c)+(d-_)*(d-_));if(l+=h,l>=a){const f=(a-l+h)/h,g=ke(c,u,f),m=ke(_,d,f);o.push(g,m),s.push(o),o=[g,m],l==a&&(r+=i),l=0}else if(l<a)o.push(e[r+i],e[r+i+1]),r+=i;else{const f=h-l,g=ke(c,u,f/h),m=ke(_,d,f/h);o.push(g,m),s.push(o),o=[g,m],l=0,r+=i}}return l>0&&s.push(o),s}function qo(a,e,t,n,i){let s=t,r=t,l=0,o=0,c=t,_,u,d,h,f,g,m,p,y,E;for(u=t;u<n;u+=i){const b=e[u],x=e[u+1];f!==void 0&&(y=b-f,E=x-g,h=Math.sqrt(y*y+E*E),m!==void 0&&(o+=d,_=Math.acos((m*y+p*E)/(d*h)),_>a&&(o>l&&(l=o,s=c,r=u),o=0,c=u-i)),d=h,m=y,p=E),f=b,g=x}return o+=h,o>l?[c,u]:[s,r]}const Yn={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class $o extends wn{constructor(e,t,n,i){super(e,t,n,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[le]={fillStyle:le},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,n){const i=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!i&&!s)return;const l=this.coordinates;let o=l.length;const c=e.getType();let _=null,u=e.getStride();if(r.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!Le(this.maxExtent,e.getExtent()))return;let d;if(_=e.getFlatCoordinates(),c=="LineString")d=[_.length];else if(c=="MultiLineString")d=e.getEnds();else if(c=="Polygon")d=e.getEnds().slice(0,1);else if(c=="MultiPolygon"){const m=e.getEndss();d=[];for(let p=0,y=m.length;p<y;++p)d.push(m[p][0])}this.beginGeometry(e,t,n);const h=r.repeat,f=h?void 0:r.textAlign;let g=0;for(let m=0,p=d.length;m<p;++m){let y;h?y=Zo(h*this.resolution,_,g,d[m],u):y=[_.slice(g,d[m])];for(let E=0,b=y.length;E<b;++E){const x=y[E];let S=0,I=x.length;if(f==null){const A=qo(r.maxAngle,x,0,x.length,2);S=A[0],I=A[1]}for(let A=S;A<I;A+=u)l.push(x[A],x[A+1]);const R=l.length;g=d[m],this.drawChars_(o,R),o=R}}this.endGeometry(t)}else{let d=r.overflow?null:[];switch(c){case"Point":case"MultiPoint":_=e.getFlatCoordinates();break;case"LineString":_=e.getFlatMidpoint();break;case"Circle":_=e.getCenter();break;case"MultiLineString":_=e.getFlatMidpoints(),u=2;break;case"Polygon":_=e.getFlatInteriorPoint(),r.overflow||d.push(_[2]/this.resolution),u=3;break;case"MultiPolygon":const b=e.getFlatInteriorPoints();_=[];for(let x=0,S=b.length;x<S;x+=3)r.overflow||d.push(b[x+2]/this.resolution),_.push(b[x],b[x+1]);if(_.length===0)return;u=2;break}const h=this.appendFlatPointCoordinates(_,u);if(h===o)return;if(d&&(h-o)/2!==_.length/u){let b=o/2;d=d.filter((x,S)=>{const I=l[(b+S)*2]===_[S*u]&&l[(b+S)*2+1]===_[S*u+1];return I||--b,I})}this.saveTextStates_();const f=r.backgroundFill?this.createFill(this.fillStyleToState(r.backgroundFill)):null,g=r.backgroundStroke?this.createStroke(this.strokeStyleToState(r.backgroundStroke)):null;this.beginGeometry(e,t,n);let m=r.padding;if(m!=ot&&(r.scale[0]<0||r.scale[1]<0)){let b=r.padding[0],x=r.padding[1],S=r.padding[2],I=r.padding[3];r.scale[0]<0&&(x=-x,I=-I),r.scale[1]<0&&(b=-b,S=-S),m=[b,x,S,I]}const p=this.pixelRatio;this.instructions.push([k.DRAW_IMAGE,o,h,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,m==ot?ot:m.map(function(b){return b*p}),f,g,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const y=1/p,E=f?f.slice(0):null;E&&(E[1]=le),this.hitDetectionInstructions.push([k.DRAW_IMAGE,o,h,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[y,y],NaN,this.declutterMode_,this.declutterImageWithText_,m,E,g,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?le:this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||dn,justify:t.justify,textBaseline:t.textBaseline||Xn,scale:t.scale});const r=this.fillKey_;n&&(r in this.fillStates||(this.fillStates[r]={fillStyle:n.fillStyle}))}drawChars_(e,t){const n=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,r=this.textKey_,l=this.fillKey_;this.saveTextStates_();const o=this.pixelRatio,c=Yn[i.textBaseline],_=this.textOffsetY_*o,u=this.text_,d=n?n.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([k.DRAW_CHARS,e,t,c,i.overflow,l,i.maxAngle,o,_,s,d*o,u,r,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([k.DRAW_CHARS,e,t,c,i.overflow,l&&le,i.maxAngle,o,_,s,d*o,u,r,1/o,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let n,i,s;if(!e)this.text_="";else{const r=e.getFill();r?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=De(r.getColor()||le)):(i=null,this.textFillState_=i);const l=e.getStroke();if(!l)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const g=l.getLineDash(),m=l.getLineDashOffset(),p=l.getWidth(),y=l.getMiterLimit();s.lineCap=l.getLineCap()||kt,s.lineDash=g?g.slice():Ve,s.lineDashOffset=m===void 0?He:m,s.lineJoin=l.getLineJoin()||Lt,s.lineWidth=p===void 0?hn:p,s.miterLimit=y===void 0?cn:y,s.strokeStyle=De(l.getColor()||un)}n=this.textState_;const o=e.getFont()||$s;po(o);const c=e.getScaleArray();n.overflow=e.getOverflow(),n.font=o,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||Xn,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||ot,n.scale=c===void 0?[1,1]:c;const _=e.getOffsetX(),u=e.getOffsetY(),d=e.getRotateWithView(),h=e.getKeepUpright(),f=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=_===void 0?0:_,this.textOffsetY_=u===void 0?0:u,this.textRotateWithView_=d===void 0?!1:d,this.textKeepUpright_=h===void 0?!0:h,this.textRotation_=f===void 0?0:f,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:J(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+J(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const Jo={Circle:Qi,Default:wn,Image:Xo,LineString:Yo,Polygon:Qi,Text:$o};class Qo{constructor(e,t,n,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const n=this.buildersByZIndex_[t];for(const i in n){const s=n[i].finish();e[t][i]=s}}return e}getBuilder(e,t){const n=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[n];i===void 0&&(i={},this.buildersByZIndex_[n]=i);let s=i[t];if(s===void 0){const r=Jo[t];s=new r(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=s}return s}}function e_(a,e,t,n,i,s,r,l,o,c,_,u,d=!0){let h=a[e],f=a[e+1],g=0,m=0,p=0,y=0;function E(){g=h,m=f,e+=n,h=a[e],f=a[e+1],y+=p,p=Math.sqrt((h-g)*(h-g)+(f-m)*(f-m))}do E();while(e<t-n&&y+p<s);let b=p===0?0:(s-y)/p;const x=ke(g,h,b),S=ke(m,f,b),I=e-n,R=y,A=s+l*o(c,i,_);for(;e<t-n&&y+p<A;)E();b=p===0?0:(A-y)/p;const C=ke(g,h,b),D=ke(m,f,b);let L=!1;if(d)if(u){const U=[x,S,C,D];zl(U,0,4,2,u,U,U),L=U[0]>U[2]}else L=x>C;const F=Math.PI,T=[],j=I+n===e;e=I,p=0,y=R,h=a[e],f=a[e+1];let O;if(j){E(),O=Math.atan2(f-m,h-g),L&&(O+=O>0?-F:F);const U=(C+x)/2,V=(D+S)/2;return T[0]=[U,V,(A-s)/2,O,i],T}i=i.replace(/\n/g," ");for(let U=0,V=i.length;U<V;){E();let X=Math.atan2(f-m,h-g);if(L&&(X+=X>0?-F:F),O!==void 0){let de=X-O;if(de+=de>F?-2*F:de<-F?2*F:0,Math.abs(de)>r)return null}O=X;const W=U;let Y=0;for(;U<V;++U){const de=L?V-U-1:U,Re=l*o(c,i[de],_);if(e+n<t&&y+p<s+Y+Re/2)break;Y+=Re}if(U===W)continue;const v=L?i.substring(V-W,V-U):i.substring(W,U);b=p===0?0:(s+Y/2-y)/p;const et=ke(g,h,b),tt=ke(m,f,b);T.push([et,tt,Y/2,X,v]),s+=Y}return T}class rr{constructor(){Mi(this,"pushMethodArgs_",(...e)=>(this.push_(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Wn(),{get:(e,t)=>{if(typeof Wn()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,n)=>(this.push_(t,n),!0)})}push_(...e){const t=this.instructions_,n=this.zIndex+this.offset_;t[n]||(t[n]=[]),t[n].push(...e)}pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let n=0,i=t.length;n<i;++n){const s=t[n];if(typeof s=="function"){s(e);continue}const r=t[++n];if(typeof e[s]=="function")e[s](...r);else{if(typeof r=="function"){e[s]=r(e);continue}e[s]=r}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const bt=Kn(),Ye=[],Ne=[],Be=[],Ze=[];function es(a){return a[3].declutterBox}const ts=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function va(a,e){return e==="start"?e=ts.test(a)?"right":"left":e==="end"&&(e=ts.test(a)?"left":"right"),Yn[e]}function t_(a,e,t){return t>0&&a.push(`
`,""),a.push(e,""),a}function n_(a,e,t){return t%2===0&&(a+=e),a}class a_{constructor(e,t,n,i,s){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=ut(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new rr:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,n,i){const s=e+t+n+i;if(this.labels_[s])return this.labels_[s];const r=i?this.strokeStates[i]:null,l=n?this.fillStates[n]:null,o=this.textStates[t],c=this.pixelRatio,_=[o.scale[0]*c,o.scale[1]*c],u=o.justify?Yn[o.justify]:va(Array.isArray(e)?e[0]:e,o.textAlign||dn),d=i&&r.lineWidth?r.lineWidth:0,h=Array.isArray(e)?e:String(e).split(`
`).reduce(t_,[]),{width:f,height:g,widths:m,heights:p,lineWidths:y}=bo(o,h),E=f+d,b=[],x=(E+2)*_[0],S=(g+d)*_[1],I={width:x<0?Math.floor(x):Math.ceil(x),height:S<0?Math.floor(S):Math.ceil(S),contextInstructions:b};(_[0]!=1||_[1]!=1)&&b.push("scale",_),i&&(b.push("strokeStyle",r.strokeStyle),b.push("lineWidth",d),b.push("lineCap",r.lineCap),b.push("lineJoin",r.lineJoin),b.push("miterLimit",r.miterLimit),b.push("setLineDash",[r.lineDash]),b.push("lineDashOffset",r.lineDashOffset)),n&&b.push("fillStyle",l.fillStyle),b.push("textBaseline","middle"),b.push("textAlign","center");const R=.5-u;let A=u*E+R*d;const C=[],D=[];let L=0,F=0,T=0,j=0,O;for(let U=0,V=h.length;U<V;U+=2){const X=h[U];if(X===`
`){F+=L,L=0,A=u*E+R*d,++j;continue}const W=h[U+1]||o.font;W!==O&&(i&&C.push("font",W),n&&D.push("font",W),O=W),L=Math.max(L,p[T]);const Y=[X,A+R*m[T]+u*(m[T]-y[j]),.5*(d+L)+F];A+=m[T],i&&C.push("strokeText",Y),n&&D.push("fillText",Y),++T}return Array.prototype.push.apply(b,C),Array.prototype.push.apply(b,D),this.labels_[s]=I,I}replayTextBackground_(e,t,n,i,s,r,l){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,t),r&&(this.alignAndScaleFill_=r[2],e.fillStyle=r[1],this.fill_(e)),l&&(this.setStrokeStyle_(e,l),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,i,s,r,l,o,c,_,u,d,h,f,g,m){l*=d[0],o*=d[1];let p=n-l,y=i-o;const E=s+c>e?e-c:s,b=r+_>t?t-_:r,x=f[3]+E*d[0]+f[1],S=f[0]+b*d[1]+f[2],I=p-f[3],R=y-f[0];(g||u!==0)&&(Ye[0]=I,Ze[0]=I,Ye[1]=R,Ne[1]=R,Ne[0]=I+x,Be[0]=Ne[0],Be[1]=R+S,Ze[1]=Be[1]);let A;return u!==0?(A=_n(ut(),n,i,1,1,u,-n,-i),ue(A,Ye),ue(A,Ne),ue(A,Be),ue(A,Ze),Fa(Math.min(Ye[0],Ne[0],Be[0],Ze[0]),Math.min(Ye[1],Ne[1],Be[1],Ze[1]),Math.max(Ye[0],Ne[0],Be[0],Ze[0]),Math.max(Ye[1],Ne[1],Be[1],Ze[1]),bt)):Fa(Math.min(I,I+x),Math.min(R,R+S),Math.max(I,I+x),Math.max(R,R+S),bt),h&&(p=Math.round(p),y=Math.round(y)),{drawImageX:p,drawImageY:y,drawImageW:E,drawImageH:b,originX:c,originY:_,declutterBox:{minX:bt[0],minY:bt[1],maxX:bt[2],maxY:bt[3],value:m},canvasTransform:A,scale:d}}replayImageOrLabel_(e,t,n,i,s,r,l){const o=!!(r||l),c=i.declutterBox,_=l?l[2]*i.scale[0]/2:0;return c.minX-_<=t[0]&&c.maxX+_>=0&&c.minY-_<=t[1]&&c.maxY+_>=0&&(o&&this.replayTextBackground_(e,Ye,Ne,Be,Ze,r,l),wo(e,i.canvasTransform,s,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const n=ue(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(n[0]%i,n[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,n,i){const s=this.textStates[t],r=this.createLabel(e,t,i,n),l=this.strokeStates[n],o=this.pixelRatio,c=va(Array.isArray(e)?e[0]:e,s.textAlign||dn),_=Yn[s.textBaseline||Xn],u=l&&l.lineWidth?l.lineWidth:0,d=r.width/o-2*s.scale[0],h=c*d+2*(.5-c)*u,f=_*r.height/o+2*(.5-_)*u;return{label:r,anchorX:h,anchorY:f}}execute_(e,t,n,i,s,r,l,o){const c=this.zIndexContext_;let _;this.pixelCoordinates_&&bn(n,this.renderedTransform_)?_=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),_=sn(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),Bl(this.renderedTransform_,n));let u=0;const d=i.length;let h=0,f,g,m,p,y,E,b,x,S,I,R,A,C,D=0,L=0;const F=this.coordinateCache_,T=this.viewRotation_,j=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,O={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:T},U=this.instructions!=i||this.overlaps?0:200;let V,X,W,Y;for(;u<d;){const v=i[u];switch(v[0]){case k.BEGIN_GEOMETRY:V=v[1],Y=v[3],V.getGeometry()?l!==void 0&&!Le(l,Y.getExtent())?u=v[2]+1:++u:u=v[2],c&&(c.zIndex=v[4]);break;case k.BEGIN_PATH:D>U&&(this.fill_(e),D=0),L>U&&(e.stroke(),L=0),!D&&!L&&(e.beginPath(),y=NaN,E=NaN),++u;break;case k.CIRCLE:h=v[1];const tt=_[h],de=_[h+1],Re=_[h+2],nt=_[h+3],Sn=Re-tt,Ft=nt-de,at=Math.sqrt(Sn*Sn+Ft*Ft);e.moveTo(tt+at,de),e.arc(tt,de,at,0,2*Math.PI,!0),++u;break;case k.CLOSE_PATH:e.closePath(),++u;break;case k.CUSTOM:h=v[1],f=v[2];const Ur=v[3],zr=v[4],Si=v[5];O.geometry=Ur,O.feature=V,u in F||(F[u]=[]);const Nt=F[u];Si?Si(_,h,f,2,Nt):(Nt[0]=_[h],Nt[1]=_[h+1],Nt.length=2),c&&(c.zIndex=v[6]),zr(Nt,O),++u;break;case k.DRAW_IMAGE:h=v[1],f=v[2],S=v[3],g=v[4],m=v[5];let oa=v[6];const Vr=v[7],Hr=v[8],jr=v[9],Ri=v[10];let _a=v[11];const Kr=v[12];let Rn=v[13];p=v[14]||"declutter";const Bt=v[15];if(!S&&v.length>=20){I=v[19],R=v[20],A=v[21],C=v[22];const he=this.drawLabelWithPointPlacement_(I,R,A,C);S=he.label,v[3]=S;const it=v[23];g=(he.anchorX-it)*this.pixelRatio,v[4]=g;const fe=v[24];m=(he.anchorY-fe)*this.pixelRatio,v[5]=m,oa=S.height,v[6]=oa,Rn=S.width,v[13]=Rn}let ca;v.length>25&&(ca=v[25]);let ua,In,An;v.length>17?(ua=v[16],In=v[17],An=v[18]):(ua=ot,In=null,An=null),Ri&&j?_a+=T:!Ri&&!j&&(_a-=T);let Wr=0;for(;h<f;h+=2){if(ca&&ca[Wr++]<Rn/this.pixelRatio)continue;const he=this.calculateImageOrLabelDimensions_(S.width,S.height,_[h],_[h+1],Rn,oa,g,m,Hr,jr,_a,Kr,s,ua,!!In||!!An,V),it=[e,t,S,he,Vr,In,An];if(o){let fe,Ie,me;if(Bt){const Z=f-h;if(!Bt[Z]){Bt[Z]={args:it,declutterMode:p};continue}const ne=Bt[Z];fe=ne.args,Ie=ne.declutterMode,delete Bt[Z],me=es(fe)}let Oe,Pe;if(fe&&(Ie!=="declutter"||!o.collides(me))&&(Oe=!0),(p!=="declutter"||!o.collides(he.declutterBox))&&(Pe=!0),Ie==="declutter"&&p==="declutter"){const Z=Oe&&Pe;Oe=Z,Pe=Z}Oe&&(Ie!=="none"&&o.insert(me),this.replayImageOrLabel_.apply(this,fe)),Pe&&(p!=="none"&&o.insert(he.declutterBox),this.replayImageOrLabel_.apply(this,it))}else this.replayImageOrLabel_.apply(this,it)}++u;break;case k.DRAW_CHARS:const Ii=v[1],Ai=v[2],da=v[3],Xr=v[4];C=v[5];const Yr=v[6],vi=v[7],Ci=v[8];A=v[9];const ha=v[10];I=v[11],Array.isArray(I)&&(I=I.reduce(n_,"")),R=v[12];const ki=[v[13],v[13]];p=v[14]||"declutter";const Zr=v[15],fa=this.textStates[R],Gt=fa.font,Ut=[fa.scale[0]*vi,fa.scale[1]*vi];let zt;Gt in this.widths_?zt=this.widths_[Gt]:(zt={},this.widths_[Gt]=zt);const Li=Gl(_,Ii,Ai,2),Ti=Math.abs(Ut[0])*ji(Gt,I,zt);if(Xr||Ti<=Li){const he=this.textStates[R].textAlign,it=(Li-Ti)*va(I,he),fe=e_(_,Ii,Ai,2,I,it,Yr,Math.abs(Ut[0]),ji,Gt,zt,j?0:this.viewRotation_,Zr);e:if(fe){const Ie=[];let me,Oe,Pe,Z,ne;if(A)for(me=0,Oe=fe.length;me<Oe;++me){ne=fe[me],Pe=ne[4],Z=this.createLabel(Pe,R,"",A),g=ne[2]+(Ut[0]<0?-ha:ha),m=da*Z.height+(.5-da)*2*ha*Ut[1]/Ut[0]-Ci;const Fe=this.calculateImageOrLabelDimensions_(Z.width,Z.height,ne[0],ne[1],Z.width,Z.height,g,m,0,0,ne[3],ki,!1,ot,!1,V);if(o&&p==="declutter"&&o.collides(Fe.declutterBox))break e;Ie.push([e,t,Z,Fe,1,null,null])}if(C)for(me=0,Oe=fe.length;me<Oe;++me){ne=fe[me],Pe=ne[4],Z=this.createLabel(Pe,R,C,""),g=ne[2],m=da*Z.height-Ci;const Fe=this.calculateImageOrLabelDimensions_(Z.width,Z.height,ne[0],ne[1],Z.width,Z.height,g,m,0,0,ne[3],ki,!1,ot,!1,V);if(o&&p==="declutter"&&o.collides(Fe.declutterBox))break e;Ie.push([e,t,Z,Fe,1,null,null])}o&&p!=="none"&&o.load(Ie.map(es));for(let Fe=0,qr=Ie.length;Fe<qr;++Fe)this.replayImageOrLabel_.apply(this,Ie[Fe])}}++u;break;case k.END_GEOMETRY:if(r!==void 0){V=v[1];const he=r(V,Y,p);if(he)return he}++u;break;case k.FILL:U?D++:this.fill_(e),++u;break;case k.MOVE_TO_LINE_TO:for(h=v[1],f=v[2],X=_[h],W=_[h+1],e.moveTo(X,W),y=X+.5|0,E=W+.5|0,h+=2;h<f;h+=2)X=_[h],W=_[h+1],b=X+.5|0,x=W+.5|0,(h==f-2||b!==y||x!==E)&&(e.lineTo(X,W),y=b,E=x);++u;break;case k.SET_FILL_STYLE:this.alignAndScaleFill_=v[2],D&&(this.fill_(e),D=0,L&&(e.stroke(),L=0)),e.fillStyle=v[1],++u;break;case k.SET_STROKE_STYLE:L&&(e.stroke(),L=0),this.setStrokeStyle_(e,v),++u;break;case k.STROKE:U?L++:e.stroke(),++u;break;default:++u;break}}D&&this.fill_(e),L&&e.stroke()}execute(e,t,n,i,s,r){this.viewRotation_=i,this.execute_(e,t,n,this.instructions,s,void 0,void 0,r)}executeHitDetection(e,t,n,i,s){return this.viewRotation_=n,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,s)}}const rt=["Polygon","Circle","LineString","Image","Text","Default"],lr=["Image","Text"],i_=rt.filter(a=>!lr.includes(a));class s_{constructor(e,t,n,i,s,r,l){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=r,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=ut(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,l)}clip(e,t){const n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e,t){for(const n in e){let i=this.executorsByZIndex_[n];i===void 0&&(i={},this.executorsByZIndex_[n]=i);const s=e[n];for(const r in s){const l=s[r];i[r]=new a_(this.resolution_,this.pixelRatio_,this.overlaps_,l,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const n=this.executorsByZIndex_[t];for(let i=0,s=e.length;i<s;++i)if(e[i]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,i,s,r){i=Math.round(i);const l=i*2+1,o=_n(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-n,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=re(l,l));const _=this.hitDetectionContext_;_.canvas.width!==l||_.canvas.height!==l?(_.canvas.width=l,_.canvas.height=l):c||_.clearRect(0,0,l,l);let u;this.renderBuffer_!==void 0&&(u=Kn(),Il(u,e),Qa(u,t*(this.renderBuffer_+i),u));const d=r_(i);let h;function f(x,S,I){const R=_.getImageData(0,0,l,l).data;for(let A=0,C=d.length;A<C;A++)if(R[d[A]]>0){if(!r||I==="none"||h!=="Image"&&h!=="Text"||r.includes(x)){const D=(d[A]-3)/4,L=i-D%l,F=i-(D/l|0),T=s(x,S,L*L+F*F);if(T)return T}_.clearRect(0,0,l,l);break}}const g=Object.keys(this.executorsByZIndex_).map(Number);g.sort(an);let m,p,y,E,b;for(m=g.length-1;m>=0;--m){const x=g[m].toString();for(y=this.executorsByZIndex_[x],p=rt.length-1;p>=0;--p)if(h=rt[p],E=y[h],E!==void 0&&(b=E.executeHitDetection(_,o,n,f,u),b))return b}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const n=t[0],i=t[1],s=t[2],r=t[3],l=[n,i,n,r,s,r,s,i];return sn(l,0,8,2,e,l),l}isEmpty(){return on(this.executorsByZIndex_)}execute(e,t,n,i,s,r,l){const o=Object.keys(this.executorsByZIndex_).map(Number);o.sort(l?Al:an),r=r||rt;const c=rt.length;for(let _=0,u=o.length;_<u;++_){const d=o[_].toString(),h=this.executorsByZIndex_[d];for(let f=0,g=r.length;f<g;++f){const m=r[f],p=h[m];if(p!==void 0){const y=l===null?void 0:p.getZIndexContext(),E=y?y.getContext():e,b=this.maxExtent_&&m!=="Image"&&m!=="Text";if(b&&(E.save(),this.clip(E,n)),!y||m==="Text"||m==="Image"?p.execute(E,t,n,i,s,l):y.pushFunction(x=>p.execute(x,t,n,i,s,l)),b&&E.restore(),y){y.offset();const x=o[_]*c+rt.indexOf(m);this.deferredZIndexContexts_[x]||(this.deferredZIndexContexts_[x]=[]),this.deferredZIndexContexts_[x].push(y)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(an);for(let n=0,i=t.length;n<i;++n)e[t[n]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[n]].length=0}}const Ca={};function r_(a){if(Ca[a]!==void 0)return Ca[a];const e=a*2+1,t=a*a,n=new Array(t+1);for(let s=0;s<=a;++s)for(let r=0;r<=a;++r){const l=s*s+r*r;if(l>t)break;let o=n[l];o||(o=[],n[l]=o),o.push(((a+s)*e+(a+r))*4+3),s>0&&o.push(((a-s)*e+(a+r))*4+3),r>0&&(o.push(((a+s)*e+(a-r))*4+3),s>0&&o.push(((a-s)*e+(a-r))*4+3))}const i=[];for(let s=0,r=n.length;s<r;++s)n[s]&&i.push(...n[s]);return Ca[a]=i,i}function ns(a,e,t,n){return t!==void 0&&n!==void 0?[t/a,n/e]:t!==void 0?t/a:n!==void 0?n/e:1}class ta extends Jn{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:n,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const r=e.img!==void 0?e.img:null;let l=e.src;se(!(l!==void 0&&r),"`image` and `src` cannot be provided at the same time"),(l===void 0||l.length===0)&&r&&(l=r.src||J(r)),se(l!==void 0&&l.length>0,"A defined and non-empty `src` or `image` must be provided"),se(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let o;if(e.src!==void 0?o=G.IDLE:r!==void 0&&("complete"in r?r.complete?o=r.src?G.LOADED:G.IDLE:o=G.LOADING:o=G.LOADED),this.color_=e.color!==void 0?Ct(e.color):null,this.iconImage_=si(r,l,this.crossOrigin_,o,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let c,_;if(e.size)[c,_]=e.size;else{const u=this.getImage(1);if(u.width&&u.height)c=u.width,_=u.height;else if(u instanceof HTMLImageElement){this.initialOptions_=e;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const h=this.iconImage_.getSize();this.setScale(ns(h[0],h[1],e.width,e.height))};this.listenImageChange(d);return}}c!==void 0&&this.setScale(ns(c,_,e.width,e.height))}}clone(){let e,t,n;return this.initialOptions_?(t=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new ta({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==G.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==G.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(ze.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(ze.CHANGE,e)}ready(){return this.iconImage_.ready()}}const Te=.5;function l_(a,e,t,n,i,s,r,l,o){const c=i,_=a[0]*Te,u=a[1]*Te,d=re(_,u);d.imageSmoothingEnabled=!1;const h=d.canvas,f=new Eo(d,Te,i,null,r,l,null),g=t.length,m=Math.floor((256*256*256-1)/g),p={};for(let E=1;E<=g;++E){const b=t[E-1],x=b.getStyleFunction()||n;if(!x)continue;let S=x(b,s);if(!S)continue;Array.isArray(S)||(S=[S]);const R=(E*m).toString(16).padStart(7,"#00000");for(let A=0,C=S.length;A<C;++A){const D=S[A],L=D.getGeometryFunction()(b);if(!L||!Le(c,L.getExtent()))continue;const F=D.clone(),T=F.getFill();T&&T.setColor(R);const j=F.getStroke();j&&(j.setColor(R),j.setLineDash(null)),F.setText(void 0);const O=D.getImage();if(O){const W=O.getImageSize();if(!W)continue;const Y=re(W[0],W[1],void 0,{alpha:!1}),v=Y.canvas;Y.fillStyle=R,Y.fillRect(0,0,v.width,v.height),F.setImage(new ta({img:v,anchor:O.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:O.getOrigin(),opacity:1,size:O.getSize(),scale:O.getScale(),rotation:O.getRotation(),rotateWithView:O.getRotateWithView()}))}const U=F.getZIndex()||0;let V=p[U];V||(V={},p[U]=V,V.Polygon=[],V.Circle=[],V.LineString=[],V.Point=[]);const X=L.getType();if(X==="GeometryCollection"){const W=L.getGeometriesArrayRecursive();for(let Y=0,v=W.length;Y<v;++Y){const et=W[Y];V[et.getType().replace("Multi","")].push(et,F)}}else V[X.replace("Multi","")].push(L,F)}}const y=Object.keys(p).map(Number).sort(an);for(let E=0,b=y.length;E<b;++E){const x=p[y[E]];for(const S in x){const I=x[S];for(let R=0,A=I.length;R<A;R+=2){f.setStyle(I[R+1]);for(let C=0,D=e.length;C<D;++C)f.setTransform(e[C]),f.drawGeometry(I[R])}}}return d.getImageData(0,0,h.width,h.height)}function o_(a,e,t){const n=[];if(t){const i=Math.floor(Math.round(a[0])*Te),s=Math.floor(Math.round(a[1])*Te),r=($(i,0,t.width-1)+$(s,0,t.height-1)*t.width)*4,l=t.data[r],o=t.data[r+1],_=t.data[r+2]+256*(o+256*l),u=Math.floor((256*256*256-1)/e.length);_&&_%u===0&&n.push(e[_/u-1])}return n}class __ extends Ja{constructor(e,t,n,i){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=i}}const c_=5;class u_ extends Tl{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=c_}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return te()}getData(e){return null}prepareFrame(e){return te()}renderFrame(e,t){return te()}forEachFeatureAtCoordinate(e,t,n,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===G.LOADED||t.getState()===G.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=G.LOADED&&t!=G.ERROR&&e.addEventListener(ze.CHANGE,this.boundHandleImageChange_),t==G.IDLE&&(e.load(),t=e.getState()),t==G.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const as=[];let Rt=null;function d_(){Rt=re(1,1,void 0,{willReadFrequently:!0})}class h_ extends u_{constructor(e){super(e),this.container=null,this.tempTransform=ut(),this.pixelTransform=ut(),this.inversePixelTransform=ut(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,n){Rt||d_(),Rt.clearRect(0,0,1,1);let i;try{Rt.drawImage(e,t,n,1,1,0,0,1,1),i=Rt.getImageData(0,0,1,1).data}catch{return Rt=null,null}return i}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const i=this.getLayer().getClassName();let s,r;if(e&&e.className===i&&(!n||e&&e.style.backgroundColor&&bn(Ct(e.style.backgroundColor),Ct(n)))){const l=e.firstElementChild;l instanceof HTMLCanvasElement&&(r=l.getContext("2d"))}if(r&&yl(r.canvas.style.transform,t)?(this.container=e,this.context=r,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=i;let l=s.style;l.position="absolute",l.width="100%",l.height="100%",r=re();const o=r.canvas;s.appendChild(o),l=o.style,l.position="absolute",l.left="0",l.transformOrigin="top left",this.container=s,this.context=r}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const i=bl(n),s=wl(n),r=xl(n),l=El(n);ue(t.coordinateToPixelTransform,i),ue(t.coordinateToPixelTransform,s),ue(t.coordinateToPixelTransform,r),ue(t.coordinateToPixelTransform,l);const o=this.inversePixelTransform;ue(o,i),ue(o,s),ue(o,r),ue(o,l),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.clip()}prepareContainer(e,t){const n=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,r=e.pixelRatio,l=Math.round(Ue(n)/i*r),o=Math.round(yn(n)/i*r);_n(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/r,1/r,s,-l/2,-o/2),Sl(this.inversePixelTransform,this.pixelTransform);const c=Rl(this.pixelTransform);if(this.useContainer(t,c,this.getBackground(e)),!this.containerReused){const _=this.context.canvas;_.width!=l||_.height!=o?(_.width=l,_.height=o):this.context.clearRect(0,0,l,o),c!==_.style.transform&&(_.style.transform=c)}}dispatchRenderEvent_(e,t,n){const i=this.getLayer();if(i.hasListener(e)){const s=new __(e,this.inversePixelTransform,n,t);i.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(lt.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(lt.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new rr),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(lt.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(lt.POSTRENDER,this.context,e))}getRenderTransform(e,t,n,i,s,r,l){const o=s/2,c=r/2,_=i/t,u=-_,d=-e[0]+l,h=-e[1];return _n(this.tempTransform,o,c,_,u,-n,d,h)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class f_ extends h_{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Kn(),this.wrappedRenderedExtent_=Kn(),this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,n){const i=t.extent,s=t.viewState,r=s.center,l=s.resolution,o=s.projection,c=s.rotation,_=o.getExtent(),u=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),h=t.pixelRatio,f=t.viewHints,g=!(f[pe.ANIMATING]||f[pe.INTERACTING]),m=this.context,p=Math.round(Ue(i)/l*h),y=Math.round(yn(i)/l*h),E=u.getWrapX()&&o.canWrapX(),b=E?Ue(_):null,x=E?Math.ceil((i[2]-_[2])/b)+1:1;let S=E?Math.floor((i[0]-_[0])/b):0;do{let I=this.getRenderTransform(r,l,0,h,p,y,S*b);t.declutter&&(I=I.slice(0)),e.execute(m,[m.canvas.width,m.canvas.height],I,c,g,n===void 0?rt:n?lr:i_,n?d&&t.declutter[d]:void 0)}while(++S<x)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=re(this.context.canvas.width,this.context.canvas.height,as))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Ql(this.context),as.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;const i=e.viewState;this.prepareContainer(e,t);const s=this.context,r=this.replayGroup_;let l=r&&!r.isEmpty();if(!l&&!(this.getLayer().hasListener(lt.PRERENDER)||this.getLayer().hasListener(lt.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),this.clipped_=!1,l&&n.extent&&this.clipping){const o=Yt(n.extent);l=Le(o,e.extent),this.clipped_=l&&!Xt(o,e.extent),this.clipped_&&this.clipUnrotated(s,e,o)}return l&&this.renderWorlds(r,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,r=this.renderedRotation_,l=this.renderedProjection_,o=this.wrappedRenderedExtent_,c=this.getLayer(),_=[],u=n[0]*Te,d=n[1]*Te;_.push(this.getRenderTransform(i,s,r,Te,u,d,0).slice());const h=c.getSource(),f=l.getExtent();if(h.getWrapX()&&l.canWrapX()&&!Xt(f,o)){let g=o[0];const m=Ue(f);let p=0,y;for(;g<f[0];)--p,y=m*p,_.push(this.getRenderTransform(i,s,r,Te,u,d,y).slice()),g+=m;for(p=0,g=o[2];g>f[2];)++p,y=m*p,_.push(this.getRenderTransform(i,s,r,Te,u,d,y).slice()),g-=m}this.hitDetectionImageData_=l_(n,_,this.renderedFeatures_,c.getStyleFunction(),o,s,r,Ki(s,this.renderedPixelRatio_))}t(o_(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,i,s){var d,h;if(!this.replayGroup_)return;const r=t.viewState.resolution,l=t.viewState.rotation,o=this.getLayer(),c={},_=function(f,g,m){const p=J(f),y=c[p];if(y){if(y!==!0&&m<y.distanceSq){if(m===0)return c[p]=!0,s.splice(s.lastIndexOf(y),1),i(f,o,g);y.geometry=g,y.distanceSq=m}}else{if(m===0)return c[p]=!0,i(f,o,g);s.push(c[p]={feature:f,layer:o,geometry:g,distanceSq:m,callback:i})}},u=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,r,l,n,_,u?(h=(d=t.declutter)==null?void 0:d[u])==null?void 0:h.all().map(f=>f.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const i=e.viewHints[pe.ANIMATING],s=e.viewHints[pe.INTERACTING],r=t.getUpdateWhileAnimating(),l=t.getUpdateWhileInteracting();if(this.ready&&!r&&i||!l&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const o=e.extent,c=e.viewState,_=c.projection,u=c.resolution,d=e.pixelRatio,h=t.getRevision(),f=t.getRenderBuffer();let g=t.getRenderOrder();g===void 0&&(g=Ro);const m=c.center.slice(),p=Qa(o,f*u),y=p.slice(),E=[p.slice()],b=_.getExtent();if(n.getWrapX()&&_.canWrapX()&&!Xt(b,e.extent)){const T=Ue(b),j=Math.max(Ue(p)/2,T);p[0]=b[0]-j,p[2]=b[2]+j,gl(m,_);const O=pl(E[0],_);O[0]<b[0]&&O[2]<b[2]?E.push([O[0]+T,O[1],O[2]+T,O[3]]):O[0]>b[0]&&O[2]>b[2]&&E.push([O[0]-T,O[1],O[2]-T,O[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==h&&this.renderedRenderOrder_==g&&this.renderedFrameDeclutter_===!!e.declutter&&Xt(this.wrappedRenderedExtent_,p))return bn(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=m,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const x=new Qo(tr(u,d),p,u,d);let S;for(let T=0,j=E.length;T<j;++T)n.loadFeatures(E[T],u,_);const I=Ki(u,d);let R=!0;const A=(T,j)=>{let O;const U=T.getStyleFunction()||t.getStyleFunction();if(U&&(O=U(T,u)),O){const V=this.renderFeature(T,I,O,x,S,this.getLayer().getDeclutter(),j);R=R&&!V}},C=Ks(p),D=n.getFeaturesInExtent(C);g&&D.sort(g);for(let T=0,j=D.length;T<j;++T)A(D[T],T);this.renderedFeatures_=D,this.ready=R;const L=x.finish(),F=new s_(p,u,d,n.getOverlaps(),L,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=u,this.renderedRevision_=h,this.renderedRenderOrder_=g,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=y,this.wrappedRenderedExtent_=p,this.renderedCenter_=m,this.renderedProjection_=_,this.renderedPixelRatio_=d,this.replayGroup_=F,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,i,s,r,l){if(!n)return!1;let o=!1;if(Array.isArray(n))for(let c=0,_=n.length;c<_;++c)o=Wi(i,e,n[c],t,this.boundHandleStyleImageChange_,s,r,l)||o;else o=Wi(i,e,n,t,this.boundHandleStyleImageChange_,s,r,l);return o}}let mt=0;const ie=1<<mt++,z=1<<mt++,oe=1<<mt++,xe=1<<mt++,ht=1<<mt++,$t=1<<mt++,Dn=Math.pow(2,mt)-1,ri={[ie]:"boolean",[z]:"number",[oe]:"string",[xe]:"color",[ht]:"number[]",[$t]:"size"},m_=Object.keys(ri).map(Number).sort(an);function g_(a){return a in ri}function Jt(a){const e=[];for(const t of m_)Qt(a,t)&&e.push(ri[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Qt(a,e){return(a&e)===e}function qe(a,e){return a===e}class q{constructor(e,t){if(!g_(e))throw new Error(`literal expressions must have a specific type, got ${Jt(e)}`);this.type=e,this.value=t}}class p_{constructor(e,t,...n){this.type=e,this.operator=t,this.args=n}}function or(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Q(a,e,t){switch(typeof a){case"boolean":{if(qe(e,oe))return new q(oe,a?"true":"false");if(!Qt(e,ie))throw new Error(`got a boolean, but expected ${Jt(e)}`);return new q(ie,a)}case"number":{if(qe(e,$t))return new q($t,Tt(a));if(qe(e,ie))return new q(ie,!!a);if(qe(e,oe))return new q(oe,a.toString());if(!Qt(e,z))throw new Error(`got a number, but expected ${Jt(e)}`);return new q(z,a)}case"string":{if(qe(e,xe))return new q(xe,ai(a));if(qe(e,ie))return new q(ie,!!a);if(!Qt(e,oe))throw new Error(`got a string, but expected ${Jt(e)}`);return new q(oe,a)}}if(!Array.isArray(a))throw new Error("expression must be an array or a primitive value");if(a.length===0)throw new Error("empty expression");if(typeof a[0]=="string")return C_(a,e,t);for(const n of a)if(typeof n!="number")throw new Error("expected an array of numbers");if(qe(e,$t)){if(a.length!==2)throw new Error(`expected an array of two values for a size, got ${a.length}`);return new q($t,a)}if(qe(e,xe)){if(a.length===3)return new q(xe,[...a,1]);if(a.length===4)return new q(xe,a);throw new Error(`expected an array of 3 or 4 values for a color, got ${a.length}`)}if(!Qt(e,ht))throw new Error(`got an array of numbers, but expected ${Jt(e)}`);return new q(ht,a)}const w={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},y_={[w.Get]:M(N(1,1/0),is),[w.Var]:M(N(1,1),b_),[w.Has]:M(N(1,1/0),is),[w.Id]:M(w_,wt),[w.Concat]:M(N(2,1/0),H(oe)),[w.GeometryType]:M(x_,wt),[w.LineMetric]:M(wt),[w.Resolution]:M(ka,wt),[w.Zoom]:M(ka,wt),[w.Time]:M(ka,wt),[w.Any]:M(N(2,1/0),H(ie)),[w.All]:M(N(2,1/0),H(ie)),[w.Not]:M(N(1,1),H(ie)),[w.Equal]:M(N(2,2),H(Dn)),[w.NotEqual]:M(N(2,2),H(Dn)),[w.GreaterThan]:M(N(2,2),H(z)),[w.GreaterThanOrEqualTo]:M(N(2,2),H(z)),[w.LessThan]:M(N(2,2),H(z)),[w.LessThanOrEqualTo]:M(N(2,2),H(z)),[w.Multiply]:M(N(2,1/0),ss),[w.Coalesce]:M(N(2,1/0),ss),[w.Divide]:M(N(2,2),H(z)),[w.Add]:M(N(2,1/0),H(z)),[w.Subtract]:M(N(2,2),H(z)),[w.Clamp]:M(N(3,3),H(z)),[w.Mod]:M(N(2,2),H(z)),[w.Pow]:M(N(2,2),H(z)),[w.Abs]:M(N(1,1),H(z)),[w.Floor]:M(N(1,1),H(z)),[w.Ceil]:M(N(1,1),H(z)),[w.Round]:M(N(1,1),H(z)),[w.Sin]:M(N(1,1),H(z)),[w.Cos]:M(N(1,1),H(z)),[w.Atan]:M(N(1,2),H(z)),[w.Sqrt]:M(N(1,1),H(z)),[w.Match]:M(N(4,1/0),rs,S_),[w.Between]:M(N(3,3),H(z)),[w.Interpolate]:M(N(6,1/0),rs,R_),[w.Case]:M(N(3,1/0),E_,I_),[w.In]:M(N(2,2),A_),[w.Number]:M(N(1,1/0),H(Dn)),[w.String]:M(N(1,1/0),H(Dn)),[w.Array]:M(N(1,1/0),H(z)),[w.Color]:M(N(1,4),H(z)),[w.Band]:M(N(1,3),H(z)),[w.Palette]:M(N(2,2),v_),[w.ToString]:M(N(1,1),H(ie|z|oe|xe))};function is(a,e,t){const n=a.length-1,i=new Array(n);for(let s=0;s<n;++s){const r=a[s+1];switch(typeof r){case"number":{i[s]=new q(z,r);break}case"string":{i[s]=new q(oe,r);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${r}`)}s===0&&t.properties.add(String(r))}return i}function b_(a,e,t){const n=a[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return t.variables.add(n),[new q(oe,n)]}function w_(a,e,t){t.featureId=!0}function x_(a,e,t){t.geometryType=!0}function ka(a,e,t){t.mapState=!0}function wt(a,e,t){const n=a[0];if(a.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function N(a,e){return function(t,n,i){const s=t[0],r=t.length-1;if(a===e){if(r!==a){const l=a===1?"":"s";throw new Error(`expected ${a} argument${l} for ${s}, got ${r}`)}}else if(r<a||r>e){const l=e===1/0?`${a} or more`:`${a} to ${e}`;throw new Error(`expected ${l} arguments for ${s}, got ${r}`)}}}function ss(a,e,t){const n=a.length-1,i=new Array(n);for(let s=0;s<n;++s){const r=Q(a[s+1],e,t);i[s]=r}return i}function H(a){return function(e,t,n){const i=e.length-1,s=new Array(i);for(let r=0;r<i;++r){const l=Q(e[r+1],a,n);s[r]=l}return s}}function E_(a,e,t){const n=a[0],i=a.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${n}, got ${i} instead`)}function rs(a,e,t){const n=a[0],i=a.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${n}, got ${i} instead`)}function S_(a,e,t){const n=a.length-1,i=oe|z|ie,s=Q(a[1],i,t),r=Q(a[a.length-1],e,t),l=new Array(n-2);for(let o=0;o<n-2;o+=2){try{const c=Q(a[o+2],s.type,t);l[o]=c}catch(c){throw new Error(`failed to parse argument ${o+1} of match expression: ${c.message}`)}try{const c=Q(a[o+3],r.type,t);l[o+1]=c}catch(c){throw new Error(`failed to parse argument ${o+2} of match expression: ${c.message}`)}}return[s,...l,r]}function R_(a,e,t){const n=a[1];let i;switch(n[0]){case"linear":i=1;break;case"exponential":const o=n[1];if(typeof o!="number"||o<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(o)} instead`);i=o;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const s=new q(z,i);let r;try{r=Q(a[2],z,t)}catch(o){throw new Error(`failed to parse argument 1 in interpolate expression: ${o.message}`)}const l=new Array(a.length-3);for(let o=0;o<l.length;o+=2){try{const c=Q(a[o+3],z,t);l[o]=c}catch(c){throw new Error(`failed to parse argument ${o+2} for interpolate expression: ${c.message}`)}try{const c=Q(a[o+4],e,t);l[o+1]=c}catch(c){throw new Error(`failed to parse argument ${o+3} for interpolate expression: ${c.message}`)}}return[s,r,...l]}function I_(a,e,t){const n=Q(a[a.length-1],e,t),i=new Array(a.length-1);for(let s=0;s<i.length-1;s+=2){try{const r=Q(a[s+1],ie,t);i[s]=r}catch(r){throw new Error(`failed to parse argument ${s} of case expression: ${r.message}`)}try{const r=Q(a[s+2],n.type,t);i[s+1]=r}catch(r){throw new Error(`failed to parse argument ${s+1} of case expression: ${r.message}`)}}return i[i.length-1]=n,i}function A_(a,e,t){let n=a[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],i=oe}else i=z;const s=new Array(n.length);for(let l=0;l<s.length;l++)try{const o=Q(n[l],i,t);s[l]=o}catch(o){throw new Error(`failed to parse haystack item ${l} for "in" expression: ${o.message}`)}return[Q(a[1],i,t),...s]}function v_(a,e,t){let n;try{n=Q(a[1],z,t)}catch(r){throw new Error(`failed to parse first argument in palette expression: ${r.message}`)}const i=a[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let r=0;r<s.length;r++){let l;try{l=Q(i[r],xe,t)}catch(o){throw new Error(`failed to parse color at index ${r} in palette expression: ${o.message}`)}if(!(l instanceof q))throw new Error(`the palette color at index ${r} must be a literal value`);s[r]=l}return[n,...s]}function M(...a){return function(e,t,n){const i=e[0];let s;for(let r=0;r<a.length;r++){const l=a[r](e,t,n);if(r==a.length-1){if(!l)throw new Error("expected last argument validator to return the parsed args");s=l}}return new p_(t,i,...s)}}function C_(a,e,t){const n=a[0],i=y_[n];if(!i)throw new Error(`unknown operator: ${n}`);return i(a,e,t)}function _r(a){if(!a)return"";const e=a.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return _r(a.getGeometries()[0]);default:return""}}function cr(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Ke(a,e,t){const n=Q(a,e,t);return Se(n)}function Se(a,e){if(a instanceof q){if(a.type===xe&&typeof a.value=="string"){const n=ai(a.value);return function(){return n}}return function(){return a.value}}const t=a.operator;switch(t){case w.Number:case w.String:case w.Coalesce:return k_(a);case w.Get:case w.Var:case w.Has:return L_(a);case w.Id:return n=>n.featureId;case w.GeometryType:return n=>n.geometryType;case w.Concat:{const n=a.args.map(i=>Se(i));return i=>"".concat(...n.map(s=>s(i).toString()))}case w.Resolution:return n=>n.resolution;case w.Any:case w.All:case w.Between:case w.In:case w.Not:return M_(a);case w.Equal:case w.NotEqual:case w.LessThan:case w.LessThanOrEqualTo:case w.GreaterThan:case w.GreaterThanOrEqualTo:return T_(a);case w.Multiply:case w.Divide:case w.Add:case w.Subtract:case w.Clamp:case w.Mod:case w.Pow:case w.Abs:case w.Floor:case w.Ceil:case w.Round:case w.Sin:case w.Cos:case w.Atan:case w.Sqrt:return D_(a);case w.Case:return O_(a);case w.Match:return P_(a);case w.Interpolate:return F_(a);case w.ToString:return N_(a);default:throw new Error(`Unsupported operator ${t}`)}}function k_(a,e){const t=a.operator,n=a.args.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=Se(a.args[s]);switch(t){case w.Coalesce:return s=>{for(let r=0;r<n;++r){const l=i[r](s);if(typeof l<"u"&&l!==null)return l}throw new Error("Expected one of the values to be non-null")};case w.Number:case w.String:return s=>{for(let r=0;r<n;++r){const l=i[r](s);if(typeof l===t)return l}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function L_(a,e){const n=a.args[0].value;switch(a.operator){case w.Get:return i=>{const s=a.args;let r=i.properties[n];for(let l=1,o=s.length;l<o;++l){const _=s[l].value;r=r[_]}return r};case w.Var:return i=>i.variables[n];case w.Has:return i=>{const s=a.args;if(!(n in i.properties))return!1;let r=i.properties[n];for(let l=1,o=s.length;l<o;++l){const _=s[l].value;if(!r||!Object.hasOwn(r,_))return!1;r=r[_]}return!0};default:throw new Error(`Unsupported accessor operator ${a.operator}`)}}function T_(a,e){const t=a.operator,n=Se(a.args[0]),i=Se(a.args[1]);switch(t){case w.Equal:return s=>n(s)===i(s);case w.NotEqual:return s=>n(s)!==i(s);case w.LessThan:return s=>n(s)<i(s);case w.LessThanOrEqualTo:return s=>n(s)<=i(s);case w.GreaterThan:return s=>n(s)>i(s);case w.GreaterThanOrEqualTo:return s=>n(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function M_(a,e){const t=a.operator,n=a.args.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=Se(a.args[s]);switch(t){case w.Any:return s=>{for(let r=0;r<n;++r)if(i[r](s))return!0;return!1};case w.All:return s=>{for(let r=0;r<n;++r)if(!i[r](s))return!1;return!0};case w.Between:return s=>{const r=i[0](s),l=i[1](s),o=i[2](s);return r>=l&&r<=o};case w.In:return s=>{const r=i[0](s);for(let l=1;l<n;++l)if(r===i[l](s))return!0;return!1};case w.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function D_(a,e){const t=a.operator,n=a.args.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=Se(a.args[s]);switch(t){case w.Multiply:return s=>{let r=1;for(let l=0;l<n;++l)r*=i[l](s);return r};case w.Divide:return s=>i[0](s)/i[1](s);case w.Add:return s=>{let r=0;for(let l=0;l<n;++l)r+=i[l](s);return r};case w.Subtract:return s=>i[0](s)-i[1](s);case w.Clamp:return s=>{const r=i[0](s),l=i[1](s);if(r<l)return l;const o=i[2](s);return r>o?o:r};case w.Mod:return s=>i[0](s)%i[1](s);case w.Pow:return s=>Math.pow(i[0](s),i[1](s));case w.Abs:return s=>Math.abs(i[0](s));case w.Floor:return s=>Math.floor(i[0](s));case w.Ceil:return s=>Math.ceil(i[0](s));case w.Round:return s=>Math.round(i[0](s));case w.Sin:return s=>Math.sin(i[0](s));case w.Cos:return s=>Math.cos(i[0](s));case w.Atan:return n===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case w.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function O_(a,e){const t=a.args.length,n=new Array(t);for(let i=0;i<t;++i)n[i]=Se(a.args[i]);return i=>{for(let s=0;s<t-1;s+=2)if(n[s](i))return n[s+1](i);return n[t-1](i)}}function P_(a,e){const t=a.args.length,n=new Array(t);for(let i=0;i<t;++i)n[i]=Se(a.args[i]);return i=>{const s=n[0](i);for(let r=1;r<t-1;r+=2)if(s===n[r](i))return n[r+1](i);return n[t-1](i)}}function F_(a,e){const t=a.args.length,n=new Array(t);for(let i=0;i<t;++i)n[i]=Se(a.args[i]);return i=>{const s=n[0](i),r=n[1](i);let l,o;for(let c=2;c<t;c+=2){const _=n[c](i);let u=n[c+1](i);const d=Array.isArray(u);if(d&&(u=lo(u)),_>=r)return c===2?u:d?B_(s,r,l,o,_,u):en(s,r,l,o,_,u);l=_,o=u}return o}}function N_(a,e){const t=a.operator,n=a.args.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=Se(a.args[s]);switch(t){case w.ToString:return s=>{const r=i[0](s);return a.args[0].type===xe?ii(r):r.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function en(a,e,t,n,i,s){const r=i-t;if(r===0)return n;const l=e-t,o=a===1?l/r:(Math.pow(a,l)-1)/(Math.pow(a,r)-1);return n+o*(s-n)}function B_(a,e,t,n,i,s){if(i-t===0)return n;const l=zi(n),o=zi(s);let c=o[2]-l[2];c>180?c-=360:c<-180&&(c+=360);const _=[en(a,e,t,l[0],i,o[0]),en(a,e,t,l[1],i,o[1]),l[2]+en(a,e,t,0,i,c),en(a,e,t,n[3],i,s[3])];return oo(_)}function G_(a){return!0}function U_(a){const e=or(),t=z_(a,e),n=cr();return function(i,s){if(n.properties=i.getPropertiesInternal(),n.resolution=s,e.featureId){const r=i.getId();r!==void 0?n.featureId=r:n.featureId=null}return e.geometryType&&(n.geometryType=_r(i.getGeometry())),t(n)}}function ls(a){const e=or(),t=a.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=Va(a[r],e);const i=cr(),s=new Array(t);return function(r,l){if(i.properties=r.getPropertiesInternal(),i.resolution=l,e.featureId){const c=r.getId();c!==void 0?i.featureId=c:i.featureId=null}let o=0;for(let c=0;c<t;++c){const _=n[c](i);_&&(s[o]=_,o+=1)}return s.length=o,s}}function z_(a,e){const t=a.length,n=new Array(t);for(let i=0;i<t;++i){const s=a[i],r="filter"in s?Ke(s.filter,ie,e):G_;let l;if(Array.isArray(s.style)){const o=s.style.length;l=new Array(o);for(let c=0;c<o;++c)l[c]=Va(s.style[c],e)}else l=[Va(s.style,e)];n[i]={filter:r,styles:l}}return function(i){const s=[];let r=!1;for(let l=0;l<t;++l){const o=n[l].filter;if(o(i)&&!(a[l].else&&r)){r=!0;for(const c of n[l].styles){const _=c(i);_&&s.push(_)}}}return s}}function Va(a,e){const t=fn(a,"",e),n=mn(a,"",e),i=V_(a,e),s=H_(a,e),r=_e(a,"z-index",e);if(!t&&!n&&!i&&!s&&!on(a))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(a));const l=new Ee;return function(o){let c=!0;if(t){const _=t(o);_&&(c=!1),l.setFill(_)}if(n){const _=n(o);_&&(c=!1),l.setStroke(_)}if(i){const _=i(o);_&&(c=!1),l.setText(_)}if(s){const _=s(o);_&&(c=!1),l.setImage(_)}return r&&l.setZIndex(r(o)),c?null:l}}function fn(a,e,t){let n;if(e+"fill-pattern-src"in a)n=X_(a,e+"fill-",t);else{if(a[e+"fill-color"]==="none")return s=>null;n=li(a,e+"fill-color",t)}if(!n)return null;const i=new ye;return function(s){const r=n(s);return r===ni?null:(i.setColor(r),i)}}function mn(a,e,t){const n=_e(a,e+"stroke-width",t),i=li(a,e+"stroke-color",t);if(!n&&!i)return null;const s=Ge(a,e+"stroke-line-cap",t),r=Ge(a,e+"stroke-line-join",t),l=ur(a,e+"stroke-line-dash",t),o=_e(a,e+"stroke-line-dash-offset",t),c=_e(a,e+"stroke-miter-limit",t),_=new we;return function(u){if(i){const d=i(u);if(d===ni)return null;_.setColor(d)}if(n&&_.setWidth(n(u)),s){const d=s(u);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");_.setLineCap(d)}if(r){const d=r(u);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");_.setLineJoin(d)}return l&&_.setLineDash(l(u)),o&&_.setLineDashOffset(o(u)),c&&_.setMiterLimit(c(u)),_}}function V_(a,e){const t="text-",n=Ge(a,t+"value",e);if(!n)return null;const i=fn(a,t,e),s=fn(a,t+"background-",e),r=mn(a,t,e),l=mn(a,t+"background-",e),o=Ge(a,t+"font",e),c=_e(a,t+"max-angle",e),_=_e(a,t+"offset-x",e),u=_e(a,t+"offset-y",e),d=At(a,t+"overflow",e),h=Ge(a,t+"placement",e),f=_e(a,t+"repeat",e),g=na(a,t+"scale",e),m=At(a,t+"rotate-with-view",e),p=_e(a,t+"rotation",e),y=Ge(a,t+"align",e),E=Ge(a,t+"justify",e),b=Ge(a,t+"baseline",e),x=At(a,t+"keep-upright",e),S=ur(a,t+"padding",e),I=aa(a,t+"declutter-mode"),R=new _t({declutterMode:I});return function(A){if(R.setText(n(A)),i&&R.setFill(i(A)),s&&R.setBackgroundFill(s(A)),r&&R.setStroke(r(A)),l&&R.setBackgroundStroke(l(A)),o&&R.setFont(o(A)),c&&R.setMaxAngle(c(A)),_&&R.setOffsetX(_(A)),u&&R.setOffsetY(u(A)),d&&R.setOverflow(d(A)),h){const C=h(A);if(C!=="point"&&C!=="line")throw new Error("Expected point or line for text-placement");R.setPlacement(C)}if(f&&R.setRepeat(f(A)),g&&R.setScale(g(A)),m&&R.setRotateWithView(m(A)),p&&R.setRotation(p(A)),y){const C=y(A);if(C!=="left"&&C!=="center"&&C!=="right"&&C!=="end"&&C!=="start")throw new Error("Expected left, right, center, start, or end for text-align");R.setTextAlign(C)}if(E){const C=E(A);if(C!=="left"&&C!=="right"&&C!=="center")throw new Error("Expected left, right, or center for text-justify");R.setJustify(C)}if(b){const C=b(A);if(C!=="bottom"&&C!=="top"&&C!=="middle"&&C!=="alphabetic"&&C!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");R.setTextBaseline(C)}return S&&R.setPadding(S(A)),x&&R.setKeepUpright(x(A)),R}}function H_(a,e){return"icon-src"in a?j_(a,e):"shape-points"in a?K_(a,e):"circle-radius"in a?W_(a,e):null}function j_(a,e){const t="icon-",n=t+"src",i=dr(a[n],n),s=Zn(a,t+"anchor",e),r=na(a,t+"scale",e),l=_e(a,t+"opacity",e),o=Zn(a,t+"displacement",e),c=_e(a,t+"rotation",e),_=At(a,t+"rotate-with-view",e),u=_s(a,t+"anchor-origin"),d=cs(a,t+"anchor-x-units"),h=cs(a,t+"anchor-y-units"),f=$_(a,t+"color"),g=Z_(a,t+"cross-origin"),m=q_(a,t+"offset"),p=_s(a,t+"offset-origin"),y=qn(a,t+"width"),E=qn(a,t+"height"),b=Y_(a,t+"size"),x=aa(a,t+"declutter-mode"),S=new ta({src:i,anchorOrigin:u,anchorXUnits:d,anchorYUnits:h,color:f,crossOrigin:g,offset:m,offsetOrigin:p,height:E,width:y,size:b,declutterMode:x});return function(I){return l&&S.setOpacity(l(I)),o&&S.setDisplacement(o(I)),c&&S.setRotation(c(I)),_&&S.setRotateWithView(_(I)),r&&S.setScale(r(I)),s&&S.setAnchor(s(I)),S}}function K_(a,e){const t="shape-",n=t+"points",i=t+"radius",s=Ha(a[n],n),r=Ha(a[i],i),l=fn(a,t,e),o=mn(a,t,e),c=na(a,t+"scale",e),_=Zn(a,t+"displacement",e),u=_e(a,t+"rotation",e),d=At(a,t+"rotate-with-view",e),h=qn(a,t+"radius2"),f=qn(a,t+"angle"),g=aa(a,t+"declutter-mode"),m=new Qn({points:s,radius:r,radius2:h,angle:f,declutterMode:g});return function(p){return l&&m.setFill(l(p)),o&&m.setStroke(o(p)),_&&m.setDisplacement(_(p)),u&&m.setRotation(u(p)),d&&m.setRotateWithView(d(p)),c&&m.setScale(c(p)),m}}function W_(a,e){const t="circle-",n=fn(a,t,e),i=mn(a,t,e),s=_e(a,t+"radius",e),r=na(a,t+"scale",e),l=Zn(a,t+"displacement",e),o=_e(a,t+"rotation",e),c=At(a,t+"rotate-with-view",e),_=aa(a,t+"declutter-mode"),u=new ea({radius:5,declutterMode:_});return function(d){return s&&u.setRadius(s(d)),n&&u.setFill(n(d)),i&&u.setStroke(i(d)),l&&u.setDisplacement(l(d)),o&&u.setRotation(o(d)),c&&u.setRotateWithView(c(d)),r&&u.setScale(r(d)),u}}function _e(a,e,t){if(!(e in a))return;const n=Ke(a[e],z,t);return function(i){return Ha(n(i),e)}}function Ge(a,e,t){if(!(e in a))return null;const n=Ke(a[e],oe,t);return function(i){return dr(n(i),e)}}function X_(a,e,t){const n=Ge(a,e+"pattern-src",t),i=os(a,e+"pattern-offset",t),s=os(a,e+"pattern-size",t),r=li(a,e+"color",t);return function(l){return{src:n(l),offset:i&&i(l),size:s&&s(l),color:r&&r(l)}}}function At(a,e,t){if(!(e in a))return null;const n=Ke(a[e],ie,t);return function(i){const s=n(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function li(a,e,t){if(!(e in a))return null;const n=Ke(a[e],xe,t);return function(i){return hr(n(i),e)}}function ur(a,e,t){if(!(e in a))return null;const n=Ke(a[e],ht,t);return function(i){return xn(n(i),e)}}function Zn(a,e,t){if(!(e in a))return null;const n=Ke(a[e],ht,t);return function(i){const s=xn(n(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function os(a,e,t){if(!(e in a))return null;const n=Ke(a[e],ht,t);return function(i){return fr(n(i),e)}}function na(a,e,t){if(!(e in a))return null;const n=Ke(a[e],ht|z,t);return function(i){return J_(n(i),e)}}function qn(a,e){const t=a[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function Y_(a,e){const t=a[e];if(t!==void 0){if(typeof t=="number")return Tt(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function Z_(a,e){const t=a[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function _s(a,e){const t=a[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function cs(a,e){const t=a[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function q_(a,e){const t=a[e];if(t!==void 0)return xn(t,e)}function aa(a,e){const t=a[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function $_(a,e){const t=a[e];if(t!==void 0)return hr(t,e)}function xn(a,e){if(!Array.isArray(a))throw new Error(`Expected an array for ${e}`);const t=a.length;for(let n=0;n<t;++n)if(typeof a[n]!="number")throw new Error(`Expected an array of numbers for ${e}`);return a}function dr(a,e){if(typeof a!="string")throw new Error(`Expected a string for ${e}`);return a}function Ha(a,e){if(typeof a!="number")throw new Error(`Expected a number for ${e}`);return a}function hr(a,e){if(typeof a=="string")return a;const t=xn(a,e),n=t.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function fr(a,e){const t=xn(a,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function J_(a,e){return typeof a=="number"?a:fr(a,e)}const be={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function us(a,e,t){return function(n,i,s,r,l){if(!n)return;if(!i&&!e)return n;const o=e?0:s[0]*i,c=e?0:s[1]*i,_=l?l[0]:0,u=l?l[1]:0;let d=a[0]+o/2+_,h=a[2]-o/2+_,f=a[1]+c/2+u,g=a[3]-c/2+u;d>h&&(d=(h+d)/2,h=d),f>g&&(f=(g+f)/2,g=f);let m=$(n[0],d,h),p=$(n[1],f,g);if(r&&t&&i){const y=30*i;m+=-y*Math.log(1+Math.max(0,d-n[0])/y)+y*Math.log(1+Math.max(0,n[0]-h)/y),p+=-y*Math.log(1+Math.max(0,f-n[1])/y)+y*Math.log(1+Math.max(0,n[1]-g)/y)}return[m,p]}}function Q_(a){return a}function oi(a,e,t,n){const i=Ue(e)/t[0],s=yn(e)/t[1];return n?Math.min(a,Math.max(i,s)):Math.min(a,Math.min(i,s))}function _i(a,e,t){let n=Math.min(a,e);const i=50;return n*=Math.log(1+i*Math.max(0,a/e-1))/i+1,t&&(n=Math.max(n,t),n/=Math.log(1+i*Math.max(0,t/a-1))/i+1),$(n,t/2,e*2)}function ec(a,e,t,n){return e=e!==void 0?e:!0,function(i,s,r,l){if(i!==void 0){const o=a[0],c=a[a.length-1],_=t?oi(o,t,r,n):o;if(l)return e?_i(i,_,c):$(i,c,_);const u=Math.min(_,i),d=Math.floor(Ws(a,u,s));return a[d]>_&&d<a.length-1?a[d+1]:a[d]}}}function tc(a,e,t,n,i,s){return n=n!==void 0?n:!0,t=t!==void 0?t:0,function(r,l,o,c){if(r!==void 0){const _=i?oi(e,i,o,s):e;if(c)return n?_i(r,_,t):$(r,t,_);const u=1e-9,d=Math.ceil(Math.log(e/_)/Math.log(a)-u),h=-l*(.5-u)+.5,f=Math.min(_,r),g=Math.floor(Math.log(e/f)/Math.log(a)+h),m=Math.max(d,g),p=e/Math.pow(a,m);return $(p,t,_)}}}function ds(a,e,t,n,i){return t=t!==void 0?t:!0,function(s,r,l,o){if(s!==void 0){const c=n?oi(a,n,l,i):a;return!t||!o?$(s,e,c):_i(s,c,e)}}}function nc(a){if(a!==void 0)return 0}function hs(a){if(a!==void 0)return a}function ac(a){const e=2*Math.PI/a;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function ic(a){const e=jl(5);return function(t,n){return n||t===void 0?t:Math.abs(t)<=e?0:t}}const sc=256,La=0;class fs extends Dt{constructor(e){super(),e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.projection_=ei(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,e.projection&&Kl(),e.center&&(e.center=We(e.center)),e.extent&&(e.extent=Yt(e.extent)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const l in be)delete t[l];this.setProperties(t,!0);const n=lc(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const i=rc(e),s=n.constraint,r=oc(e);this.constraints_={center:i,resolution:s,rotation:r},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const i=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),r=s/2*(i[3]-t[3]+t[1]-i[1]),l=s/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([n[0]+r,n[1]-l])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let i=arguments[n];i.center&&(i=Object.assign({},i),i.center=We(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=We(i.anchor,this.getProjection())),t[n]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const _=arguments[i];_.center&&this.setCenterInternal(_.center),_.zoom!==void 0?this.setZoom(_.zoom):_.resolution&&this.setResolution(_.resolution),_.rotation!==void 0&&this.setRotation(_.rotation)}if(i===t){n&&On(n,!0);return}let s=Date.now(),r=this.targetCenter_.slice(),l=this.targetResolution_,o=this.targetRotation_;const c=[];for(;i<t;++i){const _=arguments[i],u={start:s,complete:!1,anchor:_.anchor,duration:_.duration!==void 0?_.duration:1e3,easing:_.easing||Yl,callback:n};if(_.center&&(u.sourceCenter=r,u.targetCenter=_.center.slice(),r=u.targetCenter),_.zoom!==void 0?(u.sourceResolution=l,u.targetResolution=this.getResolutionForZoom(_.zoom),l=u.targetResolution):_.resolution&&(u.sourceResolution=l,u.targetResolution=_.resolution,l=u.targetResolution),_.rotation!==void 0){u.sourceRotation=o;const d=Oi(_.rotation-o+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=o+d,o=u.targetRotation}_c(u)?u.complete=!0:s+=u.duration,c.push(u)}this.animations_.push(c),this.setHint(pe.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[pe.ANIMATING]>0}getInteracting(){return this.hints_[pe.INTERACTING]>0}cancelAnimations(){this.setHint(pe.ANIMATING,-this.hints_[pe.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){const i=this.animations_[t];if(i[0].callback&&On(i[0].callback,!1),!e)for(let s=0,r=i.length;s<r;++s){const l=i[s];if(!l.complete){e=l.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let s=!0;for(let r=0,l=i.length;r<l;++r){const o=i[r];if(o.complete)continue;const c=e-o.start;let _=o.duration>0?c/o.duration:1;_>=1?(o.complete=!0,_=1):s=!1;const u=o.easing(_);if(o.sourceCenter){const d=o.sourceCenter[0],h=o.sourceCenter[1],f=o.targetCenter[0],g=o.targetCenter[1];this.nextCenter_=o.targetCenter;const m=d+u*(f-d),p=h+u*(g-h);this.targetCenter_=[m,p]}if(o.sourceResolution&&o.targetResolution){const d=u===1?o.targetResolution:o.sourceResolution+u*(o.targetResolution-o.sourceResolution);if(o.anchor){const h=this.getViewportSize_(this.getRotation()),f=this.constraints_.resolution(d,0,h,!0);this.targetCenter_=this.calculateCenterZoom(f,o.anchor)}this.nextResolution_=o.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(o.sourceRotation!==void 0&&o.targetRotation!==void 0){const d=u===1?Oi(o.targetRotation+Math.PI,2*Math.PI)-Math.PI:o.sourceRotation+u*(o.targetRotation-o.sourceRotation);if(o.anchor){const h=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(h,o.anchor)}this.nextRotation_=o.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),t=!0,!o.complete)break}if(s){this.animations_[n]=null,this.setHint(pe.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const r=i[0].callback;r&&On(r,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const i=this.getCenterInternal();return i!==void 0&&(n=[i[0]-t[0],i[1]-t[1]],vl(n,e-this.getRotation()),Cl(n,t)),n}calculateCenterZoom(e,t){let n;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const r=t[0]-e*(t[0]-i[0])/s,l=t[1]-e*(t[1]-i[1])/s;n=[r,l]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],i=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Pi(e,this.getProjection())}getCenterInternal(){return this.get(be.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return Ks(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();se(t,"The view center is not defined");const n=this.getResolution();se(n!==void 0,"The view resolution is not defined");const i=this.getRotation();return se(i!==void 0,"The view rotation is not defined"),kl(t,n,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(be.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Yt(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=Ue(e)/t[0],i=yn(e)/t[1];return Math.max(n,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(t/n)/Math.log(e);return function(s){return t/Math.pow(e,s*i)}}getRotation(){return this.get(be.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(n/i)/t;return function(r){return Math.log(n/r)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const r=this.getViewportSizeMinusPadding_();i=Ta(i,this.getViewportSize_(),[r[0]/2+s[3],r[1]/2+s[0]],t,n)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,i;if(this.resolutions_){const s=Ws(this.resolutions_,e,1);t=s,n=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=n/this.resolutions_[s+1]}else n=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(n/e)/Math.log(i)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const n=$(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,$(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(se(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){se(!Ll(e),"Cannot fit empty extent provided as `geometry`");const i=Yt(e,this.getProjection());n=Fi(i)}else if(e.getType()==="Circle"){const i=Yt(e.getExtent(),this.getProjection());n=Fi(i),n.rotate(this.getRotation(),Ni(i))}else n=e;this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),i=Math.sin(-t),s=e.getFlatCoordinates(),r=e.getStride();let l=1/0,o=1/0,c=-1/0,_=-1/0;for(let u=0,d=s.length;u<d;u+=r){const h=s[u]*n-s[u+1]*i,f=s[u]*i+s[u+1]*n;l=Math.min(l,h),o=Math.min(o,f),c=Math.max(c,h),_=Math.max(_,f)}return[l,o,c,_]}fitInternal(e,t){t=t||{};let n=t.size;n||(n=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let r;t.minResolution!==void 0?r=t.minResolution:t.maxZoom!==void 0?r=this.getResolutionForZoom(t.maxZoom):r=0;const l=this.rotatedExtentForGeometry(e);let o=this.getResolutionForExtentInternal(l,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);o=isNaN(o)?r:Math.max(o,r),o=this.getConstrainedResolution(o,s?0:1);const c=this.getRotation(),_=Math.sin(c),u=Math.cos(c),d=Ni(l);d[0]+=(i[1]-i[3])/2*o,d[1]+=(i[0]-i[2])/2*o;const h=d[0]*u-d[1]*_,f=d[1]*u+d[0]*_,g=this.getConstrainedCenter([h,f],o),m=t.callback?t.callback:zs;t.duration!==void 0?this.animateInternal({resolution:o,center:g,duration:t.duration,easing:t.easing},m):(this.targetResolution_=o,this.targetCenter_=g,this.applyTargetState_(!1,!0),On(m,!0))}centerOn(e,t,n){this.centerOnInternal(We(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(Ta(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,i){let s;const r=this.padding_;if(r&&e){const l=this.getViewportSizeMinusPadding_(-n),o=Ta(e,i,[l[0]/2+r[3],l[1]/2+r[0]],t,n);s=[e[0]-o[0],e[1]-o[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Pi(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&We(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,n);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=We(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&We(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,n),s=this.getViewportSize_(i),r=this.constraints_.resolution(this.targetResolution_,0,s,n),l=this.constraints_.center(this.targetCenter_,r,s,n,this.calculateCenterShift(this.targetCenter_,r,i,s));this.get(be.ROTATION)!==i&&this.set(be.ROTATION,i),this.get(be.RESOLUTION)!==r&&(this.set(be.RESOLUTION,r),this.set("zoom",this.getZoom(),!0)),(!l||!this.get(be.CENTER)||!Na(this.get(be.CENTER),l))&&this.set(be.CENTER,l),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e!==void 0?e:200;const i=t||0,s=this.constraints_.rotation(this.targetRotation_),r=this.getViewportSize_(s),l=this.constraints_.resolution(this.targetResolution_,i,r),o=this.constraints_.center(this.targetCenter_,l,r,!1,this.calculateCenterShift(this.targetCenter_,l,s,r));if(e===0&&!this.cancelAnchor_){this.targetResolution_=l,this.targetRotation_=s,this.targetCenter_=o,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==l||this.getRotation()!==s||!this.getCenterInternal()||!Na(this.getCenterInternal(),o))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:o,resolution:l,duration:e,easing:Zl,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(pe.INTERACTING,1)}endInteraction(e,t,n){n=n&&We(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.getInteracting()&&(this.setHint(pe.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}}function On(a,e){setTimeout(function(){a(e)},0)}function rc(a){if(a.extent!==void 0){const t=a.smoothExtentConstraint!==void 0?a.smoothExtentConstraint:!0;return us(a.extent,a.constrainOnlyCenter,t)}const e=ei(a.projection,"EPSG:3857");if(a.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,us(t,!1,!1)}return Q_}function lc(a){let e,t,n,r=a.minZoom!==void 0?a.minZoom:La,l=a.maxZoom!==void 0?a.maxZoom:28;const o=a.zoomFactor!==void 0?a.zoomFactor:2,c=a.multiWorld!==void 0?a.multiWorld:!1,_=a.smoothResolutionConstraint!==void 0?a.smoothResolutionConstraint:!0,u=a.showFullExtent!==void 0?a.showFullExtent:!1,d=ei(a.projection,"EPSG:3857"),h=d.getExtent();let f=a.constrainOnlyCenter,g=a.extent;if(!c&&!g&&d.isGlobal()&&(f=!1,g=h),a.resolutions!==void 0){const m=a.resolutions;t=m[r],n=m[l]!==void 0?m[l]:m[m.length-1],a.constrainResolution?e=ec(m,_,!f&&g,u):e=ds(t,n,_,!f&&g,u)}else{const p=(h?Math.max(Ue(h),yn(h)):360*Ul.degrees/d.getMetersPerUnit())/sc/Math.pow(2,La),y=p/Math.pow(2,28-La);t=a.maxResolution,t!==void 0?r=0:t=p/Math.pow(o,r),n=a.minResolution,n===void 0&&(a.maxZoom!==void 0?a.maxResolution!==void 0?n=t/Math.pow(o,l):n=p/Math.pow(o,l):n=y),l=r+Math.floor(Math.log(t/n)/Math.log(o)),n=t/Math.pow(o,l-r),a.constrainResolution?e=tc(o,t,n,_,!f&&g,u):e=ds(t,n,_,!f&&g,u)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:r,zoomFactor:o}}function oc(a){if(a.enableRotation!==void 0?a.enableRotation:!0){const t=a.constrainRotation;return t===void 0||t===!0?ic():t===!1?hs:typeof t=="number"?ac(t):hs}return nc}function _c(a){return!(a.sourceCenter&&a.targetCenter&&!Na(a.sourceCenter,a.targetCenter)||a.sourceResolution!==a.targetResolution||a.sourceRotation!==a.targetRotation)}function Ta(a,e,t,n,i){const s=Math.cos(-i);let r=Math.sin(-i),l=a[0]*s-a[1]*r,o=a[1]*s+a[0]*r;l+=(e[0]/2-t[0])*n,o+=(t[1]-e[1]/2)*n,r=-r;const c=l*s-o*r,_=o*s+l*r;return[c,_]}const K={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class cc extends Dt{constructor(e){super(),this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[K.OPACITY]=e.opacity!==void 0?e.opacity:1,se(typeof t[K.OPACITY]=="number","Layer opacity must be a number"),t[K.VISIBLE]=e.visible!==void 0?e.visible:!0,t[K.Z_INDEX]=e.zIndex,t[K.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[K.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[K.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[K.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=$(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return te()}getLayerStatesArray(e){return te()}getExtent(){return this.get(K.EXTENT)}getMaxResolution(){return this.get(K.MAX_RESOLUTION)}getMinResolution(){return this.get(K.MIN_RESOLUTION)}getMinZoom(){return this.get(K.MIN_ZOOM)}getMaxZoom(){return this.get(K.MAX_ZOOM)}getOpacity(){return this.get(K.OPACITY)}getSourceState(){return te()}getVisible(){return this.get(K.VISIBLE)}getZIndex(){return this.get(K.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(K.EXTENT,e)}setMaxResolution(e){this.set(K.MAX_RESOLUTION,e)}setMinResolution(e){this.set(K.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(K.MAX_ZOOM,e)}setMinZoom(e){this.set(K.MIN_ZOOM,e)}setOpacity(e){se(typeof e=="number","Layer opacity must be a number"),this.set(K.OPACITY,e)}setVisible(e){this.set(K.VISIBLE,e)}setZIndex(e){this.set(K.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class uc extends cc{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(K.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(K.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(nn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=tn(e,ze.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const n=this.getMapInternal();!e&&n&&(e=n.getView()),e instanceof fs?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(r=>r.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return dc(i,t.viewState)&&(!s||Le(s,t.extent))}getAttributions(e){var s;if(!this.isVisible(e))return[];const t=(s=this.getSource())==null?void 0:s.getAttributions();if(!t)return[];const n=e instanceof fs?e.getViewStateAndExtent():e;let i=t(n);return Array.isArray(i)||(i=[i]),i}render(e,t){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(K.MAP,e)}getMapInternal(){return this.get(K.MAP)}setMap(e){this.mapPrecomposeKey_&&(nn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(nn(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=tn(e,lt.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=tn(this,ze.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,n=this.getLayerState(!1);se(!t.some(i=>i.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(n)}setSource(e){this.set(K.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function dc(a,e){if(!a.visible)return!1;const t=e.resolution;if(t<a.minResolution||t>=a.maxResolution)return!1;const n=e.zoom;return n>a.minZoom&&n<=a.maxZoom}const ms={RENDER_ORDER:"renderOrder"};class hc extends uc{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(ms.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const n=this.getDeclutter();n in e.declutter||(e.declutter[n]=new ir(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(ms.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?sr:e;const t=fc(e);this.styleFunction_=e===null?void 0:Ko(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function fc(a){if(a===void 0)return sr;if(!a)return null;if(typeof a=="function"||a instanceof Ee)return a;if(!Array.isArray(a))return ls([a]);if(a.length===0)return[];const e=a.length,t=a[0];if(t instanceof Ee){const i=new Array(e);for(let s=0;s<e;++s){const r=a[s];if(!(r instanceof Ee))throw new Error("Expected a list of style instances");i[s]=r}return i}if("style"in t){const i=new Array(e);for(let s=0;s<e;++s){const r=a[s];if(!("style"in r))throw new Error("Expected a list of rules with a style property");i[s]=r}return U_(i)}return ls(a)}class mc extends hc{constructor(e){super(e)}createRenderer(){return new f_(this)}}function gt(a){return(e,...t)=>gc(a,e,t)}function Ot(a,e){return gt(mr(a,e).get)}const{apply:gc,getOwnPropertyDescriptor:mr,getPrototypeOf:ci,ownKeys:pc}=Reflect,{iterator:ia,toStringTag:yc}=Symbol,bc=Object,{create:ui,defineProperty:wc}=bc,xc=Array,Ec=xc.prototype,gr=Ec[ia],Sc=gt(gr),pr=ArrayBuffer,Rc=pr.prototype;Ot(Rc,"byteLength");const gs=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;gs&&Ot(gs.prototype,"byteLength");const Ic=ci(Uint8Array),sa=Ic.prototype;Ot(sa,"buffer");Ot(sa,"byteOffset");Ot(sa,"length");Ot(sa,yc);const Ac=Uint8Array,yr=Uint16Array,di=Uint32Array,vc=Float32Array,gn=ci([][ia]()),br=gt(gn.next),Cc=gt(function*(){}().next),kc=ci(gn),Lc=DataView.prototype,Tc=gt(Lc.getUint16),hi=WeakMap,wr=hi.prototype,xr=gt(wr.get),Mc=gt(wr.set),Er=new hi,Dc=ui(null,{next:{value:function(){const e=xr(Er,this);return br(e)}},[ia]:{value:function(){return this}}});function Oc(a){if(a[ia]===gr&&gn.next===br)return a;const e=ui(Dc);return Mc(Er,e,Sc(a)),e}const Pc=new hi,Fc=ui(kc,{next:{value:function(){const e=xr(Pc,this);return Cc(e)},writable:!0,configurable:!0}});for(const a of pc(gn))a!=="next"&&wc(Fc,a,mr(gn,a));const Sr=new pr(4),Nc=new vc(Sr),Bc=new di(Sr),Ae=new yr(512),ve=new Ac(512);for(let a=0;a<256;++a){const e=a-127;e<-24?(Ae[a]=0,Ae[a|256]=32768,ve[a]=24,ve[a|256]=24):e<-14?(Ae[a]=1024>>-e-14,Ae[a|256]=1024>>-e-14|32768,ve[a]=-e-1,ve[a|256]=-e-1):e<=15?(Ae[a]=e+15<<10,Ae[a|256]=e+15<<10|32768,ve[a]=13,ve[a|256]=13):e<128?(Ae[a]=31744,Ae[a|256]=64512,ve[a]=24,ve[a|256]=24):(Ae[a]=31744,Ae[a|256]=64512,ve[a]=13,ve[a|256]=13)}const fi=new di(2048);for(let a=1;a<1024;++a){let e=a<<13,t=0;for(;!(e&8388608);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,fi[a]=e|t}for(let a=1024;a<2048;++a)fi[a]=939524096+(a-1024<<13);const Pt=new di(64);for(let a=1;a<31;++a)Pt[a]=a<<23;Pt[31]=1199570944;Pt[32]=2147483648;for(let a=33;a<63;++a)Pt[a]=2147483648+(a-32<<23);Pt[63]=3347054592;const Rr=new yr(64);for(let a=1;a<64;++a)a!==32&&(Rr[a]=1024);function Gc(a){const e=a>>10;return Bc[0]=fi[Rr[e]+(a&1023)]+Pt[e],Nc[0]}function Ir(a,e,...t){return Gc(Tc(a,e,...Oc(t)))}function Ar(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Pn={exports:{}},ps;function Uc(){if(ps)return Pn.exports;ps=1;function a(e,t,n){const i=n&&n.debug||!1;i&&console.log("[xml-utils] getting "+t+" in "+e);const s=typeof e=="object"?e.outer:e,r=s.slice(0,s.indexOf(">")+1),l=['"',"'"];for(let o=0;o<l.length;o++){const c=l[o],_=t+"\\="+c+"([^"+c+"]*)"+c;i&&console.log("[xml-utils] pattern:",_);const d=new RegExp(_).exec(r);if(i&&console.log("[xml-utils] match:",d),d)return d[1]}}return Pn.exports=a,Pn.exports.default=a,Pn.exports}var zc=Uc();const Ma=Ar(zc);var Fn={exports:{}},Nn={exports:{}},Bn={exports:{}},ys;function Vc(){if(ys)return Bn.exports;ys=1;function a(e,t,n){const s=new RegExp(t).exec(e.slice(n));return s?n+s.index:-1}return Bn.exports=a,Bn.exports.default=a,Bn.exports}var Gn={exports:{}},bs;function Hc(){if(bs)return Gn.exports;bs=1;function a(e,t,n){const s=new RegExp(t).exec(e.slice(n));return s?n+s.index+s[0].length-1:-1}return Gn.exports=a,Gn.exports.default=a,Gn.exports}var Un={exports:{}},ws;function jc(){if(ws)return Un.exports;ws=1;function a(e,t){const n=new RegExp(t,"g"),i=e.match(n);return i?i.length:0}return Un.exports=a,Un.exports.default=a,Un.exports}var xs;function Kc(){if(xs)return Nn.exports;xs=1;const a=Vc(),e=Hc(),t=jc();function n(i,s,r){const l=r&&r.debug||!1,o=!(r&&typeof r.nested===!1),c=r&&r.startIndex||0;l&&console.log("[xml-utils] starting findTagByName with",s," and ",r);const _=a(i,`<${s}[ 
>/]`,c);if(l&&console.log("[xml-utils] start:",_),_===-1)return;const u=i.slice(_+s.length);let d=e(u,"^[^<]*[ /]>",0);const h=d!==-1&&u[d-1]==="/";if(l&&console.log("[xml-utils] selfClosing:",h),h===!1)if(o){let p=0,y=1,E=0;for(;(d=e(u,"[ /]"+s+">",p))!==-1;){const b=u.substring(p,d+1);if(y+=t(b,"<"+s+`[ 
	>]`),E+=t(b,"</"+s+">"),E>=y)break;p=d}}else d=e(u,"[ /]"+s+">",0);const f=_+s.length+d+1;if(l&&console.log("[xml-utils] end:",f),f===-1)return;const g=i.slice(_,f);let m;return h?m=null:m=g.slice(g.indexOf(">")+1,g.lastIndexOf("<")),{inner:m,outer:g,start:_,end:f}}return Nn.exports=n,Nn.exports.default=n,Nn.exports}var Es;function Wc(){if(Es)return Fn.exports;Es=1;const a=Kc();function e(t,n,i){const s=[],r=i&&i.debug||!1,l=i&&typeof i.nested=="boolean"?i.nested:!0;let o=i&&i.startIndex||0,c;for(;c=a(t,n,{debug:r,startIndex:o});)l?o=c.start+1+n.length:o=c.end,s.push(c);return r&&console.log("findTagsByName found",s.length,"tags"),s}return Fn.exports=e,Fn.exports.default=e,Fn.exports}var Xc=Wc();const Yc=Ar(Xc),ln={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},Ce={};for(const a in ln)ln.hasOwnProperty(a)&&(Ce[ln[a]]=parseInt(a,10));const Zc=[Ce.BitsPerSample,Ce.ExtraSamples,Ce.SampleFormat,Ce.StripByteCounts,Ce.StripOffsets,Ce.StripRowCounts,Ce.TileByteCounts,Ce.TileOffsets,Ce.SubIFDs],Da={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},B={};for(const a in Da)Da.hasOwnProperty(a)&&(B[Da[a]]=parseInt(a,10));const ce={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,CMYK:5,YCbCr:6,CIELab:8},qc={Unspecified:0},eh={AddCompression:1},th={None:0,Deflate:1,Zstandard:2},$c={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function Jc(a,e){const{width:t,height:n}=a,i=new Uint8Array(t*n*3);let s;for(let r=0,l=0;r<a.length;++r,l+=3)s=256-a[r]/e*256,i[l]=s,i[l+1]=s,i[l+2]=s;return i}function Qc(a,e){const{width:t,height:n}=a,i=new Uint8Array(t*n*3);let s;for(let r=0,l=0;r<a.length;++r,l+=3)s=a[r]/e*256,i[l]=s,i[l+1]=s,i[l+2]=s;return i}function eu(a,e){const{width:t,height:n}=a,i=new Uint8Array(t*n*3),s=e.length/3,r=e.length/3*2;for(let l=0,o=0;l<a.length;++l,o+=3){const c=a[l];i[o]=e[c]/65536*256,i[o+1]=e[c+s]/65536*256,i[o+2]=e[c+r]/65536*256}return i}function tu(a){const{width:e,height:t}=a,n=new Uint8Array(e*t*3);for(let i=0,s=0;i<a.length;i+=4,s+=3){const r=a[i],l=a[i+1],o=a[i+2],c=a[i+3];n[s]=255*((255-r)/256)*((255-c)/256),n[s+1]=255*((255-l)/256)*((255-c)/256),n[s+2]=255*((255-o)/256)*((255-c)/256)}return n}function nu(a){const{width:e,height:t}=a,n=new Uint8ClampedArray(e*t*3);for(let i=0,s=0;i<a.length;i+=3,s+=3){const r=a[i],l=a[i+1],o=a[i+2];n[s]=r+1.402*(o-128),n[s+1]=r-.34414*(l-128)-.71414*(o-128),n[s+2]=r+1.772*(l-128)}return n}const au=.95047,iu=1,su=1.08883;function ru(a){const{width:e,height:t}=a,n=new Uint8Array(e*t*3);for(let i=0,s=0;i<a.length;i+=3,s+=3){const r=a[i+0],l=a[i+1]<<24>>24,o=a[i+2]<<24>>24;let c=(r+16)/116,_=l/500+c,u=c-o/200,d,h,f;_=au*(_*_*_>.008856?_*_*_:(_-16/116)/7.787),c=iu*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),u=su*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),d=_*3.2406+c*-1.5372+u*-.4986,h=_*-.9689+c*1.8758+u*.0415,f=_*.0557+c*-.204+u*1.057,d=d>.0031308?1.055*d**(1/2.4)-.055:12.92*d,h=h>.0031308?1.055*h**(1/2.4)-.055:12.92*h,f=f>.0031308?1.055*f**(1/2.4)-.055:12.92*f,n[s]=Math.max(0,Math.min(1,d))*255,n[s+1]=Math.max(0,Math.min(1,h))*255,n[s+2]=Math.max(0,Math.min(1,f))*255}return n}const vr=new Map;function Qe(a,e){Array.isArray(a)||(a=[a]),a.forEach(t=>vr.set(t,e))}async function lu(a){const e=vr.get(a.Compression);if(!e)throw new Error(`Unknown compression method identifier: ${a.Compression}`);const t=await e();return new t(a)}Qe([void 0,1],()=>ft(()=>import("./raw-Ctlamky6.lG6ojroe.js"),__vite__mapDeps([0,1])).then(a=>a.default));Qe(5,()=>ft(()=>import("./lzw-D2MxT2zA.DmRYnG5C.js"),__vite__mapDeps([2,1])).then(a=>a.default));Qe(6,()=>{throw new Error("old style JPEG compression is not supported.")});Qe(7,()=>ft(()=>import("./jpeg-CsvjaiEQ.A0lbw6YY.js"),__vite__mapDeps([3,1])).then(a=>a.default));Qe([8,32946],()=>ft(()=>import("./deflate-BsBbGVWD.DOOJQnHL.js"),__vite__mapDeps([4,5,1])).then(a=>a.default));Qe(32773,()=>ft(()=>import("./packbits-DJxVZ9kH.CBEwDSj4.js"),__vite__mapDeps([6,1])).then(a=>a.default));Qe(34887,()=>ft(()=>import("./lerc-D727YvsH.wPAbfslz.js"),__vite__mapDeps([7,5,1,8,9,10,11,12,13,14,15,16,17,18,19,20])).then(async a=>(await a.zstd.init(),a)).then(a=>a.default));Qe(50001,()=>ft(()=>import("./webimage-Bg_w2qlD.C0wZFOAS.js"),__vite__mapDeps([21,1])).then(a=>a.default));function ra(a,e,t,n=1){return new(Object.getPrototypeOf(a)).constructor(e*t*n)}function ou(a,e,t,n,i){const s=e/n,r=t/i;return a.map(l=>{const o=ra(l,n,i);for(let c=0;c<i;++c){const _=Math.min(Math.round(r*c),t-1);for(let u=0;u<n;++u){const d=Math.min(Math.round(s*u),e-1),h=l[_*e+d];o[c*n+u]=h}}return o})}function vt(a,e,t){return(1-t)*a+t*e}function _u(a,e,t,n,i){const s=e/n,r=t/i;return a.map(l=>{const o=ra(l,n,i);for(let c=0;c<i;++c){const _=r*c,u=Math.floor(_),d=Math.min(Math.ceil(_),t-1);for(let h=0;h<n;++h){const f=s*h,g=f%1,m=Math.floor(f),p=Math.min(Math.ceil(f),e-1),y=l[u*e+m],E=l[u*e+p],b=l[d*e+m],x=l[d*e+p],S=vt(vt(y,E,g),vt(b,x,g),_%1);o[c*n+h]=S}}return o})}function cu(a,e,t,n,i,s="nearest"){switch(s.toLowerCase()){case"nearest":return ou(a,e,t,n,i);case"bilinear":case"linear":return _u(a,e,t,n,i);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function uu(a,e,t,n,i,s){const r=e/n,l=t/i,o=ra(a,n,i,s);for(let c=0;c<i;++c){const _=Math.min(Math.round(l*c),t-1);for(let u=0;u<n;++u){const d=Math.min(Math.round(r*u),e-1);for(let h=0;h<s;++h){const f=a[_*e*s+d*s+h];o[c*n*s+u*s+h]=f}}}return o}function du(a,e,t,n,i,s){const r=e/n,l=t/i,o=ra(a,n,i,s);for(let c=0;c<i;++c){const _=l*c,u=Math.floor(_),d=Math.min(Math.ceil(_),t-1);for(let h=0;h<n;++h){const f=r*h,g=f%1,m=Math.floor(f),p=Math.min(Math.ceil(f),e-1);for(let y=0;y<s;++y){const E=a[u*e*s+m*s+y],b=a[u*e*s+p*s+y],x=a[d*e*s+m*s+y],S=a[d*e*s+p*s+y],I=vt(vt(E,b,g),vt(x,S,g),_%1);o[c*n*s+h*s+y]=I}}}return o}function hu(a,e,t,n,i,s,r="nearest"){switch(r.toLowerCase()){case"nearest":return uu(a,e,t,n,i,s);case"bilinear":case"linear":return du(a,e,t,n,i,s);default:throw new Error(`Unsupported resampling method: '${r}'`)}}function fu(a,e,t){let n=0;for(let i=e;i<t;++i)n+=a[i];return n}function ja(a,e,t){switch(a){case 1:if(e<=8)return new Uint8Array(t);if(e<=16)return new Uint16Array(t);if(e<=32)return new Uint32Array(t);break;case 2:if(e===8)return new Int8Array(t);if(e===16)return new Int16Array(t);if(e===32)return new Int32Array(t);break;case 3:switch(e){case 16:case 32:return new Float32Array(t);case 64:return new Float64Array(t)}break}throw Error("Unsupported data format/bitsPerSample")}function mu(a,e){return(a===1||a===2)&&e<=32&&e%8===0?!1:!(a===3&&(e===16||e===32||e===64))}function gu(a,e,t,n,i,s,r){const l=new DataView(a),o=t===2?r*s:r*s*n,c=t===2?1:n,_=ja(e,i,o),u=parseInt("1".repeat(i),2);if(e===1){let d;t===1?d=n*i:d=i;let h=s*d;h&7&&(h=h+7&-8);for(let f=0;f<r;++f){const g=f*h;for(let m=0;m<s;++m){const p=g+m*c*i;for(let y=0;y<c;++y){const E=p+y*i,b=(f*s+m)*c+y,x=Math.floor(E/8),S=E%8;if(S+i<=8)_[b]=l.getUint8(x)>>8-i-S&u;else if(S+i<=16)_[b]=l.getUint16(x)>>16-i-S&u;else if(S+i<=24){const I=l.getUint16(x)<<8|l.getUint8(x+2);_[b]=I>>24-i-S&u}else _[b]=l.getUint32(x)>>32-i-S&u}}}}return _.buffer}class pu{constructor(e,t,n,i,s,r){this.fileDirectory=e,this.geoKeys=t,this.dataView=n,this.littleEndian=i,this.tiles=s?{}:null,this.isTiled=!e.StripOffsets;const l=e.PlanarConfiguration;if(this.planarConfiguration=typeof l>"u"?1:l,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=r}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}getReaderForSample(e){const t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,n=this.fileDirectory.BitsPerSample[e];switch(t){case 1:if(n<=8)return DataView.prototype.getUint8;if(n<=16)return DataView.prototype.getUint16;if(n<=32)return DataView.prototype.getUint32;break;case 2:if(n<=8)return DataView.prototype.getInt8;if(n<=16)return DataView.prototype.getInt16;if(n<=32)return DataView.prototype.getInt32;break;case 3:switch(n){case 16:return function(i,s){return Ir(this,i,s)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}getBitsPerSample(e=0){return this.fileDirectory.BitsPerSample[e]}getArrayForSample(e,t){const n=this.getSampleFormat(e),i=this.getBitsPerSample(e);return ja(n,i,t)}async getTileOrStrip(e,t,n,i,s){const r=Math.ceil(this.getWidth()/this.getTileWidth()),l=Math.ceil(this.getHeight()/this.getTileHeight());let o;const{tiles:c}=this;this.planarConfiguration===1?o=t*r+e:this.planarConfiguration===2&&(o=n*r*l+t*r+e);let _,u;this.isTiled?(_=this.fileDirectory.TileOffsets[o],u=this.fileDirectory.TileByteCounts[o]):(_=this.fileDirectory.StripOffsets[o],u=this.fileDirectory.StripByteCounts[o]);const d=(await this.source.fetch([{offset:_,length:u}],s))[0];let h;return c===null||!c[o]?(h=(async()=>{let f=await i.decode(this.fileDirectory,d);const g=this.getSampleFormat(),m=this.getBitsPerSample();return mu(g,m)&&(f=gu(f,g,this.planarConfiguration,this.getSamplesPerPixel(),m,this.getTileWidth(),this.getBlockHeight(t))),f})(),c!==null&&(c[o]=h)):h=c[o],{x:e,y:t,sample:n,data:await h}}async _readRaster(e,t,n,i,s,r,l,o,c){const _=this.getTileWidth(),u=this.getTileHeight(),d=this.getWidth(),h=this.getHeight(),f=Math.max(Math.floor(e[0]/_),0),g=Math.min(Math.ceil(e[2]/_),Math.ceil(d/_)),m=Math.max(Math.floor(e[1]/u),0),p=Math.min(Math.ceil(e[3]/u),Math.ceil(h/u)),y=e[2]-e[0];let E=this.getBytesPerPixel();const b=[],x=[];for(let R=0;R<t.length;++R)this.planarConfiguration===1?b.push(fu(this.fileDirectory.BitsPerSample,0,t[R])/8):b.push(0),x.push(this.getReaderForSample(t[R]));const S=[],{littleEndian:I}=this;for(let R=m;R<p;++R)for(let A=f;A<g;++A){let C;this.planarConfiguration===1&&(C=this.getTileOrStrip(A,R,0,s,c));for(let D=0;D<t.length;++D){const L=D,F=t[D];this.planarConfiguration===2&&(E=this.getSampleByteSize(F),C=this.getTileOrStrip(A,R,F,s,c));const T=C.then(j=>{const O=j.data,U=new DataView(O),V=this.getBlockHeight(j.y),X=j.y*u,W=j.x*_,Y=X+V,v=(j.x+1)*_,et=x[L],tt=Math.min(V,V-(Y-e[3]),h-X),de=Math.min(_,_-(v-e[2]),d-W);for(let Re=Math.max(0,e[1]-X);Re<tt;++Re)for(let nt=Math.max(0,e[0]-W);nt<de;++nt){const Sn=(Re*_+nt)*E,Ft=et.call(U,Sn+b[L],I);let at;i?(at=(Re+X-e[1])*y*t.length+(nt+W-e[0])*t.length+L,n[at]=Ft):(at=(Re+X-e[1])*y+nt+W-e[0],n[L][at]=Ft)}});S.push(T)}}if(await Promise.all(S),r&&e[2]-e[0]!==r||l&&e[3]-e[1]!==l){let R;return i?R=hu(n,e[2]-e[0],e[3]-e[1],r,l,t.length,o):R=cu(n,e[2]-e[0],e[3]-e[1],r,l,o),R.width=r,R.height=l,R}return n.width=r||e[2]-e[0],n.height=l||e[3]-e[1],n}async readRasters({window:e,samples:t=[],interleave:n,pool:i=null,width:s,height:r,resampleMethod:l,fillValue:o,signal:c}={}){const _=e||[0,0,this.getWidth(),this.getHeight()];if(_[0]>_[2]||_[1]>_[3])throw new Error("Invalid subsets");const u=_[2]-_[0],d=_[3]-_[1],h=u*d,f=this.getSamplesPerPixel();if(!t||!t.length)for(let y=0;y<f;++y)t.push(y);else for(let y=0;y<t.length;++y)if(t[y]>=f)return Promise.reject(new RangeError(`Invalid sample index '${t[y]}'.`));let g;if(n){const y=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,E=Math.max.apply(null,this.fileDirectory.BitsPerSample);g=ja(y,E,h*t.length),o&&g.fill(o)}else{g=[];for(let y=0;y<t.length;++y){const E=this.getArrayForSample(t[y],h);Array.isArray(o)&&y<o.length?E.fill(o[y]):o&&!Array.isArray(o)&&E.fill(o),g.push(E)}}const m=i||await lu(this.fileDirectory);return await this._readRaster(_,t,g,n,m,s,r,l,c)}async readRGB({window:e,interleave:t=!0,pool:n=null,width:i,height:s,resampleMethod:r,enableAlpha:l=!1,signal:o}={}){const c=e||[0,0,this.getWidth(),this.getHeight()];if(c[0]>c[2]||c[1]>c[3])throw new Error("Invalid subsets");const _=this.fileDirectory.PhotometricInterpretation;if(_===ce.RGB){let p=[0,1,2];if(this.fileDirectory.ExtraSamples!==qc.Unspecified&&l){p=[];for(let y=0;y<this.fileDirectory.BitsPerSample.length;y+=1)p.push(y)}return this.readRasters({window:e,interleave:t,samples:p,pool:n,width:i,height:s,resampleMethod:r,signal:o})}let u;switch(_){case ce.WhiteIsZero:case ce.BlackIsZero:case ce.Palette:u=[0];break;case ce.CMYK:u=[0,1,2,3];break;case ce.YCbCr:case ce.CIELab:u=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const d={window:c,interleave:!0,samples:u,pool:n,width:i,height:s,resampleMethod:r,signal:o},{fileDirectory:h}=this,f=await this.readRasters(d),g=2**this.fileDirectory.BitsPerSample[0];let m;switch(_){case ce.WhiteIsZero:m=Jc(f,g);break;case ce.BlackIsZero:m=Qc(f,g);break;case ce.Palette:m=eu(f,h.ColorMap);break;case ce.CMYK:m=tu(f);break;case ce.YCbCr:m=nu(f);break;case ce.CIELab:m=ru(f);break;default:throw new Error("Unsupported photometric interpretation.")}if(!t){const p=new Uint8Array(m.length/3),y=new Uint8Array(m.length/3),E=new Uint8Array(m.length/3);for(let b=0,x=0;b<m.length;b+=3,++x)p[x]=m[b],y[x]=m[b+1],E[x]=m[b+2];m=[p,y,E]}return m.width=f.width,m.height=f.height,m}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const e=[];for(let t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}getGDALMetadata(e=null){const t={};if(!this.fileDirectory.GDAL_METADATA)return null;const n=this.fileDirectory.GDAL_METADATA;let i=Yc(n,"Item");e===null?i=i.filter(s=>Ma(s,"sample")===void 0):i=i.filter(s=>Number(Ma(s,"sample"))===e);for(let s=0;s<i.length;++s){const r=i[s];t[Ma(r,"name")]=r.inner}return t}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){const e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&e.length===6)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){const t=this.fileDirectory.ModelPixelScale,n=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(n)return n[1]===0&&n[4]===0?[n[0],-n[5],n[10]]:[Math.sqrt(n[0]*n[0]+n[4]*n[4]),-Math.sqrt(n[1]*n[1]+n[5]*n[5]),n[10]];if(e){const[i,s,r]=e.getResolution();return[i*e.getWidth()/this.getWidth(),s*e.getHeight()/this.getHeight(),r*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(e=!1){const t=this.getHeight(),n=this.getWidth();if(this.fileDirectory.ModelTransformation&&!e){const[i,s,r,l,o,c,_,u]=this.fileDirectory.ModelTransformation,h=[[0,0],[0,t],[n,0],[n,t]].map(([m,p])=>[l+i*m+s*p,u+o*m+c*p]),f=h.map(m=>m[0]),g=h.map(m=>m[1]);return[Math.min(...f),Math.min(...g),Math.max(...f),Math.max(...g)]}else{const i=this.getOrigin(),s=this.getResolution(),r=i[0],l=i[1],o=r+s[0]*n,c=l+s[1]*t;return[Math.min(r,o),Math.min(l,c),Math.max(r,o),Math.max(l,c)]}}}class yu{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,t){const n=this.getUint32(e,t),i=this.getUint32(e+4,t);let s;if(t){if(s=n+2**32*i,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}if(s=2**32*n+i,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}getInt64(e,t){let n=0;const i=(this._dataView.getUint8(e+(t?7:0))&128)>0;let s=!0;for(let r=0;r<8;r++){let l=this._dataView.getUint8(e+(t?r:7-r));i&&(s?l!==0&&(l=~(l-1)&255,s=!1):l=~l&255),n+=l*256**r}return i&&(n=-n),n}getUint8(e,t){return this._dataView.getUint8(e,t)}getInt8(e,t){return this._dataView.getInt8(e,t)}getUint16(e,t){return this._dataView.getUint16(e,t)}getInt16(e,t){return this._dataView.getInt16(e,t)}getUint32(e,t){return this._dataView.getUint32(e,t)}getInt32(e,t){return this._dataView.getInt32(e,t)}getFloat16(e,t){return Ir(this._dataView,e,t)}getFloat32(e,t){return this._dataView.getFloat32(e,t)}getFloat64(e,t){return this._dataView.getFloat64(e,t)}}class bu{constructor(e,t,n,i){this._dataView=new DataView(e),this._sliceOffset=t,this._littleEndian=n,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){const t=this.readUint32(e),n=this.readUint32(e+4);let i;if(this._littleEndian){if(i=t+2**32*n,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*t+n,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}readInt64(e){let t=0;const n=(this._dataView.getUint8(e+(this._littleEndian?7:0))&128)>0;let i=!0;for(let s=0;s<8;s++){let r=this._dataView.getUint8(e+(this._littleEndian?s:7-s));n&&(i?r!==0&&(r=~(r-1)&255,i=!1):r=~r&255),t+=r*256**s}return n&&(t=-t),t}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}const Ss=`\r
\r
`;function Cr(a){if(typeof Object.fromEntries<"u")return Object.fromEntries(a);const e={};for(const[t,n]of a)e[t.toLowerCase()]=n;return e}function wu(a){const e=a.split(`\r
`).map(t=>{const n=t.split(":").map(i=>i.trim());return n[0]=n[0].toLowerCase(),n});return Cr(e)}function xu(a){const[e,...t]=a.split(";").map(i=>i.trim()),n=t.map(i=>i.split("="));return{type:e,params:Cr(n)}}function Ka(a){let e,t,n;return a&&([,e,t,n]=a.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),t=parseInt(t,10),n=parseInt(n,10)),{start:e,end:t,total:n}}function Eu(a,e){let t=null;const n=new TextDecoder("ascii"),i=[],s=`--${e}`,r=`${s}--`;for(let l=0;l<10;++l)n.decode(new Uint8Array(a,l,s.length))===s&&(t=l);if(t===null)throw new Error("Could not find initial boundary");for(;t<a.byteLength;){const l=n.decode(new Uint8Array(a,t,Math.min(s.length+1024,a.byteLength-t)));if(l.length===0||l.startsWith(r))break;if(!l.startsWith(s))throw new Error("Part does not start with boundary");const o=l.substr(s.length+2);if(o.length===0)break;const c=o.indexOf(Ss),_=wu(o.substr(0,c)),{start:u,end:d,total:h}=Ka(_["content-range"]),f=t+s.length+c+Ss.length,g=parseInt(d,10)+1-parseInt(u,10);i.push({headers:_,data:a.slice(f,f+g),offset:u,length:g,fileSize:h}),t=f+g+4}return i}class kr{async fetch(e,t=void 0){return Promise.all(e.map(n=>this.fetchSlice(n,t)))}async fetchSlice(e){throw new Error(`fetching of slice ${e} not possible, not implemented`)}get fileSize(){return null}async close(){}}class Su extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(const[t,n]of e)this.onEviction(t,n.value)}_deleteIfExpired(e,t){return typeof t.expiry=="number"&&t.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,t.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,t){if(this._deleteIfExpired(e,t)===!1)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const n=t.get(e);return this._getItemValue(e,n)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,n]=e;this.cache.has(t)||this._deleteIfExpired(t,n)===!1&&(yield e)}for(const e of this.cache){const[t,n]=e;this._deleteIfExpired(t,n)===!1&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(this._deleteIfExpired(e,t)===!1)return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:n=this.maxAge}={}){const i=typeof n=="number"&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;return this.cache.has(e)?this.cache.set(e,{value:t,expiry:i}):this._set(e,{value:t,expiry:i}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],n=t.length-e;n<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(n>0&&this._emitEvictions(t.slice(0,n)),this.oldCache=new Map(t.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,n]=e;this._deleteIfExpired(t,n)===!1&&(yield[t,n.value])}for(const e of this.oldCache){const[t,n]=e;this.cache.has(t)||this._deleteIfExpired(t,n)===!1&&(yield[t,n.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const n=e[t],[i,s]=n;this._deleteIfExpired(i,s)===!1&&(yield[i,s.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const n=e[t],[i,s]=n;this.cache.has(i)||this._deleteIfExpired(i,s)===!1&&(yield[i,s.value])}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[n,i]of this.entriesAscending())e.call(t,i,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function Ru(a){return new Promise(e=>setTimeout(e,a))}function Iu(a,e){const t=Array.isArray(a)?a:Array.from(a),n=Array.isArray(e)?e:Array.from(e);return t.map((i,s)=>[i,n[s]])}class Mt extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,Mt),this.name="AbortError"}}class Au extends Error{constructor(e,t){super(t),this.errors=e,this.message=t,this.name="AggregateError"}}const vu=Au;class Cu{constructor(e,t,n=null){this.offset=e,this.length=t,this.data=n}get top(){return this.offset+this.length}}class Rs{constructor(e,t,n){this.offset=e,this.length=t,this.blockIds=n}}class ku extends kr{constructor(e,{blockSize:t=65536,cacheSize:n=100}={}){super(),this.source=e,this.blockSize=t,this.blockCache=new Su({maxSize:n,onEviction:(i,s)=>{this.evictedBlocks.set(i,s)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(e,t){const n=[],i=[],s=[];this.evictedBlocks.clear();for(const{offset:d,length:h}of e){let f=d+h;const{fileSize:g}=this;g!==null&&(f=Math.min(f,g));const m=Math.floor(d/this.blockSize)*this.blockSize;for(let p=m;p<f;p+=this.blockSize){const y=Math.floor(p/this.blockSize);!this.blockCache.has(y)&&!this.blockRequests.has(y)&&(this.blockIdsToFetch.add(y),i.push(y)),this.blockRequests.has(y)&&n.push(this.blockRequests.get(y)),s.push(y)}}await Ru(),this.fetchBlocks(t);const r=[];for(const d of i)this.blockRequests.has(d)&&r.push(this.blockRequests.get(d));await Promise.allSettled(n),await Promise.allSettled(r);const l=[],o=s.filter(d=>this.abortedBlockIds.has(d)||!this.blockCache.has(d));if(o.forEach(d=>this.blockIdsToFetch.add(d)),o.length>0&&t&&!t.aborted){this.fetchBlocks(null);for(const d of o){const h=this.blockRequests.get(d);if(!h)throw new Error(`Block ${d} is not in the block requests`);l.push(h)}await Promise.allSettled(l)}if(t&&t.aborted)throw new Mt("Request was aborted");const c=s.map(d=>this.blockCache.get(d)||this.evictedBlocks.get(d)),_=c.filter(d=>!d);if(_.length)throw new vu(_,"Request failed");const u=new Map(Iu(s,c));return this.readSliceData(e,u)}fetchBlocks(e){if(this.blockIdsToFetch.size>0){const t=this.groupBlocks(this.blockIdsToFetch),n=this.source.fetch(t,e);for(let i=0;i<t.length;++i){const s=t[i];for(const r of s.blockIds)this.blockRequests.set(r,(async()=>{try{const l=(await n)[i],o=r*this.blockSize,c=o-l.offset,_=Math.min(c+this.blockSize,l.data.byteLength),u=l.data.slice(c,_),d=new Cu(o,u.byteLength,u,r);this.blockCache.set(r,d),this.abortedBlockIds.delete(r)}catch(l){if(l.name==="AbortError")l.signal=e,this.blockCache.delete(r),this.abortedBlockIds.add(r);else throw l}finally{this.blockRequests.delete(r)}})())}this.blockIdsToFetch.clear()}}groupBlocks(e){const t=Array.from(e).sort((r,l)=>r-l);if(t.length===0)return[];let n=[],i=null;const s=[];for(const r of t)i===null||i+1===r?(n.push(r),i=r):(s.push(new Rs(n[0]*this.blockSize,n.length*this.blockSize,n)),n=[r],i=r);return s.push(new Rs(n[0]*this.blockSize,n.length*this.blockSize,n)),s}readSliceData(e,t){return e.map(n=>{let i=n.offset+n.length;this.fileSize!==null&&(i=Math.min(this.fileSize,i));const s=Math.floor(n.offset/this.blockSize),r=Math.floor(i/this.blockSize),l=new ArrayBuffer(n.length),o=new Uint8Array(l);for(let c=s;c<=r;++c){const _=t.get(c),u=_.offset-n.offset,d=_.top-i;let h=0,f=0,g;u<0?h=-u:u>0&&(f=u),d<0?g=_.length-h:g=i-_.offset-h;const m=new Uint8Array(_.data,h,g);o.set(m,f)}return l})}}class mi{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(e){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class gi{constructor(e){this.url=e}async request({headers:e,signal:t}={}){throw new Error("request is not implemented")}}class Lu extends mi{constructor(e){super(),this.response=e}get status(){return this.response.status}getHeader(e){return this.response.headers.get(e)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class Tu extends gi{constructor(e,t){super(e),this.credentials=t}async request({headers:e,signal:t}={}){const n=await fetch(this.url,{headers:e,credentials:this.credentials,signal:t});return new Lu(n)}}class Mu extends mi{constructor(e,t){super(),this.xhr=e,this.data=t}get status(){return this.xhr.status}getHeader(e){return this.xhr.getResponseHeader(e)}async getData(){return this.data}}class Du extends gi{constructRequest(e,t){return new Promise((n,i)=>{const s=new XMLHttpRequest;s.open("GET",this.url),s.responseType="arraybuffer";for(const[r,l]of Object.entries(e))s.setRequestHeader(r,l);s.onload=()=>{const r=s.response;n(new Mu(s,r))},s.onerror=i,s.onabort=()=>i(new Mt("Request aborted")),s.send(),t&&(t.aborted&&s.abort(),t.addEventListener("abort",()=>s.abort()))})}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}const Oa={};class Ou extends mi{constructor(e,t){super(),this.response=e,this.dataPromise=t}get status(){return this.response.statusCode}getHeader(e){return this.response.headers[e]}async getData(){return await this.dataPromise}}class Pu extends gi{constructor(e){super(e),this.parsedUrl=Oa.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",Oa)}constructRequest(e,t){return new Promise((n,i)=>{const s=this.httpApi.get({...this.parsedUrl,headers:e},r=>{const l=new Promise(o=>{const c=[];r.on("data",_=>{c.push(_)}),r.on("end",()=>{const _=Buffer.concat(c).buffer;o(_)}),r.on("error",i)});n(new Ou(r,l))});s.on("error",i),t&&(t.aborted&&s.destroy(new Mt("Request aborted")),t.addEventListener("abort",()=>s.destroy(new Mt("Request aborted"))))})}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}class pi extends kr{constructor(e,t,n,i){super(),this.client=e,this.headers=t,this.maxRanges=n,this.allowFullFile=i,this._fileSize=null}async fetch(e,t){return this.maxRanges>=e.length?this.fetchSlices(e,t):Promise.all(e.map(n=>this.fetchSlice(n,t)))}async fetchSlices(e,t){const n=await this.client.request({headers:{...this.headers,Range:`bytes=${e.map(({offset:i,length:s})=>`${i}-${i+s}`).join(",")}`},signal:t});if(n.ok)if(n.status===206){const{type:i,params:s}=xu(n.getHeader("content-type"));if(i==="multipart/byteranges"){const u=Eu(await n.getData(),s.boundary);return this._fileSize=u[0].fileSize||null,u}const r=await n.getData(),{start:l,end:o,total:c}=Ka(n.getHeader("content-range"));this._fileSize=c||null;const _=[{data:r,offset:l,length:o-l}];if(e.length>1){const u=await Promise.all(e.slice(1).map(d=>this.fetchSlice(d,t)));return _.concat(u)}return _}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const i=await n.getData();return this._fileSize=i.byteLength,[{data:i,offset:0,length:i.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(e,t){const{offset:n,length:i}=e,s=await this.client.request({headers:{...this.headers,Range:`bytes=${n}-${n+i}`},signal:t});if(s.ok)if(s.status===206){const r=await s.getData(),{total:l}=Ka(s.getHeader("content-range"));return this._fileSize=l||null,{data:r,offset:n,length:i}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const r=await s.getData();return this._fileSize=r.byteLength,{data:r,offset:0,length:r.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function yi(a,{blockSize:e,cacheSize:t}){return e===null?a:new ku(a,{blockSize:e,cacheSize:t})}function Fu(a,{headers:e={},credentials:t,maxRanges:n=0,allowFullFile:i=!1,...s}={}){const r=new Tu(a,t),l=new pi(r,e,n,i);return yi(l,s)}function Nu(a,{headers:e={},maxRanges:t=0,allowFullFile:n=!1,...i}={}){const s=new Du(a),r=new pi(s,e,t,n);return yi(r,i)}function Bu(a,{headers:e={},maxRanges:t=0,allowFullFile:n=!1,...i}={}){const s=new Pu(a),r=new pi(s,e,t,n);return yi(r,i)}function Gu(a,{forceXHR:e=!1,...t}={}){return typeof fetch=="function"&&!e?Fu(a,t):typeof XMLHttpRequest<"u"?Nu(a,t):Bu(a,t)}function Wa(a){switch(a){case B.BYTE:case B.ASCII:case B.SBYTE:case B.UNDEFINED:return 1;case B.SHORT:case B.SSHORT:return 2;case B.LONG:case B.SLONG:case B.FLOAT:case B.IFD:return 4;case B.RATIONAL:case B.SRATIONAL:case B.DOUBLE:case B.LONG8:case B.SLONG8:case B.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${a}`)}}function Uu(a){const e=a.GeoKeyDirectory;if(!e)return null;const t={};for(let n=4;n<=e[3]*4;n+=4){const i=$c[e[n]],s=e[n+1]?ln[e[n+1]]:null,r=e[n+2],l=e[n+3];let o=null;if(!s)o=l;else{if(o=a[s],typeof o>"u"||o===null)throw new Error(`Could not get value of geoKey '${i}'.`);typeof o=="string"?o=o.substring(l,l+r-1):o.subarray&&(o=o.subarray(l,l+r),r===1&&(o=o[0]))}t[i]=o}return t}function xt(a,e,t,n){let i=null,s=null;const r=Wa(e);switch(e){case B.BYTE:case B.ASCII:case B.UNDEFINED:i=new Uint8Array(t),s=a.readUint8;break;case B.SBYTE:i=new Int8Array(t),s=a.readInt8;break;case B.SHORT:i=new Uint16Array(t),s=a.readUint16;break;case B.SSHORT:i=new Int16Array(t),s=a.readInt16;break;case B.LONG:case B.IFD:i=new Uint32Array(t),s=a.readUint32;break;case B.SLONG:i=new Int32Array(t),s=a.readInt32;break;case B.LONG8:case B.IFD8:i=new Array(t),s=a.readUint64;break;case B.SLONG8:i=new Array(t),s=a.readInt64;break;case B.RATIONAL:i=new Uint32Array(t*2),s=a.readUint32;break;case B.SRATIONAL:i=new Int32Array(t*2),s=a.readInt32;break;case B.FLOAT:i=new Float32Array(t),s=a.readFloat32;break;case B.DOUBLE:i=new Float64Array(t),s=a.readFloat64;break;default:throw new RangeError(`Invalid field type: ${e}`)}if(e===B.RATIONAL||e===B.SRATIONAL)for(let l=0;l<t;l+=2)i[l]=s.call(a,n+l*r),i[l+1]=s.call(a,n+(l*r+4));else for(let l=0;l<t;++l)i[l]=s.call(a,n+l*r);return e===B.ASCII?new TextDecoder("utf-8").decode(i):i}class zu{constructor(e,t,n){this.fileDirectory=e,this.geoKeyDirectory=t,this.nextIFDByteOffset=n}}class zn extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}}class Vu{async readRasters(e={}){const{window:t,width:n,height:i}=e;let{resX:s,resY:r,bbox:l}=e;const o=await this.getImage();let c=o;const _=await this.getImageCount(),u=o.getBoundingBox();if(t&&l)throw new Error('Both "bbox" and "window" passed.');if(n||i){if(t){const[f,g]=o.getOrigin(),[m,p]=o.getResolution();l=[f+t[0]*m,g+t[1]*p,f+t[2]*m,g+t[3]*p]}const h=l||u;if(n){if(s)throw new Error("Both width and resX passed");s=(h[2]-h[0])/n}if(i){if(r)throw new Error("Both width and resY passed");r=(h[3]-h[1])/i}}if(s||r){const h=[];for(let f=0;f<_;++f){const g=await this.getImage(f),{SubfileType:m,NewSubfileType:p}=g.fileDirectory;(f===0||m===2||p&1)&&h.push(g)}h.sort((f,g)=>f.getWidth()-g.getWidth());for(let f=0;f<h.length;++f){const g=h[f],m=(u[2]-u[0])/g.getWidth(),p=(u[3]-u[1])/g.getHeight();if(c=g,s&&s>m||r&&r>p)break}}let d=t;if(l){const[h,f]=o.getOrigin(),[g,m]=c.getResolution(o);d=[Math.round((l[0]-h)/g),Math.round((l[1]-f)/m),Math.round((l[2]-h)/g),Math.round((l[3]-f)/m)],d=[Math.min(d[0],d[2]),Math.min(d[1],d[3]),Math.max(d[0],d[2]),Math.max(d[1],d[3])]}return c.readRasters({...e,window:d})}}class bi extends Vu{constructor(e,t,n,i,s={}){super(),this.source=e,this.littleEndian=t,this.bigTiff=n,this.firstIFDOffset=i,this.cache=s.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(e,t){const n=this.bigTiff?4048:1024;return new bu((await this.source.fetch([{offset:e,length:typeof t<"u"?t:n}]))[0],e,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(e){const t=this.bigTiff?20:12,n=this.bigTiff?8:2;let i=await this.getSlice(e);const s=this.bigTiff?i.readUint64(e):i.readUint16(e),r=s*t+(this.bigTiff?16:6);i.covers(e,r)||(i=await this.getSlice(e,r));const l={};let o=e+(this.bigTiff?8:2);for(let u=0;u<s;o+=t,++u){const d=i.readUint16(o),h=i.readUint16(o+2),f=this.bigTiff?i.readUint64(o+4):i.readUint32(o+4);let g,m;const p=Wa(h),y=o+(this.bigTiff?12:8);if(p*f<=(this.bigTiff?8:4))g=xt(i,h,f,y);else{const E=i.readOffset(y),b=Wa(h)*f;if(i.covers(E,b))g=xt(i,h,f,E);else{const x=await this.getSlice(E,b);g=xt(x,h,f,E)}}f===1&&Zc.indexOf(d)===-1&&!(h===B.RATIONAL||h===B.SRATIONAL)?m=g[0]:m=g,l[ln[d]]=m}const c=Uu(l),_=i.readOffset(e+n+t*s);return new zu(l,c,_)}async requestIFD(e){if(this.ifdRequests[e])return this.ifdRequests[e];if(e===0)return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(t){throw t instanceof zn?new zn(e):t}return this.ifdRequests[e]=(async()=>{const t=await this.ifdRequests[e-1];if(t.nextIFDByteOffset===0)throw new zn(e);return this.parseFileDirectoryAt(t.nextIFDByteOffset)})(),this.ifdRequests[e]}async getImage(e=0){const t=await this.requestIFD(e);return new pu(t.fileDirectory,t.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let e=0,t=!0;for(;t;)try{await this.requestIFD(e),++e}catch(n){if(n instanceof zn)t=!1;else throw n}return e}async getGhostValues(){const e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const t="GDAL_STRUCTURAL_METADATA_SIZE=",n=t.length+100;let i=await this.getSlice(e,n);if(t===xt(i,B.ASCII,t.length,e)){const r=xt(i,B.ASCII,n,e).split(`
`)[0],l=Number(r.split("=")[1].split(" ")[0])+r.length;l>n&&(i=await this.getSlice(e,l));const o=xt(i,B.ASCII,l,e);this.ghostValues={},o.split(`
`).filter(c=>c.length>0).map(c=>c.split("=")).forEach(([c,_])=>{this.ghostValues[c]=_})}return this.ghostValues}static async fromSource(e,t,n){const i=(await e.fetch([{offset:0,length:1024}],n))[0],s=new yu(i),r=s.getUint16(0,0);let l;if(r===18761)l=!0;else if(r===19789)l=!1;else throw new TypeError("Invalid byte order value.");const o=s.getUint16(2,l);let c;if(o===42)c=!1;else if(o===43){if(c=!0,s.getUint16(4,l)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const _=c?s.getUint64(8,l):s.getUint32(4,l);return new bi(e,l,c,_,t)}close(){return typeof this.source.close=="function"?this.source.close():!1}}async function Hu(a,e={},t){return bi.fromSource(Gu(a,e),t)}const Is=[[-1,-1],[0,-1],[-1,0],[1,0],[-1,1],[0,1]],As=[[0,-1],[1,-1],[-1,0],[1,0],[0,1],[1,1]];class ju{constructor(e){this.width=e.width,this.height=e.height,this.size=e.size,this.locations=e.locations,this.bbox=e.bbox,this.board=Us([]),this.center=[],this.gameSize=null,this.fieldCount=0,this.mineCount=0,this.minColor=e.minColor,this.maxColor=e.maxColor,this.minValue=e.minValue,this.maxValue=e.maxValue}getUncoveredAreaPercent(){let e=0;for(let t=0;t<this.height;t++)for(let n=0;n<this.width;n++)this.board[t][n].isRevealed&&e++;return e/this.fieldCount}revealAllTiles(){for(let e=0;e<this.height;e++)for(let t=0;t<this.width;t++){const n=this.board[e][t];n.isMine?n.isFlagged=!0:n.isRevealed=!0}}async fromGeoTIFF(e){try{const n=await(await Hu(e.geotiff.url)).getImage(),i=this.locations[0],{bbox:s}=this,r=ma(e.geotiff.projection,"EPSG:3857",[s[0],s[1]]),l=ma(e.geotiff.projection,"EPSG:3857",[s[2],s[3]]),o=l[0]-r[0],c=l[1]-r[1];this.gameSize=Math.round(o/this.size/1.75),this.width=this.size,this.height=Math.round(c/o*this.size*1.18);const[_,u]=n.getOrigin(),[d,h]=n.getResolution(n);let f=[Math.round((s[0]-_)/d),Math.round((s[1]-u)/h),Math.round((s[2]-_)/d),Math.round((s[3]-u)/h)];f=[Math.min(f[0],f[2]),Math.min(f[1],f[3]),Math.max(f[0],f[2]),Math.max(f[1],f[3])];let g=(await n.readRasters({window:f,width:this.width,height:this.height}))[0];g=g.reverse();const m=new Array(g.length);for(let b=0;b<this.height;b++)for(let x=0;x<this.width;x++){const S=g[b*this.width+(this.width-1-x)];m[b*this.width+x]=S}g=m;const p=[s[0],s[1]],y=ma(e.geotiff.projection,"EPSG:3857",p);this.center=[y[0]-1*this.gameSize,y[1]+.5*this.gameSize];let E=0;typeof i.isMineCondition=="number"&&(E=Xl(g,i.isMineCondition));for(let b=0;b<this.height;b++){const x=[];for(let S=0;S<this.width;S++){const I=g[b*this.width+S];let R;typeof i.isMineCondition=="function"?R=!Number.isNaN(I)&&i.isMineCondition(I):typeof i.isMineCondition=="number"?R=!Number.isNaN(I)&&I>E:R=Math.round(Math.random()),x.push({isMine:R,adjacentMines:0,isRevealed:!1,isFlagged:!1,element:null,value:I})}this.board.push(x)}this.fieldCount=this.width*this.height;for(let b=0;b<this.height;b++)for(let x=0;x<this.width;x++)this.board[b][x].isMine&&this.mineCount++;for(let b=0;b<this.height;b++)for(let x=0;x<this.width;x++){const S=this.calculateAdjacentMines(x,b);this.board[b][x].adjacentMines=S}}catch(t){console.error("Error loading GeoTIFF data:",t)}}getNeighborCoordinates(e,t){return(t%2===0?Is:As).map(([i,s])=>[e+i,t+s])}convertAxialToGameCoords(e,t){return{x:e+Math.floor(t/2),y:t}}convertGameCoordsToAxial(e,t){return[e-Math.floor(t/2),t]}calculateAdjacentMines(e,t){let n=0;const i=t%2===0?Is:As;for(const[s,r]of i){const l=e+s,o=t+r;l>=0&&l<this.width&&o>=0&&o<this.height&&this.board[o]&&this.board[o][l].isMine&&n++}return n}revealTile(e,t){let n=[[e,t]];const i=this.get(e,t);return i?i.isRevealed||i.isFlagged?[]:(i.isRevealed=!0,i.adjacentMines>0&&!i.isMine||this.getNeighborCoordinates(e,t).forEach(([r,l])=>{this.isValidCoordinate(r,l)&&!this.board[l][r].isRevealed&&(!this.board[l][r].isMine&&this.board[l][r].adjacentMines===0?n=n.concat(this.revealTile(r,l)??[]):this.board[l][r].isMine||(this.board[l][r].isRevealed=!0,n.push([r,l])))}),n):null}isValidCoordinate(e,t){return!!(this.board[t]&&this.board[t][e])}isOutOfBounds(e,t){return!this.isValidCoordinate(e,t)}isMine(e,t){return this.board[t]&&this.board[t][e]&&this.board[t][e].isMine}get(e,t){return this.isOutOfBounds(e,t)?null:this.board[t][e]}}var wi=class extends Dt{constructor(e){e=e||{},super(e),this.size_=e.size||8e4,this.origin_=e.origin||[0,0],this.layout_=this.layout[e.layout]||this.layout.pointy}setLayout(e){this.layout_=this.layout[e]||this.layout.pointy,this.changed()}getLayout(){return this.layout_[9]!=0?"pointy":"flat"}setOrigin(e){this.origin_=e,this.changed()}getOrigin(){return this.origin_}setSize(e){this.size_=e||8e4,this.changed()}getSize(){return this.size_}cube2hex(e){return[e[0],e[2]]}hex2cube(e){return[e[0],-e[0]-e[1],e[1]]}hex2offset(e){return this.layout_[9]?[e[0]+(e[1]-(e[1]&1))/2,e[1]]:[e[0],e[1]+(e[0]+(e[0]&1))/2]}offset2hex(e){return this.layout_[9]?[e[0]-(e[1]-(e[1]&1))/2,e[1]]:[e[0],e[1]-(e[0]+(e[0]&1))/2]}cube2offset(e){return this.hex2offset(this.cube2hex(e))}offset2cube(e){return this.hex2cube(this.offset2Hex(e))}cube_round(e){var t=Math.round(e[0]),n=Math.round(e[1]),i=Math.round(e[2]),s=Math.abs(t-e[0]),r=Math.abs(n-e[1]),l=Math.abs(i-e[2]);return s>r&&s>l?t=-n-i:r>l?n=-t-i:i=-t-n,[t,n,i]}hex_round(e){return this.cube2hex(this.cube_round(this.hex2cube(e)))}hex_corner(e,t,n){return[e[0]+t*this.layout_[8+2*(n%6)],e[1]+t*this.layout_[9+2*(n%6)]]}getHexagonAtCoord(e){return this.getHexagon(this.coord2hex(e))}getHexagon(e){for(var t=[],n=this.hex2coord(e),i=0;i<=7;i++)t.push(this.hex_corner(n,this.size_,i,this.layout_[8]));return t}hex2coord(e){return[this.origin_[0]+this.size_*(this.layout_[0]*e[0]+this.layout_[1]*e[1]),this.origin_[1]+this.size_*(this.layout_[2]*e[0]+this.layout_[3]*e[1])]}coord2hex(e){var t=[(e[0]-this.origin_[0])/this.size_,(e[1]-this.origin_[1])/this.size_],n=this.layout_[4]*t[0]+this.layout_[5]*t[1],i=this.layout_[6]*t[0]+this.layout_[7]*t[1];return this.hex_round([n,i])}cube_distance(e,t){return Math.max(Math.abs(e[0]-t[0]),Math.abs(e[1]-t[1]),Math.abs(e[2]-t[2]))}lerp(e,t,n){return e+(t-e)*n}cube_lerp(e,t,n){return[this.lerp(e[0]+1e-6,t[0],n),this.lerp(e[1]+1e-6,t[1],n),this.lerp(e[2]+1e-6,t[2],n)]}cube_line(e,t){var n=this.cube_distance(e,t);if(!n)return[e];for(var i=[],s=0;s<=n;s++)i.push(this.cube_round(this.cube_lerp(e,t,s/n)));return i}hex_neighbors(e,t){if(t!==void 0)return[e[0]+this.neighbors.hex[t%6][0],e[1]+this.neighbors.hex[t%6][1]];var n=[];for(t=0;t<6;t++)n.push([e[0]+this.neighbors.hex[t][0],e[1]+this.neighbors.hex[t][1]]);return n}cube_neighbors(e,t){if(t!==void 0)return[e[0]+this.neighbors.cube[t%6][0],e[1]+this.neighbors.cube[t%6][1],e[2]+this.neighbors.cube[t%6][2]];var n=[];for(t=0;t<6;t++)n.push([e[0]+this.neighbors.cube[t][0],e[1]+this.neighbors.cube[t][1],e[2]+this.neighbors.cube[t][2]]);for(t=0;t<6;t++)n[t]=this.cube2hex(n[t]);return n}};wi.prototype.layout={pointy:[Math.sqrt(3),Math.sqrt(3)/2,0,3/2,Math.sqrt(3)/3,-1/3,0,2/3,Math.cos(Math.PI/180*(60*0+30)),Math.sin(Math.PI/180*(60*0+30)),Math.cos(Math.PI/180*(60*1+30)),Math.sin(Math.PI/180*(60*1+30)),Math.cos(Math.PI/180*(60*2+30)),Math.sin(Math.PI/180*(60*2+30)),Math.cos(Math.PI/180*(60*3+30)),Math.sin(Math.PI/180*(60*3+30)),Math.cos(Math.PI/180*(60*4+30)),Math.sin(Math.PI/180*(60*4+30)),Math.cos(Math.PI/180*(60*5+30)),Math.sin(Math.PI/180*(60*5+30))],flat:[3/2,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,Math.cos(Math.PI/180*(60*0)),Math.sin(Math.PI/180*(60*0)),Math.cos(Math.PI/180*(60*1)),Math.sin(Math.PI/180*(60*1)),Math.cos(Math.PI/180*(60*2)),Math.sin(Math.PI/180*(60*2)),Math.cos(Math.PI/180*(60*3)),Math.sin(Math.PI/180*(60*3)),Math.cos(Math.PI/180*(60*4)),Math.sin(Math.PI/180*(60*4)),Math.cos(Math.PI/180*(60*5)),Math.sin(Math.PI/180*(60*5))]};wi.prototype.neighbors={cube:[[1,-1,0],[1,0,-1],[0,1,-1],[-1,1,0],[-1,0,1],[0,-1,1]],hex:[[1,0],[1,-1],[0,-1],[-1,0],[-1,1],[0,1]]};function Je(a,e,t={}){const n={type:"Feature"};return(t.id===0||t.id)&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.properties=e||{},n.geometry=a,n}function Ku(a,e,t={}){if(!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!vs(a[0])||!vs(a[1]))throw new Error("coordinates must contain numbers");return Je({type:"Point",coordinates:a},e,t)}function Wu(a,e,t={}){for(const i of a){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return Je({type:"Polygon",coordinates:a},e,t)}function Xu(a,e,t={}){if(a.length<2)throw new Error("coordinates must be an array of two or more positions");return Je({type:"LineString",coordinates:a},e,t)}function Xa(a,e={}){const t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=a,t}function Yu(a,e,t={}){return Je({type:"MultiLineString",coordinates:a},e,t)}function vs(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}function Zu(a,e={}){const t=Number(a[0]),n=Number(a[1]),i=Number(a[2]),s=Number(a[3]);if(a.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");const r=[t,n];return Wu([[r,[i,n],[i,s],[t,s],r]],e.properties,{bbox:a,id:e.id})}var qu=Zu;const je=11102230246251565e-32,ee=134217729,$u=(3+8*je)*je;function Pa(a,e,t,n,i){let s,r,l,o,c=e[0],_=n[0],u=0,d=0;_>c==_>-c?(s=c,c=e[++u]):(s=_,_=n[++d]);let h=0;if(u<a&&d<t)for(_>c==_>-c?(r=c+s,l=s-(r-c),c=e[++u]):(r=_+s,l=s-(r-_),_=n[++d]),s=r,l!==0&&(i[h++]=l);u<a&&d<t;)_>c==_>-c?(r=s+c,o=r-s,l=s-(r-o)+(c-o),c=e[++u]):(r=s+_,o=r-s,l=s-(r-o)+(_-o),_=n[++d]),s=r,l!==0&&(i[h++]=l);for(;u<a;)r=s+c,o=r-s,l=s-(r-o)+(c-o),c=e[++u],s=r,l!==0&&(i[h++]=l);for(;d<t;)r=s+_,o=r-s,l=s-(r-o)+(_-o),_=n[++d],s=r,l!==0&&(i[h++]=l);return(s!==0||h===0)&&(i[h++]=s),h}function Ju(a,e){let t=e[0];for(let n=1;n<a;n++)t+=e[n];return t}function En(a){return new Float64Array(a)}const Qu=(3+16*je)*je,ed=(2+12*je)*je,td=(9+64*je)*je*je,Et=En(4),Cs=En(8),ks=En(12),Ls=En(16),ae=En(4);function nd(a,e,t,n,i,s,r){let l,o,c,_,u,d,h,f,g,m,p,y,E,b,x,S,I,R;const A=a-i,C=t-i,D=e-s,L=n-s;b=A*L,d=ee*A,h=d-(d-A),f=A-h,d=ee*L,g=d-(d-L),m=L-g,x=f*m-(b-h*g-f*g-h*m),S=D*C,d=ee*D,h=d-(d-D),f=D-h,d=ee*C,g=d-(d-C),m=C-g,I=f*m-(S-h*g-f*g-h*m),p=x-I,u=x-p,Et[0]=x-(p+u)+(u-I),y=b+p,u=y-b,E=b-(y-u)+(p-u),p=E-S,u=E-p,Et[1]=E-(p+u)+(u-S),R=y+p,u=R-y,Et[2]=y-(R-u)+(p-u),Et[3]=R;let F=Ju(4,Et),T=ed*r;if(F>=T||-F>=T||(u=a-A,l=a-(A+u)+(u-i),u=t-C,c=t-(C+u)+(u-i),u=e-D,o=e-(D+u)+(u-s),u=n-L,_=n-(L+u)+(u-s),l===0&&o===0&&c===0&&_===0)||(T=td*r+$u*Math.abs(F),F+=A*_+L*l-(D*c+C*o),F>=T||-F>=T))return F;b=l*L,d=ee*l,h=d-(d-l),f=l-h,d=ee*L,g=d-(d-L),m=L-g,x=f*m-(b-h*g-f*g-h*m),S=o*C,d=ee*o,h=d-(d-o),f=o-h,d=ee*C,g=d-(d-C),m=C-g,I=f*m-(S-h*g-f*g-h*m),p=x-I,u=x-p,ae[0]=x-(p+u)+(u-I),y=b+p,u=y-b,E=b-(y-u)+(p-u),p=E-S,u=E-p,ae[1]=E-(p+u)+(u-S),R=y+p,u=R-y,ae[2]=y-(R-u)+(p-u),ae[3]=R;const j=Pa(4,Et,4,ae,Cs);b=A*_,d=ee*A,h=d-(d-A),f=A-h,d=ee*_,g=d-(d-_),m=_-g,x=f*m-(b-h*g-f*g-h*m),S=D*c,d=ee*D,h=d-(d-D),f=D-h,d=ee*c,g=d-(d-c),m=c-g,I=f*m-(S-h*g-f*g-h*m),p=x-I,u=x-p,ae[0]=x-(p+u)+(u-I),y=b+p,u=y-b,E=b-(y-u)+(p-u),p=E-S,u=E-p,ae[1]=E-(p+u)+(u-S),R=y+p,u=R-y,ae[2]=y-(R-u)+(p-u),ae[3]=R;const O=Pa(j,Cs,4,ae,ks);b=l*_,d=ee*l,h=d-(d-l),f=l-h,d=ee*_,g=d-(d-_),m=_-g,x=f*m-(b-h*g-f*g-h*m),S=o*c,d=ee*o,h=d-(d-o),f=o-h,d=ee*c,g=d-(d-c),m=c-g,I=f*m-(S-h*g-f*g-h*m),p=x-I,u=x-p,ae[0]=x-(p+u)+(u-I),y=b+p,u=y-b,E=b-(y-u)+(p-u),p=E-S,u=E-p,ae[1]=E-(p+u)+(u-S),R=y+p,u=R-y,ae[2]=y-(R-u)+(p-u),ae[3]=R;const U=Pa(O,ks,4,ae,Ls);return Ls[U-1]}function ad(a,e,t,n,i,s){const r=(e-s)*(t-i),l=(a-i)*(n-s),o=r-l,c=Math.abs(r+l);return Math.abs(o)>=Qu*c?o:-nd(a,e,t,n,i,s,c)}function id(a,e){var t,n,i=0,s,r,l,o,c,_,u,d=a[0],h=a[1],f=e.length;for(t=0;t<f;t++){n=0;var g=e[t],m=g.length-1;if(_=g[0],_[0]!==g[m][0]&&_[1]!==g[m][1])throw new Error("First and last coordinates in a ring must be the same");for(r=_[0]-d,l=_[1]-h,n;n<m;n++){if(u=g[n+1],o=u[0]-d,c=u[1]-h,l===0&&c===0){if(o<=0&&r>=0||r<=0&&o>=0)return 0}else if(c>=0&&l<=0||c<=0&&l>=0){if(s=ad(r,o,l,c,0,0),s===0)return 0;(s>0&&c>0&&l<=0||s<0&&c<=0&&l>0)&&i++}_=u,l=c,r=o}}return i%2!==0}function sd(a){if(!a)throw new Error("coord is required");if(!Array.isArray(a)){if(a.type==="Feature"&&a.geometry!==null&&a.geometry.type==="Point")return[...a.geometry.coordinates];if(a.type==="Point")return[...a.coordinates]}if(Array.isArray(a)&&a.length>=2&&!Array.isArray(a[0])&&!Array.isArray(a[1]))return[...a];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function la(a){return a.type==="Feature"?a.geometry:a}function pn(a,e,t={}){if(!a)throw new Error("point is required");if(!e)throw new Error("polygon is required");const n=sd(a),i=la(e),s=i.type,r=e.bbox;let l=i.coordinates;if(r&&rd(n,r)===!1)return!1;s==="Polygon"&&(l=[l]);let o=!1;for(var c=0;c<l.length;++c){const _=id(n,l[c]);if(_===0)return!t.ignoreBoundary;_&&(o=!0)}return o}function rd(a,e){return e[0]<=a[0]&&e[1]<=a[1]&&e[2]>=a[0]&&e[3]>=a[1]}class Lr{constructor(e=[],t=ld){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,i=t[e];for(;e>0;){const s=e-1>>1,r=t[s];if(n(i,r)>=0)break;t[e]=r,e=s}t[e]=i}_down(e){const{data:t,compare:n}=this,i=this.length>>1,s=t[e];for(;e<i;){let r=(e<<1)+1,l=t[r];const o=r+1;if(o<this.length&&n(t[o],l)<0&&(r=o,l=t[o]),n(l,s)>=0)break;t[e]=l,e=r}t[e]=s}}function ld(a,e){return a<e?-1:a>e?1:0}function Tr(a,e){return a.p.x>e.p.x?1:a.p.x<e.p.x?-1:a.p.y!==e.p.y?a.p.y>e.p.y?1:-1:1}function od(a,e){return a.rightSweepEvent.p.x>e.rightSweepEvent.p.x?1:a.rightSweepEvent.p.x<e.rightSweepEvent.p.x?-1:a.rightSweepEvent.p.y!==e.rightSweepEvent.p.y?a.rightSweepEvent.p.y<e.rightSweepEvent.p.y?1:-1:1}let Ts=class{constructor(e,t,n,i){this.p={x:e[0],y:e[1]},this.featureId=t,this.ringId=n,this.eventId=i,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(e){return this.p.x===e.p.x&&this.p.y===e.p.y}};function _d(a,e){if(a.type==="FeatureCollection"){const t=a.features;for(let n=0;n<t.length;n++)Ms(t[n],e)}else Ms(a,e)}let Vn=0,Hn=0,jn=0;function Ms(a,e){const t=a.type==="Feature"?a.geometry:a;let n=t.coordinates;(t.type==="Polygon"||t.type==="MultiLineString")&&(n=[n]),t.type==="LineString"&&(n=[[n]]);for(let i=0;i<n.length;i++)for(let s=0;s<n[i].length;s++){let r=n[i][s][0],l=null;Hn=Hn+1;for(let o=0;o<n[i][s].length-1;o++){l=n[i][s][o+1];const c=new Ts(r,Vn,Hn,jn),_=new Ts(l,Vn,Hn,jn+1);c.otherEvent=_,_.otherEvent=c,Tr(c,_)>0?(_.isLeftEndpoint=!0,c.isLeftEndpoint=!1):(c.isLeftEndpoint=!0,_.isLeftEndpoint=!1),e.push(c),e.push(_),r=l,jn=jn+1}}Vn=Vn+1}class cd{constructor(e){this.leftSweepEvent=e,this.rightSweepEvent=e.otherEvent}}function ud(a,e){if(a===null||e===null||a.leftSweepEvent.ringId===e.leftSweepEvent.ringId&&(a.rightSweepEvent.isSamePoint(e.leftSweepEvent)||a.rightSweepEvent.isSamePoint(e.leftSweepEvent)||a.rightSweepEvent.isSamePoint(e.rightSweepEvent)||a.leftSweepEvent.isSamePoint(e.leftSweepEvent)||a.leftSweepEvent.isSamePoint(e.rightSweepEvent)))return!1;const t=a.leftSweepEvent.p.x,n=a.leftSweepEvent.p.y,i=a.rightSweepEvent.p.x,s=a.rightSweepEvent.p.y,r=e.leftSweepEvent.p.x,l=e.leftSweepEvent.p.y,o=e.rightSweepEvent.p.x,c=e.rightSweepEvent.p.y,_=(c-l)*(i-t)-(o-r)*(s-n),u=(o-r)*(n-l)-(c-l)*(t-r),d=(i-t)*(n-l)-(s-n)*(t-r);if(_===0)return!1;const h=u/_,f=d/_;if(h>=0&&h<=1&&f>=0&&f<=1){const g=t+h*(i-t),m=n+h*(s-n);return[g,m]}return!1}function dd(a,e){e=e||!1;const t=[],n=new Lr([],od);for(;a.length;){const i=a.pop();if(i.isLeftEndpoint){const s=new cd(i);for(let r=0;r<n.data.length;r++){const l=n.data[r];if(e&&l.leftSweepEvent.featureId===i.featureId)continue;const o=ud(s,l);o!==!1&&t.push(o)}n.push(s)}else i.isLeftEndpoint===!1&&n.pop()}return t}function hd(a,e){const t=new Lr([],Tr);return _d(a,t),dd(t,e)}var fd=hd;function xi(a,e,t={}){const{removeDuplicates:n=!0,ignoreSelfIntersections:i=!0}=t;let s=[];a.type==="FeatureCollection"?s=s.concat(a.features):a.type==="Feature"?s.push(a):(a.type==="LineString"||a.type==="Polygon"||a.type==="MultiLineString"||a.type==="MultiPolygon")&&s.push(Je(a)),e.type==="FeatureCollection"?s=s.concat(e.features):e.type==="Feature"?s.push(e):(e.type==="LineString"||e.type==="Polygon"||e.type==="MultiLineString"||e.type==="MultiPolygon")&&s.push(Je(e));const r=fd(Xa(s),i);let l=[];if(n){const o={};r.forEach(c=>{const _=c.join(",");o[_]||(o[_]=!0,l.push(c))})}else l=r;return Xa(l.map(o=>Ku(o)))}function md(a,e){var t,n,i,s,r,l,o,c,_,u,d=0,h=a.type==="FeatureCollection",f=a.type==="Feature",g=h?a.features.length:1;for(t=0;t<g;t++){for(l=h?a.features[t].geometry:f?a.geometry:a,c=h?a.features[t].properties:f?a.properties:{},_=h?a.features[t].bbox:f?a.bbox:void 0,u=h?a.features[t].id:f?a.id:void 0,o=l?l.type==="GeometryCollection":!1,r=o?l.geometries.length:1,i=0;i<r;i++){if(s=o?l.geometries[i]:l,s===null){if(e(null,d,c,_,u)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,d,c,_,u)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<s.geometries.length;n++)if(e(s.geometries[n],d,c,_,u)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}d++}}function $n(a,e){md(a,function(t,n,i,s,r){var l=t===null?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return e(Je(t,i,{bbox:s,id:r}),n,0)===!1?!1:void 0}var o;switch(l){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon";break}for(var c=0;c<t.coordinates.length;c++){var _=t.coordinates[c],u={type:o,coordinates:_};if(e(Je(u,i),n,c)===!1)return!1}})}function Ya(a,e={}){const t=la(a);switch(!e.properties&&a.type==="Feature"&&(e.properties=a.properties),t.type){case"Polygon":return gd(t,e);case"MultiPolygon":return pd(t,e);default:throw new Error("invalid poly")}}function gd(a,e={}){const n=la(a).coordinates,i=e.properties?e.properties:a.type==="Feature"?a.properties:{};return Mr(n,i)}function pd(a,e={}){const n=la(a).coordinates,i=e.properties?e.properties:a.type==="Feature"?a.properties:{},s=[];return n.forEach(r=>{s.push(Mr(r,i))}),Xa(s)}function Mr(a,e){return a.length>1?Yu(a,e):Xu(a[0],e)}function yd(a,e,{ignoreSelfIntersections:t=!0}={ignoreSelfIntersections:!0}){let n=!0;return $n(a,i=>{$n(e,s=>{if(n===!1)return!1;n=bd(i.geometry,s.geometry,t)})}),n}function bd(a,e,t){switch(a.type){case"Point":switch(e.type){case"Point":return!Sd(a.coordinates,e.coordinates);case"LineString":return!Ds(e,a);case"Polygon":return!pn(a,e)}break;case"LineString":switch(e.type){case"Point":return!Ds(a,e);case"LineString":return!wd(a,e,t);case"Polygon":return!Os(e,a,t)}break;case"Polygon":switch(e.type){case"Point":return!pn(e,a);case"LineString":return!Os(a,e,t);case"Polygon":return!xd(e,a,t)}}return!1}function Ds(a,e){for(let t=0;t<a.coordinates.length-1;t++)if(Ed(a.coordinates[t],a.coordinates[t+1],e.coordinates))return!0;return!1}function wd(a,e,t){return xi(a,e,{ignoreSelfIntersections:t}).features.length>0}function Os(a,e,t){for(const i of e.coordinates)if(pn(i,a))return!0;return xi(e,Ya(a),{ignoreSelfIntersections:t}).features.length>0}function xd(a,e,t){for(const i of a.coordinates[0])if(pn(i,e))return!0;for(const i of e.coordinates[0])if(pn(i,a))return!0;return xi(Ya(a),Ya(e),{ignoreSelfIntersections:t}).features.length>0}function Ed(a,e,t){const n=t[0]-a[0],i=t[1]-a[1],s=e[0]-a[0],r=e[1]-a[1];return n*r-i*s!==0?!1:Math.abs(s)>=Math.abs(r)?s>0?a[0]<=t[0]&&t[0]<=e[0]:e[0]<=t[0]&&t[0]<=a[0]:r>0?a[1]<=t[1]&&t[1]<=e[1]:e[1]<=t[1]&&t[1]<=a[1]}function Sd(a,e){return a[0]===e[0]&&a[1]===e[1]}function Rd(a,e,{ignoreSelfIntersections:t=!0}={}){let n=!1;return $n(a,i=>{$n(e,s=>{if(n===!0)return!0;n=!yd(i.geometry,s.geometry,{ignoreSelfIntersections:t})})}),n}var Id=Rd;function Ad(a){let e=1779033703,t=3144134277,n=1013904242,i=2773480762;for(let s=0,r;s<a.length;s++)r=a.charCodeAt(s),e=t^Math.imul(e^r,597399067),t=n^Math.imul(t^r,2869860233),n=i^Math.imul(n^r,951274213),i=e^Math.imul(i^r,2716044179);return e=Math.imul(n^e>>>18,597399067),t=Math.imul(i^t>>>22,2869860233),n=Math.imul(e^n>>>17,951274213),i=Math.imul(t^i>>>19,2716044179),e^=t^n^i,t^=e,n^=e,i^=e,[e>>>0,t>>>0,n>>>0,i>>>0]}function vd(a){return()=>{a|=0,a=a+2654435769|0;let e=a^a>>>16;return e=Math.imul(e,569420461),e^=e>>>15,e=Math.imul(e,1935289751),e^=e>>>15,(e>>>0)/4294967296}}function Ps(a,e,t){let n;if(t===void 0)n=Math.random;else{const p=Ad(t);n=vd(p[0])}const i=e/1.18,[s,r,l,o]=a,c=o-i,_=l-e,u=c-r,d=_-s,h=r+n()*u,f=s+n()*d,g=h+i,m=f+e;return[f,h,m,g]}const Fs=a=>({grid:new wi({size:a.gameSize,origin:a.center})});function Cd(a,e=1,t=8,n={r:255,g:255,b:255,a:0},i={r:0,g:0,b:0,a:1}){let s;if(Number.isNaN(a))return"rgba(0, 0, 0, 0)";s=a,s=Math.max(e,Math.min(t,s));const r=(s-e)/(t-e),l=Math.round(i.r*r+n.r*(1-r)),o=Math.round(i.g*r+n.g*(1-r)),c=Math.round(i.b*r+n.b*(1-r)),_=i.a*r+n.a*(1-r);return`rgba(${l}, ${o}, ${c}, ${_})`}const Dr=(a,e,t,n,i)=>{let s;return a.isRevealed===!0?a.isMine?s=new Ee({stroke:new we({color:"#000",width:1}),fill:new ye({color:"red"}),text:new _t({text:"🌸",font:"16px Calibri,sans-serif",fill:new ye({color:"#fff"}),stroke:new we({color:"#000",width:3})})}):s=new Ee({stroke:new we({color:"#000",width:1}),fill:new ye({color:Cd(a.value,e,t,n,i)}),text:new _t({text:a.adjacentMines?a.adjacentMines.toString():"0",font:"16px Calibri,sans-serif",fill:new ye({color:"#000"}),stroke:new we({color:"#fff",width:3})})}):a.isFlagged?s=new Ee({stroke:new we({color:"#000",width:1}),fill:new ye({color:"blue"}),text:new _t({text:"⚑",font:"16px Calibri,sans-serif",fill:new ye({color:"#fff"}),stroke:new we({color:"#000",width:3})})}):s=new Ee({stroke:new we({color:"#000",width:.5}),fill:new ye({color:"#AAAAAA4D"}),text:new _t({text:"",font:"16px Calibri,sans-serif"})}),s},Ei=(a,e,t,n,i,s)=>{const[r,l]=s.convertGameCoordsToAxial(a+1,e),o=t.getHexagon([r,l]),c=new Hs(new js([o])),_=s.get(a,e),u=`tile-${a}-${e}`;c.setId(u);const d=n.getFeatureById(u);d&&n.removeFeature(d),c.setStyle(Dr(_,s.minValue,s.maxValue,s.minColor,s.maxColor)),n.addFeature(c),i.changed()},kd=(a,e,t,n)=>{t.clear();for(let i=0;i<a.height;i++)for(let s=0;s<a.width;s++)Ei(s,i,e,t,n,a);n.changed()},Ld=(a,e,t,n,i)=>{a.stopPropagation(),a.preventDefault();let s=!1;const{coordinate:r}=a,[l,o]=t.coord2hex(r),c=e.convertAxialToGameCoords(l,o),[_,u]=[c.x-1,c.y],d=e.revealTile(_,u);if(d){for(const[h,f]of d)s=s||e.get(h,f).isMine,i(h,f,t,n,e);if(s){document.dispatchEvent(new Event("minesweeper:gameover")),e.revealAllTiles();for(let h=0;h<(e.height??NaN);h++)for(let f=0;f<e.width;f++)i(f,h,t,n,e)}else document.dispatchEvent(new Event("minesweeper:continue"))}},Td=(a,e,t,n,i)=>{a.stopPropagation(),a.preventDefault();const{coordinate:s}=a,[r,l]=t.coord2hex(s),o=e.convertAxialToGameCoords(r,l),[c,_]=[o.x-1,o.y],u=e.get(c,_);u&&(u.isFlagged=!u.isFlagged,Ei(c,_,t,n,i,e)),document.dispatchEvent(new Event("minesweeper:continue"))},Md=(a,e,t)=>{if(a)for(let n=0;n<a.height;n++){let i=(n%2!==0)*1-n/2;n%2===0?i+=1:i+=.5;for(let s=0;s<a.width;s++){const r=a.board[n][s],l=e.getHexagon([s+i,n]),o=new Hs(new js([l])),c=Dr(r,a.minValue,a.maxValue,a.minColor,a.maxColor);o.setStyle(c),t.addFeature(o)}}},Ns=async(a,e)=>{const t=qu(a);return e.features.filter(i=>Id(t.geometry,i))};class Dd{constructor(e,t){this.vectorSource=new jo,this.vectorLayer=new mc({source:this.vectorSource,title:"Minesweep game board"}),this.map=e,this.options=t,this.game=new ju(t);const n=e.getLayers().getArray().find(i=>i.get("id")==="AnalysisGroup");n&&n.getLayers().push(this.vectorLayer),this.setupGame(),this.clickEventHandlers=[],this.contextmenuEventHandlers=[]}async setupGame(){await this.game.fromGeoTIFF(this.options);const e=Fs(this.game);this.grid=e.grid,this.drawGameBoard(),this.addEventListeners(),this.updateAllTiles()}get mineCount(){return this.game.board.reduce((e,t)=>[...e,...t],[]).reduce((e,t)=>t.isMine?e+1:e,0)}get flagCount(){return this.game.board.reduce((e,t)=>[...e,...t],[]).reduce((e,t)=>t.isFlagged?e+1:e,0)}get coveredMineCount(){return this.game.board.reduce((e,t)=>[...e,...t],[]).reduce((e,t)=>t.isMine&&!t.isRevealed&&!t.isFlagged?e+1:e,0)}get isGameCompleted(){return this.coveredMineCount===0}revealAllTiles(){this.game.revealAllTiles(),this.updateAllTiles(),document.dispatchEvent(new Event("minesweeper:win"))}setupGrid(){return Fs(this.game)}drawGameBoard(){return Md(this.game,this.grid,this.vectorSource)}addEventListeners(){const e=n=>Ld(n,this.game,this.grid,this.vectorSource,this.updateTile.bind(this));this.clickEventHandlers.push(e);const t=n=>Td(n,this.game,this.grid,this.vectorSource,this.vectorLayer);this.contextmenuEventHandlers.push(t),this.map.on("click",e),this.map.on("contextmenu",t)}removeEventListeners(){this.clickEventHandlers.forEach(e=>{this.map.un("click",e)}),this.contextmenuEventHandlers.forEach(e=>{this.map.un("contextmenu",e)})}updateTile(e,t){return Ei(e,t,this.grid,this.vectorSource,this.vectorLayer,this.game)}updateAllTiles(){return kd(this.game,this.grid,this.vectorSource,this.vectorLayer)}}const Od=JSON.parse(`[{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-51.657797,4.156232],[-51.823343,4.565768],[-52.882141,5.409851],[-53.618453,5.646529],[-53.958045,5.756548],[-54.478633,4.896756],[-54.399542,4.212611],[-54.006931,3.620038],[-54.181726,3.18978],[-54.269705,2.732392],[-54.524754,2.311849],[-54.088063,2.105557],[-53.778521,2.376703],[-53.554839,2.334897],[-53.418465,2.053389],[-52.939657,2.124858],[-52.556425,2.504705],[-52.249338,3.241094],[-51.657797,4.156232]]],[[[6.18632,49.463803],[5.897759,49.442667],[5.674052,49.529484],[4.799222,49.985373],[4.286023,49.907497],[3.588184,50.378992],[3.123252,50.780363],[2.658422,50.796848],[2.513573,51.148506],[1.639001,50.946606],[1.338761,50.127173],[-0.989469,49.347376],[-1.933494,49.776342],[-1.616511,48.644421],[-3.295814,48.901692],[-4.59235,48.68416],[-4.491555,47.954954],[-2.963276,47.570327],[-2.225724,47.064363],[-1.193798,46.014918],[-1.384225,44.02261],[-1.901351,43.422802],[-1.502771,43.034014],[0.338047,42.579546],[0.701591,42.795734],[1.826793,42.343385],[2.985999,42.473015],[3.100411,43.075201],[4.556963,43.399651],[6.529245,43.128892],[7.435185,43.693845],[7.549596,44.127901],[7.007562,44.254767],[6.749955,45.028518],[7.096652,45.333099],[6.802355,45.70858],[6.843593,45.991147],[6.5001,46.429673],[6.022609,46.27299],[6.037389,46.725779],[6.768714,47.287708],[6.736571,47.541801],[7.192202,47.449766],[7.466759,47.620582],[7.593676,48.333019],[8.099279,49.017784],[6.65823,49.201958],[6.18632,49.463803]]],[[[8.746009,42.628122],[8.544213,42.256517],[8.775723,41.583612],[9.229752,41.380007],[9.560016,42.152492],[9.390001,43.009985],[8.746009,42.628122]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"France","sov_a3":"FR1","adm0_dif":1,"level":2,"type":"Country","tlc":"1","admin":"France","adm0_a3":"FRA","geou_dif":0,"geounit":"France","gu_a3":"FRA","su_dif":0,"subunit":"France","su_a3":"FRA","brk_diff":0,"name":"France","name_long":"France","brk_a3":"FRA","brk_name":"France","brk_group":null,"abbrev":"Fr.","postal":"F","formal_en":"French Republic","formal_fr":null,"name_ciawf":"France","note_adm0":null,"note_brk":null,"name_sort":"France","name_alt":null,"mapcolor7":7,"mapcolor8":5,"mapcolor9":9,"mapcolor13":11,"pop_est":67059887,"pop_rank":16,"pop_year":2019,"gdp_md":2715518,"gdp_year":2019,"economy":"1. Developed region: G7","income_grp":"1. High income: OECD","fips_10":"FR","iso_a2":"-99","iso_a2_eh":"FR","iso_a3":"-99","iso_a3_eh":"FRA","iso_n3":"-99","iso_n3_eh":"250","un_a3":"250","wb_a2":"FR","wb_a3":"FRA","woe_id":-90,"woe_id_eh":23424819,"woe_note":"Includes only Metropolitan France (including Corsica)","adm0_iso":"FRA","adm0_diff":null,"adm0_tlc":"FRA","adm0_a3_us":"FRA","adm0_a3_fr":"FRA","adm0_a3_ru":"FRA","adm0_a3_es":"FRA","adm0_a3_cn":"FRA","adm0_a3_tw":"FRA","adm0_a3_in":"FRA","adm0_a3_np":"FRA","adm0_a3_pk":"FRA","adm0_a3_de":"FRA","adm0_a3_gb":"FRA","adm0_a3_br":"FRA","adm0_a3_il":"FRA","adm0_a3_ps":"FRA","adm0_a3_sa":"FRA","adm0_a3_eg":"FRA","adm0_a3_ma":"FRA","adm0_a3_pt":"FRA","adm0_a3_ar":"FRA","adm0_a3_jp":"FRA","adm0_a3_ko":"FRA","adm0_a3_vn":"FRA","adm0_a3_tr":"FRA","adm0_a3_id":"FRA","adm0_a3_pl":"FRA","adm0_a3_gr":"FRA","adm0_a3_it":"FRA","adm0_a3_nl":"FRA","adm0_a3_se":"FRA","adm0_a3_bd":"FRA","adm0_a3_ua":"FRA","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":3,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":1.7,"max_label":6.7,"label_x":2.552275,"label_y":46.696113,"ne_id":1159320637,"wikidataid":"Q142","name_ar":"فرنسا","name_bn":"ফ্রান্স","name_de":"Frankreich","name_en":"France","name_es":"Francia","name_fa":"فرانسه","name_fr":"France","name_el":"Γαλλία","name_he":"צרפת","name_hi":"फ़्रान्स","name_hu":"Franciaország","name_id":"Prancis","name_it":"Francia","name_ja":"フランス","name_ko":"프랑스","name_nl":"Frankrijk","name_pl":"Francja","name_pt":"França","name_ru":"Франция","name_sv":"Frankrike","name_tr":"Fransa","name_uk":"Франція","name_ur":"فرانس","name_vi":"Pháp","name_zh":"法国","name_zht":"法國","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"FRA.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.494331,55.615107],[25.533047,56.100297],[25.000934,56.164531],[24.860684,56.372528],[23.878264,56.273671],[22.201157,56.337802],[21.0558,56.031076],[21.268449,55.190482],[22.315724,55.015299],[22.757764,54.856574],[22.651052,54.582741],[22.731099,54.327537],[23.243987,54.220567],[23.484128,53.912498],[24.450684,53.905702],[25.536354,54.282423],[25.768433,54.846963],[26.588279,55.167176],[26.494331,55.615107]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Lithuania","sov_a3":"LTU","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Lithuania","adm0_a3":"LTU","geou_dif":0,"geounit":"Lithuania","gu_a3":"LTU","su_dif":0,"subunit":"Lithuania","su_a3":"LTU","brk_diff":0,"name":"Lithuania","name_long":"Lithuania","brk_a3":"LTU","brk_name":"Lithuania","brk_group":null,"abbrev":"Lith.","postal":"LT","formal_en":"Republic of Lithuania","formal_fr":null,"name_ciawf":"Lithuania","note_adm0":null,"note_brk":null,"name_sort":"Lithuania","name_alt":null,"mapcolor7":6,"mapcolor8":3,"mapcolor9":3,"mapcolor13":9,"pop_est":2786844,"pop_rank":12,"pop_year":2019,"gdp_md":54627,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"3. Upper middle income","fips_10":"LH","iso_a2":"LT","iso_a2_eh":"LT","iso_a3":"LTU","iso_a3_eh":"LTU","iso_n3":"440","iso_n3_eh":"440","un_a3":"440","wb_a2":"LT","wb_a3":"LTU","woe_id":23424875,"woe_id_eh":23424875,"woe_note":"Exact WOE match as country","adm0_iso":"LTU","adm0_diff":null,"adm0_tlc":"LTU","adm0_a3_us":"LTU","adm0_a3_fr":"LTU","adm0_a3_ru":"LTU","adm0_a3_es":"LTU","adm0_a3_cn":"LTU","adm0_a3_tw":"LTU","adm0_a3_in":"LTU","adm0_a3_np":"LTU","adm0_a3_pk":"LTU","adm0_a3_de":"LTU","adm0_a3_gb":"LTU","adm0_a3_br":"LTU","adm0_a3_il":"LTU","adm0_a3_ps":"LTU","adm0_a3_sa":"LTU","adm0_a3_eg":"LTU","adm0_a3_ma":"LTU","adm0_a3_pt":"LTU","adm0_a3_ar":"LTU","adm0_a3_jp":"LTU","adm0_a3_ko":"LTU","adm0_a3_vn":"LTU","adm0_a3_tr":"LTU","adm0_a3_id":"LTU","adm0_a3_pl":"LTU","adm0_a3_gr":"LTU","adm0_a3_it":"LTU","adm0_a3_nl":"LTU","adm0_a3_se":"LTU","adm0_a3_bd":"LTU","adm0_a3_ua":"LTU","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":9,"long_len":9,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":24.089932,"label_y":55.103703,"ne_id":1159321029,"wikidataid":"Q37","name_ar":"ليتوانيا","name_bn":"লিথুয়ানিয়া","name_de":"Litauen","name_en":"Lithuania","name_es":"Lituania","name_fa":"لیتوانی","name_fr":"Lituanie","name_el":"Λιθουανία","name_he":"ליטא","name_hi":"लिथुआनिया","name_hu":"Litvánia","name_id":"Lituania","name_it":"Lituania","name_ja":"リトアニア","name_ko":"리투아니아","name_nl":"Litouwen","name_pl":"Litwa","name_pt":"Lituânia","name_ru":"Литва","name_sv":"Litauen","name_tr":"Litvanya","name_uk":"Литва","name_ur":"لتھووینیا","name_vi":"Litva","name_zh":"立陶宛","name_zht":"立陶宛","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"LTU.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[15.016996,51.106674],[14.570718,51.002339],[14.307013,51.117268],[14.056228,50.926918],[13.338132,50.733234],[12.966837,50.484076],[12.240111,50.266338],[12.415191,49.969121],[12.521024,49.547415],[13.031329,49.307068],[13.595946,48.877172],[14.338898,48.555305],[14.901447,48.964402],[15.253416,49.039074],[16.029647,48.733899],[16.499283,48.785808],[16.960288,48.596982],[17.101985,48.816969],[17.545007,48.800019],[17.886485,48.903475],[17.913512,48.996493],[18.104973,49.043983],[18.170498,49.271515],[18.399994,49.315001],[18.554971,49.495015],[18.853144,49.49623],[18.392914,49.988629],[17.649445,50.049038],[17.554567,50.362146],[16.868769,50.473974],[16.719476,50.215747],[16.176253,50.422607],[16.238627,50.697733],[15.490972,50.78473],[15.016996,51.106674]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Czechia","sov_a3":"CZE","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Czechia","adm0_a3":"CZE","geou_dif":0,"geounit":"Czechia","gu_a3":"CZE","su_dif":0,"subunit":"Czechia","su_a3":"CZE","brk_diff":0,"name":"Czechia","name_long":"Czech Republic","brk_a3":"CZE","brk_name":"Czechia","brk_group":null,"abbrev":"Cz.","postal":"CZ","formal_en":"Czech Republic","formal_fr":"la République tchèque","name_ciawf":"Czechia","note_adm0":null,"note_brk":null,"name_sort":"Czechia","name_alt":"Česko","mapcolor7":1,"mapcolor8":1,"mapcolor9":2,"mapcolor13":6,"pop_est":10669709,"pop_rank":14,"pop_year":2019,"gdp_md":250680,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"EZ","iso_a2":"CZ","iso_a2_eh":"CZ","iso_a3":"CZE","iso_a3_eh":"CZE","iso_n3":"203","iso_n3_eh":"203","un_a3":"203","wb_a2":"CZ","wb_a3":"CZE","woe_id":23424810,"woe_id_eh":23424810,"woe_note":"Exact WOE match as country","adm0_iso":"CZE","adm0_diff":null,"adm0_tlc":"CZE","adm0_a3_us":"CZE","adm0_a3_fr":"CZE","adm0_a3_ru":"CZE","adm0_a3_es":"CZE","adm0_a3_cn":"CZE","adm0_a3_tw":"CZE","adm0_a3_in":"CZE","adm0_a3_np":"CZE","adm0_a3_pk":"CZE","adm0_a3_de":"CZE","adm0_a3_gb":"CZE","adm0_a3_br":"CZE","adm0_a3_il":"CZE","adm0_a3_ps":"CZE","adm0_a3_sa":"CZE","adm0_a3_eg":"CZE","adm0_a3_ma":"CZE","adm0_a3_pt":"CZE","adm0_a3_ar":"CZE","adm0_a3_jp":"CZE","adm0_a3_ko":"CZE","adm0_a3_vn":"CZE","adm0_a3_tr":"CZE","adm0_a3_id":"CZE","adm0_a3_pl":"CZE","adm0_a3_gr":"CZE","adm0_a3_it":"CZE","adm0_a3_nl":"CZE","adm0_a3_se":"CZE","adm0_a3_bd":"CZE","adm0_a3_ua":"CZE","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":14,"abbrev_len":3,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":15.377555,"label_y":49.882364,"ne_id":1159320535,"wikidataid":"Q213","name_ar":"التشيك","name_bn":"চেক প্রজাতন্ত্র","name_de":"Tschechien","name_en":"Czech Republic","name_es":"República Checa","name_fa":"جمهوری چک","name_fr":"Tchéquie","name_el":"Τσεχία","name_he":"צ'כיה","name_hi":"चेक गणराज्य","name_hu":"Csehország","name_id":"Republik Ceko","name_it":"Repubblica Ceca","name_ja":"チェコ","name_ko":"체코","name_nl":"Tsjechië","name_pl":"Czechy","name_pt":"Chéquia","name_ru":"Чехия","name_sv":"Tjeckien","name_tr":"Çek Cumhuriyeti","name_uk":"Чехія","name_ur":"چیک جمہوریہ","name_vi":"Cộng hòa Séc","name_zh":"捷克","name_zht":"捷克共和國","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"CZE.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[14.119686,53.757029],[13.647467,54.075511],[12.51844,54.470371],[11.956252,54.196486],[10.939467,54.008693],[10.950112,54.363607],[9.93958,54.596642],[9.921906,54.983104],[9.282049,54.830865],[8.526229,54.962744],[8.572118,54.395646],[8.800734,54.020786],[8.121706,53.527792],[7.936239,53.748296],[7.100425,53.693932],[6.90514,53.482162],[7.092053,53.144043],[6.84287,52.22844],[6.589397,51.852029],[5.988658,51.851616],[6.156658,50.803721],[6.043073,50.128052],[6.242751,49.902226],[6.18632,49.463803],[6.65823,49.201958],[8.099279,49.017784],[7.593676,48.333019],[7.466759,47.620582],[8.317301,47.61358],[8.522612,47.830828],[9.594226,47.525058],[9.896068,47.580197],[10.402084,47.302488],[10.544504,47.566399],[11.426414,47.523766],[12.141357,47.703083],[12.62076,47.672388],[12.932627,47.467646],[13.025851,47.637584],[12.884103,48.289146],[13.243357,48.416115],[13.595946,48.877172],[13.031329,49.307068],[12.521024,49.547415],[12.415191,49.969121],[12.240111,50.266338],[12.966837,50.484076],[13.338132,50.733234],[14.056228,50.926918],[14.307013,51.117268],[14.570718,51.002339],[15.016996,51.106674],[14.607098,51.745188],[14.685026,52.089947],[14.4376,52.62485],[14.074521,52.981263],[14.353315,53.248171],[14.119686,53.757029]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"Germany","sov_a3":"DEU","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Germany","adm0_a3":"DEU","geou_dif":0,"geounit":"Germany","gu_a3":"DEU","su_dif":0,"subunit":"Germany","su_a3":"DEU","brk_diff":0,"name":"Germany","name_long":"Germany","brk_a3":"DEU","brk_name":"Germany","brk_group":null,"abbrev":"Ger.","postal":"D","formal_en":"Federal Republic of Germany","formal_fr":null,"name_ciawf":"Germany","note_adm0":null,"note_brk":null,"name_sort":"Germany","name_alt":null,"mapcolor7":2,"mapcolor8":5,"mapcolor9":5,"mapcolor13":1,"pop_est":83132799,"pop_rank":16,"pop_year":2019,"gdp_md":3861123,"gdp_year":2019,"economy":"1. Developed region: G7","income_grp":"1. High income: OECD","fips_10":"GM","iso_a2":"DE","iso_a2_eh":"DE","iso_a3":"DEU","iso_a3_eh":"DEU","iso_n3":"276","iso_n3_eh":"276","un_a3":"276","wb_a2":"DE","wb_a3":"DEU","woe_id":23424829,"woe_id_eh":23424829,"woe_note":"Exact WOE match as country","adm0_iso":"DEU","adm0_diff":null,"adm0_tlc":"DEU","adm0_a3_us":"DEU","adm0_a3_fr":"DEU","adm0_a3_ru":"DEU","adm0_a3_es":"DEU","adm0_a3_cn":"DEU","adm0_a3_tw":"DEU","adm0_a3_in":"DEU","adm0_a3_np":"DEU","adm0_a3_pk":"DEU","adm0_a3_de":"DEU","adm0_a3_gb":"DEU","adm0_a3_br":"DEU","adm0_a3_il":"DEU","adm0_a3_ps":"DEU","adm0_a3_sa":"DEU","adm0_a3_eg":"DEU","adm0_a3_ma":"DEU","adm0_a3_pt":"DEU","adm0_a3_ar":"DEU","adm0_a3_jp":"DEU","adm0_a3_ko":"DEU","adm0_a3_vn":"DEU","adm0_a3_tr":"DEU","adm0_a3_id":"DEU","adm0_a3_pl":"DEU","adm0_a3_gr":"DEU","adm0_a3_it":"DEU","adm0_a3_nl":"DEU","adm0_a3_se":"DEU","adm0_a3_bd":"DEU","adm0_a3_ua":"DEU","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":1.7,"max_label":6.7,"label_x":9.678348,"label_y":50.961733,"ne_id":1159320539,"wikidataid":"Q183","name_ar":"ألمانيا","name_bn":"জার্মানি","name_de":"Deutschland","name_en":"Germany","name_es":"Alemania","name_fa":"آلمان","name_fr":"Allemagne","name_el":"Γερμανία","name_he":"גרמניה","name_hi":"जर्मनी","name_hu":"Németország","name_id":"Jerman","name_it":"Germania","name_ja":"ドイツ","name_ko":"독일","name_nl":"Duitsland","name_pl":"Niemcy","name_pt":"Alemanha","name_ru":"Германия","name_sv":"Tyskland","name_tr":"Almanya","name_uk":"Німеччина","name_ur":"جرمنی","name_vi":"Đức","name_zh":"德国","name_zht":"德國","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"DEU.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[27.981127,59.475373],[27.981114,59.475388],[26.949136,59.445803],[25.864189,59.61109],[24.604214,59.465854],[23.339795,59.18724],[23.42656,58.612753],[24.061198,58.257375],[24.428928,58.383413],[24.312863,57.793424],[25.164594,57.970157],[25.60281,57.847529],[26.463532,57.476389],[27.288185,57.474528],[27.716686,57.791899],[27.42015,58.72457],[28.131699,59.300825],[27.98112,59.47537],[27.981127,59.475373]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Estonia","sov_a3":"EST","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Estonia","adm0_a3":"EST","geou_dif":0,"geounit":"Estonia","gu_a3":"EST","su_dif":0,"subunit":"Estonia","su_a3":"EST","brk_diff":0,"name":"Estonia","name_long":"Estonia","brk_a3":"EST","brk_name":"Estonia","brk_group":null,"abbrev":"Est.","postal":"EST","formal_en":"Republic of Estonia","formal_fr":null,"name_ciawf":"Estonia","note_adm0":null,"note_brk":null,"name_sort":"Estonia","name_alt":null,"mapcolor7":3,"mapcolor8":2,"mapcolor9":1,"mapcolor13":10,"pop_est":1326590,"pop_rank":12,"pop_year":2019,"gdp_md":31471,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"EN","iso_a2":"EE","iso_a2_eh":"EE","iso_a3":"EST","iso_a3_eh":"EST","iso_n3":"233","iso_n3_eh":"233","un_a3":"233","wb_a2":"EE","wb_a3":"EST","woe_id":23424805,"woe_id_eh":23424805,"woe_note":"Exact WOE match as country","adm0_iso":"EST","adm0_diff":null,"adm0_tlc":"EST","adm0_a3_us":"EST","adm0_a3_fr":"EST","adm0_a3_ru":"EST","adm0_a3_es":"EST","adm0_a3_cn":"EST","adm0_a3_tw":"EST","adm0_a3_in":"EST","adm0_a3_np":"EST","adm0_a3_pk":"EST","adm0_a3_de":"EST","adm0_a3_gb":"EST","adm0_a3_br":"EST","adm0_a3_il":"EST","adm0_a3_ps":"EST","adm0_a3_sa":"EST","adm0_a3_eg":"EST","adm0_a3_ma":"EST","adm0_a3_pt":"EST","adm0_a3_ar":"EST","adm0_a3_jp":"EST","adm0_a3_ko":"EST","adm0_a3_vn":"EST","adm0_a3_tr":"EST","adm0_a3_id":"EST","adm0_a3_pl":"EST","adm0_a3_gr":"EST","adm0_a3_it":"EST","adm0_a3_nl":"EST","adm0_a3_se":"EST","adm0_a3_bd":"EST","adm0_a3_ua":"EST","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":25.867126,"label_y":58.724865,"ne_id":1159320615,"wikidataid":"Q191","name_ar":"إستونيا","name_bn":"এস্তোনিয়া","name_de":"Estland","name_en":"Estonia","name_es":"Estonia","name_fa":"استونی","name_fr":"Estonie","name_el":"Εσθονία","name_he":"אסטוניה","name_hi":"एस्टोनिया","name_hu":"Észtország","name_id":"Estonia","name_it":"Estonia","name_ja":"エストニア","name_ko":"에스토니아","name_nl":"Estland","name_pl":"Estonia","name_pt":"Estónia","name_ru":"Эстония","name_sv":"Estland","name_tr":"Estonya","name_uk":"Естонія","name_ur":"استونیا","name_vi":"Estonia","name_zh":"爱沙尼亚","name_zht":"愛沙尼亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"EST.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[27.288185,57.474528],[26.463532,57.476389],[25.60281,57.847529],[25.164594,57.970157],[24.312863,57.793424],[24.12073,57.025693],[23.318453,57.006236],[22.524341,57.753374],[21.581866,57.411871],[21.090424,56.783873],[21.0558,56.031076],[22.201157,56.337802],[23.878264,56.273671],[24.860684,56.372528],[25.000934,56.164531],[25.533047,56.100297],[26.494331,55.615107],[27.10246,55.783314],[28.176709,56.16913],[27.855282,56.759326],[27.770016,57.244258],[27.288185,57.474528]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Latvia","sov_a3":"LVA","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Latvia","adm0_a3":"LVA","geou_dif":0,"geounit":"Latvia","gu_a3":"LVA","su_dif":0,"subunit":"Latvia","su_a3":"LVA","brk_diff":0,"name":"Latvia","name_long":"Latvia","brk_a3":"LVA","brk_name":"Latvia","brk_group":null,"abbrev":"Lat.","postal":"LV","formal_en":"Republic of Latvia","formal_fr":null,"name_ciawf":"Latvia","note_adm0":null,"note_brk":null,"name_sort":"Latvia","name_alt":null,"mapcolor7":4,"mapcolor8":7,"mapcolor9":6,"mapcolor13":13,"pop_est":1912789,"pop_rank":12,"pop_year":2019,"gdp_md":34102,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"3. Upper middle income","fips_10":"LG","iso_a2":"LV","iso_a2_eh":"LV","iso_a3":"LVA","iso_a3_eh":"LVA","iso_n3":"428","iso_n3_eh":"428","un_a3":"428","wb_a2":"LV","wb_a3":"LVA","woe_id":23424874,"woe_id_eh":23424874,"woe_note":"Exact WOE match as country","adm0_iso":"LVA","adm0_diff":null,"adm0_tlc":"LVA","adm0_a3_us":"LVA","adm0_a3_fr":"LVA","adm0_a3_ru":"LVA","adm0_a3_es":"LVA","adm0_a3_cn":"LVA","adm0_a3_tw":"LVA","adm0_a3_in":"LVA","adm0_a3_np":"LVA","adm0_a3_pk":"LVA","adm0_a3_de":"LVA","adm0_a3_gb":"LVA","adm0_a3_br":"LVA","adm0_a3_il":"LVA","adm0_a3_ps":"LVA","adm0_a3_sa":"LVA","adm0_a3_eg":"LVA","adm0_a3_ma":"LVA","adm0_a3_pt":"LVA","adm0_a3_ar":"LVA","adm0_a3_jp":"LVA","adm0_a3_ko":"LVA","adm0_a3_vn":"LVA","adm0_a3_tr":"LVA","adm0_a3_id":"LVA","adm0_a3_pl":"LVA","adm0_a3_gr":"LVA","adm0_a3_it":"LVA","adm0_a3_nl":"LVA","adm0_a3_se":"LVA","adm0_a3_bd":"LVA","adm0_a3_ua":"LVA","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":25.458723,"label_y":57.066872,"ne_id":1159321033,"wikidataid":"Q211","name_ar":"لاتفيا","name_bn":"লাতভিয়া","name_de":"Lettland","name_en":"Latvia","name_es":"Letonia","name_fa":"لتونی","name_fr":"Lettonie","name_el":"Λετονία","name_he":"לטביה","name_hi":"लातविया","name_hu":"Lettország","name_id":"Latvia","name_it":"Lettonia","name_ja":"ラトビア","name_ko":"라트비아","name_nl":"Letland","name_pl":"Łotwa","name_pt":"Letónia","name_ru":"Латвия","name_sv":"Lettland","name_tr":"Letonya","name_uk":"Латвія","name_ur":"لٹویا","name_vi":"Latvia","name_zh":"拉脱维亚","name_zht":"拉脫維亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"LVA.geojson"}},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[15.14282,79.67431],[13.71852,79.66039],[13.17077,80.01046],[10.44453,79.65239],[11.22231,78.8693],[13.1706,78.02493],[14.66956,77.73565],[13.76259,77.38035],[15.91315,76.77045],[17.1182,76.80941],[17.59441,77.63796],[18.47172,77.82669],[19.02737,78.5626],[21.54383,78.95611],[18.25183,79.70175],[16.99085,80.05086],[15.52255,80.01608],[15.14282,79.67431]]],[[[31.101042,69.558101],[30.005435,70.186259],[31.293418,70.453788],[28.165547,71.185474],[26.37005,70.986262],[24.546543,71.030497],[23.023742,70.202072],[21.378416,70.255169],[19.184028,69.817444],[16.435927,68.563205],[14.761146,67.810642],[12.358347,65.879726],[10.527709,64.486038],[8.553411,63.454008],[5.9129,62.614473],[4.992078,61.970998],[5.308234,59.663232],[5.665835,58.588155],[7.048748,58.078884],[8.382,58.313288],[10.356557,59.469807],[11.027369,58.856149],[11.468272,59.432393],[12.300366,60.117933],[12.631147,61.293572],[11.992064,61.800362],[11.930569,63.128318],[12.579935,64.066219],[13.571916,64.049114],[13.919905,64.445421],[13.55569,64.787028],[15.108411,66.193867],[16.108712,67.302456],[16.768879,68.013937],[17.729182,68.010552],[17.993868,68.567391],[19.87856,68.407194],[20.025269,69.065139],[20.645593,69.106247],[21.244936,69.370443],[22.356238,68.841741],[23.66205,68.891247],[24.735679,68.649557],[25.689213,69.092114],[26.179622,69.825299],[27.732292,70.164193],[29.015573,69.766491],[28.59193,69.064777],[29.39955,69.15692],[31.101042,69.558101]]],[[[27.407506,80.056406],[25.447625,80.40734],[22.919253,80.657144],[21.907945,80.357679],[20.455992,80.598156],[17.368015,80.318896],[18.462264,79.85988],[19.897266,79.842362],[20.075188,79.566823],[23.024466,79.400012],[25.924651,79.517834],[27.407506,80.056406]]],[[[24.72412,77.85385],[23.28134,78.07954],[22.88426,78.45494],[20.8119,78.25463],[21.41611,77.93504],[20.72601,77.67704],[22.49032,77.44493],[24.72412,77.85385]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Norway","sov_a3":"NOR","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":null,"admin":"Norway","adm0_a3":"NOR","geou_dif":0,"geounit":"Norway","gu_a3":"NOR","su_dif":0,"subunit":"Norway","su_a3":"NOR","brk_diff":0,"name":"Norway","name_long":"Norway","brk_a3":"NOR","brk_name":"Norway","brk_group":null,"abbrev":"Nor.","postal":"N","formal_en":"Kingdom of Norway","formal_fr":null,"name_ciawf":"Norway","note_adm0":null,"note_brk":null,"name_sort":"Norway","name_alt":null,"mapcolor7":5,"mapcolor8":3,"mapcolor9":8,"mapcolor13":12,"pop_est":5347896,"pop_rank":13,"pop_year":2019,"gdp_md":403336,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"-99","iso_a2":"-99","iso_a2_eh":"NO","iso_a3":"-99","iso_a3_eh":"NOR","iso_n3":"-99","iso_n3_eh":"578","un_a3":"-99","wb_a2":"-99","wb_a3":"-99","woe_id":-90,"woe_id_eh":23424910,"woe_note":"Does not include Svalbard, Jan Mayen, or Bouvet Islands (28289410).","adm0_iso":"NOR","adm0_diff":null,"adm0_tlc":"NOR","adm0_a3_us":"NOR","adm0_a3_fr":"NOR","adm0_a3_ru":"NOR","adm0_a3_es":"NOR","adm0_a3_cn":"NOR","adm0_a3_tw":"NOR","adm0_a3_in":"NOR","adm0_a3_np":"NOR","adm0_a3_pk":"NOR","adm0_a3_de":"NOR","adm0_a3_gb":"NOR","adm0_a3_br":"NOR","adm0_a3_il":"NOR","adm0_a3_ps":"NOR","adm0_a3_sa":"NOR","adm0_a3_eg":"NOR","adm0_a3_ma":"NOR","adm0_a3_pt":"NOR","adm0_a3_ar":"NOR","adm0_a3_jp":"NOR","adm0_a3_ko":"NOR","adm0_a3_vn":"NOR","adm0_a3_tr":"NOR","adm0_a3_id":"NOR","adm0_a3_pl":"NOR","adm0_a3_gr":"NOR","adm0_a3_it":"NOR","adm0_a3_nl":"NOR","adm0_a3_se":"NOR","adm0_a3_bd":"NOR","adm0_a3_ua":"NOR","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":7,"label_x":9.679975,"label_y":61.357092,"ne_id":1159321109,"wikidataid":"Q20","name_ar":"النرويج","name_bn":"নরওয়ে","name_de":"Norwegen","name_en":"Norway","name_es":"Noruega","name_fa":"نروژ","name_fr":"Norvège","name_el":"Νορβηγία","name_he":"נורווגיה","name_hi":"नॉर्वे","name_hu":"Norvégia","name_id":"Norwegia","name_it":"Norvegia","name_ja":"ノルウェー","name_ko":"노르웨이","name_nl":"Noorwegen","name_pl":"Norwegia","name_pt":"Noruega","name_ru":"Норвегия","name_sv":"Norge","name_tr":"Norveç","name_uk":"Норвегія","name_ur":"ناروے","name_vi":"Na Uy","name_zh":"挪威","name_zht":"挪威","fclass_iso":"Unrecognized","tlc_diff":null,"fclass_tlc":"Unrecognized","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"NOR.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[11.027369,58.856149],[11.787942,57.441817],[12.625101,56.30708],[12.942911,55.361737],[14.100721,55.407781],[14.666681,56.200885],[15.879786,56.104302],[16.44771,57.041118],[16.829185,58.719827],[17.869225,58.953766],[18.787722,60.081914],[17.831346,60.636583],[17.119555,61.341166],[17.847779,62.7494],[19.778876,63.609554],[21.369631,64.413588],[21.213517,65.026005],[22.183173,65.723741],[23.903379,66.006927],[23.56588,66.396051],[23.539473,67.936009],[21.978535,68.616846],[20.645593,69.106247],[20.025269,69.065139],[19.87856,68.407194],[17.993868,68.567391],[17.729182,68.010552],[16.768879,68.013937],[16.108712,67.302456],[15.108411,66.193867],[13.55569,64.787028],[13.919905,64.445421],[13.571916,64.049114],[12.579935,64.066219],[11.930569,63.128318],[11.992064,61.800362],[12.631147,61.293572],[12.300366,60.117933],[11.468272,59.432393],[11.027369,58.856149]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Sweden","sov_a3":"SWE","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Sweden","adm0_a3":"SWE","geou_dif":0,"geounit":"Sweden","gu_a3":"SWE","su_dif":0,"subunit":"Sweden","su_a3":"SWE","brk_diff":0,"name":"Sweden","name_long":"Sweden","brk_a3":"SWE","brk_name":"Sweden","brk_group":null,"abbrev":"Swe.","postal":"S","formal_en":"Kingdom of Sweden","formal_fr":null,"name_ciawf":"Sweden","note_adm0":null,"note_brk":null,"name_sort":"Sweden","name_alt":null,"mapcolor7":1,"mapcolor8":4,"mapcolor9":2,"mapcolor13":4,"pop_est":10285453,"pop_rank":14,"pop_year":2019,"gdp_md":530883,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"SW","iso_a2":"SE","iso_a2_eh":"SE","iso_a3":"SWE","iso_a3_eh":"SWE","iso_n3":"752","iso_n3_eh":"752","un_a3":"752","wb_a2":"SE","wb_a3":"SWE","woe_id":23424954,"woe_id_eh":23424954,"woe_note":"Exact WOE match as country","adm0_iso":"SWE","adm0_diff":null,"adm0_tlc":"SWE","adm0_a3_us":"SWE","adm0_a3_fr":"SWE","adm0_a3_ru":"SWE","adm0_a3_es":"SWE","adm0_a3_cn":"SWE","adm0_a3_tw":"SWE","adm0_a3_in":"SWE","adm0_a3_np":"SWE","adm0_a3_pk":"SWE","adm0_a3_de":"SWE","adm0_a3_gb":"SWE","adm0_a3_br":"SWE","adm0_a3_il":"SWE","adm0_a3_ps":"SWE","adm0_a3_sa":"SWE","adm0_a3_eg":"SWE","adm0_a3_ma":"SWE","adm0_a3_pt":"SWE","adm0_a3_ar":"SWE","adm0_a3_jp":"SWE","adm0_a3_ko":"SWE","adm0_a3_vn":"SWE","adm0_a3_tr":"SWE","adm0_a3_id":"SWE","adm0_a3_pl":"SWE","adm0_a3_gr":"SWE","adm0_a3_it":"SWE","adm0_a3_nl":"SWE","adm0_a3_se":"SWE","adm0_a3_bd":"SWE","adm0_a3_ua":"SWE","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2,"max_label":7,"label_x":19.01705,"label_y":65.85918,"ne_id":1159321287,"wikidataid":"Q34","name_ar":"السويد","name_bn":"সুইডেন","name_de":"Schweden","name_en":"Sweden","name_es":"Suecia","name_fa":"سوئد","name_fr":"Suède","name_el":"Σουηδία","name_he":"שוודיה","name_hi":"स्वीडन","name_hu":"Svédország","name_id":"Swedia","name_it":"Svezia","name_ja":"スウェーデン","name_ko":"스웨덴","name_nl":"Zweden","name_pl":"Szwecja","name_pt":"Suécia","name_ru":"Швеция","name_sv":"Sverige","name_tr":"İsveç","name_uk":"Швеція","name_ur":"سویڈن","name_vi":"Thụy Điển","name_zh":"瑞典","name_zht":"瑞典","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"SWE.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[28.59193,69.064777],[29.015573,69.766491],[27.732292,70.164193],[26.179622,69.825299],[25.689213,69.092114],[24.735679,68.649557],[23.66205,68.891247],[22.356238,68.841741],[21.244936,69.370443],[20.645593,69.106247],[21.978535,68.616846],[23.539473,67.936009],[23.56588,66.396051],[23.903379,66.006927],[25.294043,65.534346],[25.398068,65.111427],[24.730512,64.902344],[22.442744,63.81781],[21.536029,63.189735],[21.059211,62.607393],[21.544866,61.705329],[21.322244,60.72017],[22.290764,60.391921],[22.869695,59.846373],[24.496624,60.057316],[26.255173,60.423961],[28.069998,60.503517],[28.070002,60.503519],[28.07,60.50352],[30.211107,61.780028],[31.139991,62.357693],[31.516092,62.867687],[30.035872,63.552814],[30.444685,64.204453],[29.54443,64.948672],[30.21765,65.80598],[29.054589,66.944286],[29.977426,67.698297],[28.445944,68.364613],[28.59193,69.064777]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Finland","sov_a3":"FI1","adm0_dif":1,"level":2,"type":"Country","tlc":"1","admin":"Finland","adm0_a3":"FIN","geou_dif":0,"geounit":"Finland","gu_a3":"FIN","su_dif":0,"subunit":"Finland","su_a3":"FIN","brk_diff":0,"name":"Finland","name_long":"Finland","brk_a3":"FIN","brk_name":"Finland","brk_group":null,"abbrev":"Fin.","postal":"FIN","formal_en":"Republic of Finland","formal_fr":null,"name_ciawf":"Finland","note_adm0":null,"note_brk":null,"name_sort":"Finland","name_alt":null,"mapcolor7":4,"mapcolor8":1,"mapcolor9":4,"mapcolor13":6,"pop_est":5520314,"pop_rank":13,"pop_year":2019,"gdp_md":269296,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"FI","iso_a2":"FI","iso_a2_eh":"FI","iso_a3":"FIN","iso_a3_eh":"FIN","iso_n3":"246","iso_n3_eh":"246","un_a3":"246","wb_a2":"FI","wb_a3":"FIN","woe_id":23424812,"woe_id_eh":23424812,"woe_note":"Exact WOE match as country","adm0_iso":"FIN","adm0_diff":null,"adm0_tlc":"FIN","adm0_a3_us":"FIN","adm0_a3_fr":"FIN","adm0_a3_ru":"FIN","adm0_a3_es":"FIN","adm0_a3_cn":"FIN","adm0_a3_tw":"FIN","adm0_a3_in":"FIN","adm0_a3_np":"FIN","adm0_a3_pk":"FIN","adm0_a3_de":"FIN","adm0_a3_gb":"FIN","adm0_a3_br":"FIN","adm0_a3_il":"FIN","adm0_a3_ps":"FIN","adm0_a3_sa":"FIN","adm0_a3_eg":"FIN","adm0_a3_ma":"FIN","adm0_a3_pt":"FIN","adm0_a3_ar":"FIN","adm0_a3_jp":"FIN","adm0_a3_ko":"FIN","adm0_a3_vn":"FIN","adm0_a3_tr":"FIN","adm0_a3_id":"FIN","adm0_a3_pl":"FIN","adm0_a3_gr":"FIN","adm0_a3_it":"FIN","adm0_a3_nl":"FIN","adm0_a3_se":"FIN","adm0_a3_bd":"FIN","adm0_a3_ua":"FIN","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":27.276449,"label_y":63.252361,"ne_id":1159320623,"wikidataid":"Q33","name_ar":"فنلندا","name_bn":"ফিনল্যান্ড","name_de":"Finnland","name_en":"Finland","name_es":"Finlandia","name_fa":"فنلاند","name_fr":"Finlande","name_el":"Φινλανδία","name_he":"פינלנד","name_hi":"फ़िनलैण्ड","name_hu":"Finnország","name_id":"Finlandia","name_it":"Finlandia","name_ja":"フィンランド","name_ko":"핀란드","name_nl":"Finland","name_pl":"Finlandia","name_pt":"Finlândia","name_ru":"Финляндия","name_sv":"Finland","name_tr":"Finlandiya","name_uk":"Фінляндія","name_ur":"فن لینڈ","name_vi":"Phần Lan","name_zh":"芬兰","name_zht":"芬蘭","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"FIN.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[6.043073,50.128052],[5.782417,50.090328],[5.674052,49.529484],[5.897759,49.442667],[6.18632,49.463803],[6.242751,49.902226],[6.043073,50.128052]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Luxembourg","sov_a3":"LUX","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Luxembourg","adm0_a3":"LUX","geou_dif":0,"geounit":"Luxembourg","gu_a3":"LUX","su_dif":0,"subunit":"Luxembourg","su_a3":"LUX","brk_diff":0,"name":"Luxembourg","name_long":"Luxembourg","brk_a3":"LUX","brk_name":"Luxembourg","brk_group":null,"abbrev":"Lux.","postal":"L","formal_en":"Grand Duchy of Luxembourg","formal_fr":null,"name_ciawf":"Luxembourg","note_adm0":null,"note_brk":null,"name_sort":"Luxembourg","name_alt":null,"mapcolor7":1,"mapcolor8":7,"mapcolor9":3,"mapcolor13":7,"pop_est":619896,"pop_rank":11,"pop_year":2019,"gdp_md":71104,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"LU","iso_a2":"LU","iso_a2_eh":"LU","iso_a3":"LUX","iso_a3_eh":"LUX","iso_n3":"442","iso_n3_eh":"442","un_a3":"442","wb_a2":"LU","wb_a3":"LUX","woe_id":23424881,"woe_id_eh":23424881,"woe_note":"Exact WOE match as country","adm0_iso":"LUX","adm0_diff":null,"adm0_tlc":"LUX","adm0_a3_us":"LUX","adm0_a3_fr":"LUX","adm0_a3_ru":"LUX","adm0_a3_es":"LUX","adm0_a3_cn":"LUX","adm0_a3_tw":"LUX","adm0_a3_in":"LUX","adm0_a3_np":"LUX","adm0_a3_pk":"LUX","adm0_a3_de":"LUX","adm0_a3_gb":"LUX","adm0_a3_br":"LUX","adm0_a3_il":"LUX","adm0_a3_ps":"LUX","adm0_a3_sa":"LUX","adm0_a3_eg":"LUX","adm0_a3_ma":"LUX","adm0_a3_pt":"LUX","adm0_a3_ar":"LUX","adm0_a3_jp":"LUX","adm0_a3_ko":"LUX","adm0_a3_vn":"LUX","adm0_a3_tr":"LUX","adm0_a3_id":"LUX","adm0_a3_pl":"LUX","adm0_a3_gr":"LUX","adm0_a3_it":"LUX","adm0_a3_nl":"LUX","adm0_a3_se":"LUX","adm0_a3_bd":"LUX","adm0_a3_ua":"LUX","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":10,"long_len":10,"abbrev_len":4,"tiny":5,"homepart":1,"min_zoom":0,"min_label":5.7,"max_label":10,"label_x":6.07762,"label_y":49.733732,"ne_id":1159321031,"wikidataid":"Q32","name_ar":"لوكسمبورغ","name_bn":"লুক্সেমবুর্গ","name_de":"Luxemburg","name_en":"Luxembourg","name_es":"Luxemburgo","name_fa":"لوکزامبورگ","name_fr":"Luxembourg","name_el":"Λουξεμβούργο","name_he":"לוקסמבורג","name_hi":"लक्ज़मबर्ग","name_hu":"Luxemburg","name_id":"Luksemburg","name_it":"Lussemburgo","name_ja":"ルクセンブルク","name_ko":"룩셈부르크","name_nl":"Luxemburg","name_pl":"Luksemburg","name_pt":"Luxemburgo","name_ru":"Люксембург","name_sv":"Luxemburg","name_tr":"Lüksemburg","name_uk":"Люксембург","name_ur":"لکسمبرگ","name_vi":"Luxembourg","name_zh":"卢森堡","name_zht":"盧森堡","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"LUX.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[6.156658,50.803721],[5.606976,51.037298],[4.973991,51.475024],[4.047071,51.267259],[3.314971,51.345755],[3.315011,51.345777],[3.314971,51.345781],[2.513573,51.148506],[2.658422,50.796848],[3.123252,50.780363],[3.588184,50.378992],[4.286023,49.907497],[4.799222,49.985373],[5.674052,49.529484],[5.782417,50.090328],[6.043073,50.128052],[6.156658,50.803721]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"Belgium","sov_a3":"BEL","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Belgium","adm0_a3":"BEL","geou_dif":0,"geounit":"Belgium","gu_a3":"BEL","su_dif":0,"subunit":"Belgium","su_a3":"BEL","brk_diff":0,"name":"Belgium","name_long":"Belgium","brk_a3":"BEL","brk_name":"Belgium","brk_group":null,"abbrev":"Belg.","postal":"B","formal_en":"Kingdom of Belgium","formal_fr":null,"name_ciawf":"Belgium","note_adm0":null,"note_brk":null,"name_sort":"Belgium","name_alt":null,"mapcolor7":3,"mapcolor8":2,"mapcolor9":1,"mapcolor13":8,"pop_est":11484055,"pop_rank":14,"pop_year":2019,"gdp_md":533097,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"BE","iso_a2":"BE","iso_a2_eh":"BE","iso_a3":"BEL","iso_a3_eh":"BEL","iso_n3":"056","iso_n3_eh":"056","un_a3":"056","wb_a2":"BE","wb_a3":"BEL","woe_id":23424757,"woe_id_eh":23424757,"woe_note":"Exact WOE match as country","adm0_iso":"BEL","adm0_diff":null,"adm0_tlc":"BEL","adm0_a3_us":"BEL","adm0_a3_fr":"BEL","adm0_a3_ru":"BEL","adm0_a3_es":"BEL","adm0_a3_cn":"BEL","adm0_a3_tw":"BEL","adm0_a3_in":"BEL","adm0_a3_np":"BEL","adm0_a3_pk":"BEL","adm0_a3_de":"BEL","adm0_a3_gb":"BEL","adm0_a3_br":"BEL","adm0_a3_il":"BEL","adm0_a3_ps":"BEL","adm0_a3_sa":"BEL","adm0_a3_eg":"BEL","adm0_a3_ma":"BEL","adm0_a3_pt":"BEL","adm0_a3_ar":"BEL","adm0_a3_jp":"BEL","adm0_a3_ko":"BEL","adm0_a3_vn":"BEL","adm0_a3_tr":"BEL","adm0_a3_id":"BEL","adm0_a3_pl":"BEL","adm0_a3_gr":"BEL","adm0_a3_it":"BEL","adm0_a3_nl":"BEL","adm0_a3_se":"BEL","adm0_a3_bd":"BEL","adm0_a3_ua":"BEL","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":4.800448,"label_y":50.785392,"ne_id":1159320389,"wikidataid":"Q31","name_ar":"بلجيكا","name_bn":"বেলজিয়াম","name_de":"Belgien","name_en":"Belgium","name_es":"Bélgica","name_fa":"بلژیک","name_fr":"Belgique","name_el":"Βέλγιο","name_he":"בלגיה","name_hi":"बेल्जियम","name_hu":"Belgium","name_id":"Belgia","name_it":"Belgio","name_ja":"ベルギー","name_ko":"벨기에","name_nl":"België","name_pl":"Belgia","name_pt":"Bélgica","name_ru":"Бельгия","name_sv":"Belgien","name_tr":"Belçika","name_uk":"Бельгія","name_ur":"بلجئیم","name_vi":"Bỉ","name_zh":"比利时","name_zht":"比利時","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"BEL.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[21.02004,40.842727],[20.605182,41.086226],[20.463175,41.515089],[20.590247,41.855404],[20.590247,41.855409],[20.52295,42.21787],[20.283755,42.32026],[20.0707,42.58863],[19.801613,42.500093],[19.738051,42.688247],[19.304486,42.195745],[19.371768,41.877551],[19.371769,41.877548],[19.540027,41.719986],[19.40355,41.409566],[19.319059,40.72723],[19.406082,40.250773],[19.960002,39.915006],[19.98,39.694993],[20.150016,39.624998],[20.615,40.110007],[20.674997,40.435],[20.99999,40.580004],[21.02004,40.842727]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Albania","sov_a3":"ALB","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Albania","adm0_a3":"ALB","geou_dif":0,"geounit":"Albania","gu_a3":"ALB","su_dif":0,"subunit":"Albania","su_a3":"ALB","brk_diff":0,"name":"Albania","name_long":"Albania","brk_a3":"ALB","brk_name":"Albania","brk_group":null,"abbrev":"Alb.","postal":"AL","formal_en":"Republic of Albania","formal_fr":null,"name_ciawf":"Albania","note_adm0":null,"note_brk":null,"name_sort":"Albania","name_alt":null,"mapcolor7":1,"mapcolor8":4,"mapcolor9":1,"mapcolor13":6,"pop_est":2854191,"pop_rank":12,"pop_year":2019,"gdp_md":15279,"gdp_year":2019,"economy":"6. Developing region","income_grp":"4. Lower middle income","fips_10":"AL","iso_a2":"AL","iso_a2_eh":"AL","iso_a3":"ALB","iso_a3_eh":"ALB","iso_n3":"008","iso_n3_eh":"008","un_a3":"008","wb_a2":"AL","wb_a3":"ALB","woe_id":23424742,"woe_id_eh":23424742,"woe_note":"Exact WOE match as country","adm0_iso":"ALB","adm0_diff":null,"adm0_tlc":"ALB","adm0_a3_us":"ALB","adm0_a3_fr":"ALB","adm0_a3_ru":"ALB","adm0_a3_es":"ALB","adm0_a3_cn":"ALB","adm0_a3_tw":"ALB","adm0_a3_in":"ALB","adm0_a3_np":"ALB","adm0_a3_pk":"ALB","adm0_a3_de":"ALB","adm0_a3_gb":"ALB","adm0_a3_br":"ALB","adm0_a3_il":"ALB","adm0_a3_ps":"ALB","adm0_a3_sa":"ALB","adm0_a3_eg":"ALB","adm0_a3_ma":"ALB","adm0_a3_pt":"ALB","adm0_a3_ar":"ALB","adm0_a3_jp":"ALB","adm0_a3_ko":"ALB","adm0_a3_vn":"ALB","adm0_a3_tr":"ALB","adm0_a3_id":"ALB","adm0_a3_pl":"ALB","adm0_a3_gr":"ALB","adm0_a3_it":"ALB","adm0_a3_nl":"ALB","adm0_a3_se":"ALB","adm0_a3_bd":"ALB","adm0_a3_ua":"ALB","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":5,"max_label":10,"label_x":20.11384,"label_y":40.654855,"ne_id":1159320325,"wikidataid":"Q222","name_ar":"ألبانيا","name_bn":"আলবেনিয়া","name_de":"Albanien","name_en":"Albania","name_es":"Albania","name_fa":"آلبانی","name_fr":"Albanie","name_el":"Αλβανία","name_he":"אלבניה","name_hi":"अल्बानिया","name_hu":"Albánia","name_id":"Albania","name_it":"Albania","name_ja":"アルバニア","name_ko":"알바니아","name_nl":"Albanië","name_pl":"Albania","name_pt":"Albânia","name_ru":"Албания","name_sv":"Albanien","name_tr":"Arnavutluk","name_uk":"Албанія","name_ur":"البانیا","name_vi":"Albania","name_zh":"阿尔巴尼亚","name_zht":"阿爾巴尼亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"ALB.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[20.590247,41.855409],[20.71731,41.84711],[20.76216,42.05186],[21.3527,42.2068],[21.576636,42.245224],[21.54332,42.32025],[21.66292,42.43922],[21.77505,42.6827],[21.63302,42.67717],[21.43866,42.86255],[21.27421,42.90959],[21.143395,43.068685],[20.95651,43.13094],[20.81448,43.27205],[20.63508,43.21671],[20.49679,42.88469],[20.25758,42.81275],[20.0707,42.58863],[20.283755,42.32026],[20.52295,42.21787],[20.590247,41.855409]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Kosovo","sov_a3":"KOS","adm0_dif":0,"level":2,"type":"Disputed","tlc":"1","admin":"Kosovo","adm0_a3":"KOS","geou_dif":0,"geounit":"Kosovo","gu_a3":"KOS","su_dif":0,"subunit":"Kosovo","su_a3":"KOS","brk_diff":0,"name":"Kosovo","name_long":"Kosovo","brk_a3":"KOS","brk_name":"Kosovo","brk_group":null,"abbrev":"Kos.","postal":"KO","formal_en":"Republic of Kosovo","formal_fr":null,"name_ciawf":"Kosovo","note_adm0":null,"note_brk":null,"name_sort":"Kosovo","name_alt":null,"mapcolor7":2,"mapcolor8":2,"mapcolor9":3,"mapcolor13":11,"pop_est":1794248,"pop_rank":12,"pop_year":2019,"gdp_md":7926,"gdp_year":2019,"economy":"6. Developing region","income_grp":"4. Lower middle income","fips_10":"KV","iso_a2":"-99","iso_a2_eh":"XK","iso_a3":"-99","iso_a3_eh":"-99","iso_n3":"-99","iso_n3_eh":"-99","un_a3":"-099","wb_a2":"KV","wb_a3":"KSV","woe_id":-90,"woe_id_eh":29389201,"woe_note":"Subunit of Serbia in WOE still; should include 29389201, 29389207, 29389218, 29389209 and 29389214.","adm0_iso":"SRB","adm0_diff":"1","adm0_tlc":"KOS","adm0_a3_us":"KOS","adm0_a3_fr":"KOS","adm0_a3_ru":"SRB","adm0_a3_es":"SRB","adm0_a3_cn":"SRB","adm0_a3_tw":"KOS","adm0_a3_in":"SRB","adm0_a3_np":"SRB","adm0_a3_pk":"KOS","adm0_a3_de":"KOS","adm0_a3_gb":"SRB","adm0_a3_br":"KOS","adm0_a3_il":"KOS","adm0_a3_ps":"SRB","adm0_a3_sa":"KOS","adm0_a3_eg":"KOS","adm0_a3_ma":"SRB","adm0_a3_pt":"KOS","adm0_a3_ar":"SRB","adm0_a3_jp":"KOS","adm0_a3_ko":"KOS","adm0_a3_vn":"SRB","adm0_a3_tr":"KOS","adm0_a3_id":"SRB","adm0_a3_pl":"KOS","adm0_a3_gr":"SRB","adm0_a3_it":"KOS","adm0_a3_nl":"KOS","adm0_a3_se":"KOS","adm0_a3_bd":"KOS","adm0_a3_ua":"SRB","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":5,"max_label":10,"label_x":20.860719,"label_y":42.593587,"ne_id":1159321007,"wikidataid":"Q1246","name_ar":"كوسوفو","name_bn":"কসোভো","name_de":"Kosovo","name_en":"Kosovo","name_es":"Kosovo","name_fa":"کوزووو","name_fr":"Kosovo","name_el":"Κοσσυφοπέδιο","name_he":"קוסובו","name_hi":"कोसोवो गणराज्य","name_hu":"Koszovó","name_id":"Kosovo","name_it":"Kosovo","name_ja":"コソボ共和国","name_ko":"코소보","name_nl":"Kosovo","name_pl":"Kosowo","name_pt":"Kosovo","name_ru":"Республика Косово","name_sv":"Kosovo","name_tr":"Kosova","name_uk":"Косово","name_ur":"کوسووہ","name_vi":"Kosovo","name_zh":"科索沃","name_zht":"科索沃","fclass_iso":"Unrecognized","tlc_diff":"1","fclass_tlc":"Admin-0 country","fclass_us":"Admin-0 country","fclass_fr":"Admin-0 country","fclass_ru":"Admin-1 region","fclass_es":"Unrecognized","fclass_cn":"Unrecognized","fclass_tw":"Admin-0 country","fclass_in":"Admin-1 region","fclass_np":"Unrecognized","fclass_pk":"Admin-0 country","fclass_de":"Admin-0 country","fclass_gb":"Admin-0 country","fclass_br":"Unrecognized","fclass_il":"Admin-0 country","fclass_ps":"Unrecognized","fclass_sa":"Admin-0 country","fclass_eg":"Admin-0 country","fclass_ma":"Unrecognized","fclass_pt":"Admin-0 country","fclass_ar":"Unrecognized","fclass_jp":"Admin-0 country","fclass_ko":"Admin-0 country","fclass_vn":"Unrecognized","fclass_tr":"Admin-0 country","fclass_id":"Unrecognized","fclass_pl":"Admin-0 country","fclass_gr":"Unrecognized","fclass_it":"Admin-0 country","fclass_nl":"Admin-0 country","fclass_se":"Admin-0 country","fclass_bd":"Admin-0 country","fclass_ua":"Unrecognized","filename":"kosovo.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-7.453726,37.097788],[-6.520191,36.942913],[-6.236694,36.367677],[-5.866432,36.029817],[-5.37716,35.94685],[-4.995219,36.324708],[-4.368901,36.677839],[-3.415781,36.6589],[-2.146453,36.674144],[-1.438382,37.443064],[-0.683389,37.642354],[-0.467124,38.292366],[0.111291,38.738514],[-0.278711,39.309978],[0.106692,40.123934],[0.721331,40.678318],[0.810525,41.014732],[2.091842,41.226089],[3.039484,41.89212],[2.985999,42.473015],[1.826793,42.343385],[0.701591,42.795734],[0.338047,42.579546],[-1.502771,43.034014],[-1.901351,43.422802],[-3.517532,43.455901],[-4.347843,43.403449],[-5.411886,43.57424],[-6.754492,43.567909],[-7.97819,43.748338],[-9.392884,43.026625],[-8.984433,42.592775],[-9.034818,41.880571],[-8.671946,42.134689],[-8.263857,42.280469],[-8.013175,41.790886],[-7.422513,41.792075],[-7.251309,41.918346],[-6.668606,41.883387],[-6.389088,41.381815],[-6.851127,41.111083],[-6.86402,40.330872],[-7.026413,40.184524],[-7.066592,39.711892],[-7.498632,39.629571],[-7.098037,39.030073],[-7.374092,38.373059],[-7.029281,38.075764],[-7.166508,37.803894],[-7.537105,37.428904],[-7.453726,37.097788]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"Spain","sov_a3":"ESP","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Spain","adm0_a3":"ESP","geou_dif":0,"geounit":"Spain","gu_a3":"ESP","su_dif":0,"subunit":"Spain","su_a3":"ESP","brk_diff":0,"name":"Spain","name_long":"Spain","brk_a3":"ESP","brk_name":"Spain","brk_group":null,"abbrev":"Sp.","postal":"E","formal_en":"Kingdom of Spain","formal_fr":null,"name_ciawf":"Spain","note_adm0":null,"note_brk":null,"name_sort":"Spain","name_alt":null,"mapcolor7":4,"mapcolor8":5,"mapcolor9":5,"mapcolor13":5,"pop_est":47076781,"pop_rank":15,"pop_year":2019,"gdp_md":1393490,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"SP","iso_a2":"ES","iso_a2_eh":"ES","iso_a3":"ESP","iso_a3_eh":"ESP","iso_n3":"724","iso_n3_eh":"724","un_a3":"724","wb_a2":"ES","wb_a3":"ESP","woe_id":23424950,"woe_id_eh":23424950,"woe_note":"Exact WOE match as country","adm0_iso":"ESP","adm0_diff":null,"adm0_tlc":"ESP","adm0_a3_us":"ESP","adm0_a3_fr":"ESP","adm0_a3_ru":"ESP","adm0_a3_es":"ESP","adm0_a3_cn":"ESP","adm0_a3_tw":"ESP","adm0_a3_in":"ESP","adm0_a3_np":"ESP","adm0_a3_pk":"ESP","adm0_a3_de":"ESP","adm0_a3_gb":"ESP","adm0_a3_br":"ESP","adm0_a3_il":"ESP","adm0_a3_ps":"ESP","adm0_a3_sa":"ESP","adm0_a3_eg":"ESP","adm0_a3_ma":"ESP","adm0_a3_pt":"ESP","adm0_a3_ar":"ESP","adm0_a3_jp":"ESP","adm0_a3_ko":"ESP","adm0_a3_vn":"ESP","adm0_a3_tr":"ESP","adm0_a3_id":"ESP","adm0_a3_pl":"ESP","adm0_a3_gr":"ESP","adm0_a3_it":"ESP","adm0_a3_nl":"ESP","adm0_a3_se":"ESP","adm0_a3_bd":"ESP","adm0_a3_ua":"ESP","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":5,"long_len":5,"abbrev_len":3,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2,"max_label":7,"label_x":-3.464718,"label_y":40.090953,"ne_id":1159320587,"wikidataid":"Q29","name_ar":"إسبانيا","name_bn":"স্পেন","name_de":"Spanien","name_en":"Spain","name_es":"España","name_fa":"اسپانیا","name_fr":"Espagne","name_el":"Ισπανία","name_he":"ספרד","name_hi":"स्पेन","name_hu":"Spanyolország","name_id":"Spanyol","name_it":"Spagna","name_ja":"スペイン","name_ko":"스페인","name_nl":"Spanje","name_pl":"Hiszpania","name_pt":"Espanha","name_ru":"Испания","name_sv":"Spanien","name_tr":"İspanya","name_uk":"Іспанія","name_ur":"ہسپانیہ","name_vi":"Tây Ban Nha","name_zh":"西班牙","name_zht":"西班牙","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"ESP.geojson"}},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[9.921906,54.983104],[9.649985,55.469999],[10.369993,56.190007],[10.667804,56.081383],[10.912182,56.458621],[10.369993,56.609982],[10.25,56.890016],[10.546106,57.215733],[10.580006,57.730017],[9.775559,57.447941],[9.424469,57.172066],[8.543438,57.110003],[8.256582,56.809969],[8.089977,56.540012],[8.120311,55.517723],[8.526229,54.962744],[9.282049,54.830865],[9.921906,54.983104]]],[[[12.370904,56.111407],[10.903914,55.779955],[11.043543,55.364864],[12.089991,54.800015],[12.690006,55.609991],[12.370904,56.111407]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":4,"sovereignt":"Denmark","sov_a3":"DN1","adm0_dif":1,"level":2,"type":"Country","tlc":"1","admin":"Denmark","adm0_a3":"DNK","geou_dif":0,"geounit":"Denmark","gu_a3":"DNK","su_dif":0,"subunit":"Denmark","su_a3":"DNK","brk_diff":0,"name":"Denmark","name_long":"Denmark","brk_a3":"DNK","brk_name":"Denmark","brk_group":null,"abbrev":"Den.","postal":"DK","formal_en":"Kingdom of Denmark","formal_fr":null,"name_ciawf":"Denmark","note_adm0":null,"note_brk":null,"name_sort":"Denmark","name_alt":null,"mapcolor7":4,"mapcolor8":1,"mapcolor9":3,"mapcolor13":12,"pop_est":5818553,"pop_rank":13,"pop_year":2019,"gdp_md":350104,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"DA","iso_a2":"DK","iso_a2_eh":"DK","iso_a3":"DNK","iso_a3_eh":"DNK","iso_n3":"208","iso_n3_eh":"208","un_a3":"208","wb_a2":"DK","wb_a3":"DNK","woe_id":23424796,"woe_id_eh":23424796,"woe_note":"Exact WOE match as country","adm0_iso":"DNK","adm0_diff":null,"adm0_tlc":"DNK","adm0_a3_us":"DNK","adm0_a3_fr":"DNK","adm0_a3_ru":"DNK","adm0_a3_es":"DNK","adm0_a3_cn":"DNK","adm0_a3_tw":"DNK","adm0_a3_in":"DNK","adm0_a3_np":"DNK","adm0_a3_pk":"DNK","adm0_a3_de":"DNK","adm0_a3_gb":"DNK","adm0_a3_br":"DNK","adm0_a3_il":"DNK","adm0_a3_ps":"DNK","adm0_a3_sa":"DNK","adm0_a3_eg":"DNK","adm0_a3_ma":"DNK","adm0_a3_pt":"DNK","adm0_a3_ar":"DNK","adm0_a3_jp":"DNK","adm0_a3_ko":"DNK","adm0_a3_vn":"DNK","adm0_a3_tr":"DNK","adm0_a3_id":"DNK","adm0_a3_pl":"DNK","adm0_a3_gr":"DNK","adm0_a3_it":"DNK","adm0_a3_nl":"DNK","adm0_a3_se":"DNK","adm0_a3_bd":"DNK","adm0_a3_ua":"DNK","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":9.018163,"label_y":55.966965,"ne_id":1159320547,"wikidataid":"Q35","name_ar":"الدنمارك","name_bn":"ডেনমার্ক","name_de":"Dänemark","name_en":"Denmark","name_es":"Dinamarca","name_fa":"دانمارک","name_fr":"Danemark","name_el":"Δανία","name_he":"דנמרק","name_hi":"डेनमार्क","name_hu":"Dánia","name_id":"Denmark","name_it":"Danimarca","name_ja":"デンマーク","name_ko":"덴마크","name_nl":"Denemarken","name_pl":"Dania","name_pt":"Dinamarca","name_ru":"Дания","name_sv":"Danmark","name_tr":"Danimarka","name_uk":"Данія","name_ur":"ڈنمارک","name_vi":"Đan Mạch","name_zh":"丹麦","name_zht":"丹麥","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"DNK.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[28.233554,45.488283],[28.054443,45.944586],[28.160018,46.371563],[28.12803,46.810476],[27.551166,47.405117],[27.233873,47.826771],[26.924176,48.123264],[26.619337,48.220726],[26.19745,48.220881],[25.945941,47.987149],[25.207743,47.891056],[24.866317,47.737526],[24.402056,47.981878],[23.760958,47.985598],[23.142236,48.096341],[22.710531,47.882194],[22.099768,47.672439],[21.626515,46.994238],[21.021952,46.316088],[20.220192,46.127469],[20.762175,45.734573],[20.874313,45.416375],[21.483526,45.18117],[21.562023,44.768947],[22.145088,44.478422],[22.459022,44.702517],[22.705726,44.578003],[22.474008,44.409228],[22.65715,44.234923],[22.944832,43.823785],[23.332302,43.897011],[24.100679,43.741051],[25.569272,43.688445],[26.065159,43.943494],[27.2424,44.175986],[27.970107,43.812468],[28.558081,43.707462],[28.837858,44.913874],[29.141612,44.82021],[29.626543,45.035391],[29.603289,45.293308],[29.149725,45.464925],[28.679779,45.304031],[28.233554,45.488283]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Romania","sov_a3":"ROU","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Romania","adm0_a3":"ROU","geou_dif":0,"geounit":"Romania","gu_a3":"ROU","su_dif":0,"subunit":"Romania","su_a3":"ROU","brk_diff":0,"name":"Romania","name_long":"Romania","brk_a3":"ROU","brk_name":"Romania","brk_group":null,"abbrev":"Rom.","postal":"RO","formal_en":"Romania","formal_fr":null,"name_ciawf":"Romania","note_adm0":null,"note_brk":null,"name_sort":"Romania","name_alt":null,"mapcolor7":1,"mapcolor8":4,"mapcolor9":3,"mapcolor13":13,"pop_est":19356544,"pop_rank":14,"pop_year":2019,"gdp_md":250077,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"3. Upper middle income","fips_10":"RO","iso_a2":"RO","iso_a2_eh":"RO","iso_a3":"ROU","iso_a3_eh":"ROU","iso_n3":"642","iso_n3_eh":"642","un_a3":"642","wb_a2":"RO","wb_a3":"ROM","woe_id":23424933,"woe_id_eh":23424933,"woe_note":"Exact WOE match as country","adm0_iso":"ROU","adm0_diff":null,"adm0_tlc":"ROU","adm0_a3_us":"ROU","adm0_a3_fr":"ROU","adm0_a3_ru":"ROU","adm0_a3_es":"ROU","adm0_a3_cn":"ROU","adm0_a3_tw":"ROU","adm0_a3_in":"ROU","adm0_a3_np":"ROU","adm0_a3_pk":"ROU","adm0_a3_de":"ROU","adm0_a3_gb":"ROU","adm0_a3_br":"ROU","adm0_a3_il":"ROU","adm0_a3_ps":"ROU","adm0_a3_sa":"ROU","adm0_a3_eg":"ROU","adm0_a3_ma":"ROU","adm0_a3_pt":"ROU","adm0_a3_ar":"ROU","adm0_a3_jp":"ROU","adm0_a3_ko":"ROU","adm0_a3_vn":"ROU","adm0_a3_tr":"ROU","adm0_a3_id":"ROU","adm0_a3_pl":"ROU","adm0_a3_gr":"ROU","adm0_a3_it":"ROU","adm0_a3_nl":"ROU","adm0_a3_se":"ROU","adm0_a3_bd":"ROU","adm0_a3_ua":"ROU","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":24.972624,"label_y":45.733237,"ne_id":1159321199,"wikidataid":"Q218","name_ar":"رومانيا","name_bn":"রোমানিয়া","name_de":"Rumänien","name_en":"Romania","name_es":"Rumania","name_fa":"رومانی","name_fr":"Roumanie","name_el":"Ρουμανία","name_he":"רומניה","name_hi":"रोमानिया","name_hu":"Románia","name_id":"Rumania","name_it":"Romania","name_ja":"ルーマニア","name_ko":"루마니아","name_nl":"Roemenië","name_pl":"Rumunia","name_pt":"Roménia","name_ru":"Румыния","name_sv":"Rumänien","name_tr":"Romanya","name_uk":"Румунія","name_ur":"رومانیہ","name_vi":"Romania","name_zh":"罗马尼亚","name_zht":"羅馬尼亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"ROU.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[22.085608,48.422264],[21.872236,48.319971],[20.801294,48.623854],[20.473562,48.56285],[20.239054,48.327567],[19.769471,48.202691],[19.661364,48.266615],[19.174365,48.111379],[18.777025,48.081768],[18.696513,47.880954],[17.857133,47.758429],[17.488473,47.867466],[16.979667,48.123497],[16.903754,47.714866],[16.340584,47.712902],[16.534268,47.496171],[16.202298,46.852386],[16.370505,46.841327],[16.564808,46.503751],[16.882515,46.380632],[17.630066,45.951769],[18.456062,45.759481],[18.829825,45.908872],[18.829838,45.908878],[19.596045,46.17173],[20.220192,46.127469],[21.021952,46.316088],[21.626515,46.994238],[22.099768,47.672439],[22.710531,47.882194],[22.64082,48.15024],[22.085608,48.422264]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Hungary","sov_a3":"HUN","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Hungary","adm0_a3":"HUN","geou_dif":0,"geounit":"Hungary","gu_a3":"HUN","su_dif":0,"subunit":"Hungary","su_a3":"HUN","brk_diff":0,"name":"Hungary","name_long":"Hungary","brk_a3":"HUN","brk_name":"Hungary","brk_group":null,"abbrev":"Hun.","postal":"HU","formal_en":"Republic of Hungary","formal_fr":null,"name_ciawf":"Hungary","note_adm0":null,"note_brk":null,"name_sort":"Hungary","name_alt":null,"mapcolor7":4,"mapcolor8":6,"mapcolor9":1,"mapcolor13":5,"pop_est":9769949,"pop_rank":13,"pop_year":2019,"gdp_md":163469,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"HU","iso_a2":"HU","iso_a2_eh":"HU","iso_a3":"HUN","iso_a3_eh":"HUN","iso_n3":"348","iso_n3_eh":"348","un_a3":"348","wb_a2":"HU","wb_a3":"HUN","woe_id":23424844,"woe_id_eh":23424844,"woe_note":"Exact WOE match as country","adm0_iso":"HUN","adm0_diff":null,"adm0_tlc":"HUN","adm0_a3_us":"HUN","adm0_a3_fr":"HUN","adm0_a3_ru":"HUN","adm0_a3_es":"HUN","adm0_a3_cn":"HUN","adm0_a3_tw":"HUN","adm0_a3_in":"HUN","adm0_a3_np":"HUN","adm0_a3_pk":"HUN","adm0_a3_de":"HUN","adm0_a3_gb":"HUN","adm0_a3_br":"HUN","adm0_a3_il":"HUN","adm0_a3_ps":"HUN","adm0_a3_sa":"HUN","adm0_a3_eg":"HUN","adm0_a3_ma":"HUN","adm0_a3_pt":"HUN","adm0_a3_ar":"HUN","adm0_a3_jp":"HUN","adm0_a3_ko":"HUN","adm0_a3_vn":"HUN","adm0_a3_tr":"HUN","adm0_a3_id":"HUN","adm0_a3_pl":"HUN","adm0_a3_gr":"HUN","adm0_a3_it":"HUN","adm0_a3_nl":"HUN","adm0_a3_se":"HUN","adm0_a3_bd":"HUN","adm0_a3_ua":"HUN","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":19.447867,"label_y":47.086841,"ne_id":1159320841,"wikidataid":"Q28","name_ar":"المجر","name_bn":"হাঙ্গেরি","name_de":"Ungarn","name_en":"Hungary","name_es":"Hungría","name_fa":"مجارستان","name_fr":"Hongrie","name_el":"Ουγγαρία","name_he":"הונגריה","name_hi":"हंगरी","name_hu":"Magyarország","name_id":"Hongaria","name_it":"Ungheria","name_ja":"ハンガリー","name_ko":"헝가리","name_nl":"Hongarije","name_pl":"Węgry","name_pt":"Hungria","name_ru":"Венгрия","name_sv":"Ungern","name_tr":"Macaristan","name_uk":"Угорщина","name_ur":"ہنگری","name_vi":"Hungary","name_zh":"匈牙利","name_zht":"匈牙利","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"HUN.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[22.558138,49.085738],[21.607808,49.470107],[20.887955,49.328772],[20.415839,49.431453],[19.825023,49.217125],[19.320713,49.571574],[18.909575,49.435846],[18.853144,49.49623],[18.554971,49.495015],[18.399994,49.315001],[18.170498,49.271515],[18.104973,49.043983],[17.913512,48.996493],[17.886485,48.903475],[17.545007,48.800019],[17.101985,48.816969],[16.960288,48.596982],[16.879983,48.470013],[16.979667,48.123497],[17.488473,47.867466],[17.857133,47.758429],[18.696513,47.880954],[18.777025,48.081768],[19.174365,48.111379],[19.661364,48.266615],[19.769471,48.202691],[20.239054,48.327567],[20.473562,48.56285],[20.801294,48.623854],[21.872236,48.319971],[22.085608,48.422264],[22.280842,48.825392],[22.558138,49.085738]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Slovakia","sov_a3":"SVK","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Slovakia","adm0_a3":"SVK","geou_dif":0,"geounit":"Slovakia","gu_a3":"SVK","su_dif":0,"subunit":"Slovakia","su_a3":"SVK","brk_diff":0,"name":"Slovakia","name_long":"Slovakia","brk_a3":"SVK","brk_name":"Slovakia","brk_group":null,"abbrev":"Svk.","postal":"SK","formal_en":"Slovak Republic","formal_fr":null,"name_ciawf":"Slovakia","note_adm0":null,"note_brk":null,"name_sort":"Slovak Republic","name_alt":null,"mapcolor7":2,"mapcolor8":4,"mapcolor9":4,"mapcolor13":9,"pop_est":5454073,"pop_rank":13,"pop_year":2019,"gdp_md":105079,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"LO","iso_a2":"SK","iso_a2_eh":"SK","iso_a3":"SVK","iso_a3_eh":"SVK","iso_n3":"703","iso_n3_eh":"703","un_a3":"703","wb_a2":"SK","wb_a3":"SVK","woe_id":23424877,"woe_id_eh":23424877,"woe_note":"Exact WOE match as country","adm0_iso":"SVK","adm0_diff":null,"adm0_tlc":"SVK","adm0_a3_us":"SVK","adm0_a3_fr":"SVK","adm0_a3_ru":"SVK","adm0_a3_es":"SVK","adm0_a3_cn":"SVK","adm0_a3_tw":"SVK","adm0_a3_in":"SVK","adm0_a3_np":"SVK","adm0_a3_pk":"SVK","adm0_a3_de":"SVK","adm0_a3_gb":"SVK","adm0_a3_br":"SVK","adm0_a3_il":"SVK","adm0_a3_ps":"SVK","adm0_a3_sa":"SVK","adm0_a3_eg":"SVK","adm0_a3_ma":"SVK","adm0_a3_pt":"SVK","adm0_a3_ar":"SVK","adm0_a3_jp":"SVK","adm0_a3_ko":"SVK","adm0_a3_vn":"SVK","adm0_a3_tr":"SVK","adm0_a3_id":"SVK","adm0_a3_pl":"SVK","adm0_a3_gr":"SVK","adm0_a3_it":"SVK","adm0_a3_nl":"SVK","adm0_a3_se":"SVK","adm0_a3_bd":"SVK","adm0_a3_ua":"SVK","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":8,"long_len":8,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":19.049868,"label_y":48.734044,"ne_id":1159321283,"wikidataid":"Q214","name_ar":"سلوفاكيا","name_bn":"স্লোভাকিয়া","name_de":"Slowakei","name_en":"Slovakia","name_es":"Eslovaquia","name_fa":"اسلواکی","name_fr":"Slovaquie","name_el":"Σλοβακία","name_he":"סלובקיה","name_hi":"स्लोवाकिया","name_hu":"Szlovákia","name_id":"Slowakia","name_it":"Slovacchia","name_ja":"スロバキア","name_ko":"슬로바키아","name_nl":"Slowakije","name_pl":"Słowacja","name_pt":"Eslováquia","name_ru":"Словакия","name_sv":"Slovakien","name_tr":"Slovakya","name_uk":"Словаччина","name_ur":"سلوواکیہ","name_vi":"Slovakia","name_zh":"斯洛伐克","name_zht":"斯洛伐克","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"SVK.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[23.484128,53.912498],[23.243987,54.220567],[22.731099,54.327537],[20.892245,54.312525],[19.66064,54.426084],[18.696255,54.438719],[18.620859,54.682606],[17.622832,54.851536],[16.363477,54.513159],[14.8029,54.050706],[14.119686,53.757029],[14.353315,53.248171],[14.074521,52.981263],[14.4376,52.62485],[14.685026,52.089947],[14.607098,51.745188],[15.016996,51.106674],[15.490972,50.78473],[16.238627,50.697733],[16.176253,50.422607],[16.719476,50.215747],[16.868769,50.473974],[17.554567,50.362146],[17.649445,50.049038],[18.392914,49.988629],[18.853144,49.49623],[18.909575,49.435846],[19.320713,49.571574],[19.825023,49.217125],[20.415839,49.431453],[20.887955,49.328772],[21.607808,49.470107],[22.558138,49.085738],[22.776419,49.027395],[22.51845,49.476774],[23.426508,50.308506],[23.922757,50.424881],[24.029986,50.705407],[23.527071,51.578454],[23.508002,52.023647],[23.199494,52.486977],[23.799199,52.691099],[23.804935,53.089731],[23.527536,53.470122],[23.484128,53.912498]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Poland","sov_a3":"POL","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Poland","adm0_a3":"POL","geou_dif":0,"geounit":"Poland","gu_a3":"POL","su_dif":0,"subunit":"Poland","su_a3":"POL","brk_diff":0,"name":"Poland","name_long":"Poland","brk_a3":"POL","brk_name":"Poland","brk_group":null,"abbrev":"Pol.","postal":"PL","formal_en":"Republic of Poland","formal_fr":null,"name_ciawf":"Poland","note_adm0":null,"note_brk":null,"name_sort":"Poland","name_alt":null,"mapcolor7":3,"mapcolor8":7,"mapcolor9":1,"mapcolor13":2,"pop_est":37970874,"pop_rank":15,"pop_year":2019,"gdp_md":595858,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"PL","iso_a2":"PL","iso_a2_eh":"PL","iso_a3":"POL","iso_a3_eh":"POL","iso_n3":"616","iso_n3_eh":"616","un_a3":"616","wb_a2":"PL","wb_a3":"POL","woe_id":23424923,"woe_id_eh":23424923,"woe_note":"Exact WOE match as country","adm0_iso":"POL","adm0_diff":null,"adm0_tlc":"POL","adm0_a3_us":"POL","adm0_a3_fr":"POL","adm0_a3_ru":"POL","adm0_a3_es":"POL","adm0_a3_cn":"POL","adm0_a3_tw":"POL","adm0_a3_in":"POL","adm0_a3_np":"POL","adm0_a3_pk":"POL","adm0_a3_de":"POL","adm0_a3_gb":"POL","adm0_a3_br":"POL","adm0_a3_il":"POL","adm0_a3_ps":"POL","adm0_a3_sa":"POL","adm0_a3_eg":"POL","adm0_a3_ma":"POL","adm0_a3_pt":"POL","adm0_a3_ar":"POL","adm0_a3_jp":"POL","adm0_a3_ko":"POL","adm0_a3_vn":"POL","adm0_a3_tr":"POL","adm0_a3_id":"POL","adm0_a3_pl":"POL","adm0_a3_gr":"POL","adm0_a3_it":"POL","adm0_a3_nl":"POL","adm0_a3_se":"POL","adm0_a3_bd":"POL","adm0_a3_ua":"POL","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2.5,"max_label":7,"label_x":19.490468,"label_y":51.990316,"ne_id":1159321179,"wikidataid":"Q36","name_ar":"بولندا","name_bn":"পোল্যান্ড","name_de":"Polen","name_en":"Poland","name_es":"Polonia","name_fa":"لهستان","name_fr":"Pologne","name_el":"Πολωνία","name_he":"פולין","name_hi":"पोलैंड","name_hu":"Lengyelország","name_id":"Polandia","name_it":"Polonia","name_ja":"ポーランド","name_ko":"폴란드","name_nl":"Polen","name_pl":"Polska","name_pt":"Polónia","name_ru":"Польша","name_sv":"Polen","name_tr":"Polonya","name_uk":"Польща","name_ur":"پولینڈ","name_vi":"Ba Lan","name_zh":"波兰","name_zht":"波蘭","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"POL.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-6.197885,53.867565],[-6.95373,54.073702],[-7.572168,54.059956],[-7.366031,54.595841],[-7.572168,55.131622],[-8.327987,54.664519],[-9.688525,53.881363],[-9.166283,52.864629],[-9.977086,51.820455],[-8.561617,51.669301],[-6.788857,52.260118],[-6.032985,53.153164],[-6.197885,53.867565]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Ireland","sov_a3":"IRL","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Ireland","adm0_a3":"IRL","geou_dif":0,"geounit":"Ireland","gu_a3":"IRL","su_dif":0,"subunit":"Ireland","su_a3":"IRL","brk_diff":0,"name":"Ireland","name_long":"Ireland","brk_a3":"IRL","brk_name":"Ireland","brk_group":null,"abbrev":"Ire.","postal":"IRL","formal_en":"Ireland","formal_fr":null,"name_ciawf":"Ireland","note_adm0":null,"note_brk":null,"name_sort":"Ireland","name_alt":null,"mapcolor7":2,"mapcolor8":3,"mapcolor9":2,"mapcolor13":2,"pop_est":4941444,"pop_rank":12,"pop_year":2019,"gdp_md":388698,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"EI","iso_a2":"IE","iso_a2_eh":"IE","iso_a3":"IRL","iso_a3_eh":"IRL","iso_n3":"372","iso_n3_eh":"372","un_a3":"372","wb_a2":"IE","wb_a3":"IRL","woe_id":23424803,"woe_id_eh":23424803,"woe_note":"Exact WOE match as country","adm0_iso":"IRL","adm0_diff":null,"adm0_tlc":"IRL","adm0_a3_us":"IRL","adm0_a3_fr":"IRL","adm0_a3_ru":"IRL","adm0_a3_es":"IRL","adm0_a3_cn":"IRL","adm0_a3_tw":"IRL","adm0_a3_in":"IRL","adm0_a3_np":"IRL","adm0_a3_pk":"IRL","adm0_a3_de":"IRL","adm0_a3_gb":"IRL","adm0_a3_br":"IRL","adm0_a3_il":"IRL","adm0_a3_ps":"IRL","adm0_a3_sa":"IRL","adm0_a3_eg":"IRL","adm0_a3_ma":"IRL","adm0_a3_pt":"IRL","adm0_a3_ar":"IRL","adm0_a3_jp":"IRL","adm0_a3_ko":"IRL","adm0_a3_vn":"IRL","adm0_a3_tr":"IRL","adm0_a3_id":"IRL","adm0_a3_pl":"IRL","adm0_a3_gr":"IRL","adm0_a3_it":"IRL","adm0_a3_nl":"IRL","adm0_a3_se":"IRL","adm0_a3_bd":"IRL","adm0_a3_ua":"IRL","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":-7.798588,"label_y":53.078726,"ne_id":1159320877,"wikidataid":"Q27","name_ar":"جمهورية أيرلندا","name_bn":"প্রজাতন্ত্রী আয়ারল্যান্ড","name_de":"Irland","name_en":"Ireland","name_es":"Irlanda","name_fa":"ایرلند","name_fr":"Irlande","name_el":"Δημοκρατία της Ιρλανδίας","name_he":"אירלנד","name_hi":"आयरलैण्ड","name_hu":"Írország","name_id":"Republik Irlandia","name_it":"Irlanda","name_ja":"アイルランド","name_ko":"아일랜드","name_nl":"Ierland","name_pl":"Irlandia","name_pt":"República da Irlanda","name_ru":"Ирландия","name_sv":"Irland","name_tr":"İrlanda","name_uk":"Ірландія","name_ur":"جمہوریہ آئرلینڈ","name_vi":"Cộng hòa Ireland","name_zh":"爱尔兰","name_zht":"愛爾蘭","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"IRL.geojson"}},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-6.197885,53.867565],[-5.661949,54.554603],[-6.733847,55.17286],[-7.572168,55.131622],[-7.366031,54.595841],[-7.572168,54.059956],[-6.95373,54.073702],[-6.197885,53.867565]]],[[[-3.093831,53.404547],[-4.579999,53.495004],[-4.770013,52.840005],[-4.222347,52.301356],[-5.267296,51.9914],[-4.984367,51.593466],[-3.422719,51.426848],[-3.414851,51.426009],[-4.30999,51.210001],[-5.776567,50.159678],[-5.245023,49.96],[-4.542508,50.341837],[-3.617448,50.228356],[-2.956274,50.69688],[-2.489998,50.500019],[-0.787517,50.774989],[0.550334,50.765739],[1.449865,51.289428],[1.050562,51.806761],[1.559988,52.099998],[1.681531,52.73952],[0.469977,52.929999],[0.184981,53.325014],[-0.430485,54.464376],[-1.114991,54.624986],[-2.005676,55.804903],[-2.085009,55.909998],[-3.119003,55.973793],[-2.219988,56.870017],[-1.959281,57.6848],[-3.055002,57.690019],[-4.073828,57.553025],[-3.005005,58.635],[-4.211495,58.550845],[-5.009999,58.630013],[-5.786825,57.818848],[-6.149981,56.78501],[-5.644999,56.275015],[-5.586398,55.311146],[-5.047981,55.783986],[-4.719112,55.508473],[-5.082527,55.061601],[-4.844169,54.790971],[-3.630005,54.615013],[-3.614701,54.600937],[-2.945009,53.985],[-3.09208,53.404441],[-3.093831,53.404547]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"United Kingdom","sov_a3":"GB1","adm0_dif":1,"level":2,"type":"Country","tlc":"1","admin":"United Kingdom","adm0_a3":"GBR","geou_dif":0,"geounit":"United Kingdom","gu_a3":"GBR","su_dif":0,"subunit":"United Kingdom","su_a3":"GBR","brk_diff":0,"name":"United Kingdom","name_long":"United Kingdom","brk_a3":"GBR","brk_name":"United Kingdom","brk_group":null,"abbrev":"U.K.","postal":"GB","formal_en":"United Kingdom of Great Britain and Northern Ireland","formal_fr":null,"name_ciawf":"United Kingdom","note_adm0":null,"note_brk":null,"name_sort":"United Kingdom","name_alt":null,"mapcolor7":6,"mapcolor8":6,"mapcolor9":6,"mapcolor13":3,"pop_est":66834405,"pop_rank":16,"pop_year":2019,"gdp_md":2829108,"gdp_year":2019,"economy":"1. Developed region: G7","income_grp":"1. High income: OECD","fips_10":"UK","iso_a2":"GB","iso_a2_eh":"GB","iso_a3":"GBR","iso_a3_eh":"GBR","iso_n3":"826","iso_n3_eh":"826","un_a3":"826","wb_a2":"GB","wb_a3":"GBR","woe_id":-90,"woe_id_eh":23424975,"woe_note":"Eh ID includes Channel Islands and Isle of Man. UK constituent countries of England (24554868), Wales (12578049), Scotland (12578048), and Northern Ireland (20070563).","adm0_iso":"GBR","adm0_diff":null,"adm0_tlc":"GBR","adm0_a3_us":"GBR","adm0_a3_fr":"GBR","adm0_a3_ru":"GBR","adm0_a3_es":"GBR","adm0_a3_cn":"GBR","adm0_a3_tw":"GBR","adm0_a3_in":"GBR","adm0_a3_np":"GBR","adm0_a3_pk":"GBR","adm0_a3_de":"GBR","adm0_a3_gb":"GBR","adm0_a3_br":"GBR","adm0_a3_il":"GBR","adm0_a3_ps":"GBR","adm0_a3_sa":"GBR","adm0_a3_eg":"GBR","adm0_a3_ma":"GBR","adm0_a3_pt":"GBR","adm0_a3_ar":"GBR","adm0_a3_jp":"GBR","adm0_a3_ko":"GBR","adm0_a3_vn":"GBR","adm0_a3_tr":"GBR","adm0_a3_id":"GBR","adm0_a3_pl":"GBR","adm0_a3_gr":"GBR","adm0_a3_it":"GBR","adm0_a3_nl":"GBR","adm0_a3_se":"GBR","adm0_a3_bd":"GBR","adm0_a3_ua":"GBR","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":14,"long_len":14,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":1.7,"max_label":6.7,"label_x":-2.116346,"label_y":54.402739,"ne_id":1159320713,"wikidataid":"Q145","name_ar":"المملكة المتحدة","name_bn":"যুক্তরাজ্য","name_de":"Vereinigtes Königreich","name_en":"United Kingdom","name_es":"Reino Unido","name_fa":"بریتانیا","name_fr":"Royaume-Uni","name_el":"Ηνωμένο Βασίλειο","name_he":"הממלכה המאוחדת","name_hi":"यूनाइटेड किंगडम","name_hu":"Egyesült Királyság","name_id":"Britania Raya","name_it":"Regno Unito","name_ja":"イギリス","name_ko":"영국","name_nl":"Verenigd Koninkrijk","name_pl":"Wielka Brytania","name_pt":"Reino Unido","name_ru":"Великобритания","name_sv":"Storbritannien","name_tr":"Birleşik Krallık","name_uk":"Велика Британія","name_ur":"مملکت متحدہ","name_vi":"Vương quốc Liên hiệp Anh và Bắc Ireland","name_zh":"英国","name_zht":"英國","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"GBR.geojson"}},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[26.290003,35.29999],[25.745023,35.179998],[25.769208,35.354018],[25.025015,35.424996],[24.246665,35.368022],[23.69998,35.705004],[23.514978,35.279992],[24.735007,35.084991],[24.724982,34.919988],[26.164998,35.004995],[26.290003,35.29999]]],[[[22.952377,41.337994],[22.76177,41.3048],[22.597308,41.130487],[22.055378,41.149866],[21.674161,40.931275],[21.02004,40.842727],[20.99999,40.580004],[20.674997,40.435],[20.615,40.110007],[20.150016,39.624998],[20.217712,39.340235],[20.730032,38.769985],[21.120034,38.310323],[21.295011,37.644989],[21.670026,36.844986],[22.490028,36.41],[23.154225,36.422506],[22.774972,37.30501],[23.409972,37.409991],[23.115003,37.920011],[24.040011,37.655015],[24.025025,38.219993],[23.530016,38.510001],[22.973099,38.970903],[23.350027,39.190011],[22.849748,39.659311],[22.626299,40.256561],[22.813988,40.476005],[23.342999,39.960998],[23.899968,39.962006],[24.407999,40.124993],[23.714811,40.687129],[24.925848,40.947062],[25.447677,40.852545],[26.056942,40.824123],[26.294602,40.936261],[26.604196,41.562115],[26.117042,41.826905],[26.106138,41.328899],[25.197201,41.234486],[24.492645,41.583896],[23.692074,41.309081],[22.952377,41.337994]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Greece","sov_a3":"GRC","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Greece","adm0_a3":"GRC","geou_dif":0,"geounit":"Greece","gu_a3":"GRC","su_dif":0,"subunit":"Greece","su_a3":"GRC","brk_diff":0,"name":"Greece","name_long":"Greece","brk_a3":"GRC","brk_name":"Greece","brk_group":null,"abbrev":"Greece","postal":"GR","formal_en":"Hellenic Republic","formal_fr":null,"name_ciawf":"Greece","note_adm0":null,"note_brk":null,"name_sort":"Greece","name_alt":null,"mapcolor7":2,"mapcolor8":2,"mapcolor9":2,"mapcolor13":9,"pop_est":10716322,"pop_rank":14,"pop_year":2019,"gdp_md":209852,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"GR","iso_a2":"GR","iso_a2_eh":"GR","iso_a3":"GRC","iso_a3_eh":"GRC","iso_n3":"300","iso_n3_eh":"300","un_a3":"300","wb_a2":"GR","wb_a3":"GRC","woe_id":23424833,"woe_id_eh":23424833,"woe_note":"Exact WOE match as country","adm0_iso":"GRC","adm0_diff":null,"adm0_tlc":"GRC","adm0_a3_us":"GRC","adm0_a3_fr":"GRC","adm0_a3_ru":"GRC","adm0_a3_es":"GRC","adm0_a3_cn":"GRC","adm0_a3_tw":"GRC","adm0_a3_in":"GRC","adm0_a3_np":"GRC","adm0_a3_pk":"GRC","adm0_a3_de":"GRC","adm0_a3_gb":"GRC","adm0_a3_br":"GRC","adm0_a3_il":"GRC","adm0_a3_ps":"GRC","adm0_a3_sa":"GRC","adm0_a3_eg":"GRC","adm0_a3_ma":"GRC","adm0_a3_pt":"GRC","adm0_a3_ar":"GRC","adm0_a3_jp":"GRC","adm0_a3_ko":"GRC","adm0_a3_vn":"GRC","adm0_a3_tr":"GRC","adm0_a3_id":"GRC","adm0_a3_pl":"GRC","adm0_a3_gr":"GRC","adm0_a3_it":"GRC","adm0_a3_nl":"GRC","adm0_a3_se":"GRC","adm0_a3_bd":"GRC","adm0_a3_ua":"GRC","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":6,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2.7,"max_label":8,"label_x":21.72568,"label_y":39.492763,"ne_id":1159320811,"wikidataid":"Q41","name_ar":"اليونان","name_bn":"গ্রিস","name_de":"Griechenland","name_en":"Greece","name_es":"Grecia","name_fa":"یونان","name_fr":"Grèce","name_el":"Ελλάδα","name_he":"יוון","name_hi":"यूनान","name_hu":"Görögország","name_id":"Yunani","name_it":"Grecia","name_ja":"ギリシャ","name_ko":"그리스","name_nl":"Griekenland","name_pl":"Grecja","name_pt":"Grécia","name_ru":"Греция","name_sv":"Grekland","name_tr":"Yunanistan","name_uk":"Греція","name_ur":"یونان","name_vi":"Hy Lạp","name_zh":"希腊","name_zht":"希臘","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"GRC.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[16.979667,48.123497],[16.879983,48.470013],[16.960288,48.596982],[16.499283,48.785808],[16.029647,48.733899],[15.253416,49.039074],[14.901447,48.964402],[14.338898,48.555305],[13.595946,48.877172],[13.243357,48.416115],[12.884103,48.289146],[13.025851,47.637584],[12.932627,47.467646],[12.62076,47.672388],[12.141357,47.703083],[11.426414,47.523766],[10.544504,47.566399],[10.402084,47.302488],[9.896068,47.580197],[9.594226,47.525058],[9.632932,47.347601],[9.47997,47.10281],[9.932448,46.920728],[10.442701,46.893546],[11.048556,46.751359],[11.164828,46.941579],[12.153088,47.115393],[12.376485,46.767559],[13.806475,46.509306],[14.632472,46.431817],[15.137092,46.658703],[16.011664,46.683611],[16.202298,46.852386],[16.534268,47.496171],[16.340584,47.712902],[16.903754,47.714866],[16.979667,48.123497]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":4,"sovereignt":"Austria","sov_a3":"AUT","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Austria","adm0_a3":"AUT","geou_dif":0,"geounit":"Austria","gu_a3":"AUT","su_dif":0,"subunit":"Austria","su_a3":"AUT","brk_diff":0,"name":"Austria","name_long":"Austria","brk_a3":"AUT","brk_name":"Austria","brk_group":null,"abbrev":"Aust.","postal":"A","formal_en":"Republic of Austria","formal_fr":null,"name_ciawf":"Austria","note_adm0":null,"note_brk":null,"name_sort":"Austria","name_alt":null,"mapcolor7":3,"mapcolor8":1,"mapcolor9":3,"mapcolor13":4,"pop_est":8877067,"pop_rank":13,"pop_year":2019,"gdp_md":445075,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"AU","iso_a2":"AT","iso_a2_eh":"AT","iso_a3":"AUT","iso_a3_eh":"AUT","iso_n3":"040","iso_n3_eh":"040","un_a3":"040","wb_a2":"AT","wb_a3":"AUT","woe_id":23424750,"woe_id_eh":23424750,"woe_note":"Exact WOE match as country","adm0_iso":"AUT","adm0_diff":null,"adm0_tlc":"AUT","adm0_a3_us":"AUT","adm0_a3_fr":"AUT","adm0_a3_ru":"AUT","adm0_a3_es":"AUT","adm0_a3_cn":"AUT","adm0_a3_tw":"AUT","adm0_a3_in":"AUT","adm0_a3_np":"AUT","adm0_a3_pk":"AUT","adm0_a3_de":"AUT","adm0_a3_gb":"AUT","adm0_a3_br":"AUT","adm0_a3_il":"AUT","adm0_a3_ps":"AUT","adm0_a3_sa":"AUT","adm0_a3_eg":"AUT","adm0_a3_ma":"AUT","adm0_a3_pt":"AUT","adm0_a3_ar":"AUT","adm0_a3_jp":"AUT","adm0_a3_ko":"AUT","adm0_a3_vn":"AUT","adm0_a3_tr":"AUT","adm0_a3_id":"AUT","adm0_a3_pl":"AUT","adm0_a3_gr":"AUT","adm0_a3_it":"AUT","adm0_a3_nl":"AUT","adm0_a3_se":"AUT","adm0_a3_bd":"AUT","adm0_a3_ua":"AUT","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":14.130515,"label_y":47.518859,"ne_id":1159320379,"wikidataid":"Q40","name_ar":"النمسا","name_bn":"অস্ট্রিয়া","name_de":"Österreich","name_en":"Austria","name_es":"Austria","name_fa":"اتریش","name_fr":"Autriche","name_el":"Αυστρία","name_he":"אוסטריה","name_hi":"ऑस्ट्रिया","name_hu":"Ausztria","name_id":"Austria","name_it":"Austria","name_ja":"オーストリア","name_ko":"오스트리아","name_nl":"Oostenrijk","name_pl":"Austria","name_pt":"Áustria","name_ru":"Австрия","name_sv":"Österrike","name_tr":"Avusturya","name_uk":"Австрія","name_ur":"آسٹریا","name_vi":"Áo","name_zh":"奥地利","name_zht":"奧地利","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"AUT.geojson"}},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[10.442701,46.893546],[10.363378,46.483571],[9.922837,46.314899],[9.182882,46.440215],[8.966306,46.036932],[8.489952,46.005151],[8.31663,46.163642],[7.755992,45.82449],[7.273851,45.776948],[6.843593,45.991147],[6.802355,45.70858],[7.096652,45.333099],[6.749955,45.028518],[7.007562,44.254767],[7.549596,44.127901],[7.435185,43.693845],[7.850767,43.767148],[8.428561,44.231228],[8.888946,44.366336],[9.702488,44.036279],[10.200029,43.920007],[10.511948,42.931463],[11.191906,42.355425],[12.106683,41.704535],[12.888082,41.25309],[13.627985,41.188287],[14.060672,40.786348],[14.703268,40.60455],[14.998496,40.172949],[15.413613,40.048357],[15.718814,39.544072],[16.109332,38.964547],[15.891981,38.750942],[15.687963,38.214593],[15.684087,37.908849],[16.100961,37.985899],[16.635088,38.843572],[17.052841,38.902871],[17.17149,39.4247],[16.448743,39.795401],[16.869596,40.442235],[17.73838,40.277671],[18.293385,39.810774],[18.480247,40.168866],[18.376687,40.355625],[17.519169,40.877143],[16.785002,41.179606],[15.889346,41.541082],[16.169897,41.740295],[15.926191,41.961315],[15.14257,41.95514],[14.029821,42.761008],[13.526906,43.587727],[12.589237,44.091366],[12.261453,44.600482],[12.383875,44.885374],[12.328581,45.381778],[13.141606,45.736692],[13.93763,45.591016],[13.69811,46.016778],[13.806475,46.509306],[12.376485,46.767559],[12.153088,47.115393],[11.164828,46.941579],[11.048556,46.751359],[10.442701,46.893546]]],[[[14.761249,38.143874],[13.741156,38.034966],[12.570944,38.126381],[12.431004,37.61295],[13.826733,37.104531],[14.335229,36.996631],[15.099988,36.619987],[15.309898,37.134219],[15.160243,37.444046],[15.520376,38.231155],[14.761249,38.143874]]],[[[8.709991,40.899984],[8.159998,40.950007],[8.388253,40.378311],[8.428302,39.171847],[8.806936,38.906618],[9.214818,39.240473],[9.669519,39.177376],[9.809975,40.500009],[9.210012,41.209991],[8.709991,40.899984]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"Italy","sov_a3":"ITA","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Italy","adm0_a3":"ITA","geou_dif":0,"geounit":"Italy","gu_a3":"ITA","su_dif":0,"subunit":"Italy","su_a3":"ITA","brk_diff":0,"name":"Italy","name_long":"Italy","brk_a3":"ITA","brk_name":"Italy","brk_group":null,"abbrev":"Italy","postal":"I","formal_en":"Italian Republic","formal_fr":null,"name_ciawf":"Italy","note_adm0":null,"note_brk":null,"name_sort":"Italy","name_alt":null,"mapcolor7":6,"mapcolor8":7,"mapcolor9":8,"mapcolor13":7,"pop_est":60297396,"pop_rank":16,"pop_year":2019,"gdp_md":2003576,"gdp_year":2019,"economy":"1. Developed region: G7","income_grp":"1. High income: OECD","fips_10":"IT","iso_a2":"IT","iso_a2_eh":"IT","iso_a3":"ITA","iso_a3_eh":"ITA","iso_n3":"380","iso_n3_eh":"380","un_a3":"380","wb_a2":"IT","wb_a3":"ITA","woe_id":23424853,"woe_id_eh":23424853,"woe_note":"Exact WOE match as country","adm0_iso":"ITA","adm0_diff":null,"adm0_tlc":"ITA","adm0_a3_us":"ITA","adm0_a3_fr":"ITA","adm0_a3_ru":"ITA","adm0_a3_es":"ITA","adm0_a3_cn":"ITA","adm0_a3_tw":"ITA","adm0_a3_in":"ITA","adm0_a3_np":"ITA","adm0_a3_pk":"ITA","adm0_a3_de":"ITA","adm0_a3_gb":"ITA","adm0_a3_br":"ITA","adm0_a3_il":"ITA","adm0_a3_ps":"ITA","adm0_a3_sa":"ITA","adm0_a3_eg":"ITA","adm0_a3_ma":"ITA","adm0_a3_pt":"ITA","adm0_a3_ar":"ITA","adm0_a3_jp":"ITA","adm0_a3_ko":"ITA","adm0_a3_vn":"ITA","adm0_a3_tr":"ITA","adm0_a3_id":"ITA","adm0_a3_pl":"ITA","adm0_a3_gr":"ITA","adm0_a3_it":"ITA","adm0_a3_nl":"ITA","adm0_a3_se":"ITA","adm0_a3_bd":"ITA","adm0_a3_ua":"ITA","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":5,"long_len":5,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2,"max_label":7,"label_x":11.076907,"label_y":44.732482,"ne_id":1159320919,"wikidataid":"Q38","name_ar":"إيطاليا","name_bn":"ইতালি","name_de":"Italien","name_en":"Italy","name_es":"Italia","name_fa":"ایتالیا","name_fr":"Italie","name_el":"Ιταλία","name_he":"איטליה","name_hi":"इटली","name_hu":"Olaszország","name_id":"Italia","name_it":"Italia","name_ja":"イタリア","name_ko":"이탈리아","name_nl":"Italië","name_pl":"Włochy","name_pt":"Itália","name_ru":"Италия","name_sv":"Italien","name_tr":"İtalya","name_uk":"Італія","name_ur":"اطالیہ","name_vi":"Ý","name_zh":"意大利","name_zht":"義大利","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"ITA.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[9.594226,47.525058],[8.522612,47.830828],[8.317301,47.61358],[7.466759,47.620582],[7.192202,47.449766],[6.736571,47.541801],[6.768714,47.287708],[6.037389,46.725779],[6.022609,46.27299],[6.5001,46.429673],[6.843593,45.991147],[7.273851,45.776948],[7.755992,45.82449],[8.31663,46.163642],[8.489952,46.005151],[8.966306,46.036932],[9.182882,46.440215],[9.922837,46.314899],[10.363378,46.483571],[10.442701,46.893546],[9.932448,46.920728],[9.47997,47.10281],[9.632932,47.347601],[9.594226,47.525058]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":4,"sovereignt":"Switzerland","sov_a3":"CHE","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Switzerland","adm0_a3":"CHE","geou_dif":0,"geounit":"Switzerland","gu_a3":"CHE","su_dif":0,"subunit":"Switzerland","su_a3":"CHE","brk_diff":0,"name":"Switzerland","name_long":"Switzerland","brk_a3":"CHE","brk_name":"Switzerland","brk_group":null,"abbrev":"Switz.","postal":"CH","formal_en":"Swiss Confederation","formal_fr":null,"name_ciawf":"Switzerland","note_adm0":null,"note_brk":null,"name_sort":"Switzerland","name_alt":null,"mapcolor7":5,"mapcolor8":2,"mapcolor9":7,"mapcolor13":3,"pop_est":8574832,"pop_rank":13,"pop_year":2019,"gdp_md":703082,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"SZ","iso_a2":"CH","iso_a2_eh":"CH","iso_a3":"CHE","iso_a3_eh":"CHE","iso_n3":"756","iso_n3_eh":"756","un_a3":"756","wb_a2":"CH","wb_a3":"CHE","woe_id":23424957,"woe_id_eh":23424957,"woe_note":"Exact WOE match as country","adm0_iso":"CHE","adm0_diff":null,"adm0_tlc":"CHE","adm0_a3_us":"CHE","adm0_a3_fr":"CHE","adm0_a3_ru":"CHE","adm0_a3_es":"CHE","adm0_a3_cn":"CHE","adm0_a3_tw":"CHE","adm0_a3_in":"CHE","adm0_a3_np":"CHE","adm0_a3_pk":"CHE","adm0_a3_de":"CHE","adm0_a3_gb":"CHE","adm0_a3_br":"CHE","adm0_a3_il":"CHE","adm0_a3_ps":"CHE","adm0_a3_sa":"CHE","adm0_a3_eg":"CHE","adm0_a3_ma":"CHE","adm0_a3_pt":"CHE","adm0_a3_ar":"CHE","adm0_a3_jp":"CHE","adm0_a3_ko":"CHE","adm0_a3_vn":"CHE","adm0_a3_tr":"CHE","adm0_a3_id":"CHE","adm0_a3_pl":"CHE","adm0_a3_gr":"CHE","adm0_a3_it":"CHE","adm0_a3_nl":"CHE","adm0_a3_se":"CHE","adm0_a3_bd":"CHE","adm0_a3_ua":"CHE","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":11,"long_len":11,"abbrev_len":6,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":7.463965,"label_y":46.719114,"ne_id":1159320491,"wikidataid":"Q39","name_ar":"سويسرا","name_bn":"সুইজারল্যান্ড","name_de":"Schweiz","name_en":"Switzerland","name_es":"Suiza","name_fa":"سوئیس","name_fr":"Suisse","name_el":"Ελβετία","name_he":"שווייץ","name_hi":"स्विट्ज़रलैण्ड","name_hu":"Svájc","name_id":"Swiss","name_it":"Svizzera","name_ja":"スイス","name_ko":"스위스","name_nl":"Zwitserland","name_pl":"Szwajcaria","name_pt":"Suíça","name_ru":"Швейцария","name_sv":"Schweiz","name_tr":"İsviçre","name_uk":"Швейцарія","name_ur":"سویٹزرلینڈ","name_vi":"Thụy Sĩ","name_zh":"瑞士","name_zht":"瑞士","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"CHE.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[6.90514,53.482162],[6.074183,53.510403],[4.705997,53.091798],[3.830289,51.620545],[3.315011,51.345777],[3.314971,51.345755],[4.047071,51.267259],[4.973991,51.475024],[5.606976,51.037298],[6.156658,50.803721],[5.988658,51.851616],[6.589397,51.852029],[6.84287,52.22844],[7.092053,53.144043],[6.90514,53.482162]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Netherlands","sov_a3":"NL1","adm0_dif":1,"level":2,"type":"Country","tlc":"1","admin":"Netherlands","adm0_a3":"NLD","geou_dif":0,"geounit":"Netherlands","gu_a3":"NLD","su_dif":0,"subunit":"Netherlands","su_a3":"NLD","brk_diff":0,"name":"Netherlands","name_long":"Netherlands","brk_a3":"NLD","brk_name":"Netherlands","brk_group":null,"abbrev":"Neth.","postal":"NL","formal_en":"Kingdom of the Netherlands","formal_fr":null,"name_ciawf":"Netherlands","note_adm0":null,"note_brk":null,"name_sort":"Netherlands","name_alt":null,"mapcolor7":4,"mapcolor8":2,"mapcolor9":2,"mapcolor13":9,"pop_est":17332850,"pop_rank":14,"pop_year":2019,"gdp_md":907050,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"NL","iso_a2":"NL","iso_a2_eh":"NL","iso_a3":"NLD","iso_a3_eh":"NLD","iso_n3":"528","iso_n3_eh":"528","un_a3":"528","wb_a2":"NL","wb_a3":"NLD","woe_id":-90,"woe_id_eh":23424909,"woe_note":"Doesn't include new former units of Netherlands Antilles (24549811, 24549808, and 24549809)","adm0_iso":"NLD","adm0_diff":null,"adm0_tlc":"NLD","adm0_a3_us":"NLD","adm0_a3_fr":"NLD","adm0_a3_ru":"NLD","adm0_a3_es":"NLD","adm0_a3_cn":"NLD","adm0_a3_tw":"NLD","adm0_a3_in":"NLD","adm0_a3_np":"NLD","adm0_a3_pk":"NLD","adm0_a3_de":"NLD","adm0_a3_gb":"NLD","adm0_a3_br":"NLD","adm0_a3_il":"NLD","adm0_a3_ps":"NLD","adm0_a3_sa":"NLD","adm0_a3_eg":"NLD","adm0_a3_ma":"NLD","adm0_a3_pt":"NLD","adm0_a3_ar":"NLD","adm0_a3_jp":"NLD","adm0_a3_ko":"NLD","adm0_a3_vn":"NLD","adm0_a3_tr":"NLD","adm0_a3_id":"NLD","adm0_a3_pl":"NLD","adm0_a3_gr":"NLD","adm0_a3_it":"NLD","adm0_a3_nl":"NLD","adm0_a3_se":"NLD","adm0_a3_bd":"NLD","adm0_a3_ua":"NLD","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":11,"long_len":11,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":10,"label_x":5.61144,"label_y":52.422211,"ne_id":1159321101,"wikidataid":"Q55","name_ar":"هولندا","name_bn":"নেদারল্যান্ডস","name_de":"Niederlande","name_en":"Netherlands","name_es":"Países Bajos","name_fa":"هلند","name_fr":"Pays-Bas","name_el":"Ολλανδία","name_he":"הולנד","name_hi":"नीदरलैण्ड","name_hu":"Hollandia","name_id":"Belanda","name_it":"Paesi Bassi","name_ja":"オランダ","name_ko":"네덜란드","name_nl":"Nederland","name_pl":"Holandia","name_pt":"Países Baixos","name_ru":"Нидерланды","name_sv":"Nederländerna","name_tr":"Hollanda","name_uk":"Нідерланди","name_ur":"نیدرلینڈز","name_vi":"Hà Lan","name_zh":"荷兰","name_zht":"荷蘭","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"NLD.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[18.829825,45.908872],[19.072769,45.521511],[19.390476,45.236516],[19.005485,44.860234],[19.00548,44.86023],[19.36803,44.863],[19.11761,44.42307],[19.59976,44.03847],[19.454,43.5681],[19.21852,43.52384],[19.48389,43.35229],[19.63,43.21378],[19.95857,43.10604],[20.3398,42.89852],[20.25758,42.81275],[20.49679,42.88469],[20.63508,43.21671],[20.81448,43.27205],[20.95651,43.13094],[21.143395,43.068685],[21.27421,42.90959],[21.43866,42.86255],[21.63302,42.67717],[21.77505,42.6827],[21.66292,42.43922],[21.54332,42.32025],[21.576636,42.245224],[21.91708,42.30364],[22.380526,42.32026],[22.545012,42.461362],[22.436595,42.580321],[22.604801,42.898519],[22.986019,43.211161],[22.500157,43.642814],[22.410446,44.008063],[22.65715,44.234923],[22.474008,44.409228],[22.705726,44.578003],[22.459022,44.702517],[22.145088,44.478422],[21.562023,44.768947],[21.483526,45.18117],[20.874313,45.416375],[20.762175,45.734573],[20.220192,46.127469],[19.596045,46.17173],[18.829838,45.908878],[18.829825,45.908872]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Republic of Serbia","sov_a3":"SRB","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Republic of Serbia","adm0_a3":"SRB","geou_dif":0,"geounit":"Republic of Serbia","gu_a3":"SRB","su_dif":0,"subunit":"Republic of Serbia","su_a3":"SRB","brk_diff":0,"name":"Serbia","name_long":"Serbia","brk_a3":"SRB","brk_name":"Serbia","brk_group":null,"abbrev":"Serb.","postal":"RS","formal_en":"Republic of Serbia","formal_fr":null,"name_ciawf":"Serbia","note_adm0":null,"note_brk":null,"name_sort":"Serbia","name_alt":null,"mapcolor7":3,"mapcolor8":3,"mapcolor9":2,"mapcolor13":10,"pop_est":6944975,"pop_rank":13,"pop_year":2019,"gdp_md":51475,"gdp_year":2019,"economy":"6. Developing region","income_grp":"3. Upper middle income","fips_10":"RI","iso_a2":"RS","iso_a2_eh":"RS","iso_a3":"SRB","iso_a3_eh":"SRB","iso_n3":"688","iso_n3_eh":"688","un_a3":"688","wb_a2":"YF","wb_a3":"SRB","woe_id":-90,"woe_id_eh":20069818,"woe_note":"Expired WOE also contains Kosovo.","adm0_iso":"SRB","adm0_diff":null,"adm0_tlc":"SRB","adm0_a3_us":"SRB","adm0_a3_fr":"SRB","adm0_a3_ru":"SRB","adm0_a3_es":"SRB","adm0_a3_cn":"SRB","adm0_a3_tw":"SRB","adm0_a3_in":"SRB","adm0_a3_np":"SRB","adm0_a3_pk":"SRB","adm0_a3_de":"SRB","adm0_a3_gb":"SRB","adm0_a3_br":"SRB","adm0_a3_il":"SRB","adm0_a3_ps":"SRB","adm0_a3_sa":"SRB","adm0_a3_eg":"SRB","adm0_a3_ma":"SRB","adm0_a3_pt":"SRB","adm0_a3_ar":"SRB","adm0_a3_jp":"SRB","adm0_a3_ko":"SRB","adm0_a3_vn":"SRB","adm0_a3_tr":"SRB","adm0_a3_id":"SRB","adm0_a3_pl":"SRB","adm0_a3_gr":"SRB","adm0_a3_it":"SRB","adm0_a3_nl":"SRB","adm0_a3_se":"SRB","adm0_a3_bd":"SRB","adm0_a3_ua":"SRB","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":7,"label_x":20.787989,"label_y":44.189919,"ne_id":1159321267,"wikidataid":"Q403","name_ar":"صربيا","name_bn":"সার্বিয়া","name_de":"Serbien","name_en":"Serbia","name_es":"Serbia","name_fa":"صربستان","name_fr":"Serbie","name_el":"Σερβία","name_he":"סרביה","name_hi":"सर्बिया","name_hu":"Szerbia","name_id":"Serbia","name_it":"Serbia","name_ja":"セルビア","name_ko":"세르비아","name_nl":"Servië","name_pl":"Serbia","name_pt":"Sérvia","name_ru":"Сербия","name_sv":"Serbien","name_tr":"Sırbistan","name_uk":"Сербія","name_ur":"سربیا","name_vi":"Serbia","name_zh":"塞尔维亚","name_zht":"塞爾維亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"SRB.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[16.564808,46.503751],[15.768733,46.238108],[15.67153,45.834154],[15.323954,45.731783],[15.327675,45.452316],[14.935244,45.471695],[14.595109,45.634941],[14.411968,45.466166],[13.71506,45.500324],[13.679403,45.484149],[13.656976,45.136935],[13.952255,44.802124],[14.258748,45.233777],[14.901602,45.07606],[14.920309,44.738484],[15.37625,44.317915],[15.174454,44.243191],[16.015385,43.507215],[16.930006,43.209998],[17.50997,42.849995],[18.450016,42.479991],[18.450017,42.479992],[18.56,42.65],[17.674922,43.028563],[17.297373,43.446341],[16.916156,43.667722],[16.456443,44.04124],[16.23966,44.351143],[15.750026,44.818712],[15.959367,45.233777],[16.318157,45.004127],[16.534939,45.211608],[17.002146,45.233777],[17.861783,45.06774],[18.553214,45.08159],[19.005485,44.860234],[19.390476,45.236516],[19.072769,45.521511],[18.829825,45.908872],[18.456062,45.759481],[17.630066,45.951769],[16.882515,46.380632],[16.564808,46.503751]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Croatia","sov_a3":"HRV","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Croatia","adm0_a3":"HRV","geou_dif":0,"geounit":"Croatia","gu_a3":"HRV","su_dif":0,"subunit":"Croatia","su_a3":"HRV","brk_diff":0,"name":"Croatia","name_long":"Croatia","brk_a3":"HRV","brk_name":"Croatia","brk_group":null,"abbrev":"Cro.","postal":"HR","formal_en":"Republic of Croatia","formal_fr":null,"name_ciawf":"Croatia","note_adm0":null,"note_brk":null,"name_sort":"Croatia","name_alt":null,"mapcolor7":5,"mapcolor8":4,"mapcolor9":5,"mapcolor13":1,"pop_est":4067500,"pop_rank":12,"pop_year":2019,"gdp_md":60752,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"2. High income: nonOECD","fips_10":"HR","iso_a2":"HR","iso_a2_eh":"HR","iso_a3":"HRV","iso_a3_eh":"HRV","iso_n3":"191","iso_n3_eh":"191","un_a3":"191","wb_a2":"HR","wb_a3":"HRV","woe_id":23424843,"woe_id_eh":23424843,"woe_note":"Exact WOE match as country","adm0_iso":"HRV","adm0_diff":null,"adm0_tlc":"HRV","adm0_a3_us":"HRV","adm0_a3_fr":"HRV","adm0_a3_ru":"HRV","adm0_a3_es":"HRV","adm0_a3_cn":"HRV","adm0_a3_tw":"HRV","adm0_a3_in":"HRV","adm0_a3_np":"HRV","adm0_a3_pk":"HRV","adm0_a3_de":"HRV","adm0_a3_gb":"HRV","adm0_a3_br":"HRV","adm0_a3_il":"HRV","adm0_a3_ps":"HRV","adm0_a3_sa":"HRV","adm0_a3_eg":"HRV","adm0_a3_ma":"HRV","adm0_a3_pt":"HRV","adm0_a3_ar":"HRV","adm0_a3_jp":"HRV","adm0_a3_ko":"HRV","adm0_a3_vn":"HRV","adm0_a3_tr":"HRV","adm0_a3_id":"HRV","adm0_a3_pl":"HRV","adm0_a3_gr":"HRV","adm0_a3_it":"HRV","adm0_a3_nl":"HRV","adm0_a3_se":"HRV","adm0_a3_bd":"HRV","adm0_a3_ua":"HRV","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":16.37241,"label_y":45.805799,"ne_id":1159320833,"wikidataid":"Q224","name_ar":"كرواتيا","name_bn":"ক্রোয়েশিয়া","name_de":"Kroatien","name_en":"Croatia","name_es":"Croacia","name_fa":"کرواسی","name_fr":"Croatie","name_el":"Κροατία","name_he":"קרואטיה","name_hi":"क्रोएशिया","name_hu":"Horvátország","name_id":"Kroasia","name_it":"Croazia","name_ja":"クロアチア","name_ko":"크로아티아","name_nl":"Kroatië","name_pl":"Chorwacja","name_pt":"Croácia","name_ru":"Хорватия","name_sv":"Kroatien","name_tr":"Hırvatistan","name_uk":"Хорватія","name_ur":"کروشیا","name_vi":"Croatia","name_zh":"克罗地亚","name_zht":"克羅地亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"HRV.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[13.806475,46.509306],[13.69811,46.016778],[13.93763,45.591016],[13.71506,45.500324],[14.411968,45.466166],[14.595109,45.634941],[14.935244,45.471695],[15.327675,45.452316],[15.323954,45.731783],[15.67153,45.834154],[15.768733,46.238108],[16.564808,46.503751],[16.370505,46.841327],[16.202298,46.852386],[16.011664,46.683611],[15.137092,46.658703],[14.632472,46.431817],[13.806475,46.509306]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Slovenia","sov_a3":"SVN","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Slovenia","adm0_a3":"SVN","geou_dif":0,"geounit":"Slovenia","gu_a3":"SVN","su_dif":0,"subunit":"Slovenia","su_a3":"SVN","brk_diff":0,"name":"Slovenia","name_long":"Slovenia","brk_a3":"SVN","brk_name":"Slovenia","brk_group":null,"abbrev":"Slo.","postal":"SLO","formal_en":"Republic of Slovenia","formal_fr":null,"name_ciawf":"Slovenia","note_adm0":null,"note_brk":null,"name_sort":"Slovenia","name_alt":null,"mapcolor7":2,"mapcolor8":3,"mapcolor9":2,"mapcolor13":12,"pop_est":2087946,"pop_rank":12,"pop_year":2019,"gdp_md":54174,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"SI","iso_a2":"SI","iso_a2_eh":"SI","iso_a3":"SVN","iso_a3_eh":"SVN","iso_n3":"705","iso_n3_eh":"705","un_a3":"705","wb_a2":"SI","wb_a3":"SVN","woe_id":23424945,"woe_id_eh":23424945,"woe_note":"Exact WOE match as country","adm0_iso":"SVN","adm0_diff":null,"adm0_tlc":"SVN","adm0_a3_us":"SVN","adm0_a3_fr":"SVN","adm0_a3_ru":"SVN","adm0_a3_es":"SVN","adm0_a3_cn":"SVN","adm0_a3_tw":"SVN","adm0_a3_in":"SVN","adm0_a3_np":"SVN","adm0_a3_pk":"SVN","adm0_a3_de":"SVN","adm0_a3_gb":"SVN","adm0_a3_br":"SVN","adm0_a3_il":"SVN","adm0_a3_ps":"SVN","adm0_a3_sa":"SVN","adm0_a3_eg":"SVN","adm0_a3_ma":"SVN","adm0_a3_pt":"SVN","adm0_a3_ar":"SVN","adm0_a3_jp":"SVN","adm0_a3_ko":"SVN","adm0_a3_vn":"SVN","adm0_a3_tr":"SVN","adm0_a3_id":"SVN","adm0_a3_pl":"SVN","adm0_a3_gr":"SVN","adm0_a3_it":"SVN","adm0_a3_nl":"SVN","adm0_a3_se":"SVN","adm0_a3_bd":"SVN","adm0_a3_ua":"SVN","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":8,"long_len":8,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":5,"max_label":10,"label_x":14.915312,"label_y":46.06076,"ne_id":1159321285,"wikidataid":"Q215","name_ar":"سلوفينيا","name_bn":"স্লোভেনিয়া","name_de":"Slowenien","name_en":"Slovenia","name_es":"Eslovenia","name_fa":"اسلوونی","name_fr":"Slovénie","name_el":"Σλοβενία","name_he":"סלובניה","name_hi":"स्लोवेनिया","name_hu":"Szlovénia","name_id":"Slovenia","name_it":"Slovenia","name_ja":"スロベニア","name_ko":"슬로베니아","name_nl":"Slovenië","name_pl":"Słowenia","name_pt":"Eslovénia","name_ru":"Словения","name_sv":"Slovenien","name_tr":"Slovenya","name_uk":"Словенія","name_ur":"سلووینیا","name_vi":"Slovenia","name_zh":"斯洛文尼亚","name_zht":"斯洛維尼亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"SVN.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[22.65715,44.234923],[22.410446,44.008063],[22.500157,43.642814],[22.986019,43.211161],[22.604801,42.898519],[22.436595,42.580321],[22.545012,42.461362],[22.380526,42.32026],[22.881374,41.999297],[22.952377,41.337994],[23.692074,41.309081],[24.492645,41.583896],[25.197201,41.234486],[26.106138,41.328899],[26.117042,41.826905],[27.135739,42.141485],[27.99672,42.007359],[27.673898,42.577892],[28.039095,43.293172],[28.558081,43.707462],[27.970107,43.812468],[27.2424,44.175986],[26.065159,43.943494],[25.569272,43.688445],[24.100679,43.741051],[23.332302,43.897011],[22.944832,43.823785],[22.65715,44.234923]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":4,"sovereignt":"Bulgaria","sov_a3":"BGR","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Bulgaria","adm0_a3":"BGR","geou_dif":0,"geounit":"Bulgaria","gu_a3":"BGR","su_dif":0,"subunit":"Bulgaria","su_a3":"BGR","brk_diff":0,"name":"Bulgaria","name_long":"Bulgaria","brk_a3":"BGR","brk_name":"Bulgaria","brk_group":null,"abbrev":"Bulg.","postal":"BG","formal_en":"Republic of Bulgaria","formal_fr":null,"name_ciawf":"Bulgaria","note_adm0":null,"note_brk":null,"name_sort":"Bulgaria","name_alt":null,"mapcolor7":4,"mapcolor8":5,"mapcolor9":1,"mapcolor13":8,"pop_est":6975761,"pop_rank":13,"pop_year":2019,"gdp_md":68558,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"3. Upper middle income","fips_10":"BU","iso_a2":"BG","iso_a2_eh":"BG","iso_a3":"BGR","iso_a3_eh":"BGR","iso_n3":"100","iso_n3_eh":"100","un_a3":"100","wb_a2":"BG","wb_a3":"BGR","woe_id":23424771,"woe_id_eh":23424771,"woe_note":"Exact WOE match as country","adm0_iso":"BGR","adm0_diff":null,"adm0_tlc":"BGR","adm0_a3_us":"BGR","adm0_a3_fr":"BGR","adm0_a3_ru":"BGR","adm0_a3_es":"BGR","adm0_a3_cn":"BGR","adm0_a3_tw":"BGR","adm0_a3_in":"BGR","adm0_a3_np":"BGR","adm0_a3_pk":"BGR","adm0_a3_de":"BGR","adm0_a3_gb":"BGR","adm0_a3_br":"BGR","adm0_a3_il":"BGR","adm0_a3_ps":"BGR","adm0_a3_sa":"BGR","adm0_a3_eg":"BGR","adm0_a3_ma":"BGR","adm0_a3_pt":"BGR","adm0_a3_ar":"BGR","adm0_a3_jp":"BGR","adm0_a3_ko":"BGR","adm0_a3_vn":"BGR","adm0_a3_tr":"BGR","adm0_a3_id":"BGR","adm0_a3_pl":"BGR","adm0_a3_gr":"BGR","adm0_a3_it":"BGR","adm0_a3_nl":"BGR","adm0_a3_se":"BGR","adm0_a3_bd":"BGR","adm0_a3_ua":"BGR","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":8,"long_len":8,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":25.15709,"label_y":42.508785,"ne_id":1159320409,"wikidataid":"Q219","name_ar":"بلغاريا","name_bn":"বুলগেরিয়া","name_de":"Bulgarien","name_en":"Bulgaria","name_es":"Bulgaria","name_fa":"بلغارستان","name_fr":"Bulgarie","name_el":"Βουλγαρία","name_he":"בולגריה","name_hi":"बुल्गारिया","name_hu":"Bulgária","name_id":"Bulgaria","name_it":"Bulgaria","name_ja":"ブルガリア","name_ko":"불가리아","name_nl":"Bulgarije","name_pl":"Bułgaria","name_pt":"Bulgária","name_ru":"Болгария","name_sv":"Bulgarien","name_tr":"Bulgaristan","name_uk":"Болгарія","name_ur":"بلغاریہ","name_vi":"Bulgaria","name_zh":"保加利亚","name_zht":"保加利亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"BGR.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[20.0707,42.58863],[20.25758,42.81275],[20.3398,42.89852],[19.95857,43.10604],[19.63,43.21378],[19.48389,43.35229],[19.21852,43.52384],[19.03165,43.43253],[18.70648,43.20011],[18.56,42.65],[18.450017,42.479992],[18.88214,42.28151],[19.16246,41.95502],[19.371768,41.877551],[19.304486,42.195745],[19.738051,42.688247],[19.801613,42.500093],[20.0707,42.58863]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Montenegro","sov_a3":"MNE","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Montenegro","adm0_a3":"MNE","geou_dif":0,"geounit":"Montenegro","gu_a3":"MNE","su_dif":0,"subunit":"Montenegro","su_a3":"MNE","brk_diff":0,"name":"Montenegro","name_long":"Montenegro","brk_a3":"MNE","brk_name":"Montenegro","brk_group":null,"abbrev":"Mont.","postal":"ME","formal_en":"Montenegro","formal_fr":null,"name_ciawf":"Montenegro","note_adm0":null,"note_brk":null,"name_sort":"Montenegro","name_alt":null,"mapcolor7":4,"mapcolor8":1,"mapcolor9":4,"mapcolor13":5,"pop_est":622137,"pop_rank":11,"pop_year":2019,"gdp_md":5542,"gdp_year":2019,"economy":"6. Developing region","income_grp":"3. Upper middle income","fips_10":"MJ","iso_a2":"ME","iso_a2_eh":"ME","iso_a3":"MNE","iso_a3_eh":"MNE","iso_n3":"499","iso_n3_eh":"499","un_a3":"499","wb_a2":"ME","wb_a3":"MNE","woe_id":20069817,"woe_id_eh":20069817,"woe_note":"Exact WOE match as country","adm0_iso":"MNE","adm0_diff":null,"adm0_tlc":"MNE","adm0_a3_us":"MNE","adm0_a3_fr":"MNE","adm0_a3_ru":"MNE","adm0_a3_es":"MNE","adm0_a3_cn":"MNE","adm0_a3_tw":"MNE","adm0_a3_in":"MNE","adm0_a3_np":"MNE","adm0_a3_pk":"MNE","adm0_a3_de":"MNE","adm0_a3_gb":"MNE","adm0_a3_br":"MNE","adm0_a3_il":"MNE","adm0_a3_ps":"MNE","adm0_a3_sa":"MNE","adm0_a3_eg":"MNE","adm0_a3_ma":"MNE","adm0_a3_pt":"MNE","adm0_a3_ar":"MNE","adm0_a3_jp":"MNE","adm0_a3_ko":"MNE","adm0_a3_vn":"MNE","adm0_a3_tr":"MNE","adm0_a3_id":"MNE","adm0_a3_pl":"MNE","adm0_a3_gr":"MNE","adm0_a3_it":"MNE","adm0_a3_nl":"MNE","adm0_a3_se":"MNE","adm0_a3_bd":"MNE","adm0_a3_ua":"MNE","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":10,"long_len":10,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":5,"max_label":10,"label_x":19.143727,"label_y":42.803101,"ne_id":1159321069,"wikidataid":"Q236","name_ar":"الجبل الأسود","name_bn":"মন্টিনিগ্রো","name_de":"Montenegro","name_en":"Montenegro","name_es":"Montenegro","name_fa":"مونتهنگرو","name_fr":"Monténégro","name_el":"Μαυροβούνιο","name_he":"מונטנגרו","name_hi":"मॉन्टेनीग्रो","name_hu":"Montenegró","name_id":"Montenegro","name_it":"Montenegro","name_ja":"モンテネグロ","name_ko":"몬테네그로","name_nl":"Montenegro","name_pl":"Czarnogóra","name_pt":"Montenegro","name_ru":"Черногория","name_sv":"Montenegro","name_tr":"Karadağ","name_uk":"Чорногорія","name_ur":"مونٹینیگرو","name_vi":"Montenegro","name_zh":"黑山","name_zht":"蒙特內哥羅","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"MNE.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-9.034818,41.880571],[-8.990789,41.543459],[-8.790853,41.184334],[-8.768684,40.760639],[-8.977353,40.159306],[-9.048305,39.755093],[-9.446989,39.392066],[-9.526571,38.737429],[-9.287464,38.358486],[-8.839998,38.266243],[-8.746101,37.651346],[-8.898857,36.868809],[-8.382816,36.97888],[-7.855613,36.838269],[-7.453726,37.097788],[-7.537105,37.428904],[-7.166508,37.803894],[-7.029281,38.075764],[-7.374092,38.373059],[-7.098037,39.030073],[-7.498632,39.629571],[-7.066592,39.711892],[-7.026413,40.184524],[-6.86402,40.330872],[-6.851127,41.111083],[-6.389088,41.381815],[-6.668606,41.883387],[-7.251309,41.918346],[-7.422513,41.792075],[-8.013175,41.790886],[-8.263857,42.280469],[-8.671946,42.134689],[-9.034818,41.880571]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"Portugal","sov_a3":"PRT","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Portugal","adm0_a3":"PRT","geou_dif":0,"geounit":"Portugal","gu_a3":"PRT","su_dif":1,"subunit":"Portugal","su_a3":"PR1","brk_diff":0,"name":"Portugal","name_long":"Portugal","brk_a3":"PR1","brk_name":"Portugal","brk_group":null,"abbrev":"Port.","postal":"P","formal_en":"Portuguese Republic","formal_fr":null,"name_ciawf":"Portugal","note_adm0":null,"note_brk":null,"name_sort":"Portugal","name_alt":null,"mapcolor7":1,"mapcolor8":7,"mapcolor9":1,"mapcolor13":4,"pop_est":10269417,"pop_rank":14,"pop_year":2019,"gdp_md":238785,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"PO","iso_a2":"PT","iso_a2_eh":"PT","iso_a3":"PRT","iso_a3_eh":"PRT","iso_n3":"620","iso_n3_eh":"620","un_a3":"620","wb_a2":"PT","wb_a3":"PRT","woe_id":23424925,"woe_id_eh":23424925,"woe_note":"Exact WOE match as country","adm0_iso":"PR1","adm0_diff":null,"adm0_tlc":"PR1","adm0_a3_us":"PRT","adm0_a3_fr":"PRT","adm0_a3_ru":"PRT","adm0_a3_es":"PRT","adm0_a3_cn":"PRT","adm0_a3_tw":"PRT","adm0_a3_in":"PRT","adm0_a3_np":"PRT","adm0_a3_pk":"PRT","adm0_a3_de":"PRT","adm0_a3_gb":"PRT","adm0_a3_br":"PRT","adm0_a3_il":"PRT","adm0_a3_ps":"PRT","adm0_a3_sa":"PRT","adm0_a3_eg":"PRT","adm0_a3_ma":"PRT","adm0_a3_pt":"PRT","adm0_a3_ar":"PRT","adm0_a3_jp":"PRT","adm0_a3_ko":"PRT","adm0_a3_vn":"PRT","adm0_a3_tr":"PRT","adm0_a3_id":"PRT","adm0_a3_pl":"PRT","adm0_a3_gr":"PRT","adm0_a3_it":"PRT","adm0_a3_nl":"PRT","adm0_a3_se":"PRT","adm0_a3_bd":"PRT","adm0_a3_ua":"PRT","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":8,"long_len":8,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":-8.271754,"label_y":39.606675,"ne_id":1159321187,"wikidataid":"Q45","name_ar":"البرتغال","name_bn":"পর্তুগাল","name_de":"Portugal","name_en":"Portugal","name_es":"Portugal","name_fa":"پرتغال","name_fr":"Portugal","name_el":"Πορτογαλία","name_he":"פורטוגל","name_hi":"पुर्तगाल","name_hu":"Portugália","name_id":"Portugal","name_it":"Portogallo","name_ja":"ポルトガル","name_ko":"포르투갈","name_nl":"Portugal","name_pl":"Portugalia","name_pt":"Portugal","name_ru":"Португалия","name_sv":"Portugal","name_tr":"Portekiz","name_uk":"Португалія","name_ur":"پرتگال","name_vi":"Bồ Đào Nha","name_zh":"葡萄牙","name_zht":"葡萄牙","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"PRT.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.619337,48.220726],[26.924176,48.123264],[27.233873,47.826771],[27.551166,47.405117],[28.12803,46.810476],[28.160018,46.371563],[28.054443,45.944586],[28.233554,45.488283],[28.485269,45.596907],[28.659987,45.939987],[28.933717,46.25883],[28.862972,46.437889],[29.072107,46.517678],[29.170654,46.379262],[29.759972,46.349988],[30.024659,46.423937],[29.83821,46.525326],[29.908852,46.674361],[29.559674,46.928583],[29.415135,47.346645],[29.050868,47.510227],[29.122698,47.849095],[28.670891,48.118149],[28.259547,48.155562],[27.522537,48.467119],[26.857824,48.368211],[26.619337,48.220726]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Moldova","sov_a3":"MDA","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Moldova","adm0_a3":"MDA","geou_dif":0,"geounit":"Moldova","gu_a3":"MDA","su_dif":0,"subunit":"Moldova","su_a3":"MDA","brk_diff":0,"name":"Moldova","name_long":"Moldova","brk_a3":"MDA","brk_name":"Moldova","brk_group":null,"abbrev":"Mda.","postal":"MD","formal_en":"Republic of Moldova","formal_fr":null,"name_ciawf":"Moldova","note_adm0":null,"note_brk":null,"name_sort":"Moldova","name_alt":null,"mapcolor7":3,"mapcolor8":5,"mapcolor9":4,"mapcolor13":12,"pop_est":2657637,"pop_rank":12,"pop_year":2019,"gdp_md":11968,"gdp_year":2019,"economy":"6. Developing region","income_grp":"4. Lower middle income","fips_10":"MD","iso_a2":"MD","iso_a2_eh":"MD","iso_a3":"MDA","iso_a3_eh":"MDA","iso_n3":"498","iso_n3_eh":"498","un_a3":"498","wb_a2":"MD","wb_a3":"MDA","woe_id":23424885,"woe_id_eh":23424885,"woe_note":"Exact WOE match as country","adm0_iso":"MDA","adm0_diff":null,"adm0_tlc":"MDA","adm0_a3_us":"MDA","adm0_a3_fr":"MDA","adm0_a3_ru":"MDA","adm0_a3_es":"MDA","adm0_a3_cn":"MDA","adm0_a3_tw":"MDA","adm0_a3_in":"MDA","adm0_a3_np":"MDA","adm0_a3_pk":"MDA","adm0_a3_de":"MDA","adm0_a3_gb":"MDA","adm0_a3_br":"MDA","adm0_a3_il":"MDA","adm0_a3_ps":"MDA","adm0_a3_sa":"MDA","adm0_a3_eg":"MDA","adm0_a3_ma":"MDA","adm0_a3_pt":"MDA","adm0_a3_ar":"MDA","adm0_a3_jp":"MDA","adm0_a3_ko":"MDA","adm0_a3_vn":"MDA","adm0_a3_tr":"MDA","adm0_a3_id":"MDA","adm0_a3_pl":"MDA","adm0_a3_gr":"MDA","adm0_a3_it":"MDA","adm0_a3_nl":"MDA","adm0_a3_se":"MDA","adm0_a3_bd":"MDA","adm0_a3_ua":"MDA","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":5,"max_label":10,"label_x":28.487904,"label_y":47.434999,"ne_id":1159321045,"wikidataid":"Q217","name_ar":"مولدوفا","name_bn":"মলদোভা","name_de":"Republik Moldau","name_en":"Moldova","name_es":"Moldavia","name_fa":"مولداوی","name_fr":"Moldavie","name_el":"Μολδαβία","name_he":"מולדובה","name_hi":"मॉल्डोवा","name_hu":"Moldova","name_id":"Moldova","name_it":"Moldavia","name_ja":"モルドバ","name_ko":"몰도바","name_nl":"Moldavië","name_pl":"Mołdawia","name_pt":"Moldávia","name_ru":"Молдавия","name_sv":"Moldavien","name_tr":"Moldova","name_uk":"Молдова","name_ur":"مالدووا","name_vi":"Moldova","name_zh":"摩尔多瓦","name_zht":"摩爾多瓦","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"MDA.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-14.508695,66.455892],[-16.167819,66.526792],[-17.798624,65.993853],[-19.056842,66.276601],[-20.576284,65.732112],[-22.134922,66.410469],[-23.650515,66.262519],[-24.326184,65.611189],[-22.227423,65.378594],[-22.184403,65.084968],[-23.955044,64.89113],[-21.778484,64.402116],[-22.762972,63.960179],[-19.972755,63.643635],[-18.656246,63.496383],[-17.794438,63.678749],[-14.909834,64.364082],[-13.609732,65.126671],[-14.739637,65.808748],[-14.508695,66.455892]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Iceland","sov_a3":"ISL","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Iceland","adm0_a3":"ISL","geou_dif":0,"geounit":"Iceland","gu_a3":"ISL","su_dif":0,"subunit":"Iceland","su_a3":"ISL","brk_diff":0,"name":"Iceland","name_long":"Iceland","brk_a3":"ISL","brk_name":"Iceland","brk_group":null,"abbrev":"Iceland","postal":"IS","formal_en":"Republic of Iceland","formal_fr":null,"name_ciawf":"Iceland","note_adm0":null,"note_brk":null,"name_sort":"Iceland","name_alt":null,"mapcolor7":1,"mapcolor8":4,"mapcolor9":4,"mapcolor13":9,"pop_est":361313,"pop_rank":10,"pop_year":2019,"gdp_md":24188,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"IC","iso_a2":"IS","iso_a2_eh":"IS","iso_a3":"ISL","iso_a3_eh":"ISL","iso_n3":"352","iso_n3_eh":"352","un_a3":"352","wb_a2":"IS","wb_a3":"ISL","woe_id":23424845,"woe_id_eh":23424845,"woe_note":"Exact WOE match as country","adm0_iso":"ISL","adm0_diff":null,"adm0_tlc":"ISL","adm0_a3_us":"ISL","adm0_a3_fr":"ISL","adm0_a3_ru":"ISL","adm0_a3_es":"ISL","adm0_a3_cn":"ISL","adm0_a3_tw":"ISL","adm0_a3_in":"ISL","adm0_a3_np":"ISL","adm0_a3_pk":"ISL","adm0_a3_de":"ISL","adm0_a3_gb":"ISL","adm0_a3_br":"ISL","adm0_a3_il":"ISL","adm0_a3_ps":"ISL","adm0_a3_sa":"ISL","adm0_a3_eg":"ISL","adm0_a3_ma":"ISL","adm0_a3_pt":"ISL","adm0_a3_ar":"ISL","adm0_a3_jp":"ISL","adm0_a3_ko":"ISL","adm0_a3_vn":"ISL","adm0_a3_tr":"ISL","adm0_a3_id":"ISL","adm0_a3_pl":"ISL","adm0_a3_gr":"ISL","adm0_a3_it":"ISL","adm0_a3_nl":"ISL","adm0_a3_se":"ISL","adm0_a3_bd":"ISL","adm0_a3_ua":"ISL","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":7,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2,"max_label":7,"label_x":-18.673711,"label_y":64.779286,"ne_id":1159320917,"wikidataid":"Q189","name_ar":"آيسلندا","name_bn":"আইসল্যান্ড","name_de":"Island","name_en":"Iceland","name_es":"Islandia","name_fa":"ایسلند","name_fr":"Islande","name_el":"Ισλανδία","name_he":"איסלנד","name_hi":"आइसलैण्ड","name_hu":"Izland","name_id":"Islandia","name_it":"Islanda","name_ja":"アイスランド","name_ko":"아이슬란드","name_nl":"IJsland","name_pl":"Islandia","name_pt":"Islândia","name_ru":"Исландия","name_sv":"Island","name_tr":"İzlanda","name_uk":"Ісландія","name_ur":"آئس لینڈ","name_vi":"Iceland","name_zh":"冰岛","name_zht":"冰島","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"ISL.geojson"}}]`),Bs={features:Od};let Gs=!0;const P=Us({isEnabled:!1,isDialogEnabled:!1,isLoaded:!1,mode:"start",game:null,timer:null,bbox:[],minesweeperOptions:{enableSpeciesDisplay:!0,size:20,geotiff:{projection:"EPSG:4326",url:"https://eox-ideas.s3.eu-central-1.amazonaws.com/indicator2/AR3_wildlife_1.tif"},minColor:{r:0,g:100,b:0,a:.6},maxColor:{r:0,g:255,b:0,a:.6},minValue:1,maxValue:8,locations:[{name:"Global Coverage",bbox:[-24,33,42,71],horizontalExtent:5,isMineCondition:a=>a>=3.5}]},elapsedSeconds:0});async function Za(a){if(!a)return;P.minesweeperOptions=a,document.addEventListener("minesweeper:start",Gr),document.addEventListener("minesweeper:continue",Br),document.addEventListener("minesweeper:win",Pr),document.addEventListener("minesweeper:gameover",Fr),document.addEventListener("minesweeper:restart",Or);const e=Nr();let t=new Date;Gs||(t=new Date($a.states.datetime.value));let n=t.toDateString();const i=P.minesweeperOptions.locations[0],s=Ps(i.bbox,i.horizontalExtent,n);P.bbox=s;let l=(await Ns(s,Bs)).length>0;for(;!l;){n+="0";const _=Ps(i.bbox,i.horizontalExtent,n);(await Ns(_,Bs)).length>0&&(l=!0,P.bbox=_)}P.game=new Dd(e,{...P.minesweeperOptions,bbox:P.bbox}),P.isEnabled=!0,P.isDialogEnabled=!0;const o=cl(P.bbox,"EPSG:4326",e.getView().getProjection());e.getView().fit(o,{duration:500}),Gs=!1}function qa(){var a;(a=P.game)!=null&&a.vectorLayer&&Nr().getLayers().getArray().find(n=>n.get("id")==="AnalysisGroup").getLayers().remove(ll(P.game.vectorLayer)),P.game&&P.game.removeEventListeners(),P.game=null,P.isEnabled=!1,P.isDialogEnabled=!1,document.removeEventListener("minesweeper:start",Gr),document.removeEventListener("minesweeper:continue",Br),document.removeEventListener("minesweeper:win",Pr),document.removeEventListener("minesweeper:gameover",Fr),document.removeEventListener("minesweeper:restart",Or)}async function Or(){if(console.log("Minesweeper::Restart"),await qa(),P.mode="start",!P.minesweeperOptions){console.error("Minesweeper options are not set");return}await Za(P.minesweeperOptions)}async function Pr(){P.timer&&(clearInterval(P.timer),P.mode="win",P.isDialogEnabled=!0)}function Fr(){P.timer&&(clearInterval(P.timer),P.mode="gameover",P.isDialogEnabled=!0)}function Nr(){var a;return(a=$a.states.mapEl.value)==null?void 0:a.map}function Br(){var a;(a=P.game)!=null&&a.isGameCompleted&&document.dispatchEvent(new Event("minesweeper:win"))}function Gr(){P.elapsedSeconds=0,console.info("Minesweeper::StartTimer"),P.timer=setInterval(()=>{P.elapsedSeconds+=1},1e3)}const Pd=".btn-open[data-v-cb6bf022]{border-radius:4px 4px 0 0!important}",Fd={class:"d-flex flex-column align-strech fill-height fill-width"},Nd={__name:"index",props:{minesweeperOptions:{type:Object,required:!0}},setup(a){setTimeout(()=>{Za(a.minesweeperOptions)},1e3);const e=Qr(()=>P.game?P.game.mineCount-P.game.flagCount:0);return el([()=>a.minesweeperOptions,()=>$a.states.datetime.value],async()=>{qa(),setTimeout(()=>{Za(a.minesweeperOptions)},1e3)}),tl(()=>{qa()}),(t,n)=>{var i;return al(),nl("span",Fd,[Di(_l,{color:"primary",height:"50%",class:"btn-open"},{default:il(()=>[sl(rl(e.value)+" 💣 remaining",1)]),_:1}),Di(Wl,{mode:st(P).mode,game:st(P).game,elapsedSeconds:st(P).elapsedSeconds,"is-enabled":st(P).isDialogEnabled,bbox:st(P).bbox,enableSpeciesDisplay:(i=st(P).minesweeperOptions)==null?void 0:i.enableSpeciesDisplay,onClose:n[0]||(n[0]=s=>st(P).isDialogEnabled=!1)},null,8,["mode","game","elapsedSeconds","is-enabled","bbox","enableSpeciesDisplay"])])}}},Bd=ol(Nd,[["styles",[Pd]],["__scopeId","data-v-cb6bf022"]]),ih=Object.freeze(Object.defineProperty({__proto__:null,default:Bd},Symbol.toStringTag,{value:"Module"}));export{eh as L,th as a,Ar as g,ih as i};
