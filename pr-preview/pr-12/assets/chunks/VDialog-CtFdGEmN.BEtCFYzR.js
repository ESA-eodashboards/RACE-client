import{r as F,Y as S,m as P,K as E,D as p,T as V,P as $}from"./framework.CY4kwWiL.js";import{V as b,m as C}from"./VOverlay-BQS8ZXPD.XedY0Ygs.js";import{u as O,f as I,b as y,e as R,s as A,h as W,g as q,n as M}from"./forwardRefs-Cq1T1PGt.DoTGMbGR.js";import{t as L,v as T,w as k,I as H,x as Y,b1 as N,a_ as U}from"./eo-dash.DJZ__uOH.js";const X=T({target:[Object,Array]},"v-dialog-transition"),w=new WeakMap,j=L()({name:"VDialogTransition",props:X(),setup(e,d){let{slots:a}=d;const l={onBeforeEnter(t){t.style.pointerEvents="none",t.style.visibility="hidden"},async onEnter(t,v){var r;await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),t.style.visibility="";const n=B(e.target,t),{x:c,y:m,sx:g,sy:o,speed:s}=n;w.set(t,n);const f=y(t,[{transform:`translate(${c}px, ${m}px) scale(${g}, ${o})`,opacity:0},{}],{duration:225*s,easing:W});(r=D(t))==null||r.forEach(i=>{y(i,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*s,easing:A})}),f.finished.then(()=>v())},onAfterEnter(t){t.style.removeProperty("pointer-events")},onBeforeLeave(t){t.style.pointerEvents="none"},async onLeave(t,v){var r;await new Promise(i=>requestAnimationFrame(i));let n;!w.has(t)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?n=B(e.target,t):n=w.get(t);const{x:c,y:m,sx:g,sy:o,speed:s}=n;y(t,[{},{transform:`translate(${c}px, ${m}px) scale(${g}, ${o})`,opacity:0}],{duration:125*s,easing:R}).finished.then(()=>v()),(r=D(t))==null||r.forEach(i=>{y(i,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*s,easing:A})})},onAfterLeave(t){t.style.removeProperty("pointer-events")}};return()=>e.target?p(V,E({name:"dialog-transition"},l,{css:!1}),a):p(V,{name:"dialog-transition"},a)}});function D(e){var a;const d=(a=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:a.children;return d&&[...d]}function B(e,d){const a=q(e),l=M(d),[t,v]=getComputedStyle(d).transformOrigin.split(" ").map(x=>parseFloat(x)),[n,c]=getComputedStyle(d).getPropertyValue("--v-overlay-anchor-origin").split(" ");let m=a.left+a.width/2;n==="left"||c==="left"?m-=a.width/2:(n==="right"||c==="right")&&(m+=a.width/2);let g=a.top+a.height/2;n==="top"||c==="top"?g-=a.height/2:(n==="bottom"||c==="bottom")&&(g+=a.height/2);const o=a.width/l.width,s=a.height/l.height,f=Math.max(1,o,s),r=o/f||0,i=s/f||0,u=l.width*l.height/(window.innerWidth*window.innerHeight),h=u>.12?Math.min(1.5,(u-.12)*10+1):1;return{x:m-(t+l.left),y:g-(v+l.top),sx:r,sy:i,speed:h}}const z=T({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...C({origin:"center center",scrollStrategy:"block",transition:{component:j},zIndex:2400})},"VDialog"),Z=L()({name:"VDialog",props:z(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,d){let{emit:a,slots:l}=d;const t=k(e,"modelValue"),{scopeId:v}=O(),n=F();function c(o){var r,i;const s=o.relatedTarget,f=o.target;if(s!==f&&((r=n.value)!=null&&r.contentEl)&&((i=n.value)!=null&&i.globalTop)&&![document,n.value.contentEl].includes(f)&&!n.value.contentEl.contains(f)){const u=N(n.value.contentEl);if(!u.length)return;const h=u[0],x=u[u.length-1];s===h?x.focus():h.focus()}}S(()=>{document.removeEventListener("focusin",c)}),H&&P(()=>t.value&&e.retainFocus,o=>{o?document.addEventListener("focusin",c):document.removeEventListener("focusin",c)},{immediate:!0});function m(){var o;a("afterEnter"),(e.scrim||e.retainFocus)&&((o=n.value)!=null&&o.contentEl)&&!n.value.contentEl.contains(document.activeElement)&&n.value.contentEl.focus({preventScroll:!0})}function g(){a("afterLeave")}return P(t,async o=>{var s;o||(await $(),(s=n.value.activatorEl)==null||s.focus({preventScroll:!0}))}),Y(()=>{const o=b.filterProps(e),s=E({"aria-haspopup":"dialog"},e.activatorProps),f=E({tabindex:-1},e.contentProps);return p(b,E({ref:n,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},o,{modelValue:t.value,"onUpdate:modelValue":r=>t.value=r,"aria-modal":"true",activatorProps:s,contentProps:f,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:m,onAfterLeave:g},v),{activator:l.activator,default:function(){for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return p(U,{root:"VDialog"},{default:()=>{var h;return[(h=l.default)==null?void 0:h.call(l,...i)]}})}})}),I({},n)}});export{Z as V};
