const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/raw-Ctlamky6.lG6ojroe.js","assets/chunks/basedecoder-DZxXIv4c.B2c5_Eok.js","assets/chunks/lzw-D2MxT2zA.DmRYnG5C.js","assets/chunks/jpeg-CsvjaiEQ.A0lbw6YY.js","assets/chunks/deflate-BsBbGVWD.DOOJQnHL.js","assets/chunks/pako.esm-KbdoS3Oq.BkaqWuDM.js","assets/chunks/packbits-DJxVZ9kH.CBEwDSj4.js","assets/chunks/lerc-BKFW7LYp.UiK6cdDo.js","assets/chunks/framework.CY4kwWiL.js","assets/chunks/eo-dash.DJZ__uOH.js","assets/chunks/item.CC2Khh23.js","assets/chunks/commonjsHelpers.BosuxZz1.js","assets/chunks/MinesweeperDialog-DRl3KpXL.aUS85fZO.js","assets/chunks/SpeciesList-Bxye0Keg.Ce2mJHe2.js","assets/chunks/VDialog-CtFdGEmN.BEtCFYzR.js","assets/chunks/VOverlay-BQS8ZXPD.XedY0Ygs.js","assets/chunks/forwardRefs-Cq1T1PGt.DoTGMbGR.js","assets/chunks/transition-D6D2BhjW.CIzV-Suo.js","assets/chunks/VCard-Ba8MiCez.jMLO_6nG.js","assets/chunks/VImg-DZru-pX4.BCiWjHIL.js","assets/chunks/easing-CH0-9wR8.CTB3jml5.js","assets/chunks/webimage-Bg_w2qlD.C0wZFOAS.js"])))=>i.map(i=>d[i]);
var fh=Object.defineProperty;var dh=(n,t,e)=>t in n?fh(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var or=(n,t,e)=>dh(n,typeof t!="symbol"?t+"":t,e);import{f as mh,ak as Do,m as gh,q as ph,a as yh,o as bh,D as lr,w as xh,I as vh,h as Mh,j as Te,au as wh,a1 as je}from"./framework.CY4kwWiL.js";import{_ as Eh,V as Sh,bg as Rh,bf as bs,bh as No,bi as gt,bj as ot,bk as We,bl as Kn,bm as he,bn as Ih,bo as Wn,bp as na,bq as Ah,br as Ch,bs as Dn,bt as Po,bu as Fo,bv as Bo,bw as yn,bx as Lh,by as kh,bz as ts,bA as xs,bB as ti,bC as le,bD as ga,bE as Nn,bF as $t,bG as vs,bH as Th,bI as Oh,bJ as pa,bK as Go,bL as Be,bM as Dh,bN as Nh,bO as Ph,bP as Fh,bQ as Bh,bR as It,bS as aa,bT as Gh,bU as Uh,bV as qn,bW as it,bX as zh,bY as Xn,bZ as Vh,b_ as ct,b$ as Ms,c0 as me,c1 as hr,c2 as jh,c3 as Hh,c4 as cr,c5 as Kh,c6 as Uo,c7 as Wh,c8 as _r,c9 as ur,ca as es,cb as qh,cc as zo,cd as Xh,ce as $h,cf as ns,cg as Yh,ch as Zh,ci as La,cj as fr,ck as dr,cl as Jh,cm as Qh,cn as tc,co as ec,cp as nc,cq as Xt,cr as ac,cs as ic,ct as sc,cu as rc,cv as oc}from"./eo-dash.DJZ__uOH.js";import{M as lc,g as hc}from"./MinesweeperDialog-DRl3KpXL.aUS85fZO.js";import{i as cc,e as _c}from"./easing-CH0-9wR8.CTB3jml5.js";import"./item.CC2Khh23.js";import"./commonjsHelpers.BosuxZz1.js";import"./SpeciesList-Bxye0Keg.Ce2mJHe2.js";import"./VDialog-CtFdGEmN.BEtCFYzR.js";import"./VOverlay-BQS8ZXPD.XedY0Ygs.js";import"./forwardRefs-Cq1T1PGt.DoTGMbGR.js";import"./transition-D6D2BhjW.CIzV-Suo.js";import"./VCard-Ba8MiCez.jMLO_6nG.js";import"./VImg-DZru-pX4.BCiWjHIL.js";const en={ADD:"add",REMOVE:"remove"},mr={LENGTH:"length"};class ka extends xs{constructor(t,e,a){super(t),this.element=e,this.index=a}}class uc extends yn{constructor(t,e){if(super(),e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let a=0,i=this.array_.length;a<i;++a)this.assertUnique_(this.array_[a],a);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,a=t.length;e<a;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let a=0,i=e.length;a<i;++a)t(e[a],a,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(mr.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new ka(en.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let a=0,i=e.length;a<i;++a)if(e[a]===t)return this.removeAt(a)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new ka(en.REMOVE,e,t)),e}setAt(t,e){const a=this.getLength();if(t>=a){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new ka(en.REMOVE,i,t)),this.dispatchEvent(new ka(en.ADD,e,t))}updateLength_(){this.set(mr.LENGTH,this.array_.length)}assertUnique_(t,e){for(let a=0,i=this.array_.length;a<i;++a)if(this.array_[a]===t&&a!==e)throw new Error("Duplicate item added to a unique collection")}}const De={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose"},Ge=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",fc=Ge.includes("safari")&&!Ge.includes("chrom");fc&&(Ge.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Ge));Ge.includes("webkit")&&Ge.includes("edge");Ge.includes("macintosh");const ws=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,dc=typeof Image<"u"&&Image.prototype.decode;(function(){let n=!1;try{const t=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return n})();const j={IDLE:0,LOADING:1,LOADED:2,ERROR:3};function yt(n,t,e,a){let i;return e&&e.length?i=e.shift():ws?i=new OffscreenCanvas(n||300,t||300):i=document.createElement("canvas"),n&&(i.width=n),t&&(i.height=t),i.getContext("2d",a)}let ki;function ei(){return ki||(ki=yt(1,1)),ki}function mc(n){const t=n.canvas;t.width=1,t.height=1,n.clearRect(0,0,1,1)}const Es=[NaN,NaN,NaN,0];let Ti;function gc(){return Ti||(Ti=yt(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),Ti}const pc=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,yc=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,bc=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,xc=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Ta(n,t){return n.endsWith("%")?Number(n.substring(0,n.length-1))/t:Number(n)}function $n(n){throw new Error('failed to parse "'+n+'" as color')}function Vo(n){if(n.toLowerCase().startsWith("rgb")){const s=n.match(yc)||n.match(pc)||n.match(bc);if(s){const r=s[4],o=100/255;return[it(Ta(s[1],o)+.5|0,0,255),it(Ta(s[2],o)+.5|0,0,255),it(Ta(s[3],o)+.5|0,0,255),r!==void 0?it(Ta(r,100),0,1):1]}$n(n)}if(n.startsWith("#")){if(xc.test(n)){const s=n.substring(1),r=s.length<=4?1:2,o=[0,0,0,255];for(let l=0,h=s.length;l<h;l+=r){let c=parseInt(s.substring(l,l+r),16);r===1&&(c+=c<<4),o[l/r]=c}return o[3]=o[3]/255,o}$n(n)}const t=gc();t.fillStyle="#abcdef";let e=t.fillStyle;t.fillStyle=n,t.fillStyle===e&&(t.fillStyle="#fedcba",e=t.fillStyle,t.fillStyle=n,t.fillStyle===e&&$n(n));const a=t.fillStyle;if(a.startsWith("#")||a.startsWith("rgba"))return Vo(a);t.clearRect(0,0,1,1),t.fillRect(0,0,1,1);const i=Array.from(t.getImageData(0,0,1,1).data);return i[3]=zo(i[3]/255,3),i}function vc(n){return typeof n=="string"?n:Rs(n)}const Mc=1024,An={};let Oi=0;function wc(n){if(n.length===4)return n;const t=n.slice();return t[3]=1,t}function Di(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function Ni(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function Pi(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function Fi(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function gr(n){const t=Pi(n[0]),e=Pi(n[1]),a=Pi(n[2]),i=Fi(t*.222488403+e*.716873169+a*.06060791),s=500*(Fi(t*.452247074+e*.399439023+a*.148375274)-i),r=200*(i-Fi(t*.016863605+e*.117638439+a*.865350722)),o=Math.atan2(r,s)*(180/Math.PI);return[116*i-16,Math.sqrt(s*s+r*r),o<0?o+360:o,n[3]]}function Ec(n){const t=(n[0]+16)/116,e=n[1],a=n[2]*Math.PI/180,i=Ni(t),s=Ni(t+e/500*Math.cos(a)),r=Ni(t-e/200*Math.sin(a)),o=Di(s*3.021973625-i*1.617392459-r*.404875592),l=Di(s*-.943766287+i*1.916279586+r*.027607165),h=Di(s*.069407491-i*.22898585+r*1.159737864);return[it(o+.5|0,0,255),it(l+.5|0,0,255),it(h+.5|0,0,255),n[3]]}function Ss(n){if(n==="none")return Es;if(An.hasOwnProperty(n))return An[n];if(Oi>=Mc){let e=0;for(const a in An)e++&3||(delete An[a],--Oi)}const t=Vo(n);t.length!==4&&$n(n);for(const e of t)isNaN(e)&&$n(n);return An[n]=t,++Oi,t}function _n(n){return Array.isArray(n)?n:Ss(n)}function Rs(n){let t=n[0];t!=(t|0)&&(t=t+.5|0);let e=n[1];e!=(e|0)&&(e=e+.5|0);let a=n[2];a!=(a|0)&&(a=a+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+t+","+e+","+a+","+i+")"}function Sc(n,t){return new Promise((e,a)=>{function i(){r(),e(n)}function s(){r(),a(new Error("Image load error"))}function r(){n.removeEventListener("load",i),n.removeEventListener("error",s)}n.addEventListener("load",i),n.addEventListener("error",s)})}function Rc(n,t){return t&&(n.src=t),n.src&&dc?new Promise((e,a)=>n.decode().then(()=>e(n)).catch(i=>n.complete&&n.width?e(n):a(i))):Sc(n)}class Ic{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const a=this.cache_[e];!(t++&3)&&!a.hasListener()&&(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,a){const i=Bi(t,e,a);return i in this.cache_?this.cache_[i]:null}getPattern(t,e,a){const i=Bi(t,e,a);return i in this.patternCache_?this.patternCache_[i]:null}set(t,e,a,i,s){const r=Bi(t,e,a),o=r in this.cache_;this.cache_[r]=i,s&&(i.getImageState()===j.IDLE&&i.load(),i.getImageState()===j.LOADING?i.ready().then(()=>{this.patternCache_[r]=ei().createPattern(i.getImage(1),"repeat")}):this.patternCache_[r]=ei().createPattern(i.getImage(1),"repeat")),o||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function Bi(n,t,e){const a=e?_n(e):"null";return t+":"+n+":"+a}const Zt=new Ic;let Cn=null;class jo extends ic{constructor(t,e,a,i,s){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=a,this.canvas_={},this.color_=s,this.imageState_=i===void 0?j.IDLE:i,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===j.LOADED){Cn||(Cn=yt(1,1,void 0,{willReadFrequently:!0})),Cn.drawImage(this.image_,0,0);try{Cn.getImageData(0,0,1,1),this.tainted_=!1}catch{Cn=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(he.CHANGE)}handleImageError_(){this.imageState_=j.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=j.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],a=yt(t,e);a.fillRect(0,0,t,e),this.hitDetectionImage_=a.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===j.IDLE){this.image_||this.initializeImage_(),this.imageState_=j.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Rc(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==j.LOADED)return;const e=this.image_,a=yt(Math.ceil(e.width*t),Math.ceil(e.height*t)),i=a.canvas;a.scale(t,t),a.drawImage(e,0,0),a.globalCompositeOperation="multiply",a.fillStyle=vc(this.color_),a.fillRect(0,0,i.width/t,i.height/t),a.globalCompositeOperation="destination-in",a.drawImage(e,0,0),this.canvas_[t]=i}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===j.LOADED||this.imageState_===j.ERROR)t();else{const e=()=>{(this.imageState_===j.LOADED||this.imageState_===j.ERROR)&&(this.removeEventListener(he.CHANGE,e),t())};this.addEventListener(he.CHANGE,e)}})),this.ready_}}function Is(n,t,e,a,i,s){let r=t===void 0?void 0:Zt.get(t,e,i);return r||(r=new jo(n,n&&"src"in n?n.src||void 0:t,e,a,i),Zt.set(t,e,i,r,s)),s&&r&&!Zt.getPattern(t,e,i)&&Zt.set(t,e,i,r,s),r}function Jt(n){return n?Array.isArray(n)?Rs(n):typeof n=="object"&&"src"in n?Ac(n):n:null}function Ac(n){if(!n.offset||!n.size)return Zt.getPattern(n.src,"anonymous",n.color);const t=n.src+":"+n.offset,e=Zt.getPattern(t,void 0,n.color);if(e)return e;const a=Zt.get(n.src,"anonymous",null);if(a.getImageState()!==j.LOADED)return null;const i=yt(n.size[0],n.size[1]);return i.drawImage(a.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),Is(i.canvas,t,void 0,j.LOADED,n.color,!0),Zt.getPattern(t,void 0,n.color)}class Ho{drawCustom(t,e,a,i,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,a){}drawFeature(t,e,a){}drawGeometryCollection(t,e,a){}drawLineString(t,e,a){}drawMultiLineString(t,e,a){}drawMultiPoint(t,e,a){}drawMultiPolygon(t,e,a){}drawPoint(t,e,a){}drawPolygon(t,e,a){}drawText(t,e,a){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}const Cc=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),pr=["style","variant","weight","size","lineHeight","family"],as={normal:400,bold:700},is=function(n){const t=n.match(Cc);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let a=0,i=pr.length;a<i;++a){const s=t[a+1];s!==void 0&&(e[pr[a]]=typeof s=="string"?s.trim():s)}return isNaN(Number(e.weight))&&e.weight in as&&(e.weight=as[e.weight]),e.families=e.family.split(/,\s?/).map(a=>a.trim().replace(/^['"]|['"]$/g,"")),e},Ko="10px sans-serif",vt="#000",un="round",ce=[],_e=0,fn="round",ia=10,sa="#000",ra="center",ni="middle",Ne=[0,0,0,0],oa=1,Ln=new yn;let kn=null,yr;const ss={},Lc=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function kc(n,t,e){return`${n} ${t} 16px "${e}"`}const Tc=function(){let t,e;async function a(s){await e.ready;const r=await e.load(s);if(r.length===0)return!1;const o=is(s),l=o.families[0].toLowerCase(),h=o.weight;return r.some(c=>{const _=c.family.replace(/^['"]|['"]$/g,"").toLowerCase(),u=as[c.weight]||c.weight;return _===l&&c.style===o.style&&u==h})}async function i(){await e.ready;let s=!0;const r=Ln.getProperties(),o=Object.keys(r).filter(l=>r[l]<100);for(let l=o.length-1;l>=0;--l){const h=o[l];let c=r[h];c<100&&(await a(h)?(sc(ss),Ln.set(h,100)):(c+=10,Ln.set(h,c,!0),c<100&&(s=!1)))}t=void 0,s||(t=setTimeout(i,100))}return async function(s){e||(e=ws?self.fonts:document.fonts);const r=is(s);if(!r)return;const o=r.families;let l=!1;for(const h of o){if(Lc.has(h))continue;const c=kc(r.style,r.weight,h);Ln.get(c)===void 0&&(Ln.set(c,0,!0),l=!0)}l&&(clearTimeout(t),t=setTimeout(i,100))}}(),Oc=function(){let n;return function(t){let e=ss[t];if(e==null){if(ws){const a=is(t),i=Wo(t,"Žg");e=(isNaN(Number(a.lineHeight))?1.2:Number(a.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=t,document.body.appendChild(n),e=n.offsetHeight,document.body.removeChild(n);ss[t]=e}return e}}();function Wo(n,t){return kn||(kn=yt(1,1)),n!=yr&&(kn.font=n,yr=kn.font),kn.measureText(t)}function qo(n,t){return Wo(n,t).width}function br(n,t,e){if(t in e)return e[t];const a=t.split(`
`).reduce((i,s)=>Math.max(i,qo(n,s)),0);return e[t]=a,a}function Dc(n,t){const e=[],a=[],i=[];let s=0,r=0,o=0,l=0;for(let h=0,c=t.length;h<=c;h+=2){const _=t[h];if(_===`
`||h===c){s=Math.max(s,r),i.push(r),r=0,o+=l,l=0;continue}const u=t[h+1]||n.font,f=qo(u,_);e.push(f),r+=f;const d=Oc(u);a.push(d),l=Math.max(l,d)}return{width:s,height:o,widths:e,heights:a,lineWidths:i}}function Nc(n,t,e,a,i,s,r,o,l,h,c){n.save(),e!==1&&(n.globalAlpha===void 0?n.globalAlpha=_=>_.globalAlpha*=e:n.globalAlpha*=e),t&&n.transform.apply(n,t),a.contextInstructions?(n.translate(l,h),n.scale(c[0],c[1]),Pc(a,n)):c[0]<0||c[1]<0?(n.translate(l,h),n.scale(c[0],c[1]),n.drawImage(a,i,s,r,o,0,0,r,o)):n.drawImage(a,i,s,r,o,l,h,r*c[0],o*c[1]),n.restore()}function Pc(n,t){const e=n.contextInstructions;for(let a=0,i=e.length;a<i;a+=2)Array.isArray(e[a+1])?t[e[a]].apply(t,e[a+1]):t[e[a]]=e[a+1]}class Fc extends Ho{constructor(t,e,a,i,s,r,o){super(),this.context_=t,this.pixelRatio_=e,this.extent_=a,this.transform_=i,this.transformRotation_=i?zo(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=r,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Be()}drawImages_(t,e,a,i){if(!this.image_)return;const s=Xn(t,e,a,i,this.transform_,this.pixelCoordinates_),r=this.context_,o=this.tmpLocalTransform_,l=r.globalAlpha;this.imageOpacity_!=1&&(r.globalAlpha=l*this.imageOpacity_);let h=this.imageRotation_;this.transformRotation_===0&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let c=0,_=s.length;c<_;c+=2){const u=s[c]-this.imageAnchorX_,f=s[c+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const d=u+this.imageAnchorX_,m=f+this.imageAnchorY_;aa(o,d,m,1,1,h,-d,-m),r.save(),r.transform.apply(r,o),r.translate(d,m),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.restore()}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,u,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(r.globalAlpha=l)}drawText_(t,e,a,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Xn(t,e,a,i,this.transform_,this.pixelCoordinates_),r=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);e<a;e+=i){const l=s[e]+this.textOffsetX_,h=s[e+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(r.save(),r.translate(l-this.textOffsetX_,h-this.textOffsetY_),r.rotate(o),r.translate(this.textOffsetX_,this.textOffsetY_),r.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&r.strokeText(this.text_,0,0),this.textFillState_&&r.fillText(this.text_,0,0),r.restore()):(this.textStrokeState_&&r.strokeText(this.text_,l,h),this.textFillState_&&r.fillText(this.text_,l,h))}}moveToLineTo_(t,e,a,i,s){const r=this.context_,o=Xn(t,e,a,i,this.transform_,this.pixelCoordinates_);r.moveTo(o[0],o[1]);let l=o.length;s&&(l-=2);for(let h=2;h<l;h+=2)r.lineTo(o[h],o[h+1]);return s&&r.closePath(),a}drawRings_(t,e,a,i){for(let s=0,r=a.length;s<r;++s)e=this.moveToLineTo_(t,e,a[s],i,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!$t(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=Xh(t,this.transform_,this.pixelCoordinates_),a=e[2]-e[0],i=e[3]-e[1],s=Math.sqrt(a*a+i*i),r=this.context_;r.beginPath(),r.arc(e[0],e[1],s,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const a=e.getGeometryFunction()(t);a&&(this.setStyle(e),this.drawGeometry(a))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let a=0,i=e.length;a<i;++a)this.drawGeometry(e[a])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),a=t.getStride();this.image_&&this.drawImages_(e,0,e.length,a),this.text_!==""&&this.drawText_(e,0,e.length,a)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),a=t.getStride();this.image_&&this.drawImages_(e,0,e.length,a),this.text_!==""&&this.drawText_(e,0,e.length,a)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!$t(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,a=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(a,0,a.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if($t(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const a=this.context_,i=t.getFlatCoordinates();let s=0;const r=t.getEnds(),o=t.getStride();a.beginPath();for(let l=0,h=r.length;l<h;++l)s=this.moveToLineTo_(i,s,r[l],o,!1);a.stroke()}if(this.text_!==""){const a=t.getFlatMidpoints();this.drawText_(a,0,a.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!$t(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!$t(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,a=t.getOrientedFlatCoordinates();let i=0;const s=t.getEndss(),r=t.getStride();e.beginPath();for(let o=0,l=s.length;o<l;++o){const h=s[o];i=this.drawRings_(a,i,h,r)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,a=this.contextFillState_;a?a.fillStyle!=t.fillStyle&&(a.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,a=this.contextStrokeState_;a?(a.lineCap!=t.lineCap&&(a.lineCap=t.lineCap,e.lineCap=t.lineCap),pa(a.lineDash,t.lineDash)||e.setLineDash(a.lineDash=t.lineDash),a.lineDashOffset!=t.lineDashOffset&&(a.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),a.lineJoin!=t.lineJoin&&(a.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),a.lineWidth!=t.lineWidth&&(a.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),a.miterLimit!=t.miterLimit&&(a.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),a.strokeStyle!=t.strokeStyle&&(a.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,a=this.contextTextState_,i=t.textAlign?t.textAlign:ra;a?(a.font!=t.font&&(a.font=t.font,e.font=t.font),a.textAlign!=i&&(a.textAlign=i,e.textAlign=i),a.textBaseline!=t.textBaseline&&(a.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const a=t.getColor();this.fillState_={fillStyle:Jt(a||vt)}}if(!e)this.strokeState_=null;else{const a=e.getColor(),i=e.getLineCap(),s=e.getLineDash(),r=e.getLineDashOffset(),o=e.getLineJoin(),l=e.getWidth(),h=e.getMiterLimit(),c=s||ce;this.strokeState_={lineCap:i!==void 0?i:un,lineDash:this.pixelRatio_===1?c:c.map(_=>_*this.pixelRatio_),lineDashOffset:(r||_e)*this.pixelRatio_,lineJoin:o!==void 0?o:fn,lineWidth:(l!==void 0?l:oa)*this.pixelRatio_,miterLimit:h!==void 0?h:ia,strokeStyle:Jt(a||sa)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const a=t.getPixelRatio(this.pixelRatio_),i=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*a,this.imageAnchorY_=i[1]*a,this.imageHeight_=e[1]*a,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const r=t.getScaleArray();this.imageScale_=[r[0]*this.pixelRatio_/a,r[1]*this.pixelRatio_/a],this.imageWidth_=e[0]*a}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const f=e.getColor();this.textFillState_={fillStyle:Jt(f||vt)}}const a=t.getStroke();if(!a)this.textStrokeState_=null;else{const f=a.getColor(),d=a.getLineCap(),m=a.getLineDash(),g=a.getLineDashOffset(),p=a.getLineJoin(),y=a.getWidth(),x=a.getMiterLimit();this.textStrokeState_={lineCap:d!==void 0?d:un,lineDash:m||ce,lineDashOffset:g||_e,lineJoin:p!==void 0?p:fn,lineWidth:y!==void 0?y:oa,miterLimit:x!==void 0?x:ia,strokeStyle:Jt(f||sa)}}const i=t.getFont(),s=t.getOffsetX(),r=t.getOffsetY(),o=t.getRotateWithView(),l=t.getRotation(),h=t.getScaleArray(),c=t.getText(),_=t.getTextAlign(),u=t.getTextBaseline();this.textState_={font:i!==void 0?i:Ko,textAlign:_!==void 0?_:ra,textBaseline:u!==void 0?u:ni},this.text_=c!==void 0?Array.isArray(c)?c.reduce((f,d,m)=>f+=m%2?" ":d,""):c:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=r!==void 0?this.pixelRatio_*r:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}}}const Bc=.5,Xo={Point:Wc,LineString:jc,Polygon:Xc,MultiPoint:qc,MultiLineString:Hc,MultiPolygon:Kc,GeometryCollection:Vc,Circle:Uc};function Gc(n,t){return parseInt(ot(n),10)-parseInt(ot(t),10)}function xr(n,t){const e=$o(n,t);return e*e}function $o(n,t){return Bc*n/t}function Uc(n,t,e,a,i){const s=e.getFill(),r=e.getStroke();if(s||r){const l=n.getBuilder(e.getZIndex(),"Circle");l.setFillStrokeStyle(s,r),l.drawCircle(t,a,i)}const o=e.getText();if(o&&o.getText()){const l=n.getBuilder(e.getZIndex(),"Text");l.setTextStyle(o),l.drawText(t,a)}}function vr(n,t,e,a,i,s,r,o){const l=[],h=e.getImage();if(h){let u=!0;const f=h.getImageState();f==j.LOADED||f==j.ERROR?u=!1:f==j.IDLE&&h.load(),u&&l.push(h.ready())}const c=e.getFill();c&&c.loading()&&l.push(c.ready());const _=l.length>0;return _&&Promise.all(l).then(()=>i(null)),zc(n,t,e,a,s,r,o),_}function zc(n,t,e,a,i,s,r){const o=e.getGeometryFunction()(t);if(!o)return;const l=o.simplifyTransformed(a,i);if(e.getRenderer())Yo(n,l,e,t,r);else{const c=Xo[l.getType()];c(n,l,e,t,r,s)}}function Yo(n,t,e,a,i){if(t.getType()=="GeometryCollection"){const r=t.getGeometries();for(let o=0,l=r.length;o<l;++o)Yo(n,r[o],e,a,i);return}n.getBuilder(e.getZIndex(),"Default").drawCustom(t,a,e.getRenderer(),e.getHitDetectionRenderer(),i)}function Vc(n,t,e,a,i,s){const r=t.getGeometriesArray();let o,l;for(o=0,l=r.length;o<l;++o){const h=Xo[r[o].getType()];h(n,r[o],e,a,i,s)}}function jc(n,t,e,a,i){const s=e.getStroke();if(s){const o=n.getBuilder(e.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(t,a,i)}const r=e.getText();if(r&&r.getText()){const o=n.getBuilder(e.getZIndex(),"Text");o.setTextStyle(r),o.drawText(t,a,i)}}function Hc(n,t,e,a,i){const s=e.getStroke();if(s){const o=n.getBuilder(e.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(t,a,i)}const r=e.getText();if(r&&r.getText()){const o=n.getBuilder(e.getZIndex(),"Text");o.setTextStyle(r),o.drawText(t,a,i)}}function Kc(n,t,e,a,i){const s=e.getFill(),r=e.getStroke();if(r||s){const l=n.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(s,r),l.drawMultiPolygon(t,a,i)}const o=e.getText();if(o&&o.getText()){const l=n.getBuilder(e.getZIndex(),"Text");l.setTextStyle(o),l.drawText(t,a,i)}}function Wc(n,t,e,a,i,s){const r=e.getImage(),o=e.getText(),l=o&&o.getText(),h=s&&r&&l?{}:void 0;if(r){if(r.getImageState()!=j.LOADED)return;const c=n.getBuilder(e.getZIndex(),"Image");c.setImageStyle(r,h),c.drawPoint(t,a,i)}if(l){const c=n.getBuilder(e.getZIndex(),"Text");c.setTextStyle(o,h),c.drawText(t,a,i)}}function qc(n,t,e,a,i,s){const r=e.getImage(),o=r&&r.getOpacity()!==0,l=e.getText(),h=l&&l.getText(),c=s&&o&&h?{}:void 0;if(o){if(r.getImageState()!=j.LOADED)return;const _=n.getBuilder(e.getZIndex(),"Image");_.setImageStyle(r,c),_.drawMultiPoint(t,a,i)}if(h){const _=n.getBuilder(e.getZIndex(),"Text");_.setTextStyle(l,c),_.drawText(t,a,i)}}function Xc(n,t,e,a,i){const s=e.getFill(),r=e.getStroke();if(s||r){const l=n.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(s,r),l.drawPolygon(t,a,i)}const o=e.getText();if(o&&o.getText()){const l=n.getBuilder(e.getZIndex(),"Text");l.setTextStyle(o),l.drawText(t,a,i)}}let $c=!1;function Yc(n,t,e,a,i,s,r){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(e,a,i):n,!0),t.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=$c,o.onload=function(l){if(!o.status||o.status>=200&&o.status<300){const h=t.getType();try{let c;h=="text"||h=="json"?c=o.responseText:h=="xml"?c=o.responseXML||o.responseText:h=="arraybuffer"&&(c=o.response),c?s(t.readFeatures(c,{extent:e,featureProjection:i}),t.readProjection(c)):r()}catch{r()}}else r()},o.onerror=r,o.send()}function Mr(n,t){return function(e,a,i,s,r){Yc(n,t,e,a,i,(o,l)=>{this.addFeatures(o),s!==void 0&&s(o)},()=>{this.changed(),r!==void 0&&r()})}}function Zc(n,t){return[[-1/0,-1/0,1/0,1/0]]}function Zo(n,t,e=0,a=n.length-1,i=Jc){for(;a>e;){if(a-e>600){const l=a-e+1,h=t-e+1,c=Math.log(l),_=.5*Math.exp(2*c/3),u=.5*Math.sqrt(c*_*(l-_)/l)*(h-l/2<0?-1:1),f=Math.max(e,Math.floor(t-h*_/l+u)),d=Math.min(a,Math.floor(t+(l-h)*_/l+u));Zo(n,t,f,d,i)}const s=n[t];let r=e,o=a;for(Tn(n,e,t),i(n[a],s)>0&&Tn(n,e,a);r<o;){for(Tn(n,r,o),r++,o--;i(n[r],s)<0;)r++;for(;i(n[o],s)>0;)o--}i(n[e],s)===0?Tn(n,e,o):(o++,Tn(n,o,a)),o<=t&&(e=o+1),t<=o&&(a=o-1)}}function Tn(n,t,e){const a=n[t];n[t]=n[e],n[e]=a}function Jc(n,t){return n<t?-1:n>t?1:0}let Jo=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const a=[];if(!Da(t,e))return a;const i=this.toBBox,s=[];for(;e;){for(let r=0;r<e.children.length;r++){const o=e.children[r],l=e.leaf?i(o):o;Da(t,l)&&(e.leaf?a.push(o):Ui(t,l)?this._all(o,a):s.push(o))}e=s.pop()}return a}collides(t){let e=this.data;if(!Da(t,e))return!1;const a=[];for(;e;){for(let i=0;i<e.children.length;i++){const s=e.children[i],r=e.leaf?this.toBBox(s):s;if(Da(t,r)){if(e.leaf||Ui(t,r))return!0;a.push(s)}}e=a.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let a=0;a<t.length;a++)this.insert(t[a]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=e;else if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const a=this.data;this.data=e,e=a}this._insert(e,this.data.height-e.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Je([]),this}remove(t,e){if(!t)return this;let a=this.data;const i=this.toBBox(t),s=[],r=[];let o,l,h;for(;a||s.length;){if(a||(a=s.pop(),l=s[s.length-1],o=r.pop(),h=!0),a.leaf){const c=Qc(t,a.children,e);if(c!==-1)return a.children.splice(c,1),s.push(a),this._condense(s),this}!h&&!a.leaf&&Ui(a,i)?(s.push(a),r.push(o),o=0,l=a,a=a.children[0]):l?(o++,a=l.children[o],h=!1):a=null}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const a=[];for(;t;)t.leaf?e.push(...t.children):a.push(...t.children),t=a.pop();return e}_build(t,e,a,i){const s=a-e+1;let r=this._maxEntries,o;if(s<=r)return o=Je(t.slice(e,a+1)),qe(o,this.toBBox),o;i||(i=Math.ceil(Math.log(s)/Math.log(r)),r=Math.ceil(s/Math.pow(r,i-1))),o=Je([]),o.leaf=!1,o.height=i;const l=Math.ceil(s/r),h=l*Math.ceil(Math.sqrt(r));wr(t,e,a,h,this.compareMinX);for(let c=e;c<=a;c+=h){const _=Math.min(c+h-1,a);wr(t,c,_,l,this.compareMinY);for(let u=c;u<=_;u+=l){const f=Math.min(u+l-1,_);o.children.push(this._build(t,u,f,i-1))}}return qe(o,this.toBBox),o}_chooseSubtree(t,e,a,i){for(;i.push(e),!(e.leaf||i.length-1===a);){let s=1/0,r=1/0,o;for(let l=0;l<e.children.length;l++){const h=e.children[l],c=Gi(h),_=n_(t,h)-c;_<r?(r=_,s=c<s?c:s,o=h):_===r&&c<s&&(s=c,o=h)}e=o||e.children[0]}return e}_insert(t,e,a){const i=a?t:this.toBBox(t),s=[],r=this._chooseSubtree(i,this.data,e,s);for(r.children.push(t),Fn(r,i);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(i,s,e)}_split(t,e){const a=t[e],i=a.children.length,s=this._minEntries;this._chooseSplitAxis(a,s,i);const r=this._chooseSplitIndex(a,s,i),o=Je(a.children.splice(r,a.children.length-r));o.height=a.height,o.leaf=a.leaf,qe(a,this.toBBox),qe(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(a,o)}_splitRoot(t,e){this.data=Je([t,e]),this.data.height=t.height+1,this.data.leaf=!1,qe(this.data,this.toBBox)}_chooseSplitIndex(t,e,a){let i,s=1/0,r=1/0;for(let o=e;o<=a-e;o++){const l=Pn(t,0,o,this.toBBox),h=Pn(t,o,a,this.toBBox),c=a_(l,h),_=Gi(l)+Gi(h);c<s?(s=c,i=o,r=_<r?_:r):c===s&&_<r&&(r=_,i=o)}return i||a-e}_chooseSplitAxis(t,e,a){const i=t.leaf?this.compareMinX:t_,s=t.leaf?this.compareMinY:e_,r=this._allDistMargin(t,e,a,i),o=this._allDistMargin(t,e,a,s);r<o&&t.children.sort(i)}_allDistMargin(t,e,a,i){t.children.sort(i);const s=this.toBBox,r=Pn(t,0,e,s),o=Pn(t,a-e,a,s);let l=Oa(r)+Oa(o);for(let h=e;h<a-e;h++){const c=t.children[h];Fn(r,t.leaf?s(c):c),l+=Oa(r)}for(let h=a-e-1;h>=e;h--){const c=t.children[h];Fn(o,t.leaf?s(c):c),l+=Oa(o)}return l}_adjustParentBBoxes(t,e,a){for(let i=a;i>=0;i--)Fn(e[i],t)}_condense(t){for(let e=t.length-1,a;e>=0;e--)t[e].children.length===0?e>0?(a=t[e-1].children,a.splice(a.indexOf(t[e]),1)):this.clear():qe(t[e],this.toBBox)}};function Qc(n,t,e){if(!e)return t.indexOf(n);for(let a=0;a<t.length;a++)if(e(n,t[a]))return a;return-1}function qe(n,t){Pn(n,0,n.children.length,t,n)}function Pn(n,t,e,a,i){i||(i=Je(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=t;s<e;s++){const r=n.children[s];Fn(i,n.leaf?a(r):r)}return i}function Fn(n,t){return n.minX=Math.min(n.minX,t.minX),n.minY=Math.min(n.minY,t.minY),n.maxX=Math.max(n.maxX,t.maxX),n.maxY=Math.max(n.maxY,t.maxY),n}function t_(n,t){return n.minX-t.minX}function e_(n,t){return n.minY-t.minY}function Gi(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function Oa(n){return n.maxX-n.minX+(n.maxY-n.minY)}function n_(n,t){return(Math.max(t.maxX,n.maxX)-Math.min(t.minX,n.minX))*(Math.max(t.maxY,n.maxY)-Math.min(t.minY,n.minY))}function a_(n,t){const e=Math.max(n.minX,t.minX),a=Math.max(n.minY,t.minY),i=Math.min(n.maxX,t.maxX),s=Math.min(n.maxY,t.maxY);return Math.max(0,i-e)*Math.max(0,s-a)}function Ui(n,t){return n.minX<=t.minX&&n.minY<=t.minY&&t.maxX<=n.maxX&&t.maxY<=n.maxY}function Da(n,t){return t.minX<=n.maxX&&t.minY<=n.maxY&&t.maxX>=n.minX&&t.maxY>=n.minY}function Je(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function wr(n,t,e,a,i){const s=[t,e];for(;s.length;){if(e=s.pop(),t=s.pop(),e-t<=a)continue;const r=t+Math.ceil((e-t)/a/2)*a;Zo(n,r,t,e,i),s.push(t,r,r,e)}}class Er{constructor(t){this.rbush_=new Jo(t),this.items_={}}insert(t,e){const a={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(a),this.items_[ot(e)]=a}load(t,e){const a=new Array(e.length);for(let i=0,s=e.length;i<s;i++){const r=t[i],o=e[i],l={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:o};a[i]=l,this.items_[ot(o)]=l}this.rbush_.load(a)}remove(t){const e=ot(t),a=this.items_[e];return delete this.items_[e],this.rbush_.remove(a)!==null}update(t,e){const a=this.items_[ot(e)],i=[a.minX,a.minY,a.maxX,a.maxY];Po(i,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(i){return i.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let a;for(let i=0,s=t.length;i<s;i++)if(a=e(t[i]),a)return a;return a}isEmpty(){return na(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return ts(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}class i_ extends yn{constructor(t){super(),this.projection=Lh(t.projection),this.attributions_=Sr(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(a,i){e.viewResolver=a,e.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=Sr(t),this.changed()}setState(t){this.state_=t,this.changed()}}function Sr(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),t=>n):null}const Tt={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class ge extends xs{constructor(t,e,a){super(t),this.feature=e,this.features=a}}class s_ extends i_{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.loader_=No,this.format_=t.format||null,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(gt(this.format_,"`format` must be set when `url` is set"),this.loader_=Mr(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:Zc;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new Er:null,this.loadedExtentsRtree_=new Er,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let a,i;Array.isArray(t.features)?i=t.features:t.features&&(a=t.features,i=a.getArray()),!e&&a===void 0&&(a=new uc(i)),i!==void 0&&this.addFeaturesInternal(i),a!==void 0&&this.bindFeaturesCollection_(a)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=ot(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const a=t.getGeometry();if(a){const i=a.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new ge(Tt.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof We||(this.featureChangeKeys_[t]=[Kn(e,he.CHANGE,this.handleFeatureChange_,this),Kn(e,Ih.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let a=!0;if(e.getId()!==void 0){const i=String(e.getId());if(!(i in this.idIndex_))this.idIndex_[i]=e;else if(e instanceof We){const s=this.idIndex_[i];s instanceof We?Array.isArray(s)?s.push(e):this.idIndex_[i]=[s,e]:a=!1}else a=!1}return a&&(gt(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),a}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],a=[],i=[];for(let s=0,r=t.length;s<r;s++){const o=t[s],l=ot(o);this.addToIndex_(l,o)&&a.push(o)}for(let s=0,r=a.length;s<r;s++){const o=a[s],l=ot(o);this.setupChangeEvents_(l,o);const h=o.getGeometry();if(h){const c=h.getExtent();e.push(c),i.push(o)}else this.nullGeometryFeatures_[l]=o}if(this.featuresRtree_&&this.featuresRtree_.load(e,i),this.hasListener(Tt.ADDFEATURE))for(let s=0,r=a.length;s<r;s++)this.dispatchEvent(new ge(Tt.ADDFEATURE,a[s]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(Tt.ADDFEATURE,function(a){e||(e=!0,t.push(a.feature),e=!1)}),this.addEventListener(Tt.REMOVEFEATURE,function(a){e||(e=!0,t.remove(a.feature),e=!1)}),t.addEventListener(en.ADD,a=>{e||(e=!0,this.addFeature(a.element),e=!1)}),t.addEventListener(en.REMOVE,a=>{e||(e=!0,this.removeFeature(a.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const a in this.featureChangeKeys_)this.featureChangeKeys_[a].forEach(Wn);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(a=>{this.removeFeatureInternal(a)});for(const a in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[a])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new ge(Tt.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const a=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(a,function(i){const s=i.getGeometry();if(s instanceof We||s.intersectsCoordinate(t))return e(i)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(a){const i=a.getGeometry();if(i instanceof We||i.intersectsExtent(t)){const s=e(a);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),na(this.nullGeometryFeatures_)||Ah(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(a){e.push(a)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const i=Ch(t,e);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const a=t[0],i=t[1];let s=null;const r=[NaN,NaN];let o=1/0;const l=[-1/0,-1/0,1/0,1/0];return e=e||kh,this.featuresRtree_.forEachInExtent(l,function(h){if(e(h)){const c=h.getGeometry(),_=o;if(o=c instanceof We?0:c.closestPointXY(a,i,r,o),o<_){s=h;const u=Math.sqrt(o);l[0]=a-u,l[1]=i-u,l[2]=a+u,l[3]=i+u}}}),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,a=ot(e),i=e.getGeometry();if(!i)a in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[a]=e);else{const r=i.getExtent();a in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[a],this.featuresRtree_&&this.featuresRtree_.insert(r,e)):this.featuresRtree_&&this.featuresRtree_.update(r,e)}const s=e.getId();if(s!==void 0){const r=s.toString();this.idIndex_[r]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[r]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[a]=e;this.changed(),this.dispatchEvent(new ge(Tt.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:ot(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&na(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,a){const i=this.loadedExtentsRtree_,s=this.strategy_(t,e,a);for(let r=0,o=s.length;r<o;++r){const l=s[r];i.forEachInExtent(l,function(c){return Dn(c.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new ge(Tt.FEATURESLOADSTART)),this.loader_.call(this,l,e,a,c=>{--this.loadingExtentsCount_,this.dispatchEvent(new ge(Tt.FEATURESLOADEND,void 0,c))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new ge(Tt.FEATURESLOADERROR))}),i.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_,a=e.forEachInExtent(t,function(i){if(Po(i.extent,t))return i});a&&e.remove(a)}removeFeatures(t){let e=!1;for(let a=0,i=t.length;a<i;++a)e=this.removeFeatureInternal(t[a])||e;e&&this.changed()}removeFeature(t){if(!t)return;this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=ot(t);if(!(e in this.uidIndex_))return!1;e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);const a=this.featureChangeKeys_[e];a==null||a.forEach(Wn),delete this.featureChangeKeys_[e];const i=t.getId();if(i!==void 0){const s=i.toString(),r=this.idIndex_[s];r===t?delete this.idIndex_[s]:Array.isArray(r)&&(r.splice(r.indexOf(t),1),r.length===1&&(this.idIndex_[s]=r[0]))}return delete this.uidIndex_[e],this.hasListener(Tt.REMOVEFEATURE)&&this.dispatchEvent(new ge(Tt.REMOVEFEATURE,t)),!0}removeFromIdIndex_(t){for(const e in this.idIndex_)if(this.idIndex_[e]===t){delete this.idIndex_[e];break}}setLoader(t){this.loader_=t}setUrl(t){gt(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(Mr(t,this.format_))}setOverlaps(t){this.overlaps_=t,this.changed()}}class Nt{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new Nt({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const e=Is(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));e.ready().then(()=>{this.patternImage_=null}),e.getImageState()===j.IDLE&&e.load(),e.getImageState()===j.LOADING&&(this.patternImage_=e)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?ot(t):typeof t=="object"&&"src"in t?t.src+":"+t.offset:_n(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Ft{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Ft({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}function dn(n,t){return Array.isArray(n)?n:(t===void 0?t=[n,n]:(t[0]=n,t[1]=n),t)}class fi{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=dn(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new fi({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ct()}getImage(t){return ct()}getHitDetectionImage(){return ct()}getPixelRatio(t){return 1}getImageState(){return ct()}getImageSize(){return ct()}getOrigin(){return ct()}getSize(){return ct()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=dn(t)}listenImageChange(t){ct()}load(){ct()}unlistenImageChange(t){ct()}ready(){return Promise.resolve()}}class di extends fi{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.imageState_=this.fill_&&this.fill_.loading()?j.LOADING:j.LOADED,this.imageState_===j.LOADING&&this.ready().then(()=>this.imageState_=j.LOADED),this.render()}clone(){const t=this.getScale(),e=new di({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),a=this.getScaleArray();return[t[0]/2-e[0]/a[0],t[1]/2+e[1]/a[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){var s,r;const e=(s=this.fill_)==null?void 0:s.getKey(),a=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${e}`+Object.values(this.renderOptions_).join(",");let i=(r=Zt.get(a,null,null))==null?void 0:r.getImage(1);if(!i){const o=this.renderOptions_,l=Math.ceil(o.size*t),h=yt(l,l);this.draw_(o,h,t),i=h.canvas,Zt.set(a,null,null,new jo(i,void 0,null,j.LOADED,null))}return i}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,a){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const M=i;i=s,s=M}const r=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/r,l=s*Math.sin(o),h=Math.sqrt(s*s-l*l),c=i-h,_=Math.sqrt(l*l+c*c),u=_/l;if(t==="miter"&&u<=a)return u*e;const f=e/2/u,d=e/2*(c/_),g=Math.sqrt((i+f)*(i+f)+d*d)-i;if(this.radius2_===void 0||t==="bevel")return g*2;const p=i*Math.sin(o),y=Math.sqrt(i*i-p*p),x=s-y,v=Math.sqrt(p*p+x*x)/p;if(v<=a){const M=v*e/2-s-i;return 2*Math.max(g,M)}return g*2}createRenderOptions(){let t=un,e=fn,a=0,i=null,s=0,r,o=0;this.stroke_&&(r=Jt(this.stroke_.getColor()??sa),o=this.stroke_.getWidth()??oa,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,e=this.stroke_.getLineJoin()??fn,t=this.stroke_.getLineCap()??un,a=this.stroke_.getMiterLimit()??ia);const l=this.calculateLineJoinSize_(e,o,a),h=Math.max(this.radius,this.radius2_||0),c=Math.ceil(2*h+l);return{strokeStyle:r,strokeWidth:o,size:c,lineCap:t,lineDash:i,lineDashOffset:s,lineJoin:e,miterLimit:a}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,a){if(e.scale(a,a),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let i=this.fill_.getColor();i===null&&(i=vt),e.fillStyle=Jt(i),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let a=this.fill_.getColor(),i=0;typeof a=="string"&&(a=_n(a)),a===null?i=1:Array.isArray(a)&&(i=a.length===4?a[3]:1),i===0&&(e=yt(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_;const a=this.radius;if(e===1/0)t.arc(0,0,a,0,2*Math.PI);else{const i=this.radius2_===void 0?a:this.radius2_;this.radius2_!==void 0&&(e*=2);const s=this.angle_-Math.PI/2,r=2*Math.PI/e;for(let o=0;o<e;o++){const l=s+o*r,h=o%2===0?a:i;t.lineTo(h*Math.cos(l),h*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=vt,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class mi extends di{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new mi({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius=t,this.render()}}class Gt{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=Rr,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new Gt({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Rr,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function r_(n){let t;if(typeof n=="function")t=n;else{let e;Array.isArray(n)?e=n:(gt(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),e=[n]),t=function(){return e}}return t}let zi=null;function Qo(n,t){if(!zi){const e=new Nt({color:"rgba(255,255,255,0.4)"}),a=new Ft({color:"#3399CC",width:1.25});zi=[new Gt({image:new mi({fill:e,stroke:a,radius:5}),fill:e,stroke:a})]}return zi}function Rr(n){return n.getGeometry()}const o_="#333";class Pe{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.keepUpright_=t.keepUpright,this.scale_=t.scale,this.scaleArray_=dn(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Nt({color:o_}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Pe({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setKeepUpright(t){this.keepUpright_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=dn(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const Dt={ANIMATING:0,INTERACTING:1},D={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Na=[D.FILL],xe=[D.STROKE],Fe=[D.BEGIN_PATH],Ir=[D.CLOSE_PATH];class ya extends Ho{constructor(t,e,a,i){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=a,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(a){return a*e})}appendFlatPointCoordinates(t,e){const a=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let r=s.length;for(let o=0,l=t.length;o<l;o+=e)i[0]=t[o],i[1]=t[o+1],ns(a,i)&&(s[r++]=i[0],s[r++]=i[1]);return r}appendFlatLineCoordinates(t,e,a,i,s,r){const o=this.coordinates;let l=o.length;const h=this.getBufferedMaxExtent();r&&(e+=i);let c=t[e],_=t[e+1];const u=this.tmpCoordinate_;let f=!0,d,m,g;for(d=e+i;d<a;d+=i)u[0]=t[d],u[1]=t[d+1],g=Yh(h,u),g!==m?(f&&(o[l++]=c,o[l++]=_,f=!1),o[l++]=u[0],o[l++]=u[1]):g===Zh.INTERSECTING?(o[l++]=u[0],o[l++]=u[1],f=!1):f=!0,c=u[0],_=u[1],m=g;return(s&&f||d===e+i)&&(o[l++]=c,o[l++]=_),l}drawCustomCoordinates_(t,e,a,i,s){for(let r=0,o=a.length;r<o;++r){const l=a[r],h=this.appendFlatLineCoordinates(t,e,l,i,!1,!1);s.push(h),e=l}return e}drawCustom(t,e,a,i,s){this.beginGeometry(t,e,s);const r=t.getType(),o=t.getStride(),l=this.coordinates.length;let h,c,_,u,f;switch(r){case"MultiPolygon":h=t.getOrientedFlatCoordinates(),u=[];const d=t.getEndss();f=0;for(let m=0,g=d.length;m<g;++m){const p=[];f=this.drawCustomCoordinates_(h,f,d[m],o,p),u.push(p)}this.instructions.push([D.CUSTOM,l,u,t,a,dr,s]),this.hitDetectionInstructions.push([D.CUSTOM,l,u,t,i||a,dr,s]);break;case"Polygon":case"MultiLineString":_=[],h=r=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),f=this.drawCustomCoordinates_(h,0,t.getEnds(),o,_),this.instructions.push([D.CUSTOM,l,_,t,a,fr,s]),this.hitDetectionInstructions.push([D.CUSTOM,l,_,t,i||a,fr,s]);break;case"LineString":case"Circle":h=t.getFlatCoordinates(),c=this.appendFlatLineCoordinates(h,0,h.length,o,!1,!1),this.instructions.push([D.CUSTOM,l,c,t,a,La,s]),this.hitDetectionInstructions.push([D.CUSTOM,l,c,t,i||a,La,s]);break;case"MultiPoint":h=t.getFlatCoordinates(),c=this.appendFlatPointCoordinates(h,o),c>l&&(this.instructions.push([D.CUSTOM,l,c,t,a,La,s]),this.hitDetectionInstructions.push([D.CUSTOM,l,c,t,i||a,La,s]));break;case"Point":h=t.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),c=this.coordinates.length,this.instructions.push([D.CUSTOM,l,c,t,a,void 0,s]),this.hitDetectionInstructions.push([D.CUSTOM,l,c,t,i||a,void 0,s]);break}this.endGeometry(e)}beginGeometry(t,e,a){this.beginGeometryInstruction1_=[D.BEGIN_GEOMETRY,e,0,t,a],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[D.BEGIN_GEOMETRY,e,0,t,a],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const a=t.length;let i,s,r=-1;for(e=0;e<a;++e)i=t[e],s=i[0],s==D.END_GEOMETRY?r=e:s==D.BEGIN_GEOMETRY&&(i[2]=e,Jh(this.hitDetectionInstructions,r,e),r=-1)}fillStyleToState(t,e={}){if(t){const a=t.getColor();e.fillPatternScale=a&&typeof a=="object"&&"src"in a?this.pixelRatio:1,e.fillStyle=Jt(a||vt)}else e.fillStyle=void 0;return e}strokeStyleToState(t,e={}){if(t){const a=t.getColor();e.strokeStyle=Jt(a||sa);const i=t.getLineCap();e.lineCap=i!==void 0?i:un;const s=t.getLineDash();e.lineDash=s?s.slice():ce;const r=t.getLineDashOffset();e.lineDashOffset=r||_e;const o=t.getLineJoin();e.lineJoin=o!==void 0?o:fn;const l=t.getWidth();e.lineWidth=l!==void 0?l:oa;const h=t.getMiterLimit();e.miterLimit=h!==void 0?h:ia,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0;return e}setFillStrokeStyle(t,e){const a=this.state;this.fillStyleToState(t,a),this.strokeStyleToState(e,a)}createFill(t){const e=t.fillStyle,a=[D.SET_FILL_STYLE,e];return typeof e!="string"&&a.push(t.fillPatternScale),a}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[D.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash?this.applyPixelRatio(t.lineDash):null,t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const a=t.fillStyle;(typeof a!="string"||t.currentFillStyle!=a)&&(this.instructions.push(e.call(this,t)),t.currentFillStyle=a)}updateStrokeStyle(t,e){const a=t.strokeStyle,i=t.lineCap,s=t.lineDash,r=t.lineDashOffset,o=t.lineJoin,l=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=a||t.currentLineCap!=i||s!=t.currentLineDash&&!pa(t.currentLineDash,s)||t.currentLineDashOffset!=r||t.currentLineJoin!=o||t.currentLineWidth!=l||t.currentMiterLimit!=h)&&(e.call(this,t),t.currentStrokeStyle=a,t.currentLineCap=i,t.currentLineDash=s,t.currentLineDashOffset=r,t.currentLineJoin=o,t.currentLineWidth=l,t.currentMiterLimit=h)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[D.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Qh(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;vs(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class l_ extends ya{constructor(t,e,a,i){super(t,e,a,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,a){if(!this.image_||this.maxExtent&&!ns(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,a);const i=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([D.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([D.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,a){if(!this.image_)return;this.beginGeometry(t,e,a);const i=t.getFlatCoordinates(),s=[];for(let l=0,h=i.length;l<h;l+=t.getStride())(!this.maxExtent||ns(this.maxExtent,i.slice(l,l+2)))&&s.push(i[l],i[l+1]);const r=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([D.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([D.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const a=t.getAnchor(),i=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=a[0],this.anchorY_=a[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=i[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}class h_ extends ya{constructor(t,e,a,i){super(t,e,a,i)}drawFlatCoordinates_(t,e,a,i){const s=this.coordinates.length,r=this.appendFlatLineCoordinates(t,e,a,i,!1,!1),o=[D.MOVE_TO_LINE_TO,s,r];return this.instructions.push(o),this.hitDetectionInstructions.push(o),a}drawLineString(t,e,a){const i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e,a),this.hitDetectionInstructions.push([D.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,ce,_e],Fe);const o=t.getFlatCoordinates(),l=t.getStride();this.drawFlatCoordinates_(o,0,o.length,l),this.hitDetectionInstructions.push(xe),this.endGeometry(e)}drawMultiLineString(t,e,a){const i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e,a),this.hitDetectionInstructions.push([D.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,ce,_e],Fe);const o=t.getEnds(),l=t.getFlatCoordinates(),h=t.getStride();let c=0;for(let _=0,u=o.length;_<u;++_)c=this.drawFlatCoordinates_(l,c,o[_],h);this.hitDetectionInstructions.push(xe),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(xe),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(xe),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Fe)}}class Ar extends ya{constructor(t,e,a,i){super(t,e,a,i)}drawFlatCoordinatess_(t,e,a,i){const s=this.state,r=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,l=a.length;this.instructions.push(Fe),this.hitDetectionInstructions.push(Fe);for(let h=0;h<l;++h){const c=a[h],_=this.coordinates.length,u=this.appendFlatLineCoordinates(t,e,c,i,!0,!o),f=[D.MOVE_TO_LINE_TO,_,u];this.instructions.push(f),this.hitDetectionInstructions.push(f),o&&(this.instructions.push(Ir),this.hitDetectionInstructions.push(Ir)),e=c}return r&&(this.instructions.push(Na),this.hitDetectionInstructions.push(Na)),o&&(this.instructions.push(xe),this.hitDetectionInstructions.push(xe)),e}drawCircle(t,e,a){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,a),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([D.SET_FILL_STYLE,vt]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([D.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,ce,_e]);const o=t.getFlatCoordinates(),l=t.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,l,!1,!1);const c=[D.CIRCLE,h];this.instructions.push(Fe,c),this.hitDetectionInstructions.push(Fe,c),i.fillStyle!==void 0&&(this.instructions.push(Na),this.hitDetectionInstructions.push(Na)),i.strokeStyle!==void 0&&(this.instructions.push(xe),this.hitDetectionInstructions.push(xe)),this.endGeometry(e)}drawPolygon(t,e,a){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,a),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([D.SET_FILL_STYLE,vt]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([D.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,ce,_e]);const o=t.getEnds(),l=t.getOrientedFlatCoordinates(),h=t.getStride();this.drawFlatCoordinatess_(l,0,o,h),this.endGeometry(e)}drawMultiPolygon(t,e,a){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,a),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([D.SET_FILL_STYLE,vt]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([D.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,ce,_e]);const o=t.getEndss(),l=t.getOrientedFlatCoordinates(),h=t.getStride();let c=0;for(let _=0,u=o.length;_<u;++_)c=this.drawFlatCoordinatess_(l,c,o[_],h);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let a=0,i=e.length;a<i;++a)e[a]=$h(e[a],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;this.updateFillStyle(t,this.createFill),this.updateStrokeStyle(t,this.applyStroke)}}function c_(n,t,e,a,i){const s=[];let r=e,o=0,l=t.slice(e,2);for(;o<n&&r+i<a;){const[h,c]=l.slice(-2),_=t[r+i],u=t[r+i+1],f=Math.sqrt((_-h)*(_-h)+(u-c)*(u-c));if(o+=f,o>=n){const d=(n-o+f)/f,m=Xt(h,_,d),g=Xt(c,u,d);l.push(m,g),s.push(l),l=[m,g],o==n&&(r+=i),o=0}else if(o<n)l.push(t[r+i],t[r+i+1]),r+=i;else{const d=f-o,m=Xt(h,_,d/f),g=Xt(c,u,d/f);l.push(m,g),s.push(l),l=[m,g],o=0,r+=i}}return o>0&&s.push(l),s}function __(n,t,e,a,i){let s=e,r=e,o=0,l=0,h=e,c,_,u,f,d,m,g,p,y,x;for(_=e;_<a;_+=i){const b=t[_],v=t[_+1];d!==void 0&&(y=b-d,x=v-m,f=Math.sqrt(y*y+x*x),g!==void 0&&(l+=u,c=Math.acos((g*y+p*x)/(u*f)),c>n&&(l>o&&(o=l,s=h,r=_),l=0,h=_-i)),u=f,g=y,p=x),d=b,m=v}return l+=f,l>o?[h,_]:[s,r]}const ai={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class u_ extends ya{constructor(t,e,a,i){super(t,e,a,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[vt]={fillStyle:vt},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,a){const i=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!i&&!s)return;const o=this.coordinates;let l=o.length;const h=t.getType();let c=null,_=t.getStride();if(r.placement==="line"&&(h=="LineString"||h=="MultiLineString"||h=="Polygon"||h=="MultiPolygon")){if(!$t(this.maxExtent,t.getExtent()))return;let u;if(c=t.getFlatCoordinates(),h=="LineString")u=[c.length];else if(h=="MultiLineString")u=t.getEnds();else if(h=="Polygon")u=t.getEnds().slice(0,1);else if(h=="MultiPolygon"){const g=t.getEndss();u=[];for(let p=0,y=g.length;p<y;++p)u.push(g[p][0])}this.beginGeometry(t,e,a);const f=r.repeat,d=f?void 0:r.textAlign;let m=0;for(let g=0,p=u.length;g<p;++g){let y;f?y=c_(f*this.resolution,c,m,u[g],_):y=[c.slice(m,u[g])];for(let x=0,b=y.length;x<b;++x){const v=y[x];let M=0,R=v.length;if(d==null){const I=__(r.maxAngle,v,0,v.length,2);M=I[0],R=I[1]}for(let I=M;I<R;I+=_)o.push(v[I],v[I+1]);const w=o.length;m=u[g],this.drawChars_(l,w),l=w}}this.endGeometry(e)}else{let u=r.overflow?null:[];switch(h){case"Point":case"MultiPoint":c=t.getFlatCoordinates();break;case"LineString":c=t.getFlatMidpoint();break;case"Circle":c=t.getCenter();break;case"MultiLineString":c=t.getFlatMidpoints(),_=2;break;case"Polygon":c=t.getFlatInteriorPoint(),r.overflow||u.push(c[2]/this.resolution),_=3;break;case"MultiPolygon":const b=t.getFlatInteriorPoints();c=[];for(let v=0,M=b.length;v<M;v+=3)r.overflow||u.push(b[v+2]/this.resolution),c.push(b[v],b[v+1]);if(c.length===0)return;_=2;break}const f=this.appendFlatPointCoordinates(c,_);if(f===l)return;if(u&&(f-l)/2!==c.length/_){let b=l/2;u=u.filter((v,M)=>{const R=o[(b+M)*2]===c[M*_]&&o[(b+M)*2+1]===c[M*_+1];return R||--b,R})}this.saveTextStates_();const d=r.backgroundFill?this.createFill(this.fillStyleToState(r.backgroundFill)):null,m=r.backgroundStroke?this.createStroke(this.strokeStyleToState(r.backgroundStroke)):null;this.beginGeometry(t,e,a);let g=r.padding;if(g!=Ne&&(r.scale[0]<0||r.scale[1]<0)){let b=r.padding[0],v=r.padding[1],M=r.padding[2],R=r.padding[3];r.scale[0]<0&&(v=-v,R=-R),r.scale[1]<0&&(b=-b,M=-M),g=[b,v,M,R]}const p=this.pixelRatio;this.instructions.push([D.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,g==Ne?Ne:g.map(function(b){return b*p}),d,m,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,u]);const y=1/p,x=d?d.slice(0):null;x&&(x[1]=vt),this.hitDetectionInstructions.push([D.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[y,y],NaN,this.declutterMode_,this.declutterImageWithText_,g,x,m,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?vt:this.fillKey_,this.textOffsetX_,this.textOffsetY_,u]),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,a=this.textFillState_,i=this.strokeKey_;t&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||ra,justify:e.justify,textBaseline:e.textBaseline||ni,scale:e.scale});const r=this.fillKey_;a&&(r in this.fillStates||(this.fillStates[r]={fillStyle:a.fillStyle}))}drawChars_(t,e){const a=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,r=this.textKey_,o=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,h=ai[i.textBaseline],c=this.textOffsetY_*l,_=this.text_,u=a?a.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([D.DRAW_CHARS,t,e,h,i.overflow,o,i.maxAngle,l,c,s,u*l,_,r,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([D.DRAW_CHARS,t,e,h,i.overflow,o&&vt,i.maxAngle,l,c,s,u*l,_,r,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(t,e){let a,i,s;if(!t)this.text_="";else{const r=t.getFill();r?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Jt(r.getColor()||vt)):(i=null,this.textFillState_=i);const o=t.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const m=o.getLineDash(),g=o.getLineDashOffset(),p=o.getWidth(),y=o.getMiterLimit();s.lineCap=o.getLineCap()||un,s.lineDash=m?m.slice():ce,s.lineDashOffset=g===void 0?_e:g,s.lineJoin=o.getLineJoin()||fn,s.lineWidth=p===void 0?oa:p,s.miterLimit=y===void 0?ia:y,s.strokeStyle=Jt(o.getColor()||sa)}a=this.textState_;const l=t.getFont()||Ko;Tc(l);const h=t.getScaleArray();a.overflow=t.getOverflow(),a.font=l,a.maxAngle=t.getMaxAngle(),a.placement=t.getPlacement(),a.textAlign=t.getTextAlign(),a.repeat=t.getRepeat(),a.justify=t.getJustify(),a.textBaseline=t.getTextBaseline()||ni,a.backgroundFill=t.getBackgroundFill(),a.backgroundStroke=t.getBackgroundStroke(),a.padding=t.getPadding()||Ne,a.scale=h===void 0?[1,1]:h;const c=t.getOffsetX(),_=t.getOffsetY(),u=t.getRotateWithView(),f=t.getKeepUpright(),d=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=_===void 0?0:_,this.textRotateWithView_=u===void 0?!1:u,this.textKeepUpright_=f===void 0?!0:f,this.textRotation_=d===void 0?0:d,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:ot(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=a.font+a.scale+(a.textAlign||"?")+(a.repeat||"?")+(a.justify||"?")+(a.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+ot(i.fillStyle):""}this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const f_={Circle:Ar,Default:ya,Image:l_,LineString:h_,Polygon:Ar,Text:u_};class d_{constructor(t,e,a,i){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=i,this.resolution_=a,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const a=this.buildersByZIndex_[e];for(const i in a){const s=a[i].finish();t[e][i]=s}}return t}getBuilder(t,e){const a=t!==void 0?t.toString():"0";let i=this.buildersByZIndex_[a];i===void 0&&(i={},this.buildersByZIndex_[a]=i);let s=i[e];if(s===void 0){const r=f_[e];s=new r(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[e]=s}return s}}function m_(n,t,e,a,i,s,r,o,l,h,c,_,u=!0){let f=n[t],d=n[t+1],m=0,g=0,p=0,y=0;function x(){m=f,g=d,t+=a,f=n[t],d=n[t+1],y+=p,p=Math.sqrt((f-m)*(f-m)+(d-g)*(d-g))}do x();while(t<e-a&&y+p<s);let b=p===0?0:(s-y)/p;const v=Xt(m,f,b),M=Xt(g,d,b),R=t-a,w=y,I=s+o*l(h,i,c);for(;t<e-a&&y+p<I;)x();b=p===0?0:(I-y)/p;const k=Xt(m,f,b),O=Xt(g,d,b);let T=!1;if(u)if(_){const H=[v,M,k,O];ac(H,0,4,2,_,H,H),T=H[0]>H[2]}else T=v>k;const G=Math.PI,N=[],Y=R+a===t;t=R,p=0,y=w,f=n[t],d=n[t+1];let B;if(Y){x(),B=Math.atan2(d-g,f-m),T&&(B+=B>0?-G:G);const H=(k+v)/2,W=(O+M)/2;return N[0]=[H,W,(I-s)/2,B,i],N}i=i.replace(/\n/g," ");for(let H=0,W=i.length;H<W;){x();let Q=Math.atan2(d-g,f-m);if(T&&(Q+=Q>0?-G:G),B!==void 0){let At=Q-B;if(At+=At>G?-2*G:At<-G?2*G:0,Math.abs(At)>r)return null}B=Q;const J=H;let et=0;for(;H<W;++H){const At=T?W-H-1:H,Vt=o*l(h,i[At],c);if(t+a<e&&y+p<s+et+Vt/2)break;et+=Vt}if(H===J)continue;const A=T?i.substring(W-J,W-H):i.substring(J,H);b=p===0?0:(s+et/2-y)/p;const Ie=Xt(m,f,b),Ae=Xt(g,d,b);N.push([Ie,Ae,et/2,Q,A]),s+=et}return N}class tl{constructor(){or(this,"pushMethodArgs_",(...t)=>(this.push_(t),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(ei(),{get:(t,e)=>{if(typeof ei()[e]=="function")return this.push_(e),this.pushMethodArgs_},set:(t,e,a)=>(this.push_(e,a),!0)})}push_(...t){const e=this.instructions_,a=this.zIndex+this.offset_;e[a]||(e[a]=[]),e[a].push(...t)}pushFunction(t){this.push_(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(e=>{for(let a=0,i=e.length;a<i;++a){const s=e[a];if(typeof s=="function"){s(t);continue}const r=e[++a];if(typeof t[s]=="function")t[s](...r);else{if(typeof r=="function"){t[s]=r(t);continue}t[s]=r}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Xe=ti(),pe=[],se=[],re=[],ye=[];function Cr(n){return n[3].declutterBox}const Lr=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function Vi(n,t){return t==="start"?t=Lr.test(n)?"right":"left":t==="end"&&(t=Lr.test(n)?"left":"right"),ai[t]}function g_(n,t,e){return e>0&&n.push(`
`,""),n.push(t,""),n}function p_(n,t,e){return e%2===0&&(n+=t),n}class y_{constructor(t,e,a,i,s){this.overlaps=a,this.pixelRatio=e,this.resolution=t,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Be(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new tl:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,a,i){const s=t+e+a+i;if(this.labels_[s])return this.labels_[s];const r=i?this.strokeStates[i]:null,o=a?this.fillStates[a]:null,l=this.textStates[e],h=this.pixelRatio,c=[l.scale[0]*h,l.scale[1]*h],_=l.justify?ai[l.justify]:Vi(Array.isArray(t)?t[0]:t,l.textAlign||ra),u=i&&r.lineWidth?r.lineWidth:0,f=Array.isArray(t)?t:String(t).split(`
`).reduce(g_,[]),{width:d,height:m,widths:g,heights:p,lineWidths:y}=Dc(l,f),x=d+u,b=[],v=(x+2)*c[0],M=(m+u)*c[1],R={width:v<0?Math.floor(v):Math.ceil(v),height:M<0?Math.floor(M):Math.ceil(M),contextInstructions:b};(c[0]!=1||c[1]!=1)&&b.push("scale",c),i&&(b.push("strokeStyle",r.strokeStyle),b.push("lineWidth",u),b.push("lineCap",r.lineCap),b.push("lineJoin",r.lineJoin),b.push("miterLimit",r.miterLimit),b.push("setLineDash",[r.lineDash]),b.push("lineDashOffset",r.lineDashOffset)),a&&b.push("fillStyle",o.fillStyle),b.push("textBaseline","middle"),b.push("textAlign","center");const w=.5-_;let I=_*x+w*u;const k=[],O=[];let T=0,G=0,N=0,Y=0,B;for(let H=0,W=f.length;H<W;H+=2){const Q=f[H];if(Q===`
`){G+=T,T=0,I=_*x+w*u,++Y;continue}const J=f[H+1]||l.font;J!==B&&(i&&k.push("font",J),a&&O.push("font",J),B=J),T=Math.max(T,p[N]);const et=[Q,I+w*g[N]+_*(g[N]-y[Y]),.5*(u+T)+G];I+=g[N],i&&k.push("strokeText",et),a&&O.push("fillText",et),++N}return Array.prototype.push.apply(b,k),Array.prototype.push.apply(b,O),this.labels_[s]=R,R}replayTextBackground_(t,e,a,i,s,r,o){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,a),t.lineTo.apply(t,i),t.lineTo.apply(t,s),t.lineTo.apply(t,e),r&&(this.alignAndScaleFill_=r[2],t.fillStyle=r[1],this.fill_(t)),o&&(this.setStrokeStyle_(t,o),t.stroke())}calculateImageOrLabelDimensions_(t,e,a,i,s,r,o,l,h,c,_,u,f,d,m,g){o*=u[0],l*=u[1];let p=a-o,y=i-l;const x=s+h>t?t-h:s,b=r+c>e?e-c:r,v=d[3]+x*u[0]+d[1],M=d[0]+b*u[1]+d[2],R=p-d[3],w=y-d[0];(m||_!==0)&&(pe[0]=R,ye[0]=R,pe[1]=w,se[1]=w,se[0]=R+v,re[0]=se[0],re[1]=w+M,ye[1]=re[1]);let I;return _!==0?(I=aa(Be(),a,i,1,1,_,-a,-i),It(I,pe),It(I,se),It(I,re),It(I,ye),ts(Math.min(pe[0],se[0],re[0],ye[0]),Math.min(pe[1],se[1],re[1],ye[1]),Math.max(pe[0],se[0],re[0],ye[0]),Math.max(pe[1],se[1],re[1],ye[1]),Xe)):ts(Math.min(R,R+v),Math.min(w,w+M),Math.max(R,R+v),Math.max(w,w+M),Xe),f&&(p=Math.round(p),y=Math.round(y)),{drawImageX:p,drawImageY:y,drawImageW:x,drawImageH:b,originX:h,originY:c,declutterBox:{minX:Xe[0],minY:Xe[1],maxX:Xe[2],maxY:Xe[3],value:g},canvasTransform:I,scale:u}}replayImageOrLabel_(t,e,a,i,s,r,o){const l=!!(r||o),h=i.declutterBox,c=o?o[2]*i.scale[0]/2:0;return h.minX-c<=e[0]&&h.maxX+c>=0&&h.minY-c<=e[1]&&h.maxY+c>=0&&(l&&this.replayTextBackground_(t,pe,se,re,ye,r,o),Nc(t,i.canvasTransform,s,a,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(t){const e=this.alignAndScaleFill_;if(e){const a=It(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(a[0]%i,a[1]%i),e!==1&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],e[1]&&(t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6]))}drawLabelWithPointPlacement_(t,e,a,i){const s=this.textStates[e],r=this.createLabel(t,e,i,a),o=this.strokeStates[a],l=this.pixelRatio,h=Vi(Array.isArray(t)?t[0]:t,s.textAlign||ra),c=ai[s.textBaseline||ni],_=o&&o.lineWidth?o.lineWidth:0,u=r.width/l-2*s.scale[0],f=h*u+2*(.5-h)*_,d=c*r.height/l+2*(.5-c)*_;return{label:r,anchorX:f,anchorY:d}}execute_(t,e,a,i,s,r,o,l){const h=this.zIndexContext_;let c;this.pixelCoordinates_&&pa(a,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=Xn(this.coordinates,0,this.coordinates.length,2,a,this.pixelCoordinates_),tc(this.renderedTransform_,a));let _=0;const u=i.length;let f=0,d,m,g,p,y,x,b,v,M,R,w,I,k,O=0,T=0;const G=this.coordinateCache_,N=this.viewRotation_,Y=Math.round(Math.atan2(-a[1],a[0])*1e12)/1e12,B={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:N},H=this.instructions!=i||this.overlaps?0:200;let W,Q,J,et;for(;_<u;){const A=i[_];switch(A[0]){case D.BEGIN_GEOMETRY:W=A[1],et=A[3],W.getGeometry()?o!==void 0&&!$t(o,et.getExtent())?_=A[2]+1:++_:_=A[2],h&&(h.zIndex=A[4]);break;case D.BEGIN_PATH:O>H&&(this.fill_(t),O=0),T>H&&(t.stroke(),T=0),!O&&!T&&(t.beginPath(),y=NaN,x=NaN),++_;break;case D.CIRCLE:f=A[1];const Ae=c[f],At=c[f+1],Vt=c[f+2],Ce=c[f+3],Ra=Vt-Ae,Mn=Ce-At,Le=Math.sqrt(Ra*Ra+Mn*Mn);t.moveTo(Ae+Le,At),t.arc(Ae,At,Le,0,2*Math.PI,!0),++_;break;case D.CLOSE_PATH:t.closePath(),++_;break;case D.CUSTOM:f=A[1],d=A[2];const nh=A[3],ah=A[4],Js=A[5];B.geometry=nh,B.feature=W,_ in G||(G[_]=[]);const wn=G[_];Js?Js(c,f,d,2,wn):(wn[0]=c[f],wn[1]=c[f+1],wn.length=2),h&&(h.zIndex=A[6]),ah(wn,B),++_;break;case D.DRAW_IMAGE:f=A[1],d=A[2],M=A[3],m=A[4],g=A[5];let Ei=A[6];const ih=A[7],sh=A[8],rh=A[9],Qs=A[10];let Si=A[11];const oh=A[12];let Ia=A[13];p=A[14]||"declutter";const En=A[15];if(!M&&A.length>=20){R=A[19],w=A[20],I=A[21],k=A[22];const Ct=this.drawLabelWithPointPlacement_(R,w,I,k);M=Ct.label,A[3]=M;const ke=A[23];m=(Ct.anchorX-ke)*this.pixelRatio,A[4]=m;const Lt=A[24];g=(Ct.anchorY-Lt)*this.pixelRatio,A[5]=g,Ei=M.height,A[6]=Ei,Ia=M.width,A[13]=Ia}let Ri;A.length>25&&(Ri=A[25]);let Ii,Aa,Ca;A.length>17?(Ii=A[16],Aa=A[17],Ca=A[18]):(Ii=Ne,Aa=null,Ca=null),Qs&&Y?Si+=N:!Qs&&!Y&&(Si-=N);let lh=0;for(;f<d;f+=2){if(Ri&&Ri[lh++]<Ia/this.pixelRatio)continue;const Ct=this.calculateImageOrLabelDimensions_(M.width,M.height,c[f],c[f+1],Ia,Ei,m,g,sh,rh,Si,oh,s,Ii,!!Aa||!!Ca,W),ke=[t,e,M,Ct,ih,Aa,Ca];if(l){let Lt,jt,kt;if(En){const nt=d-f;if(!En[nt]){En[nt]={args:ke,declutterMode:p};continue}const ut=En[nt];Lt=ut.args,jt=ut.declutterMode,delete En[nt],kt=Cr(Lt)}let ne,ae;if(Lt&&(jt!=="declutter"||!l.collides(kt))&&(ne=!0),(p!=="declutter"||!l.collides(Ct.declutterBox))&&(ae=!0),jt==="declutter"&&p==="declutter"){const nt=ne&&ae;ne=nt,ae=nt}ne&&(jt!=="none"&&l.insert(kt),this.replayImageOrLabel_.apply(this,Lt)),ae&&(p!=="none"&&l.insert(Ct.declutterBox),this.replayImageOrLabel_.apply(this,ke))}else this.replayImageOrLabel_.apply(this,ke)}++_;break;case D.DRAW_CHARS:const tr=A[1],er=A[2],Ai=A[3],hh=A[4];k=A[5];const ch=A[6],nr=A[7],ar=A[8];I=A[9];const Ci=A[10];R=A[11],Array.isArray(R)&&(R=R.reduce(p_,"")),w=A[12];const ir=[A[13],A[13]];p=A[14]||"declutter";const _h=A[15],Li=this.textStates[w],Sn=Li.font,Rn=[Li.scale[0]*nr,Li.scale[1]*nr];let In;Sn in this.widths_?In=this.widths_[Sn]:(In={},this.widths_[Sn]=In);const sr=ec(c,tr,er,2),rr=Math.abs(Rn[0])*br(Sn,R,In);if(hh||rr<=sr){const Ct=this.textStates[w].textAlign,ke=(sr-rr)*Vi(R,Ct),Lt=m_(c,tr,er,2,R,ke,ch,Math.abs(Rn[0]),br,Sn,In,Y?0:this.viewRotation_,_h);t:if(Lt){const jt=[];let kt,ne,ae,nt,ut;if(I)for(kt=0,ne=Lt.length;kt<ne;++kt){ut=Lt[kt],ae=ut[4],nt=this.createLabel(ae,w,"",I),m=ut[2]+(Rn[0]<0?-Ci:Ci),g=Ai*nt.height+(.5-Ai)*2*Ci*Rn[1]/Rn[0]-ar;const ie=this.calculateImageOrLabelDimensions_(nt.width,nt.height,ut[0],ut[1],nt.width,nt.height,m,g,0,0,ut[3],ir,!1,Ne,!1,W);if(l&&p==="declutter"&&l.collides(ie.declutterBox))break t;jt.push([t,e,nt,ie,1,null,null])}if(k)for(kt=0,ne=Lt.length;kt<ne;++kt){ut=Lt[kt],ae=ut[4],nt=this.createLabel(ae,w,k,""),m=ut[2],g=Ai*nt.height-ar;const ie=this.calculateImageOrLabelDimensions_(nt.width,nt.height,ut[0],ut[1],nt.width,nt.height,m,g,0,0,ut[3],ir,!1,Ne,!1,W);if(l&&p==="declutter"&&l.collides(ie.declutterBox))break t;jt.push([t,e,nt,ie,1,null,null])}l&&p!=="none"&&l.load(jt.map(Cr));for(let ie=0,uh=jt.length;ie<uh;++ie)this.replayImageOrLabel_.apply(this,jt[ie])}}++_;break;case D.END_GEOMETRY:if(r!==void 0){W=A[1];const Ct=r(W,et,p);if(Ct)return Ct}++_;break;case D.FILL:H?O++:this.fill_(t),++_;break;case D.MOVE_TO_LINE_TO:for(f=A[1],d=A[2],Q=c[f],J=c[f+1],t.moveTo(Q,J),y=Q+.5|0,x=J+.5|0,f+=2;f<d;f+=2)Q=c[f],J=c[f+1],b=Q+.5|0,v=J+.5|0,(f==d-2||b!==y||v!==x)&&(t.lineTo(Q,J),y=b,x=v);++_;break;case D.SET_FILL_STYLE:this.alignAndScaleFill_=A[2],O&&(this.fill_(t),O=0,T&&(t.stroke(),T=0)),t.fillStyle=A[1],++_;break;case D.SET_STROKE_STYLE:T&&(t.stroke(),T=0),this.setStrokeStyle_(t,A),++_;break;case D.STROKE:H?T++:t.stroke(),++_;break;default:++_;break}}O&&this.fill_(t),T&&t.stroke()}execute(t,e,a,i,s,r){this.viewRotation_=i,this.execute_(t,e,a,this.instructions,s,void 0,void 0,r)}executeHitDetection(t,e,a,i,s){return this.viewRotation_=a,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,i,s)}}const Oe=["Polygon","Circle","LineString","Image","Text","Default"],el=["Image","Text"],b_=Oe.filter(n=>!el.includes(n));class x_{constructor(t,e,a,i,s,r,o){this.maxExtent_=t,this.overlaps_=i,this.pixelRatio_=a,this.resolution_=e,this.renderBuffer_=r,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Be(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(t,e){const a=this.getClipCoords(e);t.beginPath(),t.moveTo(a[0],a[1]),t.lineTo(a[2],a[3]),t.lineTo(a[4],a[5]),t.lineTo(a[6],a[7]),t.clip()}createExecutors_(t,e){for(const a in t){let i=this.executorsByZIndex_[a];i===void 0&&(i={},this.executorsByZIndex_[a]=i);const s=t[a];for(const r in s){const o=s[r];i[r]=new y_(this.resolution_,this.pixelRatio_,this.overlaps_,o,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const a=this.executorsByZIndex_[e];for(let i=0,s=t.length;i<s;++i)if(t[i]in a)return!0}return!1}forEachFeatureAtCoordinate(t,e,a,i,s,r){i=Math.round(i);const o=i*2+1,l=aa(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-a,-t[0],-t[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=yt(o,o));const c=this.hitDetectionContext_;c.canvas.width!==o||c.canvas.height!==o?(c.canvas.width=o,c.canvas.height=o):h||c.clearRect(0,0,o,o);let _;this.renderBuffer_!==void 0&&(_=ti(),zh(_,t),vs(_,e*(this.renderBuffer_+i),_));const u=v_(i);let f;function d(v,M,R){const w=c.getImageData(0,0,o,o).data;for(let I=0,k=u.length;I<k;I++)if(w[u[I]]>0){if(!r||R==="none"||f!=="Image"&&f!=="Text"||r.includes(v)){const O=(u[I]-3)/4,T=i-O%o,G=i-(O/o|0),N=s(v,M,T*T+G*G);if(N)return N}c.clearRect(0,0,o,o);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(qn);let g,p,y,x,b;for(g=m.length-1;g>=0;--g){const v=m[g].toString();for(y=this.executorsByZIndex_[v],p=Oe.length-1;p>=0;--p)if(f=Oe[p],x=y[f],x!==void 0&&(b=x.executeHitDetection(c,l,a,d,_),b))return b}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const a=e[0],i=e[1],s=e[2],r=e[3],o=[a,i,a,r,s,r,s,i];return Xn(o,0,8,2,t,o),o}isEmpty(){return na(this.executorsByZIndex_)}execute(t,e,a,i,s,r,o){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(o?Vh:qn),r=r||Oe;const h=Oe.length;for(let c=0,_=l.length;c<_;++c){const u=l[c].toString(),f=this.executorsByZIndex_[u];for(let d=0,m=r.length;d<m;++d){const g=r[d],p=f[g];if(p!==void 0){const y=o===null?void 0:p.getZIndexContext(),x=y?y.getContext():t,b=this.maxExtent_&&g!=="Image"&&g!=="Text";if(b&&(x.save(),this.clip(x,a)),!y||g==="Text"||g==="Image"?p.execute(x,e,a,i,s,o):y.pushFunction(v=>p.execute(v,e,a,i,s,o)),b&&x.restore(),y){y.offset();const v=l[c]*h+Oe.indexOf(g);this.deferredZIndexContexts_[v]||(this.deferredZIndexContexts_[v]=[]),this.deferredZIndexContexts_[v].push(y)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,e=Object.keys(t).map(Number).sort(qn);for(let a=0,i=e.length;a<i;++a)t[e[a]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),t[e[a]].length=0}}const ji={};function v_(n){if(ji[n]!==void 0)return ji[n];const t=n*2+1,e=n*n,a=new Array(e+1);for(let s=0;s<=n;++s)for(let r=0;r<=n;++r){const o=s*s+r*r;if(o>e)break;let l=a[o];l||(l=[],a[o]=l),l.push(((n+s)*t+(n+r))*4+3),s>0&&l.push(((n-s)*t+(n+r))*4+3),r>0&&(l.push(((n+s)*t+(n-r))*4+3),s>0&&l.push(((n-s)*t+(n-r))*4+3))}const i=[];for(let s=0,r=a.length;s<r;++s)a[s]&&i.push(...a[s]);return ji[n]=i,i}function kr(n,t,e,a){return e!==void 0&&a!==void 0?[e/n,a/t]:e!==void 0?e/n:a!==void 0?a/t:1}class gi extends fi{constructor(t){t=t||{};const e=t.opacity!==void 0?t.opacity:1,a=t.rotation!==void 0?t.rotation:0,i=t.scale!==void 0?t.scale:1,s=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:a,scale:i,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const r=t.img!==void 0?t.img:null;let o=t.src;gt(!(o!==void 0&&r),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&r&&(o=r.src||ot(r)),gt(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),gt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(t.src!==void 0?l=j.IDLE:r!==void 0&&("complete"in r?r.complete?l=r.src?j.LOADED:j.IDLE:l=j.LOADING:l=j.LOADED),this.color_=t.color!==void 0?_n(t.color):null,this.iconImage_=Is(r,o,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,t.width!==void 0||t.height!==void 0){let h,c;if(t.size)[h,c]=t.size;else{const _=this.getImage(1);if(_.width&&_.height)h=_.width,c=_.height;else if(_ instanceof HTMLImageElement){this.initialOptions_=t;const u=()=>{if(this.unlistenImageChange(u),!this.initialOptions_)return;const f=this.iconImage_.getSize();this.setScale(kr(f[0],f[1],t.width,t.height))};this.listenImageChange(u);return}}h!==void 0&&this.setScale(kr(h,c,t.width,t.height))}}clone(){let t,e,a;return this.initialOptions_?(e=this.initialOptions_.width,a=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new gi({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:a,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=i[0]),this.anchorYUnits_=="fraction"&&(t[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+i[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),a=this.getScaleArray();return[t[0]-e[0]/a[0],t[1]+e[1]/a[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const e=this.getSize(),a=this.iconImage_.getSize();if(!e||!a)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=a[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=a[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==j.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==j.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(he.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(he.CHANGE,t)}ready(){return this.iconImage_.ready()}}const Yt=.5;function M_(n,t,e,a,i,s,r,o,l){const h=i,c=n[0]*Yt,_=n[1]*Yt,u=yt(c,_);u.imageSmoothingEnabled=!1;const f=u.canvas,d=new Fc(u,Yt,i,null,r,o,null),m=e.length,g=Math.floor((256*256*256-1)/m),p={};for(let x=1;x<=m;++x){const b=e[x-1],v=b.getStyleFunction()||a;if(!v)continue;let M=v(b,s);if(!M)continue;Array.isArray(M)||(M=[M]);const w=(x*g).toString(16).padStart(7,"#00000");for(let I=0,k=M.length;I<k;++I){const O=M[I],T=O.getGeometryFunction()(b);if(!T||!$t(h,T.getExtent()))continue;const G=O.clone(),N=G.getFill();N&&N.setColor(w);const Y=G.getStroke();Y&&(Y.setColor(w),Y.setLineDash(null)),G.setText(void 0);const B=O.getImage();if(B){const J=B.getImageSize();if(!J)continue;const et=yt(J[0],J[1],void 0,{alpha:!1}),A=et.canvas;et.fillStyle=w,et.fillRect(0,0,A.width,A.height),G.setImage(new gi({img:A,anchor:B.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:B.getOrigin(),opacity:1,size:B.getSize(),scale:B.getScale(),rotation:B.getRotation(),rotateWithView:B.getRotateWithView()}))}const H=G.getZIndex()||0;let W=p[H];W||(W={},p[H]=W,W.Polygon=[],W.Circle=[],W.LineString=[],W.Point=[]);const Q=T.getType();if(Q==="GeometryCollection"){const J=T.getGeometriesArrayRecursive();for(let et=0,A=J.length;et<A;++et){const Ie=J[et];W[Ie.getType().replace("Multi","")].push(Ie,G)}}else W[Q.replace("Multi","")].push(T,G)}}const y=Object.keys(p).map(Number).sort(qn);for(let x=0,b=y.length;x<b;++x){const v=p[y[x]];for(const M in v){const R=v[M];for(let w=0,I=R.length;w<I;w+=2){d.setStyle(R[w+1]);for(let k=0,O=t.length;k<O;++k)d.setTransform(t[k]),d.drawGeometry(R[w])}}}return u.getImageData(0,0,f.width,f.height)}function w_(n,t,e){const a=[];if(e){const i=Math.floor(Math.round(n[0])*Yt),s=Math.floor(Math.round(n[1])*Yt),r=(it(i,0,e.width-1)+it(s,0,e.height-1)*e.width)*4,o=e.data[r],l=e.data[r+1],c=e.data[r+2]+256*(l+256*o),_=Math.floor((256*256*256-1)/t.length);c&&c%_===0&&a.push(t[c/_-1])}return a}class E_ extends xs{constructor(t,e,a,i){super(t),this.inversePixelTransform=e,this.frameState=a,this.context=i}}const S_=5;class R_ extends qh{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=S_}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return ct()}getData(t){return null}prepareFrame(t){return ct()}renderFrame(t,e){return ct()}forEachFeatureAtCoordinate(t,e,a,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;(e.getState()===j.LOADED||e.getState()===j.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=j.LOADED&&e!=j.ERROR&&t.addEventListener(he.CHANGE,this.boundHandleImageChange_),e==j.IDLE&&(t.load(),e=t.getState()),e==j.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const Tr=[];let Qe=null;function I_(){Qe=yt(1,1,void 0,{willReadFrequently:!0})}class A_ extends R_{constructor(t){super(t),this.container=null,this.tempTransform=Be(),this.pixelTransform=Be(),this.inversePixelTransform=Be(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,e,a){Qe||I_(),Qe.clearRect(0,0,1,1);let i;try{Qe.drawImage(t,e,a,1,1,0,0,1,1),i=Qe.getImageData(0,0,1,1).data}catch{return Qe=null,null}return i}getBackground(t){let a=this.getLayer().getBackground();return typeof a=="function"&&(a=a(t.viewState.resolution)),a||void 0}useContainer(t,e,a){const i=this.getLayer().getClassName();let s,r;if(t&&t.className===i&&(!a||t&&t.style.backgroundColor&&pa(_n(t.style.backgroundColor),_n(a)))){const o=t.firstElementChild;o instanceof HTMLCanvasElement&&(r=o.getContext("2d"))}if(r&&Dh(r.canvas.style.transform,e)?(this.container=t,this.context=r,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=i;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",r=yt();const l=r.canvas;s.appendChild(l),o=l.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=r}!this.containerReused&&a&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=a)}clipUnrotated(t,e,a){const i=Nh(a),s=Ph(a),r=Fh(a),o=Bh(a);It(e.coordinateToPixelTransform,i),It(e.coordinateToPixelTransform,s),It(e.coordinateToPixelTransform,r),It(e.coordinateToPixelTransform,o);const l=this.inversePixelTransform;It(l,i),It(l,s),It(l,r),It(l,o),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.clip()}prepareContainer(t,e){const a=t.extent,i=t.viewState.resolution,s=t.viewState.rotation,r=t.pixelRatio,o=Math.round(le(a)/i*r),l=Math.round(ga(a)/i*r);aa(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/r,1/r,s,-o/2,-l/2),Gh(this.inversePixelTransform,this.pixelTransform);const h=Uh(this.pixelTransform);if(this.useContainer(e,h,this.getBackground(t)),!this.containerReused){const c=this.context.canvas;c.width!=o||c.height!=l?(c.width=o,c.height=l):this.context.clearRect(0,0,o,l),h!==c.style.transform&&(c.style.transform=h)}}dispatchRenderEvent_(t,e,a){const i=this.getLayer();if(i.hasListener(t)){const s=new E_(t,this.inversePixelTransform,a,e);i.dispatchEvent(s)}}preRender(t,e){this.frameState=e,!e.declutter&&this.dispatchRenderEvent_(De.PRERENDER,t,e)}postRender(t,e){e.declutter||this.dispatchRenderEvent_(De.POSTRENDER,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new tl),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(De.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(De.POSTRENDER,this.context,t))}getRenderTransform(t,e,a,i,s,r,o){const l=s/2,h=r/2,c=i/e,_=-c,u=-t[0]+o,f=-t[1];return aa(this.tempTransform,l,h,c,_,-a,u,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class C_ extends A_{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=ti(),this.wrappedRenderedExtent_=ti(),this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,e,a){const i=e.extent,s=e.viewState,r=s.center,o=s.resolution,l=s.projection,h=s.rotation,c=l.getExtent(),_=this.getLayer().getSource(),u=this.getLayer().getDeclutter(),f=e.pixelRatio,d=e.viewHints,m=!(d[Dt.ANIMATING]||d[Dt.INTERACTING]),g=this.context,p=Math.round(le(i)/o*f),y=Math.round(ga(i)/o*f),x=_.getWrapX()&&l.canWrapX(),b=x?le(c):null,v=x?Math.ceil((i[2]-c[2])/b)+1:1;let M=x?Math.floor((i[0]-c[0])/b):0;do{let R=this.getRenderTransform(r,o,0,f,p,y,M*b);e.declutter&&(R=R.slice(0)),t.execute(g,[g.canvas.width,g.canvas.height],R,h,m,a===void 0?Oe:a?el:b_,a?u&&e.declutter[u]:void 0)}while(++M<v)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=yt(this.context.canvas.width,this.context.canvas.height,Tr))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,mc(this.context),Tr.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,e){const a=t.layerStatesArray[t.layerIndex];this.opacity_=a.opacity;const i=t.viewState;this.prepareContainer(t,e);const s=this.context,r=this.replayGroup_;let o=r&&!r.isEmpty();if(!o&&!(this.getLayer().hasListener(De.PRERENDER)||this.getLayer().hasListener(De.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,t),this.clipped_=!1,o&&a.extent&&this.clipping){const l=Nn(a.extent);o=$t(l,t.extent),this.clipped_=o&&!Dn(l,t.extent),this.clipped_&&this.clipUnrotated(s,t,l)}return o&&this.renderWorlds(r,t,this.getLayer().getDeclutter()?!1:void 0),!t.declutter&&this.clipped_&&s.restore(),this.postRender(s,t),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise(e=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const a=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,r=this.renderedRotation_,o=this.renderedProjection_,l=this.wrappedRenderedExtent_,h=this.getLayer(),c=[],_=a[0]*Yt,u=a[1]*Yt;c.push(this.getRenderTransform(i,s,r,Yt,_,u,0).slice());const f=h.getSource(),d=o.getExtent();if(f.getWrapX()&&o.canWrapX()&&!Dn(d,l)){let m=l[0];const g=le(d);let p=0,y;for(;m<d[0];)--p,y=g*p,c.push(this.getRenderTransform(i,s,r,Yt,_,u,y).slice()),m+=g;for(p=0,m=l[2];m>d[2];)++p,y=g*p,c.push(this.getRenderTransform(i,s,r,Yt,_,u,y).slice()),m-=g}this.hitDetectionImageData_=M_(a,c,this.renderedFeatures_,h.getStyleFunction(),l,s,r,xr(s,this.renderedPixelRatio_))}e(w_(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,a,i,s){var u,f;if(!this.replayGroup_)return;const r=e.viewState.resolution,o=e.viewState.rotation,l=this.getLayer(),h={},c=function(d,m,g){const p=ot(d),y=h[p];if(y){if(y!==!0&&g<y.distanceSq){if(g===0)return h[p]=!0,s.splice(s.lastIndexOf(y),1),i(d,l,m);y.geometry=m,y.distanceSq=g}}else{if(g===0)return h[p]=!0,i(d,l,m);s.push(h[p]={feature:d,layer:l,geometry:m,distanceSq:g,callback:i})}},_=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(t,r,o,a,c,_?(f=(u=e.declutter)==null?void 0:u[_])==null?void 0:f.all().map(d=>d.value):null)}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),a=e.getSource();if(!a)return!1;const i=t.viewHints[Dt.ANIMATING],s=t.viewHints[Dt.INTERACTING],r=e.getUpdateWhileAnimating(),o=e.getUpdateWhileInteracting();if(this.ready&&!r&&i||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,h=t.viewState,c=h.projection,_=h.resolution,u=t.pixelRatio,f=e.getRevision(),d=e.getRenderBuffer();let m=e.getRenderOrder();m===void 0&&(m=Gc);const g=h.center.slice(),p=vs(l,d*_),y=p.slice(),x=[p.slice()],b=c.getExtent();if(a.getWrapX()&&c.canWrapX()&&!Dn(b,t.extent)){const N=le(b),Y=Math.max(le(p)/2,N);p[0]=b[0]-Y,p[2]=b[2]+Y,Th(g,c);const B=Oh(x[0],c);B[0]<b[0]&&B[2]<b[2]?x.push([B[0]+N,B[1],B[2]+N,B[3]]):B[0]>b[0]&&B[2]>b[2]&&x.push([B[0]-N,B[1],B[2]-N,B[3]])}if(this.ready&&this.renderedResolution_==_&&this.renderedRevision_==f&&this.renderedRenderOrder_==m&&this.renderedFrameDeclutter_===!!t.declutter&&Dn(this.wrappedRenderedExtent_,p))return pa(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=g,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const v=new d_($o(_,u),p,_,u);let M;for(let N=0,Y=x.length;N<Y;++N)a.loadFeatures(x[N],_,c);const R=xr(_,u);let w=!0;const I=(N,Y)=>{let B;const H=N.getStyleFunction()||e.getStyleFunction();if(H&&(B=H(N,_)),B){const W=this.renderFeature(N,R,B,v,M,this.getLayer().getDeclutter(),Y);w=w&&!W}},k=Go(p),O=a.getFeaturesInExtent(k);m&&O.sort(m);for(let N=0,Y=O.length;N<Y;++N)I(O[N],N);this.renderedFeatures_=O,this.ready=w;const T=v.finish(),G=new x_(p,_,u,a.getOverlaps(),T,e.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=_,this.renderedRevision_=f,this.renderedRenderOrder_=m,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=y,this.wrappedRenderedExtent_=p,this.renderedCenter_=g,this.renderedProjection_=c,this.renderedPixelRatio_=u,this.replayGroup_=G,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,a,i,s,r,o){if(!a)return!1;let l=!1;if(Array.isArray(a))for(let h=0,c=a.length;h<c;++h)l=vr(i,t,a[h],e,this.boundHandleStyleImageChange_,s,r,o)||l;else l=vr(i,t,a,e,this.boundHandleStyleImageChange_,s,r,o);return l}}let He=0;const mt=1<<He++,K=1<<He++,Mt=1<<He++,Bt=1<<He++,Ue=1<<He++,Bn=1<<He++,Pa=Math.pow(2,He)-1,As={[mt]:"boolean",[K]:"number",[Mt]:"string",[Bt]:"color",[Ue]:"number[]",[Bn]:"size"},L_=Object.keys(As).map(Number).sort(qn);function k_(n){return n in As}function Gn(n){const t=[];for(const e of L_)Un(n,e)&&t.push(As[e]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function Un(n,t){return(n&t)===t}function be(n,t){return n===t}class at{constructor(t,e){if(!k_(t))throw new Error(`literal expressions must have a specific type, got ${Gn(t)}`);this.type=t,this.value=e}}class T_{constructor(t,e,...a){this.type=t,this.operator=e,this.args=a}}function nl(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function lt(n,t,e){switch(typeof n){case"boolean":{if(be(t,Mt))return new at(Mt,n?"true":"false");if(!Un(t,mt))throw new Error(`got a boolean, but expected ${Gn(t)}`);return new at(mt,n)}case"number":{if(be(t,Bn))return new at(Bn,dn(n));if(be(t,mt))return new at(mt,!!n);if(be(t,Mt))return new at(Mt,n.toString());if(!Un(t,K))throw new Error(`got a number, but expected ${Gn(t)}`);return new at(K,n)}case"string":{if(be(t,Bt))return new at(Bt,Ss(n));if(be(t,mt))return new at(mt,!!n);if(!Un(t,Mt))throw new Error(`got a string, but expected ${Gn(t)}`);return new at(Mt,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return j_(n,t,e);for(const a of n)if(typeof a!="number")throw new Error("expected an array of numbers");if(be(t,Bn)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new at(Bn,n)}if(be(t,Bt)){if(n.length===3)return new at(Bt,[...n,1]);if(n.length===4)return new at(Bt,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Un(t,Ue))throw new Error(`got an array of numbers, but expected ${Gn(t)}`);return new at(Ue,n)}const E={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},O_={[E.Get]:P(z(1,1/0),Or),[E.Var]:P(z(1,1),D_),[E.Has]:P(z(1,1/0),Or),[E.Id]:P(N_,$e),[E.Concat]:P(z(2,1/0),q(Mt)),[E.GeometryType]:P(P_,$e),[E.LineMetric]:P($e),[E.Resolution]:P(Hi,$e),[E.Zoom]:P(Hi,$e),[E.Time]:P(Hi,$e),[E.Any]:P(z(2,1/0),q(mt)),[E.All]:P(z(2,1/0),q(mt)),[E.Not]:P(z(1,1),q(mt)),[E.Equal]:P(z(2,2),q(Pa)),[E.NotEqual]:P(z(2,2),q(Pa)),[E.GreaterThan]:P(z(2,2),q(K)),[E.GreaterThanOrEqualTo]:P(z(2,2),q(K)),[E.LessThan]:P(z(2,2),q(K)),[E.LessThanOrEqualTo]:P(z(2,2),q(K)),[E.Multiply]:P(z(2,1/0),Dr),[E.Coalesce]:P(z(2,1/0),Dr),[E.Divide]:P(z(2,2),q(K)),[E.Add]:P(z(2,1/0),q(K)),[E.Subtract]:P(z(2,2),q(K)),[E.Clamp]:P(z(3,3),q(K)),[E.Mod]:P(z(2,2),q(K)),[E.Pow]:P(z(2,2),q(K)),[E.Abs]:P(z(1,1),q(K)),[E.Floor]:P(z(1,1),q(K)),[E.Ceil]:P(z(1,1),q(K)),[E.Round]:P(z(1,1),q(K)),[E.Sin]:P(z(1,1),q(K)),[E.Cos]:P(z(1,1),q(K)),[E.Atan]:P(z(1,2),q(K)),[E.Sqrt]:P(z(1,1),q(K)),[E.Match]:P(z(4,1/0),Nr,B_),[E.Between]:P(z(3,3),q(K)),[E.Interpolate]:P(z(6,1/0),Nr,G_),[E.Case]:P(z(3,1/0),F_,U_),[E.In]:P(z(2,2),z_),[E.Number]:P(z(1,1/0),q(Pa)),[E.String]:P(z(1,1/0),q(Pa)),[E.Array]:P(z(1,1/0),q(K)),[E.Color]:P(z(1,4),q(K)),[E.Band]:P(z(1,3),q(K)),[E.Palette]:P(z(2,2),V_),[E.ToString]:P(z(1,1),q(mt|K|Mt|Bt))};function Or(n,t,e){const a=n.length-1,i=new Array(a);for(let s=0;s<a;++s){const r=n[s+1];switch(typeof r){case"number":{i[s]=new at(K,r);break}case"string":{i[s]=new at(Mt,r);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${r}`)}s===0&&e.properties.add(String(r))}return i}function D_(n,t,e){const a=n[1];if(typeof a!="string")throw new Error("expected a string argument for var operation");return e.variables.add(a),[new at(Mt,a)]}function N_(n,t,e){e.featureId=!0}function P_(n,t,e){e.geometryType=!0}function Hi(n,t,e){e.mapState=!0}function $e(n,t,e){const a=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${a} operation`);return[]}function z(n,t){return function(e,a,i){const s=e[0],r=e.length-1;if(n===t){if(r!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${s}, got ${r}`)}}else if(r<n||r>t){const o=t===1/0?`${n} or more`:`${n} to ${t}`;throw new Error(`expected ${o} arguments for ${s}, got ${r}`)}}}function Dr(n,t,e){const a=n.length-1,i=new Array(a);for(let s=0;s<a;++s){const r=lt(n[s+1],t,e);i[s]=r}return i}function q(n){return function(t,e,a){const i=t.length-1,s=new Array(i);for(let r=0;r<i;++r){const o=lt(t[r+1],n,a);s[r]=o}return s}}function F_(n,t,e){const a=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${a}, got ${i} instead`)}function Nr(n,t,e){const a=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${a}, got ${i} instead`)}function B_(n,t,e){const a=n.length-1,i=Mt|K|mt,s=lt(n[1],i,e),r=lt(n[n.length-1],t,e),o=new Array(a-2);for(let l=0;l<a-2;l+=2){try{const h=lt(n[l+2],s.type,e);o[l]=h}catch(h){throw new Error(`failed to parse argument ${l+1} of match expression: ${h.message}`)}try{const h=lt(n[l+3],r.type,e);o[l+1]=h}catch(h){throw new Error(`failed to parse argument ${l+2} of match expression: ${h.message}`)}}return[s,...o,r]}function G_(n,t,e){const a=n[1];let i;switch(a[0]){case"linear":i=1;break;case"exponential":const l=a[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);i=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(a)}`)}const s=new at(K,i);let r;try{r=lt(n[2],K,e)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const o=new Array(n.length-3);for(let l=0;l<o.length;l+=2){try{const h=lt(n[l+3],K,e);o[l]=h}catch(h){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${h.message}`)}try{const h=lt(n[l+4],t,e);o[l+1]=h}catch(h){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${h.message}`)}}return[s,r,...o]}function U_(n,t,e){const a=lt(n[n.length-1],t,e),i=new Array(n.length-1);for(let s=0;s<i.length-1;s+=2){try{const r=lt(n[s+1],mt,e);i[s]=r}catch(r){throw new Error(`failed to parse argument ${s} of case expression: ${r.message}`)}try{const r=lt(n[s+2],a.type,e);i[s+1]=r}catch(r){throw new Error(`failed to parse argument ${s+1} of case expression: ${r.message}`)}}return i[i.length-1]=a,i}function z_(n,t,e){let a=n[2];if(!Array.isArray(a))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof a[0]=="string"){if(a[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(a[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');a=a[1],i=Mt}else i=K;const s=new Array(a.length);for(let o=0;o<s.length;o++)try{const l=lt(a[o],i,e);s[o]=l}catch(l){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${l.message}`)}return[lt(n[1],i,e),...s]}function V_(n,t,e){let a;try{a=lt(n[1],K,e)}catch(r){throw new Error(`failed to parse first argument in palette expression: ${r.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let r=0;r<s.length;r++){let o;try{o=lt(i[r],Bt,e)}catch(l){throw new Error(`failed to parse color at index ${r} in palette expression: ${l.message}`)}if(!(o instanceof at))throw new Error(`the palette color at index ${r} must be a literal value`);s[r]=o}return[a,...s]}function P(...n){return function(t,e,a){const i=t[0];let s;for(let r=0;r<n.length;r++){const o=n[r](t,e,a);if(r==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new T_(e,i,...s)}}function j_(n,t,e){const a=n[0],i=O_[a];if(!i)throw new Error(`unknown operator: ${a}`);return i(n,t,e)}function al(n){if(!n)return"";const t=n.getType();switch(t){case"Point":case"LineString":case"Polygon":return t;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return al(n.getGeometries()[0]);default:return""}}function il(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function fe(n,t,e){const a=lt(n,t,e);return zt(a)}function zt(n,t){if(n instanceof at){if(n.type===Bt&&typeof n.value=="string"){const a=Ss(n.value);return function(){return a}}return function(){return n.value}}const e=n.operator;switch(e){case E.Number:case E.String:case E.Coalesce:return H_(n);case E.Get:case E.Var:case E.Has:return K_(n);case E.Id:return a=>a.featureId;case E.GeometryType:return a=>a.geometryType;case E.Concat:{const a=n.args.map(i=>zt(i));return i=>"".concat(...a.map(s=>s(i).toString()))}case E.Resolution:return a=>a.resolution;case E.Any:case E.All:case E.Between:case E.In:case E.Not:return q_(n);case E.Equal:case E.NotEqual:case E.LessThan:case E.LessThanOrEqualTo:case E.GreaterThan:case E.GreaterThanOrEqualTo:return W_(n);case E.Multiply:case E.Divide:case E.Add:case E.Subtract:case E.Clamp:case E.Mod:case E.Pow:case E.Abs:case E.Floor:case E.Ceil:case E.Round:case E.Sin:case E.Cos:case E.Atan:case E.Sqrt:return X_(n);case E.Case:return $_(n);case E.Match:return Y_(n);case E.Interpolate:return Z_(n);case E.ToString:return J_(n);default:throw new Error(`Unsupported operator ${e}`)}}function H_(n,t){const e=n.operator,a=n.args.length,i=new Array(a);for(let s=0;s<a;++s)i[s]=zt(n.args[s]);switch(e){case E.Coalesce:return s=>{for(let r=0;r<a;++r){const o=i[r](s);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case E.Number:case E.String:return s=>{for(let r=0;r<a;++r){const o=i[r](s);if(typeof o===e)return o}throw new Error(`Expected one of the values to be a ${e}`)};default:throw new Error(`Unsupported assertion operator ${e}`)}}function K_(n,t){const a=n.args[0].value;switch(n.operator){case E.Get:return i=>{const s=n.args;let r=i.properties[a];for(let o=1,l=s.length;o<l;++o){const c=s[o].value;r=r[c]}return r};case E.Var:return i=>i.variables[a];case E.Has:return i=>{const s=n.args;if(!(a in i.properties))return!1;let r=i.properties[a];for(let o=1,l=s.length;o<l;++o){const c=s[o].value;if(!r||!Object.hasOwn(r,c))return!1;r=r[c]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function W_(n,t){const e=n.operator,a=zt(n.args[0]),i=zt(n.args[1]);switch(e){case E.Equal:return s=>a(s)===i(s);case E.NotEqual:return s=>a(s)!==i(s);case E.LessThan:return s=>a(s)<i(s);case E.LessThanOrEqualTo:return s=>a(s)<=i(s);case E.GreaterThan:return s=>a(s)>i(s);case E.GreaterThanOrEqualTo:return s=>a(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${e}`)}}function q_(n,t){const e=n.operator,a=n.args.length,i=new Array(a);for(let s=0;s<a;++s)i[s]=zt(n.args[s]);switch(e){case E.Any:return s=>{for(let r=0;r<a;++r)if(i[r](s))return!0;return!1};case E.All:return s=>{for(let r=0;r<a;++r)if(!i[r](s))return!1;return!0};case E.Between:return s=>{const r=i[0](s),o=i[1](s),l=i[2](s);return r>=o&&r<=l};case E.In:return s=>{const r=i[0](s);for(let o=1;o<a;++o)if(r===i[o](s))return!0;return!1};case E.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${e}`)}}function X_(n,t){const e=n.operator,a=n.args.length,i=new Array(a);for(let s=0;s<a;++s)i[s]=zt(n.args[s]);switch(e){case E.Multiply:return s=>{let r=1;for(let o=0;o<a;++o)r*=i[o](s);return r};case E.Divide:return s=>i[0](s)/i[1](s);case E.Add:return s=>{let r=0;for(let o=0;o<a;++o)r+=i[o](s);return r};case E.Subtract:return s=>i[0](s)-i[1](s);case E.Clamp:return s=>{const r=i[0](s),o=i[1](s);if(r<o)return o;const l=i[2](s);return r>l?l:r};case E.Mod:return s=>i[0](s)%i[1](s);case E.Pow:return s=>Math.pow(i[0](s),i[1](s));case E.Abs:return s=>Math.abs(i[0](s));case E.Floor:return s=>Math.floor(i[0](s));case E.Ceil:return s=>Math.ceil(i[0](s));case E.Round:return s=>Math.round(i[0](s));case E.Sin:return s=>Math.sin(i[0](s));case E.Cos:return s=>Math.cos(i[0](s));case E.Atan:return a===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case E.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${e}`)}}function $_(n,t){const e=n.args.length,a=new Array(e);for(let i=0;i<e;++i)a[i]=zt(n.args[i]);return i=>{for(let s=0;s<e-1;s+=2)if(a[s](i))return a[s+1](i);return a[e-1](i)}}function Y_(n,t){const e=n.args.length,a=new Array(e);for(let i=0;i<e;++i)a[i]=zt(n.args[i]);return i=>{const s=a[0](i);for(let r=1;r<e-1;r+=2)if(s===a[r](i))return a[r+1](i);return a[e-1](i)}}function Z_(n,t){const e=n.args.length,a=new Array(e);for(let i=0;i<e;++i)a[i]=zt(n.args[i]);return i=>{const s=a[0](i),r=a[1](i);let o,l;for(let h=2;h<e;h+=2){const c=a[h](i);let _=a[h+1](i);const u=Array.isArray(_);if(u&&(_=wc(_)),c>=r)return h===2?_:u?Q_(s,r,o,l,c,_):zn(s,r,o,l,c,_);o=c,l=_}return l}}function J_(n,t){const e=n.operator,a=n.args.length,i=new Array(a);for(let s=0;s<a;++s)i[s]=zt(n.args[s]);switch(e){case E.ToString:return s=>{const r=i[0](s);return n.args[0].type===Bt?Rs(r):r.toString()};default:throw new Error(`Unsupported convert operator ${e}`)}}function zn(n,t,e,a,i,s){const r=i-e;if(r===0)return a;const o=t-e,l=n===1?o/r:(Math.pow(n,o)-1)/(Math.pow(n,r)-1);return a+l*(s-a)}function Q_(n,t,e,a,i,s){if(i-e===0)return a;const o=gr(a),l=gr(s);let h=l[2]-o[2];h>180?h-=360:h<-180&&(h+=360);const c=[zn(n,t,e,o[0],i,l[0]),zn(n,t,e,o[1],i,l[1]),o[2]+zn(n,t,e,0,i,h),zn(n,t,e,a[3],i,s[3])];return Ec(c)}function tu(n){return!0}function eu(n){const t=nl(),e=nu(n,t),a=il();return function(i,s){if(a.properties=i.getPropertiesInternal(),a.resolution=s,t.featureId){const r=i.getId();r!==void 0?a.featureId=r:a.featureId=null}return t.geometryType&&(a.geometryType=al(i.getGeometry())),e(a)}}function Pr(n){const t=nl(),e=n.length,a=new Array(e);for(let r=0;r<e;++r)a[r]=rs(n[r],t);const i=il(),s=new Array(e);return function(r,o){if(i.properties=r.getPropertiesInternal(),i.resolution=o,t.featureId){const h=r.getId();h!==void 0?i.featureId=h:i.featureId=null}let l=0;for(let h=0;h<e;++h){const c=a[h](i);c&&(s[l]=c,l+=1)}return s.length=l,s}}function nu(n,t){const e=n.length,a=new Array(e);for(let i=0;i<e;++i){const s=n[i],r="filter"in s?fe(s.filter,mt,t):tu;let o;if(Array.isArray(s.style)){const l=s.style.length;o=new Array(l);for(let h=0;h<l;++h)o[h]=rs(s.style[h],t)}else o=[rs(s.style,t)];a[i]={filter:r,styles:o}}return function(i){const s=[];let r=!1;for(let o=0;o<e;++o){const l=a[o].filter;if(l(i)&&!(n[o].else&&r)){r=!0;for(const h of a[o].styles){const c=h(i);c&&s.push(c)}}}return s}}function rs(n,t){const e=la(n,"",t),a=ha(n,"",t),i=au(n,t),s=iu(n,t),r=wt(n,"z-index",t);if(!e&&!a&&!i&&!s&&!na(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new Gt;return function(l){let h=!0;if(e){const c=e(l);c&&(h=!1),o.setFill(c)}if(a){const c=a(l);c&&(h=!1),o.setStroke(c)}if(i){const c=i(l);c&&(h=!1),o.setText(c)}if(s){const c=s(l);c&&(h=!1),o.setImage(c)}return r&&o.setZIndex(r(l)),h?null:o}}function la(n,t,e){let a;if(t+"fill-pattern-src"in n)a=lu(n,t+"fill-",e);else{if(n[t+"fill-color"]==="none")return s=>null;a=Cs(n,t+"fill-color",e)}if(!a)return null;const i=new Nt;return function(s){const r=a(s);return r===Es?null:(i.setColor(r),i)}}function ha(n,t,e){const a=wt(n,t+"stroke-width",e),i=Cs(n,t+"stroke-color",e);if(!a&&!i)return null;const s=oe(n,t+"stroke-line-cap",e),r=oe(n,t+"stroke-line-join",e),o=sl(n,t+"stroke-line-dash",e),l=wt(n,t+"stroke-line-dash-offset",e),h=wt(n,t+"stroke-miter-limit",e),c=new Ft;return function(_){if(i){const u=i(_);if(u===Es)return null;c.setColor(u)}if(a&&c.setWidth(a(_)),s){const u=s(_);if(u!=="butt"&&u!=="round"&&u!=="square")throw new Error("Expected butt, round, or square line cap");c.setLineCap(u)}if(r){const u=r(_);if(u!=="bevel"&&u!=="round"&&u!=="miter")throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(u)}return o&&c.setLineDash(o(_)),l&&c.setLineDashOffset(l(_)),h&&c.setMiterLimit(h(_)),c}}function au(n,t){const e="text-",a=oe(n,e+"value",t);if(!a)return null;const i=la(n,e,t),s=la(n,e+"background-",t),r=ha(n,e,t),o=ha(n,e+"background-",t),l=oe(n,e+"font",t),h=wt(n,e+"max-angle",t),c=wt(n,e+"offset-x",t),_=wt(n,e+"offset-y",t),u=on(n,e+"overflow",t),f=oe(n,e+"placement",t),d=wt(n,e+"repeat",t),m=pi(n,e+"scale",t),g=on(n,e+"rotate-with-view",t),p=wt(n,e+"rotation",t),y=oe(n,e+"align",t),x=oe(n,e+"justify",t),b=oe(n,e+"baseline",t),v=on(n,e+"keep-upright",t),M=sl(n,e+"padding",t),R=yi(n,e+"declutter-mode"),w=new Pe({declutterMode:R});return function(I){if(w.setText(a(I)),i&&w.setFill(i(I)),s&&w.setBackgroundFill(s(I)),r&&w.setStroke(r(I)),o&&w.setBackgroundStroke(o(I)),l&&w.setFont(l(I)),h&&w.setMaxAngle(h(I)),c&&w.setOffsetX(c(I)),_&&w.setOffsetY(_(I)),u&&w.setOverflow(u(I)),f){const k=f(I);if(k!=="point"&&k!=="line")throw new Error("Expected point or line for text-placement");w.setPlacement(k)}if(d&&w.setRepeat(d(I)),m&&w.setScale(m(I)),g&&w.setRotateWithView(g(I)),p&&w.setRotation(p(I)),y){const k=y(I);if(k!=="left"&&k!=="center"&&k!=="right"&&k!=="end"&&k!=="start")throw new Error("Expected left, right, center, start, or end for text-align");w.setTextAlign(k)}if(x){const k=x(I);if(k!=="left"&&k!=="right"&&k!=="center")throw new Error("Expected left, right, or center for text-justify");w.setJustify(k)}if(b){const k=b(I);if(k!=="bottom"&&k!=="top"&&k!=="middle"&&k!=="alphabetic"&&k!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");w.setTextBaseline(k)}return M&&w.setPadding(M(I)),v&&w.setKeepUpright(v(I)),w}}function iu(n,t){return"icon-src"in n?su(n,t):"shape-points"in n?ru(n,t):"circle-radius"in n?ou(n,t):null}function su(n,t){const e="icon-",a=e+"src",i=rl(n[a],a),s=ii(n,e+"anchor",t),r=pi(n,e+"scale",t),o=wt(n,e+"opacity",t),l=ii(n,e+"displacement",t),h=wt(n,e+"rotation",t),c=on(n,e+"rotate-with-view",t),_=Br(n,e+"anchor-origin"),u=Gr(n,e+"anchor-x-units"),f=Gr(n,e+"anchor-y-units"),d=uu(n,e+"color"),m=cu(n,e+"cross-origin"),g=_u(n,e+"offset"),p=Br(n,e+"offset-origin"),y=si(n,e+"width"),x=si(n,e+"height"),b=hu(n,e+"size"),v=yi(n,e+"declutter-mode"),M=new gi({src:i,anchorOrigin:_,anchorXUnits:u,anchorYUnits:f,color:d,crossOrigin:m,offset:g,offsetOrigin:p,height:x,width:y,size:b,declutterMode:v});return function(R){return o&&M.setOpacity(o(R)),l&&M.setDisplacement(l(R)),h&&M.setRotation(h(R)),c&&M.setRotateWithView(c(R)),r&&M.setScale(r(R)),s&&M.setAnchor(s(R)),M}}function ru(n,t){const e="shape-",a=e+"points",i=e+"radius",s=os(n[a],a),r=os(n[i],i),o=la(n,e,t),l=ha(n,e,t),h=pi(n,e+"scale",t),c=ii(n,e+"displacement",t),_=wt(n,e+"rotation",t),u=on(n,e+"rotate-with-view",t),f=si(n,e+"radius2"),d=si(n,e+"angle"),m=yi(n,e+"declutter-mode"),g=new di({points:s,radius:r,radius2:f,angle:d,declutterMode:m});return function(p){return o&&g.setFill(o(p)),l&&g.setStroke(l(p)),c&&g.setDisplacement(c(p)),_&&g.setRotation(_(p)),u&&g.setRotateWithView(u(p)),h&&g.setScale(h(p)),g}}function ou(n,t){const e="circle-",a=la(n,e,t),i=ha(n,e,t),s=wt(n,e+"radius",t),r=pi(n,e+"scale",t),o=ii(n,e+"displacement",t),l=wt(n,e+"rotation",t),h=on(n,e+"rotate-with-view",t),c=yi(n,e+"declutter-mode"),_=new mi({radius:5,declutterMode:c});return function(u){return s&&_.setRadius(s(u)),a&&_.setFill(a(u)),i&&_.setStroke(i(u)),o&&_.setDisplacement(o(u)),l&&_.setRotation(l(u)),h&&_.setRotateWithView(h(u)),r&&_.setScale(r(u)),_}}function wt(n,t,e){if(!(t in n))return;const a=fe(n[t],K,e);return function(i){return os(a(i),t)}}function oe(n,t,e){if(!(t in n))return null;const a=fe(n[t],Mt,e);return function(i){return rl(a(i),t)}}function lu(n,t,e){const a=oe(n,t+"pattern-src",e),i=Fr(n,t+"pattern-offset",e),s=Fr(n,t+"pattern-size",e),r=Cs(n,t+"color",e);return function(o){return{src:a(o),offset:i&&i(o),size:s&&s(o),color:r&&r(o)}}}function on(n,t,e){if(!(t in n))return null;const a=fe(n[t],mt,e);return function(i){const s=a(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${t}`);return s}}function Cs(n,t,e){if(!(t in n))return null;const a=fe(n[t],Bt,e);return function(i){return ol(a(i),t)}}function sl(n,t,e){if(!(t in n))return null;const a=fe(n[t],Ue,e);return function(i){return ba(a(i),t)}}function ii(n,t,e){if(!(t in n))return null;const a=fe(n[t],Ue,e);return function(i){const s=ba(a(i),t);if(s.length!==2)throw new Error(`Expected two numbers for ${t}`);return s}}function Fr(n,t,e){if(!(t in n))return null;const a=fe(n[t],Ue,e);return function(i){return ll(a(i),t)}}function pi(n,t,e){if(!(t in n))return null;const a=fe(n[t],Ue|K,e);return function(i){return fu(a(i),t)}}function si(n,t){const e=n[t];if(e!==void 0){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}}function hu(n,t){const e=n[t];if(e!==void 0){if(typeof e=="number")return dn(e);if(!Array.isArray(e))throw new Error(`Expected a number or size array for ${t}`);if(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return e}}function cu(n,t){const e=n[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}}function Br(n,t){const e=n[t];if(e!==void 0){if(e!=="bottom-left"&&e!=="bottom-right"&&e!=="top-left"&&e!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return e}}function Gr(n,t){const e=n[t];if(e!==void 0){if(e!=="pixels"&&e!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return e}}function _u(n,t){const e=n[t];if(e!==void 0)return ba(e,t)}function yi(n,t){const e=n[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);if(e!=="declutter"&&e!=="obstacle"&&e!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return e}}function uu(n,t){const e=n[t];if(e!==void 0)return ol(e,t)}function ba(n,t){if(!Array.isArray(n))throw new Error(`Expected an array for ${t}`);const e=n.length;for(let a=0;a<e;++a)if(typeof n[a]!="number")throw new Error(`Expected an array of numbers for ${t}`);return n}function rl(n,t){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);return n}function os(n,t){if(typeof n!="number")throw new Error(`Expected a number for ${t}`);return n}function ol(n,t){if(typeof n=="string")return n;const e=ba(n,t),a=e.length;if(a<3||a>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return e}function ll(n,t){const e=ba(n,t);if(e.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return e}function fu(n,t){return typeof n=="number"?n:ll(n,t)}const Pt={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Ur(n,t,e){return function(a,i,s,r,o){if(!a)return;if(!i&&!t)return a;const l=t?0:s[0]*i,h=t?0:s[1]*i,c=o?o[0]:0,_=o?o[1]:0;let u=n[0]+l/2+c,f=n[2]-l/2+c,d=n[1]+h/2+_,m=n[3]-h/2+_;u>f&&(u=(f+u)/2,f=u),d>m&&(d=(m+d)/2,m=d);let g=it(a[0],u,f),p=it(a[1],d,m);if(r&&e&&i){const y=30*i;g+=-y*Math.log(1+Math.max(0,u-a[0])/y)+y*Math.log(1+Math.max(0,a[0]-f)/y),p+=-y*Math.log(1+Math.max(0,d-a[1])/y)+y*Math.log(1+Math.max(0,a[1]-m)/y)}return[g,p]}}function du(n){return n}function Ls(n,t,e,a){const i=le(t)/e[0],s=ga(t)/e[1];return a?Math.min(n,Math.max(i,s)):Math.min(n,Math.min(i,s))}function ks(n,t,e){let a=Math.min(n,t);const i=50;return a*=Math.log(1+i*Math.max(0,n/t-1))/i+1,e&&(a=Math.max(a,e),a/=Math.log(1+i*Math.max(0,e/n-1))/i+1),it(a,e/2,t*2)}function mu(n,t,e,a){return t=t!==void 0?t:!0,function(i,s,r,o){if(i!==void 0){const l=n[0],h=n[n.length-1],c=e?Ls(l,e,r,a):l;if(o)return t?ks(i,c,h):it(i,h,c);const _=Math.min(c,i),u=Math.floor(Uo(n,_,s));return n[u]>c&&u<n.length-1?n[u+1]:n[u]}}}function gu(n,t,e,a,i,s){return a=a!==void 0?a:!0,e=e!==void 0?e:0,function(r,o,l,h){if(r!==void 0){const c=i?Ls(t,i,l,s):t;if(h)return a?ks(r,c,e):it(r,e,c);const _=1e-9,u=Math.ceil(Math.log(t/c)/Math.log(n)-_),f=-o*(.5-_)+.5,d=Math.min(c,r),m=Math.floor(Math.log(t/d)/Math.log(n)+f),g=Math.max(u,m),p=t/Math.pow(n,g);return it(p,e,c)}}}function zr(n,t,e,a,i){return e=e!==void 0?e:!0,function(s,r,o,l){if(s!==void 0){const h=a?Ls(n,a,o,i):n;return!e||!l?it(s,t,h):ks(s,h,t)}}}function pu(n){if(n!==void 0)return 0}function Vr(n){if(n!==void 0)return n}function yu(n){const t=2*Math.PI/n;return function(e,a){if(a)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function bu(n){const t=rc(5);return function(e,a){return a||e===void 0?e:Math.abs(e)<=t?0:e}}const xu=256,Ki=0;class jr extends yn{constructor(t){super(),t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.projection_=Ms(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,t.projection&&oc(),t.center&&(t.center=me(t.center)),t.extent&&(t.extent=Nn(t.extent)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const o in Pt)delete e[o];this.setProperties(e,!0);const a=Mu(t);this.maxResolution_=a.maxResolution,this.minResolution_=a.minResolution,this.zoomFactor_=a.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=a.minZoom;const i=vu(t),s=a.constraint,r=wu(t);this.constraints_={center:i,resolution:s,rotation:r},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const a=this.getCenterInternal();if(a){const i=t||[0,0,0,0];e=e||[0,0,0,0];const s=this.getResolution(),r=s/2*(i[3]-e[3]+e[1]-i[1]),o=s/2*(i[0]-e[0]+e[2]-i[2]);this.setCenterInternal([a[0]+r,a[1]-o])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let a=0;a<e.length;++a){let i=arguments[a];i.center&&(i=Object.assign({},i),i.center=me(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=me(i.anchor,this.getProjection())),e[a]=i}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,a;e>1&&typeof arguments[e-1]=="function"&&(a=arguments[e-1],--e);let i=0;for(;i<e&&!this.isDef();++i){const c=arguments[i];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(i===e){a&&Fa(a,!0);return}let s=Date.now(),r=this.targetCenter_.slice(),o=this.targetResolution_,l=this.targetRotation_;const h=[];for(;i<e;++i){const c=arguments[i],_={start:s,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||cc,callback:a};if(c.center&&(_.sourceCenter=r,_.targetCenter=c.center.slice(),r=_.targetCenter),c.zoom!==void 0?(_.sourceResolution=o,_.targetResolution=this.getResolutionForZoom(c.zoom),o=_.targetResolution):c.resolution&&(_.sourceResolution=o,_.targetResolution=c.resolution,o=_.targetResolution),c.rotation!==void 0){_.sourceRotation=l;const u=hr(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;_.targetRotation=l+u,l=_.targetRotation}Eu(_)?_.complete=!0:s+=_.duration,h.push(_)}this.animations_.push(h),this.setHint(Dt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Dt.ANIMATING]>0}getInteracting(){return this.hints_[Dt.INTERACTING]>0}cancelAnimations(){this.setHint(Dt.ANIMATING,-this.hints_[Dt.ANIMATING]);let t;for(let e=0,a=this.animations_.length;e<a;++e){const i=this.animations_[e];if(i[0].callback&&Fa(i[0].callback,!1),!t)for(let s=0,r=i.length;s<r;++s){const o=i[s];if(!o.complete){t=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let a=this.animations_.length-1;a>=0;--a){const i=this.animations_[a];let s=!0;for(let r=0,o=i.length;r<o;++r){const l=i[r];if(l.complete)continue;const h=t-l.start;let c=l.duration>0?h/l.duration:1;c>=1?(l.complete=!0,c=1):s=!1;const _=l.easing(c);if(l.sourceCenter){const u=l.sourceCenter[0],f=l.sourceCenter[1],d=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const g=u+_*(d-u),p=f+_*(m-f);this.targetCenter_=[g,p]}if(l.sourceResolution&&l.targetResolution){const u=_===1?l.targetResolution:l.sourceResolution+_*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),d=this.constraints_.resolution(u,0,f,!0);this.targetCenter_=this.calculateCenterZoom(d,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=u,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const u=_===1?hr(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+_*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(u,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=u}if(this.applyTargetState_(!0),e=!0,!l.complete)break}if(s){this.animations_[a]=null,this.setHint(Dt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const r=i[0].callback;r&&Fa(r,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let a;const i=this.getCenterInternal();return i!==void 0&&(a=[i[0]-e[0],i[1]-e[1]],jh(a,t-this.getRotation()),Hh(a,e)),a}calculateCenterZoom(t,e){let a;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const r=e[0]-t*(e[0]-i[0])/s,o=e[1]-t*(e[1]-i[1])/s;a=[r,o]}return a}getViewportSize_(t){const e=this.viewportSize_;if(t){const a=e[0],i=e[1];return[Math.abs(a*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(a*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&cr(t,this.getProjection())}getCenterInternal(){return this.get(Pt.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return Go(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();gt(e,"The view center is not defined");const a=this.getResolution();gt(a!==void 0,"The view resolution is not defined");const i=this.getRotation();return gt(i!==void 0,"The view rotation is not defined"),Kh(e,a,i,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Pt.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Nn(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const a=le(t)/e[0],i=ga(t)/e[1];return Math.max(a,i)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,i=Math.log(e/a)/Math.log(t);return function(s){return e/Math.pow(t,s*i)}}getRotation(){return this.get(Pt.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),a=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(a/i)/e;return function(r){return Math.log(a/r)/e/s}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const a=this.padding_;return a&&(e=[e[0]-a[1]-a[3],e[1]-a[0]-a[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),a=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const r=this.getViewportSizeMinusPadding_();i=Wi(i,this.getViewportSize_(),[r[0]/2+s[3],r[1]/2+s[0]],e,a)}return{center:i.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:a,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,a,i;if(this.resolutions_){const s=Uo(this.resolutions_,t,1);e=s,a=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=a/this.resolutions_[s+1]}else a=this.maxResolution_,i=this.zoomFactor_;return e+Math.log(a/t)/Math.log(i)}getResolutionForZoom(t){var e;if((e=this.resolutions_)!=null&&e.length){if(this.resolutions_.length===1)return this.resolutions_[0];const a=it(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[a]/this.resolutions_[a+1];return this.resolutions_[a]/Math.pow(i,it(t-a,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let a;if(gt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){gt(!Wh(t),"Cannot fit empty extent provided as `geometry`");const i=Nn(t,this.getProjection());a=_r(i)}else if(t.getType()==="Circle"){const i=Nn(t.getExtent(),this.getProjection());a=_r(i),a.rotate(this.getRotation(),ur(i))}else a=t;this.fitInternal(a,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),a=Math.cos(e),i=Math.sin(-e),s=t.getFlatCoordinates(),r=t.getStride();let o=1/0,l=1/0,h=-1/0,c=-1/0;for(let _=0,u=s.length;_<u;_+=r){const f=s[_]*a-s[_+1]*i,d=s[_]*i+s[_+1]*a;o=Math.min(o,f),l=Math.min(l,d),h=Math.max(h,f),c=Math.max(c,d)}return[o,l,h,c]}fitInternal(t,e){e=e||{};let a=e.size;a||(a=this.getViewportSizeMinusPadding_());const i=e.padding!==void 0?e.padding:[0,0,0,0],s=e.nearest!==void 0?e.nearest:!1;let r;e.minResolution!==void 0?r=e.minResolution:e.maxZoom!==void 0?r=this.getResolutionForZoom(e.maxZoom):r=0;const o=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(o,[a[0]-i[1]-i[3],a[1]-i[0]-i[2]]);l=isNaN(l)?r:Math.max(l,r),l=this.getConstrainedResolution(l,s?0:1);const h=this.getRotation(),c=Math.sin(h),_=Math.cos(h),u=ur(o);u[0]+=(i[1]-i[3])/2*l,u[1]+=(i[0]-i[2])/2*l;const f=u[0]*_-u[1]*c,d=u[1]*_+u[0]*c,m=this.getConstrainedCenter([f,d],l),g=e.callback?e.callback:No;e.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:e.duration,easing:e.easing},g):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),Fa(g,!0))}centerOn(t,e,a){this.centerOnInternal(me(t,this.getProjection()),e,a)}centerOnInternal(t,e,a){this.setCenterInternal(Wi(t,e,a,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,a,i){let s;const r=this.padding_;if(r&&t){const o=this.getViewportSizeMinusPadding_(-a),l=Wi(t,i,[o[0]/2+r[3],o[1]/2+r[0]],e,a);s=[t[0]-l[0],t[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=cr(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&me(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const a=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,i,a);e&&(this.targetCenter_=this.calculateCenterZoom(s,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=me(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const a=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,a);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&me(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const a=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,a),s=this.getViewportSize_(i),r=this.constraints_.resolution(this.targetResolution_,0,s,a),o=this.constraints_.center(this.targetCenter_,r,s,a,this.calculateCenterShift(this.targetCenter_,r,i,s));this.get(Pt.ROTATION)!==i&&this.set(Pt.ROTATION,i),this.get(Pt.RESOLUTION)!==r&&(this.set(Pt.RESOLUTION,r),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(Pt.CENTER)||!es(this.get(Pt.CENTER),o))&&this.set(Pt.CENTER,o),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,a){t=t!==void 0?t:200;const i=e||0,s=this.constraints_.rotation(this.targetRotation_),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,i,r),l=this.constraints_.center(this.targetCenter_,o,r,!1,this.calculateCenterShift(this.targetCenter_,o,s,r));if(t===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}a=a||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!es(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:o,duration:t,easing:_c,anchor:a}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Dt.INTERACTING,1)}endInteraction(t,e,a){a=a&&me(a,this.getProjection()),this.endInteractionInternal(t,e,a)}endInteractionInternal(t,e,a){this.getInteracting()&&(this.setHint(Dt.INTERACTING,-1),this.resolveConstraints(t,e,a))}getConstrainedCenter(t,e){const a=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),a)}getConstrainedZoom(t,e){const a=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(a,e))}getConstrainedResolution(t,e){e=e||0;const a=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,a)}}function Fa(n,t){setTimeout(function(){n(t)},0)}function vu(n){if(n.extent!==void 0){const e=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return Ur(n.extent,n.constrainOnlyCenter,e)}const t=Ms(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,Ur(e,!1,!1)}return du}function Mu(n){let t,e,a,r=n.minZoom!==void 0?n.minZoom:Ki,o=n.maxZoom!==void 0?n.maxZoom:28;const l=n.zoomFactor!==void 0?n.zoomFactor:2,h=n.multiWorld!==void 0?n.multiWorld:!1,c=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,_=n.showFullExtent!==void 0?n.showFullExtent:!1,u=Ms(n.projection,"EPSG:3857"),f=u.getExtent();let d=n.constrainOnlyCenter,m=n.extent;if(!h&&!m&&u.isGlobal()&&(d=!1,m=f),n.resolutions!==void 0){const g=n.resolutions;e=g[r],a=g[o]!==void 0?g[o]:g[g.length-1],n.constrainResolution?t=mu(g,c,!d&&m,_):t=zr(e,a,c,!d&&m,_)}else{const p=(f?Math.max(le(f),ga(f)):360*nc.degrees/u.getMetersPerUnit())/xu/Math.pow(2,Ki),y=p/Math.pow(2,28-Ki);e=n.maxResolution,e!==void 0?r=0:e=p/Math.pow(l,r),a=n.minResolution,a===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?a=e/Math.pow(l,o):a=p/Math.pow(l,o):a=y),o=r+Math.floor(Math.log(e/a)/Math.log(l)),a=e/Math.pow(l,o-r),n.constrainResolution?t=gu(l,e,a,c,!d&&m,_):t=zr(e,a,c,!d&&m,_)}return{constraint:t,maxResolution:e,minResolution:a,minZoom:r,zoomFactor:l}}function wu(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const e=n.constrainRotation;return e===void 0||e===!0?bu():e===!1?Vr:typeof e=="number"?yu(e):Vr}return pu}function Eu(n){return!(n.sourceCenter&&n.targetCenter&&!es(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function Wi(n,t,e,a,i){const s=Math.cos(-i);let r=Math.sin(-i),o=n[0]*s-n[1]*r,l=n[1]*s+n[0]*r;o+=(t[0]/2-e[0])*a,l+=(e[1]-t[1]/2)*a,r=-r;const h=o*s-l*r,c=l*s+o*r;return[h,c]}const Z={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Su extends yn{constructor(t){super(),this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[Z.OPACITY]=t.opacity!==void 0?t.opacity:1,gt(typeof e[Z.OPACITY]=="number","Layer opacity must be a number"),e[Z.VISIBLE]=t.visible!==void 0?t.visible:!0,e[Z.Z_INDEX]=t.zIndex,e[Z.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[Z.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[Z.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[Z.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},a=this.getZIndex();return e.opacity=it(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=a===void 0&&!e.managed?1/0:a,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return ct()}getLayerStatesArray(t){return ct()}getExtent(){return this.get(Z.EXTENT)}getMaxResolution(){return this.get(Z.MAX_RESOLUTION)}getMinResolution(){return this.get(Z.MIN_RESOLUTION)}getMinZoom(){return this.get(Z.MIN_ZOOM)}getMaxZoom(){return this.get(Z.MAX_ZOOM)}getOpacity(){return this.get(Z.OPACITY)}getSourceState(){return ct()}getVisible(){return this.get(Z.VISIBLE)}getZIndex(){return this.get(Z.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Z.EXTENT,t)}setMaxResolution(t){this.set(Z.MAX_RESOLUTION,t)}setMinResolution(t){this.set(Z.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(Z.MAX_ZOOM,t)}setMinZoom(t){this.set(Z.MIN_ZOOM,t)}setOpacity(t){gt(typeof t=="number","Layer opacity must be a number"),this.set(Z.OPACITY,t)}setVisible(t){this.set(Z.VISIBLE,t)}setZIndex(t){this.set(Z.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Ru extends Su{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Z.SOURCE,this.handleSourcePropertyChange_);const a=t.source?t.source:null;this.setSource(a)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(Z.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Wn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=Kn(t,he.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let e;const a=this.getMapInternal();!t&&a&&(t=a.getView()),t instanceof jr?e={viewState:t.getState(),extent:t.calculateExtent()}:e=t,!e.layerStatesArray&&a&&(e.layerStatesArray=a.getLayerGroup().getLayerStatesArray());let i;if(e.layerStatesArray){if(i=e.layerStatesArray.find(r=>r.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return Iu(i,e.viewState)&&(!s||$t(s,e.extent))}getAttributions(t){var s;if(!this.isVisible(t))return[];const e=(s=this.getSource())==null?void 0:s.getAttributions();if(!e)return[];const a=t instanceof jr?t.getViewStateAndExtent():t;let i=e(a);return Array.isArray(i)||(i=[i]),i}render(t,e){const a=this.getRenderer();return a.prepareFrame(t)?(this.rendered=!0,a.renderFrame(t,e)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,e){}renderDeferred(t){const e=this.getRenderer();e&&e.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(Z.MAP,t)}getMapInternal(){return this.get(Z.MAP)}setMap(t){this.mapPrecomposeKey_&&(Wn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Wn(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Kn(t,De.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Kn(this,he.CHANGE,t.render,t),this.changed())}handlePrecompose_(t){const e=t.frameState.layerStatesArray,a=this.getLayerState(!1);gt(!e.some(i=>i.layer===a.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(a)}setSource(t){this.set(Z.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function Iu(n,t){if(!n.visible)return!1;const e=t.resolution;if(e<n.minResolution||e>=n.maxResolution)return!1;const a=t.zoom;return a>n.minZoom&&a<=n.maxZoom}const Hr={RENDER_ORDER:"renderOrder"};class Au extends Ru{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Hr.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,e){const a=this.getDeclutter();a in t.declutter||(t.declutter[a]=new Jo(9)),this.getRenderer().renderDeclutter(t,e)}setRenderOrder(t){this.set(Hr.RENDER_ORDER,t)}setStyle(t){this.style_=t===void 0?Qo:t;const e=Cu(t);this.styleFunction_=t===null?void 0:r_(e),this.changed()}setDeclutter(t){this.declutter_=t?String(t):void 0,this.changed()}}function Cu(n){if(n===void 0)return Qo;if(!n)return null;if(typeof n=="function"||n instanceof Gt)return n;if(!Array.isArray(n))return Pr([n]);if(n.length===0)return[];const t=n.length,e=n[0];if(e instanceof Gt){const i=new Array(t);for(let s=0;s<t;++s){const r=n[s];if(!(r instanceof Gt))throw new Error("Expected a list of style instances");i[s]=r}return i}if("style"in e){const i=new Array(t);for(let s=0;s<t;++s){const r=n[s];if(!("style"in r))throw new Error("Expected a list of rules with a style property");i[s]=r}return eu(i)}return Pr(n)}class Lu extends Au{constructor(t){super(t)}createRenderer(){return new C_(this)}}function Ke(n){return(t,...e)=>ku(n,t,e)}function bn(n,t){return Ke(hl(n,t).get)}const{apply:ku,getOwnPropertyDescriptor:hl,getPrototypeOf:Ts,ownKeys:Tu}=Reflect,{iterator:bi,toStringTag:Ou}=Symbol,Du=Object,{create:Os,defineProperty:Nu}=Du,Pu=Array,Fu=Pu.prototype,cl=Fu[bi],Bu=Ke(cl),_l=ArrayBuffer,Gu=_l.prototype;bn(Gu,"byteLength");const Kr=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;Kr&&bn(Kr.prototype,"byteLength");const Uu=Ts(Uint8Array),xi=Uu.prototype;bn(xi,"buffer");bn(xi,"byteOffset");bn(xi,"length");bn(xi,Ou);const zu=Uint8Array,ul=Uint16Array,Ds=Uint32Array,Vu=Float32Array,ca=Ts([][bi]()),fl=Ke(ca.next),ju=Ke(function*(){}().next),Hu=Ts(ca),Ku=DataView.prototype,Wu=Ke(Ku.getUint16),Ns=WeakMap,dl=Ns.prototype,ml=Ke(dl.get),qu=Ke(dl.set),gl=new Ns,Xu=Os(null,{next:{value:function(){const t=ml(gl,this);return fl(t)}},[bi]:{value:function(){return this}}});function $u(n){if(n[bi]===cl&&ca.next===fl)return n;const t=Os(Xu);return qu(gl,t,Bu(n)),t}const Yu=new Ns,Zu=Os(Hu,{next:{value:function(){const t=ml(Yu,this);return ju(t)},writable:!0,configurable:!0}});for(const n of Tu(ca))n!=="next"&&Nu(Zu,n,hl(ca,n));const pl=new _l(4),Ju=new Vu(pl),Qu=new Ds(pl),Ht=new ul(512),Kt=new zu(512);for(let n=0;n<256;++n){const t=n-127;t<-24?(Ht[n]=0,Ht[n|256]=32768,Kt[n]=24,Kt[n|256]=24):t<-14?(Ht[n]=1024>>-t-14,Ht[n|256]=1024>>-t-14|32768,Kt[n]=-t-1,Kt[n|256]=-t-1):t<=15?(Ht[n]=t+15<<10,Ht[n|256]=t+15<<10|32768,Kt[n]=13,Kt[n|256]=13):t<128?(Ht[n]=31744,Ht[n|256]=64512,Kt[n]=24,Kt[n|256]=24):(Ht[n]=31744,Ht[n|256]=64512,Kt[n]=13,Kt[n|256]=13)}const Ps=new Ds(2048);for(let n=1;n<1024;++n){let t=n<<13,e=0;for(;!(t&8388608);)t<<=1,e-=8388608;t&=-8388609,e+=947912704,Ps[n]=t|e}for(let n=1024;n<2048;++n)Ps[n]=939524096+(n-1024<<13);const xn=new Ds(64);for(let n=1;n<31;++n)xn[n]=n<<23;xn[31]=1199570944;xn[32]=2147483648;for(let n=33;n<63;++n)xn[n]=2147483648+(n-32<<23);xn[63]=3347054592;const yl=new ul(64);for(let n=1;n<64;++n)n!==32&&(yl[n]=1024);function t0(n){const t=n>>10;return Qu[0]=Ps[yl[t]+(n&1023)]+xn[t],Ju[0]}function bl(n,t,...e){return t0(Wu(n,t,...$u(e)))}function xl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ba={exports:{}},Wr;function e0(){if(Wr)return Ba.exports;Wr=1;function n(t,e,a){const i=a&&a.debug||!1;i&&console.log("[xml-utils] getting "+e+" in "+t);const s=typeof t=="object"?t.outer:t,r=s.slice(0,s.indexOf(">")+1),o=['"',"'"];for(let l=0;l<o.length;l++){const h=o[l],c=e+"\\="+h+"([^"+h+"]*)"+h;i&&console.log("[xml-utils] pattern:",c);const u=new RegExp(c).exec(r);if(i&&console.log("[xml-utils] match:",u),u)return u[1]}}return Ba.exports=n,Ba.exports.default=n,Ba.exports}var n0=e0();const qi=xl(n0);var Ga={exports:{}},Ua={exports:{}},za={exports:{}},qr;function a0(){if(qr)return za.exports;qr=1;function n(t,e,a){const s=new RegExp(e).exec(t.slice(a));return s?a+s.index:-1}return za.exports=n,za.exports.default=n,za.exports}var Va={exports:{}},Xr;function i0(){if(Xr)return Va.exports;Xr=1;function n(t,e,a){const s=new RegExp(e).exec(t.slice(a));return s?a+s.index+s[0].length-1:-1}return Va.exports=n,Va.exports.default=n,Va.exports}var ja={exports:{}},$r;function s0(){if($r)return ja.exports;$r=1;function n(t,e){const a=new RegExp(e,"g"),i=t.match(a);return i?i.length:0}return ja.exports=n,ja.exports.default=n,ja.exports}var Yr;function r0(){if(Yr)return Ua.exports;Yr=1;const n=a0(),t=i0(),e=s0();function a(i,s,r){const o=r&&r.debug||!1,l=!(r&&typeof r.nested===!1),h=r&&r.startIndex||0;o&&console.log("[xml-utils] starting findTagByName with",s," and ",r);const c=n(i,`<${s}[ 
>/]`,h);if(o&&console.log("[xml-utils] start:",c),c===-1)return;const _=i.slice(c+s.length);let u=t(_,"^[^<]*[ /]>",0);const f=u!==-1&&_[u-1]==="/";if(o&&console.log("[xml-utils] selfClosing:",f),f===!1)if(l){let p=0,y=1,x=0;for(;(u=t(_,"[ /]"+s+">",p))!==-1;){const b=_.substring(p,u+1);if(y+=e(b,"<"+s+`[ 
	>]`),x+=e(b,"</"+s+">"),x>=y)break;p=u}}else u=t(_,"[ /]"+s+">",0);const d=c+s.length+u+1;if(o&&console.log("[xml-utils] end:",d),d===-1)return;const m=i.slice(c,d);let g;return f?g=null:g=m.slice(m.indexOf(">")+1,m.lastIndexOf("<")),{inner:g,outer:m,start:c,end:d}}return Ua.exports=a,Ua.exports.default=a,Ua.exports}var Zr;function o0(){if(Zr)return Ga.exports;Zr=1;const n=r0();function t(e,a,i){const s=[],r=i&&i.debug||!1,o=i&&typeof i.nested=="boolean"?i.nested:!0;let l=i&&i.startIndex||0,h;for(;h=n(e,a,{debug:r,startIndex:l});)o?l=h.start+1+a.length:l=h.end,s.push(h);return r&&console.log("findTagsByName found",s.length,"tags"),s}return Ga.exports=t,Ga.exports.default=t,Ga.exports}var l0=o0();const h0=xl(l0),Yn={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},qt={};for(const n in Yn)Yn.hasOwnProperty(n)&&(qt[Yn[n]]=parseInt(n,10));const c0=[qt.BitsPerSample,qt.ExtraSamples,qt.SampleFormat,qt.StripByteCounts,qt.StripOffsets,qt.StripRowCounts,qt.TileByteCounts,qt.TileOffsets,qt.SubIFDs],Xi={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},V={};for(const n in Xi)Xi.hasOwnProperty(n)&&(V[Xi[n]]=parseInt(n,10));const Rt={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,CMYK:5,YCbCr:6,CIELab:8},_0={Unspecified:0},o2={AddCompression:1},l2={None:0,Deflate:1,Zstandard:2},u0={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function f0(n,t){const{width:e,height:a}=n,i=new Uint8Array(e*a*3);let s;for(let r=0,o=0;r<n.length;++r,o+=3)s=256-n[r]/t*256,i[o]=s,i[o+1]=s,i[o+2]=s;return i}function d0(n,t){const{width:e,height:a}=n,i=new Uint8Array(e*a*3);let s;for(let r=0,o=0;r<n.length;++r,o+=3)s=n[r]/t*256,i[o]=s,i[o+1]=s,i[o+2]=s;return i}function m0(n,t){const{width:e,height:a}=n,i=new Uint8Array(e*a*3),s=t.length/3,r=t.length/3*2;for(let o=0,l=0;o<n.length;++o,l+=3){const h=n[o];i[l]=t[h]/65536*256,i[l+1]=t[h+s]/65536*256,i[l+2]=t[h+r]/65536*256}return i}function g0(n){const{width:t,height:e}=n,a=new Uint8Array(t*e*3);for(let i=0,s=0;i<n.length;i+=4,s+=3){const r=n[i],o=n[i+1],l=n[i+2],h=n[i+3];a[s]=255*((255-r)/256)*((255-h)/256),a[s+1]=255*((255-o)/256)*((255-h)/256),a[s+2]=255*((255-l)/256)*((255-h)/256)}return a}function p0(n){const{width:t,height:e}=n,a=new Uint8ClampedArray(t*e*3);for(let i=0,s=0;i<n.length;i+=3,s+=3){const r=n[i],o=n[i+1],l=n[i+2];a[s]=r+1.402*(l-128),a[s+1]=r-.34414*(o-128)-.71414*(l-128),a[s+2]=r+1.772*(o-128)}return a}const y0=.95047,b0=1,x0=1.08883;function v0(n){const{width:t,height:e}=n,a=new Uint8Array(t*e*3);for(let i=0,s=0;i<n.length;i+=3,s+=3){const r=n[i+0],o=n[i+1]<<24>>24,l=n[i+2]<<24>>24;let h=(r+16)/116,c=o/500+h,_=h-l/200,u,f,d;c=y0*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),h=b0*(h*h*h>.008856?h*h*h:(h-16/116)/7.787),_=x0*(_*_*_>.008856?_*_*_:(_-16/116)/7.787),u=c*3.2406+h*-1.5372+_*-.4986,f=c*-.9689+h*1.8758+_*.0415,d=c*.0557+h*-.204+_*1.057,u=u>.0031308?1.055*u**(1/2.4)-.055:12.92*u,f=f>.0031308?1.055*f**(1/2.4)-.055:12.92*f,d=d>.0031308?1.055*d**(1/2.4)-.055:12.92*d,a[s]=Math.max(0,Math.min(1,u))*255,a[s+1]=Math.max(0,Math.min(1,f))*255,a[s+2]=Math.max(0,Math.min(1,d))*255}return a}const vl=new Map;function Se(n,t){Array.isArray(n)||(n=[n]),n.forEach(e=>vl.set(e,t))}async function M0(n){const t=vl.get(n.Compression);if(!t)throw new Error(`Unknown compression method identifier: ${n.Compression}`);const e=await t();return new e(n)}Se([void 0,1],()=>je(()=>import("./raw-Ctlamky6.lG6ojroe.js"),__vite__mapDeps([0,1])).then(n=>n.default));Se(5,()=>je(()=>import("./lzw-D2MxT2zA.DmRYnG5C.js"),__vite__mapDeps([2,1])).then(n=>n.default));Se(6,()=>{throw new Error("old style JPEG compression is not supported.")});Se(7,()=>je(()=>import("./jpeg-CsvjaiEQ.A0lbw6YY.js"),__vite__mapDeps([3,1])).then(n=>n.default));Se([8,32946],()=>je(()=>import("./deflate-BsBbGVWD.DOOJQnHL.js"),__vite__mapDeps([4,5,1])).then(n=>n.default));Se(32773,()=>je(()=>import("./packbits-DJxVZ9kH.CBEwDSj4.js"),__vite__mapDeps([6,1])).then(n=>n.default));Se(34887,()=>je(()=>import("./lerc-BKFW7LYp.UiK6cdDo.js"),__vite__mapDeps([7,5,1,8,9,10,11,12,13,14,15,16,17,18,19,20])).then(async n=>(await n.zstd.init(),n)).then(n=>n.default));Se(50001,()=>je(()=>import("./webimage-Bg_w2qlD.C0wZFOAS.js"),__vite__mapDeps([21,1])).then(n=>n.default));function vi(n,t,e,a=1){return new(Object.getPrototypeOf(n)).constructor(t*e*a)}function w0(n,t,e,a,i){const s=t/a,r=e/i;return n.map(o=>{const l=vi(o,a,i);for(let h=0;h<i;++h){const c=Math.min(Math.round(r*h),e-1);for(let _=0;_<a;++_){const u=Math.min(Math.round(s*_),t-1),f=o[c*t+u];l[h*a+_]=f}}return l})}function ln(n,t,e){return(1-e)*n+e*t}function E0(n,t,e,a,i){const s=t/a,r=e/i;return n.map(o=>{const l=vi(o,a,i);for(let h=0;h<i;++h){const c=r*h,_=Math.floor(c),u=Math.min(Math.ceil(c),e-1);for(let f=0;f<a;++f){const d=s*f,m=d%1,g=Math.floor(d),p=Math.min(Math.ceil(d),t-1),y=o[_*t+g],x=o[_*t+p],b=o[u*t+g],v=o[u*t+p],M=ln(ln(y,x,m),ln(b,v,m),c%1);l[h*a+f]=M}}return l})}function S0(n,t,e,a,i,s="nearest"){switch(s.toLowerCase()){case"nearest":return w0(n,t,e,a,i);case"bilinear":case"linear":return E0(n,t,e,a,i);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function R0(n,t,e,a,i,s){const r=t/a,o=e/i,l=vi(n,a,i,s);for(let h=0;h<i;++h){const c=Math.min(Math.round(o*h),e-1);for(let _=0;_<a;++_){const u=Math.min(Math.round(r*_),t-1);for(let f=0;f<s;++f){const d=n[c*t*s+u*s+f];l[h*a*s+_*s+f]=d}}}return l}function I0(n,t,e,a,i,s){const r=t/a,o=e/i,l=vi(n,a,i,s);for(let h=0;h<i;++h){const c=o*h,_=Math.floor(c),u=Math.min(Math.ceil(c),e-1);for(let f=0;f<a;++f){const d=r*f,m=d%1,g=Math.floor(d),p=Math.min(Math.ceil(d),t-1);for(let y=0;y<s;++y){const x=n[_*t*s+g*s+y],b=n[_*t*s+p*s+y],v=n[u*t*s+g*s+y],M=n[u*t*s+p*s+y],R=ln(ln(x,b,m),ln(v,M,m),c%1);l[h*a*s+f*s+y]=R}}}return l}function A0(n,t,e,a,i,s,r="nearest"){switch(r.toLowerCase()){case"nearest":return R0(n,t,e,a,i,s);case"bilinear":case"linear":return I0(n,t,e,a,i,s);default:throw new Error(`Unsupported resampling method: '${r}'`)}}function C0(n,t,e){let a=0;for(let i=t;i<e;++i)a+=n[i];return a}function ls(n,t,e){switch(n){case 1:if(t<=8)return new Uint8Array(e);if(t<=16)return new Uint16Array(e);if(t<=32)return new Uint32Array(e);break;case 2:if(t===8)return new Int8Array(e);if(t===16)return new Int16Array(e);if(t===32)return new Int32Array(e);break;case 3:switch(t){case 16:case 32:return new Float32Array(e);case 64:return new Float64Array(e)}break}throw Error("Unsupported data format/bitsPerSample")}function L0(n,t){return(n===1||n===2)&&t<=32&&t%8===0?!1:!(n===3&&(t===16||t===32||t===64))}function k0(n,t,e,a,i,s,r){const o=new DataView(n),l=e===2?r*s:r*s*a,h=e===2?1:a,c=ls(t,i,l),_=parseInt("1".repeat(i),2);if(t===1){let u;e===1?u=a*i:u=i;let f=s*u;f&7&&(f=f+7&-8);for(let d=0;d<r;++d){const m=d*f;for(let g=0;g<s;++g){const p=m+g*h*i;for(let y=0;y<h;++y){const x=p+y*i,b=(d*s+g)*h+y,v=Math.floor(x/8),M=x%8;if(M+i<=8)c[b]=o.getUint8(v)>>8-i-M&_;else if(M+i<=16)c[b]=o.getUint16(v)>>16-i-M&_;else if(M+i<=24){const R=o.getUint16(v)<<8|o.getUint8(v+2);c[b]=R>>24-i-M&_}else c[b]=o.getUint32(v)>>32-i-M&_}}}}return c.buffer}class T0{constructor(t,e,a,i,s,r){this.fileDirectory=t,this.geoKeys=e,this.dataView=a,this.littleEndian=i,this.tiles=s?{}:null,this.isTiled=!t.StripOffsets;const o=t.PlanarConfiguration;if(this.planarConfiguration=typeof o>"u"?1:o,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=r}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0;for(let e=0;e<this.fileDirectory.BitsPerSample.length;++e)t+=this.getSampleByteSize(e);return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const e=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,a=this.fileDirectory.BitsPerSample[t];switch(e){case 1:if(a<=8)return DataView.prototype.getUint8;if(a<=16)return DataView.prototype.getUint16;if(a<=32)return DataView.prototype.getUint32;break;case 2:if(a<=8)return DataView.prototype.getInt8;if(a<=16)return DataView.prototype.getInt16;if(a<=32)return DataView.prototype.getInt32;break;case 3:switch(a){case 16:return function(i,s){return bl(this,i,s)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,e){const a=this.getSampleFormat(t),i=this.getBitsPerSample(t);return ls(a,i,e)}async getTileOrStrip(t,e,a,i,s){const r=Math.ceil(this.getWidth()/this.getTileWidth()),o=Math.ceil(this.getHeight()/this.getTileHeight());let l;const{tiles:h}=this;this.planarConfiguration===1?l=e*r+t:this.planarConfiguration===2&&(l=a*r*o+e*r+t);let c,_;this.isTiled?(c=this.fileDirectory.TileOffsets[l],_=this.fileDirectory.TileByteCounts[l]):(c=this.fileDirectory.StripOffsets[l],_=this.fileDirectory.StripByteCounts[l]);const u=(await this.source.fetch([{offset:c,length:_}],s))[0];let f;return h===null||!h[l]?(f=(async()=>{let d=await i.decode(this.fileDirectory,u);const m=this.getSampleFormat(),g=this.getBitsPerSample();return L0(m,g)&&(d=k0(d,m,this.planarConfiguration,this.getSamplesPerPixel(),g,this.getTileWidth(),this.getBlockHeight(e))),d})(),h!==null&&(h[l]=f)):f=h[l],{x:t,y:e,sample:a,data:await f}}async _readRaster(t,e,a,i,s,r,o,l,h){const c=this.getTileWidth(),_=this.getTileHeight(),u=this.getWidth(),f=this.getHeight(),d=Math.max(Math.floor(t[0]/c),0),m=Math.min(Math.ceil(t[2]/c),Math.ceil(u/c)),g=Math.max(Math.floor(t[1]/_),0),p=Math.min(Math.ceil(t[3]/_),Math.ceil(f/_)),y=t[2]-t[0];let x=this.getBytesPerPixel();const b=[],v=[];for(let w=0;w<e.length;++w)this.planarConfiguration===1?b.push(C0(this.fileDirectory.BitsPerSample,0,e[w])/8):b.push(0),v.push(this.getReaderForSample(e[w]));const M=[],{littleEndian:R}=this;for(let w=g;w<p;++w)for(let I=d;I<m;++I){let k;this.planarConfiguration===1&&(k=this.getTileOrStrip(I,w,0,s,h));for(let O=0;O<e.length;++O){const T=O,G=e[O];this.planarConfiguration===2&&(x=this.getSampleByteSize(G),k=this.getTileOrStrip(I,w,G,s,h));const N=k.then(Y=>{const B=Y.data,H=new DataView(B),W=this.getBlockHeight(Y.y),Q=Y.y*_,J=Y.x*c,et=Q+W,A=(Y.x+1)*c,Ie=v[T],Ae=Math.min(W,W-(et-t[3]),f-Q),At=Math.min(c,c-(A-t[2]),u-J);for(let Vt=Math.max(0,t[1]-Q);Vt<Ae;++Vt)for(let Ce=Math.max(0,t[0]-J);Ce<At;++Ce){const Ra=(Vt*c+Ce)*x,Mn=Ie.call(H,Ra+b[T],R);let Le;i?(Le=(Vt+Q-t[1])*y*e.length+(Ce+J-t[0])*e.length+T,a[Le]=Mn):(Le=(Vt+Q-t[1])*y+Ce+J-t[0],a[T][Le]=Mn)}});M.push(N)}}if(await Promise.all(M),r&&t[2]-t[0]!==r||o&&t[3]-t[1]!==o){let w;return i?w=A0(a,t[2]-t[0],t[3]-t[1],r,o,e.length,l):w=S0(a,t[2]-t[0],t[3]-t[1],r,o,l),w.width=r,w.height=o,w}return a.width=r||t[2]-t[0],a.height=o||t[3]-t[1],a}async readRasters({window:t,samples:e=[],interleave:a,pool:i=null,width:s,height:r,resampleMethod:o,fillValue:l,signal:h}={}){const c=t||[0,0,this.getWidth(),this.getHeight()];if(c[0]>c[2]||c[1]>c[3])throw new Error("Invalid subsets");const _=c[2]-c[0],u=c[3]-c[1],f=_*u,d=this.getSamplesPerPixel();if(!e||!e.length)for(let y=0;y<d;++y)e.push(y);else for(let y=0;y<e.length;++y)if(e[y]>=d)return Promise.reject(new RangeError(`Invalid sample index '${e[y]}'.`));let m;if(a){const y=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,x=Math.max.apply(null,this.fileDirectory.BitsPerSample);m=ls(y,x,f*e.length),l&&m.fill(l)}else{m=[];for(let y=0;y<e.length;++y){const x=this.getArrayForSample(e[y],f);Array.isArray(l)&&y<l.length?x.fill(l[y]):l&&!Array.isArray(l)&&x.fill(l),m.push(x)}}const g=i||await M0(this.fileDirectory);return await this._readRaster(c,e,m,a,g,s,r,o,h)}async readRGB({window:t,interleave:e=!0,pool:a=null,width:i,height:s,resampleMethod:r,enableAlpha:o=!1,signal:l}={}){const h=t||[0,0,this.getWidth(),this.getHeight()];if(h[0]>h[2]||h[1]>h[3])throw new Error("Invalid subsets");const c=this.fileDirectory.PhotometricInterpretation;if(c===Rt.RGB){let p=[0,1,2];if(this.fileDirectory.ExtraSamples!==_0.Unspecified&&o){p=[];for(let y=0;y<this.fileDirectory.BitsPerSample.length;y+=1)p.push(y)}return this.readRasters({window:t,interleave:e,samples:p,pool:a,width:i,height:s,resampleMethod:r,signal:l})}let _;switch(c){case Rt.WhiteIsZero:case Rt.BlackIsZero:case Rt.Palette:_=[0];break;case Rt.CMYK:_=[0,1,2,3];break;case Rt.YCbCr:case Rt.CIELab:_=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const u={window:h,interleave:!0,samples:_,pool:a,width:i,height:s,resampleMethod:r,signal:l},{fileDirectory:f}=this,d=await this.readRasters(u),m=2**this.fileDirectory.BitsPerSample[0];let g;switch(c){case Rt.WhiteIsZero:g=f0(d,m);break;case Rt.BlackIsZero:g=d0(d,m);break;case Rt.Palette:g=m0(d,f.ColorMap);break;case Rt.CMYK:g=g0(d);break;case Rt.YCbCr:g=p0(d);break;case Rt.CIELab:g=v0(d);break;default:throw new Error("Unsupported photometric interpretation.")}if(!e){const p=new Uint8Array(g.length/3),y=new Uint8Array(g.length/3),x=new Uint8Array(g.length/3);for(let b=0,v=0;b<g.length;b+=3,++v)p[v]=g[b],y[v]=g[b+1],x[v]=g[b+2];g=[p,y,x]}return g.width=d.width,g.height=d.height,g}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const t=[];for(let e=0;e<this.fileDirectory.ModelTiepoint.length;e+=6)t.push({i:this.fileDirectory.ModelTiepoint[e],j:this.fileDirectory.ModelTiepoint[e+1],k:this.fileDirectory.ModelTiepoint[e+2],x:this.fileDirectory.ModelTiepoint[e+3],y:this.fileDirectory.ModelTiepoint[e+4],z:this.fileDirectory.ModelTiepoint[e+5]});return t}getGDALMetadata(t=null){const e={};if(!this.fileDirectory.GDAL_METADATA)return null;const a=this.fileDirectory.GDAL_METADATA;let i=h0(a,"Item");t===null?i=i.filter(s=>qi(s,"sample")===void 0):i=i.filter(s=>Number(qi(s,"sample"))===t);for(let s=0;s<i.length;++s){const r=i[s];e[qi(r,"name")]=r.inner}return e}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,e=this.fileDirectory.ModelTransformation;if(t&&t.length===6)return[t[3],t[4],t[5]];if(e)return[e[3],e[7],e[11]];throw new Error("The image does not have an affine transformation.")}getResolution(t=null){const e=this.fileDirectory.ModelPixelScale,a=this.fileDirectory.ModelTransformation;if(e)return[e[0],-e[1],e[2]];if(a)return a[1]===0&&a[4]===0?[a[0],-a[5],a[10]]:[Math.sqrt(a[0]*a[0]+a[4]*a[4]),-Math.sqrt(a[1]*a[1]+a[5]*a[5]),a[10]];if(t){const[i,s,r]=t.getResolution();return[i*t.getWidth()/this.getWidth(),s*t.getHeight()/this.getHeight(),r*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(t=!1){const e=this.getHeight(),a=this.getWidth();if(this.fileDirectory.ModelTransformation&&!t){const[i,s,r,o,l,h,c,_]=this.fileDirectory.ModelTransformation,f=[[0,0],[0,e],[a,0],[a,e]].map(([g,p])=>[o+i*g+s*p,_+l*g+h*p]),d=f.map(g=>g[0]),m=f.map(g=>g[1]);return[Math.min(...d),Math.min(...m),Math.max(...d),Math.max(...m)]}else{const i=this.getOrigin(),s=this.getResolution(),r=i[0],o=i[1],l=r+s[0]*a,h=o+s[1]*e;return[Math.min(r,l),Math.min(o,h),Math.max(r,l),Math.max(o,h)]}}}class O0{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,e){const a=this.getUint32(t,e),i=this.getUint32(t+4,e);let s;if(e){if(s=a+2**32*i,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}if(s=2**32*a+i,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}getInt64(t,e){let a=0;const i=(this._dataView.getUint8(t+(e?7:0))&128)>0;let s=!0;for(let r=0;r<8;r++){let o=this._dataView.getUint8(t+(e?r:7-r));i&&(s?o!==0&&(o=~(o-1)&255,s=!1):o=~o&255),a+=o*256**r}return i&&(a=-a),a}getUint8(t,e){return this._dataView.getUint8(t,e)}getInt8(t,e){return this._dataView.getInt8(t,e)}getUint16(t,e){return this._dataView.getUint16(t,e)}getInt16(t,e){return this._dataView.getInt16(t,e)}getUint32(t,e){return this._dataView.getUint32(t,e)}getInt32(t,e){return this._dataView.getInt32(t,e)}getFloat16(t,e){return bl(this._dataView,t,e)}getFloat32(t,e){return this._dataView.getFloat32(t,e)}getFloat64(t,e){return this._dataView.getFloat64(t,e)}}class D0{constructor(t,e,a,i){this._dataView=new DataView(t),this._sliceOffset=e,this._littleEndian=a,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,e){return this.sliceOffset<=t&&this.sliceTop>=t+e}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const e=this.readUint32(t),a=this.readUint32(t+4);let i;if(this._littleEndian){if(i=e+2**32*a,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*e+a,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}readInt64(t){let e=0;const a=(this._dataView.getUint8(t+(this._littleEndian?7:0))&128)>0;let i=!0;for(let s=0;s<8;s++){let r=this._dataView.getUint8(t+(this._littleEndian?s:7-s));a&&(i?r!==0&&(r=~(r-1)&255,i=!1):r=~r&255),e+=r*256**s}return a&&(e=-e),e}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}const Jr=`\r
\r
`;function Ml(n){if(typeof Object.fromEntries<"u")return Object.fromEntries(n);const t={};for(const[e,a]of n)t[e.toLowerCase()]=a;return t}function N0(n){const t=n.split(`\r
`).map(e=>{const a=e.split(":").map(i=>i.trim());return a[0]=a[0].toLowerCase(),a});return Ml(t)}function P0(n){const[t,...e]=n.split(";").map(i=>i.trim()),a=e.map(i=>i.split("="));return{type:t,params:Ml(a)}}function hs(n){let t,e,a;return n&&([,t,e,a]=n.match(/bytes (\d+)-(\d+)\/(\d+)/),t=parseInt(t,10),e=parseInt(e,10),a=parseInt(a,10)),{start:t,end:e,total:a}}function F0(n,t){let e=null;const a=new TextDecoder("ascii"),i=[],s=`--${t}`,r=`${s}--`;for(let o=0;o<10;++o)a.decode(new Uint8Array(n,o,s.length))===s&&(e=o);if(e===null)throw new Error("Could not find initial boundary");for(;e<n.byteLength;){const o=a.decode(new Uint8Array(n,e,Math.min(s.length+1024,n.byteLength-e)));if(o.length===0||o.startsWith(r))break;if(!o.startsWith(s))throw new Error("Part does not start with boundary");const l=o.substr(s.length+2);if(l.length===0)break;const h=l.indexOf(Jr),c=N0(l.substr(0,h)),{start:_,end:u,total:f}=hs(c["content-range"]),d=e+s.length+h+Jr.length,m=parseInt(u,10)+1-parseInt(_,10);i.push({headers:c,data:n.slice(d,d+m),offset:_,length:m,fileSize:f}),e=d+m+4}return i}class wl{async fetch(t,e=void 0){return Promise.all(t.map(a=>this.fetchSlice(a,e)))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}class B0 extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof t.maxAge=="number"&&t.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if(typeof this.onEviction=="function")for(const[e,a]of t)this.onEviction(e,a.value)}_deleteIfExpired(t,e){return typeof e.expiry=="number"&&e.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(t,e.value),this.delete(t)):!1}_getOrDeleteIfExpired(t,e){if(this._deleteIfExpired(t,e)===!1)return e.value}_getItemValue(t,e){return e.expiry?this._getOrDeleteIfExpired(t,e):e.value}_peek(t,e){const a=e.get(t);return this._getItemValue(t,a)}_set(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,e){this.oldCache.delete(t),this._set(t,e)}*_entriesAscending(){for(const t of this.oldCache){const[e,a]=t;this.cache.has(e)||this._deleteIfExpired(e,a)===!1&&(yield t)}for(const t of this.cache){const[e,a]=t;this._deleteIfExpired(e,a)===!1&&(yield t)}}get(t){if(this.cache.has(t)){const e=this.cache.get(t);return this._getItemValue(t,e)}if(this.oldCache.has(t)){const e=this.oldCache.get(t);if(this._deleteIfExpired(t,e)===!1)return this._moveToRecent(t,e),e.value}}set(t,e,{maxAge:a=this.maxAge}={}){const i=typeof a=="number"&&a!==Number.POSITIVE_INFINITY?Date.now()+a:void 0;return this.cache.has(t)?this.cache.set(t,{value:e,expiry:i}):this._set(t,{value:e,expiry:i}),this}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):this.oldCache.has(t)?!this._deleteIfExpired(t,this.oldCache.get(t)):!1}peek(t){if(this.cache.has(t))return this._peek(t,this.cache);if(this.oldCache.has(t))return this._peek(t,this.oldCache)}delete(t){const e=this.cache.delete(t);return e&&this._size--,this.oldCache.delete(t)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");const e=[...this._entriesAscending()],a=e.length-t;a<0?(this.cache=new Map(e),this.oldCache=new Map,this._size=e.length):(a>0&&this._emitEvictions(e.slice(0,a)),this.oldCache=new Map(e.slice(a)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache){const[e,a]=t;this._deleteIfExpired(e,a)===!1&&(yield[e,a.value])}for(const t of this.oldCache){const[e,a]=t;this.cache.has(e)||this._deleteIfExpired(e,a)===!1&&(yield[e,a.value])}}*entriesDescending(){let t=[...this.cache];for(let e=t.length-1;e>=0;--e){const a=t[e],[i,s]=a;this._deleteIfExpired(i,s)===!1&&(yield[i,s.value])}t=[...this.oldCache];for(let e=t.length-1;e>=0;--e){const a=t[e],[i,s]=a;this.cache.has(i)||this._deleteIfExpired(i,s)===!1&&(yield[i,s.value])}}*entriesAscending(){for(const[t,e]of this._entriesAscending())yield[t,e.value]}get size(){if(!this._size)return this.oldCache.size;let t=0;for(const e of this.oldCache.keys())this.cache.has(e)||t++;return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,e=this){for(const[a,i]of this.entriesAscending())t.call(e,i,a,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function G0(n){return new Promise(t=>setTimeout(t,n))}function U0(n,t){const e=Array.isArray(n)?n:Array.from(n),a=Array.isArray(t)?t:Array.from(t);return e.map((i,s)=>[i,a[s]])}class mn extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,mn),this.name="AbortError"}}class z0 extends Error{constructor(t,e){super(e),this.errors=t,this.message=e,this.name="AggregateError"}}const V0=z0;class j0{constructor(t,e,a=null){this.offset=t,this.length=e,this.data=a}get top(){return this.offset+this.length}}class Qr{constructor(t,e,a){this.offset=t,this.length=e,this.blockIds=a}}class H0 extends wl{constructor(t,{blockSize:e=65536,cacheSize:a=100}={}){super(),this.source=t,this.blockSize=e,this.blockCache=new B0({maxSize:a,onEviction:(i,s)=>{this.evictedBlocks.set(i,s)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,e){const a=[],i=[],s=[];this.evictedBlocks.clear();for(const{offset:u,length:f}of t){let d=u+f;const{fileSize:m}=this;m!==null&&(d=Math.min(d,m));const g=Math.floor(u/this.blockSize)*this.blockSize;for(let p=g;p<d;p+=this.blockSize){const y=Math.floor(p/this.blockSize);!this.blockCache.has(y)&&!this.blockRequests.has(y)&&(this.blockIdsToFetch.add(y),i.push(y)),this.blockRequests.has(y)&&a.push(this.blockRequests.get(y)),s.push(y)}}await G0(),this.fetchBlocks(e);const r=[];for(const u of i)this.blockRequests.has(u)&&r.push(this.blockRequests.get(u));await Promise.allSettled(a),await Promise.allSettled(r);const o=[],l=s.filter(u=>this.abortedBlockIds.has(u)||!this.blockCache.has(u));if(l.forEach(u=>this.blockIdsToFetch.add(u)),l.length>0&&e&&!e.aborted){this.fetchBlocks(null);for(const u of l){const f=this.blockRequests.get(u);if(!f)throw new Error(`Block ${u} is not in the block requests`);o.push(f)}await Promise.allSettled(o)}if(e&&e.aborted)throw new mn("Request was aborted");const h=s.map(u=>this.blockCache.get(u)||this.evictedBlocks.get(u)),c=h.filter(u=>!u);if(c.length)throw new V0(c,"Request failed");const _=new Map(U0(s,h));return this.readSliceData(t,_)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const e=this.groupBlocks(this.blockIdsToFetch),a=this.source.fetch(e,t);for(let i=0;i<e.length;++i){const s=e[i];for(const r of s.blockIds)this.blockRequests.set(r,(async()=>{try{const o=(await a)[i],l=r*this.blockSize,h=l-o.offset,c=Math.min(h+this.blockSize,o.data.byteLength),_=o.data.slice(h,c),u=new j0(l,_.byteLength,_,r);this.blockCache.set(r,u),this.abortedBlockIds.delete(r)}catch(o){if(o.name==="AbortError")o.signal=t,this.blockCache.delete(r),this.abortedBlockIds.add(r);else throw o}finally{this.blockRequests.delete(r)}})())}this.blockIdsToFetch.clear()}}groupBlocks(t){const e=Array.from(t).sort((r,o)=>r-o);if(e.length===0)return[];let a=[],i=null;const s=[];for(const r of e)i===null||i+1===r?(a.push(r),i=r):(s.push(new Qr(a[0]*this.blockSize,a.length*this.blockSize,a)),a=[r],i=r);return s.push(new Qr(a[0]*this.blockSize,a.length*this.blockSize,a)),s}readSliceData(t,e){return t.map(a=>{let i=a.offset+a.length;this.fileSize!==null&&(i=Math.min(this.fileSize,i));const s=Math.floor(a.offset/this.blockSize),r=Math.floor(i/this.blockSize),o=new ArrayBuffer(a.length),l=new Uint8Array(o);for(let h=s;h<=r;++h){const c=e.get(h),_=c.offset-a.offset,u=c.top-i;let f=0,d=0,m;_<0?f=-_:_>0&&(d=_),u<0?m=c.length-f:m=i-c.offset-f;const g=new Uint8Array(c.data,f,m);l.set(g,d)}return o})}}class Fs{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class Bs{constructor(t){this.url=t}async request({headers:t,signal:e}={}){throw new Error("request is not implemented")}}class K0 extends Fs{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class W0 extends Bs{constructor(t,e){super(t),this.credentials=e}async request({headers:t,signal:e}={}){const a=await fetch(this.url,{headers:t,credentials:this.credentials,signal:e});return new K0(a)}}class q0 extends Fs{constructor(t,e){super(),this.xhr=t,this.data=e}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class X0 extends Bs{constructRequest(t,e){return new Promise((a,i)=>{const s=new XMLHttpRequest;s.open("GET",this.url),s.responseType="arraybuffer";for(const[r,o]of Object.entries(t))s.setRequestHeader(r,o);s.onload=()=>{const r=s.response;a(new q0(s,r))},s.onerror=i,s.onabort=()=>i(new mn("Request aborted")),s.send(),e&&(e.aborted&&s.abort(),e.addEventListener("abort",()=>s.abort()))})}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}const $i={};class $0 extends Fs{constructor(t,e){super(),this.response=t,this.dataPromise=e}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){return await this.dataPromise}}class Y0 extends Bs{constructor(t){super(t),this.parsedUrl=$i.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",$i)}constructRequest(t,e){return new Promise((a,i)=>{const s=this.httpApi.get({...this.parsedUrl,headers:t},r=>{const o=new Promise(l=>{const h=[];r.on("data",c=>{h.push(c)}),r.on("end",()=>{const c=Buffer.concat(h).buffer;l(c)}),r.on("error",i)});a(new $0(r,o))});s.on("error",i),e&&(e.aborted&&s.destroy(new mn("Request aborted")),e.addEventListener("abort",()=>s.destroy(new mn("Request aborted"))))})}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}class Gs extends wl{constructor(t,e,a,i){super(),this.client=t,this.headers=e,this.maxRanges=a,this.allowFullFile=i,this._fileSize=null}async fetch(t,e){return this.maxRanges>=t.length?this.fetchSlices(t,e):Promise.all(t.map(a=>this.fetchSlice(a,e)))}async fetchSlices(t,e){const a=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map(({offset:i,length:s})=>`${i}-${i+s}`).join(",")}`},signal:e});if(a.ok)if(a.status===206){const{type:i,params:s}=P0(a.getHeader("content-type"));if(i==="multipart/byteranges"){const _=F0(await a.getData(),s.boundary);return this._fileSize=_[0].fileSize||null,_}const r=await a.getData(),{start:o,end:l,total:h}=hs(a.getHeader("content-range"));this._fileSize=h||null;const c=[{data:r,offset:o,length:l-o}];if(t.length>1){const _=await Promise.all(t.slice(1).map(u=>this.fetchSlice(u,e)));return c.concat(_)}return c}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const i=await a.getData();return this._fileSize=i.byteLength,[{data:i,offset:0,length:i.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(t,e){const{offset:a,length:i}=t,s=await this.client.request({headers:{...this.headers,Range:`bytes=${a}-${a+i}`},signal:e});if(s.ok)if(s.status===206){const r=await s.getData(),{total:o}=hs(s.getHeader("content-range"));return this._fileSize=o||null,{data:r,offset:a,length:i}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const r=await s.getData();return this._fileSize=r.byteLength,{data:r,offset:0,length:r.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function Us(n,{blockSize:t,cacheSize:e}){return t===null?n:new H0(n,{blockSize:t,cacheSize:e})}function Z0(n,{headers:t={},credentials:e,maxRanges:a=0,allowFullFile:i=!1,...s}={}){const r=new W0(n,e),o=new Gs(r,t,a,i);return Us(o,s)}function J0(n,{headers:t={},maxRanges:e=0,allowFullFile:a=!1,...i}={}){const s=new X0(n),r=new Gs(s,t,e,a);return Us(r,i)}function Q0(n,{headers:t={},maxRanges:e=0,allowFullFile:a=!1,...i}={}){const s=new Y0(n),r=new Gs(s,t,e,a);return Us(r,i)}function tf(n,{forceXHR:t=!1,...e}={}){return typeof fetch=="function"&&!t?Z0(n,e):typeof XMLHttpRequest<"u"?J0(n,e):Q0(n,e)}function cs(n){switch(n){case V.BYTE:case V.ASCII:case V.SBYTE:case V.UNDEFINED:return 1;case V.SHORT:case V.SSHORT:return 2;case V.LONG:case V.SLONG:case V.FLOAT:case V.IFD:return 4;case V.RATIONAL:case V.SRATIONAL:case V.DOUBLE:case V.LONG8:case V.SLONG8:case V.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${n}`)}}function ef(n){const t=n.GeoKeyDirectory;if(!t)return null;const e={};for(let a=4;a<=t[3]*4;a+=4){const i=u0[t[a]],s=t[a+1]?Yn[t[a+1]]:null,r=t[a+2],o=t[a+3];let l=null;if(!s)l=o;else{if(l=n[s],typeof l>"u"||l===null)throw new Error(`Could not get value of geoKey '${i}'.`);typeof l=="string"?l=l.substring(o,o+r-1):l.subarray&&(l=l.subarray(o,o+r),r===1&&(l=l[0]))}e[i]=l}return e}function Ye(n,t,e,a){let i=null,s=null;const r=cs(t);switch(t){case V.BYTE:case V.ASCII:case V.UNDEFINED:i=new Uint8Array(e),s=n.readUint8;break;case V.SBYTE:i=new Int8Array(e),s=n.readInt8;break;case V.SHORT:i=new Uint16Array(e),s=n.readUint16;break;case V.SSHORT:i=new Int16Array(e),s=n.readInt16;break;case V.LONG:case V.IFD:i=new Uint32Array(e),s=n.readUint32;break;case V.SLONG:i=new Int32Array(e),s=n.readInt32;break;case V.LONG8:case V.IFD8:i=new Array(e),s=n.readUint64;break;case V.SLONG8:i=new Array(e),s=n.readInt64;break;case V.RATIONAL:i=new Uint32Array(e*2),s=n.readUint32;break;case V.SRATIONAL:i=new Int32Array(e*2),s=n.readInt32;break;case V.FLOAT:i=new Float32Array(e),s=n.readFloat32;break;case V.DOUBLE:i=new Float64Array(e),s=n.readFloat64;break;default:throw new RangeError(`Invalid field type: ${t}`)}if(t===V.RATIONAL||t===V.SRATIONAL)for(let o=0;o<e;o+=2)i[o]=s.call(n,a+o*r),i[o+1]=s.call(n,a+(o*r+4));else for(let o=0;o<e;++o)i[o]=s.call(n,a+o*r);return t===V.ASCII?new TextDecoder("utf-8").decode(i):i}class nf{constructor(t,e,a){this.fileDirectory=t,this.geoKeyDirectory=e,this.nextIFDByteOffset=a}}class Ha extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class af{async readRasters(t={}){const{window:e,width:a,height:i}=t;let{resX:s,resY:r,bbox:o}=t;const l=await this.getImage();let h=l;const c=await this.getImageCount(),_=l.getBoundingBox();if(e&&o)throw new Error('Both "bbox" and "window" passed.');if(a||i){if(e){const[d,m]=l.getOrigin(),[g,p]=l.getResolution();o=[d+e[0]*g,m+e[1]*p,d+e[2]*g,m+e[3]*p]}const f=o||_;if(a){if(s)throw new Error("Both width and resX passed");s=(f[2]-f[0])/a}if(i){if(r)throw new Error("Both width and resY passed");r=(f[3]-f[1])/i}}if(s||r){const f=[];for(let d=0;d<c;++d){const m=await this.getImage(d),{SubfileType:g,NewSubfileType:p}=m.fileDirectory;(d===0||g===2||p&1)&&f.push(m)}f.sort((d,m)=>d.getWidth()-m.getWidth());for(let d=0;d<f.length;++d){const m=f[d],g=(_[2]-_[0])/m.getWidth(),p=(_[3]-_[1])/m.getHeight();if(h=m,s&&s>g||r&&r>p)break}}let u=e;if(o){const[f,d]=l.getOrigin(),[m,g]=h.getResolution(l);u=[Math.round((o[0]-f)/m),Math.round((o[1]-d)/g),Math.round((o[2]-f)/m),Math.round((o[3]-d)/g)],u=[Math.min(u[0],u[2]),Math.min(u[1],u[3]),Math.max(u[0],u[2]),Math.max(u[1],u[3])]}return h.readRasters({...t,window:u})}}class zs extends af{constructor(t,e,a,i,s={}){super(),this.source=t,this.littleEndian=e,this.bigTiff=a,this.firstIFDOffset=i,this.cache=s.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,e){const a=this.bigTiff?4048:1024;return new D0((await this.source.fetch([{offset:t,length:typeof e<"u"?e:a}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const e=this.bigTiff?20:12,a=this.bigTiff?8:2;let i=await this.getSlice(t);const s=this.bigTiff?i.readUint64(t):i.readUint16(t),r=s*e+(this.bigTiff?16:6);i.covers(t,r)||(i=await this.getSlice(t,r));const o={};let l=t+(this.bigTiff?8:2);for(let _=0;_<s;l+=e,++_){const u=i.readUint16(l),f=i.readUint16(l+2),d=this.bigTiff?i.readUint64(l+4):i.readUint32(l+4);let m,g;const p=cs(f),y=l+(this.bigTiff?12:8);if(p*d<=(this.bigTiff?8:4))m=Ye(i,f,d,y);else{const x=i.readOffset(y),b=cs(f)*d;if(i.covers(x,b))m=Ye(i,f,d,x);else{const v=await this.getSlice(x,b);m=Ye(v,f,d,x)}}d===1&&c0.indexOf(u)===-1&&!(f===V.RATIONAL||f===V.SRATIONAL)?g=m[0]:g=m,o[Yn[u]]=g}const h=ef(o),c=i.readOffset(t+a+e*s);return new nf(o,h,c)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t];if(t===0)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t];if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(e){throw e instanceof Ha?new Ha(t):e}return this.ifdRequests[t]=(async()=>{const e=await this.ifdRequests[t-1];if(e.nextIFDByteOffset===0)throw new Ha(t);return this.parseFileDirectoryAt(e.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){const e=await this.requestIFD(t);return new T0(e.fileDirectory,e.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,e=!0;for(;e;)try{await this.requestIFD(t),++t}catch(a){if(a instanceof Ha)e=!1;else throw a}return t}async getGhostValues(){const t=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const e="GDAL_STRUCTURAL_METADATA_SIZE=",a=e.length+100;let i=await this.getSlice(t,a);if(e===Ye(i,V.ASCII,e.length,t)){const r=Ye(i,V.ASCII,a,t).split(`
`)[0],o=Number(r.split("=")[1].split(" ")[0])+r.length;o>a&&(i=await this.getSlice(t,o));const l=Ye(i,V.ASCII,o,t);this.ghostValues={},l.split(`
`).filter(h=>h.length>0).map(h=>h.split("=")).forEach(([h,c])=>{this.ghostValues[h]=c})}return this.ghostValues}static async fromSource(t,e,a){const i=(await t.fetch([{offset:0,length:1024}],a))[0],s=new O0(i),r=s.getUint16(0,0);let o;if(r===18761)o=!0;else if(r===19789)o=!1;else throw new TypeError("Invalid byte order value.");const l=s.getUint16(2,o);let h;if(l===42)h=!1;else if(l===43){if(h=!0,s.getUint16(4,o)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const c=h?s.getUint64(8,o):s.getUint32(4,o);return new zs(t,o,h,c,e)}close(){return typeof this.source.close=="function"?this.source.close():!1}}async function sf(n,t={},e){return zs.fromSource(tf(n,t),e)}function rf(n){n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var t=1;t<=60;++t)n("EPSG:"+(32600+t),"+proj=utm +zone="+t+" +datum=WGS84 +units=m"),n("EPSG:"+(32700+t),"+proj=utm +zone="+t+" +south +datum=WGS84 +units=m");n.WGS84=n["EPSG:4326"],n["EPSG:3785"]=n["EPSG:3857"],n.GOOGLE=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}var ze=1,Ve=2,hn=3,of=4,_s=5,to=6378137,lf=6356752314e-3,eo=.0066943799901413165,Zn=484813681109536e-20,S=Math.PI/2,hf=.16666666666666666,cf=.04722222222222222,_f=.022156084656084655,C=1e-10,st=.017453292519943295,Qt=57.29577951308232,X=Math.PI/4,_a=Math.PI*2,rt=3.14159265359,St={};St.greenwich=0;St.lisbon=-9.131906111111;St.paris=2.337229166667;St.bogota=-74.080916666667;St.madrid=-3.687938888889;St.rome=12.452333333333;St.bern=7.439583333333;St.jakarta=106.807719444444;St.ferro=-17.666666666667;St.brussels=4.367975;St.stockholm=18.058277777778;St.athens=23.7163375;St.oslo=10.722916666667;const uf={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var no=/[\s_\-\/\(\)]/g;function Me(n,t){if(n[t])return n[t];for(var e=Object.keys(n),a=t.toLowerCase().replace(no,""),i=-1,s,r;++i<e.length;)if(s=e[i],r=s.toLowerCase().replace(no,""),r===a)return n[s]}function us(n){var t={},e=n.split("+").map(function(o){return o.trim()}).filter(function(o){return o}).reduce(function(o,l){var h=l.split("=");return h.push(!0),o[h[0].toLowerCase()]=h[1],o},{}),a,i,s,r={proj:"projName",datum:"datumCode",rf:function(o){t.rf=parseFloat(o)},lat_0:function(o){t.lat0=o*st},lat_1:function(o){t.lat1=o*st},lat_2:function(o){t.lat2=o*st},lat_ts:function(o){t.lat_ts=o*st},lon_0:function(o){t.long0=o*st},lon_1:function(o){t.long1=o*st},lon_2:function(o){t.long2=o*st},alpha:function(o){t.alpha=parseFloat(o)*st},gamma:function(o){t.rectified_grid_angle=parseFloat(o)},lonc:function(o){t.longc=o*st},x_0:function(o){t.x0=parseFloat(o)},y_0:function(o){t.y0=parseFloat(o)},k_0:function(o){t.k0=parseFloat(o)},k:function(o){t.k0=parseFloat(o)},a:function(o){t.a=parseFloat(o)},b:function(o){t.b=parseFloat(o)},r:function(o){t.a=t.b=parseFloat(o)},r_a:function(){t.R_A=!0},zone:function(o){t.zone=parseInt(o,10)},south:function(){t.utmSouth=!0},towgs84:function(o){t.datum_params=o.split(",").map(function(l){return parseFloat(l)})},to_meter:function(o){t.to_meter=parseFloat(o)},units:function(o){t.units=o;var l=Me(uf,o);l&&(t.to_meter=l.to_meter)},from_greenwich:function(o){t.from_greenwich=o*st},pm:function(o){var l=Me(St,o);t.from_greenwich=(l||parseFloat(o))*st},nadgrids:function(o){o==="@null"?t.datumCode="none":t.nadgrids=o},axis:function(o){var l="ewnsud";o.length===3&&l.indexOf(o.substr(0,1))!==-1&&l.indexOf(o.substr(1,1))!==-1&&l.indexOf(o.substr(2,1))!==-1&&(t.axis=o)},approx:function(){t.approx=!0}};for(a in e)i=e[a],a in r?(s=r[a],typeof s=="function"?s(i):t[s]=i):t[a]=i;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var ua=1,El=2,Sl=3,ri=4,Rl=5,Vs=-1,ff=/\s/,df=/[A-Za-z]/,mf=/[A-Za-z84_]/,Mi=/[,\]]/,Il=/[\d\.E\-\+]/;function de(n){if(typeof n!="string")throw new Error("not a string");this.text=n.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=ua}de.prototype.readCharicter=function(){var n=this.text[this.place++];if(this.state!==ri)for(;ff.test(n);){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case ua:return this.neutral(n);case El:return this.keyword(n);case ri:return this.quoted(n);case Rl:return this.afterquote(n);case Sl:return this.number(n);case Vs:return}};de.prototype.afterquote=function(n){if(n==='"'){this.word+='"',this.state=ri;return}if(Mi.test(n)){this.word=this.word.trim(),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in afterquote yet, index '+this.place)};de.prototype.afterItem=function(n){if(n===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=ua;return}if(n==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=ua,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Vs);return}};de.prototype.number=function(n){if(Il.test(n)){this.word+=n;return}if(Mi.test(n)){this.word=parseFloat(this.word),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in number yet, index '+this.place)};de.prototype.quoted=function(n){if(n==='"'){this.state=Rl;return}this.word+=n};de.prototype.keyword=function(n){if(mf.test(n)){this.word+=n;return}if(n==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=ua;return}if(Mi.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in keyword yet, index '+this.place)};de.prototype.neutral=function(n){if(df.test(n)){this.word=n,this.state=El;return}if(n==='"'){this.word="",this.state=ri;return}if(Il.test(n)){this.word=n,this.state=Sl;return}if(Mi.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in neutral yet, index '+this.place)};de.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Vs)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function gf(n){var t=new de(n);return t.output()}function Yi(n,t,e){Array.isArray(t)&&(e.unshift(t),t=null);var a=t?{}:n,i=e.reduce(function(s,r){return nn(r,s),s},a);t&&(n[t]=i)}function nn(n,t){if(!Array.isArray(n)){t[n]=!0;return}var e=n.shift();if(e==="PARAMETER"&&(e=n.shift()),n.length===1){if(Array.isArray(n[0])){t[e]={},nn(n[0],t[e]);return}t[e]=n[0];return}if(!n.length){t[e]=!0;return}if(e==="TOWGS84"){t[e]=n;return}if(e==="AXIS"){e in t||(t[e]=[]),t[e].push(n);return}Array.isArray(e)||(t[e]={});var a;switch(e){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[e]={name:n[0].toLowerCase(),convert:n[1]},n.length===3&&nn(n[2],t[e]);return;case"SPHEROID":case"ELLIPSOID":t[e]={name:n[0],a:n[1],rf:n[2]},n.length===4&&nn(n[3],t[e]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":n[0]=["name",n[0]],Yi(t,e,n);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":n[0]=["name",n[0]],Yi(t,e,n),t[e].type=e;return;default:for(a=-1;++a<n.length;)if(!Array.isArray(n[a]))return nn(n,t[e]);return Yi(t,e,n)}}var pf=.017453292519943295,yf=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function bf(n,t){var e=t[0],a=t[1];!(e in n)&&a in n&&(n[e]=n[a],t.length===3&&(n[e]=t[2](n[e])))}function Wt(n){return n*pf}function Al(n){for(var t=Object.keys(n),e=0,a=t.length;e<a;++e){var i=t[e];yf.indexOf(i)!==-1&&xf(n[i]),typeof n[i]=="object"&&Al(n[i])}}function xf(n){if(n.AUTHORITY){var t=Object.keys(n.AUTHORITY)[0];t&&t in n.AUTHORITY&&(n.title=t+":"+n.AUTHORITY[t])}if(n.type==="GEOGCS"?n.projName="longlat":n.type==="LOCAL_CS"?(n.projName="identity",n.local=!0):typeof n.PROJECTION=="object"?n.projName=Object.keys(n.PROJECTION)[0]:n.projName=n.PROJECTION,n.AXIS){for(var e="",a=0,i=n.AXIS.length;a<i;++a){var s=[n.AXIS[a][0].toLowerCase(),n.AXIS[a][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?e+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?e+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?e+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(n.axis=e)}n.UNIT&&(n.units=n.UNIT.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.UNIT.convert&&(n.type==="GEOGCS"?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n.UNIT.convert*n.DATUM.SPHEROID.a):n.to_meter=n.UNIT.convert));var r=n.GEOGCS;n.type==="GEOGCS"&&(r=n),r&&(r.DATUM?n.datumCode=r.DATUM.name.toLowerCase():n.datumCode=r.name.toLowerCase(),n.datumCode.slice(0,2)==="d_"&&(n.datumCode=n.datumCode.slice(2)),n.datumCode==="new_zealand_1949"&&(n.datumCode="nzgd49"),(n.datumCode==="wgs_1984"||n.datumCode==="world_geodetic_system_1984")&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!0),n.datumCode="wgs84"),n.datumCode==="belge_1972"&&(n.datumCode="rnb72"),r.DATUM&&r.DATUM.SPHEROID&&(n.ellps=r.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),n.ellps.toLowerCase().slice(0,13)==="international"&&(n.ellps="intl"),n.a=r.DATUM.SPHEROID.a,n.rf=parseFloat(r.DATUM.SPHEROID.rf,10)),r.DATUM&&r.DATUM.TOWGS84&&(n.datum_params=r.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n.datumCode="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode.indexOf("tm65")||~n.datumCode.indexOf("geodetic_datum_of_1965"))&&(n.datumCode="ire65"),n.datumCode==="ch1903+"&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode="isr93")),n.b&&!isFinite(n.b)&&(n.b=n.a);function o(c){var _=n.to_meter||1;return c*_}var l=function(c){return bf(n,c)},h=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Wt],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Wt],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Wt],["lat0","latitude_of_origin",Wt],["lat0","standard_parallel_1",Wt],["lat1","standard_parallel_1",Wt],["lat2","standard_parallel_2",Wt],["azimuth","Azimuth"],["alpha","azimuth",Wt],["srsCode","name"]];h.forEach(l),!n.long0&&n.longc&&(n.projName==="Albers_Conic_Equal_Area"||n.projName==="Lambert_Azimuthal_Equal_Area")&&(n.long0=n.longc),!n.lat_ts&&n.lat1&&(n.projName==="Stereographic_South_Pole"||n.projName==="Polar Stereographic (variant B)")?(n.lat0=Wt(n.lat1>0?90:-90),n.lat_ts=n.lat1):!n.lat_ts&&n.lat0&&n.projName==="Polar_Stereographic"&&(n.lat_ts=n.lat0,n.lat0=Wt(n.lat0>0?90:-90))}function Cl(n){var t=gf(n),e=t[0],a={};return nn(t,a),Al(a),a[e]}function dt(n){var t=this;if(arguments.length===2){var e=arguments[1];typeof e=="string"?e.charAt(0)==="+"?dt[n]=us(arguments[1]):dt[n]=Cl(arguments[1]):dt[n]=e}else if(arguments.length===1){if(Array.isArray(n))return n.map(function(a){Array.isArray(a)?dt.apply(t,a):dt(a)});if(typeof n=="string"){if(n in dt)return dt[n]}else"EPSG"in n?dt["EPSG:"+n.EPSG]=n:"ESRI"in n?dt["ESRI:"+n.ESRI]=n:"IAU2000"in n?dt["IAU2000:"+n.IAU2000]=n:console.log(n);return}}rf(dt);function vf(n){return typeof n=="string"}function Mf(n){return n in dt}var wf=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Ef(n){return wf.some(function(t){return n.indexOf(t)>-1})}var Sf=["3857","900913","3785","102113"];function Rf(n){var t=Me(n,"authority");if(t){var e=Me(t,"epsg");return e&&Sf.indexOf(e)>-1}}function If(n){var t=Me(n,"extension");if(t)return Me(t,"proj4")}function Af(n){return n[0]==="+"}function Cf(n){if(vf(n)){if(Mf(n))return dt[n];if(Ef(n)){var t=Cl(n);if(Rf(t))return dt["EPSG:3857"];var e=If(t);return e?us(e):t}if(Af(n))return us(n)}else return n}function ao(n,t){n=n||{};var e,a;if(!t)return n;for(a in t)e=t[a],e!==void 0&&(n[a]=e);return n}function ee(n,t,e){var a=n*t;return e/Math.sqrt(1-a*a)}function xa(n){return n<0?-1:1}function L(n){return Math.abs(n)<=rt?n:n-xa(n)*_a}function Ut(n,t,e){var a=n*e,i=.5*n;return a=Math.pow((1-a)/(1+a),i),Math.tan(.5*(S-t))/a}function fa(n,t){for(var e=.5*n,a,i,s=S-2*Math.atan(t),r=0;r<=15;r++)if(a=n*Math.sin(s),i=S-2*Math.atan(t*Math.pow((1-a)/(1+a),e))-s,s+=i,Math.abs(i)<=1e-10)return s;return-9999}function Lf(){var n=this.b/this.a;this.es=1-n*n,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=ee(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function kf(n){var t=n.x,e=n.y;if(e*Qt>90&&e*Qt<-90&&t*Qt>180&&t*Qt<-180)return null;var a,i;if(Math.abs(Math.abs(e)-S)<=C)return null;if(this.sphere)a=this.x0+this.a*this.k0*L(t-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(X+.5*e));else{var s=Math.sin(e),r=Ut(this.e,e,s);a=this.x0+this.a*this.k0*L(t-this.long0),i=this.y0-this.a*this.k0*Math.log(r)}return n.x=a,n.y=i,n}function Tf(n){var t=n.x-this.x0,e=n.y-this.y0,a,i;if(this.sphere)i=S-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var s=Math.exp(-e/(this.a*this.k0));if(i=fa(this.e,s),i===-9999)return null}return a=L(this.long0+t/(this.a*this.k0)),n.x=a,n.y=i,n}var Of=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const Df={init:Lf,forward:kf,inverse:Tf,names:Of};function Nf(){}function io(n){return n}var Pf=["longlat","identity"];const Ff={init:Nf,forward:io,inverse:io,names:Pf};var Bf=[Df,Ff],Ya={},oi=[];function Ll(n,t){var e=oi.length;return n.names?(oi[e]=n,n.names.forEach(function(a){Ya[a.toLowerCase()]=e}),this):(console.log(t),!0)}function Gf(n){if(!n)return!1;var t=n.toLowerCase();if(typeof Ya[t]<"u"&&oi[Ya[t]])return oi[Ya[t]]}function Uf(){Bf.forEach(Ll)}const zf={start:Uf,add:Ll,get:Gf};var F={};F.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};F.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};F.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};F.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};F.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};F.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};F.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};F.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};F.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};F.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};F.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};F.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};F.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};F.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};F.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};F.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};F.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};F.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};F.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};F.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};F.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};F.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};F.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};F.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};F.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};F.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};F.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};F.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};F.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};F.hough={a:6378270,rf:297,ellipseName:"Hough"};F.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};F.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};F.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};F.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};F.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};F.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};F.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};F.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};F.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};F.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};F.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};F.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var Vf=F.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};F.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function jf(n,t,e,a){var i=n*n,s=t*t,r=(i-s)/i,o=0;a?(n*=1-r*(hf+r*(cf+r*_f)),i=n*n,r=0):o=Math.sqrt(r);var l=(i-s)/s;return{es:r,e:o,ep2:l}}function Hf(n,t,e,a,i){if(!n){var s=Me(F,a);s||(s=Vf),n=s.a,t=s.b,e=s.rf}return e&&!t&&(t=(1-1/e)*n),(e===0||Math.abs(n-t)<C)&&(i=!0,t=n),{a:n,b:t,rf:e,sphere:i}}var Za={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var Kf in Za){var so=Za[Kf];Za[so.datumName]=so}function Wf(n,t,e,a,i,s,r){var o={};return n===void 0||n==="none"?o.datum_type=_s:o.datum_type=of,t&&(o.datum_params=t.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=ze),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=Ve,o.datum_params[3]*=Zn,o.datum_params[4]*=Zn,o.datum_params[5]*=Zn,o.datum_params[6]=o.datum_params[6]/1e6+1)),r&&(o.datum_type=hn,o.grids=r),o.a=e,o.b=a,o.es=i,o.ep2=s,o}var kl={};function qf(n,t){var e=new DataView(t),a=Yf(e),i=Zf(e,a),s=Jf(e,i,a),r={header:i,subgrids:s};return kl[n]=r,r}function Xf(n){if(n===void 0)return null;var t=n.split(",");return t.map($f)}function $f(n){if(n.length===0)return null;var t=n[0]==="@";return t&&(n=n.slice(1)),n==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:n,mandatory:!t,grid:kl[n]||null,isNull:!1}}function an(n){return n/3600*Math.PI/180}function Yf(n){var t=n.getInt32(8,!1);return t===11?!1:(t=n.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function Zf(n,t){return{nFields:n.getInt32(8,t),nSubgridFields:n.getInt32(24,t),nSubgrids:n.getInt32(40,t),shiftType:fs(n,56,64).trim(),fromSemiMajorAxis:n.getFloat64(120,t),fromSemiMinorAxis:n.getFloat64(136,t),toSemiMajorAxis:n.getFloat64(152,t),toSemiMinorAxis:n.getFloat64(168,t)}}function fs(n,t,e){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(t,e)))}function Jf(n,t,e){for(var a=176,i=[],s=0;s<t.nSubgrids;s++){var r=td(n,a,e),o=ed(n,a,r,e),l=Math.round(1+(r.upperLongitude-r.lowerLongitude)/r.longitudeInterval),h=Math.round(1+(r.upperLatitude-r.lowerLatitude)/r.latitudeInterval);i.push({ll:[an(r.lowerLongitude),an(r.lowerLatitude)],del:[an(r.longitudeInterval),an(r.latitudeInterval)],lim:[l,h],count:r.gridNodeCount,cvs:Qf(o)}),a+=176+r.gridNodeCount*16}return i}function Qf(n){return n.map(function(t){return[an(t.longitudeShift),an(t.latitudeShift)]})}function td(n,t,e){return{name:fs(n,t+8,t+16).trim(),parent:fs(n,t+24,t+24+8).trim(),lowerLatitude:n.getFloat64(t+72,e),upperLatitude:n.getFloat64(t+88,e),lowerLongitude:n.getFloat64(t+104,e),upperLongitude:n.getFloat64(t+120,e),latitudeInterval:n.getFloat64(t+136,e),longitudeInterval:n.getFloat64(t+152,e),gridNodeCount:n.getInt32(t+168,e)}}function ed(n,t,e,a){for(var i=t+176,s=16,r=[],o=0;o<e.gridNodeCount;o++){var l={latitudeShift:n.getFloat32(i+o*s,a),longitudeShift:n.getFloat32(i+o*s+4,a),latitudeAccuracy:n.getFloat32(i+o*s+8,a),longitudeAccuracy:n.getFloat32(i+o*s+12,a)};r.push(l)}return r}function te(n,t){if(!(this instanceof te))return new te(n);t=t||function(h){if(h)throw h};var e=Cf(n);if(typeof e!="object"){t("Could not parse to valid json: "+n);return}var a=te.projections.get(e.projName);if(!a){t("Could not get projection name from: "+n);return}if(e.datumCode&&e.datumCode!=="none"){var i=Me(Za,e.datumCode);i&&(e.datum_params=e.datum_params||(i.towgs84?i.towgs84.split(","):null),e.ellps=i.ellipse,e.datumName=i.datumName?i.datumName:e.datumCode)}e.k0=e.k0||1,e.axis=e.axis||"enu",e.ellps=e.ellps||"wgs84",e.lat1=e.lat1||e.lat0;var s=Hf(e.a,e.b,e.rf,e.ellps,e.sphere),r=jf(s.a,s.b,s.rf,e.R_A),o=Xf(e.nadgrids),l=e.datum||Wf(e.datumCode,e.datum_params,s.a,s.b,r.es,r.ep2,o);ao(this,e),ao(this,a),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=r.es,this.e=r.e,this.ep2=r.ep2,this.datum=l,this.init(),t(null,this)}te.projections=zf;te.projections.start();function nd(n,t){return n.datum_type!==t.datum_type||n.a!==t.a||Math.abs(n.es-t.es)>5e-11?!1:n.datum_type===ze?n.datum_params[0]===t.datum_params[0]&&n.datum_params[1]===t.datum_params[1]&&n.datum_params[2]===t.datum_params[2]:n.datum_type===Ve?n.datum_params[0]===t.datum_params[0]&&n.datum_params[1]===t.datum_params[1]&&n.datum_params[2]===t.datum_params[2]&&n.datum_params[3]===t.datum_params[3]&&n.datum_params[4]===t.datum_params[4]&&n.datum_params[5]===t.datum_params[5]&&n.datum_params[6]===t.datum_params[6]:!0}function Tl(n,t,e){var a=n.x,i=n.y,s=n.z?n.z:0,r,o,l,h;if(i<-S&&i>-1.001*S)i=-S;else if(i>S&&i<1.001*S)i=S;else{if(i<-S)return{x:-1/0,y:-1/0,z:n.z};if(i>S)return{x:1/0,y:1/0,z:n.z}}return a>Math.PI&&(a-=2*Math.PI),o=Math.sin(i),h=Math.cos(i),l=o*o,r=e/Math.sqrt(1-t*l),{x:(r+s)*h*Math.cos(a),y:(r+s)*h*Math.sin(a),z:(r*(1-t)+s)*o}}function Ol(n,t,e,a){var i=1e-12,s=i*i,r=30,o,l,h,c,_,u,f,d,m,g,p,y,x,b=n.x,v=n.y,M=n.z?n.z:0,R,w,I;if(o=Math.sqrt(b*b+v*v),l=Math.sqrt(b*b+v*v+M*M),o/e<i){if(R=0,l/e<i)return w=S,I=-a,{x:n.x,y:n.y,z:n.z}}else R=Math.atan2(v,b);h=M/l,c=o/l,_=1/Math.sqrt(1-t*(2-t)*c*c),d=c*(1-t)*_,m=h*_,x=0;do x++,f=e/Math.sqrt(1-t*m*m),I=o*d+M*m-f*(1-t*m*m),u=t*f/(f+I),_=1/Math.sqrt(1-u*(2-u)*c*c),g=c*(1-u)*_,p=h*_,y=p*d-g*m,d=g,m=p;while(y*y>s&&x<r);return w=Math.atan(p/Math.abs(g)),{x:R,y:w,z:I}}function ad(n,t,e){if(t===ze)return{x:n.x+e[0],y:n.y+e[1],z:n.z+e[2]};if(t===Ve){var a=e[0],i=e[1],s=e[2],r=e[3],o=e[4],l=e[5],h=e[6];return{x:h*(n.x-l*n.y+o*n.z)+a,y:h*(l*n.x+n.y-r*n.z)+i,z:h*(-o*n.x+r*n.y+n.z)+s}}}function id(n,t,e){if(t===ze)return{x:n.x-e[0],y:n.y-e[1],z:n.z-e[2]};if(t===Ve){var a=e[0],i=e[1],s=e[2],r=e[3],o=e[4],l=e[5],h=e[6],c=(n.x-a)/h,_=(n.y-i)/h,u=(n.z-s)/h;return{x:c+l*_-o*u,y:-l*c+_+r*u,z:o*c-r*_+u}}}function Ka(n){return n===ze||n===Ve}function sd(n,t,e){if(nd(n,t)||n.datum_type===_s||t.datum_type===_s)return e;var a=n.a,i=n.es;if(n.datum_type===hn){var s=ro(n,!1,e);if(s!==0)return;a=to,i=eo}var r=t.a,o=t.b,l=t.es;if(t.datum_type===hn&&(r=to,o=lf,l=eo),i===l&&a===r&&!Ka(n.datum_type)&&!Ka(t.datum_type))return e;if(e=Tl(e,i,a),Ka(n.datum_type)&&(e=ad(e,n.datum_type,n.datum_params)),Ka(t.datum_type)&&(e=id(e,t.datum_type,t.datum_params)),e=Ol(e,l,r,o),t.datum_type===hn){var h=ro(t,!0,e);if(h!==0)return}return e}function ro(n,t,e){if(n.grids===null||n.grids.length===0)return console.log("Grid shift grids not found"),-1;var a={x:-e.x,y:e.y},i={x:Number.NaN,y:Number.NaN},s=[];t:for(var r=0;r<n.grids.length;r++){var o=n.grids[r];if(s.push(o.name),o.isNull){i=a;break}if(o.grid===null){if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1;continue}for(var l=o.grid.subgrids,h=0,c=l.length;h<c;h++){var _=l[h],u=(Math.abs(_.del[1])+Math.abs(_.del[0]))/1e4,f=_.ll[0]-u,d=_.ll[1]-u,m=_.ll[0]+(_.lim[0]-1)*_.del[0]+u,g=_.ll[1]+(_.lim[1]-1)*_.del[1]+u;if(!(d>a.y||f>a.x||g<a.y||m<a.x)&&(i=rd(a,t,_),!isNaN(i.x)))break t}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-a.x*Qt+" "+a.y*Qt+" tried: '"+s+"'"),-1):(e.x=-i.x,e.y=i.y,0)}function rd(n,t,e){var a={x:Number.NaN,y:Number.NaN};if(isNaN(n.x))return a;var i={x:n.x,y:n.y};i.x-=e.ll[0],i.y-=e.ll[1],i.x=L(i.x-Math.PI)+Math.PI;var s=oo(i,e);if(t){if(isNaN(s.x))return a;s.x=i.x-s.x,s.y=i.y-s.y;var r=9,o=1e-12,l,h;do{if(h=oo(s,e),isNaN(h.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:i.x-(h.x+s.x),y:i.y-(h.y+s.y)},s.x+=l.x,s.y+=l.y}while(r--&&Math.abs(l.x)>o&&Math.abs(l.y)>o);if(r<0)return console.log("Inverse grid shift iterator failed to converge."),a;a.x=L(s.x+e.ll[0]),a.y=s.y+e.ll[1]}else isNaN(s.x)||(a.x=n.x+s.x,a.y=n.y+s.y);return a}function oo(n,t){var e={x:n.x/t.del[0],y:n.y/t.del[1]},a={x:Math.floor(e.x),y:Math.floor(e.y)},i={x:e.x-1*a.x,y:e.y-1*a.y},s={x:Number.NaN,y:Number.NaN},r;if(a.x<0||a.x>=t.lim[0]||a.y<0||a.y>=t.lim[1])return s;r=a.y*t.lim[0]+a.x;var o={x:t.cvs[r][0],y:t.cvs[r][1]};r++;var l={x:t.cvs[r][0],y:t.cvs[r][1]};r+=t.lim[0];var h={x:t.cvs[r][0],y:t.cvs[r][1]};r--;var c={x:t.cvs[r][0],y:t.cvs[r][1]},_=i.x*i.y,u=i.x*(1-i.y),f=(1-i.x)*(1-i.y),d=(1-i.x)*i.y;return s.x=f*o.x+u*l.x+d*c.x+_*h.x,s.y=f*o.y+u*l.y+d*c.y+_*h.y,s}function lo(n,t,e){var a=e.x,i=e.y,s=e.z||0,r,o,l,h={};for(l=0;l<3;l++)if(!(t&&l===2&&e.z===void 0))switch(l===0?(r=a,"ew".indexOf(n.axis[l])!==-1?o="x":o="y"):l===1?(r=i,"ns".indexOf(n.axis[l])!==-1?o="y":o="x"):(r=s,o="z"),n.axis[l]){case"e":h[o]=r;break;case"w":h[o]=-r;break;case"n":h[o]=r;break;case"s":h[o]=-r;break;case"u":e[o]!==void 0&&(h.z=r);break;case"d":e[o]!==void 0&&(h.z=-r);break;default:return null}return h}function Dl(n){var t={x:n[0],y:n[1]};return n.length>2&&(t.z=n[2]),n.length>3&&(t.m=n[3]),t}function od(n){ho(n.x),ho(n.y)}function ho(n){if(typeof Number.isFinite=="function"){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if(typeof n!="number"||n!==n||!isFinite(n))throw new TypeError("coordinates must be finite numbers")}function ld(n,t){return(n.datum.datum_type===ze||n.datum.datum_type===Ve||n.datum.datum_type===hn)&&t.datumCode!=="WGS84"||(t.datum.datum_type===ze||t.datum.datum_type===Ve||t.datum.datum_type===hn)&&n.datumCode!=="WGS84"}function li(n,t,e,a){var i;Array.isArray(e)?e=Dl(e):e={x:e.x,y:e.y,z:e.z,m:e.m};var s=e.z!==void 0;if(od(e),n.datum&&t.datum&&ld(n,t)&&(i=new te("WGS84"),e=li(n,i,e,a),n=i),a&&n.axis!=="enu"&&(e=lo(n,!1,e)),n.projName==="longlat")e={x:e.x*st,y:e.y*st,z:e.z||0};else if(n.to_meter&&(e={x:e.x*n.to_meter,y:e.y*n.to_meter,z:e.z||0}),e=n.inverse(e),!e)return;if(n.from_greenwich&&(e.x+=n.from_greenwich),e=sd(n.datum,t.datum,e),!!e)return t.from_greenwich&&(e={x:e.x-t.from_greenwich,y:e.y,z:e.z||0}),t.projName==="longlat"?e={x:e.x*Qt,y:e.y*Qt,z:e.z||0}:(e=t.forward(e),t.to_meter&&(e={x:e.x/t.to_meter,y:e.y/t.to_meter,z:e.z||0})),a&&t.axis!=="enu"?lo(t,!0,e):(e&&!s&&delete e.z,e)}var co=te("WGS84");function Zi(n,t,e,a){var i,s,r;return Array.isArray(e)?(i=li(n,t,e,a)||{x:NaN,y:NaN},e.length>2?typeof n.name<"u"&&n.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(e.slice(3)):[i.x,i.y,e[2]].concat(e.slice(3)):[i.x,i.y].concat(e.slice(2)):[i.x,i.y]):(s=li(n,t,e,a),r=Object.keys(e),r.length===2||r.forEach(function(o){if(typeof n.name<"u"&&n.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;s[o]=e[o]}),s)}function _o(n){return n instanceof te?n:n.oProj?n.oProj:te(n)}function bt(n,t,e){n=_o(n);var a=!1,i;return typeof t>"u"?(t=n,n=co,a=!0):(typeof t.x<"u"||Array.isArray(t))&&(e=t,t=n,n=co,a=!0),t=_o(t),e?Zi(n,t,e):(i={forward:function(s,r){return Zi(n,t,s,r)},inverse:function(s,r){return Zi(t,n,s,r)}},a&&(i.oProj=t),i)}var uo=6,Nl="AJSAJS",Pl="AFAFAF",sn=65,xt=73,Ot=79,Vn=86,jn=90;const hd={forward:Fl,inverse:cd,toPoint:Bl};function Fl(n,t){return t=t||5,fd(_d({lat:n[1],lon:n[0]}),t)}function cd(n){var t=js(Ul(n.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function Bl(n){var t=js(Ul(n.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function Ji(n){return n*(Math.PI/180)}function fo(n){return 180*(n/Math.PI)}function _d(n){var t=n.lat,e=n.lon,a=6378137,i=.00669438,s=.9996,r,o,l,h,c,_,u,f=Ji(t),d=Ji(e),m,g;g=Math.floor((e+180)/6)+1,e===180&&(g=60),t>=56&&t<64&&e>=3&&e<12&&(g=32),t>=72&&t<84&&(e>=0&&e<9?g=31:e>=9&&e<21?g=33:e>=21&&e<33?g=35:e>=33&&e<42&&(g=37)),r=(g-1)*6-180+3,m=Ji(r),o=i/(1-i),l=a/Math.sqrt(1-i*Math.sin(f)*Math.sin(f)),h=Math.tan(f)*Math.tan(f),c=o*Math.cos(f)*Math.cos(f),_=Math.cos(f)*(d-m),u=a*((1-i/4-3*i*i/64-5*i*i*i/256)*f-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*f)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*f)-35*i*i*i/3072*Math.sin(6*f));var p=s*l*(_+(1-h+c)*_*_*_/6+(5-18*h+h*h+72*c-58*o)*_*_*_*_*_/120)+5e5,y=s*(u+l*Math.tan(f)*(_*_/2+(5-h+9*c+4*c*c)*_*_*_*_/24+(61-58*h+h*h+600*c-330*o)*_*_*_*_*_*_/720));return t<0&&(y+=1e7),{northing:Math.round(y),easting:Math.round(p),zoneNumber:g,zoneLetter:ud(t)}}function js(n){var t=n.northing,e=n.easting,a=n.zoneLetter,i=n.zoneNumber;if(i<0||i>60)return null;var s=.9996,r=6378137,o=.00669438,l,h=(1-Math.sqrt(1-o))/(1+Math.sqrt(1-o)),c,_,u,f,d,m,g,p,y,x=e-5e5,b=t;a<"N"&&(b-=1e7),g=(i-1)*6-180+3,l=o/(1-o),m=b/s,p=m/(r*(1-o/4-3*o*o/64-5*o*o*o/256)),y=p+(3*h/2-27*h*h*h/32)*Math.sin(2*p)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*p)+151*h*h*h/96*Math.sin(6*p),c=r/Math.sqrt(1-o*Math.sin(y)*Math.sin(y)),_=Math.tan(y)*Math.tan(y),u=l*Math.cos(y)*Math.cos(y),f=r*(1-o)/Math.pow(1-o*Math.sin(y)*Math.sin(y),1.5),d=x/(c*s);var v=y-c*Math.tan(y)/f*(d*d/2-(5+3*_+10*u-4*u*u-9*l)*d*d*d*d/24+(61+90*_+298*u+45*_*_-252*l-3*u*u)*d*d*d*d*d*d/720);v=fo(v);var M=(d-(1+2*_+u)*d*d*d/6+(5-2*u+28*_-3*u*u+8*l+24*_*_)*d*d*d*d*d/120)/Math.cos(y);M=g+fo(M);var R;if(n.accuracy){var w=js({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});R={top:w.lat,right:w.lon,bottom:v,left:M}}else R={lat:v,lon:M};return R}function ud(n){var t="Z";return 84>=n&&n>=72?t="X":72>n&&n>=64?t="W":64>n&&n>=56?t="V":56>n&&n>=48?t="U":48>n&&n>=40?t="T":40>n&&n>=32?t="S":32>n&&n>=24?t="R":24>n&&n>=16?t="Q":16>n&&n>=8?t="P":8>n&&n>=0?t="N":0>n&&n>=-8?t="M":-8>n&&n>=-16?t="L":-16>n&&n>=-24?t="K":-24>n&&n>=-32?t="J":-32>n&&n>=-40?t="H":-40>n&&n>=-48?t="G":-48>n&&n>=-56?t="F":-56>n&&n>=-64?t="E":-64>n&&n>=-72?t="D":-72>n&&n>=-80&&(t="C"),t}function fd(n,t){var e="00000"+n.easting,a="00000"+n.northing;return n.zoneNumber+n.zoneLetter+dd(n.easting,n.northing,n.zoneNumber)+e.substr(e.length-5,t)+a.substr(a.length-5,t)}function dd(n,t,e){var a=Gl(e),i=Math.floor(n/1e5),s=Math.floor(t/1e5)%20;return md(i,s,a)}function Gl(n){var t=n%uo;return t===0&&(t=uo),t}function md(n,t,e){var a=e-1,i=Nl.charCodeAt(a),s=Pl.charCodeAt(a),r=i+n-1,o=s+t,l=!1;r>jn&&(r=r-jn+sn-1,l=!0),(r===xt||i<xt&&r>xt||(r>xt||i<xt)&&l)&&r++,(r===Ot||i<Ot&&r>Ot||(r>Ot||i<Ot)&&l)&&(r++,r===xt&&r++),r>jn&&(r=r-jn+sn-1),o>Vn?(o=o-Vn+sn-1,l=!0):l=!1,(o===xt||s<xt&&o>xt||(o>xt||s<xt)&&l)&&o++,(o===Ot||s<Ot&&o>Ot||(o>Ot||s<Ot)&&l)&&(o++,o===xt&&o++),o>Vn&&(o=o-Vn+sn-1);var h=String.fromCharCode(r)+String.fromCharCode(o);return h}function Ul(n){if(n&&n.length===0)throw"MGRSPoint coverting from nothing";for(var t=n.length,e=null,a="",i,s=0;!/[A-Z]/.test(i=n.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+n;a+=i,s++}var r=parseInt(a,10);if(s===0||s+3>t)throw"MGRSPoint bad conversion from: "+n;var o=n.charAt(s++);if(o<="A"||o==="B"||o==="Y"||o>="Z"||o==="I"||o==="O")throw"MGRSPoint zone letter "+o+" not handled: "+n;e=n.substring(s,s+=2);for(var l=Gl(r),h=gd(e.charAt(0),l),c=pd(e.charAt(1),l);c<yd(o);)c+=2e6;var _=t-s;if(_%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+n;var u=_/2,f=0,d=0,m,g,p,y,x;return u>0&&(m=1e5/Math.pow(10,u),g=n.substring(s,s+u),f=parseFloat(g)*m,p=n.substring(s+u),d=parseFloat(p)*m),y=f+h,x=d+c,{easting:y,northing:x,zoneLetter:o,zoneNumber:r,accuracy:m}}function gd(n,t){for(var e=Nl.charCodeAt(t-1),a=1e5,i=!1;e!==n.charCodeAt(0);){if(e++,e===xt&&e++,e===Ot&&e++,e>jn){if(i)throw"Bad character: "+n;e=sn,i=!0}a+=1e5}return a}function pd(n,t){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var e=Pl.charCodeAt(t-1),a=0,i=!1;e!==n.charCodeAt(0);){if(e++,e===xt&&e++,e===Ot&&e++,e>Vn){if(i)throw"Bad character: "+n;e=sn,i=!0}a+=1e5}return a}function yd(n){var t;switch(n){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+n}function gn(n,t,e){if(!(this instanceof gn))return new gn(n,t,e);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n=="string"&&typeof t>"u"){var a=n.split(",");this.x=parseFloat(a[0],10),this.y=parseFloat(a[1],10),this.z=parseFloat(a[2],10)||0}else this.x=n,this.y=t,this.z=e||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}gn.fromMGRS=function(n){return new gn(Bl(n))};gn.prototype.toMGRS=function(n){return Fl([this.x,this.y],n)};var bd=1,xd=.25,mo=.046875,go=.01953125,po=.01068115234375,vd=.75,Md=.46875,wd=.013020833333333334,Ed=.007120768229166667,Sd=.3645833333333333,Rd=.005696614583333333,Id=.3076171875;function Hs(n){var t=[];t[0]=bd-n*(xd+n*(mo+n*(go+n*po))),t[1]=n*(vd-n*(mo+n*(go+n*po)));var e=n*n;return t[2]=e*(Md-n*(wd+n*Ed)),e*=n,t[3]=e*(Sd-n*Rd),t[4]=e*n*Id,t}function vn(n,t,e,a){return e*=t,t*=t,a[0]*n-e*(a[1]+t*(a[2]+t*(a[3]+t*a[4])))}var Ad=20;function Ks(n,t,e){for(var a=1/(1-t),i=n,s=Ad;s;--s){var r=Math.sin(i),o=1-t*r*r;if(o=(vn(i,r,Math.cos(i),e)-n)*(o*Math.sqrt(o))*a,i-=o,Math.abs(o)<C)return i}return i}function Cd(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Hs(this.es),this.ml0=vn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Ld(n){var t=n.x,e=n.y,a=L(t-this.long0),i,s,r,o=Math.sin(e),l=Math.cos(e);if(this.es){var c=l*a,_=Math.pow(c,2),u=this.ep2*Math.pow(l,2),f=Math.pow(u,2),d=Math.abs(l)>C?Math.tan(e):0,m=Math.pow(d,2),g=Math.pow(m,2);i=1-this.es*Math.pow(o,2),c=c/Math.sqrt(i);var p=vn(e,o,l,this.en);s=this.a*(this.k0*c*(1+_/6*(1-m+u+_/20*(5-18*m+g+14*u-58*m*u+_/42*(61+179*g-g*m-479*m)))))+this.x0,r=this.a*(this.k0*(p-this.ml0+o*a*c/2*(1+_/12*(5-m+9*u+4*f+_/30*(61+g-58*m+270*u-330*m*u+_/56*(1385+543*g-g*m-3111*m))))))+this.y0}else{var h=l*Math.sin(a);if(Math.abs(Math.abs(h)-1)<C)return 93;if(s=.5*this.a*this.k0*Math.log((1+h)/(1-h))+this.x0,r=l*Math.cos(a)/Math.sqrt(1-Math.pow(h,2)),h=Math.abs(r),h>=1){if(h-1>C)return 93;r=0}else r=Math.acos(r);e<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return n.x=s,n.y=r,n}function kd(n){var t,e,a,i,s=(n.x-this.x0)*(1/this.a),r=(n.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+r/this.k0,e=Ks(t,this.es,this.en),Math.abs(e)<S){var _=Math.sin(e),u=Math.cos(e),f=Math.abs(u)>C?Math.tan(e):0,d=this.ep2*Math.pow(u,2),m=Math.pow(d,2),g=Math.pow(f,2),p=Math.pow(g,2);t=1-this.es*Math.pow(_,2);var y=s*Math.sqrt(t)/this.k0,x=Math.pow(y,2);t=t*f,a=e-t*x/(1-this.es)*.5*(1-x/12*(5+3*g-9*d*g+d-4*m-x/30*(61+90*g-252*d*g+45*p+46*d-x/56*(1385+3633*g+4095*p+1574*p*g)))),i=L(this.long0+y*(1-x/6*(1+2*g+d-x/20*(5+28*g+24*p+8*d*g+6*d-x/42*(61+662*g+1320*p+720*p*g))))/u)}else a=S*xa(r),i=0;else{var o=Math.exp(s/this.k0),l=.5*(o-1/o),h=this.lat0+r/this.k0,c=Math.cos(h);t=Math.sqrt((1-Math.pow(c,2))/(1+Math.pow(l,2))),a=Math.asin(t),r<0&&(a=-a),l===0&&c===0?i=0:i=L(Math.atan2(l,c)+this.long0)}return n.x=i,n.y=a,n}var Td=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Ja={init:Cd,forward:Ld,inverse:kd,names:Td};function zl(n){var t=Math.exp(n);return t=(t-1/t)/2,t}function Et(n,t){n=Math.abs(n),t=Math.abs(t);var e=Math.max(n,t),a=Math.min(n,t)/(e||1);return e*Math.sqrt(1+Math.pow(a,2))}function Od(n){var t=1+n,e=t-1;return e===0?n:n*Math.log(t)/e}function Dd(n){var t=Math.abs(n);return t=Od(t*(1+t/(Et(1,t)+1))),n<0?-t:t}function Ws(n,t){for(var e=2*Math.cos(2*t),a=n.length-1,i=n[a],s=0,r;--a>=0;)r=-s+e*i+n[a],s=i,i=r;return t+r*Math.sin(2*t)}function Nd(n,t){for(var e=2*Math.cos(t),a=n.length-1,i=n[a],s=0,r;--a>=0;)r=-s+e*i+n[a],s=i,i=r;return Math.sin(t)*r}function Pd(n){var t=Math.exp(n);return t=(t+1/t)/2,t}function Vl(n,t,e){for(var a=Math.sin(t),i=Math.cos(t),s=zl(e),r=Pd(e),o=2*i*r,l=-2*a*s,h=n.length-1,c=n[h],_=0,u=0,f=0,d,m;--h>=0;)d=u,m=_,u=c,_=f,c=-d+o*u-l*_+n[h],f=-m+l*u+o*_;return o=a*r,l=i*s,[o*c-l*f,o*f+l*c]}function Fd(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Ja.init.apply(this),this.forward=Ja.forward,this.inverse=Ja.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var n=this.es/(1+Math.sqrt(1-this.es)),t=n/(2-n),e=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),e=e*t,this.cgb[1]=e*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=e*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),e=e*t,this.cgb[2]=e*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=e*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),e=e*t,this.cgb[3]=e*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=e*(1237/630+t*(-12/5+t*(-24832/14175))),e=e*t,this.cgb[4]=e*(4174/315+t*(-144838/6237)),this.cbg[4]=e*(-734/315+t*(109598/31185)),e=e*t,this.cgb[5]=e*(601676/22275),this.cbg[5]=e*(444337/155925),e=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+e*(1/4+e*(1/64+e/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=e*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=e*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),e=e*t,this.utg[2]=e*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=e*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),e=e*t,this.utg[3]=e*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=e*(49561/161280+t*(-179/168+t*(6601661/7257600))),e=e*t,this.utg[4]=e*(-4583/161280+t*(108847/3991680)),this.gtu[4]=e*(34729/80640+t*(-3418889/1995840)),e=e*t,this.utg[5]=e*(-20648693/638668800),this.gtu[5]=e*(212378941/319334400);var a=Ws(this.cbg,this.lat0);this.Zb=-this.Qn*(a+Nd(this.gtu,2*a))}function Bd(n){var t=L(n.x-this.long0),e=n.y;e=Ws(this.cbg,e);var a=Math.sin(e),i=Math.cos(e),s=Math.sin(t),r=Math.cos(t);e=Math.atan2(a,r*i),t=Math.atan2(s*i,Et(a,i*r)),t=Dd(Math.tan(t));var o=Vl(this.gtu,2*e,2*t);e=e+o[0],t=t+o[1];var l,h;return Math.abs(t)<=2.623395162778?(l=this.a*(this.Qn*t)+this.x0,h=this.a*(this.Qn*e+this.Zb)+this.y0):(l=1/0,h=1/0),n.x=l,n.y=h,n}function Gd(n){var t=(n.x-this.x0)*(1/this.a),e=(n.y-this.y0)*(1/this.a);e=(e-this.Zb)/this.Qn,t=t/this.Qn;var a,i;if(Math.abs(t)<=2.623395162778){var s=Vl(this.utg,2*e,2*t);e=e+s[0],t=t+s[1],t=Math.atan(zl(t));var r=Math.sin(e),o=Math.cos(e),l=Math.sin(t),h=Math.cos(t);e=Math.atan2(r*h,Et(l,h*o)),t=Math.atan2(l,h*o),a=L(t+this.long0),i=Ws(this.cgb,e)}else a=1/0,i=1/0;return n.x=a,n.y=i,n}var Ud=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const Qa={init:Fd,forward:Bd,inverse:Gd,names:Ud};function zd(n,t){if(n===void 0){if(n=Math.floor((L(t)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}var Vd="etmerc";function jd(){var n=zd(this.zone,this.long0);if(n===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(n)-183)*st,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Qa.init.apply(this),this.forward=Qa.forward,this.inverse=Qa.inverse}var Hd=["Universal Transverse Mercator System","utm"];const Kd={init:jd,names:Hd,dependsOn:Vd};function qs(n,t){return Math.pow((1-n)/(1+n),t)}var Wd=20;function qd(){var n=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*n*n),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(n/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+X)/(Math.pow(Math.tan(.5*this.lat0+X),this.C)*qs(this.e*n,this.ratexp))}function Xd(n){var t=n.x,e=n.y;return n.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*e+X),this.C)*qs(this.e*Math.sin(e),this.ratexp))-S,n.x=this.C*t,n}function $d(n){for(var t=1e-14,e=n.x/this.C,a=n.y,i=Math.pow(Math.tan(.5*a+X)/this.K,1/this.C),s=Wd;s>0&&(a=2*Math.atan(i*qs(this.e*Math.sin(n.y),-.5*this.e))-S,!(Math.abs(a-n.y)<t));--s)n.y=a;return s?(n.x=e,n.y=a,n):null}const Xs={init:qd,forward:Xd,inverse:$d};function Yd(){Xs.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Zd(n){var t,e,a,i;return n.x=L(n.x-this.long0),Xs.forward.apply(this,[n]),t=Math.sin(n.y),e=Math.cos(n.y),a=Math.cos(n.x),i=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*e*a),n.x=i*e*Math.sin(n.x),n.y=i*(this.cosc0*t-this.sinc0*e*a),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function Jd(n){var t,e,a,i,s;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,s=Et(n.x,n.y)){var r=2*Math.atan2(s,this.R2);t=Math.sin(r),e=Math.cos(r),i=Math.asin(e*this.sinc0+n.y*t*this.cosc0/s),a=Math.atan2(n.x*t,s*this.cosc0*e-n.y*this.sinc0*t)}else i=this.phic0,a=0;return n.x=a,n.y=i,Xs.inverse.apply(this,[n]),n.x=L(n.x+this.long0),n}var Qd=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const tm={init:Yd,forward:Zd,inverse:Jd,names:Qd};function em(n,t,e){return t*=e,Math.tan(.5*(S+n))*Math.pow((1-t)/(1+t),.5*e)}function nm(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=C&&(this.k0=.5*(1+xa(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=C&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=C&&Math.abs(Math.cos(this.lat_ts))>C&&(this.k0=.5*this.cons*ee(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ut(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ee(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-S,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function am(n){var t=n.x,e=n.y,a=Math.sin(e),i=Math.cos(e),s,r,o,l,h,c,_=L(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=C&&Math.abs(e+this.lat0)<=C?(n.x=NaN,n.y=NaN,n):this.sphere?(s=2*this.k0/(1+this.sinlat0*a+this.coslat0*i*Math.cos(_)),n.x=this.a*s*i*Math.sin(_)+this.x0,n.y=this.a*s*(this.coslat0*a-this.sinlat0*i*Math.cos(_))+this.y0,n):(r=2*Math.atan(this.ssfn_(e,a,this.e))-S,l=Math.cos(r),o=Math.sin(r),Math.abs(this.coslat0)<=C?(h=Ut(this.e,e*this.con,this.con*a),c=2*this.a*this.k0*h/this.cons,n.x=this.x0+c*Math.sin(t-this.long0),n.y=this.y0-this.con*c*Math.cos(t-this.long0),n):(Math.abs(this.sinlat0)<C?(s=2*this.a*this.k0/(1+l*Math.cos(_)),n.y=s*o):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*l*Math.cos(_))),n.y=s*(this.cosX0*o-this.sinX0*l*Math.cos(_))+this.y0),n.x=s*l*Math.sin(_)+this.x0,n))}function im(n){n.x-=this.x0,n.y-=this.y0;var t,e,a,i,s,r=Math.sqrt(n.x*n.x+n.y*n.y);if(this.sphere){var o=2*Math.atan(r/(2*this.a*this.k0));return t=this.long0,e=this.lat0,r<=C?(n.x=t,n.y=e,n):(e=Math.asin(Math.cos(o)*this.sinlat0+n.y*Math.sin(o)*this.coslat0/r),Math.abs(this.coslat0)<C?this.lat0>0?t=L(this.long0+Math.atan2(n.x,-1*n.y)):t=L(this.long0+Math.atan2(n.x,n.y)):t=L(this.long0+Math.atan2(n.x*Math.sin(o),r*this.coslat0*Math.cos(o)-n.y*this.sinlat0*Math.sin(o))),n.x=t,n.y=e,n)}else if(Math.abs(this.coslat0)<=C){if(r<=C)return e=this.lat0,t=this.long0,n.x=t,n.y=e,n;n.x*=this.con,n.y*=this.con,a=r*this.cons/(2*this.a*this.k0),e=this.con*fa(this.e,a),t=this.con*L(this.con*this.long0+Math.atan2(n.x,-1*n.y))}else i=2*Math.atan(r*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,r<=C?s=this.X0:(s=Math.asin(Math.cos(i)*this.sinX0+n.y*Math.sin(i)*this.cosX0/r),t=L(this.long0+Math.atan2(n.x*Math.sin(i),r*this.cosX0*Math.cos(i)-n.y*this.sinX0*Math.sin(i)))),e=-1*fa(this.e,Math.tan(.5*(S+s)));return n.x=t,n.y=e,n}var sm=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const rm={init:nm,forward:am,inverse:im,names:sm,ssfn_:em};function om(){var n=this.lat0;this.lambda0=this.long0;var t=Math.sin(n),e=this.a,a=this.rf,i=1/a,s=2*i-Math.pow(i,2),r=this.e=Math.sqrt(s);this.R=this.k0*e*Math.sqrt(1-s)/(1-s*Math.pow(t,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(n),4)),this.b0=Math.asin(t/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+n/2)),h=Math.log((1+r*t)/(1-r*t));this.K=o-this.alpha*l+this.alpha*r/2*h}function lm(n){var t=Math.log(Math.tan(Math.PI/4-n.y/2)),e=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),a=-this.alpha*(t+e)+this.K,i=2*(Math.atan(Math.exp(a))-Math.PI/4),s=this.alpha*(n.x-this.lambda0),r=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(s))),o=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(s));return n.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,n.x=this.R*r+this.x0,n}function hm(n){for(var t=n.x-this.x0,e=n.y-this.y0,a=t/this.R,i=2*(Math.atan(Math.exp(e/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(a)),r=Math.atan(Math.sin(a)/(Math.cos(this.b0)*Math.cos(a)-Math.sin(this.b0)*Math.tan(i))),o=this.lambda0+r/this.alpha,l=0,h=s,c=-1e3,_=0;Math.abs(h-c)>1e-7;){if(++_>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),c=h,h=2*Math.atan(Math.exp(l))-Math.PI/2}return n.x=o,n.y=h,n}var cm=["somerc"];const _m={init:om,forward:lm,inverse:hm,names:cm};var tn=1e-7;function um(n){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],e=typeof n.PROJECTION=="object"?Object.keys(n.PROJECTION)[0]:n.PROJECTION;return"no_uoff"in n||"no_off"in n||t.indexOf(e)!==-1}function fm(){var n,t,e,a,i,s,r,o,l,h,c=0,_,u=0,f=0,d=0,m=0,g=0,p=0;this.no_off=um(this),this.no_rot="no_rot"in this;var y=!1;"alpha"in this&&(y=!0);var x=!1;if("rectified_grid_angle"in this&&(x=!0),y&&(p=this.alpha),x&&(c=this.rectified_grid_angle*st),y||x)u=this.longc;else if(f=this.long1,m=this.lat1,d=this.long2,g=this.lat2,Math.abs(m-g)<=tn||(n=Math.abs(m))<=tn||Math.abs(n-S)<=tn||Math.abs(Math.abs(this.lat0)-S)<=tn||Math.abs(Math.abs(g)-S)<=tn)throw new Error;var b=1-this.es;t=Math.sqrt(b),Math.abs(this.lat0)>C?(o=Math.sin(this.lat0),e=Math.cos(this.lat0),n=1-this.es*o*o,this.B=e*e,this.B=Math.sqrt(1+this.es*this.B*this.B/b),this.A=this.B*this.k0*t/n,a=this.B*t/(e*Math.sqrt(n)),i=a*a-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=a,this.E*=Math.pow(Ut(this.e,this.lat0,o),this.B)):(this.B=1/t,this.A=this.k0,this.E=a=i=1),y||x?(y?(_=Math.asin(Math.sin(p)/a),x||(c=p)):(_=c,p=Math.asin(a*Math.sin(_))),this.lam0=u-Math.asin(.5*(i-1/i)*Math.tan(_))/this.B):(s=Math.pow(Ut(this.e,m,Math.sin(m)),this.B),r=Math.pow(Ut(this.e,g,Math.sin(g)),this.B),i=this.E/s,l=(r-s)/(r+s),h=this.E*this.E,h=(h-r*s)/(h+r*s),n=f-d,n<-Math.pi?d-=_a:n>Math.pi&&(d+=_a),this.lam0=L(.5*(f+d)-Math.atan(h*Math.tan(.5*this.B*(f-d))/l)/this.B),_=Math.atan(2*Math.sin(this.B*L(f-this.lam0))/(i-1/i)),c=p=Math.asin(a*Math.sin(_))),this.singam=Math.sin(_),this.cosgam=Math.cos(_),this.sinrot=Math.sin(c),this.cosrot=Math.cos(c),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(a*a-1)/Math.cos(p))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*_,this.v_pole_n=this.ArB*Math.log(Math.tan(X-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(X+i))}function dm(n){var t={},e,a,i,s,r,o,l,h;if(n.x=n.x-this.lam0,Math.abs(Math.abs(n.y)-S)>C){if(r=this.E/Math.pow(Ut(this.e,n.y,Math.sin(n.y)),this.B),o=1/r,e=.5*(r-o),a=.5*(r+o),s=Math.sin(this.B*n.x),i=(e*this.singam-s*this.cosgam)/a,Math.abs(Math.abs(i)-1)<C)throw new Error;h=.5*this.ArB*Math.log((1-i)/(1+i)),o=Math.cos(this.B*n.x),Math.abs(o)<tn?l=this.A*n.x:l=this.ArB*Math.atan2(e*this.cosgam+s*this.singam,o)}else h=n.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*n.y;return this.no_rot?(t.x=l,t.y=h):(l-=this.u_0,t.x=h*this.cosrot+l*this.sinrot,t.y=l*this.cosrot-h*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function mm(n){var t,e,a,i,s,r,o,l={};if(n.x=(n.x-this.x0)*(1/this.a),n.y=(n.y-this.y0)*(1/this.a),this.no_rot?(e=n.y,t=n.x):(e=n.x*this.cosrot-n.y*this.sinrot,t=n.y*this.cosrot+n.x*this.sinrot+this.u_0),a=Math.exp(-this.BrA*e),i=.5*(a-1/a),s=.5*(a+1/a),r=Math.sin(this.BrA*t),o=(r*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(o)-1)<C)l.x=0,l.y=o<0?-S:S;else{if(l.y=this.E/Math.sqrt((1+o)/(1-o)),l.y=fa(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-r*this.singam,Math.cos(this.BrA*t))}return l.x+=this.lam0,l}var gm=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const pm={init:fm,forward:dm,inverse:mm,names:gm};function ym(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<C)){var n=this.b/this.a;this.e=Math.sqrt(1-n*n);var t=Math.sin(this.lat1),e=Math.cos(this.lat1),a=ee(this.e,t,e),i=Ut(this.e,this.lat1,t),s=Math.sin(this.lat2),r=Math.cos(this.lat2),o=ee(this.e,s,r),l=Ut(this.e,this.lat2,s),h=Ut(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>C?this.ns=Math.log(a/o)/Math.log(i/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=a/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function bm(n){var t=n.x,e=n.y;Math.abs(2*Math.abs(e)-Math.PI)<=C&&(e=xa(e)*(S-2*C));var a=Math.abs(Math.abs(e)-S),i,s;if(a>C)i=Ut(this.e,e,Math.sin(e)),s=this.a*this.f0*Math.pow(i,this.ns);else{if(a=e*this.ns,a<=0)return null;s=0}var r=this.ns*L(t-this.long0);return n.x=this.k0*(s*Math.sin(r))+this.x0,n.y=this.k0*(this.rh-s*Math.cos(r))+this.y0,n}function xm(n){var t,e,a,i,s,r=(n.x-this.x0)/this.k0,o=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(r*r+o*o),e=1):(t=-Math.sqrt(r*r+o*o),e=-1);var l=0;if(t!==0&&(l=Math.atan2(e*r,e*o)),t!==0||this.ns>0){if(e=1/this.ns,a=Math.pow(t/(this.a*this.f0),e),i=fa(this.e,a),i===-9999)return null}else i=-S;return s=L(l/this.ns+this.long0),n.x=s,n.y=i,n}var vm=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const Mm={init:ym,forward:bm,inverse:xm,names:vm};function wm(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Em(n){var t,e,a,i,s,r,o,l=n.x,h=n.y,c=L(l-this.long0);return t=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),e=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/t)-this.s45),a=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(e)+Math.sin(this.ad)*Math.cos(e)*Math.cos(a)),s=Math.asin(Math.cos(e)*Math.sin(a)/Math.cos(i)),r=this.n*s,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),n.y=o*Math.cos(r)/1,n.x=o*Math.sin(r)/1,this.czech||(n.y*=-1,n.x*=-1),n}function Sm(n){var t,e,a,i,s,r,o,l,h=n.x;n.x=n.y,n.y=h,this.czech||(n.y*=-1,n.x*=-1),r=Math.sqrt(n.x*n.x+n.y*n.y),s=Math.atan2(n.y,n.x),i=s/Math.sin(this.s0),a=2*(Math.atan(Math.pow(this.ro0/r,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(a)-Math.sin(this.ad)*Math.cos(a)*Math.cos(i)),e=Math.asin(Math.cos(a)*Math.sin(i)/Math.cos(t)),n.x=this.long0-e/this.alfa,o=t,l=0;var c=0;do n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-n.y)<1e-10&&(l=1),o=n.y,c+=1;while(l===0&&c<15);return c>=15?null:n}var Rm=["Krovak","krovak"];const Im={init:wm,forward:Em,inverse:Sm,names:Rm};function pt(n,t,e,a,i){return n*i-t*Math.sin(2*i)+e*Math.sin(4*i)-a*Math.sin(6*i)}function va(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function Ma(n){return .375*n*(1+.25*n*(1+.46875*n))}function wa(n){return .05859375*n*n*(1+.75*n)}function Ea(n){return n*n*n*(35/3072)}function pn(n,t,e){var a=t*e;return n/Math.sqrt(1-a*a)}function Re(n){return Math.abs(n)<S?n:n-xa(n)*Math.PI}function hi(n,t,e,a,i){var s,r;s=n/t;for(var o=0;o<15;o++)if(r=(n-(t*s-e*Math.sin(2*s)+a*Math.sin(4*s)-i*Math.sin(6*s)))/(t-2*e*Math.cos(2*s)+4*a*Math.cos(4*s)-6*i*Math.cos(6*s)),s+=r,Math.abs(r)<=1e-10)return s;return NaN}function Am(){this.sphere||(this.e0=va(this.es),this.e1=Ma(this.es),this.e2=wa(this.es),this.e3=Ea(this.es),this.ml0=this.a*pt(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Cm(n){var t,e,a=n.x,i=n.y;if(a=L(a-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(i)*Math.sin(a)),e=this.a*(Math.atan2(Math.tan(i),Math.cos(a))-this.lat0);else{var s=Math.sin(i),r=Math.cos(i),o=pn(this.a,this.e,s),l=Math.tan(i)*Math.tan(i),h=a*Math.cos(i),c=h*h,_=this.es*r*r/(1-this.es),u=this.a*pt(this.e0,this.e1,this.e2,this.e3,i);t=o*h*(1-c*l*(1/6-(8-l+8*_)*c/120)),e=u-this.ml0+o*s/r*c*(.5+(5-l+6*_)*c/24)}return n.x=t+this.x0,n.y=e+this.y0,n}function Lm(n){n.x-=this.x0,n.y-=this.y0;var t=n.x/this.a,e=n.y/this.a,a,i;if(this.sphere){var s=e+this.lat0;a=Math.asin(Math.sin(s)*Math.cos(t)),i=Math.atan2(Math.tan(t),Math.cos(s))}else{var r=this.ml0/this.a+e,o=hi(r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-S)<=C)return n.x=this.long0,n.y=S,e<0&&(n.y*=-1),n;var l=pn(this.a,this.e,Math.sin(o)),h=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(o),2),_=t*this.a/l,u=_*_;a=o-l*Math.tan(o)/h*_*_*(.5-(1+3*c)*_*_/24),i=_*(1-u*(c/3+(1+3*c)*c*u/15))/Math.cos(o)}return n.x=L(i+this.long0),n.y=Re(a),n}var km=["Cassini","Cassini_Soldner","cass"];const Tm={init:Am,forward:Cm,inverse:Lm,names:km};function ve(n,t){var e;return n>1e-7?(e=n*t,(1-n*n)*(t/(1-e*e)-.5/n*Math.log((1-e)/(1+e)))):2*t}var Om=1,Dm=2,Nm=3,Pm=4;function Fm(){var n=Math.abs(this.lat0);if(Math.abs(n-S)<C?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(n)<C?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=ve(this.e,1),this.mmf=.5/(1-this.es),this.apa=Wm(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=ve(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Bm(n){var t,e,a,i,s,r,o,l,h,c,_=n.x,u=n.y;if(_=L(_-this.long0),this.sphere){if(s=Math.sin(u),c=Math.cos(u),a=Math.cos(_),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e=this.mode===this.EQUIT?1+c*a:1+this.sinph0*s+this.cosph0*c*a,e<=C)return null;e=Math.sqrt(2/e),t=e*c*Math.sin(_),e*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*c*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(u+this.lat0)<C)return null;e=X-u*.5,e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)),t=e*Math.sin(_),e*=a}}else{switch(o=0,l=0,h=0,a=Math.cos(_),i=Math.sin(_),s=Math.sin(u),r=ve(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=r/this.qp,l=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:h=1+this.sinb1*o+this.cosb1*l*a;break;case this.EQUIT:h=1+l*a;break;case this.N_POLE:h=S+u,r=this.qp-r;break;case this.S_POLE:h=u-S,r=this.qp+r;break}if(Math.abs(h)<C)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),this.mode===this.OBLIQ?e=this.ymf*h*(this.cosb1*o-this.sinb1*l*a):e=(h=Math.sqrt(2/(1+l*a)))*o*this.ymf,t=this.xmf*h*l*i;break;case this.N_POLE:case this.S_POLE:r>=0?(t=(h=Math.sqrt(r))*i,e=a*(this.mode===this.S_POLE?h:-h)):t=e=0;break}}return n.x=this.a*t+this.x0,n.y=this.a*e+this.y0,n}function Gm(n){n.x-=this.x0,n.y-=this.y0;var t=n.x/this.a,e=n.y/this.a,a,i,s,r,o,l,h;if(this.sphere){var c=0,_,u=0;if(_=Math.sqrt(t*t+e*e),i=_*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(u=Math.sin(i),c=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(_)<=C?0:Math.asin(e*u/_),t*=u,e=c*_;break;case this.OBLIQ:i=Math.abs(_)<=C?this.lat0:Math.asin(c*this.sinph0+e*u*this.cosph0/_),t*=u*this.cosph0,e=(c-Math.sin(i)*this.sinph0)*_;break;case this.N_POLE:e=-e,i=S-i;break;case this.S_POLE:i-=S;break}a=e===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,e)}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,e*=this.dd,l=Math.sqrt(t*t+e*e),l<C)return n.x=this.long0,n.y=this.lat0,n;r=2*Math.asin(.5*l/this.rq),s=Math.cos(r),t*=r=Math.sin(r),this.mode===this.OBLIQ?(h=s*this.sinb1+e*r*this.cosb1/l,o=this.qp*h,e=l*this.cosb1*s-e*this.sinb1*r):(h=e*r/l,o=this.qp*h,e=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(e=-e),o=t*t+e*e,!o)return n.x=this.long0,n.y=this.lat0,n;h=1-o/this.qp,this.mode===this.S_POLE&&(h=-h)}a=Math.atan2(t,e),i=qm(Math.asin(h),this.apa)}return n.x=L(this.long0+a),n.y=i,n}var Um=.3333333333333333,zm=.17222222222222222,Vm=.10257936507936508,jm=.06388888888888888,Hm=.0664021164021164,Km=.016415012942191543;function Wm(n){var t,e=[];return e[0]=n*Um,t=n*n,e[0]+=t*zm,e[1]=t*jm,t*=n,e[0]+=t*Vm,e[1]+=t*Hm,e[2]=t*Km,e}function qm(n,t){var e=n+n;return n+t[0]*Math.sin(e)+t[1]*Math.sin(e+e)+t[2]*Math.sin(e+e+e)}var Xm=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const $m={init:Fm,forward:Bm,inverse:Gm,names:Xm,S_POLE:Om,N_POLE:Dm,EQUIT:Nm,OBLIQ:Pm};function we(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}function Ym(){Math.abs(this.lat1+this.lat2)<C||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ee(this.e3,this.sin_po,this.cos_po),this.qs1=ve(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ee(this.e3,this.sin_po,this.cos_po),this.qs2=ve(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=ve(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>C?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Zm(n){var t=n.x,e=n.y;this.sin_phi=Math.sin(e),this.cos_phi=Math.cos(e);var a=ve(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*a)/this.ns0,s=this.ns0*L(t-this.long0),r=i*Math.sin(s)+this.x0,o=this.rh-i*Math.cos(s)+this.y0;return n.x=r,n.y=o,n}function Jm(n){var t,e,a,i,s,r;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(t=Math.sqrt(n.x*n.x+n.y*n.y),a=1):(t=-Math.sqrt(n.x*n.x+n.y*n.y),a=-1),i=0,t!==0&&(i=Math.atan2(a*n.x,a*n.y)),a=t*this.ns0/this.a,this.sphere?r=Math.asin((this.c-a*a)/(2*this.ns0)):(e=(this.c-a*a)/this.ns0,r=this.phi1z(this.e3,e)),s=L(i/this.ns0+this.long0),n.x=s,n.y=r,n}function Qm(n,t){var e,a,i,s,r,o=we(.5*t);if(n<C)return o;for(var l=n*n,h=1;h<=25;h++)if(e=Math.sin(o),a=Math.cos(o),i=n*e,s=1-i*i,r=.5*s*s/a*(t/(1-l)-e/s+.5/n*Math.log((1-i)/(1+i))),o=o+r,Math.abs(r)<=1e-7)return o;return null}var t1=["Albers_Conic_Equal_Area","Albers","aea"];const e1={init:Ym,forward:Zm,inverse:Jm,names:t1,phi1z:Qm};function n1(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function a1(n){var t,e,a,i,s,r,o,l,h=n.x,c=n.y;return a=L(h-this.long0),t=Math.sin(c),e=Math.cos(c),i=Math.cos(a),r=this.sin_p14*t+this.cos_p14*e*i,s=1,r>0||Math.abs(r)<=C?(o=this.x0+this.a*s*e*Math.sin(a)/r,l=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*e*i)/r):(o=this.x0+this.infinity_dist*e*Math.sin(a),l=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*e*i)),n.x=o,n.y=l,n}function i1(n){var t,e,a,i,s,r;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(t=Math.sqrt(n.x*n.x+n.y*n.y))?(i=Math.atan2(t,this.rc),e=Math.sin(i),a=Math.cos(i),r=we(a*this.sin_p14+n.y*e*this.cos_p14/t),s=Math.atan2(n.x*e,t*this.cos_p14*a-n.y*this.sin_p14*e),s=L(this.long0+s)):(r=this.phic0,s=0),n.x=s,n.y=r,n}var s1=["gnom"];const r1={init:n1,forward:a1,inverse:i1,names:s1};function o1(n,t){var e=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(t)-e)<1e-6)return t<0?-1*S:S;for(var a=Math.asin(.5*t),i,s,r,o,l=0;l<30;l++)if(s=Math.sin(a),r=Math.cos(a),o=n*s,i=Math.pow(1-o*o,2)/(2*r)*(t/(1-n*n)-s/(1-o*o)+.5/n*Math.log((1-o)/(1+o))),a+=i,Math.abs(i)<=1e-10)return a;return NaN}function l1(){this.sphere||(this.k0=ee(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function h1(n){var t=n.x,e=n.y,a,i,s=L(t-this.long0);if(this.sphere)a=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var r=ve(this.e,Math.sin(e));a=this.x0+this.a*this.k0*s,i=this.y0+this.a*r*.5/this.k0}return n.x=a,n.y=i,n}function c1(n){n.x-=this.x0,n.y-=this.y0;var t,e;return this.sphere?(t=L(this.long0+n.x/this.a/Math.cos(this.lat_ts)),e=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(e=o1(this.e,2*n.y*this.k0/this.a),t=L(this.long0+n.x/(this.a*this.k0))),n.x=t,n.y=e,n}var _1=["cea"];const u1={init:l1,forward:h1,inverse:c1,names:_1};function f1(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function d1(n){var t=n.x,e=n.y,a=L(t-this.long0),i=Re(e-this.lat0);return n.x=this.x0+this.a*a*this.rc,n.y=this.y0+this.a*i,n}function m1(n){var t=n.x,e=n.y;return n.x=L(this.long0+(t-this.x0)/(this.a*this.rc)),n.y=Re(this.lat0+(e-this.y0)/this.a),n}var g1=["Equirectangular","Equidistant_Cylindrical","eqc"];const p1={init:f1,forward:d1,inverse:m1,names:g1};var yo=20;function y1(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=va(this.es),this.e1=Ma(this.es),this.e2=wa(this.es),this.e3=Ea(this.es),this.ml0=this.a*pt(this.e0,this.e1,this.e2,this.e3,this.lat0)}function b1(n){var t=n.x,e=n.y,a,i,s,r=L(t-this.long0);if(s=r*Math.sin(e),this.sphere)Math.abs(e)<=C?(a=this.a*r,i=-1*this.a*this.lat0):(a=this.a*Math.sin(s)/Math.tan(e),i=this.a*(Re(e-this.lat0)+(1-Math.cos(s))/Math.tan(e)));else if(Math.abs(e)<=C)a=this.a*r,i=-1*this.ml0;else{var o=pn(this.a,this.e,Math.sin(e))/Math.tan(e);a=o*Math.sin(s),i=this.a*pt(this.e0,this.e1,this.e2,this.e3,e)-this.ml0+o*(1-Math.cos(s))}return n.x=a+this.x0,n.y=i+this.y0,n}function x1(n){var t,e,a,i,s,r,o,l,h;if(a=n.x-this.x0,i=n.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=C)t=L(a/this.a+this.long0),e=0;else{r=this.lat0+i/this.a,o=a*a/this.a/this.a+r*r,l=r;var c;for(s=yo;s;--s)if(c=Math.tan(l),h=-1*(r*(l*c+1)-l-.5*(l*l+o)*c)/((l-r)/c-1),l+=h,Math.abs(h)<=C){e=l;break}t=L(this.long0+Math.asin(a*Math.tan(l)/this.a)/Math.sin(e))}else if(Math.abs(i+this.ml0)<=C)e=0,t=L(this.long0+a/this.a);else{r=(this.ml0+i)/this.a,o=a*a/this.a/this.a+r*r,l=r;var _,u,f,d,m;for(s=yo;s;--s)if(m=this.e*Math.sin(l),_=Math.sqrt(1-m*m)*Math.tan(l),u=this.a*pt(this.e0,this.e1,this.e2,this.e3,l),f=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),d=u/this.a,h=(r*(_*d+1)-d-.5*_*(d*d+o))/(this.es*Math.sin(2*l)*(d*d+o-2*r*d)/(4*_)+(r-d)*(_*f-2/Math.sin(2*l))-f),l-=h,Math.abs(h)<=C){e=l;break}_=Math.sqrt(1-this.es*Math.pow(Math.sin(e),2))*Math.tan(e),t=L(this.long0+Math.asin(a*_/this.a)/Math.sin(e))}return n.x=t,n.y=e,n}var v1=["Polyconic","poly"];const M1={init:y1,forward:b1,inverse:x1,names:v1};function w1(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function E1(n){var t,e=n.x,a=n.y,i=a-this.lat0,s=e-this.long0,r=i/Zn*1e-5,o=s,l=1,h=0;for(t=1;t<=10;t++)l=l*r,h=h+this.A[t]*l;var c=h,_=o,u=1,f=0,d,m,g=0,p=0;for(t=1;t<=6;t++)d=u*c-f*_,m=f*c+u*_,u=d,f=m,g=g+this.B_re[t]*u-this.B_im[t]*f,p=p+this.B_im[t]*u+this.B_re[t]*f;return n.x=p*this.a+this.x0,n.y=g*this.a+this.y0,n}function S1(n){var t,e=n.x,a=n.y,i=e-this.x0,s=a-this.y0,r=s/this.a,o=i/this.a,l=1,h=0,c,_,u=0,f=0;for(t=1;t<=6;t++)c=l*r-h*o,_=h*r+l*o,l=c,h=_,u=u+this.C_re[t]*l-this.C_im[t]*h,f=f+this.C_im[t]*l+this.C_re[t]*h;for(var d=0;d<this.iterations;d++){var m=u,g=f,p,y,x=r,b=o;for(t=2;t<=6;t++)p=m*u-g*f,y=g*u+m*f,m=p,g=y,x=x+(t-1)*(this.B_re[t]*m-this.B_im[t]*g),b=b+(t-1)*(this.B_im[t]*m+this.B_re[t]*g);m=1,g=0;var v=this.B_re[1],M=this.B_im[1];for(t=2;t<=6;t++)p=m*u-g*f,y=g*u+m*f,m=p,g=y,v=v+t*(this.B_re[t]*m-this.B_im[t]*g),M=M+t*(this.B_im[t]*m+this.B_re[t]*g);var R=v*v+M*M;u=(x*v+b*M)/R,f=(b*v-x*M)/R}var w=u,I=f,k=1,O=0;for(t=1;t<=9;t++)k=k*w,O=O+this.D[t]*k;var T=this.lat0+O*Zn*1e5,G=this.long0+I;return n.x=G,n.y=T,n}var R1=["New_Zealand_Map_Grid","nzmg"];const I1={init:w1,forward:E1,inverse:S1,names:R1};function A1(){}function C1(n){var t=n.x,e=n.y,a=L(t-this.long0),i=this.x0+this.a*a,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+e/2.5))*1.25;return n.x=i,n.y=s,n}function L1(n){n.x-=this.x0,n.y-=this.y0;var t=L(this.long0+n.x/this.a),e=2.5*(Math.atan(Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=t,n.y=e,n}var k1=["Miller_Cylindrical","mill"];const T1={init:A1,forward:C1,inverse:L1,names:k1};var O1=20;function D1(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Hs(this.es)}function N1(n){var t,e,a=n.x,i=n.y;if(a=L(a-this.long0),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var s=this.n*Math.sin(i),r=O1;r;--r){var o=(this.m*i+Math.sin(i)-s)/(this.m+Math.cos(i));if(i-=o,Math.abs(o)<C)break}t=this.a*this.C_x*a*(this.m+Math.cos(i)),e=this.a*this.C_y*i}else{var l=Math.sin(i),h=Math.cos(i);e=this.a*vn(i,l,h,this.en),t=this.a*a*h/Math.sqrt(1-this.es*l*l)}return n.x=t,n.y=e,n}function P1(n){var t,e,a,i;return n.x-=this.x0,a=n.x/this.a,n.y-=this.y0,t=n.y/this.a,this.sphere?(t/=this.C_y,a=a/(this.C_x*(this.m+Math.cos(t))),this.m?t=we((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=we(Math.sin(t)/this.n)),a=L(a+this.long0),t=Re(t)):(t=Ks(n.y/this.a,this.es,this.en),i=Math.abs(t),i<S?(i=Math.sin(t),e=this.long0+n.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(t)),a=L(e)):i-C<S&&(a=this.long0)),n.x=a,n.y=t,n}var F1=["Sinusoidal","sinu"];const B1={init:D1,forward:N1,inverse:P1,names:F1};function G1(){}function U1(n){for(var t=n.x,e=n.y,a=L(t-this.long0),i=e,s=Math.PI*Math.sin(e);;){var r=-(i+Math.sin(i)-s)/(1+Math.cos(i));if(i+=r,Math.abs(r)<C)break}i/=2,Math.PI/2-Math.abs(e)<C&&(a=0);var o=.900316316158*this.a*a*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return n.x=o,n.y=l,n}function z1(n){var t,e;n.x-=this.x0,n.y-=this.y0,e=n.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),t=Math.asin(e);var a=L(this.long0+n.x/(.900316316158*this.a*Math.cos(t)));a<-Math.PI&&(a=-Math.PI),a>Math.PI&&(a=Math.PI),e=(2*t+Math.sin(2*t))/Math.PI,Math.abs(e)>1&&(e=1);var i=Math.asin(e);return n.x=a,n.y=i,n}var V1=["Mollweide","moll"];const j1={init:G1,forward:U1,inverse:z1,names:V1};function H1(){Math.abs(this.lat1+this.lat2)<C||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=va(this.es),this.e1=Ma(this.es),this.e2=wa(this.es),this.e3=Ea(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=ee(this.e,this.sinphi,this.cosphi),this.ml1=pt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<C?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=ee(this.e,this.sinphi,this.cosphi),this.ml2=pt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=pt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function K1(n){var t=n.x,e=n.y,a;if(this.sphere)a=this.a*(this.g-e);else{var i=pt(this.e0,this.e1,this.e2,this.e3,e);a=this.a*(this.g-i)}var s=this.ns*L(t-this.long0),r=this.x0+a*Math.sin(s),o=this.y0+this.rh-a*Math.cos(s);return n.x=r,n.y=o,n}function W1(n){n.x-=this.x0,n.y=this.rh-n.y+this.y0;var t,e,a,i;this.ns>=0?(e=Math.sqrt(n.x*n.x+n.y*n.y),t=1):(e=-Math.sqrt(n.x*n.x+n.y*n.y),t=-1);var s=0;if(e!==0&&(s=Math.atan2(t*n.x,t*n.y)),this.sphere)return i=L(this.long0+s/this.ns),a=Re(this.g-e/this.a),n.x=i,n.y=a,n;var r=this.g-e/this.a;return a=hi(r,this.e0,this.e1,this.e2,this.e3),i=L(this.long0+s/this.ns),n.x=i,n.y=a,n}var q1=["Equidistant_Conic","eqdc"];const X1={init:H1,forward:K1,inverse:W1,names:q1};function $1(){this.R=this.a}function Y1(n){var t=n.x,e=n.y,a=L(t-this.long0),i,s;Math.abs(e)<=C&&(i=this.x0+this.R*a,s=this.y0);var r=we(2*Math.abs(e/Math.PI));(Math.abs(a)<=C||Math.abs(Math.abs(e)-S)<=C)&&(i=this.x0,e>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*r):s=this.y0+Math.PI*this.R*-Math.tan(.5*r));var o=.5*Math.abs(Math.PI/a-a/Math.PI),l=o*o,h=Math.sin(r),c=Math.cos(r),_=c/(h+c-1),u=_*_,f=_*(2/h-1),d=f*f,m=Math.PI*this.R*(o*(_-d)+Math.sqrt(l*(_-d)*(_-d)-(d+l)*(u-d)))/(d+l);a<0&&(m=-m),i=this.x0+m;var g=l+_;return m=Math.PI*this.R*(f*g-o*Math.sqrt((d+l)*(l+1)-g*g))/(d+l),e>=0?s=this.y0+m:s=this.y0-m,n.x=i,n.y=s,n}function Z1(n){var t,e,a,i,s,r,o,l,h,c,_,u,f;return n.x-=this.x0,n.y-=this.y0,_=Math.PI*this.R,a=n.x/_,i=n.y/_,s=a*a+i*i,r=-Math.abs(i)*(1+s),o=r-2*i*i+a*a,l=-2*r+1+2*i*i+s*s,f=i*i/l+(2*o*o*o/l/l/l-9*r*o/l/l)/27,h=(r-o*o/3/l)/l,c=2*Math.sqrt(-h/3),_=3*f/h/c,Math.abs(_)>1&&(_>=0?_=1:_=-1),u=Math.acos(_)/3,n.y>=0?e=(-c*Math.cos(u+Math.PI/3)-o/3/l)*Math.PI:e=-(-c*Math.cos(u+Math.PI/3)-o/3/l)*Math.PI,Math.abs(a)<C?t=this.long0:t=L(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(a*a-i*i)+s*s))/2/a),n.x=t,n.y=e,n}var J1=["Van_der_Grinten_I","VanDerGrinten","vandg"];const Q1={init:$1,forward:Y1,inverse:Z1,names:J1};function tg(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function eg(n){var t=n.x,e=n.y,a=Math.sin(n.y),i=Math.cos(n.y),s=L(t-this.long0),r,o,l,h,c,_,u,f,d,m,g,p,y,x,b,v,M,R,w,I,k,O,T;return this.sphere?Math.abs(this.sin_p12-1)<=C?(n.x=this.x0+this.a*(S-e)*Math.sin(s),n.y=this.y0-this.a*(S-e)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=C?(n.x=this.x0+this.a*(S+e)*Math.sin(s),n.y=this.y0+this.a*(S+e)*Math.cos(s),n):(R=this.sin_p12*a+this.cos_p12*i*Math.cos(s),v=Math.acos(R),M=v?v/Math.sin(v):1,n.x=this.x0+this.a*M*i*Math.sin(s),n.y=this.y0+this.a*M*(this.cos_p12*a-this.sin_p12*i*Math.cos(s)),n):(r=va(this.es),o=Ma(this.es),l=wa(this.es),h=Ea(this.es),Math.abs(this.sin_p12-1)<=C?(c=this.a*pt(r,o,l,h,S),_=this.a*pt(r,o,l,h,e),n.x=this.x0+(c-_)*Math.sin(s),n.y=this.y0-(c-_)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=C?(c=this.a*pt(r,o,l,h,S),_=this.a*pt(r,o,l,h,e),n.x=this.x0+(c+_)*Math.sin(s),n.y=this.y0+(c+_)*Math.cos(s),n):(u=a/i,f=pn(this.a,this.e,this.sin_p12),d=pn(this.a,this.e,a),m=Math.atan((1-this.es)*u+this.es*f*this.sin_p12/(d*i)),g=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(m)-this.sin_p12*Math.cos(s)),g===0?w=Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):Math.abs(Math.abs(g)-Math.PI)<=C?w=-Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):w=Math.asin(Math.sin(s)*Math.cos(m)/Math.sin(g)),p=this.e*this.sin_p12/Math.sqrt(1-this.es),y=this.e*this.cos_p12*Math.cos(g)/Math.sqrt(1-this.es),x=p*y,b=y*y,I=w*w,k=I*w,O=k*w,T=O*w,v=f*w*(1-I*b*(1-b)/6+k/8*x*(1-2*b)+O/120*(b*(4-7*b)-3*p*p*(1-7*b))-T/48*x),n.x=this.x0+v*Math.sin(g),n.y=this.y0+v*Math.cos(g),n))}function ng(n){n.x-=this.x0,n.y-=this.y0;var t,e,a,i,s,r,o,l,h,c,_,u,f,d,m,g,p,y,x,b,v,M,R,w;return this.sphere?(t=Math.sqrt(n.x*n.x+n.y*n.y),t>2*S*this.a?void 0:(e=t/this.a,a=Math.sin(e),i=Math.cos(e),s=this.long0,Math.abs(t)<=C?r=this.lat0:(r=we(i*this.sin_p12+n.y*a*this.cos_p12/t),o=Math.abs(this.lat0)-S,Math.abs(o)<=C?this.lat0>=0?s=L(this.long0+Math.atan2(n.x,-n.y)):s=L(this.long0-Math.atan2(-n.x,n.y)):s=L(this.long0+Math.atan2(n.x*a,t*this.cos_p12*i-n.y*this.sin_p12*a))),n.x=s,n.y=r,n)):(l=va(this.es),h=Ma(this.es),c=wa(this.es),_=Ea(this.es),Math.abs(this.sin_p12-1)<=C?(u=this.a*pt(l,h,c,_,S),t=Math.sqrt(n.x*n.x+n.y*n.y),f=u-t,r=hi(f/this.a,l,h,c,_),s=L(this.long0+Math.atan2(n.x,-1*n.y)),n.x=s,n.y=r,n):Math.abs(this.sin_p12+1)<=C?(u=this.a*pt(l,h,c,_,S),t=Math.sqrt(n.x*n.x+n.y*n.y),f=t-u,r=hi(f/this.a,l,h,c,_),s=L(this.long0+Math.atan2(n.x,n.y)),n.x=s,n.y=r,n):(t=Math.sqrt(n.x*n.x+n.y*n.y),g=Math.atan2(n.x,n.y),d=pn(this.a,this.e,this.sin_p12),p=Math.cos(g),y=this.e*this.cos_p12*p,x=-y*y/(1-this.es),b=3*this.es*(1-x)*this.sin_p12*this.cos_p12*p/(1-this.es),v=t/d,M=v-x*(1+x)*Math.pow(v,3)/6-b*(1+3*x)*Math.pow(v,4)/24,R=1-x*M*M/2-v*M*M*M/6,m=Math.asin(this.sin_p12*Math.cos(M)+this.cos_p12*Math.sin(M)*p),s=L(this.long0+Math.asin(Math.sin(g)*Math.sin(M)/Math.cos(m))),w=Math.sin(m),r=Math.atan2((w-this.es*R*this.sin_p12)*Math.tan(m),w*(1-this.es)),n.x=s,n.y=r,n))}var ag=["Azimuthal_Equidistant","aeqd"];const ig={init:tg,forward:eg,inverse:ng,names:ag};function sg(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function rg(n){var t,e,a,i,s,r,o,l,h=n.x,c=n.y;return a=L(h-this.long0),t=Math.sin(c),e=Math.cos(c),i=Math.cos(a),r=this.sin_p14*t+this.cos_p14*e*i,s=1,(r>0||Math.abs(r)<=C)&&(o=this.a*s*e*Math.sin(a),l=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*e*i)),n.x=o,n.y=l,n}function og(n){var t,e,a,i,s,r,o;return n.x-=this.x0,n.y-=this.y0,t=Math.sqrt(n.x*n.x+n.y*n.y),e=we(t/this.a),a=Math.sin(e),i=Math.cos(e),r=this.long0,Math.abs(t)<=C?(o=this.lat0,n.x=r,n.y=o,n):(o=we(i*this.sin_p14+n.y*a*this.cos_p14/t),s=Math.abs(this.lat0)-S,Math.abs(s)<=C?(this.lat0>=0?r=L(this.long0+Math.atan2(n.x,-n.y)):r=L(this.long0-Math.atan2(-n.x,n.y)),n.x=r,n.y=o,n):(r=L(this.long0+Math.atan2(n.x*a,t*this.cos_p14*i-n.y*this.sin_p14*a)),n.x=r,n.y=o,n))}var lg=["ortho"];const hg={init:sg,forward:rg,inverse:og,names:lg};var tt={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},$={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function cg(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=S-X/2?this.face=tt.TOP:this.lat0<=-(S-X/2)?this.face=tt.BOTTOM:Math.abs(this.long0)<=X?this.face=tt.FRONT:Math.abs(this.long0)<=S+X?this.face=this.long0>0?tt.RIGHT:tt.LEFT:this.face=tt.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function _g(n){var t={x:0,y:0},e,a,i,s,r,o,l={value:0};if(n.x-=this.long0,this.es!==0?e=Math.atan(this.one_minus_f_squared*Math.tan(n.y)):e=n.y,a=n.x,this.face===tt.TOP)s=S-e,a>=X&&a<=S+X?(l.value=$.AREA_0,i=a-S):a>S+X||a<=-(S+X)?(l.value=$.AREA_1,i=a>0?a-rt:a+rt):a>-(S+X)&&a<=-X?(l.value=$.AREA_2,i=a+S):(l.value=$.AREA_3,i=a);else if(this.face===tt.BOTTOM)s=S+e,a>=X&&a<=S+X?(l.value=$.AREA_0,i=-a+S):a<X&&a>=-X?(l.value=$.AREA_1,i=-a):a<-X&&a>=-(S+X)?(l.value=$.AREA_2,i=-a-S):(l.value=$.AREA_3,i=a>0?-a+rt:-a-rt);else{var h,c,_,u,f,d,m;this.face===tt.RIGHT?a=cn(a,+S):this.face===tt.BACK?a=cn(a,3.14159265359):this.face===tt.LEFT&&(a=cn(a,-S)),u=Math.sin(e),f=Math.cos(e),d=Math.sin(a),m=Math.cos(a),h=f*m,c=f*d,_=u,this.face===tt.FRONT?(s=Math.acos(h),i=Wa(s,_,c,l)):this.face===tt.RIGHT?(s=Math.acos(c),i=Wa(s,_,-h,l)):this.face===tt.BACK?(s=Math.acos(-h),i=Wa(s,_,-c,l)):this.face===tt.LEFT?(s=Math.acos(-c),i=Wa(s,_,h,l)):(s=i=0,l.value=$.AREA_0)}return o=Math.atan(12/rt*(i+Math.acos(Math.sin(i)*Math.cos(X))-S)),r=Math.sqrt((1-Math.cos(s))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===$.AREA_1?o+=S:l.value===$.AREA_2?o+=rt:l.value===$.AREA_3&&(o+=1.5*rt),t.x=r*Math.cos(o),t.y=r*Math.sin(o),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,n.x=t.x,n.y=t.y,n}function ug(n){var t={lam:0,phi:0},e,a,i,s,r,o,l,h,c,_={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,a=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),e=Math.atan2(n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?_.value=$.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(_.value=$.AREA_1,e-=S):n.x<0&&-n.x>=Math.abs(n.y)?(_.value=$.AREA_2,e=e<0?e+rt:e-rt):(_.value=$.AREA_3,e+=S),c=rt/12*Math.tan(e),r=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),o=Math.atan(r),i=Math.cos(e),s=Math.tan(a),l=1-i*i*s*s*(1-Math.cos(Math.atan(1/Math.cos(o)))),l<-1?l=-1:l>1&&(l=1),this.face===tt.TOP)h=Math.acos(l),t.phi=S-h,_.value===$.AREA_0?t.lam=o+S:_.value===$.AREA_1?t.lam=o<0?o+rt:o-rt:_.value===$.AREA_2?t.lam=o-S:t.lam=o;else if(this.face===tt.BOTTOM)h=Math.acos(l),t.phi=h-S,_.value===$.AREA_0?t.lam=-o+S:_.value===$.AREA_1?t.lam=-o:_.value===$.AREA_2?t.lam=-o-S:t.lam=o<0?-o-rt:-o+rt;else{var u,f,d;u=l,c=u*u,c>=1?d=0:d=Math.sqrt(1-c)*Math.sin(o),c+=d*d,c>=1?f=0:f=Math.sqrt(1-c),_.value===$.AREA_1?(c=f,f=-d,d=c):_.value===$.AREA_2?(f=-f,d=-d):_.value===$.AREA_3&&(c=f,f=d,d=-c),this.face===tt.RIGHT?(c=u,u=-f,f=c):this.face===tt.BACK?(u=-u,f=-f):this.face===tt.LEFT&&(c=u,u=f,f=-c),t.phi=Math.acos(-d)-S,t.lam=Math.atan2(f,u),this.face===tt.RIGHT?t.lam=cn(t.lam,-S):this.face===tt.BACK?t.lam=cn(t.lam,-3.14159265359):this.face===tt.LEFT&&(t.lam=cn(t.lam,+S))}if(this.es!==0){var m,g,p;m=t.phi<0?1:0,g=Math.tan(t.phi),p=this.b/Math.sqrt(g*g+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-p*p)/(this.one_minus_f*p)),m&&(t.phi=-t.phi)}return t.lam+=this.long0,n.x=t.lam,n.y=t.phi,n}function Wa(n,t,e,a){var i;return n<C?(a.value=$.AREA_0,i=0):(i=Math.atan2(t,e),Math.abs(i)<=X?a.value=$.AREA_0:i>X&&i<=S+X?(a.value=$.AREA_1,i-=S):i>S+X||i<=-(S+X)?(a.value=$.AREA_2,i=i>=0?i-rt:i+rt):(a.value=$.AREA_3,i+=S)),i}function cn(n,t){var e=n+t;return e<-3.14159265359?e+=_a:e>3.14159265359&&(e-=_a),e}var fg=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const dg={init:cg,forward:_g,inverse:ug,names:fg};var ds=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Hn=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],jl=.8487,Hl=1.3523,Kl=Qt/5,mg=1/Kl,rn=18,ci=function(n,t){return n[0]+t*(n[1]+t*(n[2]+t*n[3]))},gg=function(n,t){return n[1]+t*(2*n[2]+t*3*n[3])};function pg(n,t,e,a){for(var i=t;a;--a){var s=n(i);if(i-=s,Math.abs(s)<e)break}return i}function yg(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function bg(n){var t=L(n.x-this.long0),e=Math.abs(n.y),a=Math.floor(e*Kl);a<0?a=0:a>=rn&&(a=rn-1),e=Qt*(e-mg*a);var i={x:ci(ds[a],e)*t,y:ci(Hn[a],e)};return n.y<0&&(i.y=-i.y),i.x=i.x*this.a*jl+this.x0,i.y=i.y*this.a*Hl+this.y0,i}function xg(n){var t={x:(n.x-this.x0)/(this.a*jl),y:Math.abs(n.y-this.y0)/(this.a*Hl)};if(t.y>=1)t.x/=ds[rn][0],t.y=n.y<0?-S:S;else{var e=Math.floor(t.y*rn);for(e<0?e=0:e>=rn&&(e=rn-1);;)if(Hn[e][0]>t.y)--e;else if(Hn[e+1][0]<=t.y)++e;else break;var a=Hn[e],i=5*(t.y-a[0])/(Hn[e+1][0]-a[0]);i=pg(function(s){return(ci(a,s)-t.y)/gg(a,s)},i,C,100),t.x/=ci(ds[e],i),t.y=(5*e+i)*st,n.y<0&&(t.y=-t.y)}return t.x=L(t.x+this.long0),t}var vg=["Robinson","robin"];const Mg={init:yg,forward:bg,inverse:xg,names:vg};function wg(){this.name="geocent"}function Eg(n){var t=Tl(n,this.es,this.a);return t}function Sg(n){var t=Ol(n,this.es,this.a,this.b);return t}var Rg=["Geocentric","geocentric","geocent","Geocent"];const Ig={init:wg,forward:Eg,inverse:Sg,names:Rg};var _t={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},On={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Ag(){if(Object.keys(On).forEach((function(e){if(typeof this[e]>"u")this[e]=On[e].def;else{if(On[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);On[e].num&&(this[e]=parseFloat(this[e]))}On[e].degrees&&(this[e]=this[e]*st)}).bind(this)),Math.abs(Math.abs(this.lat0)-S)<C?this.mode=this.lat0<0?_t.S_POLE:_t.N_POLE:Math.abs(this.lat0)<C?this.mode=_t.EQUIT:(this.mode=_t.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var n=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(n),this.sw=Math.sin(n)}function Cg(n){n.x-=this.long0;var t=Math.sin(n.y),e=Math.cos(n.y),a=Math.cos(n.x),i,s;switch(this.mode){case _t.OBLIQ:s=this.sinph0*t+this.cosph0*e*a;break;case _t.EQUIT:s=e*a;break;case _t.S_POLE:s=-t;break;case _t.N_POLE:s=t;break}switch(s=this.pn1/(this.p-s),i=s*e*Math.sin(n.x),this.mode){case _t.OBLIQ:s*=this.cosph0*t-this.sinph0*e*a;break;case _t.EQUIT:s*=t;break;case _t.N_POLE:s*=-(e*a);break;case _t.S_POLE:s*=e*a;break}var r,o;return r=s*this.cg+i*this.sg,o=1/(r*this.sw*this.h1+this.cw),i=(i*this.cg-s*this.sg)*this.cw*o,s=r*o,n.x=i*this.a,n.y=s*this.a,n}function Lg(n){n.x/=this.a,n.y/=this.a;var t={x:n.x,y:n.y},e,a,i;i=1/(this.pn1-n.y*this.sw),e=this.pn1*n.x*i,a=this.pn1*n.y*this.cw*i,n.x=e*this.cg+a*this.sg,n.y=a*this.cg-e*this.sg;var s=Et(n.x,n.y);if(Math.abs(s)<C)t.x=0,t.y=n.y;else{var r,o;switch(o=1-s*s*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/s+s/this.pn1),r=Math.sqrt(1-o*o),this.mode){case _t.OBLIQ:t.y=Math.asin(r*this.sinph0+n.y*o*this.cosph0/s),n.y=(r-this.sinph0*Math.sin(t.y))*s,n.x*=o*this.cosph0;break;case _t.EQUIT:t.y=Math.asin(n.y*o/s),n.y=r*s,n.x*=o;break;case _t.N_POLE:t.y=Math.asin(r),n.y=-n.y;break;case _t.S_POLE:t.y=-Math.asin(r);break}t.x=Math.atan2(n.x,n.y)}return n.x=t.x+this.long0,n.y=t.y,n}var kg=["Tilted_Perspective","tpers"];const Tg={init:Ag,forward:Cg,inverse:Lg,names:kg};function Og(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var n=1-this.es,t=1/n;this.radius_p=Math.sqrt(n),this.radius_p2=n,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Dg(n){var t=n.x,e=n.y,a,i,s,r;if(t=t-this.long0,this.shape==="ellipse"){e=Math.atan(this.radius_p2*Math.tan(e));var o=this.radius_p/Et(this.radius_p*Math.cos(e),Math.sin(e));if(i=o*Math.cos(t)*Math.cos(e),s=o*Math.sin(t)*Math.cos(e),r=o*Math.sin(e),(this.radius_g-i)*i-s*s-r*r*this.radius_p_inv2<0)return n.x=Number.NaN,n.y=Number.NaN,n;a=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/Et(r,a)),n.y=this.radius_g_1*Math.atan(r/a)):(n.x=this.radius_g_1*Math.atan(s/a),n.y=this.radius_g_1*Math.atan(r/Et(s,a)))}else this.shape==="sphere"&&(a=Math.cos(e),i=Math.cos(t)*a,s=Math.sin(t)*a,r=Math.sin(e),a=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/Et(r,a)),n.y=this.radius_g_1*Math.atan(r/a)):(n.x=this.radius_g_1*Math.atan(s/a),n.y=this.radius_g_1*Math.atan(r/Et(s,a))));return n.x=n.x*this.a,n.y=n.y*this.a,n}function Ng(n){var t=-1,e=0,a=0,i,s,r,o;if(n.x=n.x/this.a,n.y=n.y/this.a,this.shape==="ellipse"){this.flip_axis?(a=Math.tan(n.y/this.radius_g_1),e=Math.tan(n.x/this.radius_g_1)*Et(1,a)):(e=Math.tan(n.x/this.radius_g_1),a=Math.tan(n.y/this.radius_g_1)*Et(1,e));var l=a/this.radius_p;if(i=e*e+l*l+t*t,s=2*this.radius_g*t,r=s*s-4*i*this.C,r<0)return n.x=Number.NaN,n.y=Number.NaN,n;o=(-s-Math.sqrt(r))/(2*i),t=this.radius_g+o*t,e*=o,a*=o,n.x=Math.atan2(e,t),n.y=Math.atan(a*Math.cos(n.x)/t),n.y=Math.atan(this.radius_p_inv2*Math.tan(n.y))}else if(this.shape==="sphere"){if(this.flip_axis?(a=Math.tan(n.y/this.radius_g_1),e=Math.tan(n.x/this.radius_g_1)*Math.sqrt(1+a*a)):(e=Math.tan(n.x/this.radius_g_1),a=Math.tan(n.y/this.radius_g_1)*Math.sqrt(1+e*e)),i=e*e+a*a+t*t,s=2*this.radius_g*t,r=s*s-4*i*this.C,r<0)return n.x=Number.NaN,n.y=Number.NaN,n;o=(-s-Math.sqrt(r))/(2*i),t=this.radius_g+o*t,e*=o,a*=o,n.x=Math.atan2(e,t),n.y=Math.atan(a*Math.cos(n.x)/t)}return n.x=n.x+this.long0,n}var Pg=["Geostationary Satellite View","Geostationary_Satellite","geos"];const Fg={init:Og,forward:Dg,inverse:Ng,names:Pg};var Jn=1.340264,Qn=-.081106,ta=893e-6,ea=.003796,_i=Math.sqrt(3)/2;function Bg(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function Gg(n){var t=L(n.x-this.long0),e=n.y,a=Math.asin(_i*Math.sin(e)),i=a*a,s=i*i*i;return n.x=t*Math.cos(a)/(_i*(Jn+3*Qn*i+s*(7*ta+9*ea*i))),n.y=a*(Jn+Qn*i+s*(ta+ea*i)),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function Ug(n){n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a;var t=1e-9,e=12,a=n.y,i,s,r,o,l,h;for(h=0;h<e&&(i=a*a,s=i*i*i,r=a*(Jn+Qn*i+s*(ta+ea*i))-n.y,o=Jn+3*Qn*i+s*(7*ta+9*ea*i),a-=l=r/o,!(Math.abs(l)<t));++h);return i=a*a,s=i*i*i,n.x=_i*n.x*(Jn+3*Qn*i+s*(7*ta+9*ea*i))/Math.cos(a),n.y=Math.asin(Math.sin(a)/_i),n.x=L(n.x+this.long0),n}var zg=["eqearth","Equal Earth","Equal_Earth"];const Vg={init:Bg,forward:Gg,inverse:Ug,names:zg};var da=1e-10;function jg(){var n;if(this.phi1=this.lat1,Math.abs(this.phi1)<da)throw new Error;this.es?(this.en=Hs(this.es),this.m1=vn(this.phi1,this.am1=Math.sin(this.phi1),n=Math.cos(this.phi1),this.en),this.am1=n/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Kg,this.forward=Hg):(Math.abs(this.phi1)+da>=S?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=qg,this.forward=Wg)}function Hg(n){var t=L(n.x-(this.long0||0)),e=n.y,a,i,s;return a=this.am1+this.m1-vn(e,i=Math.sin(e),s=Math.cos(e),this.en),i=s*t/(a*Math.sqrt(1-this.es*i*i)),n.x=a*Math.sin(i),n.y=this.am1-a*Math.cos(i),n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function Kg(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var t,e,a,i;if(e=Et(n.x,n.y=this.am1-n.y),i=Ks(this.am1+this.m1-e,this.es,this.en),(t=Math.abs(i))<S)t=Math.sin(i),a=e*Math.atan2(n.x,n.y)*Math.sqrt(1-this.es*t*t)/Math.cos(i);else if(Math.abs(t-S)<=da)a=0;else throw new Error;return n.x=L(a+(this.long0||0)),n.y=Re(i),n}function Wg(n){var t=L(n.x-(this.long0||0)),e=n.y,a,i;return i=this.cphi1+this.phi1-e,Math.abs(i)>da?(n.x=i*Math.sin(a=t*Math.cos(e)/i),n.y=this.cphi1-i*Math.cos(a)):n.x=n.y=0,n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function qg(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var t,e,a=Et(n.x,n.y=this.cphi1-n.y);if(e=this.cphi1+this.phi1-a,Math.abs(e)>S)throw new Error;return Math.abs(Math.abs(e)-S)<=da?t=0:t=a*Math.atan2(n.x,n.y)/Math.cos(e),n.x=L(t+(this.long0||0)),n.y=Re(e),n}var Xg=["bonne","Bonne (Werner lat_1=90)"];const $g={init:jg,names:Xg};function Yg(n){n.Proj.projections.add(Ja),n.Proj.projections.add(Qa),n.Proj.projections.add(Kd),n.Proj.projections.add(tm),n.Proj.projections.add(rm),n.Proj.projections.add(_m),n.Proj.projections.add(pm),n.Proj.projections.add(Mm),n.Proj.projections.add(Im),n.Proj.projections.add(Tm),n.Proj.projections.add($m),n.Proj.projections.add(e1),n.Proj.projections.add(r1),n.Proj.projections.add(u1),n.Proj.projections.add(p1),n.Proj.projections.add(M1),n.Proj.projections.add(I1),n.Proj.projections.add(T1),n.Proj.projections.add(B1),n.Proj.projections.add(j1),n.Proj.projections.add(X1),n.Proj.projections.add(Q1),n.Proj.projections.add(ig),n.Proj.projections.add(hg),n.Proj.projections.add(dg),n.Proj.projections.add(Mg),n.Proj.projections.add(Ig),n.Proj.projections.add(Tg),n.Proj.projections.add(Fg),n.Proj.projections.add(Vg),n.Proj.projections.add($g)}bt.defaultDatum="WGS84";bt.Proj=te;bt.WGS84=new bt.Proj("WGS84");bt.Point=gn;bt.toPoint=Dl;bt.defs=dt;bt.nadgrid=qf;bt.transform=li;bt.mgrs=hd;bt.version="__VERSION__";Yg(bt);const bo=[[-1,-1],[0,-1],[-1,0],[1,0],[-1,1],[0,1]],xo=[[0,-1],[1,-1],[-1,0],[1,0],[0,1],[1,1]];class Zg{constructor(t){this.width=t.width,this.height=t.height,this.size=t.size,this.locations=t.locations,this.bbox=t.bbox,this.board=Do([]),this.center=[],this.gameSize=null,this.fieldCount=0,this.mineCount=0,this.minColor=t.minColor,this.maxColor=t.maxColor,this.minValue=t.minValue,this.maxValue=t.maxValue}getUncoveredAreaPercent(){let t=0;for(let e=0;e<this.height;e++)for(let a=0;a<this.width;a++)this.board[e][a].isRevealed&&t++;return t/this.fieldCount}revealAllTiles(){for(let t=0;t<this.height;t++)for(let e=0;e<this.width;e++){const a=this.board[t][e];a.isMine?a.isFlagged=!0:a.isRevealed=!0}}async fromGeoTIFF(t){try{const a=await(await sf(t.geotiff.url)).getImage(),i=this.locations[0],{bbox:s}=this,r=bt(t.geotiff.projection,"EPSG:3857",[s[0],s[1]]),o=bt(t.geotiff.projection,"EPSG:3857",[s[2],s[3]]),l=o[0]-r[0],h=o[1]-r[1];this.gameSize=Math.round(l/this.size/1.75),this.width=this.size,this.height=Math.round(h/l*this.size*1.18);const[c,_]=a.getOrigin(),[u,f]=a.getResolution(a);let d=[Math.round((s[0]-c)/u),Math.round((s[1]-_)/f),Math.round((s[2]-c)/u),Math.round((s[3]-_)/f)];d=[Math.min(d[0],d[2]),Math.min(d[1],d[3]),Math.max(d[0],d[2]),Math.max(d[1],d[3])];let m=(await a.readRasters({window:d,width:this.width,height:this.height}))[0];m=m.reverse();const g=new Array(m.length);for(let b=0;b<this.height;b++)for(let v=0;v<this.width;v++){const M=m[b*this.width+(this.width-1-v)];g[b*this.width+v]=M}m=g;const p=[s[0],s[1]],y=bt(t.geotiff.projection,"EPSG:3857",p);this.center=[y[0]-1*this.gameSize,y[1]+.5*this.gameSize];let x=0;typeof i.isMineCondition=="number"&&(x=hc(m,i.isMineCondition));for(let b=0;b<this.height;b++){const v=[];for(let M=0;M<this.width;M++){const R=m[b*this.width+M];let w;typeof i.isMineCondition=="function"?w=!Number.isNaN(R)&&i.isMineCondition(R):typeof i.isMineCondition=="number"?w=!Number.isNaN(R)&&R>x:w=Math.round(Math.random()),v.push({isMine:w,adjacentMines:0,isRevealed:!1,isFlagged:!1,element:null,value:R})}this.board.push(v)}this.fieldCount=this.width*this.height;for(let b=0;b<this.height;b++)for(let v=0;v<this.width;v++)this.board[b][v].isMine&&this.mineCount++;for(let b=0;b<this.height;b++)for(let v=0;v<this.width;v++){const M=this.calculateAdjacentMines(v,b);this.board[b][v].adjacentMines=M}}catch(e){console.error("Error loading GeoTIFF data:",e)}}getNeighborCoordinates(t,e){return(e%2===0?bo:xo).map(([i,s])=>[t+i,e+s])}convertAxialToGameCoords(t,e){return{x:t+Math.floor(e/2),y:e}}convertGameCoordsToAxial(t,e){return[t-Math.floor(e/2),e]}calculateAdjacentMines(t,e){let a=0;const i=e%2===0?bo:xo;for(const[s,r]of i){const o=t+s,l=e+r;o>=0&&o<this.width&&l>=0&&l<this.height&&this.board[l]&&this.board[l][o].isMine&&a++}return a}revealTile(t,e){let a=[[t,e]];const i=this.get(t,e);return i?i.isRevealed||i.isFlagged?[]:(i.isRevealed=!0,i.adjacentMines>0&&!i.isMine||this.getNeighborCoordinates(t,e).forEach(([r,o])=>{this.isValidCoordinate(r,o)&&!this.board[o][r].isRevealed&&(!this.board[o][r].isMine&&this.board[o][r].adjacentMines===0?a=a.concat(this.revealTile(r,o)??[]):this.board[o][r].isMine||(this.board[o][r].isRevealed=!0,a.push([r,o])))}),a):null}isValidCoordinate(t,e){return!!(this.board[e]&&this.board[e][t])}isOutOfBounds(t,e){return!this.isValidCoordinate(t,e)}isMine(t,e){return this.board[e]&&this.board[e][t]&&this.board[e][t].isMine}get(t,e){return this.isOutOfBounds(t,e)?null:this.board[e][t]}}var $s=class extends yn{constructor(t){t=t||{},super(t),this.size_=t.size||8e4,this.origin_=t.origin||[0,0],this.layout_=this.layout[t.layout]||this.layout.pointy}setLayout(t){this.layout_=this.layout[t]||this.layout.pointy,this.changed()}getLayout(){return this.layout_[9]!=0?"pointy":"flat"}setOrigin(t){this.origin_=t,this.changed()}getOrigin(){return this.origin_}setSize(t){this.size_=t||8e4,this.changed()}getSize(){return this.size_}cube2hex(t){return[t[0],t[2]]}hex2cube(t){return[t[0],-t[0]-t[1],t[1]]}hex2offset(t){return this.layout_[9]?[t[0]+(t[1]-(t[1]&1))/2,t[1]]:[t[0],t[1]+(t[0]+(t[0]&1))/2]}offset2hex(t){return this.layout_[9]?[t[0]-(t[1]-(t[1]&1))/2,t[1]]:[t[0],t[1]-(t[0]+(t[0]&1))/2]}cube2offset(t){return this.hex2offset(this.cube2hex(t))}offset2cube(t){return this.hex2cube(this.offset2Hex(t))}cube_round(t){var e=Math.round(t[0]),a=Math.round(t[1]),i=Math.round(t[2]),s=Math.abs(e-t[0]),r=Math.abs(a-t[1]),o=Math.abs(i-t[2]);return s>r&&s>o?e=-a-i:r>o?a=-e-i:i=-e-a,[e,a,i]}hex_round(t){return this.cube2hex(this.cube_round(this.hex2cube(t)))}hex_corner(t,e,a){return[t[0]+e*this.layout_[8+2*(a%6)],t[1]+e*this.layout_[9+2*(a%6)]]}getHexagonAtCoord(t){return this.getHexagon(this.coord2hex(t))}getHexagon(t){for(var e=[],a=this.hex2coord(t),i=0;i<=7;i++)e.push(this.hex_corner(a,this.size_,i,this.layout_[8]));return e}hex2coord(t){return[this.origin_[0]+this.size_*(this.layout_[0]*t[0]+this.layout_[1]*t[1]),this.origin_[1]+this.size_*(this.layout_[2]*t[0]+this.layout_[3]*t[1])]}coord2hex(t){var e=[(t[0]-this.origin_[0])/this.size_,(t[1]-this.origin_[1])/this.size_],a=this.layout_[4]*e[0]+this.layout_[5]*e[1],i=this.layout_[6]*e[0]+this.layout_[7]*e[1];return this.hex_round([a,i])}cube_distance(t,e){return Math.max(Math.abs(t[0]-e[0]),Math.abs(t[1]-e[1]),Math.abs(t[2]-e[2]))}lerp(t,e,a){return t+(e-t)*a}cube_lerp(t,e,a){return[this.lerp(t[0]+1e-6,e[0],a),this.lerp(t[1]+1e-6,e[1],a),this.lerp(t[2]+1e-6,e[2],a)]}cube_line(t,e){var a=this.cube_distance(t,e);if(!a)return[t];for(var i=[],s=0;s<=a;s++)i.push(this.cube_round(this.cube_lerp(t,e,s/a)));return i}hex_neighbors(t,e){if(e!==void 0)return[t[0]+this.neighbors.hex[e%6][0],t[1]+this.neighbors.hex[e%6][1]];var a=[];for(e=0;e<6;e++)a.push([t[0]+this.neighbors.hex[e][0],t[1]+this.neighbors.hex[e][1]]);return a}cube_neighbors(t,e){if(e!==void 0)return[t[0]+this.neighbors.cube[e%6][0],t[1]+this.neighbors.cube[e%6][1],t[2]+this.neighbors.cube[e%6][2]];var a=[];for(e=0;e<6;e++)a.push([t[0]+this.neighbors.cube[e][0],t[1]+this.neighbors.cube[e][1],t[2]+this.neighbors.cube[e][2]]);for(e=0;e<6;e++)a[e]=this.cube2hex(a[e]);return a}};$s.prototype.layout={pointy:[Math.sqrt(3),Math.sqrt(3)/2,0,3/2,Math.sqrt(3)/3,-1/3,0,2/3,Math.cos(Math.PI/180*(60*0+30)),Math.sin(Math.PI/180*(60*0+30)),Math.cos(Math.PI/180*(60*1+30)),Math.sin(Math.PI/180*(60*1+30)),Math.cos(Math.PI/180*(60*2+30)),Math.sin(Math.PI/180*(60*2+30)),Math.cos(Math.PI/180*(60*3+30)),Math.sin(Math.PI/180*(60*3+30)),Math.cos(Math.PI/180*(60*4+30)),Math.sin(Math.PI/180*(60*4+30)),Math.cos(Math.PI/180*(60*5+30)),Math.sin(Math.PI/180*(60*5+30))],flat:[3/2,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,Math.cos(Math.PI/180*(60*0)),Math.sin(Math.PI/180*(60*0)),Math.cos(Math.PI/180*(60*1)),Math.sin(Math.PI/180*(60*1)),Math.cos(Math.PI/180*(60*2)),Math.sin(Math.PI/180*(60*2)),Math.cos(Math.PI/180*(60*3)),Math.sin(Math.PI/180*(60*3)),Math.cos(Math.PI/180*(60*4)),Math.sin(Math.PI/180*(60*4)),Math.cos(Math.PI/180*(60*5)),Math.sin(Math.PI/180*(60*5))]};$s.prototype.neighbors={cube:[[1,-1,0],[1,0,-1],[0,1,-1],[-1,1,0],[-1,0,1],[0,-1,1]],hex:[[1,0],[1,-1],[0,-1],[-1,0],[-1,1],[0,1]]};function Ee(n,t,e={}){const a={type:"Feature"};return(e.id===0||e.id)&&(a.id=e.id),e.bbox&&(a.bbox=e.bbox),a.properties=t||{},a.geometry=n,a}function Jg(n,t,e={}){if(!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!vo(n[0])||!vo(n[1]))throw new Error("coordinates must contain numbers");return Ee({type:"Point",coordinates:n},t,e)}function Qg(n,t,e={}){for(const i of n){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return Ee({type:"Polygon",coordinates:n},t,e)}function t3(n,t,e={}){if(n.length<2)throw new Error("coordinates must be an array of two or more positions");return Ee({type:"LineString",coordinates:n},t,e)}function ms(n,t={}){const e={type:"FeatureCollection"};return t.id&&(e.id=t.id),t.bbox&&(e.bbox=t.bbox),e.features=n,e}function e3(n,t,e={}){return Ee({type:"MultiLineString",coordinates:n},t,e)}function vo(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function n3(n,t={}){const e=Number(n[0]),a=Number(n[1]),i=Number(n[2]),s=Number(n[3]);if(n.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");const r=[e,a];return Qg([[r,[i,a],[i,s],[e,s],r]],t.properties,{bbox:n,id:t.id})}var a3=n3;const ue=11102230246251565e-32,ht=134217729,i3=(3+8*ue)*ue;function Qi(n,t,e,a,i){let s,r,o,l,h=t[0],c=a[0],_=0,u=0;c>h==c>-h?(s=h,h=t[++_]):(s=c,c=a[++u]);let f=0;if(_<n&&u<e)for(c>h==c>-h?(r=h+s,o=s-(r-h),h=t[++_]):(r=c+s,o=s-(r-c),c=a[++u]),s=r,o!==0&&(i[f++]=o);_<n&&u<e;)c>h==c>-h?(r=s+h,l=r-s,o=s-(r-l)+(h-l),h=t[++_]):(r=s+c,l=r-s,o=s-(r-l)+(c-l),c=a[++u]),s=r,o!==0&&(i[f++]=o);for(;_<n;)r=s+h,l=r-s,o=s-(r-l)+(h-l),h=t[++_],s=r,o!==0&&(i[f++]=o);for(;u<e;)r=s+c,l=r-s,o=s-(r-l)+(c-l),c=a[++u],s=r,o!==0&&(i[f++]=o);return(s!==0||f===0)&&(i[f++]=s),f}function s3(n,t){let e=t[0];for(let a=1;a<n;a++)e+=t[a];return e}function Sa(n){return new Float64Array(n)}const r3=(3+16*ue)*ue,o3=(2+12*ue)*ue,l3=(9+64*ue)*ue*ue,Ze=Sa(4),Mo=Sa(8),wo=Sa(12),Eo=Sa(16),ft=Sa(4);function h3(n,t,e,a,i,s,r){let o,l,h,c,_,u,f,d,m,g,p,y,x,b,v,M,R,w;const I=n-i,k=e-i,O=t-s,T=a-s;b=I*T,u=ht*I,f=u-(u-I),d=I-f,u=ht*T,m=u-(u-T),g=T-m,v=d*g-(b-f*m-d*m-f*g),M=O*k,u=ht*O,f=u-(u-O),d=O-f,u=ht*k,m=u-(u-k),g=k-m,R=d*g-(M-f*m-d*m-f*g),p=v-R,_=v-p,Ze[0]=v-(p+_)+(_-R),y=b+p,_=y-b,x=b-(y-_)+(p-_),p=x-M,_=x-p,Ze[1]=x-(p+_)+(_-M),w=y+p,_=w-y,Ze[2]=y-(w-_)+(p-_),Ze[3]=w;let G=s3(4,Ze),N=o3*r;if(G>=N||-G>=N||(_=n-I,o=n-(I+_)+(_-i),_=e-k,h=e-(k+_)+(_-i),_=t-O,l=t-(O+_)+(_-s),_=a-T,c=a-(T+_)+(_-s),o===0&&l===0&&h===0&&c===0)||(N=l3*r+i3*Math.abs(G),G+=I*c+T*o-(O*h+k*l),G>=N||-G>=N))return G;b=o*T,u=ht*o,f=u-(u-o),d=o-f,u=ht*T,m=u-(u-T),g=T-m,v=d*g-(b-f*m-d*m-f*g),M=l*k,u=ht*l,f=u-(u-l),d=l-f,u=ht*k,m=u-(u-k),g=k-m,R=d*g-(M-f*m-d*m-f*g),p=v-R,_=v-p,ft[0]=v-(p+_)+(_-R),y=b+p,_=y-b,x=b-(y-_)+(p-_),p=x-M,_=x-p,ft[1]=x-(p+_)+(_-M),w=y+p,_=w-y,ft[2]=y-(w-_)+(p-_),ft[3]=w;const Y=Qi(4,Ze,4,ft,Mo);b=I*c,u=ht*I,f=u-(u-I),d=I-f,u=ht*c,m=u-(u-c),g=c-m,v=d*g-(b-f*m-d*m-f*g),M=O*h,u=ht*O,f=u-(u-O),d=O-f,u=ht*h,m=u-(u-h),g=h-m,R=d*g-(M-f*m-d*m-f*g),p=v-R,_=v-p,ft[0]=v-(p+_)+(_-R),y=b+p,_=y-b,x=b-(y-_)+(p-_),p=x-M,_=x-p,ft[1]=x-(p+_)+(_-M),w=y+p,_=w-y,ft[2]=y-(w-_)+(p-_),ft[3]=w;const B=Qi(Y,Mo,4,ft,wo);b=o*c,u=ht*o,f=u-(u-o),d=o-f,u=ht*c,m=u-(u-c),g=c-m,v=d*g-(b-f*m-d*m-f*g),M=l*h,u=ht*l,f=u-(u-l),d=l-f,u=ht*h,m=u-(u-h),g=h-m,R=d*g-(M-f*m-d*m-f*g),p=v-R,_=v-p,ft[0]=v-(p+_)+(_-R),y=b+p,_=y-b,x=b-(y-_)+(p-_),p=x-M,_=x-p,ft[1]=x-(p+_)+(_-M),w=y+p,_=w-y,ft[2]=y-(w-_)+(p-_),ft[3]=w;const H=Qi(B,wo,4,ft,Eo);return Eo[H-1]}function c3(n,t,e,a,i,s){const r=(t-s)*(e-i),o=(n-i)*(a-s),l=r-o,h=Math.abs(r+o);return Math.abs(l)>=r3*h?l:-h3(n,t,e,a,i,s,h)}function _3(n,t){var e,a,i=0,s,r,o,l,h,c,_,u=n[0],f=n[1],d=t.length;for(e=0;e<d;e++){a=0;var m=t[e],g=m.length-1;if(c=m[0],c[0]!==m[g][0]&&c[1]!==m[g][1])throw new Error("First and last coordinates in a ring must be the same");for(r=c[0]-u,o=c[1]-f,a;a<g;a++){if(_=m[a+1],l=_[0]-u,h=_[1]-f,o===0&&h===0){if(l<=0&&r>=0||r<=0&&l>=0)return 0}else if(h>=0&&o<=0||h<=0&&o>=0){if(s=c3(r,l,o,h,0,0),s===0)return 0;(s>0&&h>0&&o<=0||s<0&&h<=0&&o>0)&&i++}c=_,o=h,r=l}}return i%2!==0}function u3(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return[...n.geometry.coordinates];if(n.type==="Point")return[...n.coordinates]}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return[...n];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function wi(n){return n.type==="Feature"?n.geometry:n}function ma(n,t,e={}){if(!n)throw new Error("point is required");if(!t)throw new Error("polygon is required");const a=u3(n),i=wi(t),s=i.type,r=t.bbox;let o=i.coordinates;if(r&&f3(a,r)===!1)return!1;s==="Polygon"&&(o=[o]);let l=!1;for(var h=0;h<o.length;++h){const c=_3(a,o[h]);if(c===0)return!e.ignoreBoundary;c&&(l=!0)}return l}function f3(n,t){return t[0]<=n[0]&&t[1]<=n[1]&&t[2]>=n[0]&&t[3]>=n[1]}class Wl{constructor(t=[],e=d3){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:a}=this,i=e[t];for(;t>0;){const s=t-1>>1,r=e[s];if(a(i,r)>=0)break;e[t]=r,t=s}e[t]=i}_down(t){const{data:e,compare:a}=this,i=this.length>>1,s=e[t];for(;t<i;){let r=(t<<1)+1,o=e[r];const l=r+1;if(l<this.length&&a(e[l],o)<0&&(r=l,o=e[l]),a(o,s)>=0)break;e[t]=o,t=r}e[t]=s}}function d3(n,t){return n<t?-1:n>t?1:0}function ql(n,t){return n.p.x>t.p.x?1:n.p.x<t.p.x?-1:n.p.y!==t.p.y?n.p.y>t.p.y?1:-1:1}function m3(n,t){return n.rightSweepEvent.p.x>t.rightSweepEvent.p.x?1:n.rightSweepEvent.p.x<t.rightSweepEvent.p.x?-1:n.rightSweepEvent.p.y!==t.rightSweepEvent.p.y?n.rightSweepEvent.p.y<t.rightSweepEvent.p.y?1:-1:1}let So=class{constructor(t,e,a,i){this.p={x:t[0],y:t[1]},this.featureId=e,this.ringId=a,this.eventId=i,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(t){return this.p.x===t.p.x&&this.p.y===t.p.y}};function g3(n,t){if(n.type==="FeatureCollection"){const e=n.features;for(let a=0;a<e.length;a++)Ro(e[a],t)}else Ro(n,t)}let qa=0,Xa=0,$a=0;function Ro(n,t){const e=n.type==="Feature"?n.geometry:n;let a=e.coordinates;(e.type==="Polygon"||e.type==="MultiLineString")&&(a=[a]),e.type==="LineString"&&(a=[[a]]);for(let i=0;i<a.length;i++)for(let s=0;s<a[i].length;s++){let r=a[i][s][0],o=null;Xa=Xa+1;for(let l=0;l<a[i][s].length-1;l++){o=a[i][s][l+1];const h=new So(r,qa,Xa,$a),c=new So(o,qa,Xa,$a+1);h.otherEvent=c,c.otherEvent=h,ql(h,c)>0?(c.isLeftEndpoint=!0,h.isLeftEndpoint=!1):(h.isLeftEndpoint=!0,c.isLeftEndpoint=!1),t.push(h),t.push(c),r=o,$a=$a+1}}qa=qa+1}class p3{constructor(t){this.leftSweepEvent=t,this.rightSweepEvent=t.otherEvent}}function y3(n,t){if(n===null||t===null||n.leftSweepEvent.ringId===t.leftSweepEvent.ringId&&(n.rightSweepEvent.isSamePoint(t.leftSweepEvent)||n.rightSweepEvent.isSamePoint(t.leftSweepEvent)||n.rightSweepEvent.isSamePoint(t.rightSweepEvent)||n.leftSweepEvent.isSamePoint(t.leftSweepEvent)||n.leftSweepEvent.isSamePoint(t.rightSweepEvent)))return!1;const e=n.leftSweepEvent.p.x,a=n.leftSweepEvent.p.y,i=n.rightSweepEvent.p.x,s=n.rightSweepEvent.p.y,r=t.leftSweepEvent.p.x,o=t.leftSweepEvent.p.y,l=t.rightSweepEvent.p.x,h=t.rightSweepEvent.p.y,c=(h-o)*(i-e)-(l-r)*(s-a),_=(l-r)*(a-o)-(h-o)*(e-r),u=(i-e)*(a-o)-(s-a)*(e-r);if(c===0)return!1;const f=_/c,d=u/c;if(f>=0&&f<=1&&d>=0&&d<=1){const m=e+f*(i-e),g=a+f*(s-a);return[m,g]}return!1}function b3(n,t){t=t||!1;const e=[],a=new Wl([],m3);for(;n.length;){const i=n.pop();if(i.isLeftEndpoint){const s=new p3(i);for(let r=0;r<a.data.length;r++){const o=a.data[r];if(t&&o.leftSweepEvent.featureId===i.featureId)continue;const l=y3(s,o);l!==!1&&e.push(l)}a.push(s)}else i.isLeftEndpoint===!1&&a.pop()}return e}function x3(n,t){const e=new Wl([],ql);return g3(n,e),b3(e,t)}var v3=x3;function Ys(n,t,e={}){const{removeDuplicates:a=!0,ignoreSelfIntersections:i=!0}=e;let s=[];n.type==="FeatureCollection"?s=s.concat(n.features):n.type==="Feature"?s.push(n):(n.type==="LineString"||n.type==="Polygon"||n.type==="MultiLineString"||n.type==="MultiPolygon")&&s.push(Ee(n)),t.type==="FeatureCollection"?s=s.concat(t.features):t.type==="Feature"?s.push(t):(t.type==="LineString"||t.type==="Polygon"||t.type==="MultiLineString"||t.type==="MultiPolygon")&&s.push(Ee(t));const r=v3(ms(s),i);let o=[];if(a){const l={};r.forEach(h=>{const c=h.join(",");l[c]||(l[c]=!0,o.push(h))})}else o=r;return ms(o.map(l=>Jg(l)))}function M3(n,t){var e,a,i,s,r,o,l,h,c,_,u=0,f=n.type==="FeatureCollection",d=n.type==="Feature",m=f?n.features.length:1;for(e=0;e<m;e++){for(o=f?n.features[e].geometry:d?n.geometry:n,h=f?n.features[e].properties:d?n.properties:{},c=f?n.features[e].bbox:d?n.bbox:void 0,_=f?n.features[e].id:d?n.id:void 0,l=o?o.type==="GeometryCollection":!1,r=l?o.geometries.length:1,i=0;i<r;i++){if(s=l?o.geometries[i]:o,s===null){if(t(null,u,h,c,_)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,u,h,c,_)===!1)return!1;break}case"GeometryCollection":{for(a=0;a<s.geometries.length;a++)if(t(s.geometries[a],u,h,c,_)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}u++}}function ui(n,t){M3(n,function(e,a,i,s,r){var o=e===null?null:e.type;switch(o){case null:case"Point":case"LineString":case"Polygon":return t(Ee(e,i,{bbox:s,id:r}),a,0)===!1?!1:void 0}var l;switch(o){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var h=0;h<e.coordinates.length;h++){var c=e.coordinates[h],_={type:l,coordinates:c};if(t(Ee(_,i),a,h)===!1)return!1}})}function gs(n,t={}){const e=wi(n);switch(!t.properties&&n.type==="Feature"&&(t.properties=n.properties),e.type){case"Polygon":return w3(e,t);case"MultiPolygon":return E3(e,t);default:throw new Error("invalid poly")}}function w3(n,t={}){const a=wi(n).coordinates,i=t.properties?t.properties:n.type==="Feature"?n.properties:{};return Xl(a,i)}function E3(n,t={}){const a=wi(n).coordinates,i=t.properties?t.properties:n.type==="Feature"?n.properties:{},s=[];return a.forEach(r=>{s.push(Xl(r,i))}),ms(s)}function Xl(n,t){return n.length>1?e3(n,t):t3(n[0],t)}function S3(n,t,{ignoreSelfIntersections:e=!0}={ignoreSelfIntersections:!0}){let a=!0;return ui(n,i=>{ui(t,s=>{if(a===!1)return!1;a=R3(i.geometry,s.geometry,e)})}),a}function R3(n,t,e){switch(n.type){case"Point":switch(t.type){case"Point":return!L3(n.coordinates,t.coordinates);case"LineString":return!Io(t,n);case"Polygon":return!ma(n,t)}break;case"LineString":switch(t.type){case"Point":return!Io(n,t);case"LineString":return!I3(n,t,e);case"Polygon":return!Ao(t,n,e)}break;case"Polygon":switch(t.type){case"Point":return!ma(t,n);case"LineString":return!Ao(n,t,e);case"Polygon":return!A3(t,n,e)}}return!1}function Io(n,t){for(let e=0;e<n.coordinates.length-1;e++)if(C3(n.coordinates[e],n.coordinates[e+1],t.coordinates))return!0;return!1}function I3(n,t,e){return Ys(n,t,{ignoreSelfIntersections:e}).features.length>0}function Ao(n,t,e){for(const i of t.coordinates)if(ma(i,n))return!0;return Ys(t,gs(n),{ignoreSelfIntersections:e}).features.length>0}function A3(n,t,e){for(const i of n.coordinates[0])if(ma(i,t))return!0;for(const i of t.coordinates[0])if(ma(i,n))return!0;return Ys(gs(n),gs(t),{ignoreSelfIntersections:e}).features.length>0}function C3(n,t,e){const a=e[0]-n[0],i=e[1]-n[1],s=t[0]-n[0],r=t[1]-n[1];return a*r-i*s!==0?!1:Math.abs(s)>=Math.abs(r)?s>0?n[0]<=e[0]&&e[0]<=t[0]:t[0]<=e[0]&&e[0]<=n[0]:r>0?n[1]<=e[1]&&e[1]<=t[1]:t[1]<=e[1]&&e[1]<=n[1]}function L3(n,t){return n[0]===t[0]&&n[1]===t[1]}function k3(n,t,{ignoreSelfIntersections:e=!0}={}){let a=!1;return ui(n,i=>{ui(t,s=>{if(a===!0)return!0;a=!S3(i.geometry,s.geometry,{ignoreSelfIntersections:e})})}),a}var T3=k3;function O3(n){let t=1779033703,e=3144134277,a=1013904242,i=2773480762;for(let s=0,r;s<n.length;s++)r=n.charCodeAt(s),t=e^Math.imul(t^r,597399067),e=a^Math.imul(e^r,2869860233),a=i^Math.imul(a^r,951274213),i=t^Math.imul(i^r,2716044179);return t=Math.imul(a^t>>>18,597399067),e=Math.imul(i^e>>>22,2869860233),a=Math.imul(t^a>>>17,951274213),i=Math.imul(e^i>>>19,2716044179),t^=e^a^i,e^=t,a^=t,i^=t,[t>>>0,e>>>0,a>>>0,i>>>0]}function D3(n){return()=>{n|=0,n=n+2654435769|0;let t=n^n>>>16;return t=Math.imul(t,569420461),t^=t>>>15,t=Math.imul(t,1935289751),t^=t>>>15,(t>>>0)/4294967296}}function Co(n,t,e){let a;if(e===void 0)a=Math.random;else{const p=O3(e);a=D3(p[0])}const i=t/1.18,[s,r,o,l]=n,h=l-i,c=o-t,_=h-r,u=c-s,f=r+a()*_,d=s+a()*u,m=f+i,g=d+t;return[d,f,g,m]}const Lo=n=>({grid:new $s({size:n.gameSize,origin:n.center})});function N3(n,t=1,e=8,a={r:255,g:255,b:255,a:0},i={r:0,g:0,b:0,a:1}){let s;if(Number.isNaN(n))return"rgba(0, 0, 0, 0)";s=n,s=Math.max(t,Math.min(e,s));const r=(s-t)/(e-t),o=Math.round(i.r*r+a.r*(1-r)),l=Math.round(i.g*r+a.g*(1-r)),h=Math.round(i.b*r+a.b*(1-r)),c=i.a*r+a.a*(1-r);return`rgba(${o}, ${l}, ${h}, ${c})`}const $l=(n,t,e,a,i)=>{let s;return n.isRevealed===!0?n.isMine?s=new Gt({stroke:new Ft({color:"#000",width:1}),fill:new Nt({color:"red"}),text:new Pe({text:"🌸",font:"16px Calibri,sans-serif",fill:new Nt({color:"#fff"}),stroke:new Ft({color:"#000",width:3})})}):s=new Gt({stroke:new Ft({color:"#000",width:1}),fill:new Nt({color:N3(n.value,t,e,a,i)}),text:new Pe({text:n.adjacentMines?n.adjacentMines.toString():"0",font:"16px Calibri,sans-serif",fill:new Nt({color:"#000"}),stroke:new Ft({color:"#fff",width:3})})}):n.isFlagged?s=new Gt({stroke:new Ft({color:"#000",width:1}),fill:new Nt({color:"blue"}),text:new Pe({text:"⚑",font:"16px Calibri,sans-serif",fill:new Nt({color:"#fff"}),stroke:new Ft({color:"#000",width:3})})}):s=new Gt({stroke:new Ft({color:"#000",width:.5}),fill:new Nt({color:"#AAAAAA4D"}),text:new Pe({text:"",font:"16px Calibri,sans-serif"})}),s},Zs=(n,t,e,a,i,s)=>{const[r,o]=s.convertGameCoordsToAxial(n+1,t),l=e.getHexagon([r,o]),h=new Fo(new Bo([l])),c=s.get(n,t),_=`tile-${n}-${t}`;h.setId(_);const u=a.getFeatureById(_);u&&a.removeFeature(u),h.setStyle($l(c,s.minValue,s.maxValue,s.minColor,s.maxColor)),a.addFeature(h),i.changed()},P3=(n,t,e,a)=>{e.clear();for(let i=0;i<n.height;i++)for(let s=0;s<n.width;s++)Zs(s,i,t,e,a,n);a.changed()},F3=(n,t,e,a,i)=>{n.stopPropagation(),n.preventDefault();let s=!1;const{coordinate:r}=n,[o,l]=e.coord2hex(r),h=t.convertAxialToGameCoords(o,l),[c,_]=[h.x-1,h.y],u=t.revealTile(c,_);if(u){for(const[f,d]of u)s=s||t.get(f,d).isMine,i(f,d,e,a,t);if(s){document.dispatchEvent(new Event("minesweeper:gameover")),t.revealAllTiles();for(let f=0;f<(t.height??NaN);f++)for(let d=0;d<t.width;d++)i(d,f,e,a,t)}else document.dispatchEvent(new Event("minesweeper:continue"))}},B3=(n,t,e,a,i)=>{n.stopPropagation(),n.preventDefault();const{coordinate:s}=n,[r,o]=e.coord2hex(s),l=t.convertAxialToGameCoords(r,o),[h,c]=[l.x-1,l.y],_=t.get(h,c);_&&(_.isFlagged=!_.isFlagged,Zs(h,c,e,a,i,t)),document.dispatchEvent(new Event("minesweeper:continue"))},G3=(n,t,e)=>{if(n)for(let a=0;a<n.height;a++){let i=(a%2!==0)*1-a/2;a%2===0?i+=1:i+=.5;for(let s=0;s<n.width;s++){const r=n.board[a][s],o=t.getHexagon([s+i,a]),l=new Fo(new Bo([o])),h=$l(r,n.minValue,n.maxValue,n.minColor,n.maxColor);l.setStyle(h),e.addFeature(l)}}},ko=async(n,t)=>{const e=a3(n);return t.features.filter(i=>T3(e.geometry,i))};class U3{constructor(t,e){this.vectorSource=new s_,this.vectorLayer=new Lu({source:this.vectorSource,title:"Minesweep game board"}),this.map=t,this.options=e,this.game=new Zg(e);const a=t.getLayers().getArray().find(i=>i.get("id")==="AnalysisGroup");a&&a.getLayers().push(this.vectorLayer),this.setupGame(),this.clickEventHandlers=[],this.contextmenuEventHandlers=[]}async setupGame(){await this.game.fromGeoTIFF(this.options);const t=Lo(this.game);this.grid=t.grid,this.drawGameBoard(),this.addEventListeners(),this.updateAllTiles()}get mineCount(){return this.game.board.reduce((t,e)=>[...t,...e],[]).reduce((t,e)=>e.isMine?t+1:t,0)}get flagCount(){return this.game.board.reduce((t,e)=>[...t,...e],[]).reduce((t,e)=>e.isFlagged?t+1:t,0)}get coveredMineCount(){return this.game.board.reduce((t,e)=>[...t,...e],[]).reduce((t,e)=>e.isMine&&!e.isRevealed&&!e.isFlagged?t+1:t,0)}get isGameCompleted(){return this.coveredMineCount===0}revealAllTiles(){this.game.revealAllTiles(),this.updateAllTiles(),document.dispatchEvent(new Event("minesweeper:win"))}setupGrid(){return Lo(this.game)}drawGameBoard(){return G3(this.game,this.grid,this.vectorSource)}addEventListeners(){const t=a=>F3(a,this.game,this.grid,this.vectorSource,this.updateTile.bind(this));this.clickEventHandlers.push(t);const e=a=>B3(a,this.game,this.grid,this.vectorSource,this.vectorLayer);this.contextmenuEventHandlers.push(e),this.map.on("click",t),this.map.on("contextmenu",e)}removeEventListeners(){this.clickEventHandlers.forEach(t=>{this.map.un("click",t)}),this.contextmenuEventHandlers.forEach(t=>{this.map.un("contextmenu",t)})}updateTile(t,e){return Zs(t,e,this.grid,this.vectorSource,this.vectorLayer,this.game)}updateAllTiles(){return P3(this.game,this.grid,this.vectorSource,this.vectorLayer)}}const z3=JSON.parse(`[{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-51.657797,4.156232],[-51.823343,4.565768],[-52.882141,5.409851],[-53.618453,5.646529],[-53.958045,5.756548],[-54.478633,4.896756],[-54.399542,4.212611],[-54.006931,3.620038],[-54.181726,3.18978],[-54.269705,2.732392],[-54.524754,2.311849],[-54.088063,2.105557],[-53.778521,2.376703],[-53.554839,2.334897],[-53.418465,2.053389],[-52.939657,2.124858],[-52.556425,2.504705],[-52.249338,3.241094],[-51.657797,4.156232]]],[[[6.18632,49.463803],[5.897759,49.442667],[5.674052,49.529484],[4.799222,49.985373],[4.286023,49.907497],[3.588184,50.378992],[3.123252,50.780363],[2.658422,50.796848],[2.513573,51.148506],[1.639001,50.946606],[1.338761,50.127173],[-0.989469,49.347376],[-1.933494,49.776342],[-1.616511,48.644421],[-3.295814,48.901692],[-4.59235,48.68416],[-4.491555,47.954954],[-2.963276,47.570327],[-2.225724,47.064363],[-1.193798,46.014918],[-1.384225,44.02261],[-1.901351,43.422802],[-1.502771,43.034014],[0.338047,42.579546],[0.701591,42.795734],[1.826793,42.343385],[2.985999,42.473015],[3.100411,43.075201],[4.556963,43.399651],[6.529245,43.128892],[7.435185,43.693845],[7.549596,44.127901],[7.007562,44.254767],[6.749955,45.028518],[7.096652,45.333099],[6.802355,45.70858],[6.843593,45.991147],[6.5001,46.429673],[6.022609,46.27299],[6.037389,46.725779],[6.768714,47.287708],[6.736571,47.541801],[7.192202,47.449766],[7.466759,47.620582],[7.593676,48.333019],[8.099279,49.017784],[6.65823,49.201958],[6.18632,49.463803]]],[[[8.746009,42.628122],[8.544213,42.256517],[8.775723,41.583612],[9.229752,41.380007],[9.560016,42.152492],[9.390001,43.009985],[8.746009,42.628122]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"France","sov_a3":"FR1","adm0_dif":1,"level":2,"type":"Country","tlc":"1","admin":"France","adm0_a3":"FRA","geou_dif":0,"geounit":"France","gu_a3":"FRA","su_dif":0,"subunit":"France","su_a3":"FRA","brk_diff":0,"name":"France","name_long":"France","brk_a3":"FRA","brk_name":"France","brk_group":null,"abbrev":"Fr.","postal":"F","formal_en":"French Republic","formal_fr":null,"name_ciawf":"France","note_adm0":null,"note_brk":null,"name_sort":"France","name_alt":null,"mapcolor7":7,"mapcolor8":5,"mapcolor9":9,"mapcolor13":11,"pop_est":67059887,"pop_rank":16,"pop_year":2019,"gdp_md":2715518,"gdp_year":2019,"economy":"1. Developed region: G7","income_grp":"1. High income: OECD","fips_10":"FR","iso_a2":"-99","iso_a2_eh":"FR","iso_a3":"-99","iso_a3_eh":"FRA","iso_n3":"-99","iso_n3_eh":"250","un_a3":"250","wb_a2":"FR","wb_a3":"FRA","woe_id":-90,"woe_id_eh":23424819,"woe_note":"Includes only Metropolitan France (including Corsica)","adm0_iso":"FRA","adm0_diff":null,"adm0_tlc":"FRA","adm0_a3_us":"FRA","adm0_a3_fr":"FRA","adm0_a3_ru":"FRA","adm0_a3_es":"FRA","adm0_a3_cn":"FRA","adm0_a3_tw":"FRA","adm0_a3_in":"FRA","adm0_a3_np":"FRA","adm0_a3_pk":"FRA","adm0_a3_de":"FRA","adm0_a3_gb":"FRA","adm0_a3_br":"FRA","adm0_a3_il":"FRA","adm0_a3_ps":"FRA","adm0_a3_sa":"FRA","adm0_a3_eg":"FRA","adm0_a3_ma":"FRA","adm0_a3_pt":"FRA","adm0_a3_ar":"FRA","adm0_a3_jp":"FRA","adm0_a3_ko":"FRA","adm0_a3_vn":"FRA","adm0_a3_tr":"FRA","adm0_a3_id":"FRA","adm0_a3_pl":"FRA","adm0_a3_gr":"FRA","adm0_a3_it":"FRA","adm0_a3_nl":"FRA","adm0_a3_se":"FRA","adm0_a3_bd":"FRA","adm0_a3_ua":"FRA","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":3,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":1.7,"max_label":6.7,"label_x":2.552275,"label_y":46.696113,"ne_id":1159320637,"wikidataid":"Q142","name_ar":"فرنسا","name_bn":"ফ্রান্স","name_de":"Frankreich","name_en":"France","name_es":"Francia","name_fa":"فرانسه","name_fr":"France","name_el":"Γαλλία","name_he":"צרפת","name_hi":"फ़्रान्स","name_hu":"Franciaország","name_id":"Prancis","name_it":"Francia","name_ja":"フランス","name_ko":"프랑스","name_nl":"Frankrijk","name_pl":"Francja","name_pt":"França","name_ru":"Франция","name_sv":"Frankrike","name_tr":"Fransa","name_uk":"Франція","name_ur":"فرانس","name_vi":"Pháp","name_zh":"法国","name_zht":"法國","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"FRA.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.494331,55.615107],[25.533047,56.100297],[25.000934,56.164531],[24.860684,56.372528],[23.878264,56.273671],[22.201157,56.337802],[21.0558,56.031076],[21.268449,55.190482],[22.315724,55.015299],[22.757764,54.856574],[22.651052,54.582741],[22.731099,54.327537],[23.243987,54.220567],[23.484128,53.912498],[24.450684,53.905702],[25.536354,54.282423],[25.768433,54.846963],[26.588279,55.167176],[26.494331,55.615107]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Lithuania","sov_a3":"LTU","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Lithuania","adm0_a3":"LTU","geou_dif":0,"geounit":"Lithuania","gu_a3":"LTU","su_dif":0,"subunit":"Lithuania","su_a3":"LTU","brk_diff":0,"name":"Lithuania","name_long":"Lithuania","brk_a3":"LTU","brk_name":"Lithuania","brk_group":null,"abbrev":"Lith.","postal":"LT","formal_en":"Republic of Lithuania","formal_fr":null,"name_ciawf":"Lithuania","note_adm0":null,"note_brk":null,"name_sort":"Lithuania","name_alt":null,"mapcolor7":6,"mapcolor8":3,"mapcolor9":3,"mapcolor13":9,"pop_est":2786844,"pop_rank":12,"pop_year":2019,"gdp_md":54627,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"3. Upper middle income","fips_10":"LH","iso_a2":"LT","iso_a2_eh":"LT","iso_a3":"LTU","iso_a3_eh":"LTU","iso_n3":"440","iso_n3_eh":"440","un_a3":"440","wb_a2":"LT","wb_a3":"LTU","woe_id":23424875,"woe_id_eh":23424875,"woe_note":"Exact WOE match as country","adm0_iso":"LTU","adm0_diff":null,"adm0_tlc":"LTU","adm0_a3_us":"LTU","adm0_a3_fr":"LTU","adm0_a3_ru":"LTU","adm0_a3_es":"LTU","adm0_a3_cn":"LTU","adm0_a3_tw":"LTU","adm0_a3_in":"LTU","adm0_a3_np":"LTU","adm0_a3_pk":"LTU","adm0_a3_de":"LTU","adm0_a3_gb":"LTU","adm0_a3_br":"LTU","adm0_a3_il":"LTU","adm0_a3_ps":"LTU","adm0_a3_sa":"LTU","adm0_a3_eg":"LTU","adm0_a3_ma":"LTU","adm0_a3_pt":"LTU","adm0_a3_ar":"LTU","adm0_a3_jp":"LTU","adm0_a3_ko":"LTU","adm0_a3_vn":"LTU","adm0_a3_tr":"LTU","adm0_a3_id":"LTU","adm0_a3_pl":"LTU","adm0_a3_gr":"LTU","adm0_a3_it":"LTU","adm0_a3_nl":"LTU","adm0_a3_se":"LTU","adm0_a3_bd":"LTU","adm0_a3_ua":"LTU","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":9,"long_len":9,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":24.089932,"label_y":55.103703,"ne_id":1159321029,"wikidataid":"Q37","name_ar":"ليتوانيا","name_bn":"লিথুয়ানিয়া","name_de":"Litauen","name_en":"Lithuania","name_es":"Lituania","name_fa":"لیتوانی","name_fr":"Lituanie","name_el":"Λιθουανία","name_he":"ליטא","name_hi":"लिथुआनिया","name_hu":"Litvánia","name_id":"Lituania","name_it":"Lituania","name_ja":"リトアニア","name_ko":"리투아니아","name_nl":"Litouwen","name_pl":"Litwa","name_pt":"Lituânia","name_ru":"Литва","name_sv":"Litauen","name_tr":"Litvanya","name_uk":"Литва","name_ur":"لتھووینیا","name_vi":"Litva","name_zh":"立陶宛","name_zht":"立陶宛","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"LTU.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[15.016996,51.106674],[14.570718,51.002339],[14.307013,51.117268],[14.056228,50.926918],[13.338132,50.733234],[12.966837,50.484076],[12.240111,50.266338],[12.415191,49.969121],[12.521024,49.547415],[13.031329,49.307068],[13.595946,48.877172],[14.338898,48.555305],[14.901447,48.964402],[15.253416,49.039074],[16.029647,48.733899],[16.499283,48.785808],[16.960288,48.596982],[17.101985,48.816969],[17.545007,48.800019],[17.886485,48.903475],[17.913512,48.996493],[18.104973,49.043983],[18.170498,49.271515],[18.399994,49.315001],[18.554971,49.495015],[18.853144,49.49623],[18.392914,49.988629],[17.649445,50.049038],[17.554567,50.362146],[16.868769,50.473974],[16.719476,50.215747],[16.176253,50.422607],[16.238627,50.697733],[15.490972,50.78473],[15.016996,51.106674]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Czechia","sov_a3":"CZE","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Czechia","adm0_a3":"CZE","geou_dif":0,"geounit":"Czechia","gu_a3":"CZE","su_dif":0,"subunit":"Czechia","su_a3":"CZE","brk_diff":0,"name":"Czechia","name_long":"Czech Republic","brk_a3":"CZE","brk_name":"Czechia","brk_group":null,"abbrev":"Cz.","postal":"CZ","formal_en":"Czech Republic","formal_fr":"la République tchèque","name_ciawf":"Czechia","note_adm0":null,"note_brk":null,"name_sort":"Czechia","name_alt":"Česko","mapcolor7":1,"mapcolor8":1,"mapcolor9":2,"mapcolor13":6,"pop_est":10669709,"pop_rank":14,"pop_year":2019,"gdp_md":250680,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"EZ","iso_a2":"CZ","iso_a2_eh":"CZ","iso_a3":"CZE","iso_a3_eh":"CZE","iso_n3":"203","iso_n3_eh":"203","un_a3":"203","wb_a2":"CZ","wb_a3":"CZE","woe_id":23424810,"woe_id_eh":23424810,"woe_note":"Exact WOE match as country","adm0_iso":"CZE","adm0_diff":null,"adm0_tlc":"CZE","adm0_a3_us":"CZE","adm0_a3_fr":"CZE","adm0_a3_ru":"CZE","adm0_a3_es":"CZE","adm0_a3_cn":"CZE","adm0_a3_tw":"CZE","adm0_a3_in":"CZE","adm0_a3_np":"CZE","adm0_a3_pk":"CZE","adm0_a3_de":"CZE","adm0_a3_gb":"CZE","adm0_a3_br":"CZE","adm0_a3_il":"CZE","adm0_a3_ps":"CZE","adm0_a3_sa":"CZE","adm0_a3_eg":"CZE","adm0_a3_ma":"CZE","adm0_a3_pt":"CZE","adm0_a3_ar":"CZE","adm0_a3_jp":"CZE","adm0_a3_ko":"CZE","adm0_a3_vn":"CZE","adm0_a3_tr":"CZE","adm0_a3_id":"CZE","adm0_a3_pl":"CZE","adm0_a3_gr":"CZE","adm0_a3_it":"CZE","adm0_a3_nl":"CZE","adm0_a3_se":"CZE","adm0_a3_bd":"CZE","adm0_a3_ua":"CZE","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":14,"abbrev_len":3,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":15.377555,"label_y":49.882364,"ne_id":1159320535,"wikidataid":"Q213","name_ar":"التشيك","name_bn":"চেক প্রজাতন্ত্র","name_de":"Tschechien","name_en":"Czech Republic","name_es":"República Checa","name_fa":"جمهوری چک","name_fr":"Tchéquie","name_el":"Τσεχία","name_he":"צ'כיה","name_hi":"चेक गणराज्य","name_hu":"Csehország","name_id":"Republik Ceko","name_it":"Repubblica Ceca","name_ja":"チェコ","name_ko":"체코","name_nl":"Tsjechië","name_pl":"Czechy","name_pt":"Chéquia","name_ru":"Чехия","name_sv":"Tjeckien","name_tr":"Çek Cumhuriyeti","name_uk":"Чехія","name_ur":"چیک جمہوریہ","name_vi":"Cộng hòa Séc","name_zh":"捷克","name_zht":"捷克共和國","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"CZE.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[14.119686,53.757029],[13.647467,54.075511],[12.51844,54.470371],[11.956252,54.196486],[10.939467,54.008693],[10.950112,54.363607],[9.93958,54.596642],[9.921906,54.983104],[9.282049,54.830865],[8.526229,54.962744],[8.572118,54.395646],[8.800734,54.020786],[8.121706,53.527792],[7.936239,53.748296],[7.100425,53.693932],[6.90514,53.482162],[7.092053,53.144043],[6.84287,52.22844],[6.589397,51.852029],[5.988658,51.851616],[6.156658,50.803721],[6.043073,50.128052],[6.242751,49.902226],[6.18632,49.463803],[6.65823,49.201958],[8.099279,49.017784],[7.593676,48.333019],[7.466759,47.620582],[8.317301,47.61358],[8.522612,47.830828],[9.594226,47.525058],[9.896068,47.580197],[10.402084,47.302488],[10.544504,47.566399],[11.426414,47.523766],[12.141357,47.703083],[12.62076,47.672388],[12.932627,47.467646],[13.025851,47.637584],[12.884103,48.289146],[13.243357,48.416115],[13.595946,48.877172],[13.031329,49.307068],[12.521024,49.547415],[12.415191,49.969121],[12.240111,50.266338],[12.966837,50.484076],[13.338132,50.733234],[14.056228,50.926918],[14.307013,51.117268],[14.570718,51.002339],[15.016996,51.106674],[14.607098,51.745188],[14.685026,52.089947],[14.4376,52.62485],[14.074521,52.981263],[14.353315,53.248171],[14.119686,53.757029]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"Germany","sov_a3":"DEU","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Germany","adm0_a3":"DEU","geou_dif":0,"geounit":"Germany","gu_a3":"DEU","su_dif":0,"subunit":"Germany","su_a3":"DEU","brk_diff":0,"name":"Germany","name_long":"Germany","brk_a3":"DEU","brk_name":"Germany","brk_group":null,"abbrev":"Ger.","postal":"D","formal_en":"Federal Republic of Germany","formal_fr":null,"name_ciawf":"Germany","note_adm0":null,"note_brk":null,"name_sort":"Germany","name_alt":null,"mapcolor7":2,"mapcolor8":5,"mapcolor9":5,"mapcolor13":1,"pop_est":83132799,"pop_rank":16,"pop_year":2019,"gdp_md":3861123,"gdp_year":2019,"economy":"1. Developed region: G7","income_grp":"1. High income: OECD","fips_10":"GM","iso_a2":"DE","iso_a2_eh":"DE","iso_a3":"DEU","iso_a3_eh":"DEU","iso_n3":"276","iso_n3_eh":"276","un_a3":"276","wb_a2":"DE","wb_a3":"DEU","woe_id":23424829,"woe_id_eh":23424829,"woe_note":"Exact WOE match as country","adm0_iso":"DEU","adm0_diff":null,"adm0_tlc":"DEU","adm0_a3_us":"DEU","adm0_a3_fr":"DEU","adm0_a3_ru":"DEU","adm0_a3_es":"DEU","adm0_a3_cn":"DEU","adm0_a3_tw":"DEU","adm0_a3_in":"DEU","adm0_a3_np":"DEU","adm0_a3_pk":"DEU","adm0_a3_de":"DEU","adm0_a3_gb":"DEU","adm0_a3_br":"DEU","adm0_a3_il":"DEU","adm0_a3_ps":"DEU","adm0_a3_sa":"DEU","adm0_a3_eg":"DEU","adm0_a3_ma":"DEU","adm0_a3_pt":"DEU","adm0_a3_ar":"DEU","adm0_a3_jp":"DEU","adm0_a3_ko":"DEU","adm0_a3_vn":"DEU","adm0_a3_tr":"DEU","adm0_a3_id":"DEU","adm0_a3_pl":"DEU","adm0_a3_gr":"DEU","adm0_a3_it":"DEU","adm0_a3_nl":"DEU","adm0_a3_se":"DEU","adm0_a3_bd":"DEU","adm0_a3_ua":"DEU","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":1.7,"max_label":6.7,"label_x":9.678348,"label_y":50.961733,"ne_id":1159320539,"wikidataid":"Q183","name_ar":"ألمانيا","name_bn":"জার্মানি","name_de":"Deutschland","name_en":"Germany","name_es":"Alemania","name_fa":"آلمان","name_fr":"Allemagne","name_el":"Γερμανία","name_he":"גרמניה","name_hi":"जर्मनी","name_hu":"Németország","name_id":"Jerman","name_it":"Germania","name_ja":"ドイツ","name_ko":"독일","name_nl":"Duitsland","name_pl":"Niemcy","name_pt":"Alemanha","name_ru":"Германия","name_sv":"Tyskland","name_tr":"Almanya","name_uk":"Німеччина","name_ur":"جرمنی","name_vi":"Đức","name_zh":"德国","name_zht":"德國","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"DEU.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[27.981127,59.475373],[27.981114,59.475388],[26.949136,59.445803],[25.864189,59.61109],[24.604214,59.465854],[23.339795,59.18724],[23.42656,58.612753],[24.061198,58.257375],[24.428928,58.383413],[24.312863,57.793424],[25.164594,57.970157],[25.60281,57.847529],[26.463532,57.476389],[27.288185,57.474528],[27.716686,57.791899],[27.42015,58.72457],[28.131699,59.300825],[27.98112,59.47537],[27.981127,59.475373]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Estonia","sov_a3":"EST","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Estonia","adm0_a3":"EST","geou_dif":0,"geounit":"Estonia","gu_a3":"EST","su_dif":0,"subunit":"Estonia","su_a3":"EST","brk_diff":0,"name":"Estonia","name_long":"Estonia","brk_a3":"EST","brk_name":"Estonia","brk_group":null,"abbrev":"Est.","postal":"EST","formal_en":"Republic of Estonia","formal_fr":null,"name_ciawf":"Estonia","note_adm0":null,"note_brk":null,"name_sort":"Estonia","name_alt":null,"mapcolor7":3,"mapcolor8":2,"mapcolor9":1,"mapcolor13":10,"pop_est":1326590,"pop_rank":12,"pop_year":2019,"gdp_md":31471,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"EN","iso_a2":"EE","iso_a2_eh":"EE","iso_a3":"EST","iso_a3_eh":"EST","iso_n3":"233","iso_n3_eh":"233","un_a3":"233","wb_a2":"EE","wb_a3":"EST","woe_id":23424805,"woe_id_eh":23424805,"woe_note":"Exact WOE match as country","adm0_iso":"EST","adm0_diff":null,"adm0_tlc":"EST","adm0_a3_us":"EST","adm0_a3_fr":"EST","adm0_a3_ru":"EST","adm0_a3_es":"EST","adm0_a3_cn":"EST","adm0_a3_tw":"EST","adm0_a3_in":"EST","adm0_a3_np":"EST","adm0_a3_pk":"EST","adm0_a3_de":"EST","adm0_a3_gb":"EST","adm0_a3_br":"EST","adm0_a3_il":"EST","adm0_a3_ps":"EST","adm0_a3_sa":"EST","adm0_a3_eg":"EST","adm0_a3_ma":"EST","adm0_a3_pt":"EST","adm0_a3_ar":"EST","adm0_a3_jp":"EST","adm0_a3_ko":"EST","adm0_a3_vn":"EST","adm0_a3_tr":"EST","adm0_a3_id":"EST","adm0_a3_pl":"EST","adm0_a3_gr":"EST","adm0_a3_it":"EST","adm0_a3_nl":"EST","adm0_a3_se":"EST","adm0_a3_bd":"EST","adm0_a3_ua":"EST","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":25.867126,"label_y":58.724865,"ne_id":1159320615,"wikidataid":"Q191","name_ar":"إستونيا","name_bn":"এস্তোনিয়া","name_de":"Estland","name_en":"Estonia","name_es":"Estonia","name_fa":"استونی","name_fr":"Estonie","name_el":"Εσθονία","name_he":"אסטוניה","name_hi":"एस्टोनिया","name_hu":"Észtország","name_id":"Estonia","name_it":"Estonia","name_ja":"エストニア","name_ko":"에스토니아","name_nl":"Estland","name_pl":"Estonia","name_pt":"Estónia","name_ru":"Эстония","name_sv":"Estland","name_tr":"Estonya","name_uk":"Естонія","name_ur":"استونیا","name_vi":"Estonia","name_zh":"爱沙尼亚","name_zht":"愛沙尼亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"EST.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[27.288185,57.474528],[26.463532,57.476389],[25.60281,57.847529],[25.164594,57.970157],[24.312863,57.793424],[24.12073,57.025693],[23.318453,57.006236],[22.524341,57.753374],[21.581866,57.411871],[21.090424,56.783873],[21.0558,56.031076],[22.201157,56.337802],[23.878264,56.273671],[24.860684,56.372528],[25.000934,56.164531],[25.533047,56.100297],[26.494331,55.615107],[27.10246,55.783314],[28.176709,56.16913],[27.855282,56.759326],[27.770016,57.244258],[27.288185,57.474528]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Latvia","sov_a3":"LVA","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Latvia","adm0_a3":"LVA","geou_dif":0,"geounit":"Latvia","gu_a3":"LVA","su_dif":0,"subunit":"Latvia","su_a3":"LVA","brk_diff":0,"name":"Latvia","name_long":"Latvia","brk_a3":"LVA","brk_name":"Latvia","brk_group":null,"abbrev":"Lat.","postal":"LV","formal_en":"Republic of Latvia","formal_fr":null,"name_ciawf":"Latvia","note_adm0":null,"note_brk":null,"name_sort":"Latvia","name_alt":null,"mapcolor7":4,"mapcolor8":7,"mapcolor9":6,"mapcolor13":13,"pop_est":1912789,"pop_rank":12,"pop_year":2019,"gdp_md":34102,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"3. Upper middle income","fips_10":"LG","iso_a2":"LV","iso_a2_eh":"LV","iso_a3":"LVA","iso_a3_eh":"LVA","iso_n3":"428","iso_n3_eh":"428","un_a3":"428","wb_a2":"LV","wb_a3":"LVA","woe_id":23424874,"woe_id_eh":23424874,"woe_note":"Exact WOE match as country","adm0_iso":"LVA","adm0_diff":null,"adm0_tlc":"LVA","adm0_a3_us":"LVA","adm0_a3_fr":"LVA","adm0_a3_ru":"LVA","adm0_a3_es":"LVA","adm0_a3_cn":"LVA","adm0_a3_tw":"LVA","adm0_a3_in":"LVA","adm0_a3_np":"LVA","adm0_a3_pk":"LVA","adm0_a3_de":"LVA","adm0_a3_gb":"LVA","adm0_a3_br":"LVA","adm0_a3_il":"LVA","adm0_a3_ps":"LVA","adm0_a3_sa":"LVA","adm0_a3_eg":"LVA","adm0_a3_ma":"LVA","adm0_a3_pt":"LVA","adm0_a3_ar":"LVA","adm0_a3_jp":"LVA","adm0_a3_ko":"LVA","adm0_a3_vn":"LVA","adm0_a3_tr":"LVA","adm0_a3_id":"LVA","adm0_a3_pl":"LVA","adm0_a3_gr":"LVA","adm0_a3_it":"LVA","adm0_a3_nl":"LVA","adm0_a3_se":"LVA","adm0_a3_bd":"LVA","adm0_a3_ua":"LVA","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":25.458723,"label_y":57.066872,"ne_id":1159321033,"wikidataid":"Q211","name_ar":"لاتفيا","name_bn":"লাতভিয়া","name_de":"Lettland","name_en":"Latvia","name_es":"Letonia","name_fa":"لتونی","name_fr":"Lettonie","name_el":"Λετονία","name_he":"לטביה","name_hi":"लातविया","name_hu":"Lettország","name_id":"Latvia","name_it":"Lettonia","name_ja":"ラトビア","name_ko":"라트비아","name_nl":"Letland","name_pl":"Łotwa","name_pt":"Letónia","name_ru":"Латвия","name_sv":"Lettland","name_tr":"Letonya","name_uk":"Латвія","name_ur":"لٹویا","name_vi":"Latvia","name_zh":"拉脱维亚","name_zht":"拉脫維亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"LVA.geojson"}},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[15.14282,79.67431],[13.71852,79.66039],[13.17077,80.01046],[10.44453,79.65239],[11.22231,78.8693],[13.1706,78.02493],[14.66956,77.73565],[13.76259,77.38035],[15.91315,76.77045],[17.1182,76.80941],[17.59441,77.63796],[18.47172,77.82669],[19.02737,78.5626],[21.54383,78.95611],[18.25183,79.70175],[16.99085,80.05086],[15.52255,80.01608],[15.14282,79.67431]]],[[[31.101042,69.558101],[30.005435,70.186259],[31.293418,70.453788],[28.165547,71.185474],[26.37005,70.986262],[24.546543,71.030497],[23.023742,70.202072],[21.378416,70.255169],[19.184028,69.817444],[16.435927,68.563205],[14.761146,67.810642],[12.358347,65.879726],[10.527709,64.486038],[8.553411,63.454008],[5.9129,62.614473],[4.992078,61.970998],[5.308234,59.663232],[5.665835,58.588155],[7.048748,58.078884],[8.382,58.313288],[10.356557,59.469807],[11.027369,58.856149],[11.468272,59.432393],[12.300366,60.117933],[12.631147,61.293572],[11.992064,61.800362],[11.930569,63.128318],[12.579935,64.066219],[13.571916,64.049114],[13.919905,64.445421],[13.55569,64.787028],[15.108411,66.193867],[16.108712,67.302456],[16.768879,68.013937],[17.729182,68.010552],[17.993868,68.567391],[19.87856,68.407194],[20.025269,69.065139],[20.645593,69.106247],[21.244936,69.370443],[22.356238,68.841741],[23.66205,68.891247],[24.735679,68.649557],[25.689213,69.092114],[26.179622,69.825299],[27.732292,70.164193],[29.015573,69.766491],[28.59193,69.064777],[29.39955,69.15692],[31.101042,69.558101]]],[[[27.407506,80.056406],[25.447625,80.40734],[22.919253,80.657144],[21.907945,80.357679],[20.455992,80.598156],[17.368015,80.318896],[18.462264,79.85988],[19.897266,79.842362],[20.075188,79.566823],[23.024466,79.400012],[25.924651,79.517834],[27.407506,80.056406]]],[[[24.72412,77.85385],[23.28134,78.07954],[22.88426,78.45494],[20.8119,78.25463],[21.41611,77.93504],[20.72601,77.67704],[22.49032,77.44493],[24.72412,77.85385]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Norway","sov_a3":"NOR","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":null,"admin":"Norway","adm0_a3":"NOR","geou_dif":0,"geounit":"Norway","gu_a3":"NOR","su_dif":0,"subunit":"Norway","su_a3":"NOR","brk_diff":0,"name":"Norway","name_long":"Norway","brk_a3":"NOR","brk_name":"Norway","brk_group":null,"abbrev":"Nor.","postal":"N","formal_en":"Kingdom of Norway","formal_fr":null,"name_ciawf":"Norway","note_adm0":null,"note_brk":null,"name_sort":"Norway","name_alt":null,"mapcolor7":5,"mapcolor8":3,"mapcolor9":8,"mapcolor13":12,"pop_est":5347896,"pop_rank":13,"pop_year":2019,"gdp_md":403336,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"-99","iso_a2":"-99","iso_a2_eh":"NO","iso_a3":"-99","iso_a3_eh":"NOR","iso_n3":"-99","iso_n3_eh":"578","un_a3":"-99","wb_a2":"-99","wb_a3":"-99","woe_id":-90,"woe_id_eh":23424910,"woe_note":"Does not include Svalbard, Jan Mayen, or Bouvet Islands (28289410).","adm0_iso":"NOR","adm0_diff":null,"adm0_tlc":"NOR","adm0_a3_us":"NOR","adm0_a3_fr":"NOR","adm0_a3_ru":"NOR","adm0_a3_es":"NOR","adm0_a3_cn":"NOR","adm0_a3_tw":"NOR","adm0_a3_in":"NOR","adm0_a3_np":"NOR","adm0_a3_pk":"NOR","adm0_a3_de":"NOR","adm0_a3_gb":"NOR","adm0_a3_br":"NOR","adm0_a3_il":"NOR","adm0_a3_ps":"NOR","adm0_a3_sa":"NOR","adm0_a3_eg":"NOR","adm0_a3_ma":"NOR","adm0_a3_pt":"NOR","adm0_a3_ar":"NOR","adm0_a3_jp":"NOR","adm0_a3_ko":"NOR","adm0_a3_vn":"NOR","adm0_a3_tr":"NOR","adm0_a3_id":"NOR","adm0_a3_pl":"NOR","adm0_a3_gr":"NOR","adm0_a3_it":"NOR","adm0_a3_nl":"NOR","adm0_a3_se":"NOR","adm0_a3_bd":"NOR","adm0_a3_ua":"NOR","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":7,"label_x":9.679975,"label_y":61.357092,"ne_id":1159321109,"wikidataid":"Q20","name_ar":"النرويج","name_bn":"নরওয়ে","name_de":"Norwegen","name_en":"Norway","name_es":"Noruega","name_fa":"نروژ","name_fr":"Norvège","name_el":"Νορβηγία","name_he":"נורווגיה","name_hi":"नॉर्वे","name_hu":"Norvégia","name_id":"Norwegia","name_it":"Norvegia","name_ja":"ノルウェー","name_ko":"노르웨이","name_nl":"Noorwegen","name_pl":"Norwegia","name_pt":"Noruega","name_ru":"Норвегия","name_sv":"Norge","name_tr":"Norveç","name_uk":"Норвегія","name_ur":"ناروے","name_vi":"Na Uy","name_zh":"挪威","name_zht":"挪威","fclass_iso":"Unrecognized","tlc_diff":null,"fclass_tlc":"Unrecognized","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"NOR.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[11.027369,58.856149],[11.787942,57.441817],[12.625101,56.30708],[12.942911,55.361737],[14.100721,55.407781],[14.666681,56.200885],[15.879786,56.104302],[16.44771,57.041118],[16.829185,58.719827],[17.869225,58.953766],[18.787722,60.081914],[17.831346,60.636583],[17.119555,61.341166],[17.847779,62.7494],[19.778876,63.609554],[21.369631,64.413588],[21.213517,65.026005],[22.183173,65.723741],[23.903379,66.006927],[23.56588,66.396051],[23.539473,67.936009],[21.978535,68.616846],[20.645593,69.106247],[20.025269,69.065139],[19.87856,68.407194],[17.993868,68.567391],[17.729182,68.010552],[16.768879,68.013937],[16.108712,67.302456],[15.108411,66.193867],[13.55569,64.787028],[13.919905,64.445421],[13.571916,64.049114],[12.579935,64.066219],[11.930569,63.128318],[11.992064,61.800362],[12.631147,61.293572],[12.300366,60.117933],[11.468272,59.432393],[11.027369,58.856149]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Sweden","sov_a3":"SWE","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Sweden","adm0_a3":"SWE","geou_dif":0,"geounit":"Sweden","gu_a3":"SWE","su_dif":0,"subunit":"Sweden","su_a3":"SWE","brk_diff":0,"name":"Sweden","name_long":"Sweden","brk_a3":"SWE","brk_name":"Sweden","brk_group":null,"abbrev":"Swe.","postal":"S","formal_en":"Kingdom of Sweden","formal_fr":null,"name_ciawf":"Sweden","note_adm0":null,"note_brk":null,"name_sort":"Sweden","name_alt":null,"mapcolor7":1,"mapcolor8":4,"mapcolor9":2,"mapcolor13":4,"pop_est":10285453,"pop_rank":14,"pop_year":2019,"gdp_md":530883,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"SW","iso_a2":"SE","iso_a2_eh":"SE","iso_a3":"SWE","iso_a3_eh":"SWE","iso_n3":"752","iso_n3_eh":"752","un_a3":"752","wb_a2":"SE","wb_a3":"SWE","woe_id":23424954,"woe_id_eh":23424954,"woe_note":"Exact WOE match as country","adm0_iso":"SWE","adm0_diff":null,"adm0_tlc":"SWE","adm0_a3_us":"SWE","adm0_a3_fr":"SWE","adm0_a3_ru":"SWE","adm0_a3_es":"SWE","adm0_a3_cn":"SWE","adm0_a3_tw":"SWE","adm0_a3_in":"SWE","adm0_a3_np":"SWE","adm0_a3_pk":"SWE","adm0_a3_de":"SWE","adm0_a3_gb":"SWE","adm0_a3_br":"SWE","adm0_a3_il":"SWE","adm0_a3_ps":"SWE","adm0_a3_sa":"SWE","adm0_a3_eg":"SWE","adm0_a3_ma":"SWE","adm0_a3_pt":"SWE","adm0_a3_ar":"SWE","adm0_a3_jp":"SWE","adm0_a3_ko":"SWE","adm0_a3_vn":"SWE","adm0_a3_tr":"SWE","adm0_a3_id":"SWE","adm0_a3_pl":"SWE","adm0_a3_gr":"SWE","adm0_a3_it":"SWE","adm0_a3_nl":"SWE","adm0_a3_se":"SWE","adm0_a3_bd":"SWE","adm0_a3_ua":"SWE","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2,"max_label":7,"label_x":19.01705,"label_y":65.85918,"ne_id":1159321287,"wikidataid":"Q34","name_ar":"السويد","name_bn":"সুইডেন","name_de":"Schweden","name_en":"Sweden","name_es":"Suecia","name_fa":"سوئد","name_fr":"Suède","name_el":"Σουηδία","name_he":"שוודיה","name_hi":"स्वीडन","name_hu":"Svédország","name_id":"Swedia","name_it":"Svezia","name_ja":"スウェーデン","name_ko":"스웨덴","name_nl":"Zweden","name_pl":"Szwecja","name_pt":"Suécia","name_ru":"Швеция","name_sv":"Sverige","name_tr":"İsveç","name_uk":"Швеція","name_ur":"سویڈن","name_vi":"Thụy Điển","name_zh":"瑞典","name_zht":"瑞典","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"SWE.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[28.59193,69.064777],[29.015573,69.766491],[27.732292,70.164193],[26.179622,69.825299],[25.689213,69.092114],[24.735679,68.649557],[23.66205,68.891247],[22.356238,68.841741],[21.244936,69.370443],[20.645593,69.106247],[21.978535,68.616846],[23.539473,67.936009],[23.56588,66.396051],[23.903379,66.006927],[25.294043,65.534346],[25.398068,65.111427],[24.730512,64.902344],[22.442744,63.81781],[21.536029,63.189735],[21.059211,62.607393],[21.544866,61.705329],[21.322244,60.72017],[22.290764,60.391921],[22.869695,59.846373],[24.496624,60.057316],[26.255173,60.423961],[28.069998,60.503517],[28.070002,60.503519],[28.07,60.50352],[30.211107,61.780028],[31.139991,62.357693],[31.516092,62.867687],[30.035872,63.552814],[30.444685,64.204453],[29.54443,64.948672],[30.21765,65.80598],[29.054589,66.944286],[29.977426,67.698297],[28.445944,68.364613],[28.59193,69.064777]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Finland","sov_a3":"FI1","adm0_dif":1,"level":2,"type":"Country","tlc":"1","admin":"Finland","adm0_a3":"FIN","geou_dif":0,"geounit":"Finland","gu_a3":"FIN","su_dif":0,"subunit":"Finland","su_a3":"FIN","brk_diff":0,"name":"Finland","name_long":"Finland","brk_a3":"FIN","brk_name":"Finland","brk_group":null,"abbrev":"Fin.","postal":"FIN","formal_en":"Republic of Finland","formal_fr":null,"name_ciawf":"Finland","note_adm0":null,"note_brk":null,"name_sort":"Finland","name_alt":null,"mapcolor7":4,"mapcolor8":1,"mapcolor9":4,"mapcolor13":6,"pop_est":5520314,"pop_rank":13,"pop_year":2019,"gdp_md":269296,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"FI","iso_a2":"FI","iso_a2_eh":"FI","iso_a3":"FIN","iso_a3_eh":"FIN","iso_n3":"246","iso_n3_eh":"246","un_a3":"246","wb_a2":"FI","wb_a3":"FIN","woe_id":23424812,"woe_id_eh":23424812,"woe_note":"Exact WOE match as country","adm0_iso":"FIN","adm0_diff":null,"adm0_tlc":"FIN","adm0_a3_us":"FIN","adm0_a3_fr":"FIN","adm0_a3_ru":"FIN","adm0_a3_es":"FIN","adm0_a3_cn":"FIN","adm0_a3_tw":"FIN","adm0_a3_in":"FIN","adm0_a3_np":"FIN","adm0_a3_pk":"FIN","adm0_a3_de":"FIN","adm0_a3_gb":"FIN","adm0_a3_br":"FIN","adm0_a3_il":"FIN","adm0_a3_ps":"FIN","adm0_a3_sa":"FIN","adm0_a3_eg":"FIN","adm0_a3_ma":"FIN","adm0_a3_pt":"FIN","adm0_a3_ar":"FIN","adm0_a3_jp":"FIN","adm0_a3_ko":"FIN","adm0_a3_vn":"FIN","adm0_a3_tr":"FIN","adm0_a3_id":"FIN","adm0_a3_pl":"FIN","adm0_a3_gr":"FIN","adm0_a3_it":"FIN","adm0_a3_nl":"FIN","adm0_a3_se":"FIN","adm0_a3_bd":"FIN","adm0_a3_ua":"FIN","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":27.276449,"label_y":63.252361,"ne_id":1159320623,"wikidataid":"Q33","name_ar":"فنلندا","name_bn":"ফিনল্যান্ড","name_de":"Finnland","name_en":"Finland","name_es":"Finlandia","name_fa":"فنلاند","name_fr":"Finlande","name_el":"Φινλανδία","name_he":"פינלנד","name_hi":"फ़िनलैण्ड","name_hu":"Finnország","name_id":"Finlandia","name_it":"Finlandia","name_ja":"フィンランド","name_ko":"핀란드","name_nl":"Finland","name_pl":"Finlandia","name_pt":"Finlândia","name_ru":"Финляндия","name_sv":"Finland","name_tr":"Finlandiya","name_uk":"Фінляндія","name_ur":"فن لینڈ","name_vi":"Phần Lan","name_zh":"芬兰","name_zht":"芬蘭","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"FIN.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[6.043073,50.128052],[5.782417,50.090328],[5.674052,49.529484],[5.897759,49.442667],[6.18632,49.463803],[6.242751,49.902226],[6.043073,50.128052]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Luxembourg","sov_a3":"LUX","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Luxembourg","adm0_a3":"LUX","geou_dif":0,"geounit":"Luxembourg","gu_a3":"LUX","su_dif":0,"subunit":"Luxembourg","su_a3":"LUX","brk_diff":0,"name":"Luxembourg","name_long":"Luxembourg","brk_a3":"LUX","brk_name":"Luxembourg","brk_group":null,"abbrev":"Lux.","postal":"L","formal_en":"Grand Duchy of Luxembourg","formal_fr":null,"name_ciawf":"Luxembourg","note_adm0":null,"note_brk":null,"name_sort":"Luxembourg","name_alt":null,"mapcolor7":1,"mapcolor8":7,"mapcolor9":3,"mapcolor13":7,"pop_est":619896,"pop_rank":11,"pop_year":2019,"gdp_md":71104,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"LU","iso_a2":"LU","iso_a2_eh":"LU","iso_a3":"LUX","iso_a3_eh":"LUX","iso_n3":"442","iso_n3_eh":"442","un_a3":"442","wb_a2":"LU","wb_a3":"LUX","woe_id":23424881,"woe_id_eh":23424881,"woe_note":"Exact WOE match as country","adm0_iso":"LUX","adm0_diff":null,"adm0_tlc":"LUX","adm0_a3_us":"LUX","adm0_a3_fr":"LUX","adm0_a3_ru":"LUX","adm0_a3_es":"LUX","adm0_a3_cn":"LUX","adm0_a3_tw":"LUX","adm0_a3_in":"LUX","adm0_a3_np":"LUX","adm0_a3_pk":"LUX","adm0_a3_de":"LUX","adm0_a3_gb":"LUX","adm0_a3_br":"LUX","adm0_a3_il":"LUX","adm0_a3_ps":"LUX","adm0_a3_sa":"LUX","adm0_a3_eg":"LUX","adm0_a3_ma":"LUX","adm0_a3_pt":"LUX","adm0_a3_ar":"LUX","adm0_a3_jp":"LUX","adm0_a3_ko":"LUX","adm0_a3_vn":"LUX","adm0_a3_tr":"LUX","adm0_a3_id":"LUX","adm0_a3_pl":"LUX","adm0_a3_gr":"LUX","adm0_a3_it":"LUX","adm0_a3_nl":"LUX","adm0_a3_se":"LUX","adm0_a3_bd":"LUX","adm0_a3_ua":"LUX","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":10,"long_len":10,"abbrev_len":4,"tiny":5,"homepart":1,"min_zoom":0,"min_label":5.7,"max_label":10,"label_x":6.07762,"label_y":49.733732,"ne_id":1159321031,"wikidataid":"Q32","name_ar":"لوكسمبورغ","name_bn":"লুক্সেমবুর্গ","name_de":"Luxemburg","name_en":"Luxembourg","name_es":"Luxemburgo","name_fa":"لوکزامبورگ","name_fr":"Luxembourg","name_el":"Λουξεμβούργο","name_he":"לוקסמבורג","name_hi":"लक्ज़मबर्ग","name_hu":"Luxemburg","name_id":"Luksemburg","name_it":"Lussemburgo","name_ja":"ルクセンブルク","name_ko":"룩셈부르크","name_nl":"Luxemburg","name_pl":"Luksemburg","name_pt":"Luxemburgo","name_ru":"Люксембург","name_sv":"Luxemburg","name_tr":"Lüksemburg","name_uk":"Люксембург","name_ur":"لکسمبرگ","name_vi":"Luxembourg","name_zh":"卢森堡","name_zht":"盧森堡","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"LUX.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[6.156658,50.803721],[5.606976,51.037298],[4.973991,51.475024],[4.047071,51.267259],[3.314971,51.345755],[3.315011,51.345777],[3.314971,51.345781],[2.513573,51.148506],[2.658422,50.796848],[3.123252,50.780363],[3.588184,50.378992],[4.286023,49.907497],[4.799222,49.985373],[5.674052,49.529484],[5.782417,50.090328],[6.043073,50.128052],[6.156658,50.803721]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"Belgium","sov_a3":"BEL","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Belgium","adm0_a3":"BEL","geou_dif":0,"geounit":"Belgium","gu_a3":"BEL","su_dif":0,"subunit":"Belgium","su_a3":"BEL","brk_diff":0,"name":"Belgium","name_long":"Belgium","brk_a3":"BEL","brk_name":"Belgium","brk_group":null,"abbrev":"Belg.","postal":"B","formal_en":"Kingdom of Belgium","formal_fr":null,"name_ciawf":"Belgium","note_adm0":null,"note_brk":null,"name_sort":"Belgium","name_alt":null,"mapcolor7":3,"mapcolor8":2,"mapcolor9":1,"mapcolor13":8,"pop_est":11484055,"pop_rank":14,"pop_year":2019,"gdp_md":533097,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"BE","iso_a2":"BE","iso_a2_eh":"BE","iso_a3":"BEL","iso_a3_eh":"BEL","iso_n3":"056","iso_n3_eh":"056","un_a3":"056","wb_a2":"BE","wb_a3":"BEL","woe_id":23424757,"woe_id_eh":23424757,"woe_note":"Exact WOE match as country","adm0_iso":"BEL","adm0_diff":null,"adm0_tlc":"BEL","adm0_a3_us":"BEL","adm0_a3_fr":"BEL","adm0_a3_ru":"BEL","adm0_a3_es":"BEL","adm0_a3_cn":"BEL","adm0_a3_tw":"BEL","adm0_a3_in":"BEL","adm0_a3_np":"BEL","adm0_a3_pk":"BEL","adm0_a3_de":"BEL","adm0_a3_gb":"BEL","adm0_a3_br":"BEL","adm0_a3_il":"BEL","adm0_a3_ps":"BEL","adm0_a3_sa":"BEL","adm0_a3_eg":"BEL","adm0_a3_ma":"BEL","adm0_a3_pt":"BEL","adm0_a3_ar":"BEL","adm0_a3_jp":"BEL","adm0_a3_ko":"BEL","adm0_a3_vn":"BEL","adm0_a3_tr":"BEL","adm0_a3_id":"BEL","adm0_a3_pl":"BEL","adm0_a3_gr":"BEL","adm0_a3_it":"BEL","adm0_a3_nl":"BEL","adm0_a3_se":"BEL","adm0_a3_bd":"BEL","adm0_a3_ua":"BEL","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":4.800448,"label_y":50.785392,"ne_id":1159320389,"wikidataid":"Q31","name_ar":"بلجيكا","name_bn":"বেলজিয়াম","name_de":"Belgien","name_en":"Belgium","name_es":"Bélgica","name_fa":"بلژیک","name_fr":"Belgique","name_el":"Βέλγιο","name_he":"בלגיה","name_hi":"बेल्जियम","name_hu":"Belgium","name_id":"Belgia","name_it":"Belgio","name_ja":"ベルギー","name_ko":"벨기에","name_nl":"België","name_pl":"Belgia","name_pt":"Bélgica","name_ru":"Бельгия","name_sv":"Belgien","name_tr":"Belçika","name_uk":"Бельгія","name_ur":"بلجئیم","name_vi":"Bỉ","name_zh":"比利时","name_zht":"比利時","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"BEL.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[21.02004,40.842727],[20.605182,41.086226],[20.463175,41.515089],[20.590247,41.855404],[20.590247,41.855409],[20.52295,42.21787],[20.283755,42.32026],[20.0707,42.58863],[19.801613,42.500093],[19.738051,42.688247],[19.304486,42.195745],[19.371768,41.877551],[19.371769,41.877548],[19.540027,41.719986],[19.40355,41.409566],[19.319059,40.72723],[19.406082,40.250773],[19.960002,39.915006],[19.98,39.694993],[20.150016,39.624998],[20.615,40.110007],[20.674997,40.435],[20.99999,40.580004],[21.02004,40.842727]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Albania","sov_a3":"ALB","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Albania","adm0_a3":"ALB","geou_dif":0,"geounit":"Albania","gu_a3":"ALB","su_dif":0,"subunit":"Albania","su_a3":"ALB","brk_diff":0,"name":"Albania","name_long":"Albania","brk_a3":"ALB","brk_name":"Albania","brk_group":null,"abbrev":"Alb.","postal":"AL","formal_en":"Republic of Albania","formal_fr":null,"name_ciawf":"Albania","note_adm0":null,"note_brk":null,"name_sort":"Albania","name_alt":null,"mapcolor7":1,"mapcolor8":4,"mapcolor9":1,"mapcolor13":6,"pop_est":2854191,"pop_rank":12,"pop_year":2019,"gdp_md":15279,"gdp_year":2019,"economy":"6. Developing region","income_grp":"4. Lower middle income","fips_10":"AL","iso_a2":"AL","iso_a2_eh":"AL","iso_a3":"ALB","iso_a3_eh":"ALB","iso_n3":"008","iso_n3_eh":"008","un_a3":"008","wb_a2":"AL","wb_a3":"ALB","woe_id":23424742,"woe_id_eh":23424742,"woe_note":"Exact WOE match as country","adm0_iso":"ALB","adm0_diff":null,"adm0_tlc":"ALB","adm0_a3_us":"ALB","adm0_a3_fr":"ALB","adm0_a3_ru":"ALB","adm0_a3_es":"ALB","adm0_a3_cn":"ALB","adm0_a3_tw":"ALB","adm0_a3_in":"ALB","adm0_a3_np":"ALB","adm0_a3_pk":"ALB","adm0_a3_de":"ALB","adm0_a3_gb":"ALB","adm0_a3_br":"ALB","adm0_a3_il":"ALB","adm0_a3_ps":"ALB","adm0_a3_sa":"ALB","adm0_a3_eg":"ALB","adm0_a3_ma":"ALB","adm0_a3_pt":"ALB","adm0_a3_ar":"ALB","adm0_a3_jp":"ALB","adm0_a3_ko":"ALB","adm0_a3_vn":"ALB","adm0_a3_tr":"ALB","adm0_a3_id":"ALB","adm0_a3_pl":"ALB","adm0_a3_gr":"ALB","adm0_a3_it":"ALB","adm0_a3_nl":"ALB","adm0_a3_se":"ALB","adm0_a3_bd":"ALB","adm0_a3_ua":"ALB","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":5,"max_label":10,"label_x":20.11384,"label_y":40.654855,"ne_id":1159320325,"wikidataid":"Q222","name_ar":"ألبانيا","name_bn":"আলবেনিয়া","name_de":"Albanien","name_en":"Albania","name_es":"Albania","name_fa":"آلبانی","name_fr":"Albanie","name_el":"Αλβανία","name_he":"אלבניה","name_hi":"अल्बानिया","name_hu":"Albánia","name_id":"Albania","name_it":"Albania","name_ja":"アルバニア","name_ko":"알바니아","name_nl":"Albanië","name_pl":"Albania","name_pt":"Albânia","name_ru":"Албания","name_sv":"Albanien","name_tr":"Arnavutluk","name_uk":"Албанія","name_ur":"البانیا","name_vi":"Albania","name_zh":"阿尔巴尼亚","name_zht":"阿爾巴尼亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"ALB.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[20.590247,41.855409],[20.71731,41.84711],[20.76216,42.05186],[21.3527,42.2068],[21.576636,42.245224],[21.54332,42.32025],[21.66292,42.43922],[21.77505,42.6827],[21.63302,42.67717],[21.43866,42.86255],[21.27421,42.90959],[21.143395,43.068685],[20.95651,43.13094],[20.81448,43.27205],[20.63508,43.21671],[20.49679,42.88469],[20.25758,42.81275],[20.0707,42.58863],[20.283755,42.32026],[20.52295,42.21787],[20.590247,41.855409]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Kosovo","sov_a3":"KOS","adm0_dif":0,"level":2,"type":"Disputed","tlc":"1","admin":"Kosovo","adm0_a3":"KOS","geou_dif":0,"geounit":"Kosovo","gu_a3":"KOS","su_dif":0,"subunit":"Kosovo","su_a3":"KOS","brk_diff":0,"name":"Kosovo","name_long":"Kosovo","brk_a3":"KOS","brk_name":"Kosovo","brk_group":null,"abbrev":"Kos.","postal":"KO","formal_en":"Republic of Kosovo","formal_fr":null,"name_ciawf":"Kosovo","note_adm0":null,"note_brk":null,"name_sort":"Kosovo","name_alt":null,"mapcolor7":2,"mapcolor8":2,"mapcolor9":3,"mapcolor13":11,"pop_est":1794248,"pop_rank":12,"pop_year":2019,"gdp_md":7926,"gdp_year":2019,"economy":"6. Developing region","income_grp":"4. Lower middle income","fips_10":"KV","iso_a2":"-99","iso_a2_eh":"XK","iso_a3":"-99","iso_a3_eh":"-99","iso_n3":"-99","iso_n3_eh":"-99","un_a3":"-099","wb_a2":"KV","wb_a3":"KSV","woe_id":-90,"woe_id_eh":29389201,"woe_note":"Subunit of Serbia in WOE still; should include 29389201, 29389207, 29389218, 29389209 and 29389214.","adm0_iso":"SRB","adm0_diff":"1","adm0_tlc":"KOS","adm0_a3_us":"KOS","adm0_a3_fr":"KOS","adm0_a3_ru":"SRB","adm0_a3_es":"SRB","adm0_a3_cn":"SRB","adm0_a3_tw":"KOS","adm0_a3_in":"SRB","adm0_a3_np":"SRB","adm0_a3_pk":"KOS","adm0_a3_de":"KOS","adm0_a3_gb":"SRB","adm0_a3_br":"KOS","adm0_a3_il":"KOS","adm0_a3_ps":"SRB","adm0_a3_sa":"KOS","adm0_a3_eg":"KOS","adm0_a3_ma":"SRB","adm0_a3_pt":"KOS","adm0_a3_ar":"SRB","adm0_a3_jp":"KOS","adm0_a3_ko":"KOS","adm0_a3_vn":"SRB","adm0_a3_tr":"KOS","adm0_a3_id":"SRB","adm0_a3_pl":"KOS","adm0_a3_gr":"SRB","adm0_a3_it":"KOS","adm0_a3_nl":"KOS","adm0_a3_se":"KOS","adm0_a3_bd":"KOS","adm0_a3_ua":"SRB","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":5,"max_label":10,"label_x":20.860719,"label_y":42.593587,"ne_id":1159321007,"wikidataid":"Q1246","name_ar":"كوسوفو","name_bn":"কসোভো","name_de":"Kosovo","name_en":"Kosovo","name_es":"Kosovo","name_fa":"کوزووو","name_fr":"Kosovo","name_el":"Κοσσυφοπέδιο","name_he":"קוסובו","name_hi":"कोसोवो गणराज्य","name_hu":"Koszovó","name_id":"Kosovo","name_it":"Kosovo","name_ja":"コソボ共和国","name_ko":"코소보","name_nl":"Kosovo","name_pl":"Kosowo","name_pt":"Kosovo","name_ru":"Республика Косово","name_sv":"Kosovo","name_tr":"Kosova","name_uk":"Косово","name_ur":"کوسووہ","name_vi":"Kosovo","name_zh":"科索沃","name_zht":"科索沃","fclass_iso":"Unrecognized","tlc_diff":"1","fclass_tlc":"Admin-0 country","fclass_us":"Admin-0 country","fclass_fr":"Admin-0 country","fclass_ru":"Admin-1 region","fclass_es":"Unrecognized","fclass_cn":"Unrecognized","fclass_tw":"Admin-0 country","fclass_in":"Admin-1 region","fclass_np":"Unrecognized","fclass_pk":"Admin-0 country","fclass_de":"Admin-0 country","fclass_gb":"Admin-0 country","fclass_br":"Unrecognized","fclass_il":"Admin-0 country","fclass_ps":"Unrecognized","fclass_sa":"Admin-0 country","fclass_eg":"Admin-0 country","fclass_ma":"Unrecognized","fclass_pt":"Admin-0 country","fclass_ar":"Unrecognized","fclass_jp":"Admin-0 country","fclass_ko":"Admin-0 country","fclass_vn":"Unrecognized","fclass_tr":"Admin-0 country","fclass_id":"Unrecognized","fclass_pl":"Admin-0 country","fclass_gr":"Unrecognized","fclass_it":"Admin-0 country","fclass_nl":"Admin-0 country","fclass_se":"Admin-0 country","fclass_bd":"Admin-0 country","fclass_ua":"Unrecognized","filename":"kosovo.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-7.453726,37.097788],[-6.520191,36.942913],[-6.236694,36.367677],[-5.866432,36.029817],[-5.37716,35.94685],[-4.995219,36.324708],[-4.368901,36.677839],[-3.415781,36.6589],[-2.146453,36.674144],[-1.438382,37.443064],[-0.683389,37.642354],[-0.467124,38.292366],[0.111291,38.738514],[-0.278711,39.309978],[0.106692,40.123934],[0.721331,40.678318],[0.810525,41.014732],[2.091842,41.226089],[3.039484,41.89212],[2.985999,42.473015],[1.826793,42.343385],[0.701591,42.795734],[0.338047,42.579546],[-1.502771,43.034014],[-1.901351,43.422802],[-3.517532,43.455901],[-4.347843,43.403449],[-5.411886,43.57424],[-6.754492,43.567909],[-7.97819,43.748338],[-9.392884,43.026625],[-8.984433,42.592775],[-9.034818,41.880571],[-8.671946,42.134689],[-8.263857,42.280469],[-8.013175,41.790886],[-7.422513,41.792075],[-7.251309,41.918346],[-6.668606,41.883387],[-6.389088,41.381815],[-6.851127,41.111083],[-6.86402,40.330872],[-7.026413,40.184524],[-7.066592,39.711892],[-7.498632,39.629571],[-7.098037,39.030073],[-7.374092,38.373059],[-7.029281,38.075764],[-7.166508,37.803894],[-7.537105,37.428904],[-7.453726,37.097788]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"Spain","sov_a3":"ESP","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Spain","adm0_a3":"ESP","geou_dif":0,"geounit":"Spain","gu_a3":"ESP","su_dif":0,"subunit":"Spain","su_a3":"ESP","brk_diff":0,"name":"Spain","name_long":"Spain","brk_a3":"ESP","brk_name":"Spain","brk_group":null,"abbrev":"Sp.","postal":"E","formal_en":"Kingdom of Spain","formal_fr":null,"name_ciawf":"Spain","note_adm0":null,"note_brk":null,"name_sort":"Spain","name_alt":null,"mapcolor7":4,"mapcolor8":5,"mapcolor9":5,"mapcolor13":5,"pop_est":47076781,"pop_rank":15,"pop_year":2019,"gdp_md":1393490,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"SP","iso_a2":"ES","iso_a2_eh":"ES","iso_a3":"ESP","iso_a3_eh":"ESP","iso_n3":"724","iso_n3_eh":"724","un_a3":"724","wb_a2":"ES","wb_a3":"ESP","woe_id":23424950,"woe_id_eh":23424950,"woe_note":"Exact WOE match as country","adm0_iso":"ESP","adm0_diff":null,"adm0_tlc":"ESP","adm0_a3_us":"ESP","adm0_a3_fr":"ESP","adm0_a3_ru":"ESP","adm0_a3_es":"ESP","adm0_a3_cn":"ESP","adm0_a3_tw":"ESP","adm0_a3_in":"ESP","adm0_a3_np":"ESP","adm0_a3_pk":"ESP","adm0_a3_de":"ESP","adm0_a3_gb":"ESP","adm0_a3_br":"ESP","adm0_a3_il":"ESP","adm0_a3_ps":"ESP","adm0_a3_sa":"ESP","adm0_a3_eg":"ESP","adm0_a3_ma":"ESP","adm0_a3_pt":"ESP","adm0_a3_ar":"ESP","adm0_a3_jp":"ESP","adm0_a3_ko":"ESP","adm0_a3_vn":"ESP","adm0_a3_tr":"ESP","adm0_a3_id":"ESP","adm0_a3_pl":"ESP","adm0_a3_gr":"ESP","adm0_a3_it":"ESP","adm0_a3_nl":"ESP","adm0_a3_se":"ESP","adm0_a3_bd":"ESP","adm0_a3_ua":"ESP","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":5,"long_len":5,"abbrev_len":3,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2,"max_label":7,"label_x":-3.464718,"label_y":40.090953,"ne_id":1159320587,"wikidataid":"Q29","name_ar":"إسبانيا","name_bn":"স্পেন","name_de":"Spanien","name_en":"Spain","name_es":"España","name_fa":"اسپانیا","name_fr":"Espagne","name_el":"Ισπανία","name_he":"ספרד","name_hi":"स्पेन","name_hu":"Spanyolország","name_id":"Spanyol","name_it":"Spagna","name_ja":"スペイン","name_ko":"스페인","name_nl":"Spanje","name_pl":"Hiszpania","name_pt":"Espanha","name_ru":"Испания","name_sv":"Spanien","name_tr":"İspanya","name_uk":"Іспанія","name_ur":"ہسپانیہ","name_vi":"Tây Ban Nha","name_zh":"西班牙","name_zht":"西班牙","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"ESP.geojson"}},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[9.921906,54.983104],[9.649985,55.469999],[10.369993,56.190007],[10.667804,56.081383],[10.912182,56.458621],[10.369993,56.609982],[10.25,56.890016],[10.546106,57.215733],[10.580006,57.730017],[9.775559,57.447941],[9.424469,57.172066],[8.543438,57.110003],[8.256582,56.809969],[8.089977,56.540012],[8.120311,55.517723],[8.526229,54.962744],[9.282049,54.830865],[9.921906,54.983104]]],[[[12.370904,56.111407],[10.903914,55.779955],[11.043543,55.364864],[12.089991,54.800015],[12.690006,55.609991],[12.370904,56.111407]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":4,"sovereignt":"Denmark","sov_a3":"DN1","adm0_dif":1,"level":2,"type":"Country","tlc":"1","admin":"Denmark","adm0_a3":"DNK","geou_dif":0,"geounit":"Denmark","gu_a3":"DNK","su_dif":0,"subunit":"Denmark","su_a3":"DNK","brk_diff":0,"name":"Denmark","name_long":"Denmark","brk_a3":"DNK","brk_name":"Denmark","brk_group":null,"abbrev":"Den.","postal":"DK","formal_en":"Kingdom of Denmark","formal_fr":null,"name_ciawf":"Denmark","note_adm0":null,"note_brk":null,"name_sort":"Denmark","name_alt":null,"mapcolor7":4,"mapcolor8":1,"mapcolor9":3,"mapcolor13":12,"pop_est":5818553,"pop_rank":13,"pop_year":2019,"gdp_md":350104,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"DA","iso_a2":"DK","iso_a2_eh":"DK","iso_a3":"DNK","iso_a3_eh":"DNK","iso_n3":"208","iso_n3_eh":"208","un_a3":"208","wb_a2":"DK","wb_a3":"DNK","woe_id":23424796,"woe_id_eh":23424796,"woe_note":"Exact WOE match as country","adm0_iso":"DNK","adm0_diff":null,"adm0_tlc":"DNK","adm0_a3_us":"DNK","adm0_a3_fr":"DNK","adm0_a3_ru":"DNK","adm0_a3_es":"DNK","adm0_a3_cn":"DNK","adm0_a3_tw":"DNK","adm0_a3_in":"DNK","adm0_a3_np":"DNK","adm0_a3_pk":"DNK","adm0_a3_de":"DNK","adm0_a3_gb":"DNK","adm0_a3_br":"DNK","adm0_a3_il":"DNK","adm0_a3_ps":"DNK","adm0_a3_sa":"DNK","adm0_a3_eg":"DNK","adm0_a3_ma":"DNK","adm0_a3_pt":"DNK","adm0_a3_ar":"DNK","adm0_a3_jp":"DNK","adm0_a3_ko":"DNK","adm0_a3_vn":"DNK","adm0_a3_tr":"DNK","adm0_a3_id":"DNK","adm0_a3_pl":"DNK","adm0_a3_gr":"DNK","adm0_a3_it":"DNK","adm0_a3_nl":"DNK","adm0_a3_se":"DNK","adm0_a3_bd":"DNK","adm0_a3_ua":"DNK","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":9.018163,"label_y":55.966965,"ne_id":1159320547,"wikidataid":"Q35","name_ar":"الدنمارك","name_bn":"ডেনমার্ক","name_de":"Dänemark","name_en":"Denmark","name_es":"Dinamarca","name_fa":"دانمارک","name_fr":"Danemark","name_el":"Δανία","name_he":"דנמרק","name_hi":"डेनमार्क","name_hu":"Dánia","name_id":"Denmark","name_it":"Danimarca","name_ja":"デンマーク","name_ko":"덴마크","name_nl":"Denemarken","name_pl":"Dania","name_pt":"Dinamarca","name_ru":"Дания","name_sv":"Danmark","name_tr":"Danimarka","name_uk":"Данія","name_ur":"ڈنمارک","name_vi":"Đan Mạch","name_zh":"丹麦","name_zht":"丹麥","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"DNK.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[28.233554,45.488283],[28.054443,45.944586],[28.160018,46.371563],[28.12803,46.810476],[27.551166,47.405117],[27.233873,47.826771],[26.924176,48.123264],[26.619337,48.220726],[26.19745,48.220881],[25.945941,47.987149],[25.207743,47.891056],[24.866317,47.737526],[24.402056,47.981878],[23.760958,47.985598],[23.142236,48.096341],[22.710531,47.882194],[22.099768,47.672439],[21.626515,46.994238],[21.021952,46.316088],[20.220192,46.127469],[20.762175,45.734573],[20.874313,45.416375],[21.483526,45.18117],[21.562023,44.768947],[22.145088,44.478422],[22.459022,44.702517],[22.705726,44.578003],[22.474008,44.409228],[22.65715,44.234923],[22.944832,43.823785],[23.332302,43.897011],[24.100679,43.741051],[25.569272,43.688445],[26.065159,43.943494],[27.2424,44.175986],[27.970107,43.812468],[28.558081,43.707462],[28.837858,44.913874],[29.141612,44.82021],[29.626543,45.035391],[29.603289,45.293308],[29.149725,45.464925],[28.679779,45.304031],[28.233554,45.488283]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Romania","sov_a3":"ROU","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Romania","adm0_a3":"ROU","geou_dif":0,"geounit":"Romania","gu_a3":"ROU","su_dif":0,"subunit":"Romania","su_a3":"ROU","brk_diff":0,"name":"Romania","name_long":"Romania","brk_a3":"ROU","brk_name":"Romania","brk_group":null,"abbrev":"Rom.","postal":"RO","formal_en":"Romania","formal_fr":null,"name_ciawf":"Romania","note_adm0":null,"note_brk":null,"name_sort":"Romania","name_alt":null,"mapcolor7":1,"mapcolor8":4,"mapcolor9":3,"mapcolor13":13,"pop_est":19356544,"pop_rank":14,"pop_year":2019,"gdp_md":250077,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"3. Upper middle income","fips_10":"RO","iso_a2":"RO","iso_a2_eh":"RO","iso_a3":"ROU","iso_a3_eh":"ROU","iso_n3":"642","iso_n3_eh":"642","un_a3":"642","wb_a2":"RO","wb_a3":"ROM","woe_id":23424933,"woe_id_eh":23424933,"woe_note":"Exact WOE match as country","adm0_iso":"ROU","adm0_diff":null,"adm0_tlc":"ROU","adm0_a3_us":"ROU","adm0_a3_fr":"ROU","adm0_a3_ru":"ROU","adm0_a3_es":"ROU","adm0_a3_cn":"ROU","adm0_a3_tw":"ROU","adm0_a3_in":"ROU","adm0_a3_np":"ROU","adm0_a3_pk":"ROU","adm0_a3_de":"ROU","adm0_a3_gb":"ROU","adm0_a3_br":"ROU","adm0_a3_il":"ROU","adm0_a3_ps":"ROU","adm0_a3_sa":"ROU","adm0_a3_eg":"ROU","adm0_a3_ma":"ROU","adm0_a3_pt":"ROU","adm0_a3_ar":"ROU","adm0_a3_jp":"ROU","adm0_a3_ko":"ROU","adm0_a3_vn":"ROU","adm0_a3_tr":"ROU","adm0_a3_id":"ROU","adm0_a3_pl":"ROU","adm0_a3_gr":"ROU","adm0_a3_it":"ROU","adm0_a3_nl":"ROU","adm0_a3_se":"ROU","adm0_a3_bd":"ROU","adm0_a3_ua":"ROU","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":24.972624,"label_y":45.733237,"ne_id":1159321199,"wikidataid":"Q218","name_ar":"رومانيا","name_bn":"রোমানিয়া","name_de":"Rumänien","name_en":"Romania","name_es":"Rumania","name_fa":"رومانی","name_fr":"Roumanie","name_el":"Ρουμανία","name_he":"רומניה","name_hi":"रोमानिया","name_hu":"Románia","name_id":"Rumania","name_it":"Romania","name_ja":"ルーマニア","name_ko":"루마니아","name_nl":"Roemenië","name_pl":"Rumunia","name_pt":"Roménia","name_ru":"Румыния","name_sv":"Rumänien","name_tr":"Romanya","name_uk":"Румунія","name_ur":"رومانیہ","name_vi":"Romania","name_zh":"罗马尼亚","name_zht":"羅馬尼亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"ROU.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[22.085608,48.422264],[21.872236,48.319971],[20.801294,48.623854],[20.473562,48.56285],[20.239054,48.327567],[19.769471,48.202691],[19.661364,48.266615],[19.174365,48.111379],[18.777025,48.081768],[18.696513,47.880954],[17.857133,47.758429],[17.488473,47.867466],[16.979667,48.123497],[16.903754,47.714866],[16.340584,47.712902],[16.534268,47.496171],[16.202298,46.852386],[16.370505,46.841327],[16.564808,46.503751],[16.882515,46.380632],[17.630066,45.951769],[18.456062,45.759481],[18.829825,45.908872],[18.829838,45.908878],[19.596045,46.17173],[20.220192,46.127469],[21.021952,46.316088],[21.626515,46.994238],[22.099768,47.672439],[22.710531,47.882194],[22.64082,48.15024],[22.085608,48.422264]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Hungary","sov_a3":"HUN","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Hungary","adm0_a3":"HUN","geou_dif":0,"geounit":"Hungary","gu_a3":"HUN","su_dif":0,"subunit":"Hungary","su_a3":"HUN","brk_diff":0,"name":"Hungary","name_long":"Hungary","brk_a3":"HUN","brk_name":"Hungary","brk_group":null,"abbrev":"Hun.","postal":"HU","formal_en":"Republic of Hungary","formal_fr":null,"name_ciawf":"Hungary","note_adm0":null,"note_brk":null,"name_sort":"Hungary","name_alt":null,"mapcolor7":4,"mapcolor8":6,"mapcolor9":1,"mapcolor13":5,"pop_est":9769949,"pop_rank":13,"pop_year":2019,"gdp_md":163469,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"HU","iso_a2":"HU","iso_a2_eh":"HU","iso_a3":"HUN","iso_a3_eh":"HUN","iso_n3":"348","iso_n3_eh":"348","un_a3":"348","wb_a2":"HU","wb_a3":"HUN","woe_id":23424844,"woe_id_eh":23424844,"woe_note":"Exact WOE match as country","adm0_iso":"HUN","adm0_diff":null,"adm0_tlc":"HUN","adm0_a3_us":"HUN","adm0_a3_fr":"HUN","adm0_a3_ru":"HUN","adm0_a3_es":"HUN","adm0_a3_cn":"HUN","adm0_a3_tw":"HUN","adm0_a3_in":"HUN","adm0_a3_np":"HUN","adm0_a3_pk":"HUN","adm0_a3_de":"HUN","adm0_a3_gb":"HUN","adm0_a3_br":"HUN","adm0_a3_il":"HUN","adm0_a3_ps":"HUN","adm0_a3_sa":"HUN","adm0_a3_eg":"HUN","adm0_a3_ma":"HUN","adm0_a3_pt":"HUN","adm0_a3_ar":"HUN","adm0_a3_jp":"HUN","adm0_a3_ko":"HUN","adm0_a3_vn":"HUN","adm0_a3_tr":"HUN","adm0_a3_id":"HUN","adm0_a3_pl":"HUN","adm0_a3_gr":"HUN","adm0_a3_it":"HUN","adm0_a3_nl":"HUN","adm0_a3_se":"HUN","adm0_a3_bd":"HUN","adm0_a3_ua":"HUN","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":19.447867,"label_y":47.086841,"ne_id":1159320841,"wikidataid":"Q28","name_ar":"المجر","name_bn":"হাঙ্গেরি","name_de":"Ungarn","name_en":"Hungary","name_es":"Hungría","name_fa":"مجارستان","name_fr":"Hongrie","name_el":"Ουγγαρία","name_he":"הונגריה","name_hi":"हंगरी","name_hu":"Magyarország","name_id":"Hongaria","name_it":"Ungheria","name_ja":"ハンガリー","name_ko":"헝가리","name_nl":"Hongarije","name_pl":"Węgry","name_pt":"Hungria","name_ru":"Венгрия","name_sv":"Ungern","name_tr":"Macaristan","name_uk":"Угорщина","name_ur":"ہنگری","name_vi":"Hungary","name_zh":"匈牙利","name_zht":"匈牙利","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"HUN.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[22.558138,49.085738],[21.607808,49.470107],[20.887955,49.328772],[20.415839,49.431453],[19.825023,49.217125],[19.320713,49.571574],[18.909575,49.435846],[18.853144,49.49623],[18.554971,49.495015],[18.399994,49.315001],[18.170498,49.271515],[18.104973,49.043983],[17.913512,48.996493],[17.886485,48.903475],[17.545007,48.800019],[17.101985,48.816969],[16.960288,48.596982],[16.879983,48.470013],[16.979667,48.123497],[17.488473,47.867466],[17.857133,47.758429],[18.696513,47.880954],[18.777025,48.081768],[19.174365,48.111379],[19.661364,48.266615],[19.769471,48.202691],[20.239054,48.327567],[20.473562,48.56285],[20.801294,48.623854],[21.872236,48.319971],[22.085608,48.422264],[22.280842,48.825392],[22.558138,49.085738]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Slovakia","sov_a3":"SVK","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Slovakia","adm0_a3":"SVK","geou_dif":0,"geounit":"Slovakia","gu_a3":"SVK","su_dif":0,"subunit":"Slovakia","su_a3":"SVK","brk_diff":0,"name":"Slovakia","name_long":"Slovakia","brk_a3":"SVK","brk_name":"Slovakia","brk_group":null,"abbrev":"Svk.","postal":"SK","formal_en":"Slovak Republic","formal_fr":null,"name_ciawf":"Slovakia","note_adm0":null,"note_brk":null,"name_sort":"Slovak Republic","name_alt":null,"mapcolor7":2,"mapcolor8":4,"mapcolor9":4,"mapcolor13":9,"pop_est":5454073,"pop_rank":13,"pop_year":2019,"gdp_md":105079,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"LO","iso_a2":"SK","iso_a2_eh":"SK","iso_a3":"SVK","iso_a3_eh":"SVK","iso_n3":"703","iso_n3_eh":"703","un_a3":"703","wb_a2":"SK","wb_a3":"SVK","woe_id":23424877,"woe_id_eh":23424877,"woe_note":"Exact WOE match as country","adm0_iso":"SVK","adm0_diff":null,"adm0_tlc":"SVK","adm0_a3_us":"SVK","adm0_a3_fr":"SVK","adm0_a3_ru":"SVK","adm0_a3_es":"SVK","adm0_a3_cn":"SVK","adm0_a3_tw":"SVK","adm0_a3_in":"SVK","adm0_a3_np":"SVK","adm0_a3_pk":"SVK","adm0_a3_de":"SVK","adm0_a3_gb":"SVK","adm0_a3_br":"SVK","adm0_a3_il":"SVK","adm0_a3_ps":"SVK","adm0_a3_sa":"SVK","adm0_a3_eg":"SVK","adm0_a3_ma":"SVK","adm0_a3_pt":"SVK","adm0_a3_ar":"SVK","adm0_a3_jp":"SVK","adm0_a3_ko":"SVK","adm0_a3_vn":"SVK","adm0_a3_tr":"SVK","adm0_a3_id":"SVK","adm0_a3_pl":"SVK","adm0_a3_gr":"SVK","adm0_a3_it":"SVK","adm0_a3_nl":"SVK","adm0_a3_se":"SVK","adm0_a3_bd":"SVK","adm0_a3_ua":"SVK","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":8,"long_len":8,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":19.049868,"label_y":48.734044,"ne_id":1159321283,"wikidataid":"Q214","name_ar":"سلوفاكيا","name_bn":"স্লোভাকিয়া","name_de":"Slowakei","name_en":"Slovakia","name_es":"Eslovaquia","name_fa":"اسلواکی","name_fr":"Slovaquie","name_el":"Σλοβακία","name_he":"סלובקיה","name_hi":"स्लोवाकिया","name_hu":"Szlovákia","name_id":"Slowakia","name_it":"Slovacchia","name_ja":"スロバキア","name_ko":"슬로바키아","name_nl":"Slowakije","name_pl":"Słowacja","name_pt":"Eslováquia","name_ru":"Словакия","name_sv":"Slovakien","name_tr":"Slovakya","name_uk":"Словаччина","name_ur":"سلوواکیہ","name_vi":"Slovakia","name_zh":"斯洛伐克","name_zht":"斯洛伐克","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"SVK.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[23.484128,53.912498],[23.243987,54.220567],[22.731099,54.327537],[20.892245,54.312525],[19.66064,54.426084],[18.696255,54.438719],[18.620859,54.682606],[17.622832,54.851536],[16.363477,54.513159],[14.8029,54.050706],[14.119686,53.757029],[14.353315,53.248171],[14.074521,52.981263],[14.4376,52.62485],[14.685026,52.089947],[14.607098,51.745188],[15.016996,51.106674],[15.490972,50.78473],[16.238627,50.697733],[16.176253,50.422607],[16.719476,50.215747],[16.868769,50.473974],[17.554567,50.362146],[17.649445,50.049038],[18.392914,49.988629],[18.853144,49.49623],[18.909575,49.435846],[19.320713,49.571574],[19.825023,49.217125],[20.415839,49.431453],[20.887955,49.328772],[21.607808,49.470107],[22.558138,49.085738],[22.776419,49.027395],[22.51845,49.476774],[23.426508,50.308506],[23.922757,50.424881],[24.029986,50.705407],[23.527071,51.578454],[23.508002,52.023647],[23.199494,52.486977],[23.799199,52.691099],[23.804935,53.089731],[23.527536,53.470122],[23.484128,53.912498]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Poland","sov_a3":"POL","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Poland","adm0_a3":"POL","geou_dif":0,"geounit":"Poland","gu_a3":"POL","su_dif":0,"subunit":"Poland","su_a3":"POL","brk_diff":0,"name":"Poland","name_long":"Poland","brk_a3":"POL","brk_name":"Poland","brk_group":null,"abbrev":"Pol.","postal":"PL","formal_en":"Republic of Poland","formal_fr":null,"name_ciawf":"Poland","note_adm0":null,"note_brk":null,"name_sort":"Poland","name_alt":null,"mapcolor7":3,"mapcolor8":7,"mapcolor9":1,"mapcolor13":2,"pop_est":37970874,"pop_rank":15,"pop_year":2019,"gdp_md":595858,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"PL","iso_a2":"PL","iso_a2_eh":"PL","iso_a3":"POL","iso_a3_eh":"POL","iso_n3":"616","iso_n3_eh":"616","un_a3":"616","wb_a2":"PL","wb_a3":"POL","woe_id":23424923,"woe_id_eh":23424923,"woe_note":"Exact WOE match as country","adm0_iso":"POL","adm0_diff":null,"adm0_tlc":"POL","adm0_a3_us":"POL","adm0_a3_fr":"POL","adm0_a3_ru":"POL","adm0_a3_es":"POL","adm0_a3_cn":"POL","adm0_a3_tw":"POL","adm0_a3_in":"POL","adm0_a3_np":"POL","adm0_a3_pk":"POL","adm0_a3_de":"POL","adm0_a3_gb":"POL","adm0_a3_br":"POL","adm0_a3_il":"POL","adm0_a3_ps":"POL","adm0_a3_sa":"POL","adm0_a3_eg":"POL","adm0_a3_ma":"POL","adm0_a3_pt":"POL","adm0_a3_ar":"POL","adm0_a3_jp":"POL","adm0_a3_ko":"POL","adm0_a3_vn":"POL","adm0_a3_tr":"POL","adm0_a3_id":"POL","adm0_a3_pl":"POL","adm0_a3_gr":"POL","adm0_a3_it":"POL","adm0_a3_nl":"POL","adm0_a3_se":"POL","adm0_a3_bd":"POL","adm0_a3_ua":"POL","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2.5,"max_label":7,"label_x":19.490468,"label_y":51.990316,"ne_id":1159321179,"wikidataid":"Q36","name_ar":"بولندا","name_bn":"পোল্যান্ড","name_de":"Polen","name_en":"Poland","name_es":"Polonia","name_fa":"لهستان","name_fr":"Pologne","name_el":"Πολωνία","name_he":"פולין","name_hi":"पोलैंड","name_hu":"Lengyelország","name_id":"Polandia","name_it":"Polonia","name_ja":"ポーランド","name_ko":"폴란드","name_nl":"Polen","name_pl":"Polska","name_pt":"Polónia","name_ru":"Польша","name_sv":"Polen","name_tr":"Polonya","name_uk":"Польща","name_ur":"پولینڈ","name_vi":"Ba Lan","name_zh":"波兰","name_zht":"波蘭","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"POL.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-6.197885,53.867565],[-6.95373,54.073702],[-7.572168,54.059956],[-7.366031,54.595841],[-7.572168,55.131622],[-8.327987,54.664519],[-9.688525,53.881363],[-9.166283,52.864629],[-9.977086,51.820455],[-8.561617,51.669301],[-6.788857,52.260118],[-6.032985,53.153164],[-6.197885,53.867565]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Ireland","sov_a3":"IRL","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Ireland","adm0_a3":"IRL","geou_dif":0,"geounit":"Ireland","gu_a3":"IRL","su_dif":0,"subunit":"Ireland","su_a3":"IRL","brk_diff":0,"name":"Ireland","name_long":"Ireland","brk_a3":"IRL","brk_name":"Ireland","brk_group":null,"abbrev":"Ire.","postal":"IRL","formal_en":"Ireland","formal_fr":null,"name_ciawf":"Ireland","note_adm0":null,"note_brk":null,"name_sort":"Ireland","name_alt":null,"mapcolor7":2,"mapcolor8":3,"mapcolor9":2,"mapcolor13":2,"pop_est":4941444,"pop_rank":12,"pop_year":2019,"gdp_md":388698,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"EI","iso_a2":"IE","iso_a2_eh":"IE","iso_a3":"IRL","iso_a3_eh":"IRL","iso_n3":"372","iso_n3_eh":"372","un_a3":"372","wb_a2":"IE","wb_a3":"IRL","woe_id":23424803,"woe_id_eh":23424803,"woe_note":"Exact WOE match as country","adm0_iso":"IRL","adm0_diff":null,"adm0_tlc":"IRL","adm0_a3_us":"IRL","adm0_a3_fr":"IRL","adm0_a3_ru":"IRL","adm0_a3_es":"IRL","adm0_a3_cn":"IRL","adm0_a3_tw":"IRL","adm0_a3_in":"IRL","adm0_a3_np":"IRL","adm0_a3_pk":"IRL","adm0_a3_de":"IRL","adm0_a3_gb":"IRL","adm0_a3_br":"IRL","adm0_a3_il":"IRL","adm0_a3_ps":"IRL","adm0_a3_sa":"IRL","adm0_a3_eg":"IRL","adm0_a3_ma":"IRL","adm0_a3_pt":"IRL","adm0_a3_ar":"IRL","adm0_a3_jp":"IRL","adm0_a3_ko":"IRL","adm0_a3_vn":"IRL","adm0_a3_tr":"IRL","adm0_a3_id":"IRL","adm0_a3_pl":"IRL","adm0_a3_gr":"IRL","adm0_a3_it":"IRL","adm0_a3_nl":"IRL","adm0_a3_se":"IRL","adm0_a3_bd":"IRL","adm0_a3_ua":"IRL","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":-7.798588,"label_y":53.078726,"ne_id":1159320877,"wikidataid":"Q27","name_ar":"جمهورية أيرلندا","name_bn":"প্রজাতন্ত্রী আয়ারল্যান্ড","name_de":"Irland","name_en":"Ireland","name_es":"Irlanda","name_fa":"ایرلند","name_fr":"Irlande","name_el":"Δημοκρατία της Ιρλανδίας","name_he":"אירלנד","name_hi":"आयरलैण्ड","name_hu":"Írország","name_id":"Republik Irlandia","name_it":"Irlanda","name_ja":"アイルランド","name_ko":"아일랜드","name_nl":"Ierland","name_pl":"Irlandia","name_pt":"República da Irlanda","name_ru":"Ирландия","name_sv":"Irland","name_tr":"İrlanda","name_uk":"Ірландія","name_ur":"جمہوریہ آئرلینڈ","name_vi":"Cộng hòa Ireland","name_zh":"爱尔兰","name_zht":"愛爾蘭","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"IRL.geojson"}},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-6.197885,53.867565],[-5.661949,54.554603],[-6.733847,55.17286],[-7.572168,55.131622],[-7.366031,54.595841],[-7.572168,54.059956],[-6.95373,54.073702],[-6.197885,53.867565]]],[[[-3.093831,53.404547],[-4.579999,53.495004],[-4.770013,52.840005],[-4.222347,52.301356],[-5.267296,51.9914],[-4.984367,51.593466],[-3.422719,51.426848],[-3.414851,51.426009],[-4.30999,51.210001],[-5.776567,50.159678],[-5.245023,49.96],[-4.542508,50.341837],[-3.617448,50.228356],[-2.956274,50.69688],[-2.489998,50.500019],[-0.787517,50.774989],[0.550334,50.765739],[1.449865,51.289428],[1.050562,51.806761],[1.559988,52.099998],[1.681531,52.73952],[0.469977,52.929999],[0.184981,53.325014],[-0.430485,54.464376],[-1.114991,54.624986],[-2.005676,55.804903],[-2.085009,55.909998],[-3.119003,55.973793],[-2.219988,56.870017],[-1.959281,57.6848],[-3.055002,57.690019],[-4.073828,57.553025],[-3.005005,58.635],[-4.211495,58.550845],[-5.009999,58.630013],[-5.786825,57.818848],[-6.149981,56.78501],[-5.644999,56.275015],[-5.586398,55.311146],[-5.047981,55.783986],[-4.719112,55.508473],[-5.082527,55.061601],[-4.844169,54.790971],[-3.630005,54.615013],[-3.614701,54.600937],[-2.945009,53.985],[-3.09208,53.404441],[-3.093831,53.404547]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"United Kingdom","sov_a3":"GB1","adm0_dif":1,"level":2,"type":"Country","tlc":"1","admin":"United Kingdom","adm0_a3":"GBR","geou_dif":0,"geounit":"United Kingdom","gu_a3":"GBR","su_dif":0,"subunit":"United Kingdom","su_a3":"GBR","brk_diff":0,"name":"United Kingdom","name_long":"United Kingdom","brk_a3":"GBR","brk_name":"United Kingdom","brk_group":null,"abbrev":"U.K.","postal":"GB","formal_en":"United Kingdom of Great Britain and Northern Ireland","formal_fr":null,"name_ciawf":"United Kingdom","note_adm0":null,"note_brk":null,"name_sort":"United Kingdom","name_alt":null,"mapcolor7":6,"mapcolor8":6,"mapcolor9":6,"mapcolor13":3,"pop_est":66834405,"pop_rank":16,"pop_year":2019,"gdp_md":2829108,"gdp_year":2019,"economy":"1. Developed region: G7","income_grp":"1. High income: OECD","fips_10":"UK","iso_a2":"GB","iso_a2_eh":"GB","iso_a3":"GBR","iso_a3_eh":"GBR","iso_n3":"826","iso_n3_eh":"826","un_a3":"826","wb_a2":"GB","wb_a3":"GBR","woe_id":-90,"woe_id_eh":23424975,"woe_note":"Eh ID includes Channel Islands and Isle of Man. UK constituent countries of England (24554868), Wales (12578049), Scotland (12578048), and Northern Ireland (20070563).","adm0_iso":"GBR","adm0_diff":null,"adm0_tlc":"GBR","adm0_a3_us":"GBR","adm0_a3_fr":"GBR","adm0_a3_ru":"GBR","adm0_a3_es":"GBR","adm0_a3_cn":"GBR","adm0_a3_tw":"GBR","adm0_a3_in":"GBR","adm0_a3_np":"GBR","adm0_a3_pk":"GBR","adm0_a3_de":"GBR","adm0_a3_gb":"GBR","adm0_a3_br":"GBR","adm0_a3_il":"GBR","adm0_a3_ps":"GBR","adm0_a3_sa":"GBR","adm0_a3_eg":"GBR","adm0_a3_ma":"GBR","adm0_a3_pt":"GBR","adm0_a3_ar":"GBR","adm0_a3_jp":"GBR","adm0_a3_ko":"GBR","adm0_a3_vn":"GBR","adm0_a3_tr":"GBR","adm0_a3_id":"GBR","adm0_a3_pl":"GBR","adm0_a3_gr":"GBR","adm0_a3_it":"GBR","adm0_a3_nl":"GBR","adm0_a3_se":"GBR","adm0_a3_bd":"GBR","adm0_a3_ua":"GBR","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":14,"long_len":14,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":1.7,"max_label":6.7,"label_x":-2.116346,"label_y":54.402739,"ne_id":1159320713,"wikidataid":"Q145","name_ar":"المملكة المتحدة","name_bn":"যুক্তরাজ্য","name_de":"Vereinigtes Königreich","name_en":"United Kingdom","name_es":"Reino Unido","name_fa":"بریتانیا","name_fr":"Royaume-Uni","name_el":"Ηνωμένο Βασίλειο","name_he":"הממלכה המאוחדת","name_hi":"यूनाइटेड किंगडम","name_hu":"Egyesült Királyság","name_id":"Britania Raya","name_it":"Regno Unito","name_ja":"イギリス","name_ko":"영국","name_nl":"Verenigd Koninkrijk","name_pl":"Wielka Brytania","name_pt":"Reino Unido","name_ru":"Великобритания","name_sv":"Storbritannien","name_tr":"Birleşik Krallık","name_uk":"Велика Британія","name_ur":"مملکت متحدہ","name_vi":"Vương quốc Liên hiệp Anh và Bắc Ireland","name_zh":"英国","name_zht":"英國","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"GBR.geojson"}},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[26.290003,35.29999],[25.745023,35.179998],[25.769208,35.354018],[25.025015,35.424996],[24.246665,35.368022],[23.69998,35.705004],[23.514978,35.279992],[24.735007,35.084991],[24.724982,34.919988],[26.164998,35.004995],[26.290003,35.29999]]],[[[22.952377,41.337994],[22.76177,41.3048],[22.597308,41.130487],[22.055378,41.149866],[21.674161,40.931275],[21.02004,40.842727],[20.99999,40.580004],[20.674997,40.435],[20.615,40.110007],[20.150016,39.624998],[20.217712,39.340235],[20.730032,38.769985],[21.120034,38.310323],[21.295011,37.644989],[21.670026,36.844986],[22.490028,36.41],[23.154225,36.422506],[22.774972,37.30501],[23.409972,37.409991],[23.115003,37.920011],[24.040011,37.655015],[24.025025,38.219993],[23.530016,38.510001],[22.973099,38.970903],[23.350027,39.190011],[22.849748,39.659311],[22.626299,40.256561],[22.813988,40.476005],[23.342999,39.960998],[23.899968,39.962006],[24.407999,40.124993],[23.714811,40.687129],[24.925848,40.947062],[25.447677,40.852545],[26.056942,40.824123],[26.294602,40.936261],[26.604196,41.562115],[26.117042,41.826905],[26.106138,41.328899],[25.197201,41.234486],[24.492645,41.583896],[23.692074,41.309081],[22.952377,41.337994]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Greece","sov_a3":"GRC","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Greece","adm0_a3":"GRC","geou_dif":0,"geounit":"Greece","gu_a3":"GRC","su_dif":0,"subunit":"Greece","su_a3":"GRC","brk_diff":0,"name":"Greece","name_long":"Greece","brk_a3":"GRC","brk_name":"Greece","brk_group":null,"abbrev":"Greece","postal":"GR","formal_en":"Hellenic Republic","formal_fr":null,"name_ciawf":"Greece","note_adm0":null,"note_brk":null,"name_sort":"Greece","name_alt":null,"mapcolor7":2,"mapcolor8":2,"mapcolor9":2,"mapcolor13":9,"pop_est":10716322,"pop_rank":14,"pop_year":2019,"gdp_md":209852,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"GR","iso_a2":"GR","iso_a2_eh":"GR","iso_a3":"GRC","iso_a3_eh":"GRC","iso_n3":"300","iso_n3_eh":"300","un_a3":"300","wb_a2":"GR","wb_a3":"GRC","woe_id":23424833,"woe_id_eh":23424833,"woe_note":"Exact WOE match as country","adm0_iso":"GRC","adm0_diff":null,"adm0_tlc":"GRC","adm0_a3_us":"GRC","adm0_a3_fr":"GRC","adm0_a3_ru":"GRC","adm0_a3_es":"GRC","adm0_a3_cn":"GRC","adm0_a3_tw":"GRC","adm0_a3_in":"GRC","adm0_a3_np":"GRC","adm0_a3_pk":"GRC","adm0_a3_de":"GRC","adm0_a3_gb":"GRC","adm0_a3_br":"GRC","adm0_a3_il":"GRC","adm0_a3_ps":"GRC","adm0_a3_sa":"GRC","adm0_a3_eg":"GRC","adm0_a3_ma":"GRC","adm0_a3_pt":"GRC","adm0_a3_ar":"GRC","adm0_a3_jp":"GRC","adm0_a3_ko":"GRC","adm0_a3_vn":"GRC","adm0_a3_tr":"GRC","adm0_a3_id":"GRC","adm0_a3_pl":"GRC","adm0_a3_gr":"GRC","adm0_a3_it":"GRC","adm0_a3_nl":"GRC","adm0_a3_se":"GRC","adm0_a3_bd":"GRC","adm0_a3_ua":"GRC","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":6,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2.7,"max_label":8,"label_x":21.72568,"label_y":39.492763,"ne_id":1159320811,"wikidataid":"Q41","name_ar":"اليونان","name_bn":"গ্রিস","name_de":"Griechenland","name_en":"Greece","name_es":"Grecia","name_fa":"یونان","name_fr":"Grèce","name_el":"Ελλάδα","name_he":"יוון","name_hi":"यूनान","name_hu":"Görögország","name_id":"Yunani","name_it":"Grecia","name_ja":"ギリシャ","name_ko":"그리스","name_nl":"Griekenland","name_pl":"Grecja","name_pt":"Grécia","name_ru":"Греция","name_sv":"Grekland","name_tr":"Yunanistan","name_uk":"Греція","name_ur":"یونان","name_vi":"Hy Lạp","name_zh":"希腊","name_zht":"希臘","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"GRC.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[16.979667,48.123497],[16.879983,48.470013],[16.960288,48.596982],[16.499283,48.785808],[16.029647,48.733899],[15.253416,49.039074],[14.901447,48.964402],[14.338898,48.555305],[13.595946,48.877172],[13.243357,48.416115],[12.884103,48.289146],[13.025851,47.637584],[12.932627,47.467646],[12.62076,47.672388],[12.141357,47.703083],[11.426414,47.523766],[10.544504,47.566399],[10.402084,47.302488],[9.896068,47.580197],[9.594226,47.525058],[9.632932,47.347601],[9.47997,47.10281],[9.932448,46.920728],[10.442701,46.893546],[11.048556,46.751359],[11.164828,46.941579],[12.153088,47.115393],[12.376485,46.767559],[13.806475,46.509306],[14.632472,46.431817],[15.137092,46.658703],[16.011664,46.683611],[16.202298,46.852386],[16.534268,47.496171],[16.340584,47.712902],[16.903754,47.714866],[16.979667,48.123497]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":4,"sovereignt":"Austria","sov_a3":"AUT","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Austria","adm0_a3":"AUT","geou_dif":0,"geounit":"Austria","gu_a3":"AUT","su_dif":0,"subunit":"Austria","su_a3":"AUT","brk_diff":0,"name":"Austria","name_long":"Austria","brk_a3":"AUT","brk_name":"Austria","brk_group":null,"abbrev":"Aust.","postal":"A","formal_en":"Republic of Austria","formal_fr":null,"name_ciawf":"Austria","note_adm0":null,"note_brk":null,"name_sort":"Austria","name_alt":null,"mapcolor7":3,"mapcolor8":1,"mapcolor9":3,"mapcolor13":4,"pop_est":8877067,"pop_rank":13,"pop_year":2019,"gdp_md":445075,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"AU","iso_a2":"AT","iso_a2_eh":"AT","iso_a3":"AUT","iso_a3_eh":"AUT","iso_n3":"040","iso_n3_eh":"040","un_a3":"040","wb_a2":"AT","wb_a3":"AUT","woe_id":23424750,"woe_id_eh":23424750,"woe_note":"Exact WOE match as country","adm0_iso":"AUT","adm0_diff":null,"adm0_tlc":"AUT","adm0_a3_us":"AUT","adm0_a3_fr":"AUT","adm0_a3_ru":"AUT","adm0_a3_es":"AUT","adm0_a3_cn":"AUT","adm0_a3_tw":"AUT","adm0_a3_in":"AUT","adm0_a3_np":"AUT","adm0_a3_pk":"AUT","adm0_a3_de":"AUT","adm0_a3_gb":"AUT","adm0_a3_br":"AUT","adm0_a3_il":"AUT","adm0_a3_ps":"AUT","adm0_a3_sa":"AUT","adm0_a3_eg":"AUT","adm0_a3_ma":"AUT","adm0_a3_pt":"AUT","adm0_a3_ar":"AUT","adm0_a3_jp":"AUT","adm0_a3_ko":"AUT","adm0_a3_vn":"AUT","adm0_a3_tr":"AUT","adm0_a3_id":"AUT","adm0_a3_pl":"AUT","adm0_a3_gr":"AUT","adm0_a3_it":"AUT","adm0_a3_nl":"AUT","adm0_a3_se":"AUT","adm0_a3_bd":"AUT","adm0_a3_ua":"AUT","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":14.130515,"label_y":47.518859,"ne_id":1159320379,"wikidataid":"Q40","name_ar":"النمسا","name_bn":"অস্ট্রিয়া","name_de":"Österreich","name_en":"Austria","name_es":"Austria","name_fa":"اتریش","name_fr":"Autriche","name_el":"Αυστρία","name_he":"אוסטריה","name_hi":"ऑस्ट्रिया","name_hu":"Ausztria","name_id":"Austria","name_it":"Austria","name_ja":"オーストリア","name_ko":"오스트리아","name_nl":"Oostenrijk","name_pl":"Austria","name_pt":"Áustria","name_ru":"Австрия","name_sv":"Österrike","name_tr":"Avusturya","name_uk":"Австрія","name_ur":"آسٹریا","name_vi":"Áo","name_zh":"奥地利","name_zht":"奧地利","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"AUT.geojson"}},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[10.442701,46.893546],[10.363378,46.483571],[9.922837,46.314899],[9.182882,46.440215],[8.966306,46.036932],[8.489952,46.005151],[8.31663,46.163642],[7.755992,45.82449],[7.273851,45.776948],[6.843593,45.991147],[6.802355,45.70858],[7.096652,45.333099],[6.749955,45.028518],[7.007562,44.254767],[7.549596,44.127901],[7.435185,43.693845],[7.850767,43.767148],[8.428561,44.231228],[8.888946,44.366336],[9.702488,44.036279],[10.200029,43.920007],[10.511948,42.931463],[11.191906,42.355425],[12.106683,41.704535],[12.888082,41.25309],[13.627985,41.188287],[14.060672,40.786348],[14.703268,40.60455],[14.998496,40.172949],[15.413613,40.048357],[15.718814,39.544072],[16.109332,38.964547],[15.891981,38.750942],[15.687963,38.214593],[15.684087,37.908849],[16.100961,37.985899],[16.635088,38.843572],[17.052841,38.902871],[17.17149,39.4247],[16.448743,39.795401],[16.869596,40.442235],[17.73838,40.277671],[18.293385,39.810774],[18.480247,40.168866],[18.376687,40.355625],[17.519169,40.877143],[16.785002,41.179606],[15.889346,41.541082],[16.169897,41.740295],[15.926191,41.961315],[15.14257,41.95514],[14.029821,42.761008],[13.526906,43.587727],[12.589237,44.091366],[12.261453,44.600482],[12.383875,44.885374],[12.328581,45.381778],[13.141606,45.736692],[13.93763,45.591016],[13.69811,46.016778],[13.806475,46.509306],[12.376485,46.767559],[12.153088,47.115393],[11.164828,46.941579],[11.048556,46.751359],[10.442701,46.893546]]],[[[14.761249,38.143874],[13.741156,38.034966],[12.570944,38.126381],[12.431004,37.61295],[13.826733,37.104531],[14.335229,36.996631],[15.099988,36.619987],[15.309898,37.134219],[15.160243,37.444046],[15.520376,38.231155],[14.761249,38.143874]]],[[[8.709991,40.899984],[8.159998,40.950007],[8.388253,40.378311],[8.428302,39.171847],[8.806936,38.906618],[9.214818,39.240473],[9.669519,39.177376],[9.809975,40.500009],[9.210012,41.209991],[8.709991,40.899984]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"Italy","sov_a3":"ITA","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Italy","adm0_a3":"ITA","geou_dif":0,"geounit":"Italy","gu_a3":"ITA","su_dif":0,"subunit":"Italy","su_a3":"ITA","brk_diff":0,"name":"Italy","name_long":"Italy","brk_a3":"ITA","brk_name":"Italy","brk_group":null,"abbrev":"Italy","postal":"I","formal_en":"Italian Republic","formal_fr":null,"name_ciawf":"Italy","note_adm0":null,"note_brk":null,"name_sort":"Italy","name_alt":null,"mapcolor7":6,"mapcolor8":7,"mapcolor9":8,"mapcolor13":7,"pop_est":60297396,"pop_rank":16,"pop_year":2019,"gdp_md":2003576,"gdp_year":2019,"economy":"1. Developed region: G7","income_grp":"1. High income: OECD","fips_10":"IT","iso_a2":"IT","iso_a2_eh":"IT","iso_a3":"ITA","iso_a3_eh":"ITA","iso_n3":"380","iso_n3_eh":"380","un_a3":"380","wb_a2":"IT","wb_a3":"ITA","woe_id":23424853,"woe_id_eh":23424853,"woe_note":"Exact WOE match as country","adm0_iso":"ITA","adm0_diff":null,"adm0_tlc":"ITA","adm0_a3_us":"ITA","adm0_a3_fr":"ITA","adm0_a3_ru":"ITA","adm0_a3_es":"ITA","adm0_a3_cn":"ITA","adm0_a3_tw":"ITA","adm0_a3_in":"ITA","adm0_a3_np":"ITA","adm0_a3_pk":"ITA","adm0_a3_de":"ITA","adm0_a3_gb":"ITA","adm0_a3_br":"ITA","adm0_a3_il":"ITA","adm0_a3_ps":"ITA","adm0_a3_sa":"ITA","adm0_a3_eg":"ITA","adm0_a3_ma":"ITA","adm0_a3_pt":"ITA","adm0_a3_ar":"ITA","adm0_a3_jp":"ITA","adm0_a3_ko":"ITA","adm0_a3_vn":"ITA","adm0_a3_tr":"ITA","adm0_a3_id":"ITA","adm0_a3_pl":"ITA","adm0_a3_gr":"ITA","adm0_a3_it":"ITA","adm0_a3_nl":"ITA","adm0_a3_se":"ITA","adm0_a3_bd":"ITA","adm0_a3_ua":"ITA","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":5,"long_len":5,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2,"max_label":7,"label_x":11.076907,"label_y":44.732482,"ne_id":1159320919,"wikidataid":"Q38","name_ar":"إيطاليا","name_bn":"ইতালি","name_de":"Italien","name_en":"Italy","name_es":"Italia","name_fa":"ایتالیا","name_fr":"Italie","name_el":"Ιταλία","name_he":"איטליה","name_hi":"इटली","name_hu":"Olaszország","name_id":"Italia","name_it":"Italia","name_ja":"イタリア","name_ko":"이탈리아","name_nl":"Italië","name_pl":"Włochy","name_pt":"Itália","name_ru":"Италия","name_sv":"Italien","name_tr":"İtalya","name_uk":"Італія","name_ur":"اطالیہ","name_vi":"Ý","name_zh":"意大利","name_zht":"義大利","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"ITA.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[9.594226,47.525058],[8.522612,47.830828],[8.317301,47.61358],[7.466759,47.620582],[7.192202,47.449766],[6.736571,47.541801],[6.768714,47.287708],[6.037389,46.725779],[6.022609,46.27299],[6.5001,46.429673],[6.843593,45.991147],[7.273851,45.776948],[7.755992,45.82449],[8.31663,46.163642],[8.489952,46.005151],[8.966306,46.036932],[9.182882,46.440215],[9.922837,46.314899],[10.363378,46.483571],[10.442701,46.893546],[9.932448,46.920728],[9.47997,47.10281],[9.632932,47.347601],[9.594226,47.525058]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":4,"sovereignt":"Switzerland","sov_a3":"CHE","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Switzerland","adm0_a3":"CHE","geou_dif":0,"geounit":"Switzerland","gu_a3":"CHE","su_dif":0,"subunit":"Switzerland","su_a3":"CHE","brk_diff":0,"name":"Switzerland","name_long":"Switzerland","brk_a3":"CHE","brk_name":"Switzerland","brk_group":null,"abbrev":"Switz.","postal":"CH","formal_en":"Swiss Confederation","formal_fr":null,"name_ciawf":"Switzerland","note_adm0":null,"note_brk":null,"name_sort":"Switzerland","name_alt":null,"mapcolor7":5,"mapcolor8":2,"mapcolor9":7,"mapcolor13":3,"pop_est":8574832,"pop_rank":13,"pop_year":2019,"gdp_md":703082,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"SZ","iso_a2":"CH","iso_a2_eh":"CH","iso_a3":"CHE","iso_a3_eh":"CHE","iso_n3":"756","iso_n3_eh":"756","un_a3":"756","wb_a2":"CH","wb_a3":"CHE","woe_id":23424957,"woe_id_eh":23424957,"woe_note":"Exact WOE match as country","adm0_iso":"CHE","adm0_diff":null,"adm0_tlc":"CHE","adm0_a3_us":"CHE","adm0_a3_fr":"CHE","adm0_a3_ru":"CHE","adm0_a3_es":"CHE","adm0_a3_cn":"CHE","adm0_a3_tw":"CHE","adm0_a3_in":"CHE","adm0_a3_np":"CHE","adm0_a3_pk":"CHE","adm0_a3_de":"CHE","adm0_a3_gb":"CHE","adm0_a3_br":"CHE","adm0_a3_il":"CHE","adm0_a3_ps":"CHE","adm0_a3_sa":"CHE","adm0_a3_eg":"CHE","adm0_a3_ma":"CHE","adm0_a3_pt":"CHE","adm0_a3_ar":"CHE","adm0_a3_jp":"CHE","adm0_a3_ko":"CHE","adm0_a3_vn":"CHE","adm0_a3_tr":"CHE","adm0_a3_id":"CHE","adm0_a3_pl":"CHE","adm0_a3_gr":"CHE","adm0_a3_it":"CHE","adm0_a3_nl":"CHE","adm0_a3_se":"CHE","adm0_a3_bd":"CHE","adm0_a3_ua":"CHE","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":11,"long_len":11,"abbrev_len":6,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":7.463965,"label_y":46.719114,"ne_id":1159320491,"wikidataid":"Q39","name_ar":"سويسرا","name_bn":"সুইজারল্যান্ড","name_de":"Schweiz","name_en":"Switzerland","name_es":"Suiza","name_fa":"سوئیس","name_fr":"Suisse","name_el":"Ελβετία","name_he":"שווייץ","name_hi":"स्विट्ज़रलैण्ड","name_hu":"Svájc","name_id":"Swiss","name_it":"Svizzera","name_ja":"スイス","name_ko":"스위스","name_nl":"Zwitserland","name_pl":"Szwajcaria","name_pt":"Suíça","name_ru":"Швейцария","name_sv":"Schweiz","name_tr":"İsviçre","name_uk":"Швейцарія","name_ur":"سویٹزرلینڈ","name_vi":"Thụy Sĩ","name_zh":"瑞士","name_zht":"瑞士","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"CHE.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[6.90514,53.482162],[6.074183,53.510403],[4.705997,53.091798],[3.830289,51.620545],[3.315011,51.345777],[3.314971,51.345755],[4.047071,51.267259],[4.973991,51.475024],[5.606976,51.037298],[6.156658,50.803721],[5.988658,51.851616],[6.589397,51.852029],[6.84287,52.22844],[7.092053,53.144043],[6.90514,53.482162]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Netherlands","sov_a3":"NL1","adm0_dif":1,"level":2,"type":"Country","tlc":"1","admin":"Netherlands","adm0_a3":"NLD","geou_dif":0,"geounit":"Netherlands","gu_a3":"NLD","su_dif":0,"subunit":"Netherlands","su_a3":"NLD","brk_diff":0,"name":"Netherlands","name_long":"Netherlands","brk_a3":"NLD","brk_name":"Netherlands","brk_group":null,"abbrev":"Neth.","postal":"NL","formal_en":"Kingdom of the Netherlands","formal_fr":null,"name_ciawf":"Netherlands","note_adm0":null,"note_brk":null,"name_sort":"Netherlands","name_alt":null,"mapcolor7":4,"mapcolor8":2,"mapcolor9":2,"mapcolor13":9,"pop_est":17332850,"pop_rank":14,"pop_year":2019,"gdp_md":907050,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"NL","iso_a2":"NL","iso_a2_eh":"NL","iso_a3":"NLD","iso_a3_eh":"NLD","iso_n3":"528","iso_n3_eh":"528","un_a3":"528","wb_a2":"NL","wb_a3":"NLD","woe_id":-90,"woe_id_eh":23424909,"woe_note":"Doesn't include new former units of Netherlands Antilles (24549811, 24549808, and 24549809)","adm0_iso":"NLD","adm0_diff":null,"adm0_tlc":"NLD","adm0_a3_us":"NLD","adm0_a3_fr":"NLD","adm0_a3_ru":"NLD","adm0_a3_es":"NLD","adm0_a3_cn":"NLD","adm0_a3_tw":"NLD","adm0_a3_in":"NLD","adm0_a3_np":"NLD","adm0_a3_pk":"NLD","adm0_a3_de":"NLD","adm0_a3_gb":"NLD","adm0_a3_br":"NLD","adm0_a3_il":"NLD","adm0_a3_ps":"NLD","adm0_a3_sa":"NLD","adm0_a3_eg":"NLD","adm0_a3_ma":"NLD","adm0_a3_pt":"NLD","adm0_a3_ar":"NLD","adm0_a3_jp":"NLD","adm0_a3_ko":"NLD","adm0_a3_vn":"NLD","adm0_a3_tr":"NLD","adm0_a3_id":"NLD","adm0_a3_pl":"NLD","adm0_a3_gr":"NLD","adm0_a3_it":"NLD","adm0_a3_nl":"NLD","adm0_a3_se":"NLD","adm0_a3_bd":"NLD","adm0_a3_ua":"NLD","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":11,"long_len":11,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":10,"label_x":5.61144,"label_y":52.422211,"ne_id":1159321101,"wikidataid":"Q55","name_ar":"هولندا","name_bn":"নেদারল্যান্ডস","name_de":"Niederlande","name_en":"Netherlands","name_es":"Países Bajos","name_fa":"هلند","name_fr":"Pays-Bas","name_el":"Ολλανδία","name_he":"הולנד","name_hi":"नीदरलैण्ड","name_hu":"Hollandia","name_id":"Belanda","name_it":"Paesi Bassi","name_ja":"オランダ","name_ko":"네덜란드","name_nl":"Nederland","name_pl":"Holandia","name_pt":"Países Baixos","name_ru":"Нидерланды","name_sv":"Nederländerna","name_tr":"Hollanda","name_uk":"Нідерланди","name_ur":"نیدرلینڈز","name_vi":"Hà Lan","name_zh":"荷兰","name_zht":"荷蘭","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"NLD.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[18.829825,45.908872],[19.072769,45.521511],[19.390476,45.236516],[19.005485,44.860234],[19.00548,44.86023],[19.36803,44.863],[19.11761,44.42307],[19.59976,44.03847],[19.454,43.5681],[19.21852,43.52384],[19.48389,43.35229],[19.63,43.21378],[19.95857,43.10604],[20.3398,42.89852],[20.25758,42.81275],[20.49679,42.88469],[20.63508,43.21671],[20.81448,43.27205],[20.95651,43.13094],[21.143395,43.068685],[21.27421,42.90959],[21.43866,42.86255],[21.63302,42.67717],[21.77505,42.6827],[21.66292,42.43922],[21.54332,42.32025],[21.576636,42.245224],[21.91708,42.30364],[22.380526,42.32026],[22.545012,42.461362],[22.436595,42.580321],[22.604801,42.898519],[22.986019,43.211161],[22.500157,43.642814],[22.410446,44.008063],[22.65715,44.234923],[22.474008,44.409228],[22.705726,44.578003],[22.459022,44.702517],[22.145088,44.478422],[21.562023,44.768947],[21.483526,45.18117],[20.874313,45.416375],[20.762175,45.734573],[20.220192,46.127469],[19.596045,46.17173],[18.829838,45.908878],[18.829825,45.908872]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Republic of Serbia","sov_a3":"SRB","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Republic of Serbia","adm0_a3":"SRB","geou_dif":0,"geounit":"Republic of Serbia","gu_a3":"SRB","su_dif":0,"subunit":"Republic of Serbia","su_a3":"SRB","brk_diff":0,"name":"Serbia","name_long":"Serbia","brk_a3":"SRB","brk_name":"Serbia","brk_group":null,"abbrev":"Serb.","postal":"RS","formal_en":"Republic of Serbia","formal_fr":null,"name_ciawf":"Serbia","note_adm0":null,"note_brk":null,"name_sort":"Serbia","name_alt":null,"mapcolor7":3,"mapcolor8":3,"mapcolor9":2,"mapcolor13":10,"pop_est":6944975,"pop_rank":13,"pop_year":2019,"gdp_md":51475,"gdp_year":2019,"economy":"6. Developing region","income_grp":"3. Upper middle income","fips_10":"RI","iso_a2":"RS","iso_a2_eh":"RS","iso_a3":"SRB","iso_a3_eh":"SRB","iso_n3":"688","iso_n3_eh":"688","un_a3":"688","wb_a2":"YF","wb_a3":"SRB","woe_id":-90,"woe_id_eh":20069818,"woe_note":"Expired WOE also contains Kosovo.","adm0_iso":"SRB","adm0_diff":null,"adm0_tlc":"SRB","adm0_a3_us":"SRB","adm0_a3_fr":"SRB","adm0_a3_ru":"SRB","adm0_a3_es":"SRB","adm0_a3_cn":"SRB","adm0_a3_tw":"SRB","adm0_a3_in":"SRB","adm0_a3_np":"SRB","adm0_a3_pk":"SRB","adm0_a3_de":"SRB","adm0_a3_gb":"SRB","adm0_a3_br":"SRB","adm0_a3_il":"SRB","adm0_a3_ps":"SRB","adm0_a3_sa":"SRB","adm0_a3_eg":"SRB","adm0_a3_ma":"SRB","adm0_a3_pt":"SRB","adm0_a3_ar":"SRB","adm0_a3_jp":"SRB","adm0_a3_ko":"SRB","adm0_a3_vn":"SRB","adm0_a3_tr":"SRB","adm0_a3_id":"SRB","adm0_a3_pl":"SRB","adm0_a3_gr":"SRB","adm0_a3_it":"SRB","adm0_a3_nl":"SRB","adm0_a3_se":"SRB","adm0_a3_bd":"SRB","adm0_a3_ua":"SRB","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":7,"label_x":20.787989,"label_y":44.189919,"ne_id":1159321267,"wikidataid":"Q403","name_ar":"صربيا","name_bn":"সার্বিয়া","name_de":"Serbien","name_en":"Serbia","name_es":"Serbia","name_fa":"صربستان","name_fr":"Serbie","name_el":"Σερβία","name_he":"סרביה","name_hi":"सर्बिया","name_hu":"Szerbia","name_id":"Serbia","name_it":"Serbia","name_ja":"セルビア","name_ko":"세르비아","name_nl":"Servië","name_pl":"Serbia","name_pt":"Sérvia","name_ru":"Сербия","name_sv":"Serbien","name_tr":"Sırbistan","name_uk":"Сербія","name_ur":"سربیا","name_vi":"Serbia","name_zh":"塞尔维亚","name_zht":"塞爾維亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"SRB.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[16.564808,46.503751],[15.768733,46.238108],[15.67153,45.834154],[15.323954,45.731783],[15.327675,45.452316],[14.935244,45.471695],[14.595109,45.634941],[14.411968,45.466166],[13.71506,45.500324],[13.679403,45.484149],[13.656976,45.136935],[13.952255,44.802124],[14.258748,45.233777],[14.901602,45.07606],[14.920309,44.738484],[15.37625,44.317915],[15.174454,44.243191],[16.015385,43.507215],[16.930006,43.209998],[17.50997,42.849995],[18.450016,42.479991],[18.450017,42.479992],[18.56,42.65],[17.674922,43.028563],[17.297373,43.446341],[16.916156,43.667722],[16.456443,44.04124],[16.23966,44.351143],[15.750026,44.818712],[15.959367,45.233777],[16.318157,45.004127],[16.534939,45.211608],[17.002146,45.233777],[17.861783,45.06774],[18.553214,45.08159],[19.005485,44.860234],[19.390476,45.236516],[19.072769,45.521511],[18.829825,45.908872],[18.456062,45.759481],[17.630066,45.951769],[16.882515,46.380632],[16.564808,46.503751]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Croatia","sov_a3":"HRV","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Croatia","adm0_a3":"HRV","geou_dif":0,"geounit":"Croatia","gu_a3":"HRV","su_dif":0,"subunit":"Croatia","su_a3":"HRV","brk_diff":0,"name":"Croatia","name_long":"Croatia","brk_a3":"HRV","brk_name":"Croatia","brk_group":null,"abbrev":"Cro.","postal":"HR","formal_en":"Republic of Croatia","formal_fr":null,"name_ciawf":"Croatia","note_adm0":null,"note_brk":null,"name_sort":"Croatia","name_alt":null,"mapcolor7":5,"mapcolor8":4,"mapcolor9":5,"mapcolor13":1,"pop_est":4067500,"pop_rank":12,"pop_year":2019,"gdp_md":60752,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"2. High income: nonOECD","fips_10":"HR","iso_a2":"HR","iso_a2_eh":"HR","iso_a3":"HRV","iso_a3_eh":"HRV","iso_n3":"191","iso_n3_eh":"191","un_a3":"191","wb_a2":"HR","wb_a3":"HRV","woe_id":23424843,"woe_id_eh":23424843,"woe_note":"Exact WOE match as country","adm0_iso":"HRV","adm0_diff":null,"adm0_tlc":"HRV","adm0_a3_us":"HRV","adm0_a3_fr":"HRV","adm0_a3_ru":"HRV","adm0_a3_es":"HRV","adm0_a3_cn":"HRV","adm0_a3_tw":"HRV","adm0_a3_in":"HRV","adm0_a3_np":"HRV","adm0_a3_pk":"HRV","adm0_a3_de":"HRV","adm0_a3_gb":"HRV","adm0_a3_br":"HRV","adm0_a3_il":"HRV","adm0_a3_ps":"HRV","adm0_a3_sa":"HRV","adm0_a3_eg":"HRV","adm0_a3_ma":"HRV","adm0_a3_pt":"HRV","adm0_a3_ar":"HRV","adm0_a3_jp":"HRV","adm0_a3_ko":"HRV","adm0_a3_vn":"HRV","adm0_a3_tr":"HRV","adm0_a3_id":"HRV","adm0_a3_pl":"HRV","adm0_a3_gr":"HRV","adm0_a3_it":"HRV","adm0_a3_nl":"HRV","adm0_a3_se":"HRV","adm0_a3_bd":"HRV","adm0_a3_ua":"HRV","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":16.37241,"label_y":45.805799,"ne_id":1159320833,"wikidataid":"Q224","name_ar":"كرواتيا","name_bn":"ক্রোয়েশিয়া","name_de":"Kroatien","name_en":"Croatia","name_es":"Croacia","name_fa":"کرواسی","name_fr":"Croatie","name_el":"Κροατία","name_he":"קרואטיה","name_hi":"क्रोएशिया","name_hu":"Horvátország","name_id":"Kroasia","name_it":"Croazia","name_ja":"クロアチア","name_ko":"크로아티아","name_nl":"Kroatië","name_pl":"Chorwacja","name_pt":"Croácia","name_ru":"Хорватия","name_sv":"Kroatien","name_tr":"Hırvatistan","name_uk":"Хорватія","name_ur":"کروشیا","name_vi":"Croatia","name_zh":"克罗地亚","name_zht":"克羅地亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"HRV.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[13.806475,46.509306],[13.69811,46.016778],[13.93763,45.591016],[13.71506,45.500324],[14.411968,45.466166],[14.595109,45.634941],[14.935244,45.471695],[15.327675,45.452316],[15.323954,45.731783],[15.67153,45.834154],[15.768733,46.238108],[16.564808,46.503751],[16.370505,46.841327],[16.202298,46.852386],[16.011664,46.683611],[15.137092,46.658703],[14.632472,46.431817],[13.806475,46.509306]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Slovenia","sov_a3":"SVN","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Slovenia","adm0_a3":"SVN","geou_dif":0,"geounit":"Slovenia","gu_a3":"SVN","su_dif":0,"subunit":"Slovenia","su_a3":"SVN","brk_diff":0,"name":"Slovenia","name_long":"Slovenia","brk_a3":"SVN","brk_name":"Slovenia","brk_group":null,"abbrev":"Slo.","postal":"SLO","formal_en":"Republic of Slovenia","formal_fr":null,"name_ciawf":"Slovenia","note_adm0":null,"note_brk":null,"name_sort":"Slovenia","name_alt":null,"mapcolor7":2,"mapcolor8":3,"mapcolor9":2,"mapcolor13":12,"pop_est":2087946,"pop_rank":12,"pop_year":2019,"gdp_md":54174,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"SI","iso_a2":"SI","iso_a2_eh":"SI","iso_a3":"SVN","iso_a3_eh":"SVN","iso_n3":"705","iso_n3_eh":"705","un_a3":"705","wb_a2":"SI","wb_a3":"SVN","woe_id":23424945,"woe_id_eh":23424945,"woe_note":"Exact WOE match as country","adm0_iso":"SVN","adm0_diff":null,"adm0_tlc":"SVN","adm0_a3_us":"SVN","adm0_a3_fr":"SVN","adm0_a3_ru":"SVN","adm0_a3_es":"SVN","adm0_a3_cn":"SVN","adm0_a3_tw":"SVN","adm0_a3_in":"SVN","adm0_a3_np":"SVN","adm0_a3_pk":"SVN","adm0_a3_de":"SVN","adm0_a3_gb":"SVN","adm0_a3_br":"SVN","adm0_a3_il":"SVN","adm0_a3_ps":"SVN","adm0_a3_sa":"SVN","adm0_a3_eg":"SVN","adm0_a3_ma":"SVN","adm0_a3_pt":"SVN","adm0_a3_ar":"SVN","adm0_a3_jp":"SVN","adm0_a3_ko":"SVN","adm0_a3_vn":"SVN","adm0_a3_tr":"SVN","adm0_a3_id":"SVN","adm0_a3_pl":"SVN","adm0_a3_gr":"SVN","adm0_a3_it":"SVN","adm0_a3_nl":"SVN","adm0_a3_se":"SVN","adm0_a3_bd":"SVN","adm0_a3_ua":"SVN","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":8,"long_len":8,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":5,"max_label":10,"label_x":14.915312,"label_y":46.06076,"ne_id":1159321285,"wikidataid":"Q215","name_ar":"سلوفينيا","name_bn":"স্লোভেনিয়া","name_de":"Slowenien","name_en":"Slovenia","name_es":"Eslovenia","name_fa":"اسلوونی","name_fr":"Slovénie","name_el":"Σλοβενία","name_he":"סלובניה","name_hi":"स्लोवेनिया","name_hu":"Szlovénia","name_id":"Slovenia","name_it":"Slovenia","name_ja":"スロベニア","name_ko":"슬로베니아","name_nl":"Slovenië","name_pl":"Słowenia","name_pt":"Eslovénia","name_ru":"Словения","name_sv":"Slovenien","name_tr":"Slovenya","name_uk":"Словенія","name_ur":"سلووینیا","name_vi":"Slovenia","name_zh":"斯洛文尼亚","name_zht":"斯洛維尼亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"SVN.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[22.65715,44.234923],[22.410446,44.008063],[22.500157,43.642814],[22.986019,43.211161],[22.604801,42.898519],[22.436595,42.580321],[22.545012,42.461362],[22.380526,42.32026],[22.881374,41.999297],[22.952377,41.337994],[23.692074,41.309081],[24.492645,41.583896],[25.197201,41.234486],[26.106138,41.328899],[26.117042,41.826905],[27.135739,42.141485],[27.99672,42.007359],[27.673898,42.577892],[28.039095,43.293172],[28.558081,43.707462],[27.970107,43.812468],[27.2424,44.175986],[26.065159,43.943494],[25.569272,43.688445],[24.100679,43.741051],[23.332302,43.897011],[22.944832,43.823785],[22.65715,44.234923]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":4,"sovereignt":"Bulgaria","sov_a3":"BGR","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Bulgaria","adm0_a3":"BGR","geou_dif":0,"geounit":"Bulgaria","gu_a3":"BGR","su_dif":0,"subunit":"Bulgaria","su_a3":"BGR","brk_diff":0,"name":"Bulgaria","name_long":"Bulgaria","brk_a3":"BGR","brk_name":"Bulgaria","brk_group":null,"abbrev":"Bulg.","postal":"BG","formal_en":"Republic of Bulgaria","formal_fr":null,"name_ciawf":"Bulgaria","note_adm0":null,"note_brk":null,"name_sort":"Bulgaria","name_alt":null,"mapcolor7":4,"mapcolor8":5,"mapcolor9":1,"mapcolor13":8,"pop_est":6975761,"pop_rank":13,"pop_year":2019,"gdp_md":68558,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"3. Upper middle income","fips_10":"BU","iso_a2":"BG","iso_a2_eh":"BG","iso_a3":"BGR","iso_a3_eh":"BGR","iso_n3":"100","iso_n3_eh":"100","un_a3":"100","wb_a2":"BG","wb_a3":"BGR","woe_id":23424771,"woe_id_eh":23424771,"woe_note":"Exact WOE match as country","adm0_iso":"BGR","adm0_diff":null,"adm0_tlc":"BGR","adm0_a3_us":"BGR","adm0_a3_fr":"BGR","adm0_a3_ru":"BGR","adm0_a3_es":"BGR","adm0_a3_cn":"BGR","adm0_a3_tw":"BGR","adm0_a3_in":"BGR","adm0_a3_np":"BGR","adm0_a3_pk":"BGR","adm0_a3_de":"BGR","adm0_a3_gb":"BGR","adm0_a3_br":"BGR","adm0_a3_il":"BGR","adm0_a3_ps":"BGR","adm0_a3_sa":"BGR","adm0_a3_eg":"BGR","adm0_a3_ma":"BGR","adm0_a3_pt":"BGR","adm0_a3_ar":"BGR","adm0_a3_jp":"BGR","adm0_a3_ko":"BGR","adm0_a3_vn":"BGR","adm0_a3_tr":"BGR","adm0_a3_id":"BGR","adm0_a3_pl":"BGR","adm0_a3_gr":"BGR","adm0_a3_it":"BGR","adm0_a3_nl":"BGR","adm0_a3_se":"BGR","adm0_a3_bd":"BGR","adm0_a3_ua":"BGR","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":8,"long_len":8,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":25.15709,"label_y":42.508785,"ne_id":1159320409,"wikidataid":"Q219","name_ar":"بلغاريا","name_bn":"বুলগেরিয়া","name_de":"Bulgarien","name_en":"Bulgaria","name_es":"Bulgaria","name_fa":"بلغارستان","name_fr":"Bulgarie","name_el":"Βουλγαρία","name_he":"בולגריה","name_hi":"बुल्गारिया","name_hu":"Bulgária","name_id":"Bulgaria","name_it":"Bulgaria","name_ja":"ブルガリア","name_ko":"불가리아","name_nl":"Bulgarije","name_pl":"Bułgaria","name_pt":"Bulgária","name_ru":"Болгария","name_sv":"Bulgarien","name_tr":"Bulgaristan","name_uk":"Болгарія","name_ur":"بلغاریہ","name_vi":"Bulgaria","name_zh":"保加利亚","name_zht":"保加利亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"BGR.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[20.0707,42.58863],[20.25758,42.81275],[20.3398,42.89852],[19.95857,43.10604],[19.63,43.21378],[19.48389,43.35229],[19.21852,43.52384],[19.03165,43.43253],[18.70648,43.20011],[18.56,42.65],[18.450017,42.479992],[18.88214,42.28151],[19.16246,41.95502],[19.371768,41.877551],[19.304486,42.195745],[19.738051,42.688247],[19.801613,42.500093],[20.0707,42.58863]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Montenegro","sov_a3":"MNE","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Montenegro","adm0_a3":"MNE","geou_dif":0,"geounit":"Montenegro","gu_a3":"MNE","su_dif":0,"subunit":"Montenegro","su_a3":"MNE","brk_diff":0,"name":"Montenegro","name_long":"Montenegro","brk_a3":"MNE","brk_name":"Montenegro","brk_group":null,"abbrev":"Mont.","postal":"ME","formal_en":"Montenegro","formal_fr":null,"name_ciawf":"Montenegro","note_adm0":null,"note_brk":null,"name_sort":"Montenegro","name_alt":null,"mapcolor7":4,"mapcolor8":1,"mapcolor9":4,"mapcolor13":5,"pop_est":622137,"pop_rank":11,"pop_year":2019,"gdp_md":5542,"gdp_year":2019,"economy":"6. Developing region","income_grp":"3. Upper middle income","fips_10":"MJ","iso_a2":"ME","iso_a2_eh":"ME","iso_a3":"MNE","iso_a3_eh":"MNE","iso_n3":"499","iso_n3_eh":"499","un_a3":"499","wb_a2":"ME","wb_a3":"MNE","woe_id":20069817,"woe_id_eh":20069817,"woe_note":"Exact WOE match as country","adm0_iso":"MNE","adm0_diff":null,"adm0_tlc":"MNE","adm0_a3_us":"MNE","adm0_a3_fr":"MNE","adm0_a3_ru":"MNE","adm0_a3_es":"MNE","adm0_a3_cn":"MNE","adm0_a3_tw":"MNE","adm0_a3_in":"MNE","adm0_a3_np":"MNE","adm0_a3_pk":"MNE","adm0_a3_de":"MNE","adm0_a3_gb":"MNE","adm0_a3_br":"MNE","adm0_a3_il":"MNE","adm0_a3_ps":"MNE","adm0_a3_sa":"MNE","adm0_a3_eg":"MNE","adm0_a3_ma":"MNE","adm0_a3_pt":"MNE","adm0_a3_ar":"MNE","adm0_a3_jp":"MNE","adm0_a3_ko":"MNE","adm0_a3_vn":"MNE","adm0_a3_tr":"MNE","adm0_a3_id":"MNE","adm0_a3_pl":"MNE","adm0_a3_gr":"MNE","adm0_a3_it":"MNE","adm0_a3_nl":"MNE","adm0_a3_se":"MNE","adm0_a3_bd":"MNE","adm0_a3_ua":"MNE","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":10,"long_len":10,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":5,"max_label":10,"label_x":19.143727,"label_y":42.803101,"ne_id":1159321069,"wikidataid":"Q236","name_ar":"الجبل الأسود","name_bn":"মন্টিনিগ্রো","name_de":"Montenegro","name_en":"Montenegro","name_es":"Montenegro","name_fa":"مونتهنگرو","name_fr":"Monténégro","name_el":"Μαυροβούνιο","name_he":"מונטנגרו","name_hi":"मॉन्टेनीग्रो","name_hu":"Montenegró","name_id":"Montenegro","name_it":"Montenegro","name_ja":"モンテネグロ","name_ko":"몬테네그로","name_nl":"Montenegro","name_pl":"Czarnogóra","name_pt":"Montenegro","name_ru":"Черногория","name_sv":"Montenegro","name_tr":"Karadağ","name_uk":"Чорногорія","name_ur":"مونٹینیگرو","name_vi":"Montenegro","name_zh":"黑山","name_zht":"蒙特內哥羅","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"MNE.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-9.034818,41.880571],[-8.990789,41.543459],[-8.790853,41.184334],[-8.768684,40.760639],[-8.977353,40.159306],[-9.048305,39.755093],[-9.446989,39.392066],[-9.526571,38.737429],[-9.287464,38.358486],[-8.839998,38.266243],[-8.746101,37.651346],[-8.898857,36.868809],[-8.382816,36.97888],[-7.855613,36.838269],[-7.453726,37.097788],[-7.537105,37.428904],[-7.166508,37.803894],[-7.029281,38.075764],[-7.374092,38.373059],[-7.098037,39.030073],[-7.498632,39.629571],[-7.066592,39.711892],[-7.026413,40.184524],[-6.86402,40.330872],[-6.851127,41.111083],[-6.389088,41.381815],[-6.668606,41.883387],[-7.251309,41.918346],[-7.422513,41.792075],[-8.013175,41.790886],[-8.263857,42.280469],[-8.671946,42.134689],[-9.034818,41.880571]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"Portugal","sov_a3":"PRT","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Portugal","adm0_a3":"PRT","geou_dif":0,"geounit":"Portugal","gu_a3":"PRT","su_dif":1,"subunit":"Portugal","su_a3":"PR1","brk_diff":0,"name":"Portugal","name_long":"Portugal","brk_a3":"PR1","brk_name":"Portugal","brk_group":null,"abbrev":"Port.","postal":"P","formal_en":"Portuguese Republic","formal_fr":null,"name_ciawf":"Portugal","note_adm0":null,"note_brk":null,"name_sort":"Portugal","name_alt":null,"mapcolor7":1,"mapcolor8":7,"mapcolor9":1,"mapcolor13":4,"pop_est":10269417,"pop_rank":14,"pop_year":2019,"gdp_md":238785,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"PO","iso_a2":"PT","iso_a2_eh":"PT","iso_a3":"PRT","iso_a3_eh":"PRT","iso_n3":"620","iso_n3_eh":"620","un_a3":"620","wb_a2":"PT","wb_a3":"PRT","woe_id":23424925,"woe_id_eh":23424925,"woe_note":"Exact WOE match as country","adm0_iso":"PR1","adm0_diff":null,"adm0_tlc":"PR1","adm0_a3_us":"PRT","adm0_a3_fr":"PRT","adm0_a3_ru":"PRT","adm0_a3_es":"PRT","adm0_a3_cn":"PRT","adm0_a3_tw":"PRT","adm0_a3_in":"PRT","adm0_a3_np":"PRT","adm0_a3_pk":"PRT","adm0_a3_de":"PRT","adm0_a3_gb":"PRT","adm0_a3_br":"PRT","adm0_a3_il":"PRT","adm0_a3_ps":"PRT","adm0_a3_sa":"PRT","adm0_a3_eg":"PRT","adm0_a3_ma":"PRT","adm0_a3_pt":"PRT","adm0_a3_ar":"PRT","adm0_a3_jp":"PRT","adm0_a3_ko":"PRT","adm0_a3_vn":"PRT","adm0_a3_tr":"PRT","adm0_a3_id":"PRT","adm0_a3_pl":"PRT","adm0_a3_gr":"PRT","adm0_a3_it":"PRT","adm0_a3_nl":"PRT","adm0_a3_se":"PRT","adm0_a3_bd":"PRT","adm0_a3_ua":"PRT","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":8,"long_len":8,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":-8.271754,"label_y":39.606675,"ne_id":1159321187,"wikidataid":"Q45","name_ar":"البرتغال","name_bn":"পর্তুগাল","name_de":"Portugal","name_en":"Portugal","name_es":"Portugal","name_fa":"پرتغال","name_fr":"Portugal","name_el":"Πορτογαλία","name_he":"פורטוגל","name_hi":"पुर्तगाल","name_hu":"Portugália","name_id":"Portugal","name_it":"Portogallo","name_ja":"ポルトガル","name_ko":"포르투갈","name_nl":"Portugal","name_pl":"Portugalia","name_pt":"Portugal","name_ru":"Португалия","name_sv":"Portugal","name_tr":"Portekiz","name_uk":"Португалія","name_ur":"پرتگال","name_vi":"Bồ Đào Nha","name_zh":"葡萄牙","name_zht":"葡萄牙","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"PRT.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.619337,48.220726],[26.924176,48.123264],[27.233873,47.826771],[27.551166,47.405117],[28.12803,46.810476],[28.160018,46.371563],[28.054443,45.944586],[28.233554,45.488283],[28.485269,45.596907],[28.659987,45.939987],[28.933717,46.25883],[28.862972,46.437889],[29.072107,46.517678],[29.170654,46.379262],[29.759972,46.349988],[30.024659,46.423937],[29.83821,46.525326],[29.908852,46.674361],[29.559674,46.928583],[29.415135,47.346645],[29.050868,47.510227],[29.122698,47.849095],[28.670891,48.118149],[28.259547,48.155562],[27.522537,48.467119],[26.857824,48.368211],[26.619337,48.220726]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Moldova","sov_a3":"MDA","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Moldova","adm0_a3":"MDA","geou_dif":0,"geounit":"Moldova","gu_a3":"MDA","su_dif":0,"subunit":"Moldova","su_a3":"MDA","brk_diff":0,"name":"Moldova","name_long":"Moldova","brk_a3":"MDA","brk_name":"Moldova","brk_group":null,"abbrev":"Mda.","postal":"MD","formal_en":"Republic of Moldova","formal_fr":null,"name_ciawf":"Moldova","note_adm0":null,"note_brk":null,"name_sort":"Moldova","name_alt":null,"mapcolor7":3,"mapcolor8":5,"mapcolor9":4,"mapcolor13":12,"pop_est":2657637,"pop_rank":12,"pop_year":2019,"gdp_md":11968,"gdp_year":2019,"economy":"6. Developing region","income_grp":"4. Lower middle income","fips_10":"MD","iso_a2":"MD","iso_a2_eh":"MD","iso_a3":"MDA","iso_a3_eh":"MDA","iso_n3":"498","iso_n3_eh":"498","un_a3":"498","wb_a2":"MD","wb_a3":"MDA","woe_id":23424885,"woe_id_eh":23424885,"woe_note":"Exact WOE match as country","adm0_iso":"MDA","adm0_diff":null,"adm0_tlc":"MDA","adm0_a3_us":"MDA","adm0_a3_fr":"MDA","adm0_a3_ru":"MDA","adm0_a3_es":"MDA","adm0_a3_cn":"MDA","adm0_a3_tw":"MDA","adm0_a3_in":"MDA","adm0_a3_np":"MDA","adm0_a3_pk":"MDA","adm0_a3_de":"MDA","adm0_a3_gb":"MDA","adm0_a3_br":"MDA","adm0_a3_il":"MDA","adm0_a3_ps":"MDA","adm0_a3_sa":"MDA","adm0_a3_eg":"MDA","adm0_a3_ma":"MDA","adm0_a3_pt":"MDA","adm0_a3_ar":"MDA","adm0_a3_jp":"MDA","adm0_a3_ko":"MDA","adm0_a3_vn":"MDA","adm0_a3_tr":"MDA","adm0_a3_id":"MDA","adm0_a3_pl":"MDA","adm0_a3_gr":"MDA","adm0_a3_it":"MDA","adm0_a3_nl":"MDA","adm0_a3_se":"MDA","adm0_a3_bd":"MDA","adm0_a3_ua":"MDA","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":5,"max_label":10,"label_x":28.487904,"label_y":47.434999,"ne_id":1159321045,"wikidataid":"Q217","name_ar":"مولدوفا","name_bn":"মলদোভা","name_de":"Republik Moldau","name_en":"Moldova","name_es":"Moldavia","name_fa":"مولداوی","name_fr":"Moldavie","name_el":"Μολδαβία","name_he":"מולדובה","name_hi":"मॉल्डोवा","name_hu":"Moldova","name_id":"Moldova","name_it":"Moldavia","name_ja":"モルドバ","name_ko":"몰도바","name_nl":"Moldavië","name_pl":"Mołdawia","name_pt":"Moldávia","name_ru":"Молдавия","name_sv":"Moldavien","name_tr":"Moldova","name_uk":"Молдова","name_ur":"مالدووا","name_vi":"Moldova","name_zh":"摩尔多瓦","name_zht":"摩爾多瓦","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"MDA.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-14.508695,66.455892],[-16.167819,66.526792],[-17.798624,65.993853],[-19.056842,66.276601],[-20.576284,65.732112],[-22.134922,66.410469],[-23.650515,66.262519],[-24.326184,65.611189],[-22.227423,65.378594],[-22.184403,65.084968],[-23.955044,64.89113],[-21.778484,64.402116],[-22.762972,63.960179],[-19.972755,63.643635],[-18.656246,63.496383],[-17.794438,63.678749],[-14.909834,64.364082],[-13.609732,65.126671],[-14.739637,65.808748],[-14.508695,66.455892]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Iceland","sov_a3":"ISL","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Iceland","adm0_a3":"ISL","geou_dif":0,"geounit":"Iceland","gu_a3":"ISL","su_dif":0,"subunit":"Iceland","su_a3":"ISL","brk_diff":0,"name":"Iceland","name_long":"Iceland","brk_a3":"ISL","brk_name":"Iceland","brk_group":null,"abbrev":"Iceland","postal":"IS","formal_en":"Republic of Iceland","formal_fr":null,"name_ciawf":"Iceland","note_adm0":null,"note_brk":null,"name_sort":"Iceland","name_alt":null,"mapcolor7":1,"mapcolor8":4,"mapcolor9":4,"mapcolor13":9,"pop_est":361313,"pop_rank":10,"pop_year":2019,"gdp_md":24188,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"IC","iso_a2":"IS","iso_a2_eh":"IS","iso_a3":"ISL","iso_a3_eh":"ISL","iso_n3":"352","iso_n3_eh":"352","un_a3":"352","wb_a2":"IS","wb_a3":"ISL","woe_id":23424845,"woe_id_eh":23424845,"woe_note":"Exact WOE match as country","adm0_iso":"ISL","adm0_diff":null,"adm0_tlc":"ISL","adm0_a3_us":"ISL","adm0_a3_fr":"ISL","adm0_a3_ru":"ISL","adm0_a3_es":"ISL","adm0_a3_cn":"ISL","adm0_a3_tw":"ISL","adm0_a3_in":"ISL","adm0_a3_np":"ISL","adm0_a3_pk":"ISL","adm0_a3_de":"ISL","adm0_a3_gb":"ISL","adm0_a3_br":"ISL","adm0_a3_il":"ISL","adm0_a3_ps":"ISL","adm0_a3_sa":"ISL","adm0_a3_eg":"ISL","adm0_a3_ma":"ISL","adm0_a3_pt":"ISL","adm0_a3_ar":"ISL","adm0_a3_jp":"ISL","adm0_a3_ko":"ISL","adm0_a3_vn":"ISL","adm0_a3_tr":"ISL","adm0_a3_id":"ISL","adm0_a3_pl":"ISL","adm0_a3_gr":"ISL","adm0_a3_it":"ISL","adm0_a3_nl":"ISL","adm0_a3_se":"ISL","adm0_a3_bd":"ISL","adm0_a3_ua":"ISL","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":7,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2,"max_label":7,"label_x":-18.673711,"label_y":64.779286,"ne_id":1159320917,"wikidataid":"Q189","name_ar":"آيسلندا","name_bn":"আইসল্যান্ড","name_de":"Island","name_en":"Iceland","name_es":"Islandia","name_fa":"ایسلند","name_fr":"Islande","name_el":"Ισλανδία","name_he":"איסלנד","name_hi":"आइसलैण्ड","name_hu":"Izland","name_id":"Islandia","name_it":"Islanda","name_ja":"アイスランド","name_ko":"아이슬란드","name_nl":"IJsland","name_pl":"Islandia","name_pt":"Islândia","name_ru":"Исландия","name_sv":"Island","name_tr":"İzlanda","name_uk":"Ісландія","name_ur":"آئس لینڈ","name_vi":"Iceland","name_zh":"冰岛","name_zht":"冰島","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"ISL.geojson"}}]`),To={features:z3};let Oo=!0;const U=Do({isEnabled:!1,isDialogEnabled:!1,isLoaded:!1,mode:"start",game:null,timer:null,bbox:[],minesweeperOptions:{enableSpeciesDisplay:!0,size:20,geotiff:{projection:"EPSG:4326",url:"https://eox-ideas.s3.eu-central-1.amazonaws.com/indicator2/AR3_wildlife_1.tif"},minColor:{r:0,g:100,b:0,a:.6},maxColor:{r:0,g:255,b:0,a:.6},minValue:1,maxValue:8,locations:[{name:"Global Coverage",bbox:[-24,33,42,71],horizontalExtent:5,isMineCondition:n=>n>=3.5}]},elapsedSeconds:0});async function ps(n){if(!n)return;U.minesweeperOptions=n,document.addEventListener("minesweeper:start",eh),document.addEventListener("minesweeper:continue",th),document.addEventListener("minesweeper:win",Zl),document.addEventListener("minesweeper:gameover",Jl),document.addEventListener("minesweeper:restart",Yl);const t=Ql();let e=new Date;Oo||(e=new Date(bs.states.datetime.value));let a=e.toDateString();const i=U.minesweeperOptions.locations[0],s=Co(i.bbox,i.horizontalExtent,a);U.bbox=s;let o=(await ko(s,To)).length>0;for(;!o;){a+="0";const c=Co(i.bbox,i.horizontalExtent,a);(await ko(c,To)).length>0&&(o=!0,U.bbox=c)}U.game=new U3(t,{...U.minesweeperOptions,bbox:U.bbox}),U.isEnabled=!0,U.isDialogEnabled=!0;const l=Rh(U.bbox,"EPSG:4326",t.getView().getProjection());t.getView().fit(l,{duration:500}),Oo=!1}function ys(){var n;(n=U.game)!=null&&n.vectorLayer&&Ql().getLayers().getArray().find(a=>a.get("id")==="AnalysisGroup").getLayers().remove(wh(U.game.vectorLayer)),U.game&&U.game.removeEventListeners(),U.game=null,U.isEnabled=!1,U.isDialogEnabled=!1,document.removeEventListener("minesweeper:start",eh),document.removeEventListener("minesweeper:continue",th),document.removeEventListener("minesweeper:win",Zl),document.removeEventListener("minesweeper:gameover",Jl),document.removeEventListener("minesweeper:restart",Yl)}async function Yl(){if(console.log("Minesweeper::Restart"),await ys(),U.mode="start",!U.minesweeperOptions){console.error("Minesweeper options are not set");return}await ps(U.minesweeperOptions)}async function Zl(){U.timer&&(clearInterval(U.timer),U.mode="win",U.isDialogEnabled=!0)}function Jl(){U.timer&&(clearInterval(U.timer),U.mode="gameover",U.isDialogEnabled=!0)}function Ql(){var n;return(n=bs.states.mapEl.value)==null?void 0:n.map}function th(){var n;(n=U.game)!=null&&n.isGameCompleted&&document.dispatchEvent(new Event("minesweeper:win"))}function eh(){U.elapsedSeconds=0,console.info("Minesweeper::StartTimer"),U.timer=setInterval(()=>{U.elapsedSeconds+=1},1e3)}const V3=".btn-open[data-v-cb6bf022]{border-radius:4px 4px 0 0!important}",j3={class:"d-flex flex-column align-strech fill-height fill-width"},H3={__name:"index",props:{minesweeperOptions:{type:Object,required:!0}},setup(n){setTimeout(()=>{ps(n.minesweeperOptions)},1e3);const t=mh(()=>U.game?U.game.mineCount-U.game.flagCount:0);return gh([()=>n.minesweeperOptions,()=>bs.states.datetime.value],async()=>{ys(),setTimeout(()=>{ps(n.minesweeperOptions)},1e3)}),ph(()=>{ys()}),(e,a)=>{var i;return bh(),yh("span",j3,[lr(Sh,{color:"primary",height:"50%",class:"btn-open"},{default:xh(()=>[vh(Mh(t.value)+" 💣 remaining",1)]),_:1}),lr(lc,{mode:Te(U).mode,game:Te(U).game,elapsedSeconds:Te(U).elapsedSeconds,"is-enabled":Te(U).isDialogEnabled,bbox:Te(U).bbox,enableSpeciesDisplay:(i=Te(U).minesweeperOptions)==null?void 0:i.enableSpeciesDisplay,onClose:a[0]||(a[0]=s=>Te(U).isDialogEnabled=!1)},null,8,["mode","game","elapsedSeconds","is-enabled","bbox","enableSpeciesDisplay"])])}}},K3=Eh(H3,[["styles",[V3]],["__scopeId","data-v-cb6bf022"]]),_2=Object.freeze(Object.defineProperty({__proto__:null,default:K3},Symbol.toStringTag,{value:"Module"}));export{o2 as L,l2 as a,xl as g,_2 as i};
