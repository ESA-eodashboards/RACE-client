import{j as b,s as A,a as B,k as f,n as y,i as D,h as w,o as F,p as N,q}from"./eo-dash.CPHiprPG.js";import{h as G,p as H,c,o as i,e as C,K as I,k as h,r as J,j as g,t as K}from"./framework.Dm38Ekw3.js";import"./commonjsHelpers.BosuxZz1.js";const O={class:"d-flex flex-column"},P=["for"],R={key:0,class:"mt-2 mb-2"},U={__name:"EodashLayerControl",props:{map:{type:String,default:"first"},tools:{type:Array,default:()=>["datetime","info","config","legend","opacity"]},title:{type:String||Boolean,default:"Layers"},cssVars:{type:Object}},setup(l){const o=l,_={tools:o.tools,style:o.cssVars},{selectedCompareStac:v,selectedStac:x}=A(B()),E=G(()=>o.map==="second"?f.value!==null&&v.value!==null:y.value!==null&&x.value!==null),k=o.map==="second"?D:w,r=o.map==="second"?f:y,S=H(null),V=async e=>{var d;const{layer:n,datetime:L}=e.detail,u=await q(k,n);let s=[];u&&(s=await u.updateLayerJson(L,n.get("id"),o.map));const t=(d=s==null?void 0:s.find(a=>{var m;return((m=a==null?void 0:a.properties)==null?void 0:m.id)==="AnalysisGroup"}))==null?void 0:d.layers;t!=null&&t.length&&(t==null||t.forEach(a=>{a.properties.layerControlExpand=!0,a.properties.layerControlToolsExpand=!0}),r.value.layers=s)};let p;const T=e=>{clearTimeout(p),p=setTimeout(()=>{V(e)},500)},j=e=>{o.map==="second"?F.value=e.detail.jsonformValue:N.value=e.detail.jsonformValue};return(e,n)=>(i(),c("span",O,[E.value?(i(),c("eox-layercontrol",I({key:h(r)},_,{for:h(r),"onDatetime:updated":T,toolsAsList:"true",style:{"--eox-background-color":"transparent"},ref_key:"eoxLayercontrol",ref:S,"on:layerConfig:change":j}),[J(e.$slots,"layerstitle",{},()=>[g("div",null,[l.title?(i(),c("p",R,[g("strong",null,K(l.title),1)])):C("v-if",!0)])],!0)],16,P)):C("v-if",!0)]))}},Q=b(U,[["__scopeId","data-v-88d02d9c"]]);export{Q as default};
