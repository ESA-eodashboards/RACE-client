const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/raw-Ctlamky6.lG6ojroe.js","assets/chunks/basedecoder-DZxXIv4c.B2c5_Eok.js","assets/chunks/lzw-D2MxT2zA.DmRYnG5C.js","assets/chunks/jpeg-CsvjaiEQ.A0lbw6YY.js","assets/chunks/deflate-BsBbGVWD.DOOJQnHL.js","assets/chunks/pako.esm-KbdoS3Oq.BkaqWuDM.js","assets/chunks/packbits-DJxVZ9kH.CBEwDSj4.js","assets/chunks/lerc-7-r7dJD_.DAoYcDPM.js","assets/chunks/framework.Dm38Ekw3.js","assets/chunks/MinesweeperDialog-Dernl56J.tpReN7PG.js","assets/chunks/eo-dash.CPHiprPG.js","assets/chunks/commonjsHelpers.BosuxZz1.js","assets/chunks/SpeciesList-1bnbZrom.CyLqhcVg.js","assets/chunks/VDialog-CUzo68om.TCgTjLuu.js","assets/chunks/VOverlay-Ddm_9SBp.Cyzcwg5E.js","assets/chunks/forwardRefs-CaZFbTfA.DOqmOYW6.js","assets/chunks/transition-CZdy2yvn.Dw1vD-Kp.js","assets/chunks/VCard-8DiJvIi_.DQO0hq9k.js","assets/chunks/VImg-BYdM_NvK.WlgHlIpj.js","assets/chunks/easing-CH0-9wR8.CTB3jml5.js","assets/chunks/webimage-Bg_w2qlD.C0wZFOAS.js"])))=>i.map(i=>d[i]);
var ch=Object.defineProperty;var _h=(n,t,e)=>t in n?ch(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var ir=(n,t,e)=>_h(n,typeof t!="symbol"?t+"":t,e);import{h as fh,ag as Ll,q as dh,x as mh,c as gh,o as ph,G as sr,w as yh,a as bh,t as vh,k as Ne,ak as xh,a0 as He}from"./framework.Dm38Ekw3.js";import{M as Mh,g as wh}from"./MinesweeperDialog-Dernl56J.tpReN7PG.js";import{j as Eh,V as Sh,bh as Rh,bg as ms,bi as gs,bj as pt,bk as rt,bl as We,bm as qn,bn as ue,bo as Ih,bp as Wn,bq as na,br as Ah,bs as Ch,bt as Nn,bu as Tl,bv as Ol,bw as Dl,bx as xn,by as kh,bz as Lh,bA as Zi,bB as ps,bC as ti,bD as he,bE as pa,bF as Pn,bG as Yt,bH as ys,bI as Th,bJ as Oh,bK as ya,bL as Nl,bM as Ue,bN as Dh,bO as Nh,bP as Ph,bQ as Fh,bR as At,bS as aa,bT as Bh,bU as Gh,bV as Xn,bW as _t,bX as Uh,bY as $n,bZ as zh,b_ as ut,b$ as bs,c0 as ge,c1 as rr,c2 as Vh,c3 as jh,c4 as lr,c5 as Hh,c6 as Pl,c7 as Kh,c8 as or,c9 as hr,ca as Ji,cb as qh,cc as Wh,cd as Xh,ce as $h,cf as Qi,cg as Yh,ch as Zh,ci as La,cj as ur,ck as cr,cl as Jh,cm as Qh,cn as tu,co as eu,cp as nu,cq as $t,cr as au,cs as iu,ct as su,cu as ru,cv as lu}from"./eo-dash.CPHiprPG.js";import{i as ou,e as hu}from"./easing-CH0-9wR8.CTB3jml5.js";import"./SpeciesList-1bnbZrom.CyLqhcVg.js";import"./commonjsHelpers.BosuxZz1.js";import"./VDialog-CUzo68om.TCgTjLuu.js";import"./VOverlay-Ddm_9SBp.Cyzcwg5E.js";import"./forwardRefs-CaZFbTfA.DOqmOYW6.js";import"./transition-CZdy2yvn.Dw1vD-Kp.js";import"./VCard-8DiJvIi_.DQO0hq9k.js";import"./VImg-BYdM_NvK.WlgHlIpj.js";const an={ADD:"add",REMOVE:"remove"},_r={LENGTH:"length"};class Ta extends ps{constructor(t,e,a){super(t),this.element=e,this.index=a}}class uu extends xn{constructor(t,e){if(super(),e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let a=0,i=this.array_.length;a<i;++a)this.assertUnique_(this.array_[a],a);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,a=t.length;e<a;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let a=0,i=e.length;a<i;++a)t(e[a],a,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(_r.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Ta(an.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let a=0,i=e.length;a<i;++a)if(e[a]===t)return this.removeAt(a)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Ta(an.REMOVE,e,t)),e}setAt(t,e){const a=this.getLength();if(t>=a){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Ta(an.REMOVE,i,t)),this.dispatchEvent(new Ta(an.ADD,e,t))}updateLength_(){this.set(_r.LENGTH,this.array_.length)}assertUnique_(t,e){for(let a=0,i=this.array_.length;a<i;++a)if(this.array_[a]===t&&a!==e)throw new Error("Duplicate item added to a unique collection")}}const Pe={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose"},Ee=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"";Ee.includes("firefox");const cu=Ee.includes("safari")&&!Ee.includes("chrom");cu&&(Ee.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Ee));Ee.includes("webkit")&&Ee.includes("edge");Ee.includes("macintosh");const Fl=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,_u=typeof Image<"u"&&Image.prototype.decode;(function(){let n=!1;try{const t=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return n})();const j={IDLE:0,LOADING:1,LOADED:2,ERROR:3},fr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var dr={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function fu(n){var u,c;var t,e=[],a=1,i;if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(n=String(n).toLowerCase(),fr[n])e=fr[n].slice(),i="rgb";else if(n==="transparent")a=0,i="rgb",e=[0,0,0];else if(n[0]==="#"){var s=n.slice(1),r=s.length,l=r<=4;a=1,l?(e=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],r===4&&(a=parseInt(s[3]+s[3],16)/255)):(e=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],r===8&&(a=parseInt(s[6]+s[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),i="rgb"}else if(t=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(n)){var o=t[1];i=o.replace(/a$/,"");var h=i==="cmyk"?4:i==="gray"?1:3;e=t[2].trim().split(/\s*[,\/]\s*|\s+/),i==="color"&&(i=e.shift()),e=e.map(function(_,f){if(_[_.length-1]==="%")return _=parseFloat(_)/100,f===3?_:i==="rgb"?_*255:i[0]==="h"||i[0]==="l"&&!f?_*100:i==="lab"?_*125:i==="lch"?f<2?_*150:_*360:i[0]==="o"&&!f?_:i==="oklab"?_*.4:i==="oklch"?f<2?_*.4:_*360:_;if(i[f]==="h"||f===2&&i[i.length-1]==="h"){if(dr[_]!==void 0)return dr[_];if(_.endsWith("deg"))return parseFloat(_);if(_.endsWith("turn"))return parseFloat(_)*360;if(_.endsWith("grad"))return parseFloat(_)*360/400;if(_.endsWith("rad"))return parseFloat(_)*180/Math.PI}return _==="none"?0:parseFloat(_)}),a=e.length>h?e.pop():1}else/[0-9](?:\s|\/|,)/.test(n)&&(e=n.match(/([0-9]+)/g).map(function(_){return parseFloat(_)}),i=((c=(u=n.match(/([a-z])/ig))==null?void 0:u.join(""))==null?void 0:c.toLowerCase())||"rgb");return{space:i,values:e,alpha:a}}const ia={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},Ti={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(n){var t=n[0]/360,e=n[1]/100,a=n[2]/100,i,s,r,l,o,h=0;if(e===0)return o=a*255,[o,o,o];for(s=a<.5?a*(1+e):a+e-a*e,i=2*a-s,l=[0,0,0];h<3;)r=t+1/3*-(h-1),r<0?r++:r>1&&r--,o=6*r<1?i+(s-i)*6*r:2*r<1?s:3*r<2?i+(s-i)*(2/3-r)*6:i,l[h++]=o*255;return l}};ia.hsl=function(n){var t=n[0]/255,e=n[1]/255,a=n[2]/255,i=Math.min(t,e,a),s=Math.max(t,e,a),r=s-i,l,o,h;return s===i?l=0:t===s?l=(e-a)/r:e===s?l=2+(a-t)/r:a===s&&(l=4+(t-e)/r),l=Math.min(l*60,360),l<0&&(l+=360),h=(i+s)/2,s===i?o=0:h<=.5?o=r/(s+i):o=r/(2-s-i),[l,o*100,h*100]};function du(n){Array.isArray(n)&&n.raw&&(n=String.raw(...arguments)),n instanceof Number&&(n=+n);var t,e=fu(n);if(!e.space)return[];const a=e.space[0]==="h"?Ti.min:ia.min,i=e.space[0]==="h"?Ti.max:ia.max;return t=Array(3),t[0]=Math.min(Math.max(e.values[0],a[0]),i[0]),t[1]=Math.min(Math.max(e.values[1],a[1]),i[1]),t[2]=Math.min(Math.max(e.values[2],a[2]),i[2]),e.space[0]==="h"&&(t=Ti.rgb(t)),t.push(Math.min(Math.max(e.alpha,0),1)),t}var lt={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};lt.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};lt.max=lt.whitepoint[2].D65;lt.rgb=function(n,t){t=t||lt.whitepoint[2].E;var e=n[0]/t[0],a=n[1]/t[1],i=n[2]/t[2],s,r,l;return s=e*3.240969941904521+a*-1.537383177570093+i*-.498610760293,r=e*-.96924363628087+a*1.87596750150772+i*.041555057407175,l=e*.055630079696993+a*-.20397695888897+i*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r=r*12.92,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:l=l*12.92,s=Math.min(Math.max(0,s),1),r=Math.min(Math.max(0,r),1),l=Math.min(Math.max(0,l),1),[s*255,r*255,l*255]};ia.xyz=function(n,t){var e=n[0]/255,a=n[1]/255,i=n[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var s=e*.41239079926595+a*.35758433938387+i*.18048078840183,r=e*.21263900587151+a*.71516867876775+i*.072192315360733,l=e*.019330818715591+a*.11919477979462+i*.95053215224966;return t=t||lt.whitepoint[2].E,[s*t[0],r*t[1],l*t[2]]};const vs={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(n,t,e){var a,i,s,r,l,o,h,u,c,_,f,d,m;if(s=n[0],r=n[1],l=n[2],s===0)return[0,0,0];var g=.0011070564598794539;return t=t||"D65",e=e||2,c=lt.whitepoint[e][t][0],_=lt.whitepoint[e][t][1],f=lt.whitepoint[e][t][2],d=4*c/(c+15*_+3*f),m=9*_/(c+15*_+3*f),a=r/(13*s)+d||0,i=l/(13*s)+m||0,h=s>8?_*Math.pow((s+16)/116,3):_*s*g,o=h*9*a/(4*i)||0,u=h*(12-3*a-20*i)/(4*i)||0,[o,h,u]}};lt.luv=function(n,t,e){var a,i,s,r,l,o,h,u,c,_,f,d,m,g=.008856451679035631,p=903.2962962962961;t=t||"D65",e=e||2,c=lt.whitepoint[e][t][0],_=lt.whitepoint[e][t][1],f=lt.whitepoint[e][t][2],d=4*c/(c+15*_+3*f),m=9*_/(c+15*_+3*f),o=n[0],h=n[1],u=n[2],a=4*o/(o+15*h+3*u)||0,i=9*h/(o+15*h+3*u)||0;var y=h/_;return s=y<=g?p*y:116*Math.pow(y,1/3)-16,r=13*s*(a-d),l=13*s*(i-m),[s,r,l]};var Bl={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(n){var t=n[0],e=n[1],a=n[2],i,s,r;return r=a/360*2*Math.PI,i=e*Math.cos(r),s=e*Math.sin(r),[t,i,s]},xyz:function(n){return vs.xyz(Bl.luv(n))}};vs.lchuv=function(n){var t=n[0],e=n[1],a=n[2],i=Math.sqrt(e*e+a*a),s=Math.atan2(a,e),r=s*360/2/Math.PI;return r<0&&(r+=360),[t,i,r]};lt.lchuv=function(n){return vs.lchuv(lt.luv(n))};const xs=[NaN,NaN,NaN,0];function mu(n){return typeof n=="string"?n:ws(n)}const gu=1024,Ln={};let Oi=0;function pu(n){if(n.length===4)return n;const t=n.slice();return t[3]=1,t}function mr(n){const t=lt.lchuv(ia.xyz(n));return t[3]=n[3],t}function yu(n){const t=lt.rgb(Bl.xyz(n));return t[3]=n[3],t}function Ms(n){if(n==="none")return xs;if(Ln.hasOwnProperty(n))return Ln[n];if(Oi>=gu){let e=0;for(const a in Ln)e++&3||(delete Ln[a],--Oi)}const t=du(n);if(t.length!==4)throw new Error('failed to parse "'+n+'" as color');for(const e of t)if(isNaN(e))throw new Error('failed to parse "'+n+'" as color');return Gl(t),Ln[n]=t,++Oi,t}function dn(n){return Array.isArray(n)?n:Ms(n)}function Gl(n){return n[0]=_t(n[0]+.5|0,0,255),n[1]=_t(n[1]+.5|0,0,255),n[2]=_t(n[2]+.5|0,0,255),n[3]=_t(n[3],0,1),n}function ws(n){let t=n[0];t!=(t|0)&&(t=t+.5|0);let e=n[1];e!=(e|0)&&(e=e+.5|0);let a=n[2];a!=(a|0)&&(a=a+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+t+","+e+","+a+","+i+")"}function St(n,t,e,a){let i;return e&&e.length?i=e.shift():Fl?i=new OffscreenCanvas(n||300,t||300):i=document.createElement("canvas"),n&&(i.width=n),t&&(i.height=t),i.getContext("2d",a)}let Di;function ei(){return Di||(Di=St(1,1)),Di}function bu(n){const t=n.canvas;t.width=1,t.height=1,n.clearRect(0,0,1,1)}function vu(n,t){return new Promise((e,a)=>{function i(){r(),e(n)}function s(){r(),a(new Error("Image load error"))}function r(){n.removeEventListener("load",i),n.removeEventListener("error",s)}n.addEventListener("load",i),n.addEventListener("error",s)})}function xu(n,t){return t&&(n.src=t),n.src&&_u?new Promise((e,a)=>n.decode().then(()=>e(n)).catch(i=>n.complete&&n.width?e(n):a(i))):vu(n)}class Mu{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const a=this.cache_[e];!(t++&3)&&!a.hasListener()&&(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,a){const i=Ni(t,e,a);return i in this.cache_?this.cache_[i]:null}getPattern(t,e,a){const i=Ni(t,e,a);return i in this.patternCache_?this.patternCache_[i]:null}set(t,e,a,i,s){const r=Ni(t,e,a),l=r in this.cache_;this.cache_[r]=i,s&&(i.getImageState()===j.IDLE&&i.load(),i.getImageState()===j.LOADING?i.ready().then(()=>{this.patternCache_[r]=ei().createPattern(i.getImage(1),"repeat")}):this.patternCache_[r]=ei().createPattern(i.getImage(1),"repeat")),l||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function Ni(n,t,e){const a=e?dn(e):"null";return t+":"+n+":"+a}const Jt=new Mu;let Tn=null;class Ul extends iu{constructor(t,e,a,i,s){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=a,this.canvas_={},this.color_=s,this.imageState_=i===void 0?j.IDLE:i,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===j.LOADED){Tn||(Tn=St(1,1,void 0,{willReadFrequently:!0})),Tn.drawImage(this.image_,0,0);try{Tn.getImageData(0,0,1,1),this.tainted_=!1}catch{Tn=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(ue.CHANGE)}handleImageError_(){this.imageState_=j.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=j.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],a=St(t,e);a.fillRect(0,0,t,e),this.hitDetectionImage_=a.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===j.IDLE){this.image_||this.initializeImage_(),this.imageState_=j.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&xu(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==j.LOADED)return;const e=this.image_,a=St(Math.ceil(e.width*t),Math.ceil(e.height*t)),i=a.canvas;a.scale(t,t),a.drawImage(e,0,0),a.globalCompositeOperation="multiply",a.fillStyle=mu(this.color_),a.fillRect(0,0,i.width/t,i.height/t),a.globalCompositeOperation="destination-in",a.drawImage(e,0,0),this.canvas_[t]=i}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===j.LOADED||this.imageState_===j.ERROR)t();else{const e=()=>{(this.imageState_===j.LOADED||this.imageState_===j.ERROR)&&(this.removeEventListener(ue.CHANGE,e),t())};this.addEventListener(ue.CHANGE,e)}})),this.ready_}}function Es(n,t,e,a,i,s){let r=t===void 0?void 0:Jt.get(t,e,i);return r||(r=new Ul(n,n&&"src"in n?n.src||void 0:t,e,a,i),Jt.set(t,e,i,r,s)),s&&r&&!Jt.getPattern(t,e,i)&&Jt.set(t,e,i,r,s),r}function Qt(n){return n?Array.isArray(n)?ws(n):typeof n=="object"&&"src"in n?wu(n):n:null}function wu(n){if(!n.offset||!n.size)return Jt.getPattern(n.src,"anonymous",n.color);const t=n.src+":"+n.offset,e=Jt.getPattern(t,void 0,n.color);if(e)return e;const a=Jt.get(n.src,"anonymous",null);if(a.getImageState()!==j.LOADED)return null;const i=St(n.size[0],n.size[1]);return i.drawImage(a.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),Es(i.canvas,t,void 0,j.LOADED,n.color,!0),Jt.getPattern(t,void 0,n.color)}class zl{drawCustom(t,e,a,i,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,a){}drawFeature(t,e,a){}drawGeometryCollection(t,e,a){}drawLineString(t,e,a){}drawMultiLineString(t,e,a){}drawMultiPoint(t,e,a){}drawMultiPolygon(t,e,a){}drawPoint(t,e,a){}drawPolygon(t,e,a){}drawText(t,e,a){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}const Eu=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),gr=["style","variant","weight","size","lineHeight","family"],Vl=function(n){const t=n.match(Eu);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let a=0,i=gr.length;a<i;++a){const s=t[a+1];s!==void 0&&(e[gr[a]]=s)}return e.families=e.family.split(/,\s?/),e},jl="10px sans-serif",xt="#000",mn="round",ce=[],_e=0,gn="round",sa=10,ra="#000",la="center",ni="middle",Fe=[0,0,0,0],oa=1,pe=new xn;let Qe=null,ts;const es={},Su=function(){const t="32px ",e=["monospace","serif"],a=e.length,i="wmytzilWMYTZIL@#/&?$%10";let s,r;function l(h,u,c){let _=!0;for(let f=0;f<a;++f){const d=e[f];if(r=ai(h+" "+u+" "+t+d,i),c!=d){const m=ai(h+" "+u+" "+t+c+","+d,i);_=_&&m!=r}}return!!_}function o(){let h=!0;const u=pe.getKeys();for(let c=0,_=u.length;c<_;++c){const f=u[c];if(pe.get(f)<100){const[d,m,g]=f.split(`
`);l(d,m,g)?(su(es),Qe=null,ts=void 0,pe.set(f,100)):(pe.set(f,pe.get(f)+1,!0),h=!1)}}h&&(clearInterval(s),s=void 0)}return function(h){const u=Vl(h);if(!u)return;const c=u.families;for(let _=0,f=c.length;_<f;++_){const d=c[_],m=u.style+`
`+u.weight+`
`+d;pe.get(m)===void 0&&(pe.set(m,100,!0),l(u.style,u.weight,d)||(pe.set(m,0,!0),s===void 0&&(s=setInterval(o,32))))}}}(),Ru=function(){let n;return function(t){let e=es[t];if(e==null){if(Fl){const a=Vl(t),i=Hl(t,"Žg");e=(isNaN(Number(a.lineHeight))?1.2:Number(a.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=t,document.body.appendChild(n),e=n.offsetHeight,document.body.removeChild(n);es[t]=e}return e}}();function Hl(n,t){return Qe||(Qe=St(1,1)),n!=ts&&(Qe.font=n,ts=Qe.font),Qe.measureText(t)}function ai(n,t){return Hl(n,t).width}function pr(n,t,e){if(t in e)return e[t];const a=t.split(`
`).reduce((i,s)=>Math.max(i,ai(n,s)),0);return e[t]=a,a}function Iu(n,t){const e=[],a=[],i=[];let s=0,r=0,l=0,o=0;for(let h=0,u=t.length;h<=u;h+=2){const c=t[h];if(c===`
`||h===u){s=Math.max(s,r),i.push(r),r=0,l+=o,o=0;continue}const _=t[h+1]||n.font,f=ai(_,c);e.push(f),r+=f;const d=Ru(_);a.push(d),o=Math.max(o,d)}return{width:s,height:l,widths:e,heights:a,lineWidths:i}}function Au(n,t,e,a,i,s,r,l,o,h,u){n.save(),e!==1&&(n.globalAlpha===void 0?n.globalAlpha=c=>c.globalAlpha*=e:n.globalAlpha*=e),t&&n.transform.apply(n,t),a.contextInstructions?(n.translate(o,h),n.scale(u[0],u[1]),Cu(a,n)):u[0]<0||u[1]<0?(n.translate(o,h),n.scale(u[0],u[1]),n.drawImage(a,i,s,r,l,0,0,r,l)):n.drawImage(a,i,s,r,l,o,h,r*u[0],l*u[1]),n.restore()}function Cu(n,t){const e=n.contextInstructions;for(let a=0,i=e.length;a<i;a+=2)Array.isArray(e[a+1])?t[e[a]].apply(t,e[a+1]):t[e[a]]=e[a+1]}class ku extends zl{constructor(t,e,a,i,s,r,l){super(),this.context_=t,this.pixelRatio_=e,this.extent_=a,this.transform_=i,this.transformRotation_=i?Wh(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=r,this.userTransform_=l,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Ue()}drawImages_(t,e,a,i){if(!this.image_)return;const s=$n(t,e,a,i,this.transform_,this.pixelCoordinates_),r=this.context_,l=this.tmpLocalTransform_,o=r.globalAlpha;this.imageOpacity_!=1&&(r.globalAlpha=o*this.imageOpacity_);let h=this.imageRotation_;this.transformRotation_===0&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let u=0,c=s.length;u<c;u+=2){const _=s[u]-this.imageAnchorX_,f=s[u+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const d=_+this.imageAnchorX_,m=f+this.imageAnchorY_;aa(l,d,m,1,1,h,-d,-m),r.save(),r.transform.apply(r,l),r.translate(d,m),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.restore()}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,_,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(r.globalAlpha=o)}drawText_(t,e,a,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=$n(t,e,a,i,this.transform_,this.pixelCoordinates_),r=this.context_;let l=this.textRotation_;for(this.transformRotation_===0&&(l-=this.viewRotation_),this.textRotateWithView_&&(l+=this.viewRotation_);e<a;e+=i){const o=s[e]+this.textOffsetX_,h=s[e+1]+this.textOffsetY_;l!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(r.save(),r.translate(o-this.textOffsetX_,h-this.textOffsetY_),r.rotate(l),r.translate(this.textOffsetX_,this.textOffsetY_),r.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&r.strokeText(this.text_,0,0),this.textFillState_&&r.fillText(this.text_,0,0),r.restore()):(this.textStrokeState_&&r.strokeText(this.text_,o,h),this.textFillState_&&r.fillText(this.text_,o,h))}}moveToLineTo_(t,e,a,i,s){const r=this.context_,l=$n(t,e,a,i,this.transform_,this.pixelCoordinates_);r.moveTo(l[0],l[1]);let o=l.length;s&&(o-=2);for(let h=2;h<o;h+=2)r.lineTo(l[h],l[h+1]);return s&&r.closePath(),a}drawRings_(t,e,a,i){for(let s=0,r=a.length;s<r;++s)e=this.moveToLineTo_(t,e,a[s],i,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Yt(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=Xh(t,this.transform_,this.pixelCoordinates_),a=e[2]-e[0],i=e[3]-e[1],s=Math.sqrt(a*a+i*i),r=this.context_;r.beginPath(),r.arc(e[0],e[1],s,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const a=e.getGeometryFunction()(t);a&&(this.setStyle(e),this.drawGeometry(a))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let a=0,i=e.length;a<i;++a)this.drawGeometry(e[a])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),a=t.getStride();this.image_&&this.drawImages_(e,0,e.length,a),this.text_!==""&&this.drawText_(e,0,e.length,a)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),a=t.getStride();this.image_&&this.drawImages_(e,0,e.length,a),this.text_!==""&&this.drawText_(e,0,e.length,a)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Yt(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,a=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(a,0,a.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(Yt(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const a=this.context_,i=t.getFlatCoordinates();let s=0;const r=t.getEnds(),l=t.getStride();a.beginPath();for(let o=0,h=r.length;o<h;++o)s=this.moveToLineTo_(i,s,r[o],l,!1);a.stroke()}if(this.text_!==""){const a=t.getFlatMidpoints();this.drawText_(a,0,a.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Yt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Yt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,a=t.getOrientedFlatCoordinates();let i=0;const s=t.getEndss(),r=t.getStride();e.beginPath();for(let l=0,o=s.length;l<o;++l){const h=s[l];i=this.drawRings_(a,i,h,r)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,a=this.contextFillState_;a?a.fillStyle!=t.fillStyle&&(a.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,a=this.contextStrokeState_;a?(a.lineCap!=t.lineCap&&(a.lineCap=t.lineCap,e.lineCap=t.lineCap),ya(a.lineDash,t.lineDash)||e.setLineDash(a.lineDash=t.lineDash),a.lineDashOffset!=t.lineDashOffset&&(a.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),a.lineJoin!=t.lineJoin&&(a.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),a.lineWidth!=t.lineWidth&&(a.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),a.miterLimit!=t.miterLimit&&(a.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),a.strokeStyle!=t.strokeStyle&&(a.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,a=this.contextTextState_,i=t.textAlign?t.textAlign:la;a?(a.font!=t.font&&(a.font=t.font,e.font=t.font),a.textAlign!=i&&(a.textAlign=i,e.textAlign=i),a.textBaseline!=t.textBaseline&&(a.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const a=t.getColor();this.fillState_={fillStyle:Qt(a||xt)}}if(!e)this.strokeState_=null;else{const a=e.getColor(),i=e.getLineCap(),s=e.getLineDash(),r=e.getLineDashOffset(),l=e.getLineJoin(),o=e.getWidth(),h=e.getMiterLimit(),u=s||ce;this.strokeState_={lineCap:i!==void 0?i:mn,lineDash:this.pixelRatio_===1?u:u.map(c=>c*this.pixelRatio_),lineDashOffset:(r||_e)*this.pixelRatio_,lineJoin:l!==void 0?l:gn,lineWidth:(o!==void 0?o:oa)*this.pixelRatio_,miterLimit:h!==void 0?h:sa,strokeStyle:Qt(a||ra)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const a=t.getPixelRatio(this.pixelRatio_),i=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*a,this.imageAnchorY_=i[1]*a,this.imageHeight_=e[1]*a,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const r=t.getScaleArray();this.imageScale_=[r[0]*this.pixelRatio_/a,r[1]*this.pixelRatio_/a],this.imageWidth_=e[0]*a}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const f=e.getColor();this.textFillState_={fillStyle:Qt(f||xt)}}const a=t.getStroke();if(!a)this.textStrokeState_=null;else{const f=a.getColor(),d=a.getLineCap(),m=a.getLineDash(),g=a.getLineDashOffset(),p=a.getLineJoin(),y=a.getWidth(),v=a.getMiterLimit();this.textStrokeState_={lineCap:d!==void 0?d:mn,lineDash:m||ce,lineDashOffset:g||_e,lineJoin:p!==void 0?p:gn,lineWidth:y!==void 0?y:oa,miterLimit:v!==void 0?v:sa,strokeStyle:Qt(f||ra)}}const i=t.getFont(),s=t.getOffsetX(),r=t.getOffsetY(),l=t.getRotateWithView(),o=t.getRotation(),h=t.getScaleArray(),u=t.getText(),c=t.getTextAlign(),_=t.getTextBaseline();this.textState_={font:i!==void 0?i:jl,textAlign:c!==void 0?c:la,textBaseline:_!==void 0?_:ni},this.text_=u!==void 0?Array.isArray(u)?u.reduce((f,d,m)=>f+=m%2?" ":d,""):u:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=r!==void 0?this.pixelRatio_*r:0,this.textRotateWithView_=l!==void 0?l:!1,this.textRotation_=o!==void 0?o:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}}}const Lu=.5,Kl={Point:Gu,LineString:Pu,Polygon:zu,MultiPoint:Uu,MultiLineString:Fu,MultiPolygon:Bu,GeometryCollection:Nu,Circle:Ou};function Tu(n,t){return parseInt(rt(n),10)-parseInt(rt(t),10)}function yr(n,t){const e=ql(n,t);return e*e}function ql(n,t){return Lu*n/t}function Ou(n,t,e,a,i){const s=e.getFill(),r=e.getStroke();if(s||r){const o=n.getBuilder(e.getZIndex(),"Circle");o.setFillStrokeStyle(s,r),o.drawCircle(t,a,i)}const l=e.getText();if(l&&l.getText()){const o=n.getBuilder(e.getZIndex(),"Text");o.setTextStyle(l),o.drawText(t,a)}}function br(n,t,e,a,i,s,r,l){const o=[],h=e.getImage();if(h){let _=!0;const f=h.getImageState();f==j.LOADED||f==j.ERROR?_=!1:f==j.IDLE&&h.load(),_&&o.push(h.ready())}const u=e.getFill();u&&u.loading()&&o.push(u.ready());const c=o.length>0;return c&&Promise.all(o).then(()=>i(null)),Du(n,t,e,a,s,r,l),c}function Du(n,t,e,a,i,s,r){const l=e.getGeometryFunction()(t);if(!l)return;const o=l.simplifyTransformed(a,i);if(e.getRenderer())Wl(n,o,e,t,r);else{const u=Kl[o.getType()];u(n,o,e,t,r,s)}}function Wl(n,t,e,a,i){if(t.getType()=="GeometryCollection"){const r=t.getGeometries();for(let l=0,o=r.length;l<o;++l)Wl(n,r[l],e,a,i);return}n.getBuilder(e.getZIndex(),"Default").drawCustom(t,a,e.getRenderer(),e.getHitDetectionRenderer(),i)}function Nu(n,t,e,a,i,s){const r=t.getGeometriesArray();let l,o;for(l=0,o=r.length;l<o;++l){const h=Kl[r[l].getType()];h(n,r[l],e,a,i,s)}}function Pu(n,t,e,a,i){const s=e.getStroke();if(s){const l=n.getBuilder(e.getZIndex(),"LineString");l.setFillStrokeStyle(null,s),l.drawLineString(t,a,i)}const r=e.getText();if(r&&r.getText()){const l=n.getBuilder(e.getZIndex(),"Text");l.setTextStyle(r),l.drawText(t,a,i)}}function Fu(n,t,e,a,i){const s=e.getStroke();if(s){const l=n.getBuilder(e.getZIndex(),"LineString");l.setFillStrokeStyle(null,s),l.drawMultiLineString(t,a,i)}const r=e.getText();if(r&&r.getText()){const l=n.getBuilder(e.getZIndex(),"Text");l.setTextStyle(r),l.drawText(t,a,i)}}function Bu(n,t,e,a,i){const s=e.getFill(),r=e.getStroke();if(r||s){const o=n.getBuilder(e.getZIndex(),"Polygon");o.setFillStrokeStyle(s,r),o.drawMultiPolygon(t,a,i)}const l=e.getText();if(l&&l.getText()){const o=n.getBuilder(e.getZIndex(),"Text");o.setTextStyle(l),o.drawText(t,a,i)}}function Gu(n,t,e,a,i,s){const r=e.getImage(),l=e.getText(),o=l&&l.getText(),h=s&&r&&o?{}:void 0;if(r){if(r.getImageState()!=j.LOADED)return;const u=n.getBuilder(e.getZIndex(),"Image");u.setImageStyle(r,h),u.drawPoint(t,a,i)}if(o){const u=n.getBuilder(e.getZIndex(),"Text");u.setTextStyle(l,h),u.drawText(t,a,i)}}function Uu(n,t,e,a,i,s){const r=e.getImage(),l=r&&r.getOpacity()!==0,o=e.getText(),h=o&&o.getText(),u=s&&l&&h?{}:void 0;if(l){if(r.getImageState()!=j.LOADED)return;const c=n.getBuilder(e.getZIndex(),"Image");c.setImageStyle(r,u),c.drawMultiPoint(t,a,i)}if(h){const c=n.getBuilder(e.getZIndex(),"Text");c.setTextStyle(o,u),c.drawText(t,a,i)}}function zu(n,t,e,a,i){const s=e.getFill(),r=e.getStroke();if(s||r){const o=n.getBuilder(e.getZIndex(),"Polygon");o.setFillStrokeStyle(s,r),o.drawPolygon(t,a,i)}const l=e.getText();if(l&&l.getText()){const o=n.getBuilder(e.getZIndex(),"Text");o.setTextStyle(l),o.drawText(t,a,i)}}let Vu=!1;function ju(n,t,e,a,i,s,r){const l=new XMLHttpRequest;l.open("GET",typeof n=="function"?n(e,a,i):n,!0),t.getType()=="arraybuffer"&&(l.responseType="arraybuffer"),l.withCredentials=Vu,l.onload=function(o){if(!l.status||l.status>=200&&l.status<300){const h=t.getType();try{let u;h=="text"||h=="json"?u=l.responseText:h=="xml"?u=l.responseXML||l.responseText:h=="arraybuffer"&&(u=l.response),u?s(t.readFeatures(u,{extent:e,featureProjection:i}),t.readProjection(u)):r()}catch{r()}}else r()},l.onerror=r,l.send()}function vr(n,t){return function(e,a,i,s,r){ju(n,t,e,a,i,(l,o)=>{this.addFeatures(l),s!==void 0&&s(l)},r||gs)}}function Hu(n,t){return[[-1/0,-1/0,1/0,1/0]]}function Xl(n,t,e=0,a=n.length-1,i=Ku){for(;a>e;){if(a-e>600){const o=a-e+1,h=t-e+1,u=Math.log(o),c=.5*Math.exp(2*u/3),_=.5*Math.sqrt(u*c*(o-c)/o)*(h-o/2<0?-1:1),f=Math.max(e,Math.floor(t-h*c/o+_)),d=Math.min(a,Math.floor(t+(o-h)*c/o+_));Xl(n,t,f,d,i)}const s=n[t];let r=e,l=a;for(On(n,e,t),i(n[a],s)>0&&On(n,e,a);r<l;){for(On(n,r,l),r++,l--;i(n[r],s)<0;)r++;for(;i(n[l],s)>0;)l--}i(n[e],s)===0?On(n,e,l):(l++,On(n,l,a)),l<=t&&(e=l+1),t<=l&&(a=l-1)}}function On(n,t,e){const a=n[t];n[t]=n[e],n[e]=a}function Ku(n,t){return n<t?-1:n>t?1:0}let $l=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const a=[];if(!Da(t,e))return a;const i=this.toBBox,s=[];for(;e;){for(let r=0;r<e.children.length;r++){const l=e.children[r],o=e.leaf?i(l):l;Da(t,o)&&(e.leaf?a.push(l):Fi(t,o)?this._all(l,a):s.push(l))}e=s.pop()}return a}collides(t){let e=this.data;if(!Da(t,e))return!1;const a=[];for(;e;){for(let i=0;i<e.children.length;i++){const s=e.children[i],r=e.leaf?this.toBBox(s):s;if(Da(t,r)){if(e.leaf||Fi(t,r))return!0;a.push(s)}}e=a.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let a=0;a<t.length;a++)this.insert(t[a]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=e;else if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const a=this.data;this.data=e,e=a}this._insert(e,this.data.height-e.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=tn([]),this}remove(t,e){if(!t)return this;let a=this.data;const i=this.toBBox(t),s=[],r=[];let l,o,h;for(;a||s.length;){if(a||(a=s.pop(),o=s[s.length-1],l=r.pop(),h=!0),a.leaf){const u=qu(t,a.children,e);if(u!==-1)return a.children.splice(u,1),s.push(a),this._condense(s),this}!h&&!a.leaf&&Fi(a,i)?(s.push(a),r.push(l),l=0,o=a,a=a.children[0]):o?(l++,a=o.children[l],h=!1):a=null}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const a=[];for(;t;)t.leaf?e.push(...t.children):a.push(...t.children),t=a.pop();return e}_build(t,e,a,i){const s=a-e+1;let r=this._maxEntries,l;if(s<=r)return l=tn(t.slice(e,a+1)),Xe(l,this.toBBox),l;i||(i=Math.ceil(Math.log(s)/Math.log(r)),r=Math.ceil(s/Math.pow(r,i-1))),l=tn([]),l.leaf=!1,l.height=i;const o=Math.ceil(s/r),h=o*Math.ceil(Math.sqrt(r));xr(t,e,a,h,this.compareMinX);for(let u=e;u<=a;u+=h){const c=Math.min(u+h-1,a);xr(t,u,c,o,this.compareMinY);for(let _=u;_<=c;_+=o){const f=Math.min(_+o-1,c);l.children.push(this._build(t,_,f,i-1))}}return Xe(l,this.toBBox),l}_chooseSubtree(t,e,a,i){for(;i.push(e),!(e.leaf||i.length-1===a);){let s=1/0,r=1/0,l;for(let o=0;o<e.children.length;o++){const h=e.children[o],u=Pi(h),c=$u(t,h)-u;c<r?(r=c,s=u<s?u:s,l=h):c===r&&u<s&&(s=u,l=h)}e=l||e.children[0]}return e}_insert(t,e,a){const i=a?t:this.toBBox(t),s=[],r=this._chooseSubtree(i,this.data,e,s);for(r.children.push(t),Bn(r,i);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(i,s,e)}_split(t,e){const a=t[e],i=a.children.length,s=this._minEntries;this._chooseSplitAxis(a,s,i);const r=this._chooseSplitIndex(a,s,i),l=tn(a.children.splice(r,a.children.length-r));l.height=a.height,l.leaf=a.leaf,Xe(a,this.toBBox),Xe(l,this.toBBox),e?t[e-1].children.push(l):this._splitRoot(a,l)}_splitRoot(t,e){this.data=tn([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Xe(this.data,this.toBBox)}_chooseSplitIndex(t,e,a){let i,s=1/0,r=1/0;for(let l=e;l<=a-e;l++){const o=Fn(t,0,l,this.toBBox),h=Fn(t,l,a,this.toBBox),u=Yu(o,h),c=Pi(o)+Pi(h);u<s?(s=u,i=l,r=c<r?c:r):u===s&&c<r&&(r=c,i=l)}return i||a-e}_chooseSplitAxis(t,e,a){const i=t.leaf?this.compareMinX:Wu,s=t.leaf?this.compareMinY:Xu,r=this._allDistMargin(t,e,a,i),l=this._allDistMargin(t,e,a,s);r<l&&t.children.sort(i)}_allDistMargin(t,e,a,i){t.children.sort(i);const s=this.toBBox,r=Fn(t,0,e,s),l=Fn(t,a-e,a,s);let o=Oa(r)+Oa(l);for(let h=e;h<a-e;h++){const u=t.children[h];Bn(r,t.leaf?s(u):u),o+=Oa(r)}for(let h=a-e-1;h>=e;h--){const u=t.children[h];Bn(l,t.leaf?s(u):u),o+=Oa(l)}return o}_adjustParentBBoxes(t,e,a){for(let i=a;i>=0;i--)Bn(e[i],t)}_condense(t){for(let e=t.length-1,a;e>=0;e--)t[e].children.length===0?e>0?(a=t[e-1].children,a.splice(a.indexOf(t[e]),1)):this.clear():Xe(t[e],this.toBBox)}};function qu(n,t,e){if(!e)return t.indexOf(n);for(let a=0;a<t.length;a++)if(e(n,t[a]))return a;return-1}function Xe(n,t){Fn(n,0,n.children.length,t,n)}function Fn(n,t,e,a,i){i||(i=tn(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=t;s<e;s++){const r=n.children[s];Bn(i,n.leaf?a(r):r)}return i}function Bn(n,t){return n.minX=Math.min(n.minX,t.minX),n.minY=Math.min(n.minY,t.minY),n.maxX=Math.max(n.maxX,t.maxX),n.maxY=Math.max(n.maxY,t.maxY),n}function Wu(n,t){return n.minX-t.minX}function Xu(n,t){return n.minY-t.minY}function Pi(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function Oa(n){return n.maxX-n.minX+(n.maxY-n.minY)}function $u(n,t){return(Math.max(t.maxX,n.maxX)-Math.min(t.minX,n.minX))*(Math.max(t.maxY,n.maxY)-Math.min(t.minY,n.minY))}function Yu(n,t){const e=Math.max(n.minX,t.minX),a=Math.max(n.minY,t.minY),i=Math.min(n.maxX,t.maxX),s=Math.min(n.maxY,t.maxY);return Math.max(0,i-e)*Math.max(0,s-a)}function Fi(n,t){return n.minX<=t.minX&&n.minY<=t.minY&&t.maxX<=n.maxX&&t.maxY<=n.maxY}function Da(n,t){return t.minX<=n.maxX&&t.minY<=n.maxY&&t.maxX>=n.minX&&t.maxY>=n.minY}function tn(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function xr(n,t,e,a,i){const s=[t,e];for(;s.length;){if(e=s.pop(),t=s.pop(),e-t<=a)continue;const r=t+Math.ceil((e-t)/a/2)*a;Xl(n,r,t,e,i),s.push(t,r,r,e)}}class Mr{constructor(t){this.rbush_=new $l(t),this.items_={}}insert(t,e){const a={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(a),this.items_[rt(e)]=a}load(t,e){const a=new Array(e.length);for(let i=0,s=e.length;i<s;i++){const r=t[i],l=e[i],o={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:l};a[i]=o,this.items_[rt(l)]=o}this.rbush_.load(a)}remove(t){const e=rt(t),a=this.items_[e];return delete this.items_[e],this.rbush_.remove(a)!==null}update(t,e){const a=this.items_[rt(e)],i=[a.minX,a.minY,a.maxX,a.maxY];Tl(i,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(i){return i.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let a;for(let i=0,s=t.length;i<s;i++)if(a=e(t[i]),a)return a;return a}isEmpty(){return na(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return Zi(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}class Zu extends xn{constructor(t){super(),this.projection=kh(t.projection),this.attributions_=wr(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(a,i){e.viewResolver=a,e.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=wr(t),this.changed()}setState(t){this.state_=t,this.changed()}}function wr(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),t=>n):null}const Ot={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class ye extends ps{constructor(t,e,a){super(t),this.feature=e,this.features=a}}class Ju extends Zu{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.loader_=gs,this.format_=t.format||null,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(pt(this.format_,"`format` must be set when `url` is set"),this.loader_=vr(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:Hu;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new Mr:null,this.loadedExtentsRtree_=new Mr,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let a,i;Array.isArray(t.features)?i=t.features:t.features&&(a=t.features,i=a.getArray()),!e&&a===void 0&&(a=new uu(i)),i!==void 0&&this.addFeaturesInternal(i),a!==void 0&&this.bindFeaturesCollection_(a)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=rt(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const a=t.getGeometry();if(a){const i=a.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new ye(Ot.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof We||(this.featureChangeKeys_[t]=[qn(e,ue.CHANGE,this.handleFeatureChange_,this),qn(e,Ih.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let a=!0;if(e.getId()!==void 0){const i=String(e.getId());if(!(i in this.idIndex_))this.idIndex_[i]=e;else if(e instanceof We){const s=this.idIndex_[i];s instanceof We?Array.isArray(s)?s.push(e):this.idIndex_[i]=[s,e]:a=!1}else a=!1}return a&&(pt(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),a}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],a=[],i=[];for(let s=0,r=t.length;s<r;s++){const l=t[s],o=rt(l);this.addToIndex_(o,l)&&a.push(l)}for(let s=0,r=a.length;s<r;s++){const l=a[s],o=rt(l);this.setupChangeEvents_(o,l);const h=l.getGeometry();if(h){const u=h.getExtent();e.push(u),i.push(l)}else this.nullGeometryFeatures_[o]=l}if(this.featuresRtree_&&this.featuresRtree_.load(e,i),this.hasListener(Ot.ADDFEATURE))for(let s=0,r=a.length;s<r;s++)this.dispatchEvent(new ye(Ot.ADDFEATURE,a[s]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(Ot.ADDFEATURE,function(a){e||(e=!0,t.push(a.feature),e=!1)}),this.addEventListener(Ot.REMOVEFEATURE,function(a){e||(e=!0,t.remove(a.feature),e=!1)}),t.addEventListener(an.ADD,a=>{e||(e=!0,this.addFeature(a.element),e=!1)}),t.addEventListener(an.REMOVE,a=>{e||(e=!0,this.removeFeature(a.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const a in this.featureChangeKeys_)this.featureChangeKeys_[a].forEach(Wn);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(a=>{this.removeFeatureInternal(a)});for(const a in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[a])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new ye(Ot.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const a=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(a,function(i){const s=i.getGeometry();if(s instanceof We||s.intersectsCoordinate(t))return e(i)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(a){const i=a.getGeometry();if(i instanceof We||i.intersectsExtent(t)){const s=e(a);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),na(this.nullGeometryFeatures_)||Ah(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(a){e.push(a)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const i=Ch(t,e);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const a=t[0],i=t[1];let s=null;const r=[NaN,NaN];let l=1/0;const o=[-1/0,-1/0,1/0,1/0];return e=e||Lh,this.featuresRtree_.forEachInExtent(o,function(h){if(e(h)){const u=h.getGeometry(),c=l;if(l=u instanceof We?0:u.closestPointXY(a,i,r,l),l<c){s=h;const _=Math.sqrt(l);o[0]=a-_,o[1]=i-_,o[2]=a+_,o[3]=i+_}}}),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,a=rt(e),i=e.getGeometry();if(!i)a in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[a]=e);else{const r=i.getExtent();a in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[a],this.featuresRtree_&&this.featuresRtree_.insert(r,e)):this.featuresRtree_&&this.featuresRtree_.update(r,e)}const s=e.getId();if(s!==void 0){const r=s.toString();this.idIndex_[r]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[r]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[a]=e;this.changed(),this.dispatchEvent(new ye(Ot.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:rt(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&na(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,a){const i=this.loadedExtentsRtree_,s=this.strategy_(t,e,a);for(let r=0,l=s.length;r<l;++r){const o=s[r];i.forEachInExtent(o,function(u){return Nn(u.extent,o)})||(++this.loadingExtentsCount_,this.dispatchEvent(new ye(Ot.FEATURESLOADSTART)),this.loader_.call(this,o,e,a,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new ye(Ot.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new ye(Ot.FEATURESLOADERROR))}),i.insert(o,{extent:o.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_,a=e.forEachInExtent(t,function(i){if(Tl(i.extent,t))return i});a&&e.remove(a)}removeFeatures(t){let e=!1;for(let a=0,i=t.length;a<i;++a)e=this.removeFeatureInternal(t[a])||e;e&&this.changed()}removeFeature(t){if(!t)return;this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=rt(t);if(!(e in this.uidIndex_))return!1;e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);const a=this.featureChangeKeys_[e];a==null||a.forEach(Wn),delete this.featureChangeKeys_[e];const i=t.getId();if(i!==void 0){const s=i.toString(),r=this.idIndex_[s];r===t?delete this.idIndex_[s]:Array.isArray(r)&&(r.splice(r.indexOf(t),1),r.length===1&&(this.idIndex_[s]=r[0]))}return delete this.uidIndex_[e],this.hasListener(Ot.REMOVEFEATURE)&&this.dispatchEvent(new ye(Ot.REMOVEFEATURE,t)),!0}removeFromIdIndex_(t){for(const e in this.idIndex_)if(this.idIndex_[e]===t){delete this.idIndex_[e];break}}setLoader(t){this.loader_=t}setUrl(t){pt(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(vr(t,this.format_))}setOverlaps(t){this.overlaps_=t,this.changed()}}class Pt{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new Pt({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const e=Es(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));e.ready().then(()=>{this.patternImage_=null}),e.getImageState()===j.IDLE&&e.load(),e.getImageState()===j.LOADING&&(this.patternImage_=e)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?rt(t):typeof t=="object"&&"src"in t?t.src+":"+t.offset:dn(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Bt{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Bt({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}function pn(n,t){return Array.isArray(n)?n:(t===void 0?t=[n,n]:(t[0]=n,t[1]=n),t)}class di{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=pn(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new di({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ut()}getImage(t){return ut()}getHitDetectionImage(){return ut()}getPixelRatio(t){return 1}getImageState(){return ut()}getImageSize(){return ut()}getOrigin(){return ut()}getSize(){return ut()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=pn(t)}listenImageChange(t){ut()}load(){ut()}unlistenImageChange(t){ut()}ready(){return Promise.resolve()}}class mi extends di{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.imageState_=this.fill_&&this.fill_.loading()?j.LOADING:j.LOADED,this.imageState_===j.LOADING&&this.ready().then(()=>this.imageState_=j.LOADED),this.render()}clone(){const t=this.getScale(),e=new mi({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),a=this.getScaleArray();return[t[0]/2-e[0]/a[0],t[1]/2+e[1]/a[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){var s,r;const e=(s=this.fill_)==null?void 0:s.getKey(),a=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${e}`+Object.values(this.renderOptions_).join(",");let i=(r=Jt.get(a,null,null))==null?void 0:r.getImage(1);if(!i){const l=this.renderOptions_,o=Math.ceil(l.size*t),h=St(o,o);this.draw_(l,h,t),i=h.canvas,Jt.set(a,null,null,new Ul(i,void 0,null,j.LOADED,null))}return i}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,a){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const M=i;i=s,s=M}const r=this.radius2_===void 0?this.points_:this.points_*2,l=2*Math.PI/r,o=s*Math.sin(l),h=Math.sqrt(s*s-o*o),u=i-h,c=Math.sqrt(o*o+u*u),_=c/o;if(t==="miter"&&_<=a)return _*e;const f=e/2/_,d=e/2*(u/c),g=Math.sqrt((i+f)*(i+f)+d*d)-i;if(this.radius2_===void 0||t==="bevel")return g*2;const p=i*Math.sin(l),y=Math.sqrt(i*i-p*p),v=s-y,x=Math.sqrt(p*p+v*v)/p;if(x<=a){const M=x*e/2-s-i;return 2*Math.max(g,M)}return g*2}createRenderOptions(){let t=mn,e=gn,a=0,i=null,s=0,r,l=0;this.stroke_&&(r=Qt(this.stroke_.getColor()??ra),l=this.stroke_.getWidth()??oa,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,e=this.stroke_.getLineJoin()??gn,t=this.stroke_.getLineCap()??mn,a=this.stroke_.getMiterLimit()??sa);const o=this.calculateLineJoinSize_(e,l,a),h=Math.max(this.radius,this.radius2_||0),u=Math.ceil(2*h+o);return{strokeStyle:r,strokeWidth:l,size:u,lineCap:t,lineDash:i,lineDashOffset:s,lineJoin:e,miterLimit:a}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,a){if(e.scale(a,a),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let i=this.fill_.getColor();i===null&&(i=xt),e.fillStyle=Qt(i),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let a=this.fill_.getColor(),i=0;typeof a=="string"&&(a=dn(a)),a===null?i=1:Array.isArray(a)&&(i=a.length===4?a[3]:1),i===0&&(e=St(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_;const a=this.radius;if(e===1/0)t.arc(0,0,a,0,2*Math.PI);else{const i=this.radius2_===void 0?a:this.radius2_;this.radius2_!==void 0&&(e*=2);const s=this.angle_-Math.PI/2,r=2*Math.PI/e;for(let l=0;l<e;l++){const o=s+l*r,h=l%2===0?a:i;t.lineTo(h*Math.cos(o),h*Math.sin(o))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=xt,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class gi extends mi{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new gi({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius=t,this.render()}}class Ut{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=Er,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new Ut({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Er,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function Qu(n){let t;if(typeof n=="function")t=n;else{let e;Array.isArray(n)?e=n:(pt(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),e=[n]),t=function(){return e}}return t}let Bi=null;function Yl(n,t){if(!Bi){const e=new Pt({color:"rgba(255,255,255,0.4)"}),a=new Bt({color:"#3399CC",width:1.25});Bi=[new Ut({image:new gi({fill:e,stroke:a,radius:5}),fill:e,stroke:a})]}return Bi}function Er(n){return n.getGeometry()}const tc="#333";class Be{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.keepUpright_=t.keepUpright,this.scale_=t.scale,this.scaleArray_=pn(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Pt({color:tc}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Be({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setKeepUpright(t){this.keepUpright_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=pn(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const Nt={ANIMATING:0,INTERACTING:1},D={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Na=[D.FILL],Me=[D.STROKE],Ge=[D.BEGIN_PATH],Sr=[D.CLOSE_PATH];class ba extends zl{constructor(t,e,a,i){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=a,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(a){return a*e})}appendFlatPointCoordinates(t,e){const a=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let r=s.length;for(let l=0,o=t.length;l<o;l+=e)i[0]=t[l],i[1]=t[l+1],Qi(a,i)&&(s[r++]=i[0],s[r++]=i[1]);return r}appendFlatLineCoordinates(t,e,a,i,s,r){const l=this.coordinates;let o=l.length;const h=this.getBufferedMaxExtent();r&&(e+=i);let u=t[e],c=t[e+1];const _=this.tmpCoordinate_;let f=!0,d,m,g;for(d=e+i;d<a;d+=i)_[0]=t[d],_[1]=t[d+1],g=Yh(h,_),g!==m?(f&&(l[o++]=u,l[o++]=c,f=!1),l[o++]=_[0],l[o++]=_[1]):g===Zh.INTERSECTING?(l[o++]=_[0],l[o++]=_[1],f=!1):f=!0,u=_[0],c=_[1],m=g;return(s&&f||d===e+i)&&(l[o++]=u,l[o++]=c),o}drawCustomCoordinates_(t,e,a,i,s){for(let r=0,l=a.length;r<l;++r){const o=a[r],h=this.appendFlatLineCoordinates(t,e,o,i,!1,!1);s.push(h),e=o}return e}drawCustom(t,e,a,i,s){this.beginGeometry(t,e,s);const r=t.getType(),l=t.getStride(),o=this.coordinates.length;let h,u,c,_,f;switch(r){case"MultiPolygon":h=t.getOrientedFlatCoordinates(),_=[];const d=t.getEndss();f=0;for(let m=0,g=d.length;m<g;++m){const p=[];f=this.drawCustomCoordinates_(h,f,d[m],l,p),_.push(p)}this.instructions.push([D.CUSTOM,o,_,t,a,cr,s]),this.hitDetectionInstructions.push([D.CUSTOM,o,_,t,i||a,cr,s]);break;case"Polygon":case"MultiLineString":c=[],h=r=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),f=this.drawCustomCoordinates_(h,0,t.getEnds(),l,c),this.instructions.push([D.CUSTOM,o,c,t,a,ur,s]),this.hitDetectionInstructions.push([D.CUSTOM,o,c,t,i||a,ur,s]);break;case"LineString":case"Circle":h=t.getFlatCoordinates(),u=this.appendFlatLineCoordinates(h,0,h.length,l,!1,!1),this.instructions.push([D.CUSTOM,o,u,t,a,La,s]),this.hitDetectionInstructions.push([D.CUSTOM,o,u,t,i||a,La,s]);break;case"MultiPoint":h=t.getFlatCoordinates(),u=this.appendFlatPointCoordinates(h,l),u>o&&(this.instructions.push([D.CUSTOM,o,u,t,a,La,s]),this.hitDetectionInstructions.push([D.CUSTOM,o,u,t,i||a,La,s]));break;case"Point":h=t.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),u=this.coordinates.length,this.instructions.push([D.CUSTOM,o,u,t,a,void 0,s]),this.hitDetectionInstructions.push([D.CUSTOM,o,u,t,i||a,void 0,s]);break}this.endGeometry(e)}beginGeometry(t,e,a){this.beginGeometryInstruction1_=[D.BEGIN_GEOMETRY,e,0,t,a],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[D.BEGIN_GEOMETRY,e,0,t,a],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const a=t.length;let i,s,r=-1;for(e=0;e<a;++e)i=t[e],s=i[0],s==D.END_GEOMETRY?r=e:s==D.BEGIN_GEOMETRY&&(i[2]=e,Jh(this.hitDetectionInstructions,r,e),r=-1)}fillStyleToState(t,e={}){if(t){const a=t.getColor();e.fillPatternScale=a&&typeof a=="object"&&"src"in a?this.pixelRatio:1,e.fillStyle=Qt(a||xt)}else e.fillStyle=void 0;return e}strokeStyleToState(t,e={}){if(t){const a=t.getColor();e.strokeStyle=Qt(a||ra);const i=t.getLineCap();e.lineCap=i!==void 0?i:mn;const s=t.getLineDash();e.lineDash=s?s.slice():ce;const r=t.getLineDashOffset();e.lineDashOffset=r||_e;const l=t.getLineJoin();e.lineJoin=l!==void 0?l:gn;const o=t.getWidth();e.lineWidth=o!==void 0?o:oa;const h=t.getMiterLimit();e.miterLimit=h!==void 0?h:sa,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0;return e}setFillStrokeStyle(t,e){const a=this.state;this.fillStyleToState(t,a),this.strokeStyleToState(e,a)}createFill(t){const e=t.fillStyle,a=[D.SET_FILL_STYLE,e];return typeof e!="string"&&a.push(t.fillPatternScale),a}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[D.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash?this.applyPixelRatio(t.lineDash):null,t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const a=t.fillStyle;(typeof a!="string"||t.currentFillStyle!=a)&&(a!==void 0&&this.instructions.push(e.call(this,t)),t.currentFillStyle=a)}updateStrokeStyle(t,e){const a=t.strokeStyle,i=t.lineCap,s=t.lineDash,r=t.lineDashOffset,l=t.lineJoin,o=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=a||t.currentLineCap!=i||s!=t.currentLineDash&&!ya(t.currentLineDash,s)||t.currentLineDashOffset!=r||t.currentLineJoin!=l||t.currentLineWidth!=o||t.currentMiterLimit!=h)&&(a!==void 0&&e.call(this,t),t.currentStrokeStyle=a,t.currentLineCap=i,t.currentLineDash=s,t.currentLineDashOffset=r,t.currentLineJoin=l,t.currentLineWidth=o,t.currentMiterLimit=h)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[D.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Qh(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;ys(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class ec extends ba{constructor(t,e,a,i){super(t,e,a,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,a){if(!this.image_||this.maxExtent&&!Qi(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,a);const i=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length,l=this.appendFlatPointCoordinates(i,s);this.instructions.push([D.DRAW_IMAGE,r,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([D.DRAW_IMAGE,r,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,a){if(!this.image_)return;this.beginGeometry(t,e,a);const i=t.getFlatCoordinates(),s=[];for(let o=0,h=i.length;o<h;o+=t.getStride())(!this.maxExtent||Qi(this.maxExtent,i.slice(o,o+2)))&&s.push(i[o],i[o+1]);const r=this.coordinates.length,l=this.appendFlatPointCoordinates(s,2);this.instructions.push([D.DRAW_IMAGE,r,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([D.DRAW_IMAGE,r,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const a=t.getAnchor(),i=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=a[0],this.anchorY_=a[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=i[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}class nc extends ba{constructor(t,e,a,i){super(t,e,a,i)}drawFlatCoordinates_(t,e,a,i){const s=this.coordinates.length,r=this.appendFlatLineCoordinates(t,e,a,i,!1,!1),l=[D.MOVE_TO_LINE_TO,s,r];return this.instructions.push(l),this.hitDetectionInstructions.push(l),a}drawLineString(t,e,a){const i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e,a),this.hitDetectionInstructions.push([D.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,ce,_e],Ge);const l=t.getFlatCoordinates(),o=t.getStride();this.drawFlatCoordinates_(l,0,l.length,o),this.hitDetectionInstructions.push(Me),this.endGeometry(e)}drawMultiLineString(t,e,a){const i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e,a),this.hitDetectionInstructions.push([D.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,ce,_e],Ge);const l=t.getEnds(),o=t.getFlatCoordinates(),h=t.getStride();let u=0;for(let c=0,_=l.length;c<_;++c)u=this.drawFlatCoordinates_(o,u,l[c],h);this.hitDetectionInstructions.push(Me),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Me),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Me),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Ge)}}class Rr extends ba{constructor(t,e,a,i){super(t,e,a,i)}drawFlatCoordinatess_(t,e,a,i){const s=this.state,r=s.fillStyle!==void 0,l=s.strokeStyle!==void 0,o=a.length;this.instructions.push(Ge),this.hitDetectionInstructions.push(Ge);for(let h=0;h<o;++h){const u=a[h],c=this.coordinates.length,_=this.appendFlatLineCoordinates(t,e,u,i,!0,!l),f=[D.MOVE_TO_LINE_TO,c,_];this.instructions.push(f),this.hitDetectionInstructions.push(f),l&&(this.instructions.push(Sr),this.hitDetectionInstructions.push(Sr)),e=u}return r&&(this.instructions.push(Na),this.hitDetectionInstructions.push(Na)),l&&(this.instructions.push(Me),this.hitDetectionInstructions.push(Me)),e}drawCircle(t,e,a){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,a),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([D.SET_FILL_STYLE,xt]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([D.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,ce,_e]);const l=t.getFlatCoordinates(),o=t.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1);const u=[D.CIRCLE,h];this.instructions.push(Ge,u),this.hitDetectionInstructions.push(Ge,u),i.fillStyle!==void 0&&(this.instructions.push(Na),this.hitDetectionInstructions.push(Na)),i.strokeStyle!==void 0&&(this.instructions.push(Me),this.hitDetectionInstructions.push(Me)),this.endGeometry(e)}drawPolygon(t,e,a){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,a),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([D.SET_FILL_STYLE,xt]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([D.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,ce,_e]);const l=t.getEnds(),o=t.getOrientedFlatCoordinates(),h=t.getStride();this.drawFlatCoordinatess_(o,0,l,h),this.endGeometry(e)}drawMultiPolygon(t,e,a){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,a),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([D.SET_FILL_STYLE,xt]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([D.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,ce,_e]);const l=t.getEndss(),o=t.getOrientedFlatCoordinates(),h=t.getStride();let u=0;for(let c=0,_=l.length;c<_;++c)u=this.drawFlatCoordinatess_(o,u,l[c],h);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let a=0,i=e.length;a<i;++a)e[a]=$h(e[a],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}function ac(n,t,e,a,i){const s=[];let r=e,l=0,o=t.slice(e,2);for(;l<n&&r+i<a;){const[h,u]=o.slice(-2),c=t[r+i],_=t[r+i+1],f=Math.sqrt((c-h)*(c-h)+(_-u)*(_-u));if(l+=f,l>=n){const d=(n-l+f)/f,m=$t(h,c,d),g=$t(u,_,d);o.push(m,g),s.push(o),o=[m,g],l==n&&(r+=i),l=0}else if(l<n)o.push(t[r+i],t[r+i+1]),r+=i;else{const d=f-l,m=$t(h,c,d/f),g=$t(u,_,d/f);o.push(m,g),s.push(o),o=[m,g],l=0,r+=i}}return l>0&&s.push(o),s}function ic(n,t,e,a,i){let s=e,r=e,l=0,o=0,h=e,u,c,_,f,d,m,g,p,y,v;for(c=e;c<a;c+=i){const b=t[c],x=t[c+1];d!==void 0&&(y=b-d,v=x-m,f=Math.sqrt(y*y+v*v),g!==void 0&&(o+=_,u=Math.acos((g*y+p*v)/(_*f)),u>n&&(o>l&&(l=o,s=h,r=c),o=0,h=c-i)),_=f,g=y,p=v),d=b,m=x}return o+=f,o>l?[h,c]:[s,r]}const ii={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class sc extends ba{constructor(t,e,a,i){super(t,e,a,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[xt]={fillStyle:xt},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,a){const i=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!i&&!s)return;const l=this.coordinates;let o=l.length;const h=t.getType();let u=null,c=t.getStride();if(r.placement==="line"&&(h=="LineString"||h=="MultiLineString"||h=="Polygon"||h=="MultiPolygon")){if(!Yt(this.maxExtent,t.getExtent()))return;let _;if(u=t.getFlatCoordinates(),h=="LineString")_=[u.length];else if(h=="MultiLineString")_=t.getEnds();else if(h=="Polygon")_=t.getEnds().slice(0,1);else if(h=="MultiPolygon"){const g=t.getEndss();_=[];for(let p=0,y=g.length;p<y;++p)_.push(g[p][0])}this.beginGeometry(t,e,a);const f=r.repeat,d=f?void 0:r.textAlign;let m=0;for(let g=0,p=_.length;g<p;++g){let y;f?y=ac(f*this.resolution,u,m,_[g],c):y=[u.slice(m,_[g])];for(let v=0,b=y.length;v<b;++v){const x=y[v];let M=0,R=x.length;if(d==null){const I=ic(r.maxAngle,x,0,x.length,2);M=I[0],R=I[1]}for(let I=M;I<R;I+=c)l.push(x[I],x[I+1]);const w=l.length;m=_[g],this.drawChars_(o,w),o=w}}this.endGeometry(e)}else{let _=r.overflow?null:[];switch(h){case"Point":case"MultiPoint":u=t.getFlatCoordinates();break;case"LineString":u=t.getFlatMidpoint();break;case"Circle":u=t.getCenter();break;case"MultiLineString":u=t.getFlatMidpoints(),c=2;break;case"Polygon":u=t.getFlatInteriorPoint(),r.overflow||_.push(u[2]/this.resolution),c=3;break;case"MultiPolygon":const b=t.getFlatInteriorPoints();u=[];for(let x=0,M=b.length;x<M;x+=3)r.overflow||_.push(b[x+2]/this.resolution),u.push(b[x],b[x+1]);if(u.length===0)return;c=2;break}const f=this.appendFlatPointCoordinates(u,c);if(f===o)return;if(_&&(f-o)/2!==u.length/c){let b=o/2;_=_.filter((x,M)=>{const R=l[(b+M)*2]===u[M*c]&&l[(b+M)*2+1]===u[M*c+1];return R||--b,R})}this.saveTextStates_();const d=r.backgroundFill?this.createFill(this.fillStyleToState(r.backgroundFill)):null,m=r.backgroundStroke?this.createStroke(this.strokeStyleToState(r.backgroundStroke)):null;this.beginGeometry(t,e,a);let g=r.padding;if(g!=Fe&&(r.scale[0]<0||r.scale[1]<0)){let b=r.padding[0],x=r.padding[1],M=r.padding[2],R=r.padding[3];r.scale[0]<0&&(x=-x,R=-R),r.scale[1]<0&&(b=-b,M=-M),g=[b,x,M,R]}const p=this.pixelRatio;this.instructions.push([D.DRAW_IMAGE,o,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,g==Fe?Fe:g.map(function(b){return b*p}),d,m,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,_]);const y=1/p,v=d?d.slice(0):null;v&&(v[1]=xt),this.hitDetectionInstructions.push([D.DRAW_IMAGE,o,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[y,y],NaN,this.declutterMode_,this.declutterImageWithText_,g,v,m,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?xt:this.fillKey_,this.textOffsetX_,this.textOffsetY_,_]),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,a=this.textFillState_,i=this.strokeKey_;t&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||la,justify:e.justify,textBaseline:e.textBaseline||ni,scale:e.scale});const r=this.fillKey_;a&&(r in this.fillStates||(this.fillStates[r]={fillStyle:a.fillStyle}))}drawChars_(t,e){const a=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,r=this.textKey_,l=this.fillKey_;this.saveTextStates_();const o=this.pixelRatio,h=ii[i.textBaseline],u=this.textOffsetY_*o,c=this.text_,_=a?a.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([D.DRAW_CHARS,t,e,h,i.overflow,l,i.maxAngle,o,u,s,_*o,c,r,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([D.DRAW_CHARS,t,e,h,i.overflow,l&&xt,i.maxAngle,o,u,s,_*o,c,r,1/o,this.declutterMode_,this.textKeepUpright_])}setTextStyle(t,e){let a,i,s;if(!t)this.text_="";else{const r=t.getFill();r?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Qt(r.getColor()||xt)):(i=null,this.textFillState_=i);const l=t.getStroke();if(!l)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const m=l.getLineDash(),g=l.getLineDashOffset(),p=l.getWidth(),y=l.getMiterLimit();s.lineCap=l.getLineCap()||mn,s.lineDash=m?m.slice():ce,s.lineDashOffset=g===void 0?_e:g,s.lineJoin=l.getLineJoin()||gn,s.lineWidth=p===void 0?oa:p,s.miterLimit=y===void 0?sa:y,s.strokeStyle=Qt(l.getColor()||ra)}a=this.textState_;const o=t.getFont()||jl;Su(o);const h=t.getScaleArray();a.overflow=t.getOverflow(),a.font=o,a.maxAngle=t.getMaxAngle(),a.placement=t.getPlacement(),a.textAlign=t.getTextAlign(),a.repeat=t.getRepeat(),a.justify=t.getJustify(),a.textBaseline=t.getTextBaseline()||ni,a.backgroundFill=t.getBackgroundFill(),a.backgroundStroke=t.getBackgroundStroke(),a.padding=t.getPadding()||Fe,a.scale=h===void 0?[1,1]:h;const u=t.getOffsetX(),c=t.getOffsetY(),_=t.getRotateWithView(),f=t.getKeepUpright(),d=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=c===void 0?0:c,this.textRotateWithView_=_===void 0?!1:_,this.textKeepUpright_=f===void 0?!0:f,this.textRotation_=d===void 0?0:d,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:rt(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=a.font+a.scale+(a.textAlign||"?")+(a.repeat||"?")+(a.justify||"?")+(a.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+rt(i.fillStyle):""}this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const rc={Circle:Rr,Default:ba,Image:ec,LineString:nc,Polygon:Rr,Text:sc};class lc{constructor(t,e,a,i){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=i,this.resolution_=a,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const a=this.buildersByZIndex_[e];for(const i in a){const s=a[i].finish();t[e][i]=s}}return t}getBuilder(t,e){const a=t!==void 0?t.toString():"0";let i=this.buildersByZIndex_[a];i===void 0&&(i={},this.buildersByZIndex_[a]=i);let s=i[e];if(s===void 0){const r=rc[e];s=new r(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[e]=s}return s}}function oc(n,t,e,a,i,s,r,l,o,h,u,c,_=!0){let f=n[t],d=n[t+1],m=0,g=0,p=0,y=0;function v(){m=f,g=d,t+=a,f=n[t],d=n[t+1],y+=p,p=Math.sqrt((f-m)*(f-m)+(d-g)*(d-g))}do v();while(t<e-a&&y+p<s);let b=p===0?0:(s-y)/p;const x=$t(m,f,b),M=$t(g,d,b),R=t-a,w=y,I=s+l*o(h,i,u);for(;t<e-a&&y+p<I;)v();b=p===0?0:(I-y)/p;const L=$t(m,f,b),O=$t(g,d,b);let T=!1;if(_)if(c){const H=[x,M,L,O];au(H,0,4,2,c,H,H),T=H[0]>H[2]}else T=x>L;const G=Math.PI,N=[],Y=R+a===t;t=R,p=0,y=w,f=n[t],d=n[t+1];let B;if(Y){v(),B=Math.atan2(d-g,f-m),T&&(B+=B>0?-G:G);const H=(L+x)/2,q=(O+M)/2;return N[0]=[H,q,(I-s)/2,B,i],N}i=i.replace(/\n/g," ");for(let H=0,q=i.length;H<q;){v();let Q=Math.atan2(d-g,f-m);if(T&&(Q+=Q>0?-G:G),B!==void 0){let Ct=Q-B;if(Ct+=Ct>G?-2*G:Ct<-G?2*G:0,Math.abs(Ct)>r)return null}B=Q;const J=H;let et=0;for(;H<q;++H){const Ct=T?q-H-1:H,jt=l*o(h,i[Ct],u);if(t+a<e&&y+p<s+et+jt/2)break;et+=jt}if(H===J)continue;const A=T?i.substring(q-J,q-H):i.substring(J,H);b=p===0?0:(s+et/2-y)/p;const ke=$t(m,f,b),Le=$t(g,d,b);N.push([ke,Le,et/2,Q,A]),s+=et}return N}class Zl{constructor(){ir(this,"pushMethodArgs_",(...t)=>(this.instructions_[this.zIndex+this.offset_].push(t),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(ei(),{get:(t,e)=>{if(typeof ei()[e]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e),this.pushMethodArgs_},set:(t,e,a)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e,a),!0)})}pushFunction(t){this.instructions_[this.zIndex+this.offset_].push(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(e=>{for(let a=0,i=e.length;a<i;++a){const s=e[a];if(typeof s=="function"){s(t);continue}const r=e[++a];if(typeof t[s]=="function")t[s](...r);else{if(typeof r=="function"){t[s]=r(t);continue}t[s]=r}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const $e=ti(),be=[],re=[],le=[],ve=[];function Ir(n){return n[3].declutterBox}const Ar=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function Gi(n,t){return t==="start"?t=Ar.test(n)?"right":"left":t==="end"&&(t=Ar.test(n)?"left":"right"),ii[t]}function hc(n,t,e){return e>0&&n.push(`
`,""),n.push(t,""),n}class uc{constructor(t,e,a,i,s){this.overlaps=a,this.pixelRatio=e,this.resolution=t,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Ue(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new Zl:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,a,i){const s=t+e+a+i;if(this.labels_[s])return this.labels_[s];const r=i?this.strokeStates[i]:null,l=a?this.fillStates[a]:null,o=this.textStates[e],h=this.pixelRatio,u=[o.scale[0]*h,o.scale[1]*h],c=o.justify?ii[o.justify]:Gi(Array.isArray(t)?t[0]:t,o.textAlign||la),_=i&&r.lineWidth?r.lineWidth:0,f=Array.isArray(t)?t:String(t).split(`
`).reduce(hc,[]),{width:d,height:m,widths:g,heights:p,lineWidths:y}=Iu(o,f),v=d+_,b=[],x=(v+2)*u[0],M=(m+_)*u[1],R={width:x<0?Math.floor(x):Math.ceil(x),height:M<0?Math.floor(M):Math.ceil(M),contextInstructions:b};(u[0]!=1||u[1]!=1)&&b.push("scale",u),i&&(b.push("strokeStyle",r.strokeStyle),b.push("lineWidth",_),b.push("lineCap",r.lineCap),b.push("lineJoin",r.lineJoin),b.push("miterLimit",r.miterLimit),b.push("setLineDash",[r.lineDash]),b.push("lineDashOffset",r.lineDashOffset)),a&&b.push("fillStyle",l.fillStyle),b.push("textBaseline","middle"),b.push("textAlign","center");const w=.5-c;let I=c*v+w*_;const L=[],O=[];let T=0,G=0,N=0,Y=0,B;for(let H=0,q=f.length;H<q;H+=2){const Q=f[H];if(Q===`
`){G+=T,T=0,I=c*v+w*_,++Y;continue}const J=f[H+1]||o.font;J!==B&&(i&&L.push("font",J),a&&O.push("font",J),B=J),T=Math.max(T,p[N]);const et=[Q,I+w*g[N]+c*(g[N]-y[Y]),.5*(_+T)+G];I+=g[N],i&&L.push("strokeText",et),a&&O.push("fillText",et),++N}return Array.prototype.push.apply(b,L),Array.prototype.push.apply(b,O),this.labels_[s]=R,R}replayTextBackground_(t,e,a,i,s,r,l){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,a),t.lineTo.apply(t,i),t.lineTo.apply(t,s),t.lineTo.apply(t,e),r&&(this.alignAndScaleFill_=r[2],t.fillStyle=r[1],this.fill_(t)),l&&(this.setStrokeStyle_(t,l),t.stroke())}calculateImageOrLabelDimensions_(t,e,a,i,s,r,l,o,h,u,c,_,f,d,m,g){l*=_[0],o*=_[1];let p=a-l,y=i-o;const v=s+h>t?t-h:s,b=r+u>e?e-u:r,x=d[3]+v*_[0]+d[1],M=d[0]+b*_[1]+d[2],R=p-d[3],w=y-d[0];(m||c!==0)&&(be[0]=R,ve[0]=R,be[1]=w,re[1]=w,re[0]=R+x,le[0]=re[0],le[1]=w+M,ve[1]=le[1]);let I;return c!==0?(I=aa(Ue(),a,i,1,1,c,-a,-i),At(I,be),At(I,re),At(I,le),At(I,ve),Zi(Math.min(be[0],re[0],le[0],ve[0]),Math.min(be[1],re[1],le[1],ve[1]),Math.max(be[0],re[0],le[0],ve[0]),Math.max(be[1],re[1],le[1],ve[1]),$e)):Zi(Math.min(R,R+x),Math.min(w,w+M),Math.max(R,R+x),Math.max(w,w+M),$e),f&&(p=Math.round(p),y=Math.round(y)),{drawImageX:p,drawImageY:y,drawImageW:v,drawImageH:b,originX:h,originY:u,declutterBox:{minX:$e[0],minY:$e[1],maxX:$e[2],maxY:$e[3],value:g},canvasTransform:I,scale:_}}replayImageOrLabel_(t,e,a,i,s,r,l){const o=!!(r||l),h=i.declutterBox,u=l?l[2]*i.scale[0]/2:0;return h.minX-u<=e[0]&&h.maxX+u>=0&&h.minY-u<=e[1]&&h.maxY+u>=0&&(o&&this.replayTextBackground_(t,be,re,le,ve,r,l),Au(t,i.canvasTransform,s,a,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(t){const e=this.alignAndScaleFill_;if(e){const a=At(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(a[0]%i,a[1]%i),e!==1&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,a,i){const s=this.textStates[e],r=this.createLabel(t,e,i,a),l=this.strokeStates[a],o=this.pixelRatio,h=Gi(Array.isArray(t)?t[0]:t,s.textAlign||la),u=ii[s.textBaseline||ni],c=l&&l.lineWidth?l.lineWidth:0,_=r.width/o-2*s.scale[0],f=h*_+2*(.5-h)*c,d=u*r.height/o+2*(.5-u)*c;return{label:r,anchorX:f,anchorY:d}}execute_(t,e,a,i,s,r,l,o){const h=this.zIndexContext_;let u;this.pixelCoordinates_&&ya(a,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=$n(this.coordinates,0,this.coordinates.length,2,a,this.pixelCoordinates_),tu(this.renderedTransform_,a));let c=0;const _=i.length;let f=0,d,m,g,p,y,v,b,x,M,R,w,I,L,O=0,T=0;const G=this.coordinateCache_,N=this.viewRotation_,Y=Math.round(Math.atan2(-a[1],a[0])*1e12)/1e12,B={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:N},H=this.instructions!=i||this.overlaps?0:200;let q,Q,J,et;for(;c<_;){const A=i[c];switch(A[0]){case D.BEGIN_GEOMETRY:q=A[1],et=A[3],q.getGeometry()?l!==void 0&&!Yt(l,et.getExtent())?c=A[2]+1:++c:c=A[2],h&&(h.zIndex=A[4]);break;case D.BEGIN_PATH:O>H&&(this.fill_(t),O=0),T>H&&(t.stroke(),T=0),!O&&!T&&(t.beginPath(),y=NaN,v=NaN),++c;break;case D.CIRCLE:f=A[1];const Le=u[f],Ct=u[f+1],jt=u[f+2],Te=u[f+3],Ia=jt-Le,Sn=Te-Ct,Oe=Math.sqrt(Ia*Ia+Sn*Sn);t.moveTo(Le+Oe,Ct),t.arc(Le,Ct,Oe,0,2*Math.PI,!0),++c;break;case D.CLOSE_PATH:t.closePath(),++c;break;case D.CUSTOM:f=A[1],d=A[2];const th=A[3],eh=A[4],$s=A[5];B.geometry=th,B.feature=q,c in G||(G[c]=[]);const Rn=G[c];$s?$s(u,f,d,2,Rn):(Rn[0]=u[f],Rn[1]=u[f+1],Rn.length=2),h&&(h.zIndex=A[6]),eh(Rn,B),++c;break;case D.DRAW_IMAGE:f=A[1],d=A[2],M=A[3],m=A[4],g=A[5];let Si=A[6];const nh=A[7],ah=A[8],ih=A[9],Ys=A[10];let Ri=A[11];const sh=A[12];let Aa=A[13];p=A[14]||"declutter";const In=A[15];if(!M&&A.length>=20){R=A[19],w=A[20],I=A[21],L=A[22];const kt=this.drawLabelWithPointPlacement_(R,w,I,L);M=kt.label,A[3]=M;const De=A[23];m=(kt.anchorX-De)*this.pixelRatio,A[4]=m;const Lt=A[24];g=(kt.anchorY-Lt)*this.pixelRatio,A[5]=g,Si=M.height,A[6]=Si,Aa=M.width,A[13]=Aa}let Ii;A.length>25&&(Ii=A[25]);let Ai,Ca,ka;A.length>17?(Ai=A[16],Ca=A[17],ka=A[18]):(Ai=Fe,Ca=null,ka=null),Ys&&Y?Ri+=N:!Ys&&!Y&&(Ri-=N);let rh=0;for(;f<d;f+=2){if(Ii&&Ii[rh++]<Aa/this.pixelRatio)continue;const kt=this.calculateImageOrLabelDimensions_(M.width,M.height,u[f],u[f+1],Aa,Si,m,g,ah,ih,Ri,sh,s,Ai,!!Ca||!!ka,q),De=[t,e,M,kt,nh,Ca,ka];if(o){let Lt,Ht,Tt;if(In){const nt=d-f;if(!In[nt]){In[nt]={args:De,declutterMode:p};continue}const ft=In[nt];Lt=ft.args,Ht=ft.declutterMode,delete In[nt],Tt=Ir(Lt)}let ae,ie;if(Lt&&(Ht!=="declutter"||!o.collides(Tt))&&(ae=!0),(p!=="declutter"||!o.collides(kt.declutterBox))&&(ie=!0),Ht==="declutter"&&p==="declutter"){const nt=ae&&ie;ae=nt,ie=nt}ae&&(Ht!=="none"&&o.insert(Tt),this.replayImageOrLabel_.apply(this,Lt)),ie&&(p!=="none"&&o.insert(kt.declutterBox),this.replayImageOrLabel_.apply(this,De))}else this.replayImageOrLabel_.apply(this,De)}++c;break;case D.DRAW_CHARS:const Zs=A[1],Js=A[2],Ci=A[3],lh=A[4];L=A[5];const oh=A[6],Qs=A[7],tr=A[8];I=A[9];const ki=A[10];R=A[11],w=A[12];const er=[A[13],A[13]];p=A[14]||"declutter";const hh=A[15],Li=this.textStates[w],An=Li.font,Cn=[Li.scale[0]*Qs,Li.scale[1]*Qs];let kn;An in this.widths_?kn=this.widths_[An]:(kn={},this.widths_[An]=kn);const nr=eu(u,Zs,Js,2),ar=Math.abs(Cn[0])*pr(An,R,kn);if(lh||ar<=nr){const kt=this.textStates[w].textAlign,De=(nr-ar)*Gi(R,kt),Lt=oc(u,Zs,Js,2,R,De,oh,Math.abs(Cn[0]),pr,An,kn,Y?0:this.viewRotation_,hh);t:if(Lt){const Ht=[];let Tt,ae,ie,nt,ft;if(I)for(Tt=0,ae=Lt.length;Tt<ae;++Tt){ft=Lt[Tt],ie=ft[4],nt=this.createLabel(ie,w,"",I),m=ft[2]+(Cn[0]<0?-ki:ki),g=Ci*nt.height+(.5-Ci)*2*ki*Cn[1]/Cn[0]-tr;const se=this.calculateImageOrLabelDimensions_(nt.width,nt.height,ft[0],ft[1],nt.width,nt.height,m,g,0,0,ft[3],er,!1,Fe,!1,q);if(o&&p==="declutter"&&o.collides(se.declutterBox))break t;Ht.push([t,e,nt,se,1,null,null])}if(L)for(Tt=0,ae=Lt.length;Tt<ae;++Tt){ft=Lt[Tt],ie=ft[4],nt=this.createLabel(ie,w,L,""),m=ft[2],g=Ci*nt.height-tr;const se=this.calculateImageOrLabelDimensions_(nt.width,nt.height,ft[0],ft[1],nt.width,nt.height,m,g,0,0,ft[3],er,!1,Fe,!1,q);if(o&&p==="declutter"&&o.collides(se.declutterBox))break t;Ht.push([t,e,nt,se,1,null,null])}o&&p!=="none"&&o.load(Ht.map(Ir));for(let se=0,uh=Ht.length;se<uh;++se)this.replayImageOrLabel_.apply(this,Ht[se])}}++c;break;case D.END_GEOMETRY:if(r!==void 0){q=A[1];const kt=r(q,et,p);if(kt)return kt}++c;break;case D.FILL:H?O++:this.fill_(t),++c;break;case D.MOVE_TO_LINE_TO:for(f=A[1],d=A[2],Q=u[f],J=u[f+1],t.moveTo(Q,J),y=Q+.5|0,v=J+.5|0,f+=2;f<d;f+=2)Q=u[f],J=u[f+1],b=Q+.5|0,x=J+.5|0,(f==d-2||b!==y||x!==v)&&(t.lineTo(Q,J),y=b,v=x);++c;break;case D.SET_FILL_STYLE:this.alignAndScaleFill_=A[2],O&&(this.fill_(t),O=0,T&&(t.stroke(),T=0)),t.fillStyle=A[1],++c;break;case D.SET_STROKE_STYLE:T&&(t.stroke(),T=0),this.setStrokeStyle_(t,A),++c;break;case D.STROKE:H?T++:t.stroke(),++c;break;default:++c;break}}O&&this.fill_(t),T&&t.stroke()}execute(t,e,a,i,s,r){this.viewRotation_=i,this.execute_(t,e,a,this.instructions,s,void 0,void 0,r)}executeHitDetection(t,e,a,i,s){return this.viewRotation_=a,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,i,s)}}const sn=["Polygon","Circle","LineString","Image","Text","Default"],Jl=["Image","Text"],cc=sn.filter(n=>!Jl.includes(n));class _c{constructor(t,e,a,i,s,r,l){this.maxExtent_=t,this.overlaps_=i,this.pixelRatio_=a,this.resolution_=e,this.renderBuffer_=r,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Ue(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,l)}clip(t,e){const a=this.getClipCoords(e);t.beginPath(),t.moveTo(a[0],a[1]),t.lineTo(a[2],a[3]),t.lineTo(a[4],a[5]),t.lineTo(a[6],a[7]),t.clip()}createExecutors_(t,e){for(const a in t){let i=this.executorsByZIndex_[a];i===void 0&&(i={},this.executorsByZIndex_[a]=i);const s=t[a];for(const r in s){const l=s[r];i[r]=new uc(this.resolution_,this.pixelRatio_,this.overlaps_,l,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const a=this.executorsByZIndex_[e];for(let i=0,s=t.length;i<s;++i)if(t[i]in a)return!0}return!1}forEachFeatureAtCoordinate(t,e,a,i,s,r){i=Math.round(i);const l=i*2+1,o=aa(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-a,-t[0],-t[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=St(l,l,void 0,{willReadFrequently:!0}));const u=this.hitDetectionContext_;u.canvas.width!==l||u.canvas.height!==l?(u.canvas.width=l,u.canvas.height=l):h||u.clearRect(0,0,l,l);let c;this.renderBuffer_!==void 0&&(c=ti(),Uh(c,t),ys(c,e*(this.renderBuffer_+i),c));const _=fc(i);let f;function d(x,M,R){const w=u.getImageData(0,0,l,l).data;for(let I=0,L=_.length;I<L;I++)if(w[_[I]]>0){if(!r||R==="none"||f!=="Image"&&f!=="Text"||r.includes(x)){const O=(_[I]-3)/4,T=i-O%l,G=i-(O/l|0),N=s(x,M,T*T+G*G);if(N)return N}u.clearRect(0,0,l,l);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(Xn);let g,p,y,v,b;for(g=m.length-1;g>=0;--g){const x=m[g].toString();for(y=this.executorsByZIndex_[x],p=sn.length-1;p>=0;--p)if(f=sn[p],v=y[f],v!==void 0&&(b=v.executeHitDetection(u,o,a,d,c),b))return b}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const a=e[0],i=e[1],s=e[2],r=e[3],l=[a,i,a,r,s,r,s,i];return $n(l,0,8,2,t,l),l}isEmpty(){return na(this.executorsByZIndex_)}execute(t,e,a,i,s,r,l){const o=Object.keys(this.executorsByZIndex_).map(Number);o.sort(l?zh:Xn),r=r||sn;const h=sn.length;for(let u=0,c=o.length;u<c;++u){const _=o[u].toString(),f=this.executorsByZIndex_[_];for(let d=0,m=r.length;d<m;++d){const g=r[d],p=f[g];if(p!==void 0){const y=l===null?void 0:p.getZIndexContext(),v=y?y.getContext():t,b=this.maxExtent_&&g!=="Image"&&g!=="Text";if(b&&(v.save(),this.clip(v,a)),!y||g==="Text"||g==="Image"?p.execute(v,e,a,i,s,l):y.pushFunction(x=>p.execute(x,e,a,i,s,l)),b&&v.restore(),y){y.offset();const x=o[u]*h+d;this.deferredZIndexContexts_[x]||(this.deferredZIndexContexts_[x]=[]),this.deferredZIndexContexts_[x].push(y)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,e=Object.keys(t).map(Number).sort(Xn);for(let a=0,i=e.length;a<i;++a)t[e[a]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),t[e[a]].length=0}}const Ui={};function fc(n){if(Ui[n]!==void 0)return Ui[n];const t=n*2+1,e=n*n,a=new Array(e+1);for(let s=0;s<=n;++s)for(let r=0;r<=n;++r){const l=s*s+r*r;if(l>e)break;let o=a[l];o||(o=[],a[l]=o),o.push(((n+s)*t+(n+r))*4+3),s>0&&o.push(((n-s)*t+(n+r))*4+3),r>0&&(o.push(((n+s)*t+(n-r))*4+3),s>0&&o.push(((n-s)*t+(n-r))*4+3))}const i=[];for(let s=0,r=a.length;s<r;++s)a[s]&&i.push(...a[s]);return Ui[n]=i,i}function Cr(n,t,e,a){return e!==void 0&&a!==void 0?[e/n,a/t]:e!==void 0?e/n:a!==void 0?a/t:1}class pi extends di{constructor(t){t=t||{};const e=t.opacity!==void 0?t.opacity:1,a=t.rotation!==void 0?t.rotation:0,i=t.scale!==void 0?t.scale:1,s=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:a,scale:i,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const r=t.img!==void 0?t.img:null;let l=t.src;pt(!(l!==void 0&&r),"`image` and `src` cannot be provided at the same time"),(l===void 0||l.length===0)&&r&&(l=r.src||rt(r)),pt(l!==void 0&&l.length>0,"A defined and non-empty `src` or `image` must be provided"),pt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let o;if(t.src!==void 0?o=j.IDLE:r!==void 0&&("complete"in r?r.complete?o=r.src?j.LOADED:j.IDLE:o=j.LOADING:o=j.LOADED),this.color_=t.color!==void 0?dn(t.color):null,this.iconImage_=Es(r,l,this.crossOrigin_,o,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,t.width!==void 0||t.height!==void 0){let h,u;if(t.size)[h,u]=t.size;else{const c=this.getImage(1);if(c.width&&c.height)h=c.width,u=c.height;else if(c instanceof HTMLImageElement){this.initialOptions_=t;const _=()=>{if(this.unlistenImageChange(_),!this.initialOptions_)return;const f=this.iconImage_.getSize();this.setScale(Cr(f[0],f[1],t.width,t.height))};this.listenImageChange(_);return}}h!==void 0&&this.setScale(Cr(h,u,t.width,t.height))}}clone(){let t,e,a;return this.initialOptions_?(e=this.initialOptions_.width,a=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new pi({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:a,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=i[0]),this.anchorYUnits_=="fraction"&&(t[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+i[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),a=this.getScaleArray();return[t[0]-e[0]/a[0],t[1]+e[1]/a[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const e=this.getSize(),a=this.iconImage_.getSize();if(!e||!a)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=a[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=a[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==j.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==j.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(ue.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(ue.CHANGE,t)}ready(){return this.iconImage_.ready()}}const Zt=.5;function dc(n,t,e,a,i,s,r,l,o){const h=i,u=n[0]*Zt,c=n[1]*Zt,_=St(u,c);_.imageSmoothingEnabled=!1;const f=_.canvas,d=new ku(_,Zt,i,null,r,l,null),m=e.length,g=Math.floor((256*256*256-1)/m),p={};for(let v=1;v<=m;++v){const b=e[v-1],x=b.getStyleFunction()||a;if(!x)continue;let M=x(b,s);if(!M)continue;Array.isArray(M)||(M=[M]);const w=(v*g).toString(16).padStart(7,"#00000");for(let I=0,L=M.length;I<L;++I){const O=M[I],T=O.getGeometryFunction()(b);if(!T||!Yt(h,T.getExtent()))continue;const G=O.clone(),N=G.getFill();N&&N.setColor(w);const Y=G.getStroke();Y&&(Y.setColor(w),Y.setLineDash(null)),G.setText(void 0);const B=O.getImage();if(B){const J=B.getImageSize();if(!J)continue;const et=St(J[0],J[1],void 0,{alpha:!1}),A=et.canvas;et.fillStyle=w,et.fillRect(0,0,A.width,A.height),G.setImage(new pi({img:A,anchor:B.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:B.getOrigin(),opacity:1,size:B.getSize(),scale:B.getScale(),rotation:B.getRotation(),rotateWithView:B.getRotateWithView()}))}const H=G.getZIndex()||0;let q=p[H];q||(q={},p[H]=q,q.Polygon=[],q.Circle=[],q.LineString=[],q.Point=[]);const Q=T.getType();if(Q==="GeometryCollection"){const J=T.getGeometriesArrayRecursive();for(let et=0,A=J.length;et<A;++et){const ke=J[et];q[ke.getType().replace("Multi","")].push(ke,G)}}else q[Q.replace("Multi","")].push(T,G)}}const y=Object.keys(p).map(Number).sort(Xn);for(let v=0,b=y.length;v<b;++v){const x=p[y[v]];for(const M in x){const R=x[M];for(let w=0,I=R.length;w<I;w+=2){d.setStyle(R[w+1]);for(let L=0,O=t.length;L<O;++L)d.setTransform(t[L]),d.drawGeometry(R[w])}}}return _.getImageData(0,0,f.width,f.height)}function mc(n,t,e){const a=[];if(e){const i=Math.floor(Math.round(n[0])*Zt),s=Math.floor(Math.round(n[1])*Zt),r=(_t(i,0,e.width-1)+_t(s,0,e.height-1)*e.width)*4,l=e.data[r],o=e.data[r+1],u=e.data[r+2]+256*(o+256*l),c=Math.floor((256*256*256-1)/t.length);u&&u%c===0&&a.push(t[u/c-1])}return a}class gc extends ps{constructor(t,e,a,i){super(t),this.inversePixelTransform=e,this.frameState=a,this.context=i}}const pc=5;class yc extends qh{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=pc}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return ut()}getData(t){return null}prepareFrame(t){return ut()}renderFrame(t,e){return ut()}forEachFeatureAtCoordinate(t,e,a,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;(e.getState()===j.LOADED||e.getState()===j.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=j.LOADED&&e!=j.ERROR&&t.addEventListener(ue.CHANGE,this.boundHandleImageChange_),e==j.IDLE&&(t.load(),e=t.getState()),e==j.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const kr=[];let en=null;function bc(){en=St(1,1,void 0,{willReadFrequently:!0})}class vc extends yc{constructor(t){super(t),this.container=null,this.tempTransform=Ue(),this.pixelTransform=Ue(),this.inversePixelTransform=Ue(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,e,a){en||bc(),en.clearRect(0,0,1,1);let i;try{en.drawImage(t,e,a,1,1,0,0,1,1),i=en.getImageData(0,0,1,1).data}catch{return en=null,null}return i}getBackground(t){let a=this.getLayer().getBackground();return typeof a=="function"&&(a=a(t.viewState.resolution)),a||void 0}useContainer(t,e,a){const i=this.getLayer().getClassName();let s,r;if(t&&t.className===i&&(!a||t&&t.style.backgroundColor&&ya(dn(t.style.backgroundColor),dn(a)))){const l=t.firstElementChild;l instanceof HTMLCanvasElement&&(r=l.getContext("2d"))}if(r&&r.canvas.style.transform===e?(this.container=t,this.context=r,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=i;let l=s.style;l.position="absolute",l.width="100%",l.height="100%",r=St();const o=r.canvas;s.appendChild(o),l=o.style,l.position="absolute",l.left="0",l.transformOrigin="top left",this.container=s,this.context=r}!this.containerReused&&a&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=a)}clipUnrotated(t,e,a){const i=Dh(a),s=Nh(a),r=Ph(a),l=Fh(a);At(e.coordinateToPixelTransform,i),At(e.coordinateToPixelTransform,s),At(e.coordinateToPixelTransform,r),At(e.coordinateToPixelTransform,l);const o=this.inversePixelTransform;At(o,i),At(o,s),At(o,r),At(o,l),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.clip()}prepareContainer(t,e){const a=t.extent,i=t.viewState.resolution,s=t.viewState.rotation,r=t.pixelRatio,l=Math.round(he(a)/i*r),o=Math.round(pa(a)/i*r);aa(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/r,1/r,s,-l/2,-o/2),Bh(this.inversePixelTransform,this.pixelTransform);const h=Gh(this.pixelTransform);if(this.useContainer(e,h,this.getBackground(t)),!this.containerReused){const u=this.context.canvas;u.width!=l||u.height!=o?(u.width=l,u.height=o):this.context.clearRect(0,0,l,o),h!==u.style.transform&&(u.style.transform=h)}}dispatchRenderEvent_(t,e,a){const i=this.getLayer();if(i.hasListener(t)){const s=new gc(t,this.inversePixelTransform,a,e);i.dispatchEvent(s)}}preRender(t,e){this.frameState=e,!e.declutter&&this.dispatchRenderEvent_(Pe.PRERENDER,t,e)}postRender(t,e){e.declutter||this.dispatchRenderEvent_(Pe.POSTRENDER,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new Zl),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(Pe.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(Pe.POSTRENDER,this.context,t))}getRenderTransform(t,e,a,i,s,r,l){const o=s/2,h=r/2,u=i/e,c=-u,_=-t[0]+l,f=-t[1];return aa(this.tempTransform,o,h,u,c,-a,_,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class xc extends vc{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=ti(),this.wrappedRenderedExtent_=ti(),this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,e,a){const i=e.extent,s=e.viewState,r=s.center,l=s.resolution,o=s.projection,h=s.rotation,u=o.getExtent(),c=this.getLayer().getSource(),_=this.getLayer().getDeclutter(),f=e.pixelRatio,d=e.viewHints,m=!(d[Nt.ANIMATING]||d[Nt.INTERACTING]),g=this.context,p=Math.round(he(i)/l*f),y=Math.round(pa(i)/l*f),v=c.getWrapX()&&o.canWrapX(),b=v?he(u):null,x=v?Math.ceil((i[2]-u[2])/b)+1:1;let M=v?Math.floor((i[0]-u[0])/b):0;do{let R=this.getRenderTransform(r,l,0,f,p,y,M*b);e.declutter&&(R=R.slice(0)),t.execute(g,[g.canvas.width,g.canvas.height],R,h,m,a===void 0?sn:a?Jl:cc,a?_&&e.declutter[_]:void 0)}while(++M<x)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=St(this.context.canvas.width,this.context.canvas.height,kr))}resetDrawContext_(){if(this.opacity_!==1){const t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,bu(this.context),kr.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,e){const a=t.layerStatesArray[t.layerIndex];this.opacity_=a.opacity;const i=t.viewState;this.prepareContainer(t,e);const s=this.context,r=this.replayGroup_;let l=r&&!r.isEmpty();if(!l&&!(this.getLayer().hasListener(Pe.PRERENDER)||this.getLayer().hasListener(Pe.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(s,t),this.clipped_=!1,l&&a.extent&&this.clipping){const o=Pn(a.extent);l=Yt(o,t.extent),this.clipped_=l&&!Nn(o,t.extent),this.clipped_&&this.clipUnrotated(s,t,o)}return l&&this.renderWorlds(r,t,this.getLayer().getDeclutter()?!1:void 0),!t.declutter&&this.clipped_&&s.restore(),this.postRender(s,t),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise(e=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const a=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,r=this.renderedRotation_,l=this.renderedProjection_,o=this.wrappedRenderedExtent_,h=this.getLayer(),u=[],c=a[0]*Zt,_=a[1]*Zt;u.push(this.getRenderTransform(i,s,r,Zt,c,_,0).slice());const f=h.getSource(),d=l.getExtent();if(f.getWrapX()&&l.canWrapX()&&!Nn(d,o)){let m=o[0];const g=he(d);let p=0,y;for(;m<d[0];)--p,y=g*p,u.push(this.getRenderTransform(i,s,r,Zt,c,_,y).slice()),m+=g;for(p=0,m=o[2];m>d[2];)++p,y=g*p,u.push(this.getRenderTransform(i,s,r,Zt,c,_,y).slice()),m-=g}this.hitDetectionImageData_=dc(a,u,this.renderedFeatures_,h.getStyleFunction(),o,s,r,yr(s,this.renderedPixelRatio_))}e(mc(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,a,i,s){var _,f;if(!this.replayGroup_)return;const r=e.viewState.resolution,l=e.viewState.rotation,o=this.getLayer(),h={},u=function(d,m,g){const p=rt(d),y=h[p];if(y){if(y!==!0&&g<y.distanceSq){if(g===0)return h[p]=!0,s.splice(s.lastIndexOf(y),1),i(d,o,m);y.geometry=m,y.distanceSq=g}}else{if(g===0)return h[p]=!0,i(d,o,m);s.push(h[p]={feature:d,layer:o,geometry:m,distanceSq:g,callback:i})}},c=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(t,r,l,a,u,c?(f=(_=e.declutter)==null?void 0:_[c])==null?void 0:f.all().map(d=>d.value):null)}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),a=e.getSource();if(!a)return!1;const i=t.viewHints[Nt.ANIMATING],s=t.viewHints[Nt.INTERACTING],r=e.getUpdateWhileAnimating(),l=e.getUpdateWhileInteracting();if(this.ready&&!r&&i||!l&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const o=t.extent,h=t.viewState,u=h.projection,c=h.resolution,_=t.pixelRatio,f=e.getRevision(),d=e.getRenderBuffer();let m=e.getRenderOrder();m===void 0&&(m=Tu);const g=h.center.slice(),p=ys(o,d*c),y=p.slice(),v=[p.slice()],b=u.getExtent();if(a.getWrapX()&&u.canWrapX()&&!Nn(b,t.extent)){const N=he(b),Y=Math.max(he(p)/2,N);p[0]=b[0]-Y,p[2]=b[2]+Y,Th(g,u);const B=Oh(v[0],u);B[0]<b[0]&&B[2]<b[2]?v.push([B[0]+N,B[1],B[2]+N,B[3]]):B[0]>b[0]&&B[2]>b[2]&&v.push([B[0]-N,B[1],B[2]-N,B[3]])}if(this.ready&&this.renderedResolution_==c&&this.renderedRevision_==f&&this.renderedRenderOrder_==m&&this.renderedFrameDeclutter_===!!t.declutter&&Nn(this.wrappedRenderedExtent_,p))return ya(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=g,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const x=new lc(ql(c,_),p,c,_);let M;for(let N=0,Y=v.length;N<Y;++N)a.loadFeatures(v[N],c,u);const R=yr(c,_);let w=!0;const I=(N,Y)=>{let B;const H=N.getStyleFunction()||e.getStyleFunction();if(H&&(B=H(N,c)),B){const q=this.renderFeature(N,R,B,x,M,this.getLayer().getDeclutter(),Y);w=w&&!q}},L=Nl(p),O=a.getFeaturesInExtent(L);m&&O.sort(m);for(let N=0,Y=O.length;N<Y;++N)I(O[N],N);this.renderedFeatures_=O,this.ready=w;const T=x.finish(),G=new _c(p,c,_,a.getOverlaps(),T,e.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=c,this.renderedRevision_=f,this.renderedRenderOrder_=m,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=y,this.wrappedRenderedExtent_=p,this.renderedCenter_=g,this.renderedProjection_=u,this.renderedPixelRatio_=_,this.replayGroup_=G,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,a,i,s,r,l){if(!a)return!1;let o=!1;if(Array.isArray(a))for(let h=0,u=a.length;h<u;++h)o=br(i,t,a[h],e,this.boundHandleStyleImageChange_,s,r,l)||o;else o=br(i,t,a,e,this.boundHandleStyleImageChange_,s,r,l);return o}}let Ke=0;const gt=1<<Ke++,K=1<<Ke++,Mt=1<<Ke++,Gt=1<<Ke++,ze=1<<Ke++,Gn=1<<Ke++,Pa=Math.pow(2,Ke)-1,Ss={[gt]:"boolean",[K]:"number",[Mt]:"string",[Gt]:"color",[ze]:"number[]",[Gn]:"size"},Mc=Object.keys(Ss).map(Number).sort(Xn);function wc(n){return n in Ss}function Un(n){const t=[];for(const e of Mc)zn(n,e)&&t.push(Ss[e]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function zn(n,t){return(n&t)===t}function xe(n,t){return n===t}class at{constructor(t,e){if(!wc(t))throw new Error(`literal expressions must have a specific type, got ${Un(t)}`);this.type=t,this.value=e}}class Ec{constructor(t,e,...a){this.type=t,this.operator=e,this.args=a}}function Ql(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function ot(n,t,e){switch(typeof n){case"boolean":{if(xe(t,Mt))return new at(Mt,n?"true":"false");if(!zn(t,gt))throw new Error(`got a boolean, but expected ${Un(t)}`);return new at(gt,n)}case"number":{if(xe(t,Gn))return new at(Gn,pn(n));if(xe(t,gt))return new at(gt,!!n);if(xe(t,Mt))return new at(Mt,n.toString());if(!zn(t,K))throw new Error(`got a number, but expected ${Un(t)}`);return new at(K,n)}case"string":{if(xe(t,Gt))return new at(Gt,Ms(n));if(xe(t,gt))return new at(gt,!!n);if(!zn(t,Mt))throw new Error(`got a string, but expected ${Un(t)}`);return new at(Mt,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return Nc(n,t,e);for(const a of n)if(typeof a!="number")throw new Error("expected an array of numbers");if(xe(t,Gn)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new at(Gn,n)}if(xe(t,Gt)){if(n.length===3)return new at(Gt,[...n,1]);if(n.length===4)return new at(Gt,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!zn(t,ze))throw new Error(`got an array of numbers, but expected ${Un(t)}`);return new at(ze,n)}const E={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},Sc={[E.Get]:P(z(1,1/0),Lr),[E.Var]:P(z(1,1),Rc),[E.Has]:P(z(1,1/0),Lr),[E.Id]:P(Ic,Ye),[E.Concat]:P(z(2,1/0),W(Mt)),[E.GeometryType]:P(Ac,Ye),[E.LineMetric]:P(Ye),[E.Resolution]:P(zi,Ye),[E.Zoom]:P(zi,Ye),[E.Time]:P(zi,Ye),[E.Any]:P(z(2,1/0),W(gt)),[E.All]:P(z(2,1/0),W(gt)),[E.Not]:P(z(1,1),W(gt)),[E.Equal]:P(z(2,2),W(Pa)),[E.NotEqual]:P(z(2,2),W(Pa)),[E.GreaterThan]:P(z(2,2),W(K)),[E.GreaterThanOrEqualTo]:P(z(2,2),W(K)),[E.LessThan]:P(z(2,2),W(K)),[E.LessThanOrEqualTo]:P(z(2,2),W(K)),[E.Multiply]:P(z(2,1/0),Tr),[E.Coalesce]:P(z(2,1/0),Tr),[E.Divide]:P(z(2,2),W(K)),[E.Add]:P(z(2,1/0),W(K)),[E.Subtract]:P(z(2,2),W(K)),[E.Clamp]:P(z(3,3),W(K)),[E.Mod]:P(z(2,2),W(K)),[E.Pow]:P(z(2,2),W(K)),[E.Abs]:P(z(1,1),W(K)),[E.Floor]:P(z(1,1),W(K)),[E.Ceil]:P(z(1,1),W(K)),[E.Round]:P(z(1,1),W(K)),[E.Sin]:P(z(1,1),W(K)),[E.Cos]:P(z(1,1),W(K)),[E.Atan]:P(z(1,2),W(K)),[E.Sqrt]:P(z(1,1),W(K)),[E.Match]:P(z(4,1/0),Or,kc),[E.Between]:P(z(3,3),W(K)),[E.Interpolate]:P(z(6,1/0),Or,Lc),[E.Case]:P(z(3,1/0),Cc,Tc),[E.In]:P(z(2,2),Oc),[E.Number]:P(z(1,1/0),W(Pa)),[E.String]:P(z(1,1/0),W(Pa)),[E.Array]:P(z(1,1/0),W(K)),[E.Color]:P(z(1,4),W(K)),[E.Band]:P(z(1,3),W(K)),[E.Palette]:P(z(2,2),Dc),[E.ToString]:P(z(1,1),W(gt|K|Mt|Gt))};function Lr(n,t,e){const a=n.length-1,i=new Array(a);for(let s=0;s<a;++s){const r=n[s+1];switch(typeof r){case"number":{i[s]=new at(K,r);break}case"string":{i[s]=new at(Mt,r);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${r}`)}s===0&&e.properties.add(String(r))}return i}function Rc(n,t,e){const a=n[1];if(typeof a!="string")throw new Error("expected a string argument for var operation");return e.variables.add(a),[new at(Mt,a)]}function Ic(n,t,e){e.featureId=!0}function Ac(n,t,e){e.geometryType=!0}function zi(n,t,e){e.mapState=!0}function Ye(n,t,e){const a=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${a} operation`);return[]}function z(n,t){return function(e,a,i){const s=e[0],r=e.length-1;if(n===t){if(r!==n){const l=n===1?"":"s";throw new Error(`expected ${n} argument${l} for ${s}, got ${r}`)}}else if(r<n||r>t){const l=t===1/0?`${n} or more`:`${n} to ${t}`;throw new Error(`expected ${l} arguments for ${s}, got ${r}`)}}}function Tr(n,t,e){const a=n.length-1,i=new Array(a);for(let s=0;s<a;++s){const r=ot(n[s+1],t,e);i[s]=r}return i}function W(n){return function(t,e,a){const i=t.length-1,s=new Array(i);for(let r=0;r<i;++r){const l=ot(t[r+1],n,a);s[r]=l}return s}}function Cc(n,t,e){const a=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${a}, got ${i} instead`)}function Or(n,t,e){const a=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${a}, got ${i} instead`)}function kc(n,t,e){const a=n.length-1,i=Mt|K|gt,s=ot(n[1],i,e),r=ot(n[n.length-1],t,e),l=new Array(a-2);for(let o=0;o<a-2;o+=2){try{const h=ot(n[o+2],s.type,e);l[o]=h}catch(h){throw new Error(`failed to parse argument ${o+1} of match expression: ${h.message}`)}try{const h=ot(n[o+3],r.type,e);l[o+1]=h}catch(h){throw new Error(`failed to parse argument ${o+2} of match expression: ${h.message}`)}}return[s,...l,r]}function Lc(n,t,e){const a=n[1];let i;switch(a[0]){case"linear":i=1;break;case"exponential":const o=a[1];if(typeof o!="number"||o<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(o)} instead`);i=o;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(a)}`)}const s=new at(K,i);let r;try{r=ot(n[2],K,e)}catch(o){throw new Error(`failed to parse argument 1 in interpolate expression: ${o.message}`)}const l=new Array(n.length-3);for(let o=0;o<l.length;o+=2){try{const h=ot(n[o+3],K,e);l[o]=h}catch(h){throw new Error(`failed to parse argument ${o+2} for interpolate expression: ${h.message}`)}try{const h=ot(n[o+4],t,e);l[o+1]=h}catch(h){throw new Error(`failed to parse argument ${o+3} for interpolate expression: ${h.message}`)}}return[s,r,...l]}function Tc(n,t,e){const a=ot(n[n.length-1],t,e),i=new Array(n.length-1);for(let s=0;s<i.length-1;s+=2){try{const r=ot(n[s+1],gt,e);i[s]=r}catch(r){throw new Error(`failed to parse argument ${s} of case expression: ${r.message}`)}try{const r=ot(n[s+2],a.type,e);i[s+1]=r}catch(r){throw new Error(`failed to parse argument ${s+1} of case expression: ${r.message}`)}}return i[i.length-1]=a,i}function Oc(n,t,e){let a=n[2];if(!Array.isArray(a))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof a[0]=="string"){if(a[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(a[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');a=a[1],i=Mt}else i=K;const s=new Array(a.length);for(let l=0;l<s.length;l++)try{const o=ot(a[l],i,e);s[l]=o}catch(o){throw new Error(`failed to parse haystack item ${l} for "in" expression: ${o.message}`)}return[ot(n[1],i,e),...s]}function Dc(n,t,e){let a;try{a=ot(n[1],K,e)}catch(r){throw new Error(`failed to parse first argument in palette expression: ${r.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let r=0;r<s.length;r++){let l;try{l=ot(i[r],Gt,e)}catch(o){throw new Error(`failed to parse color at index ${r} in palette expression: ${o.message}`)}if(!(l instanceof at))throw new Error(`the palette color at index ${r} must be a literal value`);s[r]=l}return[a,...s]}function P(...n){return function(t,e,a){const i=t[0];let s;for(let r=0;r<n.length;r++){const l=n[r](t,e,a);if(r==n.length-1){if(!l)throw new Error("expected last argument validator to return the parsed args");s=l}}return new Ec(e,i,...s)}}function Nc(n,t,e){const a=n[0],i=Sc[a];if(!i)throw new Error(`unknown operator: ${a}`);return i(n,t,e)}function to(n){if(!n)return"";const t=n.getType();switch(t){case"Point":case"LineString":case"Polygon":return t;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return to(n.getGeometries()[0]);default:return""}}function eo(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function de(n,t,e){const a=ot(n,t,e);return Vt(a)}function Vt(n,t){if(n instanceof at){if(n.type===Gt&&typeof n.value=="string"){const a=Ms(n.value);return function(){return a}}return function(){return n.value}}const e=n.operator;switch(e){case E.Number:case E.String:case E.Coalesce:return Pc(n);case E.Get:case E.Var:case E.Has:return Fc(n);case E.Id:return a=>a.featureId;case E.GeometryType:return a=>a.geometryType;case E.Concat:{const a=n.args.map(i=>Vt(i));return i=>"".concat(...a.map(s=>s(i).toString()))}case E.Resolution:return a=>a.resolution;case E.Any:case E.All:case E.Between:case E.In:case E.Not:return Gc(n);case E.Equal:case E.NotEqual:case E.LessThan:case E.LessThanOrEqualTo:case E.GreaterThan:case E.GreaterThanOrEqualTo:return Bc(n);case E.Multiply:case E.Divide:case E.Add:case E.Subtract:case E.Clamp:case E.Mod:case E.Pow:case E.Abs:case E.Floor:case E.Ceil:case E.Round:case E.Sin:case E.Cos:case E.Atan:case E.Sqrt:return Uc(n);case E.Case:return zc(n);case E.Match:return Vc(n);case E.Interpolate:return jc(n);case E.ToString:return Hc(n);default:throw new Error(`Unsupported operator ${e}`)}}function Pc(n,t){const e=n.operator,a=n.args.length,i=new Array(a);for(let s=0;s<a;++s)i[s]=Vt(n.args[s]);switch(e){case E.Coalesce:return s=>{for(let r=0;r<a;++r){const l=i[r](s);if(typeof l<"u"&&l!==null)return l}throw new Error("Expected one of the values to be non-null")};case E.Number:case E.String:return s=>{for(let r=0;r<a;++r){const l=i[r](s);if(typeof l===e)return l}throw new Error(`Expected one of the values to be a ${e}`)};default:throw new Error(`Unsupported assertion operator ${e}`)}}function Fc(n,t){const a=n.args[0].value;switch(n.operator){case E.Get:return i=>{const s=n.args;let r=i.properties[a];for(let l=1,o=s.length;l<o;++l){const u=s[l].value;r=r[u]}return r};case E.Var:return i=>i.variables[a];case E.Has:return i=>{const s=n.args;if(!(a in i.properties))return!1;let r=i.properties[a];for(let l=1,o=s.length;l<o;++l){const u=s[l].value;if(!r||!Object.hasOwn(r,u))return!1;r=r[u]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function Bc(n,t){const e=n.operator,a=Vt(n.args[0]),i=Vt(n.args[1]);switch(e){case E.Equal:return s=>a(s)===i(s);case E.NotEqual:return s=>a(s)!==i(s);case E.LessThan:return s=>a(s)<i(s);case E.LessThanOrEqualTo:return s=>a(s)<=i(s);case E.GreaterThan:return s=>a(s)>i(s);case E.GreaterThanOrEqualTo:return s=>a(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${e}`)}}function Gc(n,t){const e=n.operator,a=n.args.length,i=new Array(a);for(let s=0;s<a;++s)i[s]=Vt(n.args[s]);switch(e){case E.Any:return s=>{for(let r=0;r<a;++r)if(i[r](s))return!0;return!1};case E.All:return s=>{for(let r=0;r<a;++r)if(!i[r](s))return!1;return!0};case E.Between:return s=>{const r=i[0](s),l=i[1](s),o=i[2](s);return r>=l&&r<=o};case E.In:return s=>{const r=i[0](s);for(let l=1;l<a;++l)if(r===i[l](s))return!0;return!1};case E.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${e}`)}}function Uc(n,t){const e=n.operator,a=n.args.length,i=new Array(a);for(let s=0;s<a;++s)i[s]=Vt(n.args[s]);switch(e){case E.Multiply:return s=>{let r=1;for(let l=0;l<a;++l)r*=i[l](s);return r};case E.Divide:return s=>i[0](s)/i[1](s);case E.Add:return s=>{let r=0;for(let l=0;l<a;++l)r+=i[l](s);return r};case E.Subtract:return s=>i[0](s)-i[1](s);case E.Clamp:return s=>{const r=i[0](s),l=i[1](s);if(r<l)return l;const o=i[2](s);return r>o?o:r};case E.Mod:return s=>i[0](s)%i[1](s);case E.Pow:return s=>Math.pow(i[0](s),i[1](s));case E.Abs:return s=>Math.abs(i[0](s));case E.Floor:return s=>Math.floor(i[0](s));case E.Ceil:return s=>Math.ceil(i[0](s));case E.Round:return s=>Math.round(i[0](s));case E.Sin:return s=>Math.sin(i[0](s));case E.Cos:return s=>Math.cos(i[0](s));case E.Atan:return a===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case E.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${e}`)}}function zc(n,t){const e=n.args.length,a=new Array(e);for(let i=0;i<e;++i)a[i]=Vt(n.args[i]);return i=>{for(let s=0;s<e-1;s+=2)if(a[s](i))return a[s+1](i);return a[e-1](i)}}function Vc(n,t){const e=n.args.length,a=new Array(e);for(let i=0;i<e;++i)a[i]=Vt(n.args[i]);return i=>{const s=a[0](i);for(let r=1;r<e;r+=2)if(s===a[r](i))return a[r+1](i);return a[e-1](i)}}function jc(n,t){const e=n.args.length,a=new Array(e);for(let i=0;i<e;++i)a[i]=Vt(n.args[i]);return i=>{const s=a[0](i),r=a[1](i);let l,o;for(let h=2;h<e;h+=2){const u=a[h](i);let c=a[h+1](i);const _=Array.isArray(c);if(_&&(c=pu(c)),u>=r)return h===2?c:_?Kc(s,r,l,o,u,c):Vn(s,r,l,o,u,c);l=u,o=c}return o}}function Hc(n,t){const e=n.operator,a=n.args.length,i=new Array(a);for(let s=0;s<a;++s)i[s]=Vt(n.args[s]);switch(e){case E.ToString:return s=>{const r=i[0](s);return n.args[0].type===Gt?ws(r):r.toString()};default:throw new Error(`Unsupported convert operator ${e}`)}}function Vn(n,t,e,a,i,s){const r=i-e;if(r===0)return a;const l=t-e,o=n===1?l/r:(Math.pow(n,l)-1)/(Math.pow(n,r)-1);return a+o*(s-a)}function Kc(n,t,e,a,i,s){if(i-e===0)return a;const l=mr(a),o=mr(s);let h=o[2]-l[2];h>180?h-=360:h<-180&&(h+=360);const u=[Vn(n,t,e,l[0],i,o[0]),Vn(n,t,e,l[1],i,o[1]),l[2]+Vn(n,t,e,0,i,h),Vn(n,t,e,a[3],i,s[3])];return Gl(yu(u))}function qc(n){return!0}function Wc(n){const t=Ql(),e=Xc(n,t),a=eo();return function(i,s){if(a.properties=i.getPropertiesInternal(),a.resolution=s,t.featureId){const r=i.getId();r!==void 0?a.featureId=r:a.featureId=null}return t.geometryType&&(a.geometryType=to(i.getGeometry())),e(a)}}function Dr(n){const t=Ql(),e=n.length,a=new Array(e);for(let r=0;r<e;++r)a[r]=ns(n[r],t);const i=eo(),s=new Array(e);return function(r,l){if(i.properties=r.getPropertiesInternal(),i.resolution=l,t.featureId){const h=r.getId();h!==void 0?i.featureId=h:i.featureId=null}let o=0;for(let h=0;h<e;++h){const u=a[h](i);u&&(s[o]=u,o+=1)}return s.length=o,s}}function Xc(n,t){const e=n.length,a=new Array(e);for(let i=0;i<e;++i){const s=n[i],r="filter"in s?de(s.filter,gt,t):qc;let l;if(Array.isArray(s.style)){const o=s.style.length;l=new Array(o);for(let h=0;h<o;++h)l[h]=ns(s.style[h],t)}else l=[ns(s.style,t)];a[i]={filter:r,styles:l}}return function(i){const s=[];let r=!1;for(let l=0;l<e;++l){const o=a[l].filter;if(o(i)&&!(n[l].else&&r)){r=!0;for(const h of a[l].styles){const u=h(i);u&&s.push(u)}}}return s}}function ns(n,t){const e=ha(n,"",t),a=ua(n,"",t),i=$c(n,t),s=Yc(n,t),r=wt(n,"z-index",t);if(!e&&!a&&!i&&!s&&!na(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const l=new Ut;return function(o){let h=!0;if(e){const u=e(o);u&&(h=!1),l.setFill(u)}if(a){const u=a(o);u&&(h=!1),l.setStroke(u)}if(i){const u=i(o);u&&(h=!1),l.setText(u)}if(s){const u=s(o);u&&(h=!1),l.setImage(u)}return r&&l.setZIndex(r(o)),h?null:l}}function ha(n,t,e){let a;if(t+"fill-pattern-src"in n)a=t_(n,t+"fill-",e);else{if(n[t+"fill-color"]==="none")return s=>null;a=Rs(n,t+"fill-color",e)}if(!a)return null;const i=new Pt;return function(s){const r=a(s);return r===xs?null:(i.setColor(r),i)}}function ua(n,t,e){const a=wt(n,t+"stroke-width",e),i=Rs(n,t+"stroke-color",e);if(!a&&!i)return null;const s=oe(n,t+"stroke-line-cap",e),r=oe(n,t+"stroke-line-join",e),l=no(n,t+"stroke-line-dash",e),o=wt(n,t+"stroke-line-dash-offset",e),h=wt(n,t+"stroke-miter-limit",e),u=new Bt;return function(c){if(i){const _=i(c);if(_===xs)return null;u.setColor(_)}if(a&&u.setWidth(a(c)),s){const _=s(c);if(_!=="butt"&&_!=="round"&&_!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(_)}if(r){const _=r(c);if(_!=="bevel"&&_!=="round"&&_!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(_)}return l&&u.setLineDash(l(c)),o&&u.setLineDashOffset(o(c)),h&&u.setMiterLimit(h(c)),u}}function $c(n,t){const e="text-",a=oe(n,e+"value",t);if(!a)return null;const i=ha(n,e,t),s=ha(n,e+"background-",t),r=ua(n,e,t),l=ua(n,e+"background-",t),o=oe(n,e+"font",t),h=wt(n,e+"max-angle",t),u=wt(n,e+"offset-x",t),c=wt(n,e+"offset-y",t),_=un(n,e+"overflow",t),f=oe(n,e+"placement",t),d=wt(n,e+"repeat",t),m=yi(n,e+"scale",t),g=un(n,e+"rotate-with-view",t),p=wt(n,e+"rotation",t),y=oe(n,e+"align",t),v=oe(n,e+"justify",t),b=oe(n,e+"baseline",t),x=un(n,e+"keep-upright",t),M=no(n,e+"padding",t),R=bi(n,e+"declutter-mode"),w=new Be({declutterMode:R});return function(I){if(w.setText(a(I)),i&&w.setFill(i(I)),s&&w.setBackgroundFill(s(I)),r&&w.setStroke(r(I)),l&&w.setBackgroundStroke(l(I)),o&&w.setFont(o(I)),h&&w.setMaxAngle(h(I)),u&&w.setOffsetX(u(I)),c&&w.setOffsetY(c(I)),_&&w.setOverflow(_(I)),f){const L=f(I);if(L!=="point"&&L!=="line")throw new Error("Expected point or line for text-placement");w.setPlacement(L)}if(d&&w.setRepeat(d(I)),m&&w.setScale(m(I)),g&&w.setRotateWithView(g(I)),p&&w.setRotation(p(I)),y){const L=y(I);if(L!=="left"&&L!=="center"&&L!=="right"&&L!=="end"&&L!=="start")throw new Error("Expected left, right, center, start, or end for text-align");w.setTextAlign(L)}if(v){const L=v(I);if(L!=="left"&&L!=="right"&&L!=="center")throw new Error("Expected left, right, or center for text-justify");w.setJustify(L)}if(b){const L=b(I);if(L!=="bottom"&&L!=="top"&&L!=="middle"&&L!=="alphabetic"&&L!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");w.setTextBaseline(L)}return M&&w.setPadding(M(I)),x&&w.setKeepUpright(x(I)),w}}function Yc(n,t){return"icon-src"in n?Zc(n,t):"shape-points"in n?Jc(n,t):"circle-radius"in n?Qc(n,t):null}function Zc(n,t){const e="icon-",a=e+"src",i=ao(n[a],a),s=si(n,e+"anchor",t),r=yi(n,e+"scale",t),l=wt(n,e+"opacity",t),o=si(n,e+"displacement",t),h=wt(n,e+"rotation",t),u=un(n,e+"rotate-with-view",t),c=Pr(n,e+"anchor-origin"),_=Fr(n,e+"anchor-x-units"),f=Fr(n,e+"anchor-y-units"),d=i_(n,e+"color"),m=n_(n,e+"cross-origin"),g=a_(n,e+"offset"),p=Pr(n,e+"offset-origin"),y=ri(n,e+"width"),v=ri(n,e+"height"),b=e_(n,e+"size"),x=bi(n,e+"declutter-mode"),M=new pi({src:i,anchorOrigin:c,anchorXUnits:_,anchorYUnits:f,color:d,crossOrigin:m,offset:g,offsetOrigin:p,height:v,width:y,size:b,declutterMode:x});return function(R){return l&&M.setOpacity(l(R)),o&&M.setDisplacement(o(R)),h&&M.setRotation(h(R)),u&&M.setRotateWithView(u(R)),r&&M.setScale(r(R)),s&&M.setAnchor(s(R)),M}}function Jc(n,t){const e="shape-",a=e+"points",i=e+"radius",s=as(n[a],a),r=as(n[i],i),l=ha(n,e,t),o=ua(n,e,t),h=yi(n,e+"scale",t),u=si(n,e+"displacement",t),c=wt(n,e+"rotation",t),_=un(n,e+"rotate-with-view",t),f=ri(n,e+"radius2"),d=ri(n,e+"angle"),m=bi(n,e+"declutter-mode"),g=new mi({points:s,radius:r,radius2:f,angle:d,declutterMode:m});return function(p){return l&&g.setFill(l(p)),o&&g.setStroke(o(p)),u&&g.setDisplacement(u(p)),c&&g.setRotation(c(p)),_&&g.setRotateWithView(_(p)),h&&g.setScale(h(p)),g}}function Qc(n,t){const e="circle-",a=ha(n,e,t),i=ua(n,e,t),s=wt(n,e+"radius",t),r=yi(n,e+"scale",t),l=si(n,e+"displacement",t),o=wt(n,e+"rotation",t),h=un(n,e+"rotate-with-view",t),u=bi(n,e+"declutter-mode"),c=new gi({radius:5,declutterMode:u});return function(_){return s&&c.setRadius(s(_)),a&&c.setFill(a(_)),i&&c.setStroke(i(_)),l&&c.setDisplacement(l(_)),o&&c.setRotation(o(_)),h&&c.setRotateWithView(h(_)),r&&c.setScale(r(_)),c}}function wt(n,t,e){if(!(t in n))return;const a=de(n[t],K,e);return function(i){return as(a(i),t)}}function oe(n,t,e){if(!(t in n))return null;const a=de(n[t],Mt,e);return function(i){return ao(a(i),t)}}function t_(n,t,e){const a=oe(n,t+"pattern-src",e),i=Nr(n,t+"pattern-offset",e),s=Nr(n,t+"pattern-size",e),r=Rs(n,t+"color",e);return function(l){return{src:a(l),offset:i&&i(l),size:s&&s(l),color:r&&r(l)}}}function un(n,t,e){if(!(t in n))return null;const a=de(n[t],gt,e);return function(i){const s=a(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${t}`);return s}}function Rs(n,t,e){if(!(t in n))return null;const a=de(n[t],Gt,e);return function(i){return io(a(i),t)}}function no(n,t,e){if(!(t in n))return null;const a=de(n[t],ze,e);return function(i){return va(a(i),t)}}function si(n,t,e){if(!(t in n))return null;const a=de(n[t],ze,e);return function(i){const s=va(a(i),t);if(s.length!==2)throw new Error(`Expected two numbers for ${t}`);return s}}function Nr(n,t,e){if(!(t in n))return null;const a=de(n[t],ze,e);return function(i){return so(a(i),t)}}function yi(n,t,e){if(!(t in n))return null;const a=de(n[t],ze|K,e);return function(i){return s_(a(i),t)}}function ri(n,t){const e=n[t];if(e!==void 0){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}}function e_(n,t){const e=n[t];if(e!==void 0){if(typeof e=="number")return pn(e);if(!Array.isArray(e))throw new Error(`Expected a number or size array for ${t}`);if(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return e}}function n_(n,t){const e=n[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}}function Pr(n,t){const e=n[t];if(e!==void 0){if(e!=="bottom-left"&&e!=="bottom-right"&&e!=="top-left"&&e!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return e}}function Fr(n,t){const e=n[t];if(e!==void 0){if(e!=="pixels"&&e!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return e}}function a_(n,t){const e=n[t];if(e!==void 0)return va(e,t)}function bi(n,t){const e=n[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);if(e!=="declutter"&&e!=="obstacle"&&e!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return e}}function i_(n,t){const e=n[t];if(e!==void 0)return io(e,t)}function va(n,t){if(!Array.isArray(n))throw new Error(`Expected an array for ${t}`);const e=n.length;for(let a=0;a<e;++a)if(typeof n[a]!="number")throw new Error(`Expected an array of numbers for ${t}`);return n}function ao(n,t){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);return n}function as(n,t){if(typeof n!="number")throw new Error(`Expected a number for ${t}`);return n}function io(n,t){if(typeof n=="string")return n;const e=va(n,t),a=e.length;if(a<3||a>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return e}function so(n,t){const e=va(n,t);if(e.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return e}function s_(n,t){return typeof n=="number"?n:so(n,t)}const Ft={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Br(n,t,e){return function(a,i,s,r,l){if(!a)return;if(!i&&!t)return a;const o=t?0:s[0]*i,h=t?0:s[1]*i,u=l?l[0]:0,c=l?l[1]:0;let _=n[0]+o/2+u,f=n[2]-o/2+u,d=n[1]+h/2+c,m=n[3]-h/2+c;_>f&&(_=(f+_)/2,f=_),d>m&&(d=(m+d)/2,m=d);let g=_t(a[0],_,f),p=_t(a[1],d,m);if(r&&e&&i){const y=30*i;g+=-y*Math.log(1+Math.max(0,_-a[0])/y)+y*Math.log(1+Math.max(0,a[0]-f)/y),p+=-y*Math.log(1+Math.max(0,d-a[1])/y)+y*Math.log(1+Math.max(0,a[1]-m)/y)}return[g,p]}}function r_(n){return n}function Is(n,t,e,a){const i=he(t)/e[0],s=pa(t)/e[1];return a?Math.min(n,Math.max(i,s)):Math.min(n,Math.min(i,s))}function As(n,t,e){let a=Math.min(n,t);const i=50;return a*=Math.log(1+i*Math.max(0,n/t-1))/i+1,e&&(a=Math.max(a,e),a/=Math.log(1+i*Math.max(0,e/n-1))/i+1),_t(a,e/2,t*2)}function l_(n,t,e,a){return t=t!==void 0?t:!0,function(i,s,r,l){if(i!==void 0){const o=n[0],h=n[n.length-1],u=e?Is(o,e,r,a):o;if(l)return t?As(i,u,h):_t(i,h,u);const c=Math.min(u,i),_=Math.floor(Pl(n,c,s));return n[_]>u&&_<n.length-1?n[_+1]:n[_]}}}function o_(n,t,e,a,i,s){return a=a!==void 0?a:!0,e=e!==void 0?e:0,function(r,l,o,h){if(r!==void 0){const u=i?Is(t,i,o,s):t;if(h)return a?As(r,u,e):_t(r,e,u);const c=1e-9,_=Math.ceil(Math.log(t/u)/Math.log(n)-c),f=-l*(.5-c)+.5,d=Math.min(u,r),m=Math.floor(Math.log(t/d)/Math.log(n)+f),g=Math.max(_,m),p=t/Math.pow(n,g);return _t(p,e,u)}}}function Gr(n,t,e,a,i){return e=e!==void 0?e:!0,function(s,r,l,o){if(s!==void 0){const h=a?Is(n,a,l,i):n;return!e||!o?_t(s,t,h):As(s,h,t)}}}function h_(n){if(n!==void 0)return 0}function Ur(n){if(n!==void 0)return n}function u_(n){const t=2*Math.PI/n;return function(e,a){if(a)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function c_(n){const t=ru(5);return function(e,a){return a||e===void 0?e:Math.abs(e)<=t?0:e}}const __=256,Vi=0;class zr extends xn{constructor(t){super(),t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.projection_=bs(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,t.projection&&lu(),t.center&&(t.center=ge(t.center)),t.extent&&(t.extent=Pn(t.extent)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const l in Ft)delete e[l];this.setProperties(e,!0);const a=d_(t);this.maxResolution_=a.maxResolution,this.minResolution_=a.minResolution,this.zoomFactor_=a.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=a.minZoom;const i=f_(t),s=a.constraint,r=m_(t);this.constraints_={center:i,resolution:s,rotation:r},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const a=this.getCenterInternal();if(a){const i=t||[0,0,0,0];e=e||[0,0,0,0];const s=this.getResolution(),r=s/2*(i[3]-e[3]+e[1]-i[1]),l=s/2*(i[0]-e[0]+e[2]-i[2]);this.setCenterInternal([a[0]+r,a[1]-l])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let a=0;a<e.length;++a){let i=arguments[a];i.center&&(i=Object.assign({},i),i.center=ge(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=ge(i.anchor,this.getProjection())),e[a]=i}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,a;e>1&&typeof arguments[e-1]=="function"&&(a=arguments[e-1],--e);let i=0;for(;i<e&&!this.isDef();++i){const u=arguments[i];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(i===e){a&&Fa(a,!0);return}let s=Date.now(),r=this.targetCenter_.slice(),l=this.targetResolution_,o=this.targetRotation_;const h=[];for(;i<e;++i){const u=arguments[i],c={start:s,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||ou,callback:a};if(u.center&&(c.sourceCenter=r,c.targetCenter=u.center.slice(),r=c.targetCenter),u.zoom!==void 0?(c.sourceResolution=l,c.targetResolution=this.getResolutionForZoom(u.zoom),l=c.targetResolution):u.resolution&&(c.sourceResolution=l,c.targetResolution=u.resolution,l=c.targetResolution),u.rotation!==void 0){c.sourceRotation=o;const _=rr(u.rotation-o+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=o+_,o=c.targetRotation}g_(c)?c.complete=!0:s+=c.duration,h.push(c)}this.animations_.push(h),this.setHint(Nt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Nt.ANIMATING]>0}getInteracting(){return this.hints_[Nt.INTERACTING]>0}cancelAnimations(){this.setHint(Nt.ANIMATING,-this.hints_[Nt.ANIMATING]);let t;for(let e=0,a=this.animations_.length;e<a;++e){const i=this.animations_[e];if(i[0].callback&&Fa(i[0].callback,!1),!t)for(let s=0,r=i.length;s<r;++s){const l=i[s];if(!l.complete){t=l.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let a=this.animations_.length-1;a>=0;--a){const i=this.animations_[a];let s=!0;for(let r=0,l=i.length;r<l;++r){const o=i[r];if(o.complete)continue;const h=t-o.start;let u=o.duration>0?h/o.duration:1;u>=1?(o.complete=!0,u=1):s=!1;const c=o.easing(u);if(o.sourceCenter){const _=o.sourceCenter[0],f=o.sourceCenter[1],d=o.targetCenter[0],m=o.targetCenter[1];this.nextCenter_=o.targetCenter;const g=_+c*(d-_),p=f+c*(m-f);this.targetCenter_=[g,p]}if(o.sourceResolution&&o.targetResolution){const _=c===1?o.targetResolution:o.sourceResolution+c*(o.targetResolution-o.sourceResolution);if(o.anchor){const f=this.getViewportSize_(this.getRotation()),d=this.constraints_.resolution(_,0,f,!0);this.targetCenter_=this.calculateCenterZoom(d,o.anchor)}this.nextResolution_=o.targetResolution,this.targetResolution_=_,this.applyTargetState_(!0)}if(o.sourceRotation!==void 0&&o.targetRotation!==void 0){const _=c===1?rr(o.targetRotation+Math.PI,2*Math.PI)-Math.PI:o.sourceRotation+c*(o.targetRotation-o.sourceRotation);if(o.anchor){const f=this.constraints_.rotation(_,!0);this.targetCenter_=this.calculateCenterRotate(f,o.anchor)}this.nextRotation_=o.targetRotation,this.targetRotation_=_}if(this.applyTargetState_(!0),e=!0,!o.complete)break}if(s){this.animations_[a]=null,this.setHint(Nt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const r=i[0].callback;r&&Fa(r,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let a;const i=this.getCenterInternal();return i!==void 0&&(a=[i[0]-e[0],i[1]-e[1]],Vh(a,t-this.getRotation()),jh(a,e)),a}calculateCenterZoom(t,e){let a;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const r=e[0]-t*(e[0]-i[0])/s,l=e[1]-t*(e[1]-i[1])/s;a=[r,l]}return a}getViewportSize_(t){const e=this.viewportSize_;if(t){const a=e[0],i=e[1];return[Math.abs(a*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(a*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&lr(t,this.getProjection())}getCenterInternal(){return this.get(Ft.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return Nl(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();pt(e,"The view center is not defined");const a=this.getResolution();pt(a!==void 0,"The view resolution is not defined");const i=this.getRotation();return pt(i!==void 0,"The view rotation is not defined"),Hh(e,a,i,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Ft.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Pn(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const a=he(t)/e[0],i=pa(t)/e[1];return Math.max(a,i)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,i=Math.log(e/a)/Math.log(t);return function(s){return e/Math.pow(t,s*i)}}getRotation(){return this.get(Ft.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),a=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(a/i)/e;return function(r){return Math.log(a/r)/e/s}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const a=this.padding_;return a&&(e=[e[0]-a[1]-a[3],e[1]-a[0]-a[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),a=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const r=this.getViewportSizeMinusPadding_();i=ji(i,this.getViewportSize_(),[r[0]/2+s[3],r[1]/2+s[0]],e,a)}return{center:i.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:a,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,a,i;if(this.resolutions_){const s=Pl(this.resolutions_,t,1);e=s,a=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=a/this.resolutions_[s+1]}else a=this.maxResolution_,i=this.zoomFactor_;return e+Math.log(a/t)/Math.log(i)}getResolutionForZoom(t){var e;if((e=this.resolutions_)!=null&&e.length){if(this.resolutions_.length===1)return this.resolutions_[0];const a=_t(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[a]/this.resolutions_[a+1];return this.resolutions_[a]/Math.pow(i,_t(t-a,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let a;if(pt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){pt(!Kh(t),"Cannot fit empty extent provided as `geometry`");const i=Pn(t,this.getProjection());a=or(i)}else if(t.getType()==="Circle"){const i=Pn(t.getExtent(),this.getProjection());a=or(i),a.rotate(this.getRotation(),hr(i))}else a=t;this.fitInternal(a,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),a=Math.cos(e),i=Math.sin(-e),s=t.getFlatCoordinates(),r=t.getStride();let l=1/0,o=1/0,h=-1/0,u=-1/0;for(let c=0,_=s.length;c<_;c+=r){const f=s[c]*a-s[c+1]*i,d=s[c]*i+s[c+1]*a;l=Math.min(l,f),o=Math.min(o,d),h=Math.max(h,f),u=Math.max(u,d)}return[l,o,h,u]}fitInternal(t,e){e=e||{};let a=e.size;a||(a=this.getViewportSizeMinusPadding_());const i=e.padding!==void 0?e.padding:[0,0,0,0],s=e.nearest!==void 0?e.nearest:!1;let r;e.minResolution!==void 0?r=e.minResolution:e.maxZoom!==void 0?r=this.getResolutionForZoom(e.maxZoom):r=0;const l=this.rotatedExtentForGeometry(t);let o=this.getResolutionForExtentInternal(l,[a[0]-i[1]-i[3],a[1]-i[0]-i[2]]);o=isNaN(o)?r:Math.max(o,r),o=this.getConstrainedResolution(o,s?0:1);const h=this.getRotation(),u=Math.sin(h),c=Math.cos(h),_=hr(l);_[0]+=(i[1]-i[3])/2*o,_[1]+=(i[0]-i[2])/2*o;const f=_[0]*c-_[1]*u,d=_[1]*c+_[0]*u,m=this.getConstrainedCenter([f,d],o),g=e.callback?e.callback:gs;e.duration!==void 0?this.animateInternal({resolution:o,center:m,duration:e.duration,easing:e.easing},g):(this.targetResolution_=o,this.targetCenter_=m,this.applyTargetState_(!1,!0),Fa(g,!0))}centerOn(t,e,a){this.centerOnInternal(ge(t,this.getProjection()),e,a)}centerOnInternal(t,e,a){this.setCenterInternal(ji(t,e,a,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,a,i){let s;const r=this.padding_;if(r&&t){const l=this.getViewportSizeMinusPadding_(-a),o=ji(t,i,[l[0]/2+r[3],l[1]/2+r[0]],e,a);s=[t[0]-o[0],t[1]-o[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=lr(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&ge(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const a=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,i,a);e&&(this.targetCenter_=this.calculateCenterZoom(s,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=ge(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const a=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,a);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&ge(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const a=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,a),s=this.getViewportSize_(i),r=this.constraints_.resolution(this.targetResolution_,0,s,a),l=this.constraints_.center(this.targetCenter_,r,s,a,this.calculateCenterShift(this.targetCenter_,r,i,s));this.get(Ft.ROTATION)!==i&&this.set(Ft.ROTATION,i),this.get(Ft.RESOLUTION)!==r&&(this.set(Ft.RESOLUTION,r),this.set("zoom",this.getZoom(),!0)),(!l||!this.get(Ft.CENTER)||!Ji(this.get(Ft.CENTER),l))&&this.set(Ft.CENTER,l),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,a){t=t!==void 0?t:200;const i=e||0,s=this.constraints_.rotation(this.targetRotation_),r=this.getViewportSize_(s),l=this.constraints_.resolution(this.targetResolution_,i,r),o=this.constraints_.center(this.targetCenter_,l,r,!1,this.calculateCenterShift(this.targetCenter_,l,s,r));if(t===0&&!this.cancelAnchor_){this.targetResolution_=l,this.targetRotation_=s,this.targetCenter_=o,this.applyTargetState_();return}a=a||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==l||this.getRotation()!==s||!this.getCenterInternal()||!Ji(this.getCenterInternal(),o))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:o,resolution:l,duration:t,easing:hu,anchor:a}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Nt.INTERACTING,1)}endInteraction(t,e,a){a=a&&ge(a,this.getProjection()),this.endInteractionInternal(t,e,a)}endInteractionInternal(t,e,a){this.getInteracting()&&(this.setHint(Nt.INTERACTING,-1),this.resolveConstraints(t,e,a))}getConstrainedCenter(t,e){const a=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),a)}getConstrainedZoom(t,e){const a=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(a,e))}getConstrainedResolution(t,e){e=e||0;const a=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,a)}}function Fa(n,t){setTimeout(function(){n(t)},0)}function f_(n){if(n.extent!==void 0){const e=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return Br(n.extent,n.constrainOnlyCenter,e)}const t=bs(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,Br(e,!1,!1)}return r_}function d_(n){let t,e,a,r=n.minZoom!==void 0?n.minZoom:Vi,l=n.maxZoom!==void 0?n.maxZoom:28;const o=n.zoomFactor!==void 0?n.zoomFactor:2,h=n.multiWorld!==void 0?n.multiWorld:!1,u=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,c=n.showFullExtent!==void 0?n.showFullExtent:!1,_=bs(n.projection,"EPSG:3857"),f=_.getExtent();let d=n.constrainOnlyCenter,m=n.extent;if(!h&&!m&&_.isGlobal()&&(d=!1,m=f),n.resolutions!==void 0){const g=n.resolutions;e=g[r],a=g[l]!==void 0?g[l]:g[g.length-1],n.constrainResolution?t=l_(g,u,!d&&m,c):t=Gr(e,a,u,!d&&m,c)}else{const p=(f?Math.max(he(f),pa(f)):360*nu.degrees/_.getMetersPerUnit())/__/Math.pow(2,Vi),y=p/Math.pow(2,28-Vi);e=n.maxResolution,e!==void 0?r=0:e=p/Math.pow(o,r),a=n.minResolution,a===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?a=e/Math.pow(o,l):a=p/Math.pow(o,l):a=y),l=r+Math.floor(Math.log(e/a)/Math.log(o)),a=e/Math.pow(o,l-r),n.constrainResolution?t=o_(o,e,a,u,!d&&m,c):t=Gr(e,a,u,!d&&m,c)}return{constraint:t,maxResolution:e,minResolution:a,minZoom:r,zoomFactor:o}}function m_(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const e=n.constrainRotation;return e===void 0||e===!0?c_():e===!1?Ur:typeof e=="number"?u_(e):Ur}return h_}function g_(n){return!(n.sourceCenter&&n.targetCenter&&!Ji(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function ji(n,t,e,a,i){const s=Math.cos(-i);let r=Math.sin(-i),l=n[0]*s-n[1]*r,o=n[1]*s+n[0]*r;l+=(t[0]/2-e[0])*a,o+=(e[1]-t[1]/2)*a,r=-r;const h=l*s-o*r,u=o*s+l*r;return[h,u]}const Z={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class p_ extends xn{constructor(t){super(),this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[Z.OPACITY]=t.opacity!==void 0?t.opacity:1,pt(typeof e[Z.OPACITY]=="number","Layer opacity must be a number"),e[Z.VISIBLE]=t.visible!==void 0?t.visible:!0,e[Z.Z_INDEX]=t.zIndex,e[Z.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[Z.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[Z.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[Z.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},a=this.getZIndex();return e.opacity=_t(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=a===void 0&&!e.managed?1/0:a,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return ut()}getLayerStatesArray(t){return ut()}getExtent(){return this.get(Z.EXTENT)}getMaxResolution(){return this.get(Z.MAX_RESOLUTION)}getMinResolution(){return this.get(Z.MIN_RESOLUTION)}getMinZoom(){return this.get(Z.MIN_ZOOM)}getMaxZoom(){return this.get(Z.MAX_ZOOM)}getOpacity(){return this.get(Z.OPACITY)}getSourceState(){return ut()}getVisible(){return this.get(Z.VISIBLE)}getZIndex(){return this.get(Z.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Z.EXTENT,t)}setMaxResolution(t){this.set(Z.MAX_RESOLUTION,t)}setMinResolution(t){this.set(Z.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(Z.MAX_ZOOM,t)}setMinZoom(t){this.set(Z.MIN_ZOOM,t)}setOpacity(t){pt(typeof t=="number","Layer opacity must be a number"),this.set(Z.OPACITY,t)}setVisible(t){this.set(Z.VISIBLE,t)}setZIndex(t){this.set(Z.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class y_ extends p_{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Z.SOURCE,this.handleSourcePropertyChange_);const a=t.source?t.source:null;this.setSource(a)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(Z.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Wn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=qn(t,ue.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0)),this.clearRenderer()),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let e;const a=this.getMapInternal();!t&&a&&(t=a.getView()),t instanceof zr?e={viewState:t.getState(),extent:t.calculateExtent()}:e=t,!e.layerStatesArray&&a&&(e.layerStatesArray=a.getLayerGroup().getLayerStatesArray());let i;if(e.layerStatesArray){if(i=e.layerStatesArray.find(r=>r.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return b_(i,e.viewState)&&(!s||Yt(s,e.extent))}getAttributions(t){var s;if(!this.isVisible(t))return[];const e=(s=this.getSource())==null?void 0:s.getAttributions();if(!e)return[];const a=t instanceof zr?t.getViewStateAndExtent():t;let i=e(a);return Array.isArray(i)||(i=[i]),i}render(t,e){const a=this.getRenderer();return a.prepareFrame(t)?(this.rendered=!0,a.renderFrame(t,e)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,e){}renderDeferred(t){const e=this.getRenderer();e&&e.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(Z.MAP,t)}getMapInternal(){return this.get(Z.MAP)}setMap(t){this.mapPrecomposeKey_&&(Wn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Wn(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=qn(t,Pe.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=qn(this,ue.CHANGE,t.render,t),this.changed())}handlePrecompose_(t){const e=t.frameState.layerStatesArray,a=this.getLayerState(!1);pt(!e.some(i=>i.layer===a.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(a)}setSource(t){this.set(Z.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function b_(n,t){if(!n.visible)return!1;const e=t.resolution;if(e<n.minResolution||e>=n.maxResolution)return!1;const a=t.zoom;return a>n.minZoom&&a<=n.maxZoom}const Vr={RENDER_ORDER:"renderOrder"};class v_ extends y_{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Vr.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,e){const a=this.getDeclutter();a in t.declutter||(t.declutter[a]=new $l(9)),this.getRenderer().renderDeclutter(t,e)}setRenderOrder(t){this.set(Vr.RENDER_ORDER,t)}setStyle(t){this.style_=t===void 0?Yl:t;const e=x_(t);this.styleFunction_=t===null?void 0:Qu(e),this.changed()}setDeclutter(t){this.declutter_=t?String(t):void 0,this.changed()}}function x_(n){if(n===void 0)return Yl;if(!n)return null;if(typeof n=="function"||n instanceof Ut)return n;if(!Array.isArray(n))return Dr([n]);if(n.length===0)return[];const t=n.length,e=n[0];if(e instanceof Ut){const i=new Array(t);for(let s=0;s<t;++s){const r=n[s];if(!(r instanceof Ut))throw new Error("Expected a list of style instances");i[s]=r}return i}if("style"in e){const i=new Array(t);for(let s=0;s<t;++s){const r=n[s];if(!("style"in r))throw new Error("Expected a list of rules with a style property");i[s]=r}return Wc(i)}return Dr(n)}class M_ extends v_{constructor(t){super(t)}createRenderer(){return new xc(this)}}function qe(n){return(t,...e)=>w_(n,t,e)}function Mn(n,t){return qe(ro(n,t).get)}const{apply:w_,getOwnPropertyDescriptor:ro,getPrototypeOf:Cs,ownKeys:E_}=Reflect,{iterator:vi,toStringTag:S_}=Symbol,R_=Object,{create:ks,defineProperty:I_}=R_,A_=Array,C_=A_.prototype,lo=C_[vi],k_=qe(lo),oo=ArrayBuffer,L_=oo.prototype;Mn(L_,"byteLength");const jr=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;jr&&Mn(jr.prototype,"byteLength");const T_=Cs(Uint8Array),xi=T_.prototype;Mn(xi,"buffer");Mn(xi,"byteOffset");Mn(xi,"length");Mn(xi,S_);const O_=Uint8Array,ho=Uint16Array,Ls=Uint32Array,D_=Float32Array,ca=Cs([][vi]()),uo=qe(ca.next),N_=qe(function*(){}().next),P_=Cs(ca),F_=DataView.prototype,B_=qe(F_.getUint16),Ts=WeakMap,co=Ts.prototype,_o=qe(co.get),G_=qe(co.set),fo=new Ts,U_=ks(null,{next:{value:function(){const t=_o(fo,this);return uo(t)}},[vi]:{value:function(){return this}}});function z_(n){if(n[vi]===lo&&ca.next===uo)return n;const t=ks(U_);return G_(fo,t,k_(n)),t}const V_=new Ts,j_=ks(P_,{next:{value:function(){const t=_o(V_,this);return N_(t)},writable:!0,configurable:!0}});for(const n of E_(ca))n!=="next"&&I_(j_,n,ro(ca,n));const mo=new oo(4),H_=new D_(mo),K_=new Ls(mo),Kt=new ho(512),qt=new O_(512);for(let n=0;n<256;++n){const t=n-127;t<-24?(Kt[n]=0,Kt[n|256]=32768,qt[n]=24,qt[n|256]=24):t<-14?(Kt[n]=1024>>-t-14,Kt[n|256]=1024>>-t-14|32768,qt[n]=-t-1,qt[n|256]=-t-1):t<=15?(Kt[n]=t+15<<10,Kt[n|256]=t+15<<10|32768,qt[n]=13,qt[n|256]=13):t<128?(Kt[n]=31744,Kt[n|256]=64512,qt[n]=24,qt[n|256]=24):(Kt[n]=31744,Kt[n|256]=64512,qt[n]=13,qt[n|256]=13)}const Os=new Ls(2048);for(let n=1;n<1024;++n){let t=n<<13,e=0;for(;!(t&8388608);)t<<=1,e-=8388608;t&=-8388609,e+=947912704,Os[n]=t|e}for(let n=1024;n<2048;++n)Os[n]=939524096+(n-1024<<13);const wn=new Ls(64);for(let n=1;n<31;++n)wn[n]=n<<23;wn[31]=1199570944;wn[32]=2147483648;for(let n=33;n<63;++n)wn[n]=2147483648+(n-32<<23);wn[63]=3347054592;const go=new ho(64);for(let n=1;n<64;++n)n!==32&&(go[n]=1024);function q_(n){const t=n>>10;return K_[0]=Os[go[t]+(n&1023)]+wn[t],H_[0]}function po(n,t,...e){return q_(B_(n,t,...z_(e)))}function yo(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ba={exports:{}},Hr;function W_(){if(Hr)return Ba.exports;Hr=1;function n(t,e,a){const i=a&&a.debug||!1;i&&console.log("[xml-utils] getting "+e+" in "+t);const s=typeof t=="object"?t.outer:t,r=s.slice(0,s.indexOf(">")+1),l=['"',"'"];for(let o=0;o<l.length;o++){const h=l[o],u=e+"\\="+h+"([^"+h+"]*)"+h;i&&console.log("[xml-utils] pattern:",u);const _=new RegExp(u).exec(r);if(i&&console.log("[xml-utils] match:",_),_)return _[1]}}return Ba.exports=n,Ba.exports.default=n,Ba.exports}var X_=W_();const Hi=yo(X_);var Ga={exports:{}},Ua={exports:{}},za={exports:{}},Kr;function $_(){if(Kr)return za.exports;Kr=1;function n(t,e,a){const s=new RegExp(e).exec(t.slice(a));return s?a+s.index:-1}return za.exports=n,za.exports.default=n,za.exports}var Va={exports:{}},qr;function Y_(){if(qr)return Va.exports;qr=1;function n(t,e,a){const s=new RegExp(e).exec(t.slice(a));return s?a+s.index+s[0].length-1:-1}return Va.exports=n,Va.exports.default=n,Va.exports}var ja={exports:{}},Wr;function Z_(){if(Wr)return ja.exports;Wr=1;function n(t,e){const a=new RegExp(e,"g"),i=t.match(a);return i?i.length:0}return ja.exports=n,ja.exports.default=n,ja.exports}var Xr;function J_(){if(Xr)return Ua.exports;Xr=1;const n=$_(),t=Y_(),e=Z_();function a(i,s,r){const l=r&&r.debug||!1,o=!(r&&typeof r.nested===!1),h=r&&r.startIndex||0;l&&console.log("[xml-utils] starting findTagByName with",s," and ",r);const u=n(i,`<${s}[ 
>/]`,h);if(l&&console.log("[xml-utils] start:",u),u===-1)return;const c=i.slice(u+s.length);let _=t(c,"^[^<]*[ /]>",0);const f=_!==-1&&c[_-1]==="/";if(l&&console.log("[xml-utils] selfClosing:",f),f===!1)if(o){let p=0,y=1,v=0;for(;(_=t(c,"[ /]"+s+">",p))!==-1;){const b=c.substring(p,_+1);if(y+=e(b,"<"+s+`[ 
	>]`),v+=e(b,"</"+s+">"),v>=y)break;p=_}}else _=t(c,"[ /]"+s+">",0);const d=u+s.length+_+1;if(l&&console.log("[xml-utils] end:",d),d===-1)return;const m=i.slice(u,d);let g;return f?g=null:g=m.slice(m.indexOf(">")+1,m.lastIndexOf("<")),{inner:g,outer:m,start:u,end:d}}return Ua.exports=a,Ua.exports.default=a,Ua.exports}var $r;function Q_(){if($r)return Ga.exports;$r=1;const n=J_();function t(e,a,i){const s=[],r=i&&i.debug||!1,l=i&&typeof i.nested=="boolean"?i.nested:!0;let o=i&&i.startIndex||0,h;for(;h=n(e,a,{debug:r,startIndex:o});)l?o=h.start+1+a.length:o=h.end,s.push(h);return r&&console.log("findTagsByName found",s.length,"tags"),s}return Ga.exports=t,Ga.exports.default=t,Ga.exports}var t0=Q_();const e0=yo(t0),Yn={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},Xt={};for(const n in Yn)Yn.hasOwnProperty(n)&&(Xt[Yn[n]]=parseInt(n,10));const n0=[Xt.BitsPerSample,Xt.ExtraSamples,Xt.SampleFormat,Xt.StripByteCounts,Xt.StripOffsets,Xt.StripRowCounts,Xt.TileByteCounts,Xt.TileOffsets,Xt.SubIFDs],Ki={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},V={};for(const n in Ki)Ki.hasOwnProperty(n)&&(V[Ki[n]]=parseInt(n,10));const It={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,CMYK:5,YCbCr:6,CIELab:8},a0={Unspecified:0},Z3={AddCompression:1},J3={None:0,Deflate:1,Zstandard:2},i0={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function s0(n,t){const{width:e,height:a}=n,i=new Uint8Array(e*a*3);let s;for(let r=0,l=0;r<n.length;++r,l+=3)s=256-n[r]/t*256,i[l]=s,i[l+1]=s,i[l+2]=s;return i}function r0(n,t){const{width:e,height:a}=n,i=new Uint8Array(e*a*3);let s;for(let r=0,l=0;r<n.length;++r,l+=3)s=n[r]/t*256,i[l]=s,i[l+1]=s,i[l+2]=s;return i}function l0(n,t){const{width:e,height:a}=n,i=new Uint8Array(e*a*3),s=t.length/3,r=t.length/3*2;for(let l=0,o=0;l<n.length;++l,o+=3){const h=n[l];i[o]=t[h]/65536*256,i[o+1]=t[h+s]/65536*256,i[o+2]=t[h+r]/65536*256}return i}function o0(n){const{width:t,height:e}=n,a=new Uint8Array(t*e*3);for(let i=0,s=0;i<n.length;i+=4,s+=3){const r=n[i],l=n[i+1],o=n[i+2],h=n[i+3];a[s]=255*((255-r)/256)*((255-h)/256),a[s+1]=255*((255-l)/256)*((255-h)/256),a[s+2]=255*((255-o)/256)*((255-h)/256)}return a}function h0(n){const{width:t,height:e}=n,a=new Uint8ClampedArray(t*e*3);for(let i=0,s=0;i<n.length;i+=3,s+=3){const r=n[i],l=n[i+1],o=n[i+2];a[s]=r+1.402*(o-128),a[s+1]=r-.34414*(l-128)-.71414*(o-128),a[s+2]=r+1.772*(l-128)}return a}const u0=.95047,c0=1,_0=1.08883;function f0(n){const{width:t,height:e}=n,a=new Uint8Array(t*e*3);for(let i=0,s=0;i<n.length;i+=3,s+=3){const r=n[i+0],l=n[i+1]<<24>>24,o=n[i+2]<<24>>24;let h=(r+16)/116,u=l/500+h,c=h-o/200,_,f,d;u=u0*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),h=c0*(h*h*h>.008856?h*h*h:(h-16/116)/7.787),c=_0*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),_=u*3.2406+h*-1.5372+c*-.4986,f=u*-.9689+h*1.8758+c*.0415,d=u*.0557+h*-.204+c*1.057,_=_>.0031308?1.055*_**(1/2.4)-.055:12.92*_,f=f>.0031308?1.055*f**(1/2.4)-.055:12.92*f,d=d>.0031308?1.055*d**(1/2.4)-.055:12.92*d,a[s]=Math.max(0,Math.min(1,_))*255,a[s+1]=Math.max(0,Math.min(1,f))*255,a[s+2]=Math.max(0,Math.min(1,d))*255}return a}const bo=new Map;function Ae(n,t){Array.isArray(n)||(n=[n]),n.forEach(e=>bo.set(e,t))}async function d0(n){const t=bo.get(n.Compression);if(!t)throw new Error(`Unknown compression method identifier: ${n.Compression}`);const e=await t();return new e(n)}Ae([void 0,1],()=>He(()=>import("./raw-Ctlamky6.lG6ojroe.js"),__vite__mapDeps([0,1])).then(n=>n.default));Ae(5,()=>He(()=>import("./lzw-D2MxT2zA.DmRYnG5C.js"),__vite__mapDeps([2,1])).then(n=>n.default));Ae(6,()=>{throw new Error("old style JPEG compression is not supported.")});Ae(7,()=>He(()=>import("./jpeg-CsvjaiEQ.A0lbw6YY.js"),__vite__mapDeps([3,1])).then(n=>n.default));Ae([8,32946],()=>He(()=>import("./deflate-BsBbGVWD.DOOJQnHL.js"),__vite__mapDeps([4,5,1])).then(n=>n.default));Ae(32773,()=>He(()=>import("./packbits-DJxVZ9kH.CBEwDSj4.js"),__vite__mapDeps([6,1])).then(n=>n.default));Ae(34887,()=>He(()=>import("./lerc-7-r7dJD_.DAoYcDPM.js"),__vite__mapDeps([7,5,1,8,9,10,11,12,13,14,15,16,17,18,19])).then(async n=>(await n.zstd.init(),n)).then(n=>n.default));Ae(50001,()=>He(()=>import("./webimage-Bg_w2qlD.C0wZFOAS.js"),__vite__mapDeps([20,1])).then(n=>n.default));function Mi(n,t,e,a=1){return new(Object.getPrototypeOf(n)).constructor(t*e*a)}function m0(n,t,e,a,i){const s=t/a,r=e/i;return n.map(l=>{const o=Mi(l,a,i);for(let h=0;h<i;++h){const u=Math.min(Math.round(r*h),e-1);for(let c=0;c<a;++c){const _=Math.min(Math.round(s*c),t-1),f=l[u*t+_];o[h*a+c]=f}}return o})}function cn(n,t,e){return(1-e)*n+e*t}function g0(n,t,e,a,i){const s=t/a,r=e/i;return n.map(l=>{const o=Mi(l,a,i);for(let h=0;h<i;++h){const u=r*h,c=Math.floor(u),_=Math.min(Math.ceil(u),e-1);for(let f=0;f<a;++f){const d=s*f,m=d%1,g=Math.floor(d),p=Math.min(Math.ceil(d),t-1),y=l[c*t+g],v=l[c*t+p],b=l[_*t+g],x=l[_*t+p],M=cn(cn(y,v,m),cn(b,x,m),u%1);o[h*a+f]=M}}return o})}function p0(n,t,e,a,i,s="nearest"){switch(s.toLowerCase()){case"nearest":return m0(n,t,e,a,i);case"bilinear":case"linear":return g0(n,t,e,a,i);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function y0(n,t,e,a,i,s){const r=t/a,l=e/i,o=Mi(n,a,i,s);for(let h=0;h<i;++h){const u=Math.min(Math.round(l*h),e-1);for(let c=0;c<a;++c){const _=Math.min(Math.round(r*c),t-1);for(let f=0;f<s;++f){const d=n[u*t*s+_*s+f];o[h*a*s+c*s+f]=d}}}return o}function b0(n,t,e,a,i,s){const r=t/a,l=e/i,o=Mi(n,a,i,s);for(let h=0;h<i;++h){const u=l*h,c=Math.floor(u),_=Math.min(Math.ceil(u),e-1);for(let f=0;f<a;++f){const d=r*f,m=d%1,g=Math.floor(d),p=Math.min(Math.ceil(d),t-1);for(let y=0;y<s;++y){const v=n[c*t*s+g*s+y],b=n[c*t*s+p*s+y],x=n[_*t*s+g*s+y],M=n[_*t*s+p*s+y],R=cn(cn(v,b,m),cn(x,M,m),u%1);o[h*a*s+f*s+y]=R}}}return o}function v0(n,t,e,a,i,s,r="nearest"){switch(r.toLowerCase()){case"nearest":return y0(n,t,e,a,i,s);case"bilinear":case"linear":return b0(n,t,e,a,i,s);default:throw new Error(`Unsupported resampling method: '${r}'`)}}function x0(n,t,e){let a=0;for(let i=t;i<e;++i)a+=n[i];return a}function is(n,t,e){switch(n){case 1:if(t<=8)return new Uint8Array(e);if(t<=16)return new Uint16Array(e);if(t<=32)return new Uint32Array(e);break;case 2:if(t===8)return new Int8Array(e);if(t===16)return new Int16Array(e);if(t===32)return new Int32Array(e);break;case 3:switch(t){case 16:case 32:return new Float32Array(e);case 64:return new Float64Array(e)}break}throw Error("Unsupported data format/bitsPerSample")}function M0(n,t){return(n===1||n===2)&&t<=32&&t%8===0?!1:!(n===3&&(t===16||t===32||t===64))}function w0(n,t,e,a,i,s,r){const l=new DataView(n),o=e===2?r*s:r*s*a,h=e===2?1:a,u=is(t,i,o),c=parseInt("1".repeat(i),2);if(t===1){let _;e===1?_=a*i:_=i;let f=s*_;f&7&&(f=f+7&-8);for(let d=0;d<r;++d){const m=d*f;for(let g=0;g<s;++g){const p=m+g*h*i;for(let y=0;y<h;++y){const v=p+y*i,b=(d*s+g)*h+y,x=Math.floor(v/8),M=v%8;if(M+i<=8)u[b]=l.getUint8(x)>>8-i-M&c;else if(M+i<=16)u[b]=l.getUint16(x)>>16-i-M&c;else if(M+i<=24){const R=l.getUint16(x)<<8|l.getUint8(x+2);u[b]=R>>24-i-M&c}else u[b]=l.getUint32(x)>>32-i-M&c}}}}return u.buffer}class E0{constructor(t,e,a,i,s,r){this.fileDirectory=t,this.geoKeys=e,this.dataView=a,this.littleEndian=i,this.tiles=s?{}:null,this.isTiled=!t.StripOffsets;const l=t.PlanarConfiguration;if(this.planarConfiguration=typeof l>"u"?1:l,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=r}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0;for(let e=0;e<this.fileDirectory.BitsPerSample.length;++e)t+=this.getSampleByteSize(e);return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const e=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,a=this.fileDirectory.BitsPerSample[t];switch(e){case 1:if(a<=8)return DataView.prototype.getUint8;if(a<=16)return DataView.prototype.getUint16;if(a<=32)return DataView.prototype.getUint32;break;case 2:if(a<=8)return DataView.prototype.getInt8;if(a<=16)return DataView.prototype.getInt16;if(a<=32)return DataView.prototype.getInt32;break;case 3:switch(a){case 16:return function(i,s){return po(this,i,s)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,e){const a=this.getSampleFormat(t),i=this.getBitsPerSample(t);return is(a,i,e)}async getTileOrStrip(t,e,a,i,s){const r=Math.ceil(this.getWidth()/this.getTileWidth()),l=Math.ceil(this.getHeight()/this.getTileHeight());let o;const{tiles:h}=this;this.planarConfiguration===1?o=e*r+t:this.planarConfiguration===2&&(o=a*r*l+e*r+t);let u,c;this.isTiled?(u=this.fileDirectory.TileOffsets[o],c=this.fileDirectory.TileByteCounts[o]):(u=this.fileDirectory.StripOffsets[o],c=this.fileDirectory.StripByteCounts[o]);const _=(await this.source.fetch([{offset:u,length:c}],s))[0];let f;return h===null||!h[o]?(f=(async()=>{let d=await i.decode(this.fileDirectory,_);const m=this.getSampleFormat(),g=this.getBitsPerSample();return M0(m,g)&&(d=w0(d,m,this.planarConfiguration,this.getSamplesPerPixel(),g,this.getTileWidth(),this.getBlockHeight(e))),d})(),h!==null&&(h[o]=f)):f=h[o],{x:t,y:e,sample:a,data:await f}}async _readRaster(t,e,a,i,s,r,l,o,h){const u=this.getTileWidth(),c=this.getTileHeight(),_=this.getWidth(),f=this.getHeight(),d=Math.max(Math.floor(t[0]/u),0),m=Math.min(Math.ceil(t[2]/u),Math.ceil(_/u)),g=Math.max(Math.floor(t[1]/c),0),p=Math.min(Math.ceil(t[3]/c),Math.ceil(f/c)),y=t[2]-t[0];let v=this.getBytesPerPixel();const b=[],x=[];for(let w=0;w<e.length;++w)this.planarConfiguration===1?b.push(x0(this.fileDirectory.BitsPerSample,0,e[w])/8):b.push(0),x.push(this.getReaderForSample(e[w]));const M=[],{littleEndian:R}=this;for(let w=g;w<p;++w)for(let I=d;I<m;++I){let L;this.planarConfiguration===1&&(L=this.getTileOrStrip(I,w,0,s,h));for(let O=0;O<e.length;++O){const T=O,G=e[O];this.planarConfiguration===2&&(v=this.getSampleByteSize(G),L=this.getTileOrStrip(I,w,G,s,h));const N=L.then(Y=>{const B=Y.data,H=new DataView(B),q=this.getBlockHeight(Y.y),Q=Y.y*c,J=Y.x*u,et=Q+q,A=(Y.x+1)*u,ke=x[T],Le=Math.min(q,q-(et-t[3]),f-Q),Ct=Math.min(u,u-(A-t[2]),_-J);for(let jt=Math.max(0,t[1]-Q);jt<Le;++jt)for(let Te=Math.max(0,t[0]-J);Te<Ct;++Te){const Ia=(jt*u+Te)*v,Sn=ke.call(H,Ia+b[T],R);let Oe;i?(Oe=(jt+Q-t[1])*y*e.length+(Te+J-t[0])*e.length+T,a[Oe]=Sn):(Oe=(jt+Q-t[1])*y+Te+J-t[0],a[T][Oe]=Sn)}});M.push(N)}}if(await Promise.all(M),r&&t[2]-t[0]!==r||l&&t[3]-t[1]!==l){let w;return i?w=v0(a,t[2]-t[0],t[3]-t[1],r,l,e.length,o):w=p0(a,t[2]-t[0],t[3]-t[1],r,l,o),w.width=r,w.height=l,w}return a.width=r||t[2]-t[0],a.height=l||t[3]-t[1],a}async readRasters({window:t,samples:e=[],interleave:a,pool:i=null,width:s,height:r,resampleMethod:l,fillValue:o,signal:h}={}){const u=t||[0,0,this.getWidth(),this.getHeight()];if(u[0]>u[2]||u[1]>u[3])throw new Error("Invalid subsets");const c=u[2]-u[0],_=u[3]-u[1],f=c*_,d=this.getSamplesPerPixel();if(!e||!e.length)for(let y=0;y<d;++y)e.push(y);else for(let y=0;y<e.length;++y)if(e[y]>=d)return Promise.reject(new RangeError(`Invalid sample index '${e[y]}'.`));let m;if(a){const y=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,v=Math.max.apply(null,this.fileDirectory.BitsPerSample);m=is(y,v,f*e.length),o&&m.fill(o)}else{m=[];for(let y=0;y<e.length;++y){const v=this.getArrayForSample(e[y],f);Array.isArray(o)&&y<o.length?v.fill(o[y]):o&&!Array.isArray(o)&&v.fill(o),m.push(v)}}const g=i||await d0(this.fileDirectory);return await this._readRaster(u,e,m,a,g,s,r,l,h)}async readRGB({window:t,interleave:e=!0,pool:a=null,width:i,height:s,resampleMethod:r,enableAlpha:l=!1,signal:o}={}){const h=t||[0,0,this.getWidth(),this.getHeight()];if(h[0]>h[2]||h[1]>h[3])throw new Error("Invalid subsets");const u=this.fileDirectory.PhotometricInterpretation;if(u===It.RGB){let p=[0,1,2];if(this.fileDirectory.ExtraSamples!==a0.Unspecified&&l){p=[];for(let y=0;y<this.fileDirectory.BitsPerSample.length;y+=1)p.push(y)}return this.readRasters({window:t,interleave:e,samples:p,pool:a,width:i,height:s,resampleMethod:r,signal:o})}let c;switch(u){case It.WhiteIsZero:case It.BlackIsZero:case It.Palette:c=[0];break;case It.CMYK:c=[0,1,2,3];break;case It.YCbCr:case It.CIELab:c=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const _={window:h,interleave:!0,samples:c,pool:a,width:i,height:s,resampleMethod:r,signal:o},{fileDirectory:f}=this,d=await this.readRasters(_),m=2**this.fileDirectory.BitsPerSample[0];let g;switch(u){case It.WhiteIsZero:g=s0(d,m);break;case It.BlackIsZero:g=r0(d,m);break;case It.Palette:g=l0(d,f.ColorMap);break;case It.CMYK:g=o0(d);break;case It.YCbCr:g=h0(d);break;case It.CIELab:g=f0(d);break;default:throw new Error("Unsupported photometric interpretation.")}if(!e){const p=new Uint8Array(g.length/3),y=new Uint8Array(g.length/3),v=new Uint8Array(g.length/3);for(let b=0,x=0;b<g.length;b+=3,++x)p[x]=g[b],y[x]=g[b+1],v[x]=g[b+2];g=[p,y,v]}return g.width=d.width,g.height=d.height,g}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const t=[];for(let e=0;e<this.fileDirectory.ModelTiepoint.length;e+=6)t.push({i:this.fileDirectory.ModelTiepoint[e],j:this.fileDirectory.ModelTiepoint[e+1],k:this.fileDirectory.ModelTiepoint[e+2],x:this.fileDirectory.ModelTiepoint[e+3],y:this.fileDirectory.ModelTiepoint[e+4],z:this.fileDirectory.ModelTiepoint[e+5]});return t}getGDALMetadata(t=null){const e={};if(!this.fileDirectory.GDAL_METADATA)return null;const a=this.fileDirectory.GDAL_METADATA;let i=e0(a,"Item");t===null?i=i.filter(s=>Hi(s,"sample")===void 0):i=i.filter(s=>Number(Hi(s,"sample"))===t);for(let s=0;s<i.length;++s){const r=i[s];e[Hi(r,"name")]=r.inner}return e}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,e=this.fileDirectory.ModelTransformation;if(t&&t.length===6)return[t[3],t[4],t[5]];if(e)return[e[3],e[7],e[11]];throw new Error("The image does not have an affine transformation.")}getResolution(t=null){const e=this.fileDirectory.ModelPixelScale,a=this.fileDirectory.ModelTransformation;if(e)return[e[0],-e[1],e[2]];if(a)return a[1]===0&&a[4]===0?[a[0],-a[5],a[10]]:[Math.sqrt(a[0]*a[0]+a[4]*a[4]),-Math.sqrt(a[1]*a[1]+a[5]*a[5]),a[10]];if(t){const[i,s,r]=t.getResolution();return[i*t.getWidth()/this.getWidth(),s*t.getHeight()/this.getHeight(),r*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(t=!1){const e=this.getHeight(),a=this.getWidth();if(this.fileDirectory.ModelTransformation&&!t){const[i,s,r,l,o,h,u,c]=this.fileDirectory.ModelTransformation,f=[[0,0],[0,e],[a,0],[a,e]].map(([g,p])=>[l+i*g+s*p,c+o*g+h*p]),d=f.map(g=>g[0]),m=f.map(g=>g[1]);return[Math.min(...d),Math.min(...m),Math.max(...d),Math.max(...m)]}else{const i=this.getOrigin(),s=this.getResolution(),r=i[0],l=i[1],o=r+s[0]*a,h=l+s[1]*e;return[Math.min(r,o),Math.min(l,h),Math.max(r,o),Math.max(l,h)]}}}class S0{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,e){const a=this.getUint32(t,e),i=this.getUint32(t+4,e);let s;if(e){if(s=a+2**32*i,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}if(s=2**32*a+i,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}getInt64(t,e){let a=0;const i=(this._dataView.getUint8(t+(e?7:0))&128)>0;let s=!0;for(let r=0;r<8;r++){let l=this._dataView.getUint8(t+(e?r:7-r));i&&(s?l!==0&&(l=~(l-1)&255,s=!1):l=~l&255),a+=l*256**r}return i&&(a=-a),a}getUint8(t,e){return this._dataView.getUint8(t,e)}getInt8(t,e){return this._dataView.getInt8(t,e)}getUint16(t,e){return this._dataView.getUint16(t,e)}getInt16(t,e){return this._dataView.getInt16(t,e)}getUint32(t,e){return this._dataView.getUint32(t,e)}getInt32(t,e){return this._dataView.getInt32(t,e)}getFloat16(t,e){return po(this._dataView,t,e)}getFloat32(t,e){return this._dataView.getFloat32(t,e)}getFloat64(t,e){return this._dataView.getFloat64(t,e)}}class R0{constructor(t,e,a,i){this._dataView=new DataView(t),this._sliceOffset=e,this._littleEndian=a,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,e){return this.sliceOffset<=t&&this.sliceTop>=t+e}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const e=this.readUint32(t),a=this.readUint32(t+4);let i;if(this._littleEndian){if(i=e+2**32*a,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*e+a,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}readInt64(t){let e=0;const a=(this._dataView.getUint8(t+(this._littleEndian?7:0))&128)>0;let i=!0;for(let s=0;s<8;s++){let r=this._dataView.getUint8(t+(this._littleEndian?s:7-s));a&&(i?r!==0&&(r=~(r-1)&255,i=!1):r=~r&255),e+=r*256**s}return a&&(e=-e),e}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}const Yr=`\r
\r
`;function vo(n){if(typeof Object.fromEntries<"u")return Object.fromEntries(n);const t={};for(const[e,a]of n)t[e.toLowerCase()]=a;return t}function I0(n){const t=n.split(`\r
`).map(e=>{const a=e.split(":").map(i=>i.trim());return a[0]=a[0].toLowerCase(),a});return vo(t)}function A0(n){const[t,...e]=n.split(";").map(i=>i.trim()),a=e.map(i=>i.split("="));return{type:t,params:vo(a)}}function ss(n){let t,e,a;return n&&([,t,e,a]=n.match(/bytes (\d+)-(\d+)\/(\d+)/),t=parseInt(t,10),e=parseInt(e,10),a=parseInt(a,10)),{start:t,end:e,total:a}}function C0(n,t){let e=null;const a=new TextDecoder("ascii"),i=[],s=`--${t}`,r=`${s}--`;for(let l=0;l<10;++l)a.decode(new Uint8Array(n,l,s.length))===s&&(e=l);if(e===null)throw new Error("Could not find initial boundary");for(;e<n.byteLength;){const l=a.decode(new Uint8Array(n,e,Math.min(s.length+1024,n.byteLength-e)));if(l.length===0||l.startsWith(r))break;if(!l.startsWith(s))throw new Error("Part does not start with boundary");const o=l.substr(s.length+2);if(o.length===0)break;const h=o.indexOf(Yr),u=I0(o.substr(0,h)),{start:c,end:_,total:f}=ss(u["content-range"]),d=e+s.length+h+Yr.length,m=parseInt(_,10)+1-parseInt(c,10);i.push({headers:u,data:n.slice(d,d+m),offset:c,length:m,fileSize:f}),e=d+m+4}return i}class xo{async fetch(t,e=void 0){return Promise.all(t.map(a=>this.fetchSlice(a,e)))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}class k0 extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof t.maxAge=="number"&&t.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if(typeof this.onEviction=="function")for(const[e,a]of t)this.onEviction(e,a.value)}_deleteIfExpired(t,e){return typeof e.expiry=="number"&&e.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(t,e.value),this.delete(t)):!1}_getOrDeleteIfExpired(t,e){if(this._deleteIfExpired(t,e)===!1)return e.value}_getItemValue(t,e){return e.expiry?this._getOrDeleteIfExpired(t,e):e.value}_peek(t,e){const a=e.get(t);return this._getItemValue(t,a)}_set(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,e){this.oldCache.delete(t),this._set(t,e)}*_entriesAscending(){for(const t of this.oldCache){const[e,a]=t;this.cache.has(e)||this._deleteIfExpired(e,a)===!1&&(yield t)}for(const t of this.cache){const[e,a]=t;this._deleteIfExpired(e,a)===!1&&(yield t)}}get(t){if(this.cache.has(t)){const e=this.cache.get(t);return this._getItemValue(t,e)}if(this.oldCache.has(t)){const e=this.oldCache.get(t);if(this._deleteIfExpired(t,e)===!1)return this._moveToRecent(t,e),e.value}}set(t,e,{maxAge:a=this.maxAge}={}){const i=typeof a=="number"&&a!==Number.POSITIVE_INFINITY?Date.now()+a:void 0;return this.cache.has(t)?this.cache.set(t,{value:e,expiry:i}):this._set(t,{value:e,expiry:i}),this}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):this.oldCache.has(t)?!this._deleteIfExpired(t,this.oldCache.get(t)):!1}peek(t){if(this.cache.has(t))return this._peek(t,this.cache);if(this.oldCache.has(t))return this._peek(t,this.oldCache)}delete(t){const e=this.cache.delete(t);return e&&this._size--,this.oldCache.delete(t)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");const e=[...this._entriesAscending()],a=e.length-t;a<0?(this.cache=new Map(e),this.oldCache=new Map,this._size=e.length):(a>0&&this._emitEvictions(e.slice(0,a)),this.oldCache=new Map(e.slice(a)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache){const[e,a]=t;this._deleteIfExpired(e,a)===!1&&(yield[e,a.value])}for(const t of this.oldCache){const[e,a]=t;this.cache.has(e)||this._deleteIfExpired(e,a)===!1&&(yield[e,a.value])}}*entriesDescending(){let t=[...this.cache];for(let e=t.length-1;e>=0;--e){const a=t[e],[i,s]=a;this._deleteIfExpired(i,s)===!1&&(yield[i,s.value])}t=[...this.oldCache];for(let e=t.length-1;e>=0;--e){const a=t[e],[i,s]=a;this.cache.has(i)||this._deleteIfExpired(i,s)===!1&&(yield[i,s.value])}}*entriesAscending(){for(const[t,e]of this._entriesAscending())yield[t,e.value]}get size(){if(!this._size)return this.oldCache.size;let t=0;for(const e of this.oldCache.keys())this.cache.has(e)||t++;return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,e=this){for(const[a,i]of this.entriesAscending())t.call(e,i,a,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function L0(n){return new Promise(t=>setTimeout(t,n))}function T0(n,t){const e=Array.isArray(n)?n:Array.from(n),a=Array.isArray(t)?t:Array.from(t);return e.map((i,s)=>[i,a[s]])}class yn extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,yn),this.name="AbortError"}}class O0 extends Error{constructor(t,e){super(e),this.errors=t,this.message=e,this.name="AggregateError"}}const D0=O0;class N0{constructor(t,e,a=null){this.offset=t,this.length=e,this.data=a}get top(){return this.offset+this.length}}class Zr{constructor(t,e,a){this.offset=t,this.length=e,this.blockIds=a}}class P0 extends xo{constructor(t,{blockSize:e=65536,cacheSize:a=100}={}){super(),this.source=t,this.blockSize=e,this.blockCache=new k0({maxSize:a,onEviction:(i,s)=>{this.evictedBlocks.set(i,s)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,e){const a=[],i=[],s=[];this.evictedBlocks.clear();for(const{offset:_,length:f}of t){let d=_+f;const{fileSize:m}=this;m!==null&&(d=Math.min(d,m));const g=Math.floor(_/this.blockSize)*this.blockSize;for(let p=g;p<d;p+=this.blockSize){const y=Math.floor(p/this.blockSize);!this.blockCache.has(y)&&!this.blockRequests.has(y)&&(this.blockIdsToFetch.add(y),i.push(y)),this.blockRequests.has(y)&&a.push(this.blockRequests.get(y)),s.push(y)}}await L0(),this.fetchBlocks(e);const r=[];for(const _ of i)this.blockRequests.has(_)&&r.push(this.blockRequests.get(_));await Promise.allSettled(a),await Promise.allSettled(r);const l=[],o=s.filter(_=>this.abortedBlockIds.has(_)||!this.blockCache.has(_));if(o.forEach(_=>this.blockIdsToFetch.add(_)),o.length>0&&e&&!e.aborted){this.fetchBlocks(null);for(const _ of o){const f=this.blockRequests.get(_);if(!f)throw new Error(`Block ${_} is not in the block requests`);l.push(f)}await Promise.allSettled(l)}if(e&&e.aborted)throw new yn("Request was aborted");const h=s.map(_=>this.blockCache.get(_)||this.evictedBlocks.get(_)),u=h.filter(_=>!_);if(u.length)throw new D0(u,"Request failed");const c=new Map(T0(s,h));return this.readSliceData(t,c)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const e=this.groupBlocks(this.blockIdsToFetch),a=this.source.fetch(e,t);for(let i=0;i<e.length;++i){const s=e[i];for(const r of s.blockIds)this.blockRequests.set(r,(async()=>{try{const l=(await a)[i],o=r*this.blockSize,h=o-l.offset,u=Math.min(h+this.blockSize,l.data.byteLength),c=l.data.slice(h,u),_=new N0(o,c.byteLength,c,r);this.blockCache.set(r,_),this.abortedBlockIds.delete(r)}catch(l){if(l.name==="AbortError")l.signal=t,this.blockCache.delete(r),this.abortedBlockIds.add(r);else throw l}finally{this.blockRequests.delete(r)}})())}this.blockIdsToFetch.clear()}}groupBlocks(t){const e=Array.from(t).sort((r,l)=>r-l);if(e.length===0)return[];let a=[],i=null;const s=[];for(const r of e)i===null||i+1===r?(a.push(r),i=r):(s.push(new Zr(a[0]*this.blockSize,a.length*this.blockSize,a)),a=[r],i=r);return s.push(new Zr(a[0]*this.blockSize,a.length*this.blockSize,a)),s}readSliceData(t,e){return t.map(a=>{let i=a.offset+a.length;this.fileSize!==null&&(i=Math.min(this.fileSize,i));const s=Math.floor(a.offset/this.blockSize),r=Math.floor(i/this.blockSize),l=new ArrayBuffer(a.length),o=new Uint8Array(l);for(let h=s;h<=r;++h){const u=e.get(h),c=u.offset-a.offset,_=u.top-i;let f=0,d=0,m;c<0?f=-c:c>0&&(d=c),_<0?m=u.length-f:m=i-u.offset-f;const g=new Uint8Array(u.data,f,m);o.set(g,d)}return l})}}class Ds{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class Ns{constructor(t){this.url=t}async request({headers:t,signal:e}={}){throw new Error("request is not implemented")}}class F0 extends Ds{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class B0 extends Ns{constructor(t,e){super(t),this.credentials=e}async request({headers:t,signal:e}={}){const a=await fetch(this.url,{headers:t,credentials:this.credentials,signal:e});return new F0(a)}}class G0 extends Ds{constructor(t,e){super(),this.xhr=t,this.data=e}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class U0 extends Ns{constructRequest(t,e){return new Promise((a,i)=>{const s=new XMLHttpRequest;s.open("GET",this.url),s.responseType="arraybuffer";for(const[r,l]of Object.entries(t))s.setRequestHeader(r,l);s.onload=()=>{const r=s.response;a(new G0(s,r))},s.onerror=i,s.onabort=()=>i(new yn("Request aborted")),s.send(),e&&(e.aborted&&s.abort(),e.addEventListener("abort",()=>s.abort()))})}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}const qi={};class z0 extends Ds{constructor(t,e){super(),this.response=t,this.dataPromise=e}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){return await this.dataPromise}}class V0 extends Ns{constructor(t){super(t),this.parsedUrl=qi.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",qi)}constructRequest(t,e){return new Promise((a,i)=>{const s=this.httpApi.get({...this.parsedUrl,headers:t},r=>{const l=new Promise(o=>{const h=[];r.on("data",u=>{h.push(u)}),r.on("end",()=>{const u=Buffer.concat(h).buffer;o(u)}),r.on("error",i)});a(new z0(r,l))});s.on("error",i),e&&(e.aborted&&s.destroy(new yn("Request aborted")),e.addEventListener("abort",()=>s.destroy(new yn("Request aborted"))))})}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}class Ps extends xo{constructor(t,e,a,i){super(),this.client=t,this.headers=e,this.maxRanges=a,this.allowFullFile=i,this._fileSize=null}async fetch(t,e){return this.maxRanges>=t.length?this.fetchSlices(t,e):Promise.all(t.map(a=>this.fetchSlice(a,e)))}async fetchSlices(t,e){const a=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map(({offset:i,length:s})=>`${i}-${i+s}`).join(",")}`},signal:e});if(a.ok)if(a.status===206){const{type:i,params:s}=A0(a.getHeader("content-type"));if(i==="multipart/byteranges"){const c=C0(await a.getData(),s.boundary);return this._fileSize=c[0].fileSize||null,c}const r=await a.getData(),{start:l,end:o,total:h}=ss(a.getHeader("content-range"));this._fileSize=h||null;const u=[{data:r,offset:l,length:o-l}];if(t.length>1){const c=await Promise.all(t.slice(1).map(_=>this.fetchSlice(_,e)));return u.concat(c)}return u}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const i=await a.getData();return this._fileSize=i.byteLength,[{data:i,offset:0,length:i.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(t,e){const{offset:a,length:i}=t,s=await this.client.request({headers:{...this.headers,Range:`bytes=${a}-${a+i}`},signal:e});if(s.ok)if(s.status===206){const r=await s.getData(),{total:l}=ss(s.getHeader("content-range"));return this._fileSize=l||null,{data:r,offset:a,length:i}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const r=await s.getData();return this._fileSize=r.byteLength,{data:r,offset:0,length:r.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function Fs(n,{blockSize:t,cacheSize:e}){return t===null?n:new P0(n,{blockSize:t,cacheSize:e})}function j0(n,{headers:t={},credentials:e,maxRanges:a=0,allowFullFile:i=!1,...s}={}){const r=new B0(n,e),l=new Ps(r,t,a,i);return Fs(l,s)}function H0(n,{headers:t={},maxRanges:e=0,allowFullFile:a=!1,...i}={}){const s=new U0(n),r=new Ps(s,t,e,a);return Fs(r,i)}function K0(n,{headers:t={},maxRanges:e=0,allowFullFile:a=!1,...i}={}){const s=new V0(n),r=new Ps(s,t,e,a);return Fs(r,i)}function q0(n,{forceXHR:t=!1,...e}={}){return typeof fetch=="function"&&!t?j0(n,e):typeof XMLHttpRequest<"u"?H0(n,e):K0(n,e)}function rs(n){switch(n){case V.BYTE:case V.ASCII:case V.SBYTE:case V.UNDEFINED:return 1;case V.SHORT:case V.SSHORT:return 2;case V.LONG:case V.SLONG:case V.FLOAT:case V.IFD:return 4;case V.RATIONAL:case V.SRATIONAL:case V.DOUBLE:case V.LONG8:case V.SLONG8:case V.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${n}`)}}function W0(n){const t=n.GeoKeyDirectory;if(!t)return null;const e={};for(let a=4;a<=t[3]*4;a+=4){const i=i0[t[a]],s=t[a+1]?Yn[t[a+1]]:null,r=t[a+2],l=t[a+3];let o=null;if(!s)o=l;else{if(o=n[s],typeof o>"u"||o===null)throw new Error(`Could not get value of geoKey '${i}'.`);typeof o=="string"?o=o.substring(l,l+r-1):o.subarray&&(o=o.subarray(l,l+r),r===1&&(o=o[0]))}e[i]=o}return e}function Ze(n,t,e,a){let i=null,s=null;const r=rs(t);switch(t){case V.BYTE:case V.ASCII:case V.UNDEFINED:i=new Uint8Array(e),s=n.readUint8;break;case V.SBYTE:i=new Int8Array(e),s=n.readInt8;break;case V.SHORT:i=new Uint16Array(e),s=n.readUint16;break;case V.SSHORT:i=new Int16Array(e),s=n.readInt16;break;case V.LONG:case V.IFD:i=new Uint32Array(e),s=n.readUint32;break;case V.SLONG:i=new Int32Array(e),s=n.readInt32;break;case V.LONG8:case V.IFD8:i=new Array(e),s=n.readUint64;break;case V.SLONG8:i=new Array(e),s=n.readInt64;break;case V.RATIONAL:i=new Uint32Array(e*2),s=n.readUint32;break;case V.SRATIONAL:i=new Int32Array(e*2),s=n.readInt32;break;case V.FLOAT:i=new Float32Array(e),s=n.readFloat32;break;case V.DOUBLE:i=new Float64Array(e),s=n.readFloat64;break;default:throw new RangeError(`Invalid field type: ${t}`)}if(t===V.RATIONAL||t===V.SRATIONAL)for(let l=0;l<e;l+=2)i[l]=s.call(n,a+l*r),i[l+1]=s.call(n,a+(l*r+4));else for(let l=0;l<e;++l)i[l]=s.call(n,a+l*r);return t===V.ASCII?new TextDecoder("utf-8").decode(i):i}class X0{constructor(t,e,a){this.fileDirectory=t,this.geoKeyDirectory=e,this.nextIFDByteOffset=a}}class Ha extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class $0{async readRasters(t={}){const{window:e,width:a,height:i}=t;let{resX:s,resY:r,bbox:l}=t;const o=await this.getImage();let h=o;const u=await this.getImageCount(),c=o.getBoundingBox();if(e&&l)throw new Error('Both "bbox" and "window" passed.');if(a||i){if(e){const[d,m]=o.getOrigin(),[g,p]=o.getResolution();l=[d+e[0]*g,m+e[1]*p,d+e[2]*g,m+e[3]*p]}const f=l||c;if(a){if(s)throw new Error("Both width and resX passed");s=(f[2]-f[0])/a}if(i){if(r)throw new Error("Both width and resY passed");r=(f[3]-f[1])/i}}if(s||r){const f=[];for(let d=0;d<u;++d){const m=await this.getImage(d),{SubfileType:g,NewSubfileType:p}=m.fileDirectory;(d===0||g===2||p&1)&&f.push(m)}f.sort((d,m)=>d.getWidth()-m.getWidth());for(let d=0;d<f.length;++d){const m=f[d],g=(c[2]-c[0])/m.getWidth(),p=(c[3]-c[1])/m.getHeight();if(h=m,s&&s>g||r&&r>p)break}}let _=e;if(l){const[f,d]=o.getOrigin(),[m,g]=h.getResolution(o);_=[Math.round((l[0]-f)/m),Math.round((l[1]-d)/g),Math.round((l[2]-f)/m),Math.round((l[3]-d)/g)],_=[Math.min(_[0],_[2]),Math.min(_[1],_[3]),Math.max(_[0],_[2]),Math.max(_[1],_[3])]}return h.readRasters({...t,window:_})}}class Bs extends $0{constructor(t,e,a,i,s={}){super(),this.source=t,this.littleEndian=e,this.bigTiff=a,this.firstIFDOffset=i,this.cache=s.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,e){const a=this.bigTiff?4048:1024;return new R0((await this.source.fetch([{offset:t,length:typeof e<"u"?e:a}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const e=this.bigTiff?20:12,a=this.bigTiff?8:2;let i=await this.getSlice(t);const s=this.bigTiff?i.readUint64(t):i.readUint16(t),r=s*e+(this.bigTiff?16:6);i.covers(t,r)||(i=await this.getSlice(t,r));const l={};let o=t+(this.bigTiff?8:2);for(let c=0;c<s;o+=e,++c){const _=i.readUint16(o),f=i.readUint16(o+2),d=this.bigTiff?i.readUint64(o+4):i.readUint32(o+4);let m,g;const p=rs(f),y=o+(this.bigTiff?12:8);if(p*d<=(this.bigTiff?8:4))m=Ze(i,f,d,y);else{const v=i.readOffset(y),b=rs(f)*d;if(i.covers(v,b))m=Ze(i,f,d,v);else{const x=await this.getSlice(v,b);m=Ze(x,f,d,v)}}d===1&&n0.indexOf(_)===-1&&!(f===V.RATIONAL||f===V.SRATIONAL)?g=m[0]:g=m,l[Yn[_]]=g}const h=W0(l),u=i.readOffset(t+a+e*s);return new X0(l,h,u)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t];if(t===0)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t];if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(e){throw e instanceof Ha?new Ha(t):e}return this.ifdRequests[t]=(async()=>{const e=await this.ifdRequests[t-1];if(e.nextIFDByteOffset===0)throw new Ha(t);return this.parseFileDirectoryAt(e.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){const e=await this.requestIFD(t);return new E0(e.fileDirectory,e.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,e=!0;for(;e;)try{await this.requestIFD(t),++t}catch(a){if(a instanceof Ha)e=!1;else throw a}return t}async getGhostValues(){const t=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const e="GDAL_STRUCTURAL_METADATA_SIZE=",a=e.length+100;let i=await this.getSlice(t,a);if(e===Ze(i,V.ASCII,e.length,t)){const r=Ze(i,V.ASCII,a,t).split(`
`)[0],l=Number(r.split("=")[1].split(" ")[0])+r.length;l>a&&(i=await this.getSlice(t,l));const o=Ze(i,V.ASCII,l,t);this.ghostValues={},o.split(`
`).filter(h=>h.length>0).map(h=>h.split("=")).forEach(([h,u])=>{this.ghostValues[h]=u})}return this.ghostValues}static async fromSource(t,e,a){const i=(await t.fetch([{offset:0,length:1024}],a))[0],s=new S0(i),r=s.getUint16(0,0);let l;if(r===18761)l=!0;else if(r===19789)l=!1;else throw new TypeError("Invalid byte order value.");const o=s.getUint16(2,l);let h;if(o===42)h=!1;else if(o===43){if(h=!0,s.getUint16(4,l)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const u=h?s.getUint64(8,l):s.getUint32(4,l);return new Bs(t,l,h,u,e)}close(){return typeof this.source.close=="function"?this.source.close():!1}}async function Y0(n,t={},e){return Bs.fromSource(q0(n,t),e)}function Z0(n){n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var t=1;t<=60;++t)n("EPSG:"+(32600+t),"+proj=utm +zone="+t+" +datum=WGS84 +units=m"),n("EPSG:"+(32700+t),"+proj=utm +zone="+t+" +south +datum=WGS84 +units=m");n.WGS84=n["EPSG:4326"],n["EPSG:3785"]=n["EPSG:3857"],n.GOOGLE=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}var Ve=1,je=2,_n=3,J0=4,ls=5,Jr=6378137,Q0=6356752314e-3,Qr=.0066943799901413165,Zn=484813681109536e-20,S=Math.PI/2,tf=.16666666666666666,ef=.04722222222222222,nf=.022156084656084655,C=1e-10,it=.017453292519943295,te=57.29577951308232,X=Math.PI/4,_a=Math.PI*2,st=3.14159265359,Rt={};Rt.greenwich=0;Rt.lisbon=-9.131906111111;Rt.paris=2.337229166667;Rt.bogota=-74.080916666667;Rt.madrid=-3.687938888889;Rt.rome=12.452333333333;Rt.bern=7.439583333333;Rt.jakarta=106.807719444444;Rt.ferro=-17.666666666667;Rt.brussels=4.367975;Rt.stockholm=18.058277777778;Rt.athens=23.7163375;Rt.oslo=10.722916666667;const af={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var tl=/[\s_\-\/\(\)]/g;function Se(n,t){if(n[t])return n[t];for(var e=Object.keys(n),a=t.toLowerCase().replace(tl,""),i=-1,s,r;++i<e.length;)if(s=e[i],r=s.toLowerCase().replace(tl,""),r===a)return n[s]}function os(n){var t={},e=n.split("+").map(function(l){return l.trim()}).filter(function(l){return l}).reduce(function(l,o){var h=o.split("=");return h.push(!0),l[h[0].toLowerCase()]=h[1],l},{}),a,i,s,r={proj:"projName",datum:"datumCode",rf:function(l){t.rf=parseFloat(l)},lat_0:function(l){t.lat0=l*it},lat_1:function(l){t.lat1=l*it},lat_2:function(l){t.lat2=l*it},lat_ts:function(l){t.lat_ts=l*it},lon_0:function(l){t.long0=l*it},lon_1:function(l){t.long1=l*it},lon_2:function(l){t.long2=l*it},alpha:function(l){t.alpha=parseFloat(l)*it},gamma:function(l){t.rectified_grid_angle=parseFloat(l)},lonc:function(l){t.longc=l*it},x_0:function(l){t.x0=parseFloat(l)},y_0:function(l){t.y0=parseFloat(l)},k_0:function(l){t.k0=parseFloat(l)},k:function(l){t.k0=parseFloat(l)},a:function(l){t.a=parseFloat(l)},b:function(l){t.b=parseFloat(l)},r:function(l){t.a=t.b=parseFloat(l)},r_a:function(){t.R_A=!0},zone:function(l){t.zone=parseInt(l,10)},south:function(){t.utmSouth=!0},towgs84:function(l){t.datum_params=l.split(",").map(function(o){return parseFloat(o)})},to_meter:function(l){t.to_meter=parseFloat(l)},units:function(l){t.units=l;var o=Se(af,l);o&&(t.to_meter=o.to_meter)},from_greenwich:function(l){t.from_greenwich=l*it},pm:function(l){var o=Se(Rt,l);t.from_greenwich=(o||parseFloat(l))*it},nadgrids:function(l){l==="@null"?t.datumCode="none":t.nadgrids=l},axis:function(l){var o="ewnsud";l.length===3&&o.indexOf(l.substr(0,1))!==-1&&o.indexOf(l.substr(1,1))!==-1&&o.indexOf(l.substr(2,1))!==-1&&(t.axis=l)},approx:function(){t.approx=!0}};for(a in e)i=e[a],a in r?(s=r[a],typeof s=="function"?s(i):t[s]=i):t[a]=i;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var fa=1,Mo=2,wo=3,li=4,Eo=5,Gs=-1,sf=/\s/,rf=/[A-Za-z]/,lf=/[A-Za-z84_]/,wi=/[,\]]/,So=/[\d\.E\-\+]/;function me(n){if(typeof n!="string")throw new Error("not a string");this.text=n.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=fa}me.prototype.readCharicter=function(){var n=this.text[this.place++];if(this.state!==li)for(;sf.test(n);){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case fa:return this.neutral(n);case Mo:return this.keyword(n);case li:return this.quoted(n);case Eo:return this.afterquote(n);case wo:return this.number(n);case Gs:return}};me.prototype.afterquote=function(n){if(n==='"'){this.word+='"',this.state=li;return}if(wi.test(n)){this.word=this.word.trim(),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in afterquote yet, index '+this.place)};me.prototype.afterItem=function(n){if(n===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=fa;return}if(n==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=fa,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Gs);return}};me.prototype.number=function(n){if(So.test(n)){this.word+=n;return}if(wi.test(n)){this.word=parseFloat(this.word),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in number yet, index '+this.place)};me.prototype.quoted=function(n){if(n==='"'){this.state=Eo;return}this.word+=n};me.prototype.keyword=function(n){if(lf.test(n)){this.word+=n;return}if(n==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=fa;return}if(wi.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in keyword yet, index '+this.place)};me.prototype.neutral=function(n){if(rf.test(n)){this.word=n,this.state=Mo;return}if(n==='"'){this.word="",this.state=li;return}if(So.test(n)){this.word=n,this.state=wo;return}if(wi.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in neutral yet, index '+this.place)};me.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Gs)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function of(n){var t=new me(n);return t.output()}function Wi(n,t,e){Array.isArray(t)&&(e.unshift(t),t=null);var a=t?{}:n,i=e.reduce(function(s,r){return rn(r,s),s},a);t&&(n[t]=i)}function rn(n,t){if(!Array.isArray(n)){t[n]=!0;return}var e=n.shift();if(e==="PARAMETER"&&(e=n.shift()),n.length===1){if(Array.isArray(n[0])){t[e]={},rn(n[0],t[e]);return}t[e]=n[0];return}if(!n.length){t[e]=!0;return}if(e==="TOWGS84"){t[e]=n;return}if(e==="AXIS"){e in t||(t[e]=[]),t[e].push(n);return}Array.isArray(e)||(t[e]={});var a;switch(e){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[e]={name:n[0].toLowerCase(),convert:n[1]},n.length===3&&rn(n[2],t[e]);return;case"SPHEROID":case"ELLIPSOID":t[e]={name:n[0],a:n[1],rf:n[2]},n.length===4&&rn(n[3],t[e]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":n[0]=["name",n[0]],Wi(t,e,n);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":n[0]=["name",n[0]],Wi(t,e,n),t[e].type=e;return;default:for(a=-1;++a<n.length;)if(!Array.isArray(n[a]))return rn(n,t[e]);return Wi(t,e,n)}}var hf=.017453292519943295,uf=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function cf(n,t){var e=t[0],a=t[1];!(e in n)&&a in n&&(n[e]=n[a],t.length===3&&(n[e]=t[2](n[e])))}function Wt(n){return n*hf}function Ro(n){for(var t=Object.keys(n),e=0,a=t.length;e<a;++e){var i=t[e];uf.indexOf(i)!==-1&&_f(n[i]),typeof n[i]=="object"&&Ro(n[i])}}function _f(n){if(n.AUTHORITY){var t=Object.keys(n.AUTHORITY)[0];t&&t in n.AUTHORITY&&(n.title=t+":"+n.AUTHORITY[t])}if(n.type==="GEOGCS"?n.projName="longlat":n.type==="LOCAL_CS"?(n.projName="identity",n.local=!0):typeof n.PROJECTION=="object"?n.projName=Object.keys(n.PROJECTION)[0]:n.projName=n.PROJECTION,n.AXIS){for(var e="",a=0,i=n.AXIS.length;a<i;++a){var s=[n.AXIS[a][0].toLowerCase(),n.AXIS[a][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?e+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?e+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?e+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(n.axis=e)}n.UNIT&&(n.units=n.UNIT.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.UNIT.convert&&(n.type==="GEOGCS"?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n.UNIT.convert*n.DATUM.SPHEROID.a):n.to_meter=n.UNIT.convert));var r=n.GEOGCS;n.type==="GEOGCS"&&(r=n),r&&(r.DATUM?n.datumCode=r.DATUM.name.toLowerCase():n.datumCode=r.name.toLowerCase(),n.datumCode.slice(0,2)==="d_"&&(n.datumCode=n.datumCode.slice(2)),n.datumCode==="new_zealand_1949"&&(n.datumCode="nzgd49"),(n.datumCode==="wgs_1984"||n.datumCode==="world_geodetic_system_1984")&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!0),n.datumCode="wgs84"),n.datumCode==="belge_1972"&&(n.datumCode="rnb72"),r.DATUM&&r.DATUM.SPHEROID&&(n.ellps=r.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),n.ellps.toLowerCase().slice(0,13)==="international"&&(n.ellps="intl"),n.a=r.DATUM.SPHEROID.a,n.rf=parseFloat(r.DATUM.SPHEROID.rf,10)),r.DATUM&&r.DATUM.TOWGS84&&(n.datum_params=r.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n.datumCode="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode.indexOf("tm65")||~n.datumCode.indexOf("geodetic_datum_of_1965"))&&(n.datumCode="ire65"),n.datumCode==="ch1903+"&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode="isr93")),n.b&&!isFinite(n.b)&&(n.b=n.a);function l(u){var c=n.to_meter||1;return u*c}var o=function(u){return cf(n,u)},h=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Wt],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Wt],["x0","false_easting",l],["y0","false_northing",l],["long0","central_meridian",Wt],["lat0","latitude_of_origin",Wt],["lat0","standard_parallel_1",Wt],["lat1","standard_parallel_1",Wt],["lat2","standard_parallel_2",Wt],["azimuth","Azimuth"],["alpha","azimuth",Wt],["srsCode","name"]];h.forEach(o),!n.long0&&n.longc&&(n.projName==="Albers_Conic_Equal_Area"||n.projName==="Lambert_Azimuthal_Equal_Area")&&(n.long0=n.longc),!n.lat_ts&&n.lat1&&(n.projName==="Stereographic_South_Pole"||n.projName==="Polar Stereographic (variant B)")?(n.lat0=Wt(n.lat1>0?90:-90),n.lat_ts=n.lat1):!n.lat_ts&&n.lat0&&n.projName==="Polar_Stereographic"&&(n.lat_ts=n.lat0,n.lat0=Wt(n.lat0>0?90:-90))}function Io(n){var t=of(n),e=t[0],a={};return rn(t,a),Ro(a),a[e]}function mt(n){var t=this;if(arguments.length===2){var e=arguments[1];typeof e=="string"?e.charAt(0)==="+"?mt[n]=os(arguments[1]):mt[n]=Io(arguments[1]):mt[n]=e}else if(arguments.length===1){if(Array.isArray(n))return n.map(function(a){Array.isArray(a)?mt.apply(t,a):mt(a)});if(typeof n=="string"){if(n in mt)return mt[n]}else"EPSG"in n?mt["EPSG:"+n.EPSG]=n:"ESRI"in n?mt["ESRI:"+n.ESRI]=n:"IAU2000"in n?mt["IAU2000:"+n.IAU2000]=n:console.log(n);return}}Z0(mt);function ff(n){return typeof n=="string"}function df(n){return n in mt}var mf=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function gf(n){return mf.some(function(t){return n.indexOf(t)>-1})}var pf=["3857","900913","3785","102113"];function yf(n){var t=Se(n,"authority");if(t){var e=Se(t,"epsg");return e&&pf.indexOf(e)>-1}}function bf(n){var t=Se(n,"extension");if(t)return Se(t,"proj4")}function vf(n){return n[0]==="+"}function xf(n){if(ff(n)){if(df(n))return mt[n];if(gf(n)){var t=Io(n);if(yf(t))return mt["EPSG:3857"];var e=bf(t);return e?os(e):t}if(vf(n))return os(n)}else return n}function el(n,t){n=n||{};var e,a;if(!t)return n;for(a in t)e=t[a],e!==void 0&&(n[a]=e);return n}function ne(n,t,e){var a=n*t;return e/Math.sqrt(1-a*a)}function xa(n){return n<0?-1:1}function k(n){return Math.abs(n)<=st?n:n-xa(n)*_a}function zt(n,t,e){var a=n*e,i=.5*n;return a=Math.pow((1-a)/(1+a),i),Math.tan(.5*(S-t))/a}function da(n,t){for(var e=.5*n,a,i,s=S-2*Math.atan(t),r=0;r<=15;r++)if(a=n*Math.sin(s),i=S-2*Math.atan(t*Math.pow((1-a)/(1+a),e))-s,s+=i,Math.abs(i)<=1e-10)return s;return-9999}function Mf(){var n=this.b/this.a;this.es=1-n*n,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=ne(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function wf(n){var t=n.x,e=n.y;if(e*te>90&&e*te<-90&&t*te>180&&t*te<-180)return null;var a,i;if(Math.abs(Math.abs(e)-S)<=C)return null;if(this.sphere)a=this.x0+this.a*this.k0*k(t-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(X+.5*e));else{var s=Math.sin(e),r=zt(this.e,e,s);a=this.x0+this.a*this.k0*k(t-this.long0),i=this.y0-this.a*this.k0*Math.log(r)}return n.x=a,n.y=i,n}function Ef(n){var t=n.x-this.x0,e=n.y-this.y0,a,i;if(this.sphere)i=S-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var s=Math.exp(-e/(this.a*this.k0));if(i=da(this.e,s),i===-9999)return null}return a=k(this.long0+t/(this.a*this.k0)),n.x=a,n.y=i,n}var Sf=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const Rf={init:Mf,forward:wf,inverse:Ef,names:Sf};function If(){}function nl(n){return n}var Af=["longlat","identity"];const Cf={init:If,forward:nl,inverse:nl,names:Af};var kf=[Rf,Cf],Ya={},oi=[];function Ao(n,t){var e=oi.length;return n.names?(oi[e]=n,n.names.forEach(function(a){Ya[a.toLowerCase()]=e}),this):(console.log(t),!0)}function Lf(n){if(!n)return!1;var t=n.toLowerCase();if(typeof Ya[t]<"u"&&oi[Ya[t]])return oi[Ya[t]]}function Tf(){kf.forEach(Ao)}const Of={start:Tf,add:Ao,get:Lf};var F={};F.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};F.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};F.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};F.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};F.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};F.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};F.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};F.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};F.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};F.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};F.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};F.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};F.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};F.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};F.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};F.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};F.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};F.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};F.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};F.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};F.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};F.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};F.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};F.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};F.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};F.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};F.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};F.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};F.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};F.hough={a:6378270,rf:297,ellipseName:"Hough"};F.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};F.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};F.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};F.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};F.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};F.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};F.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};F.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};F.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};F.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};F.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};F.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var Df=F.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};F.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function Nf(n,t,e,a){var i=n*n,s=t*t,r=(i-s)/i,l=0;a?(n*=1-r*(tf+r*(ef+r*nf)),i=n*n,r=0):l=Math.sqrt(r);var o=(i-s)/s;return{es:r,e:l,ep2:o}}function Pf(n,t,e,a,i){if(!n){var s=Se(F,a);s||(s=Df),n=s.a,t=s.b,e=s.rf}return e&&!t&&(t=(1-1/e)*n),(e===0||Math.abs(n-t)<C)&&(i=!0,t=n),{a:n,b:t,rf:e,sphere:i}}var Za={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var Ff in Za){var al=Za[Ff];Za[al.datumName]=al}function Bf(n,t,e,a,i,s,r){var l={};return n===void 0||n==="none"?l.datum_type=ls:l.datum_type=J0,t&&(l.datum_params=t.map(parseFloat),(l.datum_params[0]!==0||l.datum_params[1]!==0||l.datum_params[2]!==0)&&(l.datum_type=Ve),l.datum_params.length>3&&(l.datum_params[3]!==0||l.datum_params[4]!==0||l.datum_params[5]!==0||l.datum_params[6]!==0)&&(l.datum_type=je,l.datum_params[3]*=Zn,l.datum_params[4]*=Zn,l.datum_params[5]*=Zn,l.datum_params[6]=l.datum_params[6]/1e6+1)),r&&(l.datum_type=_n,l.grids=r),l.a=e,l.b=a,l.es=i,l.ep2=s,l}var Co={};function Gf(n,t){var e=new DataView(t),a=Vf(e),i=jf(e,a),s=Hf(e,i,a),r={header:i,subgrids:s};return Co[n]=r,r}function Uf(n){if(n===void 0)return null;var t=n.split(",");return t.map(zf)}function zf(n){if(n.length===0)return null;var t=n[0]==="@";return t&&(n=n.slice(1)),n==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:n,mandatory:!t,grid:Co[n]||null,isNull:!1}}function ln(n){return n/3600*Math.PI/180}function Vf(n){var t=n.getInt32(8,!1);return t===11?!1:(t=n.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function jf(n,t){return{nFields:n.getInt32(8,t),nSubgridFields:n.getInt32(24,t),nSubgrids:n.getInt32(40,t),shiftType:hs(n,56,64).trim(),fromSemiMajorAxis:n.getFloat64(120,t),fromSemiMinorAxis:n.getFloat64(136,t),toSemiMajorAxis:n.getFloat64(152,t),toSemiMinorAxis:n.getFloat64(168,t)}}function hs(n,t,e){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(t,e)))}function Hf(n,t,e){for(var a=176,i=[],s=0;s<t.nSubgrids;s++){var r=qf(n,a,e),l=Wf(n,a,r,e),o=Math.round(1+(r.upperLongitude-r.lowerLongitude)/r.longitudeInterval),h=Math.round(1+(r.upperLatitude-r.lowerLatitude)/r.latitudeInterval);i.push({ll:[ln(r.lowerLongitude),ln(r.lowerLatitude)],del:[ln(r.longitudeInterval),ln(r.latitudeInterval)],lim:[o,h],count:r.gridNodeCount,cvs:Kf(l)}),a+=176+r.gridNodeCount*16}return i}function Kf(n){return n.map(function(t){return[ln(t.longitudeShift),ln(t.latitudeShift)]})}function qf(n,t,e){return{name:hs(n,t+8,t+16).trim(),parent:hs(n,t+24,t+24+8).trim(),lowerLatitude:n.getFloat64(t+72,e),upperLatitude:n.getFloat64(t+88,e),lowerLongitude:n.getFloat64(t+104,e),upperLongitude:n.getFloat64(t+120,e),latitudeInterval:n.getFloat64(t+136,e),longitudeInterval:n.getFloat64(t+152,e),gridNodeCount:n.getInt32(t+168,e)}}function Wf(n,t,e,a){for(var i=t+176,s=16,r=[],l=0;l<e.gridNodeCount;l++){var o={latitudeShift:n.getFloat32(i+l*s,a),longitudeShift:n.getFloat32(i+l*s+4,a),latitudeAccuracy:n.getFloat32(i+l*s+8,a),longitudeAccuracy:n.getFloat32(i+l*s+12,a)};r.push(o)}return r}function ee(n,t){if(!(this instanceof ee))return new ee(n);t=t||function(h){if(h)throw h};var e=xf(n);if(typeof e!="object"){t("Could not parse to valid json: "+n);return}var a=ee.projections.get(e.projName);if(!a){t("Could not get projection name from: "+n);return}if(e.datumCode&&e.datumCode!=="none"){var i=Se(Za,e.datumCode);i&&(e.datum_params=e.datum_params||(i.towgs84?i.towgs84.split(","):null),e.ellps=i.ellipse,e.datumName=i.datumName?i.datumName:e.datumCode)}e.k0=e.k0||1,e.axis=e.axis||"enu",e.ellps=e.ellps||"wgs84",e.lat1=e.lat1||e.lat0;var s=Pf(e.a,e.b,e.rf,e.ellps,e.sphere),r=Nf(s.a,s.b,s.rf,e.R_A),l=Uf(e.nadgrids),o=e.datum||Bf(e.datumCode,e.datum_params,s.a,s.b,r.es,r.ep2,l);el(this,e),el(this,a),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=r.es,this.e=r.e,this.ep2=r.ep2,this.datum=o,this.init(),t(null,this)}ee.projections=Of;ee.projections.start();function Xf(n,t){return n.datum_type!==t.datum_type||n.a!==t.a||Math.abs(n.es-t.es)>5e-11?!1:n.datum_type===Ve?n.datum_params[0]===t.datum_params[0]&&n.datum_params[1]===t.datum_params[1]&&n.datum_params[2]===t.datum_params[2]:n.datum_type===je?n.datum_params[0]===t.datum_params[0]&&n.datum_params[1]===t.datum_params[1]&&n.datum_params[2]===t.datum_params[2]&&n.datum_params[3]===t.datum_params[3]&&n.datum_params[4]===t.datum_params[4]&&n.datum_params[5]===t.datum_params[5]&&n.datum_params[6]===t.datum_params[6]:!0}function ko(n,t,e){var a=n.x,i=n.y,s=n.z?n.z:0,r,l,o,h;if(i<-S&&i>-1.001*S)i=-S;else if(i>S&&i<1.001*S)i=S;else{if(i<-S)return{x:-1/0,y:-1/0,z:n.z};if(i>S)return{x:1/0,y:1/0,z:n.z}}return a>Math.PI&&(a-=2*Math.PI),l=Math.sin(i),h=Math.cos(i),o=l*l,r=e/Math.sqrt(1-t*o),{x:(r+s)*h*Math.cos(a),y:(r+s)*h*Math.sin(a),z:(r*(1-t)+s)*l}}function Lo(n,t,e,a){var i=1e-12,s=i*i,r=30,l,o,h,u,c,_,f,d,m,g,p,y,v,b=n.x,x=n.y,M=n.z?n.z:0,R,w,I;if(l=Math.sqrt(b*b+x*x),o=Math.sqrt(b*b+x*x+M*M),l/e<i){if(R=0,o/e<i)return w=S,I=-a,{x:n.x,y:n.y,z:n.z}}else R=Math.atan2(x,b);h=M/o,u=l/o,c=1/Math.sqrt(1-t*(2-t)*u*u),d=u*(1-t)*c,m=h*c,v=0;do v++,f=e/Math.sqrt(1-t*m*m),I=l*d+M*m-f*(1-t*m*m),_=t*f/(f+I),c=1/Math.sqrt(1-_*(2-_)*u*u),g=u*(1-_)*c,p=h*c,y=p*d-g*m,d=g,m=p;while(y*y>s&&v<r);return w=Math.atan(p/Math.abs(g)),{x:R,y:w,z:I}}function $f(n,t,e){if(t===Ve)return{x:n.x+e[0],y:n.y+e[1],z:n.z+e[2]};if(t===je){var a=e[0],i=e[1],s=e[2],r=e[3],l=e[4],o=e[5],h=e[6];return{x:h*(n.x-o*n.y+l*n.z)+a,y:h*(o*n.x+n.y-r*n.z)+i,z:h*(-l*n.x+r*n.y+n.z)+s}}}function Yf(n,t,e){if(t===Ve)return{x:n.x-e[0],y:n.y-e[1],z:n.z-e[2]};if(t===je){var a=e[0],i=e[1],s=e[2],r=e[3],l=e[4],o=e[5],h=e[6],u=(n.x-a)/h,c=(n.y-i)/h,_=(n.z-s)/h;return{x:u+o*c-l*_,y:-o*u+c+r*_,z:l*u-r*c+_}}}function Ka(n){return n===Ve||n===je}function Zf(n,t,e){if(Xf(n,t)||n.datum_type===ls||t.datum_type===ls)return e;var a=n.a,i=n.es;if(n.datum_type===_n){var s=il(n,!1,e);if(s!==0)return;a=Jr,i=Qr}var r=t.a,l=t.b,o=t.es;if(t.datum_type===_n&&(r=Jr,l=Q0,o=Qr),i===o&&a===r&&!Ka(n.datum_type)&&!Ka(t.datum_type))return e;if(e=ko(e,i,a),Ka(n.datum_type)&&(e=$f(e,n.datum_type,n.datum_params)),Ka(t.datum_type)&&(e=Yf(e,t.datum_type,t.datum_params)),e=Lo(e,o,r,l),t.datum_type===_n){var h=il(t,!0,e);if(h!==0)return}return e}function il(n,t,e){if(n.grids===null||n.grids.length===0)return console.log("Grid shift grids not found"),-1;var a={x:-e.x,y:e.y},i={x:Number.NaN,y:Number.NaN},s=[];t:for(var r=0;r<n.grids.length;r++){var l=n.grids[r];if(s.push(l.name),l.isNull){i=a;break}if(l.grid===null){if(l.mandatory)return console.log("Unable to find mandatory grid '"+l.name+"'"),-1;continue}for(var o=l.grid.subgrids,h=0,u=o.length;h<u;h++){var c=o[h],_=(Math.abs(c.del[1])+Math.abs(c.del[0]))/1e4,f=c.ll[0]-_,d=c.ll[1]-_,m=c.ll[0]+(c.lim[0]-1)*c.del[0]+_,g=c.ll[1]+(c.lim[1]-1)*c.del[1]+_;if(!(d>a.y||f>a.x||g<a.y||m<a.x)&&(i=Jf(a,t,c),!isNaN(i.x)))break t}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-a.x*te+" "+a.y*te+" tried: '"+s+"'"),-1):(e.x=-i.x,e.y=i.y,0)}function Jf(n,t,e){var a={x:Number.NaN,y:Number.NaN};if(isNaN(n.x))return a;var i={x:n.x,y:n.y};i.x-=e.ll[0],i.y-=e.ll[1],i.x=k(i.x-Math.PI)+Math.PI;var s=sl(i,e);if(t){if(isNaN(s.x))return a;s.x=i.x-s.x,s.y=i.y-s.y;var r=9,l=1e-12,o,h;do{if(h=sl(s,e),isNaN(h.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}o={x:i.x-(h.x+s.x),y:i.y-(h.y+s.y)},s.x+=o.x,s.y+=o.y}while(r--&&Math.abs(o.x)>l&&Math.abs(o.y)>l);if(r<0)return console.log("Inverse grid shift iterator failed to converge."),a;a.x=k(s.x+e.ll[0]),a.y=s.y+e.ll[1]}else isNaN(s.x)||(a.x=n.x+s.x,a.y=n.y+s.y);return a}function sl(n,t){var e={x:n.x/t.del[0],y:n.y/t.del[1]},a={x:Math.floor(e.x),y:Math.floor(e.y)},i={x:e.x-1*a.x,y:e.y-1*a.y},s={x:Number.NaN,y:Number.NaN},r;if(a.x<0||a.x>=t.lim[0]||a.y<0||a.y>=t.lim[1])return s;r=a.y*t.lim[0]+a.x;var l={x:t.cvs[r][0],y:t.cvs[r][1]};r++;var o={x:t.cvs[r][0],y:t.cvs[r][1]};r+=t.lim[0];var h={x:t.cvs[r][0],y:t.cvs[r][1]};r--;var u={x:t.cvs[r][0],y:t.cvs[r][1]},c=i.x*i.y,_=i.x*(1-i.y),f=(1-i.x)*(1-i.y),d=(1-i.x)*i.y;return s.x=f*l.x+_*o.x+d*u.x+c*h.x,s.y=f*l.y+_*o.y+d*u.y+c*h.y,s}function rl(n,t,e){var a=e.x,i=e.y,s=e.z||0,r,l,o,h={};for(o=0;o<3;o++)if(!(t&&o===2&&e.z===void 0))switch(o===0?(r=a,"ew".indexOf(n.axis[o])!==-1?l="x":l="y"):o===1?(r=i,"ns".indexOf(n.axis[o])!==-1?l="y":l="x"):(r=s,l="z"),n.axis[o]){case"e":h[l]=r;break;case"w":h[l]=-r;break;case"n":h[l]=r;break;case"s":h[l]=-r;break;case"u":e[l]!==void 0&&(h.z=r);break;case"d":e[l]!==void 0&&(h.z=-r);break;default:return null}return h}function To(n){var t={x:n[0],y:n[1]};return n.length>2&&(t.z=n[2]),n.length>3&&(t.m=n[3]),t}function Qf(n){ll(n.x),ll(n.y)}function ll(n){if(typeof Number.isFinite=="function"){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if(typeof n!="number"||n!==n||!isFinite(n))throw new TypeError("coordinates must be finite numbers")}function td(n,t){return(n.datum.datum_type===Ve||n.datum.datum_type===je||n.datum.datum_type===_n)&&t.datumCode!=="WGS84"||(t.datum.datum_type===Ve||t.datum.datum_type===je||t.datum.datum_type===_n)&&n.datumCode!=="WGS84"}function hi(n,t,e,a){var i;Array.isArray(e)?e=To(e):e={x:e.x,y:e.y,z:e.z,m:e.m};var s=e.z!==void 0;if(Qf(e),n.datum&&t.datum&&td(n,t)&&(i=new ee("WGS84"),e=hi(n,i,e,a),n=i),a&&n.axis!=="enu"&&(e=rl(n,!1,e)),n.projName==="longlat")e={x:e.x*it,y:e.y*it,z:e.z||0};else if(n.to_meter&&(e={x:e.x*n.to_meter,y:e.y*n.to_meter,z:e.z||0}),e=n.inverse(e),!e)return;if(n.from_greenwich&&(e.x+=n.from_greenwich),e=Zf(n.datum,t.datum,e),!!e)return t.from_greenwich&&(e={x:e.x-t.from_greenwich,y:e.y,z:e.z||0}),t.projName==="longlat"?e={x:e.x*te,y:e.y*te,z:e.z||0}:(e=t.forward(e),t.to_meter&&(e={x:e.x/t.to_meter,y:e.y/t.to_meter,z:e.z||0})),a&&t.axis!=="enu"?rl(t,!0,e):(e&&!s&&delete e.z,e)}var ol=ee("WGS84");function Xi(n,t,e,a){var i,s,r;return Array.isArray(e)?(i=hi(n,t,e,a)||{x:NaN,y:NaN},e.length>2?typeof n.name<"u"&&n.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(e.slice(3)):[i.x,i.y,e[2]].concat(e.slice(3)):[i.x,i.y].concat(e.slice(2)):[i.x,i.y]):(s=hi(n,t,e,a),r=Object.keys(e),r.length===2||r.forEach(function(l){if(typeof n.name<"u"&&n.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(l==="x"||l==="y"||l==="z")return}else if(l==="x"||l==="y")return;s[l]=e[l]}),s)}function hl(n){return n instanceof ee?n:n.oProj?n.oProj:ee(n)}function bt(n,t,e){n=hl(n);var a=!1,i;return typeof t>"u"?(t=n,n=ol,a=!0):(typeof t.x<"u"||Array.isArray(t))&&(e=t,t=n,n=ol,a=!0),t=hl(t),e?Xi(n,t,e):(i={forward:function(s,r){return Xi(n,t,s,r)},inverse:function(s,r){return Xi(t,n,s,r)}},a&&(i.oProj=t),i)}var ul=6,Oo="AJSAJS",Do="AFAFAF",on=65,vt=73,Dt=79,jn=86,Hn=90;const ed={forward:No,inverse:nd,toPoint:Po};function No(n,t){return t=t||5,sd(ad({lat:n[1],lon:n[0]}),t)}function nd(n){var t=Us(Bo(n.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function Po(n){var t=Us(Bo(n.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function $i(n){return n*(Math.PI/180)}function cl(n){return 180*(n/Math.PI)}function ad(n){var t=n.lat,e=n.lon,a=6378137,i=.00669438,s=.9996,r,l,o,h,u,c,_,f=$i(t),d=$i(e),m,g;g=Math.floor((e+180)/6)+1,e===180&&(g=60),t>=56&&t<64&&e>=3&&e<12&&(g=32),t>=72&&t<84&&(e>=0&&e<9?g=31:e>=9&&e<21?g=33:e>=21&&e<33?g=35:e>=33&&e<42&&(g=37)),r=(g-1)*6-180+3,m=$i(r),l=i/(1-i),o=a/Math.sqrt(1-i*Math.sin(f)*Math.sin(f)),h=Math.tan(f)*Math.tan(f),u=l*Math.cos(f)*Math.cos(f),c=Math.cos(f)*(d-m),_=a*((1-i/4-3*i*i/64-5*i*i*i/256)*f-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*f)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*f)-35*i*i*i/3072*Math.sin(6*f));var p=s*o*(c+(1-h+u)*c*c*c/6+(5-18*h+h*h+72*u-58*l)*c*c*c*c*c/120)+5e5,y=s*(_+o*Math.tan(f)*(c*c/2+(5-h+9*u+4*u*u)*c*c*c*c/24+(61-58*h+h*h+600*u-330*l)*c*c*c*c*c*c/720));return t<0&&(y+=1e7),{northing:Math.round(y),easting:Math.round(p),zoneNumber:g,zoneLetter:id(t)}}function Us(n){var t=n.northing,e=n.easting,a=n.zoneLetter,i=n.zoneNumber;if(i<0||i>60)return null;var s=.9996,r=6378137,l=.00669438,o,h=(1-Math.sqrt(1-l))/(1+Math.sqrt(1-l)),u,c,_,f,d,m,g,p,y,v=e-5e5,b=t;a<"N"&&(b-=1e7),g=(i-1)*6-180+3,o=l/(1-l),m=b/s,p=m/(r*(1-l/4-3*l*l/64-5*l*l*l/256)),y=p+(3*h/2-27*h*h*h/32)*Math.sin(2*p)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*p)+151*h*h*h/96*Math.sin(6*p),u=r/Math.sqrt(1-l*Math.sin(y)*Math.sin(y)),c=Math.tan(y)*Math.tan(y),_=o*Math.cos(y)*Math.cos(y),f=r*(1-l)/Math.pow(1-l*Math.sin(y)*Math.sin(y),1.5),d=v/(u*s);var x=y-u*Math.tan(y)/f*(d*d/2-(5+3*c+10*_-4*_*_-9*o)*d*d*d*d/24+(61+90*c+298*_+45*c*c-252*o-3*_*_)*d*d*d*d*d*d/720);x=cl(x);var M=(d-(1+2*c+_)*d*d*d/6+(5-2*_+28*c-3*_*_+8*o+24*c*c)*d*d*d*d*d/120)/Math.cos(y);M=g+cl(M);var R;if(n.accuracy){var w=Us({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});R={top:w.lat,right:w.lon,bottom:x,left:M}}else R={lat:x,lon:M};return R}function id(n){var t="Z";return 84>=n&&n>=72?t="X":72>n&&n>=64?t="W":64>n&&n>=56?t="V":56>n&&n>=48?t="U":48>n&&n>=40?t="T":40>n&&n>=32?t="S":32>n&&n>=24?t="R":24>n&&n>=16?t="Q":16>n&&n>=8?t="P":8>n&&n>=0?t="N":0>n&&n>=-8?t="M":-8>n&&n>=-16?t="L":-16>n&&n>=-24?t="K":-24>n&&n>=-32?t="J":-32>n&&n>=-40?t="H":-40>n&&n>=-48?t="G":-48>n&&n>=-56?t="F":-56>n&&n>=-64?t="E":-64>n&&n>=-72?t="D":-72>n&&n>=-80&&(t="C"),t}function sd(n,t){var e="00000"+n.easting,a="00000"+n.northing;return n.zoneNumber+n.zoneLetter+rd(n.easting,n.northing,n.zoneNumber)+e.substr(e.length-5,t)+a.substr(a.length-5,t)}function rd(n,t,e){var a=Fo(e),i=Math.floor(n/1e5),s=Math.floor(t/1e5)%20;return ld(i,s,a)}function Fo(n){var t=n%ul;return t===0&&(t=ul),t}function ld(n,t,e){var a=e-1,i=Oo.charCodeAt(a),s=Do.charCodeAt(a),r=i+n-1,l=s+t,o=!1;r>Hn&&(r=r-Hn+on-1,o=!0),(r===vt||i<vt&&r>vt||(r>vt||i<vt)&&o)&&r++,(r===Dt||i<Dt&&r>Dt||(r>Dt||i<Dt)&&o)&&(r++,r===vt&&r++),r>Hn&&(r=r-Hn+on-1),l>jn?(l=l-jn+on-1,o=!0):o=!1,(l===vt||s<vt&&l>vt||(l>vt||s<vt)&&o)&&l++,(l===Dt||s<Dt&&l>Dt||(l>Dt||s<Dt)&&o)&&(l++,l===vt&&l++),l>jn&&(l=l-jn+on-1);var h=String.fromCharCode(r)+String.fromCharCode(l);return h}function Bo(n){if(n&&n.length===0)throw"MGRSPoint coverting from nothing";for(var t=n.length,e=null,a="",i,s=0;!/[A-Z]/.test(i=n.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+n;a+=i,s++}var r=parseInt(a,10);if(s===0||s+3>t)throw"MGRSPoint bad conversion from: "+n;var l=n.charAt(s++);if(l<="A"||l==="B"||l==="Y"||l>="Z"||l==="I"||l==="O")throw"MGRSPoint zone letter "+l+" not handled: "+n;e=n.substring(s,s+=2);for(var o=Fo(r),h=od(e.charAt(0),o),u=hd(e.charAt(1),o);u<ud(l);)u+=2e6;var c=t-s;if(c%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+n;var _=c/2,f=0,d=0,m,g,p,y,v;return _>0&&(m=1e5/Math.pow(10,_),g=n.substring(s,s+_),f=parseFloat(g)*m,p=n.substring(s+_),d=parseFloat(p)*m),y=f+h,v=d+u,{easting:y,northing:v,zoneLetter:l,zoneNumber:r,accuracy:m}}function od(n,t){for(var e=Oo.charCodeAt(t-1),a=1e5,i=!1;e!==n.charCodeAt(0);){if(e++,e===vt&&e++,e===Dt&&e++,e>Hn){if(i)throw"Bad character: "+n;e=on,i=!0}a+=1e5}return a}function hd(n,t){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var e=Do.charCodeAt(t-1),a=0,i=!1;e!==n.charCodeAt(0);){if(e++,e===vt&&e++,e===Dt&&e++,e>jn){if(i)throw"Bad character: "+n;e=on,i=!0}a+=1e5}return a}function ud(n){var t;switch(n){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+n}function bn(n,t,e){if(!(this instanceof bn))return new bn(n,t,e);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n=="string"&&typeof t>"u"){var a=n.split(",");this.x=parseFloat(a[0],10),this.y=parseFloat(a[1],10),this.z=parseFloat(a[2],10)||0}else this.x=n,this.y=t,this.z=e||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}bn.fromMGRS=function(n){return new bn(Po(n))};bn.prototype.toMGRS=function(n){return No([this.x,this.y],n)};var cd=1,_d=.25,_l=.046875,fl=.01953125,dl=.01068115234375,fd=.75,dd=.46875,md=.013020833333333334,gd=.007120768229166667,pd=.3645833333333333,yd=.005696614583333333,bd=.3076171875;function zs(n){var t=[];t[0]=cd-n*(_d+n*(_l+n*(fl+n*dl))),t[1]=n*(fd-n*(_l+n*(fl+n*dl)));var e=n*n;return t[2]=e*(dd-n*(md+n*gd)),e*=n,t[3]=e*(pd-n*yd),t[4]=e*n*bd,t}function En(n,t,e,a){return e*=t,t*=t,a[0]*n-e*(a[1]+t*(a[2]+t*(a[3]+t*a[4])))}var vd=20;function Vs(n,t,e){for(var a=1/(1-t),i=n,s=vd;s;--s){var r=Math.sin(i),l=1-t*r*r;if(l=(En(i,r,Math.cos(i),e)-n)*(l*Math.sqrt(l))*a,i-=l,Math.abs(l)<C)return i}return i}function xd(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=zs(this.es),this.ml0=En(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Md(n){var t=n.x,e=n.y,a=k(t-this.long0),i,s,r,l=Math.sin(e),o=Math.cos(e);if(this.es){var u=o*a,c=Math.pow(u,2),_=this.ep2*Math.pow(o,2),f=Math.pow(_,2),d=Math.abs(o)>C?Math.tan(e):0,m=Math.pow(d,2),g=Math.pow(m,2);i=1-this.es*Math.pow(l,2),u=u/Math.sqrt(i);var p=En(e,l,o,this.en);s=this.a*(this.k0*u*(1+c/6*(1-m+_+c/20*(5-18*m+g+14*_-58*m*_+c/42*(61+179*g-g*m-479*m)))))+this.x0,r=this.a*(this.k0*(p-this.ml0+l*a*u/2*(1+c/12*(5-m+9*_+4*f+c/30*(61+g-58*m+270*_-330*m*_+c/56*(1385+543*g-g*m-3111*m))))))+this.y0}else{var h=o*Math.sin(a);if(Math.abs(Math.abs(h)-1)<C)return 93;if(s=.5*this.a*this.k0*Math.log((1+h)/(1-h))+this.x0,r=o*Math.cos(a)/Math.sqrt(1-Math.pow(h,2)),h=Math.abs(r),h>=1){if(h-1>C)return 93;r=0}else r=Math.acos(r);e<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return n.x=s,n.y=r,n}function wd(n){var t,e,a,i,s=(n.x-this.x0)*(1/this.a),r=(n.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+r/this.k0,e=Vs(t,this.es,this.en),Math.abs(e)<S){var c=Math.sin(e),_=Math.cos(e),f=Math.abs(_)>C?Math.tan(e):0,d=this.ep2*Math.pow(_,2),m=Math.pow(d,2),g=Math.pow(f,2),p=Math.pow(g,2);t=1-this.es*Math.pow(c,2);var y=s*Math.sqrt(t)/this.k0,v=Math.pow(y,2);t=t*f,a=e-t*v/(1-this.es)*.5*(1-v/12*(5+3*g-9*d*g+d-4*m-v/30*(61+90*g-252*d*g+45*p+46*d-v/56*(1385+3633*g+4095*p+1574*p*g)))),i=k(this.long0+y*(1-v/6*(1+2*g+d-v/20*(5+28*g+24*p+8*d*g+6*d-v/42*(61+662*g+1320*p+720*p*g))))/_)}else a=S*xa(r),i=0;else{var l=Math.exp(s/this.k0),o=.5*(l-1/l),h=this.lat0+r/this.k0,u=Math.cos(h);t=Math.sqrt((1-Math.pow(u,2))/(1+Math.pow(o,2))),a=Math.asin(t),r<0&&(a=-a),o===0&&u===0?i=0:i=k(Math.atan2(o,u)+this.long0)}return n.x=i,n.y=a,n}var Ed=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Ja={init:xd,forward:Md,inverse:wd,names:Ed};function Go(n){var t=Math.exp(n);return t=(t-1/t)/2,t}function Et(n,t){n=Math.abs(n),t=Math.abs(t);var e=Math.max(n,t),a=Math.min(n,t)/(e||1);return e*Math.sqrt(1+Math.pow(a,2))}function Sd(n){var t=1+n,e=t-1;return e===0?n:n*Math.log(t)/e}function Rd(n){var t=Math.abs(n);return t=Sd(t*(1+t/(Et(1,t)+1))),n<0?-t:t}function js(n,t){for(var e=2*Math.cos(2*t),a=n.length-1,i=n[a],s=0,r;--a>=0;)r=-s+e*i+n[a],s=i,i=r;return t+r*Math.sin(2*t)}function Id(n,t){for(var e=2*Math.cos(t),a=n.length-1,i=n[a],s=0,r;--a>=0;)r=-s+e*i+n[a],s=i,i=r;return Math.sin(t)*r}function Ad(n){var t=Math.exp(n);return t=(t+1/t)/2,t}function Uo(n,t,e){for(var a=Math.sin(t),i=Math.cos(t),s=Go(e),r=Ad(e),l=2*i*r,o=-2*a*s,h=n.length-1,u=n[h],c=0,_=0,f=0,d,m;--h>=0;)d=_,m=c,_=u,c=f,u=-d+l*_-o*c+n[h],f=-m+o*_+l*c;return l=a*r,o=i*s,[l*u-o*f,l*f+o*u]}function Cd(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Ja.init.apply(this),this.forward=Ja.forward,this.inverse=Ja.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var n=this.es/(1+Math.sqrt(1-this.es)),t=n/(2-n),e=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),e=e*t,this.cgb[1]=e*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=e*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),e=e*t,this.cgb[2]=e*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=e*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),e=e*t,this.cgb[3]=e*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=e*(1237/630+t*(-12/5+t*(-24832/14175))),e=e*t,this.cgb[4]=e*(4174/315+t*(-144838/6237)),this.cbg[4]=e*(-734/315+t*(109598/31185)),e=e*t,this.cgb[5]=e*(601676/22275),this.cbg[5]=e*(444337/155925),e=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+e*(1/4+e*(1/64+e/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=e*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=e*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),e=e*t,this.utg[2]=e*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=e*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),e=e*t,this.utg[3]=e*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=e*(49561/161280+t*(-179/168+t*(6601661/7257600))),e=e*t,this.utg[4]=e*(-4583/161280+t*(108847/3991680)),this.gtu[4]=e*(34729/80640+t*(-3418889/1995840)),e=e*t,this.utg[5]=e*(-20648693/638668800),this.gtu[5]=e*(212378941/319334400);var a=js(this.cbg,this.lat0);this.Zb=-this.Qn*(a+Id(this.gtu,2*a))}function kd(n){var t=k(n.x-this.long0),e=n.y;e=js(this.cbg,e);var a=Math.sin(e),i=Math.cos(e),s=Math.sin(t),r=Math.cos(t);e=Math.atan2(a,r*i),t=Math.atan2(s*i,Et(a,i*r)),t=Rd(Math.tan(t));var l=Uo(this.gtu,2*e,2*t);e=e+l[0],t=t+l[1];var o,h;return Math.abs(t)<=2.623395162778?(o=this.a*(this.Qn*t)+this.x0,h=this.a*(this.Qn*e+this.Zb)+this.y0):(o=1/0,h=1/0),n.x=o,n.y=h,n}function Ld(n){var t=(n.x-this.x0)*(1/this.a),e=(n.y-this.y0)*(1/this.a);e=(e-this.Zb)/this.Qn,t=t/this.Qn;var a,i;if(Math.abs(t)<=2.623395162778){var s=Uo(this.utg,2*e,2*t);e=e+s[0],t=t+s[1],t=Math.atan(Go(t));var r=Math.sin(e),l=Math.cos(e),o=Math.sin(t),h=Math.cos(t);e=Math.atan2(r*h,Et(o,h*l)),t=Math.atan2(o,h*l),a=k(t+this.long0),i=js(this.cgb,e)}else a=1/0,i=1/0;return n.x=a,n.y=i,n}var Td=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const Qa={init:Cd,forward:kd,inverse:Ld,names:Td};function Od(n,t){if(n===void 0){if(n=Math.floor((k(t)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}var Dd="etmerc";function Nd(){var n=Od(this.zone,this.long0);if(n===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(n)-183)*it,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Qa.init.apply(this),this.forward=Qa.forward,this.inverse=Qa.inverse}var Pd=["Universal Transverse Mercator System","utm"];const Fd={init:Nd,names:Pd,dependsOn:Dd};function Hs(n,t){return Math.pow((1-n)/(1+n),t)}var Bd=20;function Gd(){var n=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*n*n),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(n/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+X)/(Math.pow(Math.tan(.5*this.lat0+X),this.C)*Hs(this.e*n,this.ratexp))}function Ud(n){var t=n.x,e=n.y;return n.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*e+X),this.C)*Hs(this.e*Math.sin(e),this.ratexp))-S,n.x=this.C*t,n}function zd(n){for(var t=1e-14,e=n.x/this.C,a=n.y,i=Math.pow(Math.tan(.5*a+X)/this.K,1/this.C),s=Bd;s>0&&(a=2*Math.atan(i*Hs(this.e*Math.sin(n.y),-.5*this.e))-S,!(Math.abs(a-n.y)<t));--s)n.y=a;return s?(n.x=e,n.y=a,n):null}const Ks={init:Gd,forward:Ud,inverse:zd};function Vd(){Ks.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function jd(n){var t,e,a,i;return n.x=k(n.x-this.long0),Ks.forward.apply(this,[n]),t=Math.sin(n.y),e=Math.cos(n.y),a=Math.cos(n.x),i=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*e*a),n.x=i*e*Math.sin(n.x),n.y=i*(this.cosc0*t-this.sinc0*e*a),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function Hd(n){var t,e,a,i,s;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,s=Et(n.x,n.y)){var r=2*Math.atan2(s,this.R2);t=Math.sin(r),e=Math.cos(r),i=Math.asin(e*this.sinc0+n.y*t*this.cosc0/s),a=Math.atan2(n.x*t,s*this.cosc0*e-n.y*this.sinc0*t)}else i=this.phic0,a=0;return n.x=a,n.y=i,Ks.inverse.apply(this,[n]),n.x=k(n.x+this.long0),n}var Kd=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const qd={init:Vd,forward:jd,inverse:Hd,names:Kd};function Wd(n,t,e){return t*=e,Math.tan(.5*(S+n))*Math.pow((1-t)/(1+t),.5*e)}function Xd(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=C&&(this.k0=.5*(1+xa(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=C&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=C&&Math.abs(Math.cos(this.lat_ts))>C&&(this.k0=.5*this.cons*ne(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/zt(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ne(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-S,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function $d(n){var t=n.x,e=n.y,a=Math.sin(e),i=Math.cos(e),s,r,l,o,h,u,c=k(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=C&&Math.abs(e+this.lat0)<=C?(n.x=NaN,n.y=NaN,n):this.sphere?(s=2*this.k0/(1+this.sinlat0*a+this.coslat0*i*Math.cos(c)),n.x=this.a*s*i*Math.sin(c)+this.x0,n.y=this.a*s*(this.coslat0*a-this.sinlat0*i*Math.cos(c))+this.y0,n):(r=2*Math.atan(this.ssfn_(e,a,this.e))-S,o=Math.cos(r),l=Math.sin(r),Math.abs(this.coslat0)<=C?(h=zt(this.e,e*this.con,this.con*a),u=2*this.a*this.k0*h/this.cons,n.x=this.x0+u*Math.sin(t-this.long0),n.y=this.y0-this.con*u*Math.cos(t-this.long0),n):(Math.abs(this.sinlat0)<C?(s=2*this.a*this.k0/(1+o*Math.cos(c)),n.y=s*l):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*l+this.cosX0*o*Math.cos(c))),n.y=s*(this.cosX0*l-this.sinX0*o*Math.cos(c))+this.y0),n.x=s*o*Math.sin(c)+this.x0,n))}function Yd(n){n.x-=this.x0,n.y-=this.y0;var t,e,a,i,s,r=Math.sqrt(n.x*n.x+n.y*n.y);if(this.sphere){var l=2*Math.atan(r/(2*this.a*this.k0));return t=this.long0,e=this.lat0,r<=C?(n.x=t,n.y=e,n):(e=Math.asin(Math.cos(l)*this.sinlat0+n.y*Math.sin(l)*this.coslat0/r),Math.abs(this.coslat0)<C?this.lat0>0?t=k(this.long0+Math.atan2(n.x,-1*n.y)):t=k(this.long0+Math.atan2(n.x,n.y)):t=k(this.long0+Math.atan2(n.x*Math.sin(l),r*this.coslat0*Math.cos(l)-n.y*this.sinlat0*Math.sin(l))),n.x=t,n.y=e,n)}else if(Math.abs(this.coslat0)<=C){if(r<=C)return e=this.lat0,t=this.long0,n.x=t,n.y=e,n;n.x*=this.con,n.y*=this.con,a=r*this.cons/(2*this.a*this.k0),e=this.con*da(this.e,a),t=this.con*k(this.con*this.long0+Math.atan2(n.x,-1*n.y))}else i=2*Math.atan(r*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,r<=C?s=this.X0:(s=Math.asin(Math.cos(i)*this.sinX0+n.y*Math.sin(i)*this.cosX0/r),t=k(this.long0+Math.atan2(n.x*Math.sin(i),r*this.cosX0*Math.cos(i)-n.y*this.sinX0*Math.sin(i)))),e=-1*da(this.e,Math.tan(.5*(S+s)));return n.x=t,n.y=e,n}var Zd=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const Jd={init:Xd,forward:$d,inverse:Yd,names:Zd,ssfn_:Wd};function Qd(){var n=this.lat0;this.lambda0=this.long0;var t=Math.sin(n),e=this.a,a=this.rf,i=1/a,s=2*i-Math.pow(i,2),r=this.e=Math.sqrt(s);this.R=this.k0*e*Math.sqrt(1-s)/(1-s*Math.pow(t,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(n),4)),this.b0=Math.asin(t/this.alpha);var l=Math.log(Math.tan(Math.PI/4+this.b0/2)),o=Math.log(Math.tan(Math.PI/4+n/2)),h=Math.log((1+r*t)/(1-r*t));this.K=l-this.alpha*o+this.alpha*r/2*h}function tm(n){var t=Math.log(Math.tan(Math.PI/4-n.y/2)),e=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),a=-this.alpha*(t+e)+this.K,i=2*(Math.atan(Math.exp(a))-Math.PI/4),s=this.alpha*(n.x-this.lambda0),r=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(s))),l=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(s));return n.y=this.R/2*Math.log((1+Math.sin(l))/(1-Math.sin(l)))+this.y0,n.x=this.R*r+this.x0,n}function em(n){for(var t=n.x-this.x0,e=n.y-this.y0,a=t/this.R,i=2*(Math.atan(Math.exp(e/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(a)),r=Math.atan(Math.sin(a)/(Math.cos(this.b0)*Math.cos(a)-Math.sin(this.b0)*Math.tan(i))),l=this.lambda0+r/this.alpha,o=0,h=s,u=-1e3,c=0;Math.abs(h-u)>1e-7;){if(++c>20)return;o=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),u=h,h=2*Math.atan(Math.exp(o))-Math.PI/2}return n.x=l,n.y=h,n}var nm=["somerc"];const am={init:Qd,forward:tm,inverse:em,names:nm};var nn=1e-7;function im(n){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],e=typeof n.PROJECTION=="object"?Object.keys(n.PROJECTION)[0]:n.PROJECTION;return"no_uoff"in n||"no_off"in n||t.indexOf(e)!==-1}function sm(){var n,t,e,a,i,s,r,l,o,h,u=0,c,_=0,f=0,d=0,m=0,g=0,p=0;this.no_off=im(this),this.no_rot="no_rot"in this;var y=!1;"alpha"in this&&(y=!0);var v=!1;if("rectified_grid_angle"in this&&(v=!0),y&&(p=this.alpha),v&&(u=this.rectified_grid_angle*it),y||v)_=this.longc;else if(f=this.long1,m=this.lat1,d=this.long2,g=this.lat2,Math.abs(m-g)<=nn||(n=Math.abs(m))<=nn||Math.abs(n-S)<=nn||Math.abs(Math.abs(this.lat0)-S)<=nn||Math.abs(Math.abs(g)-S)<=nn)throw new Error;var b=1-this.es;t=Math.sqrt(b),Math.abs(this.lat0)>C?(l=Math.sin(this.lat0),e=Math.cos(this.lat0),n=1-this.es*l*l,this.B=e*e,this.B=Math.sqrt(1+this.es*this.B*this.B/b),this.A=this.B*this.k0*t/n,a=this.B*t/(e*Math.sqrt(n)),i=a*a-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=a,this.E*=Math.pow(zt(this.e,this.lat0,l),this.B)):(this.B=1/t,this.A=this.k0,this.E=a=i=1),y||v?(y?(c=Math.asin(Math.sin(p)/a),v||(u=p)):(c=u,p=Math.asin(a*Math.sin(c))),this.lam0=_-Math.asin(.5*(i-1/i)*Math.tan(c))/this.B):(s=Math.pow(zt(this.e,m,Math.sin(m)),this.B),r=Math.pow(zt(this.e,g,Math.sin(g)),this.B),i=this.E/s,o=(r-s)/(r+s),h=this.E*this.E,h=(h-r*s)/(h+r*s),n=f-d,n<-Math.pi?d-=_a:n>Math.pi&&(d+=_a),this.lam0=k(.5*(f+d)-Math.atan(h*Math.tan(.5*this.B*(f-d))/o)/this.B),c=Math.atan(2*Math.sin(this.B*k(f-this.lam0))/(i-1/i)),u=p=Math.asin(a*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(u),this.cosrot=Math.cos(u),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(a*a-1)/Math.cos(p))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(X-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(X+i))}function rm(n){var t={},e,a,i,s,r,l,o,h;if(n.x=n.x-this.lam0,Math.abs(Math.abs(n.y)-S)>C){if(r=this.E/Math.pow(zt(this.e,n.y,Math.sin(n.y)),this.B),l=1/r,e=.5*(r-l),a=.5*(r+l),s=Math.sin(this.B*n.x),i=(e*this.singam-s*this.cosgam)/a,Math.abs(Math.abs(i)-1)<C)throw new Error;h=.5*this.ArB*Math.log((1-i)/(1+i)),l=Math.cos(this.B*n.x),Math.abs(l)<nn?o=this.A*n.x:o=this.ArB*Math.atan2(e*this.cosgam+s*this.singam,l)}else h=n.y>0?this.v_pole_n:this.v_pole_s,o=this.ArB*n.y;return this.no_rot?(t.x=o,t.y=h):(o-=this.u_0,t.x=h*this.cosrot+o*this.sinrot,t.y=o*this.cosrot-h*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function lm(n){var t,e,a,i,s,r,l,o={};if(n.x=(n.x-this.x0)*(1/this.a),n.y=(n.y-this.y0)*(1/this.a),this.no_rot?(e=n.y,t=n.x):(e=n.x*this.cosrot-n.y*this.sinrot,t=n.y*this.cosrot+n.x*this.sinrot+this.u_0),a=Math.exp(-this.BrA*e),i=.5*(a-1/a),s=.5*(a+1/a),r=Math.sin(this.BrA*t),l=(r*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(l)-1)<C)o.x=0,o.y=l<0?-S:S;else{if(o.y=this.E/Math.sqrt((1+l)/(1-l)),o.y=da(this.e,Math.pow(o.y,1/this.B)),o.y===1/0)throw new Error;o.x=-this.rB*Math.atan2(i*this.cosgam-r*this.singam,Math.cos(this.BrA*t))}return o.x+=this.lam0,o}var om=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const hm={init:sm,forward:rm,inverse:lm,names:om};function um(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<C)){var n=this.b/this.a;this.e=Math.sqrt(1-n*n);var t=Math.sin(this.lat1),e=Math.cos(this.lat1),a=ne(this.e,t,e),i=zt(this.e,this.lat1,t),s=Math.sin(this.lat2),r=Math.cos(this.lat2),l=ne(this.e,s,r),o=zt(this.e,this.lat2,s),h=zt(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>C?this.ns=Math.log(a/l)/Math.log(i/o):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=a/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function cm(n){var t=n.x,e=n.y;Math.abs(2*Math.abs(e)-Math.PI)<=C&&(e=xa(e)*(S-2*C));var a=Math.abs(Math.abs(e)-S),i,s;if(a>C)i=zt(this.e,e,Math.sin(e)),s=this.a*this.f0*Math.pow(i,this.ns);else{if(a=e*this.ns,a<=0)return null;s=0}var r=this.ns*k(t-this.long0);return n.x=this.k0*(s*Math.sin(r))+this.x0,n.y=this.k0*(this.rh-s*Math.cos(r))+this.y0,n}function _m(n){var t,e,a,i,s,r=(n.x-this.x0)/this.k0,l=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(r*r+l*l),e=1):(t=-Math.sqrt(r*r+l*l),e=-1);var o=0;if(t!==0&&(o=Math.atan2(e*r,e*l)),t!==0||this.ns>0){if(e=1/this.ns,a=Math.pow(t/(this.a*this.f0),e),i=da(this.e,a),i===-9999)return null}else i=-S;return s=k(o/this.ns+this.long0),n.x=s,n.y=i,n}var fm=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const dm={init:um,forward:cm,inverse:_m,names:fm};function mm(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function gm(n){var t,e,a,i,s,r,l,o=n.x,h=n.y,u=k(o-this.long0);return t=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),e=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/t)-this.s45),a=-u*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(e)+Math.sin(this.ad)*Math.cos(e)*Math.cos(a)),s=Math.asin(Math.cos(e)*Math.sin(a)/Math.cos(i)),r=this.n*s,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),n.y=l*Math.cos(r)/1,n.x=l*Math.sin(r)/1,this.czech||(n.y*=-1,n.x*=-1),n}function pm(n){var t,e,a,i,s,r,l,o,h=n.x;n.x=n.y,n.y=h,this.czech||(n.y*=-1,n.x*=-1),r=Math.sqrt(n.x*n.x+n.y*n.y),s=Math.atan2(n.y,n.x),i=s/Math.sin(this.s0),a=2*(Math.atan(Math.pow(this.ro0/r,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(a)-Math.sin(this.ad)*Math.cos(a)*Math.cos(i)),e=Math.asin(Math.cos(a)*Math.sin(i)/Math.cos(t)),n.x=this.long0-e/this.alfa,l=t,o=0;var u=0;do n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.e/2))-this.s45),Math.abs(l-n.y)<1e-10&&(o=1),l=n.y,u+=1;while(o===0&&u<15);return u>=15?null:n}var ym=["Krovak","krovak"];const bm={init:mm,forward:gm,inverse:pm,names:ym};function yt(n,t,e,a,i){return n*i-t*Math.sin(2*i)+e*Math.sin(4*i)-a*Math.sin(6*i)}function Ma(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function wa(n){return .375*n*(1+.25*n*(1+.46875*n))}function Ea(n){return .05859375*n*n*(1+.75*n)}function Sa(n){return n*n*n*(35/3072)}function vn(n,t,e){var a=t*e;return n/Math.sqrt(1-a*a)}function Ce(n){return Math.abs(n)<S?n:n-xa(n)*Math.PI}function ui(n,t,e,a,i){var s,r;s=n/t;for(var l=0;l<15;l++)if(r=(n-(t*s-e*Math.sin(2*s)+a*Math.sin(4*s)-i*Math.sin(6*s)))/(t-2*e*Math.cos(2*s)+4*a*Math.cos(4*s)-6*i*Math.cos(6*s)),s+=r,Math.abs(r)<=1e-10)return s;return NaN}function vm(){this.sphere||(this.e0=Ma(this.es),this.e1=wa(this.es),this.e2=Ea(this.es),this.e3=Sa(this.es),this.ml0=this.a*yt(this.e0,this.e1,this.e2,this.e3,this.lat0))}function xm(n){var t,e,a=n.x,i=n.y;if(a=k(a-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(i)*Math.sin(a)),e=this.a*(Math.atan2(Math.tan(i),Math.cos(a))-this.lat0);else{var s=Math.sin(i),r=Math.cos(i),l=vn(this.a,this.e,s),o=Math.tan(i)*Math.tan(i),h=a*Math.cos(i),u=h*h,c=this.es*r*r/(1-this.es),_=this.a*yt(this.e0,this.e1,this.e2,this.e3,i);t=l*h*(1-u*o*(1/6-(8-o+8*c)*u/120)),e=_-this.ml0+l*s/r*u*(.5+(5-o+6*c)*u/24)}return n.x=t+this.x0,n.y=e+this.y0,n}function Mm(n){n.x-=this.x0,n.y-=this.y0;var t=n.x/this.a,e=n.y/this.a,a,i;if(this.sphere){var s=e+this.lat0;a=Math.asin(Math.sin(s)*Math.cos(t)),i=Math.atan2(Math.tan(t),Math.cos(s))}else{var r=this.ml0/this.a+e,l=ui(r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-S)<=C)return n.x=this.long0,n.y=S,e<0&&(n.y*=-1),n;var o=vn(this.a,this.e,Math.sin(l)),h=o*o*o/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(l),2),c=t*this.a/o,_=c*c;a=l-o*Math.tan(l)/h*c*c*(.5-(1+3*u)*c*c/24),i=c*(1-_*(u/3+(1+3*u)*u*_/15))/Math.cos(l)}return n.x=k(i+this.long0),n.y=Ce(a),n}var wm=["Cassini","Cassini_Soldner","cass"];const Em={init:vm,forward:xm,inverse:Mm,names:wm};function we(n,t){var e;return n>1e-7?(e=n*t,(1-n*n)*(t/(1-e*e)-.5/n*Math.log((1-e)/(1+e)))):2*t}var Sm=1,Rm=2,Im=3,Am=4;function Cm(){var n=Math.abs(this.lat0);if(Math.abs(n-S)<C?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(n)<C?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=we(this.e,1),this.mmf=.5/(1-this.es),this.apa=Bm(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=we(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function km(n){var t,e,a,i,s,r,l,o,h,u,c=n.x,_=n.y;if(c=k(c-this.long0),this.sphere){if(s=Math.sin(_),u=Math.cos(_),a=Math.cos(c),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e=this.mode===this.EQUIT?1+u*a:1+this.sinph0*s+this.cosph0*u*a,e<=C)return null;e=Math.sqrt(2/e),t=e*u*Math.sin(c),e*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*u*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(_+this.lat0)<C)return null;e=X-_*.5,e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)),t=e*Math.sin(c),e*=a}}else{switch(l=0,o=0,h=0,a=Math.cos(c),i=Math.sin(c),s=Math.sin(_),r=we(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(l=r/this.qp,o=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:h=1+this.sinb1*l+this.cosb1*o*a;break;case this.EQUIT:h=1+o*a;break;case this.N_POLE:h=S+_,r=this.qp-r;break;case this.S_POLE:h=_-S,r=this.qp+r;break}if(Math.abs(h)<C)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),this.mode===this.OBLIQ?e=this.ymf*h*(this.cosb1*l-this.sinb1*o*a):e=(h=Math.sqrt(2/(1+o*a)))*l*this.ymf,t=this.xmf*h*o*i;break;case this.N_POLE:case this.S_POLE:r>=0?(t=(h=Math.sqrt(r))*i,e=a*(this.mode===this.S_POLE?h:-h)):t=e=0;break}}return n.x=this.a*t+this.x0,n.y=this.a*e+this.y0,n}function Lm(n){n.x-=this.x0,n.y-=this.y0;var t=n.x/this.a,e=n.y/this.a,a,i,s,r,l,o,h;if(this.sphere){var u=0,c,_=0;if(c=Math.sqrt(t*t+e*e),i=c*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(_=Math.sin(i),u=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(c)<=C?0:Math.asin(e*_/c),t*=_,e=u*c;break;case this.OBLIQ:i=Math.abs(c)<=C?this.lat0:Math.asin(u*this.sinph0+e*_*this.cosph0/c),t*=_*this.cosph0,e=(u-Math.sin(i)*this.sinph0)*c;break;case this.N_POLE:e=-e,i=S-i;break;case this.S_POLE:i-=S;break}a=e===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,e)}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,e*=this.dd,o=Math.sqrt(t*t+e*e),o<C)return n.x=this.long0,n.y=this.lat0,n;r=2*Math.asin(.5*o/this.rq),s=Math.cos(r),t*=r=Math.sin(r),this.mode===this.OBLIQ?(h=s*this.sinb1+e*r*this.cosb1/o,l=this.qp*h,e=o*this.cosb1*s-e*this.sinb1*r):(h=e*r/o,l=this.qp*h,e=o*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(e=-e),l=t*t+e*e,!l)return n.x=this.long0,n.y=this.lat0,n;h=1-l/this.qp,this.mode===this.S_POLE&&(h=-h)}a=Math.atan2(t,e),i=Gm(Math.asin(h),this.apa)}return n.x=k(this.long0+a),n.y=i,n}var Tm=.3333333333333333,Om=.17222222222222222,Dm=.10257936507936508,Nm=.06388888888888888,Pm=.0664021164021164,Fm=.016415012942191543;function Bm(n){var t,e=[];return e[0]=n*Tm,t=n*n,e[0]+=t*Om,e[1]=t*Nm,t*=n,e[0]+=t*Dm,e[1]+=t*Pm,e[2]=t*Fm,e}function Gm(n,t){var e=n+n;return n+t[0]*Math.sin(e)+t[1]*Math.sin(e+e)+t[2]*Math.sin(e+e+e)}var Um=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const zm={init:Cm,forward:km,inverse:Lm,names:Um,S_POLE:Sm,N_POLE:Rm,EQUIT:Im,OBLIQ:Am};function Re(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}function Vm(){Math.abs(this.lat1+this.lat2)<C||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ne(this.e3,this.sin_po,this.cos_po),this.qs1=we(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ne(this.e3,this.sin_po,this.cos_po),this.qs2=we(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=we(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>C?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function jm(n){var t=n.x,e=n.y;this.sin_phi=Math.sin(e),this.cos_phi=Math.cos(e);var a=we(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*a)/this.ns0,s=this.ns0*k(t-this.long0),r=i*Math.sin(s)+this.x0,l=this.rh-i*Math.cos(s)+this.y0;return n.x=r,n.y=l,n}function Hm(n){var t,e,a,i,s,r;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(t=Math.sqrt(n.x*n.x+n.y*n.y),a=1):(t=-Math.sqrt(n.x*n.x+n.y*n.y),a=-1),i=0,t!==0&&(i=Math.atan2(a*n.x,a*n.y)),a=t*this.ns0/this.a,this.sphere?r=Math.asin((this.c-a*a)/(2*this.ns0)):(e=(this.c-a*a)/this.ns0,r=this.phi1z(this.e3,e)),s=k(i/this.ns0+this.long0),n.x=s,n.y=r,n}function Km(n,t){var e,a,i,s,r,l=Re(.5*t);if(n<C)return l;for(var o=n*n,h=1;h<=25;h++)if(e=Math.sin(l),a=Math.cos(l),i=n*e,s=1-i*i,r=.5*s*s/a*(t/(1-o)-e/s+.5/n*Math.log((1-i)/(1+i))),l=l+r,Math.abs(r)<=1e-7)return l;return null}var qm=["Albers_Conic_Equal_Area","Albers","aea"];const Wm={init:Vm,forward:jm,inverse:Hm,names:qm,phi1z:Km};function Xm(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function $m(n){var t,e,a,i,s,r,l,o,h=n.x,u=n.y;return a=k(h-this.long0),t=Math.sin(u),e=Math.cos(u),i=Math.cos(a),r=this.sin_p14*t+this.cos_p14*e*i,s=1,r>0||Math.abs(r)<=C?(l=this.x0+this.a*s*e*Math.sin(a)/r,o=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*e*i)/r):(l=this.x0+this.infinity_dist*e*Math.sin(a),o=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*e*i)),n.x=l,n.y=o,n}function Ym(n){var t,e,a,i,s,r;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(t=Math.sqrt(n.x*n.x+n.y*n.y))?(i=Math.atan2(t,this.rc),e=Math.sin(i),a=Math.cos(i),r=Re(a*this.sin_p14+n.y*e*this.cos_p14/t),s=Math.atan2(n.x*e,t*this.cos_p14*a-n.y*this.sin_p14*e),s=k(this.long0+s)):(r=this.phic0,s=0),n.x=s,n.y=r,n}var Zm=["gnom"];const Jm={init:Xm,forward:$m,inverse:Ym,names:Zm};function Qm(n,t){var e=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(t)-e)<1e-6)return t<0?-1*S:S;for(var a=Math.asin(.5*t),i,s,r,l,o=0;o<30;o++)if(s=Math.sin(a),r=Math.cos(a),l=n*s,i=Math.pow(1-l*l,2)/(2*r)*(t/(1-n*n)-s/(1-l*l)+.5/n*Math.log((1-l)/(1+l))),a+=i,Math.abs(i)<=1e-10)return a;return NaN}function t1(){this.sphere||(this.k0=ne(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function e1(n){var t=n.x,e=n.y,a,i,s=k(t-this.long0);if(this.sphere)a=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var r=we(this.e,Math.sin(e));a=this.x0+this.a*this.k0*s,i=this.y0+this.a*r*.5/this.k0}return n.x=a,n.y=i,n}function n1(n){n.x-=this.x0,n.y-=this.y0;var t,e;return this.sphere?(t=k(this.long0+n.x/this.a/Math.cos(this.lat_ts)),e=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(e=Qm(this.e,2*n.y*this.k0/this.a),t=k(this.long0+n.x/(this.a*this.k0))),n.x=t,n.y=e,n}var a1=["cea"];const i1={init:t1,forward:e1,inverse:n1,names:a1};function s1(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function r1(n){var t=n.x,e=n.y,a=k(t-this.long0),i=Ce(e-this.lat0);return n.x=this.x0+this.a*a*this.rc,n.y=this.y0+this.a*i,n}function l1(n){var t=n.x,e=n.y;return n.x=k(this.long0+(t-this.x0)/(this.a*this.rc)),n.y=Ce(this.lat0+(e-this.y0)/this.a),n}var o1=["Equirectangular","Equidistant_Cylindrical","eqc"];const h1={init:s1,forward:r1,inverse:l1,names:o1};var ml=20;function u1(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ma(this.es),this.e1=wa(this.es),this.e2=Ea(this.es),this.e3=Sa(this.es),this.ml0=this.a*yt(this.e0,this.e1,this.e2,this.e3,this.lat0)}function c1(n){var t=n.x,e=n.y,a,i,s,r=k(t-this.long0);if(s=r*Math.sin(e),this.sphere)Math.abs(e)<=C?(a=this.a*r,i=-1*this.a*this.lat0):(a=this.a*Math.sin(s)/Math.tan(e),i=this.a*(Ce(e-this.lat0)+(1-Math.cos(s))/Math.tan(e)));else if(Math.abs(e)<=C)a=this.a*r,i=-1*this.ml0;else{var l=vn(this.a,this.e,Math.sin(e))/Math.tan(e);a=l*Math.sin(s),i=this.a*yt(this.e0,this.e1,this.e2,this.e3,e)-this.ml0+l*(1-Math.cos(s))}return n.x=a+this.x0,n.y=i+this.y0,n}function _1(n){var t,e,a,i,s,r,l,o,h;if(a=n.x-this.x0,i=n.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=C)t=k(a/this.a+this.long0),e=0;else{r=this.lat0+i/this.a,l=a*a/this.a/this.a+r*r,o=r;var u;for(s=ml;s;--s)if(u=Math.tan(o),h=-1*(r*(o*u+1)-o-.5*(o*o+l)*u)/((o-r)/u-1),o+=h,Math.abs(h)<=C){e=o;break}t=k(this.long0+Math.asin(a*Math.tan(o)/this.a)/Math.sin(e))}else if(Math.abs(i+this.ml0)<=C)e=0,t=k(this.long0+a/this.a);else{r=(this.ml0+i)/this.a,l=a*a/this.a/this.a+r*r,o=r;var c,_,f,d,m;for(s=ml;s;--s)if(m=this.e*Math.sin(o),c=Math.sqrt(1-m*m)*Math.tan(o),_=this.a*yt(this.e0,this.e1,this.e2,this.e3,o),f=this.e0-2*this.e1*Math.cos(2*o)+4*this.e2*Math.cos(4*o)-6*this.e3*Math.cos(6*o),d=_/this.a,h=(r*(c*d+1)-d-.5*c*(d*d+l))/(this.es*Math.sin(2*o)*(d*d+l-2*r*d)/(4*c)+(r-d)*(c*f-2/Math.sin(2*o))-f),o-=h,Math.abs(h)<=C){e=o;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(e),2))*Math.tan(e),t=k(this.long0+Math.asin(a*c/this.a)/Math.sin(e))}return n.x=t,n.y=e,n}var f1=["Polyconic","poly"];const d1={init:u1,forward:c1,inverse:_1,names:f1};function m1(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function g1(n){var t,e=n.x,a=n.y,i=a-this.lat0,s=e-this.long0,r=i/Zn*1e-5,l=s,o=1,h=0;for(t=1;t<=10;t++)o=o*r,h=h+this.A[t]*o;var u=h,c=l,_=1,f=0,d,m,g=0,p=0;for(t=1;t<=6;t++)d=_*u-f*c,m=f*u+_*c,_=d,f=m,g=g+this.B_re[t]*_-this.B_im[t]*f,p=p+this.B_im[t]*_+this.B_re[t]*f;return n.x=p*this.a+this.x0,n.y=g*this.a+this.y0,n}function p1(n){var t,e=n.x,a=n.y,i=e-this.x0,s=a-this.y0,r=s/this.a,l=i/this.a,o=1,h=0,u,c,_=0,f=0;for(t=1;t<=6;t++)u=o*r-h*l,c=h*r+o*l,o=u,h=c,_=_+this.C_re[t]*o-this.C_im[t]*h,f=f+this.C_im[t]*o+this.C_re[t]*h;for(var d=0;d<this.iterations;d++){var m=_,g=f,p,y,v=r,b=l;for(t=2;t<=6;t++)p=m*_-g*f,y=g*_+m*f,m=p,g=y,v=v+(t-1)*(this.B_re[t]*m-this.B_im[t]*g),b=b+(t-1)*(this.B_im[t]*m+this.B_re[t]*g);m=1,g=0;var x=this.B_re[1],M=this.B_im[1];for(t=2;t<=6;t++)p=m*_-g*f,y=g*_+m*f,m=p,g=y,x=x+t*(this.B_re[t]*m-this.B_im[t]*g),M=M+t*(this.B_im[t]*m+this.B_re[t]*g);var R=x*x+M*M;_=(v*x+b*M)/R,f=(b*x-v*M)/R}var w=_,I=f,L=1,O=0;for(t=1;t<=9;t++)L=L*w,O=O+this.D[t]*L;var T=this.lat0+O*Zn*1e5,G=this.long0+I;return n.x=G,n.y=T,n}var y1=["New_Zealand_Map_Grid","nzmg"];const b1={init:m1,forward:g1,inverse:p1,names:y1};function v1(){}function x1(n){var t=n.x,e=n.y,a=k(t-this.long0),i=this.x0+this.a*a,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+e/2.5))*1.25;return n.x=i,n.y=s,n}function M1(n){n.x-=this.x0,n.y-=this.y0;var t=k(this.long0+n.x/this.a),e=2.5*(Math.atan(Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=t,n.y=e,n}var w1=["Miller_Cylindrical","mill"];const E1={init:v1,forward:x1,inverse:M1,names:w1};var S1=20;function R1(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=zs(this.es)}function I1(n){var t,e,a=n.x,i=n.y;if(a=k(a-this.long0),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var s=this.n*Math.sin(i),r=S1;r;--r){var l=(this.m*i+Math.sin(i)-s)/(this.m+Math.cos(i));if(i-=l,Math.abs(l)<C)break}t=this.a*this.C_x*a*(this.m+Math.cos(i)),e=this.a*this.C_y*i}else{var o=Math.sin(i),h=Math.cos(i);e=this.a*En(i,o,h,this.en),t=this.a*a*h/Math.sqrt(1-this.es*o*o)}return n.x=t,n.y=e,n}function A1(n){var t,e,a,i;return n.x-=this.x0,a=n.x/this.a,n.y-=this.y0,t=n.y/this.a,this.sphere?(t/=this.C_y,a=a/(this.C_x*(this.m+Math.cos(t))),this.m?t=Re((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=Re(Math.sin(t)/this.n)),a=k(a+this.long0),t=Ce(t)):(t=Vs(n.y/this.a,this.es,this.en),i=Math.abs(t),i<S?(i=Math.sin(t),e=this.long0+n.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(t)),a=k(e)):i-C<S&&(a=this.long0)),n.x=a,n.y=t,n}var C1=["Sinusoidal","sinu"];const k1={init:R1,forward:I1,inverse:A1,names:C1};function L1(){}function T1(n){for(var t=n.x,e=n.y,a=k(t-this.long0),i=e,s=Math.PI*Math.sin(e);;){var r=-(i+Math.sin(i)-s)/(1+Math.cos(i));if(i+=r,Math.abs(r)<C)break}i/=2,Math.PI/2-Math.abs(e)<C&&(a=0);var l=.900316316158*this.a*a*Math.cos(i)+this.x0,o=1.4142135623731*this.a*Math.sin(i)+this.y0;return n.x=l,n.y=o,n}function O1(n){var t,e;n.x-=this.x0,n.y-=this.y0,e=n.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),t=Math.asin(e);var a=k(this.long0+n.x/(.900316316158*this.a*Math.cos(t)));a<-Math.PI&&(a=-Math.PI),a>Math.PI&&(a=Math.PI),e=(2*t+Math.sin(2*t))/Math.PI,Math.abs(e)>1&&(e=1);var i=Math.asin(e);return n.x=a,n.y=i,n}var D1=["Mollweide","moll"];const N1={init:L1,forward:T1,inverse:O1,names:D1};function P1(){Math.abs(this.lat1+this.lat2)<C||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ma(this.es),this.e1=wa(this.es),this.e2=Ea(this.es),this.e3=Sa(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=ne(this.e,this.sinphi,this.cosphi),this.ml1=yt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<C?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=ne(this.e,this.sinphi,this.cosphi),this.ml2=yt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=yt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function F1(n){var t=n.x,e=n.y,a;if(this.sphere)a=this.a*(this.g-e);else{var i=yt(this.e0,this.e1,this.e2,this.e3,e);a=this.a*(this.g-i)}var s=this.ns*k(t-this.long0),r=this.x0+a*Math.sin(s),l=this.y0+this.rh-a*Math.cos(s);return n.x=r,n.y=l,n}function B1(n){n.x-=this.x0,n.y=this.rh-n.y+this.y0;var t,e,a,i;this.ns>=0?(e=Math.sqrt(n.x*n.x+n.y*n.y),t=1):(e=-Math.sqrt(n.x*n.x+n.y*n.y),t=-1);var s=0;if(e!==0&&(s=Math.atan2(t*n.x,t*n.y)),this.sphere)return i=k(this.long0+s/this.ns),a=Ce(this.g-e/this.a),n.x=i,n.y=a,n;var r=this.g-e/this.a;return a=ui(r,this.e0,this.e1,this.e2,this.e3),i=k(this.long0+s/this.ns),n.x=i,n.y=a,n}var G1=["Equidistant_Conic","eqdc"];const U1={init:P1,forward:F1,inverse:B1,names:G1};function z1(){this.R=this.a}function V1(n){var t=n.x,e=n.y,a=k(t-this.long0),i,s;Math.abs(e)<=C&&(i=this.x0+this.R*a,s=this.y0);var r=Re(2*Math.abs(e/Math.PI));(Math.abs(a)<=C||Math.abs(Math.abs(e)-S)<=C)&&(i=this.x0,e>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*r):s=this.y0+Math.PI*this.R*-Math.tan(.5*r));var l=.5*Math.abs(Math.PI/a-a/Math.PI),o=l*l,h=Math.sin(r),u=Math.cos(r),c=u/(h+u-1),_=c*c,f=c*(2/h-1),d=f*f,m=Math.PI*this.R*(l*(c-d)+Math.sqrt(o*(c-d)*(c-d)-(d+o)*(_-d)))/(d+o);a<0&&(m=-m),i=this.x0+m;var g=o+c;return m=Math.PI*this.R*(f*g-l*Math.sqrt((d+o)*(o+1)-g*g))/(d+o),e>=0?s=this.y0+m:s=this.y0-m,n.x=i,n.y=s,n}function j1(n){var t,e,a,i,s,r,l,o,h,u,c,_,f;return n.x-=this.x0,n.y-=this.y0,c=Math.PI*this.R,a=n.x/c,i=n.y/c,s=a*a+i*i,r=-Math.abs(i)*(1+s),l=r-2*i*i+a*a,o=-2*r+1+2*i*i+s*s,f=i*i/o+(2*l*l*l/o/o/o-9*r*l/o/o)/27,h=(r-l*l/3/o)/o,u=2*Math.sqrt(-h/3),c=3*f/h/u,Math.abs(c)>1&&(c>=0?c=1:c=-1),_=Math.acos(c)/3,n.y>=0?e=(-u*Math.cos(_+Math.PI/3)-l/3/o)*Math.PI:e=-(-u*Math.cos(_+Math.PI/3)-l/3/o)*Math.PI,Math.abs(a)<C?t=this.long0:t=k(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(a*a-i*i)+s*s))/2/a),n.x=t,n.y=e,n}var H1=["Van_der_Grinten_I","VanDerGrinten","vandg"];const K1={init:z1,forward:V1,inverse:j1,names:H1};function q1(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function W1(n){var t=n.x,e=n.y,a=Math.sin(n.y),i=Math.cos(n.y),s=k(t-this.long0),r,l,o,h,u,c,_,f,d,m,g,p,y,v,b,x,M,R,w,I,L,O,T;return this.sphere?Math.abs(this.sin_p12-1)<=C?(n.x=this.x0+this.a*(S-e)*Math.sin(s),n.y=this.y0-this.a*(S-e)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=C?(n.x=this.x0+this.a*(S+e)*Math.sin(s),n.y=this.y0+this.a*(S+e)*Math.cos(s),n):(R=this.sin_p12*a+this.cos_p12*i*Math.cos(s),x=Math.acos(R),M=x?x/Math.sin(x):1,n.x=this.x0+this.a*M*i*Math.sin(s),n.y=this.y0+this.a*M*(this.cos_p12*a-this.sin_p12*i*Math.cos(s)),n):(r=Ma(this.es),l=wa(this.es),o=Ea(this.es),h=Sa(this.es),Math.abs(this.sin_p12-1)<=C?(u=this.a*yt(r,l,o,h,S),c=this.a*yt(r,l,o,h,e),n.x=this.x0+(u-c)*Math.sin(s),n.y=this.y0-(u-c)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=C?(u=this.a*yt(r,l,o,h,S),c=this.a*yt(r,l,o,h,e),n.x=this.x0+(u+c)*Math.sin(s),n.y=this.y0+(u+c)*Math.cos(s),n):(_=a/i,f=vn(this.a,this.e,this.sin_p12),d=vn(this.a,this.e,a),m=Math.atan((1-this.es)*_+this.es*f*this.sin_p12/(d*i)),g=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(m)-this.sin_p12*Math.cos(s)),g===0?w=Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):Math.abs(Math.abs(g)-Math.PI)<=C?w=-Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):w=Math.asin(Math.sin(s)*Math.cos(m)/Math.sin(g)),p=this.e*this.sin_p12/Math.sqrt(1-this.es),y=this.e*this.cos_p12*Math.cos(g)/Math.sqrt(1-this.es),v=p*y,b=y*y,I=w*w,L=I*w,O=L*w,T=O*w,x=f*w*(1-I*b*(1-b)/6+L/8*v*(1-2*b)+O/120*(b*(4-7*b)-3*p*p*(1-7*b))-T/48*v),n.x=this.x0+x*Math.sin(g),n.y=this.y0+x*Math.cos(g),n))}function X1(n){n.x-=this.x0,n.y-=this.y0;var t,e,a,i,s,r,l,o,h,u,c,_,f,d,m,g,p,y,v,b,x,M,R,w;return this.sphere?(t=Math.sqrt(n.x*n.x+n.y*n.y),t>2*S*this.a?void 0:(e=t/this.a,a=Math.sin(e),i=Math.cos(e),s=this.long0,Math.abs(t)<=C?r=this.lat0:(r=Re(i*this.sin_p12+n.y*a*this.cos_p12/t),l=Math.abs(this.lat0)-S,Math.abs(l)<=C?this.lat0>=0?s=k(this.long0+Math.atan2(n.x,-n.y)):s=k(this.long0-Math.atan2(-n.x,n.y)):s=k(this.long0+Math.atan2(n.x*a,t*this.cos_p12*i-n.y*this.sin_p12*a))),n.x=s,n.y=r,n)):(o=Ma(this.es),h=wa(this.es),u=Ea(this.es),c=Sa(this.es),Math.abs(this.sin_p12-1)<=C?(_=this.a*yt(o,h,u,c,S),t=Math.sqrt(n.x*n.x+n.y*n.y),f=_-t,r=ui(f/this.a,o,h,u,c),s=k(this.long0+Math.atan2(n.x,-1*n.y)),n.x=s,n.y=r,n):Math.abs(this.sin_p12+1)<=C?(_=this.a*yt(o,h,u,c,S),t=Math.sqrt(n.x*n.x+n.y*n.y),f=t-_,r=ui(f/this.a,o,h,u,c),s=k(this.long0+Math.atan2(n.x,n.y)),n.x=s,n.y=r,n):(t=Math.sqrt(n.x*n.x+n.y*n.y),g=Math.atan2(n.x,n.y),d=vn(this.a,this.e,this.sin_p12),p=Math.cos(g),y=this.e*this.cos_p12*p,v=-y*y/(1-this.es),b=3*this.es*(1-v)*this.sin_p12*this.cos_p12*p/(1-this.es),x=t/d,M=x-v*(1+v)*Math.pow(x,3)/6-b*(1+3*v)*Math.pow(x,4)/24,R=1-v*M*M/2-x*M*M*M/6,m=Math.asin(this.sin_p12*Math.cos(M)+this.cos_p12*Math.sin(M)*p),s=k(this.long0+Math.asin(Math.sin(g)*Math.sin(M)/Math.cos(m))),w=Math.sin(m),r=Math.atan2((w-this.es*R*this.sin_p12)*Math.tan(m),w*(1-this.es)),n.x=s,n.y=r,n))}var $1=["Azimuthal_Equidistant","aeqd"];const Y1={init:q1,forward:W1,inverse:X1,names:$1};function Z1(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function J1(n){var t,e,a,i,s,r,l,o,h=n.x,u=n.y;return a=k(h-this.long0),t=Math.sin(u),e=Math.cos(u),i=Math.cos(a),r=this.sin_p14*t+this.cos_p14*e*i,s=1,(r>0||Math.abs(r)<=C)&&(l=this.a*s*e*Math.sin(a),o=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*e*i)),n.x=l,n.y=o,n}function Q1(n){var t,e,a,i,s,r,l;return n.x-=this.x0,n.y-=this.y0,t=Math.sqrt(n.x*n.x+n.y*n.y),e=Re(t/this.a),a=Math.sin(e),i=Math.cos(e),r=this.long0,Math.abs(t)<=C?(l=this.lat0,n.x=r,n.y=l,n):(l=Re(i*this.sin_p14+n.y*a*this.cos_p14/t),s=Math.abs(this.lat0)-S,Math.abs(s)<=C?(this.lat0>=0?r=k(this.long0+Math.atan2(n.x,-n.y)):r=k(this.long0-Math.atan2(-n.x,n.y)),n.x=r,n.y=l,n):(r=k(this.long0+Math.atan2(n.x*a,t*this.cos_p14*i-n.y*this.sin_p14*a)),n.x=r,n.y=l,n))}var tg=["ortho"];const eg={init:Z1,forward:J1,inverse:Q1,names:tg};var tt={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},$={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function ng(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=S-X/2?this.face=tt.TOP:this.lat0<=-(S-X/2)?this.face=tt.BOTTOM:Math.abs(this.long0)<=X?this.face=tt.FRONT:Math.abs(this.long0)<=S+X?this.face=this.long0>0?tt.RIGHT:tt.LEFT:this.face=tt.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function ag(n){var t={x:0,y:0},e,a,i,s,r,l,o={value:0};if(n.x-=this.long0,this.es!==0?e=Math.atan(this.one_minus_f_squared*Math.tan(n.y)):e=n.y,a=n.x,this.face===tt.TOP)s=S-e,a>=X&&a<=S+X?(o.value=$.AREA_0,i=a-S):a>S+X||a<=-(S+X)?(o.value=$.AREA_1,i=a>0?a-st:a+st):a>-(S+X)&&a<=-X?(o.value=$.AREA_2,i=a+S):(o.value=$.AREA_3,i=a);else if(this.face===tt.BOTTOM)s=S+e,a>=X&&a<=S+X?(o.value=$.AREA_0,i=-a+S):a<X&&a>=-X?(o.value=$.AREA_1,i=-a):a<-X&&a>=-(S+X)?(o.value=$.AREA_2,i=-a-S):(o.value=$.AREA_3,i=a>0?-a+st:-a-st);else{var h,u,c,_,f,d,m;this.face===tt.RIGHT?a=fn(a,+S):this.face===tt.BACK?a=fn(a,3.14159265359):this.face===tt.LEFT&&(a=fn(a,-S)),_=Math.sin(e),f=Math.cos(e),d=Math.sin(a),m=Math.cos(a),h=f*m,u=f*d,c=_,this.face===tt.FRONT?(s=Math.acos(h),i=qa(s,c,u,o)):this.face===tt.RIGHT?(s=Math.acos(u),i=qa(s,c,-h,o)):this.face===tt.BACK?(s=Math.acos(-h),i=qa(s,c,-u,o)):this.face===tt.LEFT?(s=Math.acos(-u),i=qa(s,c,h,o)):(s=i=0,o.value=$.AREA_0)}return l=Math.atan(12/st*(i+Math.acos(Math.sin(i)*Math.cos(X))-S)),r=Math.sqrt((1-Math.cos(s))/(Math.cos(l)*Math.cos(l))/(1-Math.cos(Math.atan(1/Math.cos(i))))),o.value===$.AREA_1?l+=S:o.value===$.AREA_2?l+=st:o.value===$.AREA_3&&(l+=1.5*st),t.x=r*Math.cos(l),t.y=r*Math.sin(l),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,n.x=t.x,n.y=t.y,n}function ig(n){var t={lam:0,phi:0},e,a,i,s,r,l,o,h,u,c={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,a=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),e=Math.atan2(n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?c.value=$.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(c.value=$.AREA_1,e-=S):n.x<0&&-n.x>=Math.abs(n.y)?(c.value=$.AREA_2,e=e<0?e+st:e-st):(c.value=$.AREA_3,e+=S),u=st/12*Math.tan(e),r=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),l=Math.atan(r),i=Math.cos(e),s=Math.tan(a),o=1-i*i*s*s*(1-Math.cos(Math.atan(1/Math.cos(l)))),o<-1?o=-1:o>1&&(o=1),this.face===tt.TOP)h=Math.acos(o),t.phi=S-h,c.value===$.AREA_0?t.lam=l+S:c.value===$.AREA_1?t.lam=l<0?l+st:l-st:c.value===$.AREA_2?t.lam=l-S:t.lam=l;else if(this.face===tt.BOTTOM)h=Math.acos(o),t.phi=h-S,c.value===$.AREA_0?t.lam=-l+S:c.value===$.AREA_1?t.lam=-l:c.value===$.AREA_2?t.lam=-l-S:t.lam=l<0?-l-st:-l+st;else{var _,f,d;_=o,u=_*_,u>=1?d=0:d=Math.sqrt(1-u)*Math.sin(l),u+=d*d,u>=1?f=0:f=Math.sqrt(1-u),c.value===$.AREA_1?(u=f,f=-d,d=u):c.value===$.AREA_2?(f=-f,d=-d):c.value===$.AREA_3&&(u=f,f=d,d=-u),this.face===tt.RIGHT?(u=_,_=-f,f=u):this.face===tt.BACK?(_=-_,f=-f):this.face===tt.LEFT&&(u=_,_=f,f=-u),t.phi=Math.acos(-d)-S,t.lam=Math.atan2(f,_),this.face===tt.RIGHT?t.lam=fn(t.lam,-S):this.face===tt.BACK?t.lam=fn(t.lam,-3.14159265359):this.face===tt.LEFT&&(t.lam=fn(t.lam,+S))}if(this.es!==0){var m,g,p;m=t.phi<0?1:0,g=Math.tan(t.phi),p=this.b/Math.sqrt(g*g+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-p*p)/(this.one_minus_f*p)),m&&(t.phi=-t.phi)}return t.lam+=this.long0,n.x=t.lam,n.y=t.phi,n}function qa(n,t,e,a){var i;return n<C?(a.value=$.AREA_0,i=0):(i=Math.atan2(t,e),Math.abs(i)<=X?a.value=$.AREA_0:i>X&&i<=S+X?(a.value=$.AREA_1,i-=S):i>S+X||i<=-(S+X)?(a.value=$.AREA_2,i=i>=0?i-st:i+st):(a.value=$.AREA_3,i+=S)),i}function fn(n,t){var e=n+t;return e<-3.14159265359?e+=_a:e>3.14159265359&&(e-=_a),e}var sg=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const rg={init:ng,forward:ag,inverse:ig,names:sg};var us=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Kn=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],zo=.8487,Vo=1.3523,jo=te/5,lg=1/jo,hn=18,ci=function(n,t){return n[0]+t*(n[1]+t*(n[2]+t*n[3]))},og=function(n,t){return n[1]+t*(2*n[2]+t*3*n[3])};function hg(n,t,e,a){for(var i=t;a;--a){var s=n(i);if(i-=s,Math.abs(s)<e)break}return i}function ug(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function cg(n){var t=k(n.x-this.long0),e=Math.abs(n.y),a=Math.floor(e*jo);a<0?a=0:a>=hn&&(a=hn-1),e=te*(e-lg*a);var i={x:ci(us[a],e)*t,y:ci(Kn[a],e)};return n.y<0&&(i.y=-i.y),i.x=i.x*this.a*zo+this.x0,i.y=i.y*this.a*Vo+this.y0,i}function _g(n){var t={x:(n.x-this.x0)/(this.a*zo),y:Math.abs(n.y-this.y0)/(this.a*Vo)};if(t.y>=1)t.x/=us[hn][0],t.y=n.y<0?-S:S;else{var e=Math.floor(t.y*hn);for(e<0?e=0:e>=hn&&(e=hn-1);;)if(Kn[e][0]>t.y)--e;else if(Kn[e+1][0]<=t.y)++e;else break;var a=Kn[e],i=5*(t.y-a[0])/(Kn[e+1][0]-a[0]);i=hg(function(s){return(ci(a,s)-t.y)/og(a,s)},i,C,100),t.x/=ci(us[e],i),t.y=(5*e+i)*it,n.y<0&&(t.y=-t.y)}return t.x=k(t.x+this.long0),t}var fg=["Robinson","robin"];const dg={init:ug,forward:cg,inverse:_g,names:fg};function mg(){this.name="geocent"}function gg(n){var t=ko(n,this.es,this.a);return t}function pg(n){var t=Lo(n,this.es,this.a,this.b);return t}var yg=["Geocentric","geocentric","geocent","Geocent"];const bg={init:mg,forward:gg,inverse:pg,names:yg};var ct={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Dn={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function vg(){if(Object.keys(Dn).forEach((function(e){if(typeof this[e]>"u")this[e]=Dn[e].def;else{if(Dn[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);Dn[e].num&&(this[e]=parseFloat(this[e]))}Dn[e].degrees&&(this[e]=this[e]*it)}).bind(this)),Math.abs(Math.abs(this.lat0)-S)<C?this.mode=this.lat0<0?ct.S_POLE:ct.N_POLE:Math.abs(this.lat0)<C?this.mode=ct.EQUIT:(this.mode=ct.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var n=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(n),this.sw=Math.sin(n)}function xg(n){n.x-=this.long0;var t=Math.sin(n.y),e=Math.cos(n.y),a=Math.cos(n.x),i,s;switch(this.mode){case ct.OBLIQ:s=this.sinph0*t+this.cosph0*e*a;break;case ct.EQUIT:s=e*a;break;case ct.S_POLE:s=-t;break;case ct.N_POLE:s=t;break}switch(s=this.pn1/(this.p-s),i=s*e*Math.sin(n.x),this.mode){case ct.OBLIQ:s*=this.cosph0*t-this.sinph0*e*a;break;case ct.EQUIT:s*=t;break;case ct.N_POLE:s*=-(e*a);break;case ct.S_POLE:s*=e*a;break}var r,l;return r=s*this.cg+i*this.sg,l=1/(r*this.sw*this.h1+this.cw),i=(i*this.cg-s*this.sg)*this.cw*l,s=r*l,n.x=i*this.a,n.y=s*this.a,n}function Mg(n){n.x/=this.a,n.y/=this.a;var t={x:n.x,y:n.y},e,a,i;i=1/(this.pn1-n.y*this.sw),e=this.pn1*n.x*i,a=this.pn1*n.y*this.cw*i,n.x=e*this.cg+a*this.sg,n.y=a*this.cg-e*this.sg;var s=Et(n.x,n.y);if(Math.abs(s)<C)t.x=0,t.y=n.y;else{var r,l;switch(l=1-s*s*this.pfact,l=(this.p-Math.sqrt(l))/(this.pn1/s+s/this.pn1),r=Math.sqrt(1-l*l),this.mode){case ct.OBLIQ:t.y=Math.asin(r*this.sinph0+n.y*l*this.cosph0/s),n.y=(r-this.sinph0*Math.sin(t.y))*s,n.x*=l*this.cosph0;break;case ct.EQUIT:t.y=Math.asin(n.y*l/s),n.y=r*s,n.x*=l;break;case ct.N_POLE:t.y=Math.asin(r),n.y=-n.y;break;case ct.S_POLE:t.y=-Math.asin(r);break}t.x=Math.atan2(n.x,n.y)}return n.x=t.x+this.long0,n.y=t.y,n}var wg=["Tilted_Perspective","tpers"];const Eg={init:vg,forward:xg,inverse:Mg,names:wg};function Sg(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var n=1-this.es,t=1/n;this.radius_p=Math.sqrt(n),this.radius_p2=n,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Rg(n){var t=n.x,e=n.y,a,i,s,r;if(t=t-this.long0,this.shape==="ellipse"){e=Math.atan(this.radius_p2*Math.tan(e));var l=this.radius_p/Et(this.radius_p*Math.cos(e),Math.sin(e));if(i=l*Math.cos(t)*Math.cos(e),s=l*Math.sin(t)*Math.cos(e),r=l*Math.sin(e),(this.radius_g-i)*i-s*s-r*r*this.radius_p_inv2<0)return n.x=Number.NaN,n.y=Number.NaN,n;a=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/Et(r,a)),n.y=this.radius_g_1*Math.atan(r/a)):(n.x=this.radius_g_1*Math.atan(s/a),n.y=this.radius_g_1*Math.atan(r/Et(s,a)))}else this.shape==="sphere"&&(a=Math.cos(e),i=Math.cos(t)*a,s=Math.sin(t)*a,r=Math.sin(e),a=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/Et(r,a)),n.y=this.radius_g_1*Math.atan(r/a)):(n.x=this.radius_g_1*Math.atan(s/a),n.y=this.radius_g_1*Math.atan(r/Et(s,a))));return n.x=n.x*this.a,n.y=n.y*this.a,n}function Ig(n){var t=-1,e=0,a=0,i,s,r,l;if(n.x=n.x/this.a,n.y=n.y/this.a,this.shape==="ellipse"){this.flip_axis?(a=Math.tan(n.y/this.radius_g_1),e=Math.tan(n.x/this.radius_g_1)*Et(1,a)):(e=Math.tan(n.x/this.radius_g_1),a=Math.tan(n.y/this.radius_g_1)*Et(1,e));var o=a/this.radius_p;if(i=e*e+o*o+t*t,s=2*this.radius_g*t,r=s*s-4*i*this.C,r<0)return n.x=Number.NaN,n.y=Number.NaN,n;l=(-s-Math.sqrt(r))/(2*i),t=this.radius_g+l*t,e*=l,a*=l,n.x=Math.atan2(e,t),n.y=Math.atan(a*Math.cos(n.x)/t),n.y=Math.atan(this.radius_p_inv2*Math.tan(n.y))}else if(this.shape==="sphere"){if(this.flip_axis?(a=Math.tan(n.y/this.radius_g_1),e=Math.tan(n.x/this.radius_g_1)*Math.sqrt(1+a*a)):(e=Math.tan(n.x/this.radius_g_1),a=Math.tan(n.y/this.radius_g_1)*Math.sqrt(1+e*e)),i=e*e+a*a+t*t,s=2*this.radius_g*t,r=s*s-4*i*this.C,r<0)return n.x=Number.NaN,n.y=Number.NaN,n;l=(-s-Math.sqrt(r))/(2*i),t=this.radius_g+l*t,e*=l,a*=l,n.x=Math.atan2(e,t),n.y=Math.atan(a*Math.cos(n.x)/t)}return n.x=n.x+this.long0,n}var Ag=["Geostationary Satellite View","Geostationary_Satellite","geos"];const Cg={init:Sg,forward:Rg,inverse:Ig,names:Ag};var Jn=1.340264,Qn=-.081106,ta=893e-6,ea=.003796,_i=Math.sqrt(3)/2;function kg(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function Lg(n){var t=k(n.x-this.long0),e=n.y,a=Math.asin(_i*Math.sin(e)),i=a*a,s=i*i*i;return n.x=t*Math.cos(a)/(_i*(Jn+3*Qn*i+s*(7*ta+9*ea*i))),n.y=a*(Jn+Qn*i+s*(ta+ea*i)),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function Tg(n){n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a;var t=1e-9,e=12,a=n.y,i,s,r,l,o,h;for(h=0;h<e&&(i=a*a,s=i*i*i,r=a*(Jn+Qn*i+s*(ta+ea*i))-n.y,l=Jn+3*Qn*i+s*(7*ta+9*ea*i),a-=o=r/l,!(Math.abs(o)<t));++h);return i=a*a,s=i*i*i,n.x=_i*n.x*(Jn+3*Qn*i+s*(7*ta+9*ea*i))/Math.cos(a),n.y=Math.asin(Math.sin(a)/_i),n.x=k(n.x+this.long0),n}var Og=["eqearth","Equal Earth","Equal_Earth"];const Dg={init:kg,forward:Lg,inverse:Tg,names:Og};var ma=1e-10;function Ng(){var n;if(this.phi1=this.lat1,Math.abs(this.phi1)<ma)throw new Error;this.es?(this.en=zs(this.es),this.m1=En(this.phi1,this.am1=Math.sin(this.phi1),n=Math.cos(this.phi1),this.en),this.am1=n/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Fg,this.forward=Pg):(Math.abs(this.phi1)+ma>=S?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Gg,this.forward=Bg)}function Pg(n){var t=k(n.x-(this.long0||0)),e=n.y,a,i,s;return a=this.am1+this.m1-En(e,i=Math.sin(e),s=Math.cos(e),this.en),i=s*t/(a*Math.sqrt(1-this.es*i*i)),n.x=a*Math.sin(i),n.y=this.am1-a*Math.cos(i),n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function Fg(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var t,e,a,i;if(e=Et(n.x,n.y=this.am1-n.y),i=Vs(this.am1+this.m1-e,this.es,this.en),(t=Math.abs(i))<S)t=Math.sin(i),a=e*Math.atan2(n.x,n.y)*Math.sqrt(1-this.es*t*t)/Math.cos(i);else if(Math.abs(t-S)<=ma)a=0;else throw new Error;return n.x=k(a+(this.long0||0)),n.y=Ce(i),n}function Bg(n){var t=k(n.x-(this.long0||0)),e=n.y,a,i;return i=this.cphi1+this.phi1-e,Math.abs(i)>ma?(n.x=i*Math.sin(a=t*Math.cos(e)/i),n.y=this.cphi1-i*Math.cos(a)):n.x=n.y=0,n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function Gg(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var t,e,a=Et(n.x,n.y=this.cphi1-n.y);if(e=this.cphi1+this.phi1-a,Math.abs(e)>S)throw new Error;return Math.abs(Math.abs(e)-S)<=ma?t=0:t=a*Math.atan2(n.x,n.y)/Math.cos(e),n.x=k(t+(this.long0||0)),n.y=Ce(e),n}var Ug=["bonne","Bonne (Werner lat_1=90)"];const zg={init:Ng,names:Ug};function Vg(n){n.Proj.projections.add(Ja),n.Proj.projections.add(Qa),n.Proj.projections.add(Fd),n.Proj.projections.add(qd),n.Proj.projections.add(Jd),n.Proj.projections.add(am),n.Proj.projections.add(hm),n.Proj.projections.add(dm),n.Proj.projections.add(bm),n.Proj.projections.add(Em),n.Proj.projections.add(zm),n.Proj.projections.add(Wm),n.Proj.projections.add(Jm),n.Proj.projections.add(i1),n.Proj.projections.add(h1),n.Proj.projections.add(d1),n.Proj.projections.add(b1),n.Proj.projections.add(E1),n.Proj.projections.add(k1),n.Proj.projections.add(N1),n.Proj.projections.add(U1),n.Proj.projections.add(K1),n.Proj.projections.add(Y1),n.Proj.projections.add(eg),n.Proj.projections.add(rg),n.Proj.projections.add(dg),n.Proj.projections.add(bg),n.Proj.projections.add(Eg),n.Proj.projections.add(Cg),n.Proj.projections.add(Dg),n.Proj.projections.add(zg)}bt.defaultDatum="WGS84";bt.Proj=ee;bt.WGS84=new bt.Proj("WGS84");bt.Point=bn;bt.toPoint=To;bt.defs=mt;bt.nadgrid=Gf;bt.transform=hi;bt.mgrs=ed;bt.version="__VERSION__";Vg(bt);const gl=[[-1,-1],[0,-1],[-1,0],[1,0],[-1,1],[0,1]],pl=[[0,-1],[1,-1],[-1,0],[1,0],[0,1],[1,1]];class jg{constructor(t){this.width=t.width,this.height=t.height,this.size=t.size,this.locations=t.locations,this.bbox=t.bbox,this.board=Ll([]),this.center=[],this.gameSize=null,this.fieldCount=0,this.mineCount=0,this.minColor=t.minColor,this.maxColor=t.maxColor,this.minValue=t.minValue,this.maxValue=t.maxValue}getUncoveredAreaPercent(){let t=0;for(let e=0;e<this.height;e++)for(let a=0;a<this.width;a++)this.board[e][a].isRevealed&&t++;return t/this.fieldCount}revealAllTiles(){for(let t=0;t<this.height;t++)for(let e=0;e<this.width;e++){const a=this.board[t][e];a.isMine?a.isFlagged=!0:a.isRevealed=!0}}async fromGeoTIFF(t){try{const a=await(await Y0(t.geotiff.url)).getImage(),i=this.locations[0],{bbox:s}=this,r=bt(t.geotiff.projection,"EPSG:3857",[s[0],s[1]]),l=bt(t.geotiff.projection,"EPSG:3857",[s[2],s[3]]),o=l[0]-r[0],h=l[1]-r[1];this.gameSize=Math.round(o/this.size/1.75),this.width=this.size,this.height=Math.round(h/o*this.size*1.18);const[u,c]=a.getOrigin(),[_,f]=a.getResolution(a);let d=[Math.round((s[0]-u)/_),Math.round((s[1]-c)/f),Math.round((s[2]-u)/_),Math.round((s[3]-c)/f)];d=[Math.min(d[0],d[2]),Math.min(d[1],d[3]),Math.max(d[0],d[2]),Math.max(d[1],d[3])];let m=(await a.readRasters({window:d,width:this.width,height:this.height}))[0];m=m.reverse();const g=new Array(m.length);for(let b=0;b<this.height;b++)for(let x=0;x<this.width;x++){const M=m[b*this.width+(this.width-1-x)];g[b*this.width+x]=M}m=g;const p=[s[0],s[1]],y=bt(t.geotiff.projection,"EPSG:3857",p);this.center=[y[0]-1*this.gameSize,y[1]+.5*this.gameSize];let v=0;typeof i.isMineCondition=="number"&&(v=wh(m,i.isMineCondition));for(let b=0;b<this.height;b++){const x=[];for(let M=0;M<this.width;M++){const R=m[b*this.width+M];let w;typeof i.isMineCondition=="function"?w=!Number.isNaN(R)&&i.isMineCondition(R):typeof i.isMineCondition=="number"?w=!Number.isNaN(R)&&R>v:w=Math.round(Math.random()),x.push({isMine:w,adjacentMines:0,isRevealed:!1,isFlagged:!1,element:null,value:R})}this.board.push(x)}this.fieldCount=this.width*this.height;for(let b=0;b<this.height;b++)for(let x=0;x<this.width;x++)this.board[b][x].isMine&&this.mineCount++;for(let b=0;b<this.height;b++)for(let x=0;x<this.width;x++){const M=this.calculateAdjacentMines(x,b);this.board[b][x].adjacentMines=M}}catch(e){console.error("Error loading GeoTIFF data:",e)}}getNeighborCoordinates(t,e){return(e%2===0?gl:pl).map(([i,s])=>[t+i,e+s])}convertAxialToGameCoords(t,e){return{x:t+Math.floor(e/2),y:e}}convertGameCoordsToAxial(t,e){return[t-Math.floor(e/2),e]}calculateAdjacentMines(t,e){let a=0;const i=e%2===0?gl:pl;for(const[s,r]of i){const l=t+s,o=e+r;l>=0&&l<this.width&&o>=0&&o<this.height&&this.board[o]&&this.board[o][l].isMine&&a++}return a}revealTile(t,e){let a=[[t,e]];const i=this.get(t,e);return i?i.isRevealed||i.isFlagged?[]:(i.isRevealed=!0,i.adjacentMines>0&&!i.isMine||this.getNeighborCoordinates(t,e).forEach(([r,l])=>{this.isValidCoordinate(r,l)&&!this.board[l][r].isRevealed&&(!this.board[l][r].isMine&&this.board[l][r].adjacentMines===0?a=a.concat(this.revealTile(r,l)??[]):this.board[l][r].isMine||(this.board[l][r].isRevealed=!0,a.push([r,l])))}),a):null}isValidCoordinate(t,e){return!!(this.board[e]&&this.board[e][t])}isOutOfBounds(t,e){return!this.isValidCoordinate(t,e)}isMine(t,e){return this.board[e]&&this.board[e][t]&&this.board[e][t].isMine}get(t,e){return this.isOutOfBounds(t,e)?null:this.board[e][t]}}var qs=class extends xn{constructor(t){t=t||{},super(t),this.size_=t.size||8e4,this.origin_=t.origin||[0,0],this.layout_=this.layout[t.layout]||this.layout.pointy}setLayout(t){this.layout_=this.layout[t]||this.layout.pointy,this.changed()}getLayout(){return this.layout_[9]!=0?"pointy":"flat"}setOrigin(t){this.origin_=t,this.changed()}getOrigin(){return this.origin_}setSize(t){this.size_=t||8e4,this.changed()}getSize(){return this.size_}cube2hex(t){return[t[0],t[2]]}hex2cube(t){return[t[0],-t[0]-t[1],t[1]]}hex2offset(t){return this.layout_[9]?[t[0]+(t[1]-(t[1]&1))/2,t[1]]:[t[0],t[1]+(t[0]+(t[0]&1))/2]}offset2hex(t){return this.layout_[9]?[t[0]-(t[1]-(t[1]&1))/2,t[1]]:[t[0],t[1]-(t[0]+(t[0]&1))/2]}cube2offset(t){return this.hex2offset(this.cube2hex(t))}offset2cube(t){return this.hex2cube(this.offset2Hex(t))}cube_round(t){var e=Math.round(t[0]),a=Math.round(t[1]),i=Math.round(t[2]),s=Math.abs(e-t[0]),r=Math.abs(a-t[1]),l=Math.abs(i-t[2]);return s>r&&s>l?e=-a-i:r>l?a=-e-i:i=-e-a,[e,a,i]}hex_round(t){return this.cube2hex(this.cube_round(this.hex2cube(t)))}hex_corner(t,e,a){return[t[0]+e*this.layout_[8+2*(a%6)],t[1]+e*this.layout_[9+2*(a%6)]]}getHexagonAtCoord(t){return this.getHexagon(this.coord2hex(t))}getHexagon(t){for(var e=[],a=this.hex2coord(t),i=0;i<=7;i++)e.push(this.hex_corner(a,this.size_,i,this.layout_[8]));return e}hex2coord(t){return[this.origin_[0]+this.size_*(this.layout_[0]*t[0]+this.layout_[1]*t[1]),this.origin_[1]+this.size_*(this.layout_[2]*t[0]+this.layout_[3]*t[1])]}coord2hex(t){var e=[(t[0]-this.origin_[0])/this.size_,(t[1]-this.origin_[1])/this.size_],a=this.layout_[4]*e[0]+this.layout_[5]*e[1],i=this.layout_[6]*e[0]+this.layout_[7]*e[1];return this.hex_round([a,i])}cube_distance(t,e){return Math.max(Math.abs(t[0]-e[0]),Math.abs(t[1]-e[1]),Math.abs(t[2]-e[2]))}lerp(t,e,a){return t+(e-t)*a}cube_lerp(t,e,a){return[this.lerp(t[0]+1e-6,e[0],a),this.lerp(t[1]+1e-6,e[1],a),this.lerp(t[2]+1e-6,e[2],a)]}cube_line(t,e){var a=this.cube_distance(t,e);if(!a)return[t];for(var i=[],s=0;s<=a;s++)i.push(this.cube_round(this.cube_lerp(t,e,s/a)));return i}hex_neighbors(t,e){if(e!==void 0)return[t[0]+this.neighbors.hex[e%6][0],t[1]+this.neighbors.hex[e%6][1]];var a=[];for(e=0;e<6;e++)a.push([t[0]+this.neighbors.hex[e][0],t[1]+this.neighbors.hex[e][1]]);return a}cube_neighbors(t,e){if(e!==void 0)return[t[0]+this.neighbors.cube[e%6][0],t[1]+this.neighbors.cube[e%6][1],t[2]+this.neighbors.cube[e%6][2]];var a=[];for(e=0;e<6;e++)a.push([t[0]+this.neighbors.cube[e][0],t[1]+this.neighbors.cube[e][1],t[2]+this.neighbors.cube[e][2]]);for(e=0;e<6;e++)a[e]=this.cube2hex(a[e]);return a}};qs.prototype.layout={pointy:[Math.sqrt(3),Math.sqrt(3)/2,0,3/2,Math.sqrt(3)/3,-1/3,0,2/3,Math.cos(Math.PI/180*(60*0+30)),Math.sin(Math.PI/180*(60*0+30)),Math.cos(Math.PI/180*(60*1+30)),Math.sin(Math.PI/180*(60*1+30)),Math.cos(Math.PI/180*(60*2+30)),Math.sin(Math.PI/180*(60*2+30)),Math.cos(Math.PI/180*(60*3+30)),Math.sin(Math.PI/180*(60*3+30)),Math.cos(Math.PI/180*(60*4+30)),Math.sin(Math.PI/180*(60*4+30)),Math.cos(Math.PI/180*(60*5+30)),Math.sin(Math.PI/180*(60*5+30))],flat:[3/2,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,Math.cos(Math.PI/180*(60*0)),Math.sin(Math.PI/180*(60*0)),Math.cos(Math.PI/180*(60*1)),Math.sin(Math.PI/180*(60*1)),Math.cos(Math.PI/180*(60*2)),Math.sin(Math.PI/180*(60*2)),Math.cos(Math.PI/180*(60*3)),Math.sin(Math.PI/180*(60*3)),Math.cos(Math.PI/180*(60*4)),Math.sin(Math.PI/180*(60*4)),Math.cos(Math.PI/180*(60*5)),Math.sin(Math.PI/180*(60*5))]};qs.prototype.neighbors={cube:[[1,-1,0],[1,0,-1],[0,1,-1],[-1,1,0],[-1,0,1],[0,-1,1]],hex:[[1,0],[1,-1],[0,-1],[-1,0],[-1,1],[0,1]]};function Ie(n,t,e={}){const a={type:"Feature"};return(e.id===0||e.id)&&(a.id=e.id),e.bbox&&(a.bbox=e.bbox),a.properties=t||{},a.geometry=n,a}function Hg(n,t,e={}){if(!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!yl(n[0])||!yl(n[1]))throw new Error("coordinates must contain numbers");return Ie({type:"Point",coordinates:n},t,e)}function Kg(n,t,e={}){for(const i of n){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return Ie({type:"Polygon",coordinates:n},t,e)}function qg(n,t,e={}){if(n.length<2)throw new Error("coordinates must be an array of two or more positions");return Ie({type:"LineString",coordinates:n},t,e)}function cs(n,t={}){const e={type:"FeatureCollection"};return t.id&&(e.id=t.id),t.bbox&&(e.bbox=t.bbox),e.features=n,e}function Wg(n,t,e={}){return Ie({type:"MultiLineString",coordinates:n},t,e)}function yl(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function Xg(n,t={}){const e=Number(n[0]),a=Number(n[1]),i=Number(n[2]),s=Number(n[3]);if(n.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");const r=[e,a];return Kg([[r,[i,a],[i,s],[e,s],r]],t.properties,{bbox:n,id:t.id})}var $g=Xg;const fe=11102230246251565e-32,ht=134217729,Yg=(3+8*fe)*fe;function Yi(n,t,e,a,i){let s,r,l,o,h=t[0],u=a[0],c=0,_=0;u>h==u>-h?(s=h,h=t[++c]):(s=u,u=a[++_]);let f=0;if(c<n&&_<e)for(u>h==u>-h?(r=h+s,l=s-(r-h),h=t[++c]):(r=u+s,l=s-(r-u),u=a[++_]),s=r,l!==0&&(i[f++]=l);c<n&&_<e;)u>h==u>-h?(r=s+h,o=r-s,l=s-(r-o)+(h-o),h=t[++c]):(r=s+u,o=r-s,l=s-(r-o)+(u-o),u=a[++_]),s=r,l!==0&&(i[f++]=l);for(;c<n;)r=s+h,o=r-s,l=s-(r-o)+(h-o),h=t[++c],s=r,l!==0&&(i[f++]=l);for(;_<e;)r=s+u,o=r-s,l=s-(r-o)+(u-o),u=a[++_],s=r,l!==0&&(i[f++]=l);return(s!==0||f===0)&&(i[f++]=s),f}function Zg(n,t){let e=t[0];for(let a=1;a<n;a++)e+=t[a];return e}function Ra(n){return new Float64Array(n)}const Jg=(3+16*fe)*fe,Qg=(2+12*fe)*fe,t3=(9+64*fe)*fe*fe,Je=Ra(4),bl=Ra(8),vl=Ra(12),xl=Ra(16),dt=Ra(4);function e3(n,t,e,a,i,s,r){let l,o,h,u,c,_,f,d,m,g,p,y,v,b,x,M,R,w;const I=n-i,L=e-i,O=t-s,T=a-s;b=I*T,_=ht*I,f=_-(_-I),d=I-f,_=ht*T,m=_-(_-T),g=T-m,x=d*g-(b-f*m-d*m-f*g),M=O*L,_=ht*O,f=_-(_-O),d=O-f,_=ht*L,m=_-(_-L),g=L-m,R=d*g-(M-f*m-d*m-f*g),p=x-R,c=x-p,Je[0]=x-(p+c)+(c-R),y=b+p,c=y-b,v=b-(y-c)+(p-c),p=v-M,c=v-p,Je[1]=v-(p+c)+(c-M),w=y+p,c=w-y,Je[2]=y-(w-c)+(p-c),Je[3]=w;let G=Zg(4,Je),N=Qg*r;if(G>=N||-G>=N||(c=n-I,l=n-(I+c)+(c-i),c=e-L,h=e-(L+c)+(c-i),c=t-O,o=t-(O+c)+(c-s),c=a-T,u=a-(T+c)+(c-s),l===0&&o===0&&h===0&&u===0)||(N=t3*r+Yg*Math.abs(G),G+=I*u+T*l-(O*h+L*o),G>=N||-G>=N))return G;b=l*T,_=ht*l,f=_-(_-l),d=l-f,_=ht*T,m=_-(_-T),g=T-m,x=d*g-(b-f*m-d*m-f*g),M=o*L,_=ht*o,f=_-(_-o),d=o-f,_=ht*L,m=_-(_-L),g=L-m,R=d*g-(M-f*m-d*m-f*g),p=x-R,c=x-p,dt[0]=x-(p+c)+(c-R),y=b+p,c=y-b,v=b-(y-c)+(p-c),p=v-M,c=v-p,dt[1]=v-(p+c)+(c-M),w=y+p,c=w-y,dt[2]=y-(w-c)+(p-c),dt[3]=w;const Y=Yi(4,Je,4,dt,bl);b=I*u,_=ht*I,f=_-(_-I),d=I-f,_=ht*u,m=_-(_-u),g=u-m,x=d*g-(b-f*m-d*m-f*g),M=O*h,_=ht*O,f=_-(_-O),d=O-f,_=ht*h,m=_-(_-h),g=h-m,R=d*g-(M-f*m-d*m-f*g),p=x-R,c=x-p,dt[0]=x-(p+c)+(c-R),y=b+p,c=y-b,v=b-(y-c)+(p-c),p=v-M,c=v-p,dt[1]=v-(p+c)+(c-M),w=y+p,c=w-y,dt[2]=y-(w-c)+(p-c),dt[3]=w;const B=Yi(Y,bl,4,dt,vl);b=l*u,_=ht*l,f=_-(_-l),d=l-f,_=ht*u,m=_-(_-u),g=u-m,x=d*g-(b-f*m-d*m-f*g),M=o*h,_=ht*o,f=_-(_-o),d=o-f,_=ht*h,m=_-(_-h),g=h-m,R=d*g-(M-f*m-d*m-f*g),p=x-R,c=x-p,dt[0]=x-(p+c)+(c-R),y=b+p,c=y-b,v=b-(y-c)+(p-c),p=v-M,c=v-p,dt[1]=v-(p+c)+(c-M),w=y+p,c=w-y,dt[2]=y-(w-c)+(p-c),dt[3]=w;const H=Yi(B,vl,4,dt,xl);return xl[H-1]}function n3(n,t,e,a,i,s){const r=(t-s)*(e-i),l=(n-i)*(a-s),o=r-l,h=Math.abs(r+l);return Math.abs(o)>=Jg*h?o:-e3(n,t,e,a,i,s,h)}function a3(n,t){var e,a,i=0,s,r,l,o,h,u,c,_=n[0],f=n[1],d=t.length;for(e=0;e<d;e++){a=0;var m=t[e],g=m.length-1;if(u=m[0],u[0]!==m[g][0]&&u[1]!==m[g][1])throw new Error("First and last coordinates in a ring must be the same");for(r=u[0]-_,l=u[1]-f,a;a<g;a++){if(c=m[a+1],o=c[0]-_,h=c[1]-f,l===0&&h===0){if(o<=0&&r>=0||r<=0&&o>=0)return 0}else if(h>=0&&l<=0||h<=0&&l>=0){if(s=n3(r,o,l,h,0,0),s===0)return 0;(s>0&&h>0&&l<=0||s<0&&h<=0&&l>0)&&i++}u=c,l=h,r=o}}return i%2!==0}function i3(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return[...n.geometry.coordinates];if(n.type==="Point")return[...n.coordinates]}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return[...n];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ei(n){return n.type==="Feature"?n.geometry:n}function ga(n,t,e={}){if(!n)throw new Error("point is required");if(!t)throw new Error("polygon is required");const a=i3(n),i=Ei(t),s=i.type,r=t.bbox;let l=i.coordinates;if(r&&s3(a,r)===!1)return!1;s==="Polygon"&&(l=[l]);let o=!1;for(var h=0;h<l.length;++h){const u=a3(a,l[h]);if(u===0)return!e.ignoreBoundary;u&&(o=!0)}return o}function s3(n,t){return t[0]<=n[0]&&t[1]<=n[1]&&t[2]>=n[0]&&t[3]>=n[1]}class Ho{constructor(t=[],e=r3){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:a}=this,i=e[t];for(;t>0;){const s=t-1>>1,r=e[s];if(a(i,r)>=0)break;e[t]=r,t=s}e[t]=i}_down(t){const{data:e,compare:a}=this,i=this.length>>1,s=e[t];for(;t<i;){let r=(t<<1)+1,l=e[r];const o=r+1;if(o<this.length&&a(e[o],l)<0&&(r=o,l=e[o]),a(l,s)>=0)break;e[t]=l,t=r}e[t]=s}}function r3(n,t){return n<t?-1:n>t?1:0}function Ko(n,t){return n.p.x>t.p.x?1:n.p.x<t.p.x?-1:n.p.y!==t.p.y?n.p.y>t.p.y?1:-1:1}function l3(n,t){return n.rightSweepEvent.p.x>t.rightSweepEvent.p.x?1:n.rightSweepEvent.p.x<t.rightSweepEvent.p.x?-1:n.rightSweepEvent.p.y!==t.rightSweepEvent.p.y?n.rightSweepEvent.p.y<t.rightSweepEvent.p.y?1:-1:1}let Ml=class{constructor(t,e,a,i){this.p={x:t[0],y:t[1]},this.featureId=e,this.ringId=a,this.eventId=i,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(t){return this.p.x===t.p.x&&this.p.y===t.p.y}};function o3(n,t){if(n.type==="FeatureCollection"){const e=n.features;for(let a=0;a<e.length;a++)wl(e[a],t)}else wl(n,t)}let Wa=0,Xa=0,$a=0;function wl(n,t){const e=n.type==="Feature"?n.geometry:n;let a=e.coordinates;(e.type==="Polygon"||e.type==="MultiLineString")&&(a=[a]),e.type==="LineString"&&(a=[[a]]);for(let i=0;i<a.length;i++)for(let s=0;s<a[i].length;s++){let r=a[i][s][0],l=null;Xa=Xa+1;for(let o=0;o<a[i][s].length-1;o++){l=a[i][s][o+1];const h=new Ml(r,Wa,Xa,$a),u=new Ml(l,Wa,Xa,$a+1);h.otherEvent=u,u.otherEvent=h,Ko(h,u)>0?(u.isLeftEndpoint=!0,h.isLeftEndpoint=!1):(h.isLeftEndpoint=!0,u.isLeftEndpoint=!1),t.push(h),t.push(u),r=l,$a=$a+1}}Wa=Wa+1}class h3{constructor(t){this.leftSweepEvent=t,this.rightSweepEvent=t.otherEvent}}function u3(n,t){if(n===null||t===null||n.leftSweepEvent.ringId===t.leftSweepEvent.ringId&&(n.rightSweepEvent.isSamePoint(t.leftSweepEvent)||n.rightSweepEvent.isSamePoint(t.leftSweepEvent)||n.rightSweepEvent.isSamePoint(t.rightSweepEvent)||n.leftSweepEvent.isSamePoint(t.leftSweepEvent)||n.leftSweepEvent.isSamePoint(t.rightSweepEvent)))return!1;const e=n.leftSweepEvent.p.x,a=n.leftSweepEvent.p.y,i=n.rightSweepEvent.p.x,s=n.rightSweepEvent.p.y,r=t.leftSweepEvent.p.x,l=t.leftSweepEvent.p.y,o=t.rightSweepEvent.p.x,h=t.rightSweepEvent.p.y,u=(h-l)*(i-e)-(o-r)*(s-a),c=(o-r)*(a-l)-(h-l)*(e-r),_=(i-e)*(a-l)-(s-a)*(e-r);if(u===0)return!1;const f=c/u,d=_/u;if(f>=0&&f<=1&&d>=0&&d<=1){const m=e+f*(i-e),g=a+f*(s-a);return[m,g]}return!1}function c3(n,t){t=t||!1;const e=[],a=new Ho([],l3);for(;n.length;){const i=n.pop();if(i.isLeftEndpoint){const s=new h3(i);for(let r=0;r<a.data.length;r++){const l=a.data[r];if(t&&l.leftSweepEvent.featureId===i.featureId)continue;const o=u3(s,l);o!==!1&&e.push(o)}a.push(s)}else i.isLeftEndpoint===!1&&a.pop()}return e}function _3(n,t){const e=new Ho([],Ko);return o3(n,e),c3(e,t)}var f3=_3;function Ws(n,t,e={}){const{removeDuplicates:a=!0,ignoreSelfIntersections:i=!0}=e;let s=[];n.type==="FeatureCollection"?s=s.concat(n.features):n.type==="Feature"?s.push(n):(n.type==="LineString"||n.type==="Polygon"||n.type==="MultiLineString"||n.type==="MultiPolygon")&&s.push(Ie(n)),t.type==="FeatureCollection"?s=s.concat(t.features):t.type==="Feature"?s.push(t):(t.type==="LineString"||t.type==="Polygon"||t.type==="MultiLineString"||t.type==="MultiPolygon")&&s.push(Ie(t));const r=f3(cs(s),i);let l=[];if(a){const o={};r.forEach(h=>{const u=h.join(",");o[u]||(o[u]=!0,l.push(h))})}else l=r;return cs(l.map(o=>Hg(o)))}function d3(n,t){var e,a,i,s,r,l,o,h,u,c,_=0,f=n.type==="FeatureCollection",d=n.type==="Feature",m=f?n.features.length:1;for(e=0;e<m;e++){for(l=f?n.features[e].geometry:d?n.geometry:n,h=f?n.features[e].properties:d?n.properties:{},u=f?n.features[e].bbox:d?n.bbox:void 0,c=f?n.features[e].id:d?n.id:void 0,o=l?l.type==="GeometryCollection":!1,r=o?l.geometries.length:1,i=0;i<r;i++){if(s=o?l.geometries[i]:l,s===null){if(t(null,_,h,u,c)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,_,h,u,c)===!1)return!1;break}case"GeometryCollection":{for(a=0;a<s.geometries.length;a++)if(t(s.geometries[a],_,h,u,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}_++}}function fi(n,t){d3(n,function(e,a,i,s,r){var l=e===null?null:e.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return t(Ie(e,i,{bbox:s,id:r}),a,0)===!1?!1:void 0}var o;switch(l){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon";break}for(var h=0;h<e.coordinates.length;h++){var u=e.coordinates[h],c={type:o,coordinates:u};if(t(Ie(c,i),a,h)===!1)return!1}})}function _s(n,t={}){const e=Ei(n);switch(!t.properties&&n.type==="Feature"&&(t.properties=n.properties),e.type){case"Polygon":return m3(e,t);case"MultiPolygon":return g3(e,t);default:throw new Error("invalid poly")}}function m3(n,t={}){const a=Ei(n).coordinates,i=t.properties?t.properties:n.type==="Feature"?n.properties:{};return qo(a,i)}function g3(n,t={}){const a=Ei(n).coordinates,i=t.properties?t.properties:n.type==="Feature"?n.properties:{},s=[];return a.forEach(r=>{s.push(qo(r,i))}),cs(s)}function qo(n,t){return n.length>1?Wg(n,t):qg(n[0],t)}function p3(n,t,{ignoreSelfIntersections:e=!0}={ignoreSelfIntersections:!0}){let a=!0;return fi(n,i=>{fi(t,s=>{if(a===!1)return!1;a=y3(i.geometry,s.geometry,e)})}),a}function y3(n,t,e){switch(n.type){case"Point":switch(t.type){case"Point":return!M3(n.coordinates,t.coordinates);case"LineString":return!El(t,n);case"Polygon":return!ga(n,t)}break;case"LineString":switch(t.type){case"Point":return!El(n,t);case"LineString":return!b3(n,t,e);case"Polygon":return!Sl(t,n,e)}break;case"Polygon":switch(t.type){case"Point":return!ga(t,n);case"LineString":return!Sl(n,t,e);case"Polygon":return!v3(t,n,e)}}return!1}function El(n,t){for(let e=0;e<n.coordinates.length-1;e++)if(x3(n.coordinates[e],n.coordinates[e+1],t.coordinates))return!0;return!1}function b3(n,t,e){return Ws(n,t,{ignoreSelfIntersections:e}).features.length>0}function Sl(n,t,e){for(const i of t.coordinates)if(ga(i,n))return!0;return Ws(t,_s(n),{ignoreSelfIntersections:e}).features.length>0}function v3(n,t,e){for(const i of n.coordinates[0])if(ga(i,t))return!0;for(const i of t.coordinates[0])if(ga(i,n))return!0;return Ws(_s(n),_s(t),{ignoreSelfIntersections:e}).features.length>0}function x3(n,t,e){const a=e[0]-n[0],i=e[1]-n[1],s=t[0]-n[0],r=t[1]-n[1];return a*r-i*s!==0?!1:Math.abs(s)>=Math.abs(r)?s>0?n[0]<=e[0]&&e[0]<=t[0]:t[0]<=e[0]&&e[0]<=n[0]:r>0?n[1]<=e[1]&&e[1]<=t[1]:t[1]<=e[1]&&e[1]<=n[1]}function M3(n,t){return n[0]===t[0]&&n[1]===t[1]}function w3(n,t,{ignoreSelfIntersections:e=!0}={}){let a=!1;return fi(n,i=>{fi(t,s=>{if(a===!0)return!0;a=!p3(i.geometry,s.geometry,{ignoreSelfIntersections:e})})}),a}var E3=w3;function S3(n){let t=1779033703,e=3144134277,a=1013904242,i=2773480762;for(let s=0,r;s<n.length;s++)r=n.charCodeAt(s),t=e^Math.imul(t^r,597399067),e=a^Math.imul(e^r,2869860233),a=i^Math.imul(a^r,951274213),i=t^Math.imul(i^r,2716044179);return t=Math.imul(a^t>>>18,597399067),e=Math.imul(i^e>>>22,2869860233),a=Math.imul(t^a>>>17,951274213),i=Math.imul(e^i>>>19,2716044179),t^=e^a^i,e^=t,a^=t,i^=t,[t>>>0,e>>>0,a>>>0,i>>>0]}function R3(n){return()=>{n|=0,n=n+2654435769|0;let t=n^n>>>16;return t=Math.imul(t,569420461),t^=t>>>15,t=Math.imul(t,1935289751),t^=t>>>15,(t>>>0)/4294967296}}function Rl(n,t,e){let a;if(e===void 0)a=Math.random;else{const p=S3(e);a=R3(p[0])}const i=t/1.18,[s,r,l,o]=n,h=o-i,u=l-t,c=h-r,_=u-s,f=r+a()*c,d=s+a()*_,m=f+i,g=d+t;return[d,f,g,m]}const Il=n=>({grid:new qs({size:n.gameSize,origin:n.center})});function I3(n,t=1,e=8,a={r:255,g:255,b:255,a:0},i={r:0,g:0,b:0,a:1}){let s;if(Number.isNaN(n))return"rgba(0, 0, 0, 0)";s=n,s=Math.max(t,Math.min(e,s));const r=(s-t)/(e-t),l=Math.round(i.r*r+a.r*(1-r)),o=Math.round(i.g*r+a.g*(1-r)),h=Math.round(i.b*r+a.b*(1-r)),u=i.a*r+a.a*(1-r);return`rgba(${l}, ${o}, ${h}, ${u})`}const Wo=(n,t,e,a,i)=>{let s;return n.isRevealed===!0?n.isMine?s=new Ut({stroke:new Bt({color:"#000",width:1}),fill:new Pt({color:"red"}),text:new Be({text:"🌸",font:"16px Calibri,sans-serif",fill:new Pt({color:"#fff"}),stroke:new Bt({color:"#000",width:3})})}):s=new Ut({stroke:new Bt({color:"#000",width:1}),fill:new Pt({color:I3(n.value,t,e,a,i)}),text:new Be({text:n.adjacentMines?n.adjacentMines.toString():"0",font:"16px Calibri,sans-serif",fill:new Pt({color:"#000"}),stroke:new Bt({color:"#fff",width:3})})}):n.isFlagged?s=new Ut({stroke:new Bt({color:"#000",width:1}),fill:new Pt({color:"blue"}),text:new Be({text:"⚑",font:"16px Calibri,sans-serif",fill:new Pt({color:"#fff"}),stroke:new Bt({color:"#000",width:3})})}):s=new Ut({stroke:new Bt({color:"#000",width:.5}),fill:new Pt({color:"#AAAAAA4D"}),text:new Be({text:"",font:"16px Calibri,sans-serif"})}),s},Xs=(n,t,e,a,i,s)=>{const[r,l]=s.convertGameCoordsToAxial(n+1,t),o=e.getHexagon([r,l]),h=new Ol(new Dl([o])),u=s.get(n,t),c=`tile-${n}-${t}`;h.setId(c);const _=a.getFeatureById(c);_&&a.removeFeature(_),h.setStyle(Wo(u,s.minValue,s.maxValue,s.minColor,s.maxColor)),a.addFeature(h),i.changed()},A3=(n,t,e,a)=>{e.clear();for(let i=0;i<n.height;i++)for(let s=0;s<n.width;s++)Xs(s,i,t,e,a,n);a.changed()},C3=(n,t,e,a,i)=>{n.stopPropagation(),n.preventDefault();let s=!1;const{coordinate:r}=n,[l,o]=e.coord2hex(r),h=t.convertAxialToGameCoords(l,o),[u,c]=[h.x-1,h.y],_=t.revealTile(u,c);if(_){for(const[f,d]of _)s=s||t.get(f,d).isMine,i(f,d,e,a,t);if(s){document.dispatchEvent(new Event("minesweeper:gameover")),t.revealAllTiles();for(let f=0;f<(t.height??NaN);f++)for(let d=0;d<t.width;d++)i(d,f,e,a,t)}else document.dispatchEvent(new Event("minesweeper:continue"))}},k3=(n,t,e,a,i)=>{n.stopPropagation(),n.preventDefault();const{coordinate:s}=n,[r,l]=e.coord2hex(s),o=t.convertAxialToGameCoords(r,l),[h,u]=[o.x-1,o.y],c=t.get(h,u);c&&(c.isFlagged=!c.isFlagged,Xs(h,u,e,a,i,t)),document.dispatchEvent(new Event("minesweeper:continue"))},L3=(n,t,e)=>{if(n)for(let a=0;a<n.height;a++){let i=(a%2!==0)*1-a/2;a%2===0?i+=1:i+=.5;for(let s=0;s<n.width;s++){const r=n.board[a][s],l=t.getHexagon([s+i,a]),o=new Ol(new Dl([l])),h=Wo(r,n.minValue,n.maxValue,n.minColor,n.maxColor);o.setStyle(h),e.addFeature(o)}}},Al=async(n,t)=>{const e=$g(n);return t.features.filter(i=>E3(e.geometry,i))};class T3{constructor(t,e){this.vectorSource=new Ju,this.vectorLayer=new M_({source:this.vectorSource,title:"Minesweep game board"}),this.map=t,this.options=e,this.game=new jg(e);const a=t.getLayers().getArray().find(i=>i.get("id")==="AnalysisGroup");a&&a.getLayers().push(this.vectorLayer),this.setupGame(),this.clickEventHandlers=[],this.contextmenuEventHandlers=[]}async setupGame(){await this.game.fromGeoTIFF(this.options);const t=Il(this.game);this.grid=t.grid,this.drawGameBoard(),this.addEventListeners(),this.updateAllTiles()}get mineCount(){return this.game.board.reduce((t,e)=>[...t,...e],[]).reduce((t,e)=>e.isMine?t+1:t,0)}get flagCount(){return this.game.board.reduce((t,e)=>[...t,...e],[]).reduce((t,e)=>e.isFlagged?t+1:t,0)}get coveredMineCount(){return this.game.board.reduce((t,e)=>[...t,...e],[]).reduce((t,e)=>e.isMine&&!e.isRevealed&&!e.isFlagged?t+1:t,0)}get isGameCompleted(){return this.coveredMineCount===0}revealAllTiles(){this.game.revealAllTiles(),this.updateAllTiles(),document.dispatchEvent(new Event("minesweeper:win"))}setupGrid(){return Il(this.game)}drawGameBoard(){return L3(this.game,this.grid,this.vectorSource)}addEventListeners(){const t=a=>C3(a,this.game,this.grid,this.vectorSource,this.updateTile.bind(this));this.clickEventHandlers.push(t);const e=a=>k3(a,this.game,this.grid,this.vectorSource,this.vectorLayer);this.contextmenuEventHandlers.push(e),this.map.on("click",t),this.map.on("contextmenu",e)}removeEventListeners(){this.clickEventHandlers.forEach(t=>{this.map.un("click",t)}),this.contextmenuEventHandlers.forEach(t=>{this.map.un("contextmenu",t)})}updateTile(t,e){return Xs(t,e,this.grid,this.vectorSource,this.vectorLayer,this.game)}updateAllTiles(){return A3(this.game,this.grid,this.vectorSource,this.vectorLayer)}}const O3=JSON.parse(`[{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-51.657797,4.156232],[-51.823343,4.565768],[-52.882141,5.409851],[-53.618453,5.646529],[-53.958045,5.756548],[-54.478633,4.896756],[-54.399542,4.212611],[-54.006931,3.620038],[-54.181726,3.18978],[-54.269705,2.732392],[-54.524754,2.311849],[-54.088063,2.105557],[-53.778521,2.376703],[-53.554839,2.334897],[-53.418465,2.053389],[-52.939657,2.124858],[-52.556425,2.504705],[-52.249338,3.241094],[-51.657797,4.156232]]],[[[6.18632,49.463803],[5.897759,49.442667],[5.674052,49.529484],[4.799222,49.985373],[4.286023,49.907497],[3.588184,50.378992],[3.123252,50.780363],[2.658422,50.796848],[2.513573,51.148506],[1.639001,50.946606],[1.338761,50.127173],[-0.989469,49.347376],[-1.933494,49.776342],[-1.616511,48.644421],[-3.295814,48.901692],[-4.59235,48.68416],[-4.491555,47.954954],[-2.963276,47.570327],[-2.225724,47.064363],[-1.193798,46.014918],[-1.384225,44.02261],[-1.901351,43.422802],[-1.502771,43.034014],[0.338047,42.579546],[0.701591,42.795734],[1.826793,42.343385],[2.985999,42.473015],[3.100411,43.075201],[4.556963,43.399651],[6.529245,43.128892],[7.435185,43.693845],[7.549596,44.127901],[7.007562,44.254767],[6.749955,45.028518],[7.096652,45.333099],[6.802355,45.70858],[6.843593,45.991147],[6.5001,46.429673],[6.022609,46.27299],[6.037389,46.725779],[6.768714,47.287708],[6.736571,47.541801],[7.192202,47.449766],[7.466759,47.620582],[7.593676,48.333019],[8.099279,49.017784],[6.65823,49.201958],[6.18632,49.463803]]],[[[8.746009,42.628122],[8.544213,42.256517],[8.775723,41.583612],[9.229752,41.380007],[9.560016,42.152492],[9.390001,43.009985],[8.746009,42.628122]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"France","sov_a3":"FR1","adm0_dif":1,"level":2,"type":"Country","tlc":"1","admin":"France","adm0_a3":"FRA","geou_dif":0,"geounit":"France","gu_a3":"FRA","su_dif":0,"subunit":"France","su_a3":"FRA","brk_diff":0,"name":"France","name_long":"France","brk_a3":"FRA","brk_name":"France","brk_group":null,"abbrev":"Fr.","postal":"F","formal_en":"French Republic","formal_fr":null,"name_ciawf":"France","note_adm0":null,"note_brk":null,"name_sort":"France","name_alt":null,"mapcolor7":7,"mapcolor8":5,"mapcolor9":9,"mapcolor13":11,"pop_est":67059887,"pop_rank":16,"pop_year":2019,"gdp_md":2715518,"gdp_year":2019,"economy":"1. Developed region: G7","income_grp":"1. High income: OECD","fips_10":"FR","iso_a2":"-99","iso_a2_eh":"FR","iso_a3":"-99","iso_a3_eh":"FRA","iso_n3":"-99","iso_n3_eh":"250","un_a3":"250","wb_a2":"FR","wb_a3":"FRA","woe_id":-90,"woe_id_eh":23424819,"woe_note":"Includes only Metropolitan France (including Corsica)","adm0_iso":"FRA","adm0_diff":null,"adm0_tlc":"FRA","adm0_a3_us":"FRA","adm0_a3_fr":"FRA","adm0_a3_ru":"FRA","adm0_a3_es":"FRA","adm0_a3_cn":"FRA","adm0_a3_tw":"FRA","adm0_a3_in":"FRA","adm0_a3_np":"FRA","adm0_a3_pk":"FRA","adm0_a3_de":"FRA","adm0_a3_gb":"FRA","adm0_a3_br":"FRA","adm0_a3_il":"FRA","adm0_a3_ps":"FRA","adm0_a3_sa":"FRA","adm0_a3_eg":"FRA","adm0_a3_ma":"FRA","adm0_a3_pt":"FRA","adm0_a3_ar":"FRA","adm0_a3_jp":"FRA","adm0_a3_ko":"FRA","adm0_a3_vn":"FRA","adm0_a3_tr":"FRA","adm0_a3_id":"FRA","adm0_a3_pl":"FRA","adm0_a3_gr":"FRA","adm0_a3_it":"FRA","adm0_a3_nl":"FRA","adm0_a3_se":"FRA","adm0_a3_bd":"FRA","adm0_a3_ua":"FRA","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":3,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":1.7,"max_label":6.7,"label_x":2.552275,"label_y":46.696113,"ne_id":1159320637,"wikidataid":"Q142","name_ar":"فرنسا","name_bn":"ফ্রান্স","name_de":"Frankreich","name_en":"France","name_es":"Francia","name_fa":"فرانسه","name_fr":"France","name_el":"Γαλλία","name_he":"צרפת","name_hi":"फ़्रान्स","name_hu":"Franciaország","name_id":"Prancis","name_it":"Francia","name_ja":"フランス","name_ko":"프랑스","name_nl":"Frankrijk","name_pl":"Francja","name_pt":"França","name_ru":"Франция","name_sv":"Frankrike","name_tr":"Fransa","name_uk":"Франція","name_ur":"فرانس","name_vi":"Pháp","name_zh":"法国","name_zht":"法國","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"FRA.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.494331,55.615107],[25.533047,56.100297],[25.000934,56.164531],[24.860684,56.372528],[23.878264,56.273671],[22.201157,56.337802],[21.0558,56.031076],[21.268449,55.190482],[22.315724,55.015299],[22.757764,54.856574],[22.651052,54.582741],[22.731099,54.327537],[23.243987,54.220567],[23.484128,53.912498],[24.450684,53.905702],[25.536354,54.282423],[25.768433,54.846963],[26.588279,55.167176],[26.494331,55.615107]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Lithuania","sov_a3":"LTU","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Lithuania","adm0_a3":"LTU","geou_dif":0,"geounit":"Lithuania","gu_a3":"LTU","su_dif":0,"subunit":"Lithuania","su_a3":"LTU","brk_diff":0,"name":"Lithuania","name_long":"Lithuania","brk_a3":"LTU","brk_name":"Lithuania","brk_group":null,"abbrev":"Lith.","postal":"LT","formal_en":"Republic of Lithuania","formal_fr":null,"name_ciawf":"Lithuania","note_adm0":null,"note_brk":null,"name_sort":"Lithuania","name_alt":null,"mapcolor7":6,"mapcolor8":3,"mapcolor9":3,"mapcolor13":9,"pop_est":2786844,"pop_rank":12,"pop_year":2019,"gdp_md":54627,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"3. Upper middle income","fips_10":"LH","iso_a2":"LT","iso_a2_eh":"LT","iso_a3":"LTU","iso_a3_eh":"LTU","iso_n3":"440","iso_n3_eh":"440","un_a3":"440","wb_a2":"LT","wb_a3":"LTU","woe_id":23424875,"woe_id_eh":23424875,"woe_note":"Exact WOE match as country","adm0_iso":"LTU","adm0_diff":null,"adm0_tlc":"LTU","adm0_a3_us":"LTU","adm0_a3_fr":"LTU","adm0_a3_ru":"LTU","adm0_a3_es":"LTU","adm0_a3_cn":"LTU","adm0_a3_tw":"LTU","adm0_a3_in":"LTU","adm0_a3_np":"LTU","adm0_a3_pk":"LTU","adm0_a3_de":"LTU","adm0_a3_gb":"LTU","adm0_a3_br":"LTU","adm0_a3_il":"LTU","adm0_a3_ps":"LTU","adm0_a3_sa":"LTU","adm0_a3_eg":"LTU","adm0_a3_ma":"LTU","adm0_a3_pt":"LTU","adm0_a3_ar":"LTU","adm0_a3_jp":"LTU","adm0_a3_ko":"LTU","adm0_a3_vn":"LTU","adm0_a3_tr":"LTU","adm0_a3_id":"LTU","adm0_a3_pl":"LTU","adm0_a3_gr":"LTU","adm0_a3_it":"LTU","adm0_a3_nl":"LTU","adm0_a3_se":"LTU","adm0_a3_bd":"LTU","adm0_a3_ua":"LTU","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":9,"long_len":9,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":24.089932,"label_y":55.103703,"ne_id":1159321029,"wikidataid":"Q37","name_ar":"ليتوانيا","name_bn":"লিথুয়ানিয়া","name_de":"Litauen","name_en":"Lithuania","name_es":"Lituania","name_fa":"لیتوانی","name_fr":"Lituanie","name_el":"Λιθουανία","name_he":"ליטא","name_hi":"लिथुआनिया","name_hu":"Litvánia","name_id":"Lituania","name_it":"Lituania","name_ja":"リトアニア","name_ko":"리투아니아","name_nl":"Litouwen","name_pl":"Litwa","name_pt":"Lituânia","name_ru":"Литва","name_sv":"Litauen","name_tr":"Litvanya","name_uk":"Литва","name_ur":"لتھووینیا","name_vi":"Litva","name_zh":"立陶宛","name_zht":"立陶宛","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"LTU.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[15.016996,51.106674],[14.570718,51.002339],[14.307013,51.117268],[14.056228,50.926918],[13.338132,50.733234],[12.966837,50.484076],[12.240111,50.266338],[12.415191,49.969121],[12.521024,49.547415],[13.031329,49.307068],[13.595946,48.877172],[14.338898,48.555305],[14.901447,48.964402],[15.253416,49.039074],[16.029647,48.733899],[16.499283,48.785808],[16.960288,48.596982],[17.101985,48.816969],[17.545007,48.800019],[17.886485,48.903475],[17.913512,48.996493],[18.104973,49.043983],[18.170498,49.271515],[18.399994,49.315001],[18.554971,49.495015],[18.853144,49.49623],[18.392914,49.988629],[17.649445,50.049038],[17.554567,50.362146],[16.868769,50.473974],[16.719476,50.215747],[16.176253,50.422607],[16.238627,50.697733],[15.490972,50.78473],[15.016996,51.106674]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Czechia","sov_a3":"CZE","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Czechia","adm0_a3":"CZE","geou_dif":0,"geounit":"Czechia","gu_a3":"CZE","su_dif":0,"subunit":"Czechia","su_a3":"CZE","brk_diff":0,"name":"Czechia","name_long":"Czech Republic","brk_a3":"CZE","brk_name":"Czechia","brk_group":null,"abbrev":"Cz.","postal":"CZ","formal_en":"Czech Republic","formal_fr":"la République tchèque","name_ciawf":"Czechia","note_adm0":null,"note_brk":null,"name_sort":"Czechia","name_alt":"Česko","mapcolor7":1,"mapcolor8":1,"mapcolor9":2,"mapcolor13":6,"pop_est":10669709,"pop_rank":14,"pop_year":2019,"gdp_md":250680,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"EZ","iso_a2":"CZ","iso_a2_eh":"CZ","iso_a3":"CZE","iso_a3_eh":"CZE","iso_n3":"203","iso_n3_eh":"203","un_a3":"203","wb_a2":"CZ","wb_a3":"CZE","woe_id":23424810,"woe_id_eh":23424810,"woe_note":"Exact WOE match as country","adm0_iso":"CZE","adm0_diff":null,"adm0_tlc":"CZE","adm0_a3_us":"CZE","adm0_a3_fr":"CZE","adm0_a3_ru":"CZE","adm0_a3_es":"CZE","adm0_a3_cn":"CZE","adm0_a3_tw":"CZE","adm0_a3_in":"CZE","adm0_a3_np":"CZE","adm0_a3_pk":"CZE","adm0_a3_de":"CZE","adm0_a3_gb":"CZE","adm0_a3_br":"CZE","adm0_a3_il":"CZE","adm0_a3_ps":"CZE","adm0_a3_sa":"CZE","adm0_a3_eg":"CZE","adm0_a3_ma":"CZE","adm0_a3_pt":"CZE","adm0_a3_ar":"CZE","adm0_a3_jp":"CZE","adm0_a3_ko":"CZE","adm0_a3_vn":"CZE","adm0_a3_tr":"CZE","adm0_a3_id":"CZE","adm0_a3_pl":"CZE","adm0_a3_gr":"CZE","adm0_a3_it":"CZE","adm0_a3_nl":"CZE","adm0_a3_se":"CZE","adm0_a3_bd":"CZE","adm0_a3_ua":"CZE","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":14,"abbrev_len":3,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":15.377555,"label_y":49.882364,"ne_id":1159320535,"wikidataid":"Q213","name_ar":"التشيك","name_bn":"চেক প্রজাতন্ত্র","name_de":"Tschechien","name_en":"Czech Republic","name_es":"República Checa","name_fa":"جمهوری چک","name_fr":"Tchéquie","name_el":"Τσεχία","name_he":"צ'כיה","name_hi":"चेक गणराज्य","name_hu":"Csehország","name_id":"Republik Ceko","name_it":"Repubblica Ceca","name_ja":"チェコ","name_ko":"체코","name_nl":"Tsjechië","name_pl":"Czechy","name_pt":"Chéquia","name_ru":"Чехия","name_sv":"Tjeckien","name_tr":"Çek Cumhuriyeti","name_uk":"Чехія","name_ur":"چیک جمہوریہ","name_vi":"Cộng hòa Séc","name_zh":"捷克","name_zht":"捷克共和國","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"CZE.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[14.119686,53.757029],[13.647467,54.075511],[12.51844,54.470371],[11.956252,54.196486],[10.939467,54.008693],[10.950112,54.363607],[9.93958,54.596642],[9.921906,54.983104],[9.282049,54.830865],[8.526229,54.962744],[8.572118,54.395646],[8.800734,54.020786],[8.121706,53.527792],[7.936239,53.748296],[7.100425,53.693932],[6.90514,53.482162],[7.092053,53.144043],[6.84287,52.22844],[6.589397,51.852029],[5.988658,51.851616],[6.156658,50.803721],[6.043073,50.128052],[6.242751,49.902226],[6.18632,49.463803],[6.65823,49.201958],[8.099279,49.017784],[7.593676,48.333019],[7.466759,47.620582],[8.317301,47.61358],[8.522612,47.830828],[9.594226,47.525058],[9.896068,47.580197],[10.402084,47.302488],[10.544504,47.566399],[11.426414,47.523766],[12.141357,47.703083],[12.62076,47.672388],[12.932627,47.467646],[13.025851,47.637584],[12.884103,48.289146],[13.243357,48.416115],[13.595946,48.877172],[13.031329,49.307068],[12.521024,49.547415],[12.415191,49.969121],[12.240111,50.266338],[12.966837,50.484076],[13.338132,50.733234],[14.056228,50.926918],[14.307013,51.117268],[14.570718,51.002339],[15.016996,51.106674],[14.607098,51.745188],[14.685026,52.089947],[14.4376,52.62485],[14.074521,52.981263],[14.353315,53.248171],[14.119686,53.757029]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"Germany","sov_a3":"DEU","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Germany","adm0_a3":"DEU","geou_dif":0,"geounit":"Germany","gu_a3":"DEU","su_dif":0,"subunit":"Germany","su_a3":"DEU","brk_diff":0,"name":"Germany","name_long":"Germany","brk_a3":"DEU","brk_name":"Germany","brk_group":null,"abbrev":"Ger.","postal":"D","formal_en":"Federal Republic of Germany","formal_fr":null,"name_ciawf":"Germany","note_adm0":null,"note_brk":null,"name_sort":"Germany","name_alt":null,"mapcolor7":2,"mapcolor8":5,"mapcolor9":5,"mapcolor13":1,"pop_est":83132799,"pop_rank":16,"pop_year":2019,"gdp_md":3861123,"gdp_year":2019,"economy":"1. Developed region: G7","income_grp":"1. High income: OECD","fips_10":"GM","iso_a2":"DE","iso_a2_eh":"DE","iso_a3":"DEU","iso_a3_eh":"DEU","iso_n3":"276","iso_n3_eh":"276","un_a3":"276","wb_a2":"DE","wb_a3":"DEU","woe_id":23424829,"woe_id_eh":23424829,"woe_note":"Exact WOE match as country","adm0_iso":"DEU","adm0_diff":null,"adm0_tlc":"DEU","adm0_a3_us":"DEU","adm0_a3_fr":"DEU","adm0_a3_ru":"DEU","adm0_a3_es":"DEU","adm0_a3_cn":"DEU","adm0_a3_tw":"DEU","adm0_a3_in":"DEU","adm0_a3_np":"DEU","adm0_a3_pk":"DEU","adm0_a3_de":"DEU","adm0_a3_gb":"DEU","adm0_a3_br":"DEU","adm0_a3_il":"DEU","adm0_a3_ps":"DEU","adm0_a3_sa":"DEU","adm0_a3_eg":"DEU","adm0_a3_ma":"DEU","adm0_a3_pt":"DEU","adm0_a3_ar":"DEU","adm0_a3_jp":"DEU","adm0_a3_ko":"DEU","adm0_a3_vn":"DEU","adm0_a3_tr":"DEU","adm0_a3_id":"DEU","adm0_a3_pl":"DEU","adm0_a3_gr":"DEU","adm0_a3_it":"DEU","adm0_a3_nl":"DEU","adm0_a3_se":"DEU","adm0_a3_bd":"DEU","adm0_a3_ua":"DEU","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":1.7,"max_label":6.7,"label_x":9.678348,"label_y":50.961733,"ne_id":1159320539,"wikidataid":"Q183","name_ar":"ألمانيا","name_bn":"জার্মানি","name_de":"Deutschland","name_en":"Germany","name_es":"Alemania","name_fa":"آلمان","name_fr":"Allemagne","name_el":"Γερμανία","name_he":"גרמניה","name_hi":"जर्मनी","name_hu":"Németország","name_id":"Jerman","name_it":"Germania","name_ja":"ドイツ","name_ko":"독일","name_nl":"Duitsland","name_pl":"Niemcy","name_pt":"Alemanha","name_ru":"Германия","name_sv":"Tyskland","name_tr":"Almanya","name_uk":"Німеччина","name_ur":"جرمنی","name_vi":"Đức","name_zh":"德国","name_zht":"德國","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"DEU.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[27.981127,59.475373],[27.981114,59.475388],[26.949136,59.445803],[25.864189,59.61109],[24.604214,59.465854],[23.339795,59.18724],[23.42656,58.612753],[24.061198,58.257375],[24.428928,58.383413],[24.312863,57.793424],[25.164594,57.970157],[25.60281,57.847529],[26.463532,57.476389],[27.288185,57.474528],[27.716686,57.791899],[27.42015,58.72457],[28.131699,59.300825],[27.98112,59.47537],[27.981127,59.475373]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Estonia","sov_a3":"EST","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Estonia","adm0_a3":"EST","geou_dif":0,"geounit":"Estonia","gu_a3":"EST","su_dif":0,"subunit":"Estonia","su_a3":"EST","brk_diff":0,"name":"Estonia","name_long":"Estonia","brk_a3":"EST","brk_name":"Estonia","brk_group":null,"abbrev":"Est.","postal":"EST","formal_en":"Republic of Estonia","formal_fr":null,"name_ciawf":"Estonia","note_adm0":null,"note_brk":null,"name_sort":"Estonia","name_alt":null,"mapcolor7":3,"mapcolor8":2,"mapcolor9":1,"mapcolor13":10,"pop_est":1326590,"pop_rank":12,"pop_year":2019,"gdp_md":31471,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"EN","iso_a2":"EE","iso_a2_eh":"EE","iso_a3":"EST","iso_a3_eh":"EST","iso_n3":"233","iso_n3_eh":"233","un_a3":"233","wb_a2":"EE","wb_a3":"EST","woe_id":23424805,"woe_id_eh":23424805,"woe_note":"Exact WOE match as country","adm0_iso":"EST","adm0_diff":null,"adm0_tlc":"EST","adm0_a3_us":"EST","adm0_a3_fr":"EST","adm0_a3_ru":"EST","adm0_a3_es":"EST","adm0_a3_cn":"EST","adm0_a3_tw":"EST","adm0_a3_in":"EST","adm0_a3_np":"EST","adm0_a3_pk":"EST","adm0_a3_de":"EST","adm0_a3_gb":"EST","adm0_a3_br":"EST","adm0_a3_il":"EST","adm0_a3_ps":"EST","adm0_a3_sa":"EST","adm0_a3_eg":"EST","adm0_a3_ma":"EST","adm0_a3_pt":"EST","adm0_a3_ar":"EST","adm0_a3_jp":"EST","adm0_a3_ko":"EST","adm0_a3_vn":"EST","adm0_a3_tr":"EST","adm0_a3_id":"EST","adm0_a3_pl":"EST","adm0_a3_gr":"EST","adm0_a3_it":"EST","adm0_a3_nl":"EST","adm0_a3_se":"EST","adm0_a3_bd":"EST","adm0_a3_ua":"EST","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":25.867126,"label_y":58.724865,"ne_id":1159320615,"wikidataid":"Q191","name_ar":"إستونيا","name_bn":"এস্তোনিয়া","name_de":"Estland","name_en":"Estonia","name_es":"Estonia","name_fa":"استونی","name_fr":"Estonie","name_el":"Εσθονία","name_he":"אסטוניה","name_hi":"एस्टोनिया","name_hu":"Észtország","name_id":"Estonia","name_it":"Estonia","name_ja":"エストニア","name_ko":"에스토니아","name_nl":"Estland","name_pl":"Estonia","name_pt":"Estónia","name_ru":"Эстония","name_sv":"Estland","name_tr":"Estonya","name_uk":"Естонія","name_ur":"استونیا","name_vi":"Estonia","name_zh":"爱沙尼亚","name_zht":"愛沙尼亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"EST.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[27.288185,57.474528],[26.463532,57.476389],[25.60281,57.847529],[25.164594,57.970157],[24.312863,57.793424],[24.12073,57.025693],[23.318453,57.006236],[22.524341,57.753374],[21.581866,57.411871],[21.090424,56.783873],[21.0558,56.031076],[22.201157,56.337802],[23.878264,56.273671],[24.860684,56.372528],[25.000934,56.164531],[25.533047,56.100297],[26.494331,55.615107],[27.10246,55.783314],[28.176709,56.16913],[27.855282,56.759326],[27.770016,57.244258],[27.288185,57.474528]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Latvia","sov_a3":"LVA","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Latvia","adm0_a3":"LVA","geou_dif":0,"geounit":"Latvia","gu_a3":"LVA","su_dif":0,"subunit":"Latvia","su_a3":"LVA","brk_diff":0,"name":"Latvia","name_long":"Latvia","brk_a3":"LVA","brk_name":"Latvia","brk_group":null,"abbrev":"Lat.","postal":"LV","formal_en":"Republic of Latvia","formal_fr":null,"name_ciawf":"Latvia","note_adm0":null,"note_brk":null,"name_sort":"Latvia","name_alt":null,"mapcolor7":4,"mapcolor8":7,"mapcolor9":6,"mapcolor13":13,"pop_est":1912789,"pop_rank":12,"pop_year":2019,"gdp_md":34102,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"3. Upper middle income","fips_10":"LG","iso_a2":"LV","iso_a2_eh":"LV","iso_a3":"LVA","iso_a3_eh":"LVA","iso_n3":"428","iso_n3_eh":"428","un_a3":"428","wb_a2":"LV","wb_a3":"LVA","woe_id":23424874,"woe_id_eh":23424874,"woe_note":"Exact WOE match as country","adm0_iso":"LVA","adm0_diff":null,"adm0_tlc":"LVA","adm0_a3_us":"LVA","adm0_a3_fr":"LVA","adm0_a3_ru":"LVA","adm0_a3_es":"LVA","adm0_a3_cn":"LVA","adm0_a3_tw":"LVA","adm0_a3_in":"LVA","adm0_a3_np":"LVA","adm0_a3_pk":"LVA","adm0_a3_de":"LVA","adm0_a3_gb":"LVA","adm0_a3_br":"LVA","adm0_a3_il":"LVA","adm0_a3_ps":"LVA","adm0_a3_sa":"LVA","adm0_a3_eg":"LVA","adm0_a3_ma":"LVA","adm0_a3_pt":"LVA","adm0_a3_ar":"LVA","adm0_a3_jp":"LVA","adm0_a3_ko":"LVA","adm0_a3_vn":"LVA","adm0_a3_tr":"LVA","adm0_a3_id":"LVA","adm0_a3_pl":"LVA","adm0_a3_gr":"LVA","adm0_a3_it":"LVA","adm0_a3_nl":"LVA","adm0_a3_se":"LVA","adm0_a3_bd":"LVA","adm0_a3_ua":"LVA","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":25.458723,"label_y":57.066872,"ne_id":1159321033,"wikidataid":"Q211","name_ar":"لاتفيا","name_bn":"লাতভিয়া","name_de":"Lettland","name_en":"Latvia","name_es":"Letonia","name_fa":"لتونی","name_fr":"Lettonie","name_el":"Λετονία","name_he":"לטביה","name_hi":"लातविया","name_hu":"Lettország","name_id":"Latvia","name_it":"Lettonia","name_ja":"ラトビア","name_ko":"라트비아","name_nl":"Letland","name_pl":"Łotwa","name_pt":"Letónia","name_ru":"Латвия","name_sv":"Lettland","name_tr":"Letonya","name_uk":"Латвія","name_ur":"لٹویا","name_vi":"Latvia","name_zh":"拉脱维亚","name_zht":"拉脫維亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"LVA.geojson"}},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[15.14282,79.67431],[13.71852,79.66039],[13.17077,80.01046],[10.44453,79.65239],[11.22231,78.8693],[13.1706,78.02493],[14.66956,77.73565],[13.76259,77.38035],[15.91315,76.77045],[17.1182,76.80941],[17.59441,77.63796],[18.47172,77.82669],[19.02737,78.5626],[21.54383,78.95611],[18.25183,79.70175],[16.99085,80.05086],[15.52255,80.01608],[15.14282,79.67431]]],[[[31.101042,69.558101],[30.005435,70.186259],[31.293418,70.453788],[28.165547,71.185474],[26.37005,70.986262],[24.546543,71.030497],[23.023742,70.202072],[21.378416,70.255169],[19.184028,69.817444],[16.435927,68.563205],[14.761146,67.810642],[12.358347,65.879726],[10.527709,64.486038],[8.553411,63.454008],[5.9129,62.614473],[4.992078,61.970998],[5.308234,59.663232],[5.665835,58.588155],[7.048748,58.078884],[8.382,58.313288],[10.356557,59.469807],[11.027369,58.856149],[11.468272,59.432393],[12.300366,60.117933],[12.631147,61.293572],[11.992064,61.800362],[11.930569,63.128318],[12.579935,64.066219],[13.571916,64.049114],[13.919905,64.445421],[13.55569,64.787028],[15.108411,66.193867],[16.108712,67.302456],[16.768879,68.013937],[17.729182,68.010552],[17.993868,68.567391],[19.87856,68.407194],[20.025269,69.065139],[20.645593,69.106247],[21.244936,69.370443],[22.356238,68.841741],[23.66205,68.891247],[24.735679,68.649557],[25.689213,69.092114],[26.179622,69.825299],[27.732292,70.164193],[29.015573,69.766491],[28.59193,69.064777],[29.39955,69.15692],[31.101042,69.558101]]],[[[27.407506,80.056406],[25.447625,80.40734],[22.919253,80.657144],[21.907945,80.357679],[20.455992,80.598156],[17.368015,80.318896],[18.462264,79.85988],[19.897266,79.842362],[20.075188,79.566823],[23.024466,79.400012],[25.924651,79.517834],[27.407506,80.056406]]],[[[24.72412,77.85385],[23.28134,78.07954],[22.88426,78.45494],[20.8119,78.25463],[21.41611,77.93504],[20.72601,77.67704],[22.49032,77.44493],[24.72412,77.85385]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Norway","sov_a3":"NOR","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":null,"admin":"Norway","adm0_a3":"NOR","geou_dif":0,"geounit":"Norway","gu_a3":"NOR","su_dif":0,"subunit":"Norway","su_a3":"NOR","brk_diff":0,"name":"Norway","name_long":"Norway","brk_a3":"NOR","brk_name":"Norway","brk_group":null,"abbrev":"Nor.","postal":"N","formal_en":"Kingdom of Norway","formal_fr":null,"name_ciawf":"Norway","note_adm0":null,"note_brk":null,"name_sort":"Norway","name_alt":null,"mapcolor7":5,"mapcolor8":3,"mapcolor9":8,"mapcolor13":12,"pop_est":5347896,"pop_rank":13,"pop_year":2019,"gdp_md":403336,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"-99","iso_a2":"-99","iso_a2_eh":"NO","iso_a3":"-99","iso_a3_eh":"NOR","iso_n3":"-99","iso_n3_eh":"578","un_a3":"-99","wb_a2":"-99","wb_a3":"-99","woe_id":-90,"woe_id_eh":23424910,"woe_note":"Does not include Svalbard, Jan Mayen, or Bouvet Islands (28289410).","adm0_iso":"NOR","adm0_diff":null,"adm0_tlc":"NOR","adm0_a3_us":"NOR","adm0_a3_fr":"NOR","adm0_a3_ru":"NOR","adm0_a3_es":"NOR","adm0_a3_cn":"NOR","adm0_a3_tw":"NOR","adm0_a3_in":"NOR","adm0_a3_np":"NOR","adm0_a3_pk":"NOR","adm0_a3_de":"NOR","adm0_a3_gb":"NOR","adm0_a3_br":"NOR","adm0_a3_il":"NOR","adm0_a3_ps":"NOR","adm0_a3_sa":"NOR","adm0_a3_eg":"NOR","adm0_a3_ma":"NOR","adm0_a3_pt":"NOR","adm0_a3_ar":"NOR","adm0_a3_jp":"NOR","adm0_a3_ko":"NOR","adm0_a3_vn":"NOR","adm0_a3_tr":"NOR","adm0_a3_id":"NOR","adm0_a3_pl":"NOR","adm0_a3_gr":"NOR","adm0_a3_it":"NOR","adm0_a3_nl":"NOR","adm0_a3_se":"NOR","adm0_a3_bd":"NOR","adm0_a3_ua":"NOR","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":7,"label_x":9.679975,"label_y":61.357092,"ne_id":1159321109,"wikidataid":"Q20","name_ar":"النرويج","name_bn":"নরওয়ে","name_de":"Norwegen","name_en":"Norway","name_es":"Noruega","name_fa":"نروژ","name_fr":"Norvège","name_el":"Νορβηγία","name_he":"נורווגיה","name_hi":"नॉर्वे","name_hu":"Norvégia","name_id":"Norwegia","name_it":"Norvegia","name_ja":"ノルウェー","name_ko":"노르웨이","name_nl":"Noorwegen","name_pl":"Norwegia","name_pt":"Noruega","name_ru":"Норвегия","name_sv":"Norge","name_tr":"Norveç","name_uk":"Норвегія","name_ur":"ناروے","name_vi":"Na Uy","name_zh":"挪威","name_zht":"挪威","fclass_iso":"Unrecognized","tlc_diff":null,"fclass_tlc":"Unrecognized","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"NOR.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[11.027369,58.856149],[11.787942,57.441817],[12.625101,56.30708],[12.942911,55.361737],[14.100721,55.407781],[14.666681,56.200885],[15.879786,56.104302],[16.44771,57.041118],[16.829185,58.719827],[17.869225,58.953766],[18.787722,60.081914],[17.831346,60.636583],[17.119555,61.341166],[17.847779,62.7494],[19.778876,63.609554],[21.369631,64.413588],[21.213517,65.026005],[22.183173,65.723741],[23.903379,66.006927],[23.56588,66.396051],[23.539473,67.936009],[21.978535,68.616846],[20.645593,69.106247],[20.025269,69.065139],[19.87856,68.407194],[17.993868,68.567391],[17.729182,68.010552],[16.768879,68.013937],[16.108712,67.302456],[15.108411,66.193867],[13.55569,64.787028],[13.919905,64.445421],[13.571916,64.049114],[12.579935,64.066219],[11.930569,63.128318],[11.992064,61.800362],[12.631147,61.293572],[12.300366,60.117933],[11.468272,59.432393],[11.027369,58.856149]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Sweden","sov_a3":"SWE","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Sweden","adm0_a3":"SWE","geou_dif":0,"geounit":"Sweden","gu_a3":"SWE","su_dif":0,"subunit":"Sweden","su_a3":"SWE","brk_diff":0,"name":"Sweden","name_long":"Sweden","brk_a3":"SWE","brk_name":"Sweden","brk_group":null,"abbrev":"Swe.","postal":"S","formal_en":"Kingdom of Sweden","formal_fr":null,"name_ciawf":"Sweden","note_adm0":null,"note_brk":null,"name_sort":"Sweden","name_alt":null,"mapcolor7":1,"mapcolor8":4,"mapcolor9":2,"mapcolor13":4,"pop_est":10285453,"pop_rank":14,"pop_year":2019,"gdp_md":530883,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"SW","iso_a2":"SE","iso_a2_eh":"SE","iso_a3":"SWE","iso_a3_eh":"SWE","iso_n3":"752","iso_n3_eh":"752","un_a3":"752","wb_a2":"SE","wb_a3":"SWE","woe_id":23424954,"woe_id_eh":23424954,"woe_note":"Exact WOE match as country","adm0_iso":"SWE","adm0_diff":null,"adm0_tlc":"SWE","adm0_a3_us":"SWE","adm0_a3_fr":"SWE","adm0_a3_ru":"SWE","adm0_a3_es":"SWE","adm0_a3_cn":"SWE","adm0_a3_tw":"SWE","adm0_a3_in":"SWE","adm0_a3_np":"SWE","adm0_a3_pk":"SWE","adm0_a3_de":"SWE","adm0_a3_gb":"SWE","adm0_a3_br":"SWE","adm0_a3_il":"SWE","adm0_a3_ps":"SWE","adm0_a3_sa":"SWE","adm0_a3_eg":"SWE","adm0_a3_ma":"SWE","adm0_a3_pt":"SWE","adm0_a3_ar":"SWE","adm0_a3_jp":"SWE","adm0_a3_ko":"SWE","adm0_a3_vn":"SWE","adm0_a3_tr":"SWE","adm0_a3_id":"SWE","adm0_a3_pl":"SWE","adm0_a3_gr":"SWE","adm0_a3_it":"SWE","adm0_a3_nl":"SWE","adm0_a3_se":"SWE","adm0_a3_bd":"SWE","adm0_a3_ua":"SWE","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2,"max_label":7,"label_x":19.01705,"label_y":65.85918,"ne_id":1159321287,"wikidataid":"Q34","name_ar":"السويد","name_bn":"সুইডেন","name_de":"Schweden","name_en":"Sweden","name_es":"Suecia","name_fa":"سوئد","name_fr":"Suède","name_el":"Σουηδία","name_he":"שוודיה","name_hi":"स्वीडन","name_hu":"Svédország","name_id":"Swedia","name_it":"Svezia","name_ja":"スウェーデン","name_ko":"스웨덴","name_nl":"Zweden","name_pl":"Szwecja","name_pt":"Suécia","name_ru":"Швеция","name_sv":"Sverige","name_tr":"İsveç","name_uk":"Швеція","name_ur":"سویڈن","name_vi":"Thụy Điển","name_zh":"瑞典","name_zht":"瑞典","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"SWE.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[28.59193,69.064777],[29.015573,69.766491],[27.732292,70.164193],[26.179622,69.825299],[25.689213,69.092114],[24.735679,68.649557],[23.66205,68.891247],[22.356238,68.841741],[21.244936,69.370443],[20.645593,69.106247],[21.978535,68.616846],[23.539473,67.936009],[23.56588,66.396051],[23.903379,66.006927],[25.294043,65.534346],[25.398068,65.111427],[24.730512,64.902344],[22.442744,63.81781],[21.536029,63.189735],[21.059211,62.607393],[21.544866,61.705329],[21.322244,60.72017],[22.290764,60.391921],[22.869695,59.846373],[24.496624,60.057316],[26.255173,60.423961],[28.069998,60.503517],[28.070002,60.503519],[28.07,60.50352],[30.211107,61.780028],[31.139991,62.357693],[31.516092,62.867687],[30.035872,63.552814],[30.444685,64.204453],[29.54443,64.948672],[30.21765,65.80598],[29.054589,66.944286],[29.977426,67.698297],[28.445944,68.364613],[28.59193,69.064777]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Finland","sov_a3":"FI1","adm0_dif":1,"level":2,"type":"Country","tlc":"1","admin":"Finland","adm0_a3":"FIN","geou_dif":0,"geounit":"Finland","gu_a3":"FIN","su_dif":0,"subunit":"Finland","su_a3":"FIN","brk_diff":0,"name":"Finland","name_long":"Finland","brk_a3":"FIN","brk_name":"Finland","brk_group":null,"abbrev":"Fin.","postal":"FIN","formal_en":"Republic of Finland","formal_fr":null,"name_ciawf":"Finland","note_adm0":null,"note_brk":null,"name_sort":"Finland","name_alt":null,"mapcolor7":4,"mapcolor8":1,"mapcolor9":4,"mapcolor13":6,"pop_est":5520314,"pop_rank":13,"pop_year":2019,"gdp_md":269296,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"FI","iso_a2":"FI","iso_a2_eh":"FI","iso_a3":"FIN","iso_a3_eh":"FIN","iso_n3":"246","iso_n3_eh":"246","un_a3":"246","wb_a2":"FI","wb_a3":"FIN","woe_id":23424812,"woe_id_eh":23424812,"woe_note":"Exact WOE match as country","adm0_iso":"FIN","adm0_diff":null,"adm0_tlc":"FIN","adm0_a3_us":"FIN","adm0_a3_fr":"FIN","adm0_a3_ru":"FIN","adm0_a3_es":"FIN","adm0_a3_cn":"FIN","adm0_a3_tw":"FIN","adm0_a3_in":"FIN","adm0_a3_np":"FIN","adm0_a3_pk":"FIN","adm0_a3_de":"FIN","adm0_a3_gb":"FIN","adm0_a3_br":"FIN","adm0_a3_il":"FIN","adm0_a3_ps":"FIN","adm0_a3_sa":"FIN","adm0_a3_eg":"FIN","adm0_a3_ma":"FIN","adm0_a3_pt":"FIN","adm0_a3_ar":"FIN","adm0_a3_jp":"FIN","adm0_a3_ko":"FIN","adm0_a3_vn":"FIN","adm0_a3_tr":"FIN","adm0_a3_id":"FIN","adm0_a3_pl":"FIN","adm0_a3_gr":"FIN","adm0_a3_it":"FIN","adm0_a3_nl":"FIN","adm0_a3_se":"FIN","adm0_a3_bd":"FIN","adm0_a3_ua":"FIN","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":27.276449,"label_y":63.252361,"ne_id":1159320623,"wikidataid":"Q33","name_ar":"فنلندا","name_bn":"ফিনল্যান্ড","name_de":"Finnland","name_en":"Finland","name_es":"Finlandia","name_fa":"فنلاند","name_fr":"Finlande","name_el":"Φινλανδία","name_he":"פינלנד","name_hi":"फ़िनलैण्ड","name_hu":"Finnország","name_id":"Finlandia","name_it":"Finlandia","name_ja":"フィンランド","name_ko":"핀란드","name_nl":"Finland","name_pl":"Finlandia","name_pt":"Finlândia","name_ru":"Финляндия","name_sv":"Finland","name_tr":"Finlandiya","name_uk":"Фінляндія","name_ur":"فن لینڈ","name_vi":"Phần Lan","name_zh":"芬兰","name_zht":"芬蘭","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"FIN.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[6.043073,50.128052],[5.782417,50.090328],[5.674052,49.529484],[5.897759,49.442667],[6.18632,49.463803],[6.242751,49.902226],[6.043073,50.128052]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Luxembourg","sov_a3":"LUX","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Luxembourg","adm0_a3":"LUX","geou_dif":0,"geounit":"Luxembourg","gu_a3":"LUX","su_dif":0,"subunit":"Luxembourg","su_a3":"LUX","brk_diff":0,"name":"Luxembourg","name_long":"Luxembourg","brk_a3":"LUX","brk_name":"Luxembourg","brk_group":null,"abbrev":"Lux.","postal":"L","formal_en":"Grand Duchy of Luxembourg","formal_fr":null,"name_ciawf":"Luxembourg","note_adm0":null,"note_brk":null,"name_sort":"Luxembourg","name_alt":null,"mapcolor7":1,"mapcolor8":7,"mapcolor9":3,"mapcolor13":7,"pop_est":619896,"pop_rank":11,"pop_year":2019,"gdp_md":71104,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"LU","iso_a2":"LU","iso_a2_eh":"LU","iso_a3":"LUX","iso_a3_eh":"LUX","iso_n3":"442","iso_n3_eh":"442","un_a3":"442","wb_a2":"LU","wb_a3":"LUX","woe_id":23424881,"woe_id_eh":23424881,"woe_note":"Exact WOE match as country","adm0_iso":"LUX","adm0_diff":null,"adm0_tlc":"LUX","adm0_a3_us":"LUX","adm0_a3_fr":"LUX","adm0_a3_ru":"LUX","adm0_a3_es":"LUX","adm0_a3_cn":"LUX","adm0_a3_tw":"LUX","adm0_a3_in":"LUX","adm0_a3_np":"LUX","adm0_a3_pk":"LUX","adm0_a3_de":"LUX","adm0_a3_gb":"LUX","adm0_a3_br":"LUX","adm0_a3_il":"LUX","adm0_a3_ps":"LUX","adm0_a3_sa":"LUX","adm0_a3_eg":"LUX","adm0_a3_ma":"LUX","adm0_a3_pt":"LUX","adm0_a3_ar":"LUX","adm0_a3_jp":"LUX","adm0_a3_ko":"LUX","adm0_a3_vn":"LUX","adm0_a3_tr":"LUX","adm0_a3_id":"LUX","adm0_a3_pl":"LUX","adm0_a3_gr":"LUX","adm0_a3_it":"LUX","adm0_a3_nl":"LUX","adm0_a3_se":"LUX","adm0_a3_bd":"LUX","adm0_a3_ua":"LUX","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":10,"long_len":10,"abbrev_len":4,"tiny":5,"homepart":1,"min_zoom":0,"min_label":5.7,"max_label":10,"label_x":6.07762,"label_y":49.733732,"ne_id":1159321031,"wikidataid":"Q32","name_ar":"لوكسمبورغ","name_bn":"লুক্সেমবুর্গ","name_de":"Luxemburg","name_en":"Luxembourg","name_es":"Luxemburgo","name_fa":"لوکزامبورگ","name_fr":"Luxembourg","name_el":"Λουξεμβούργο","name_he":"לוקסמבורג","name_hi":"लक्ज़मबर्ग","name_hu":"Luxemburg","name_id":"Luksemburg","name_it":"Lussemburgo","name_ja":"ルクセンブルク","name_ko":"룩셈부르크","name_nl":"Luxemburg","name_pl":"Luksemburg","name_pt":"Luxemburgo","name_ru":"Люксембург","name_sv":"Luxemburg","name_tr":"Lüksemburg","name_uk":"Люксембург","name_ur":"لکسمبرگ","name_vi":"Luxembourg","name_zh":"卢森堡","name_zht":"盧森堡","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"LUX.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[6.156658,50.803721],[5.606976,51.037298],[4.973991,51.475024],[4.047071,51.267259],[3.314971,51.345755],[3.315011,51.345777],[3.314971,51.345781],[2.513573,51.148506],[2.658422,50.796848],[3.123252,50.780363],[3.588184,50.378992],[4.286023,49.907497],[4.799222,49.985373],[5.674052,49.529484],[5.782417,50.090328],[6.043073,50.128052],[6.156658,50.803721]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"Belgium","sov_a3":"BEL","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Belgium","adm0_a3":"BEL","geou_dif":0,"geounit":"Belgium","gu_a3":"BEL","su_dif":0,"subunit":"Belgium","su_a3":"BEL","brk_diff":0,"name":"Belgium","name_long":"Belgium","brk_a3":"BEL","brk_name":"Belgium","brk_group":null,"abbrev":"Belg.","postal":"B","formal_en":"Kingdom of Belgium","formal_fr":null,"name_ciawf":"Belgium","note_adm0":null,"note_brk":null,"name_sort":"Belgium","name_alt":null,"mapcolor7":3,"mapcolor8":2,"mapcolor9":1,"mapcolor13":8,"pop_est":11484055,"pop_rank":14,"pop_year":2019,"gdp_md":533097,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"BE","iso_a2":"BE","iso_a2_eh":"BE","iso_a3":"BEL","iso_a3_eh":"BEL","iso_n3":"056","iso_n3_eh":"056","un_a3":"056","wb_a2":"BE","wb_a3":"BEL","woe_id":23424757,"woe_id_eh":23424757,"woe_note":"Exact WOE match as country","adm0_iso":"BEL","adm0_diff":null,"adm0_tlc":"BEL","adm0_a3_us":"BEL","adm0_a3_fr":"BEL","adm0_a3_ru":"BEL","adm0_a3_es":"BEL","adm0_a3_cn":"BEL","adm0_a3_tw":"BEL","adm0_a3_in":"BEL","adm0_a3_np":"BEL","adm0_a3_pk":"BEL","adm0_a3_de":"BEL","adm0_a3_gb":"BEL","adm0_a3_br":"BEL","adm0_a3_il":"BEL","adm0_a3_ps":"BEL","adm0_a3_sa":"BEL","adm0_a3_eg":"BEL","adm0_a3_ma":"BEL","adm0_a3_pt":"BEL","adm0_a3_ar":"BEL","adm0_a3_jp":"BEL","adm0_a3_ko":"BEL","adm0_a3_vn":"BEL","adm0_a3_tr":"BEL","adm0_a3_id":"BEL","adm0_a3_pl":"BEL","adm0_a3_gr":"BEL","adm0_a3_it":"BEL","adm0_a3_nl":"BEL","adm0_a3_se":"BEL","adm0_a3_bd":"BEL","adm0_a3_ua":"BEL","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":4.800448,"label_y":50.785392,"ne_id":1159320389,"wikidataid":"Q31","name_ar":"بلجيكا","name_bn":"বেলজিয়াম","name_de":"Belgien","name_en":"Belgium","name_es":"Bélgica","name_fa":"بلژیک","name_fr":"Belgique","name_el":"Βέλγιο","name_he":"בלגיה","name_hi":"बेल्जियम","name_hu":"Belgium","name_id":"Belgia","name_it":"Belgio","name_ja":"ベルギー","name_ko":"벨기에","name_nl":"België","name_pl":"Belgia","name_pt":"Bélgica","name_ru":"Бельгия","name_sv":"Belgien","name_tr":"Belçika","name_uk":"Бельгія","name_ur":"بلجئیم","name_vi":"Bỉ","name_zh":"比利时","name_zht":"比利時","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"BEL.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[21.02004,40.842727],[20.605182,41.086226],[20.463175,41.515089],[20.590247,41.855404],[20.590247,41.855409],[20.52295,42.21787],[20.283755,42.32026],[20.0707,42.58863],[19.801613,42.500093],[19.738051,42.688247],[19.304486,42.195745],[19.371768,41.877551],[19.371769,41.877548],[19.540027,41.719986],[19.40355,41.409566],[19.319059,40.72723],[19.406082,40.250773],[19.960002,39.915006],[19.98,39.694993],[20.150016,39.624998],[20.615,40.110007],[20.674997,40.435],[20.99999,40.580004],[21.02004,40.842727]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Albania","sov_a3":"ALB","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Albania","adm0_a3":"ALB","geou_dif":0,"geounit":"Albania","gu_a3":"ALB","su_dif":0,"subunit":"Albania","su_a3":"ALB","brk_diff":0,"name":"Albania","name_long":"Albania","brk_a3":"ALB","brk_name":"Albania","brk_group":null,"abbrev":"Alb.","postal":"AL","formal_en":"Republic of Albania","formal_fr":null,"name_ciawf":"Albania","note_adm0":null,"note_brk":null,"name_sort":"Albania","name_alt":null,"mapcolor7":1,"mapcolor8":4,"mapcolor9":1,"mapcolor13":6,"pop_est":2854191,"pop_rank":12,"pop_year":2019,"gdp_md":15279,"gdp_year":2019,"economy":"6. Developing region","income_grp":"4. Lower middle income","fips_10":"AL","iso_a2":"AL","iso_a2_eh":"AL","iso_a3":"ALB","iso_a3_eh":"ALB","iso_n3":"008","iso_n3_eh":"008","un_a3":"008","wb_a2":"AL","wb_a3":"ALB","woe_id":23424742,"woe_id_eh":23424742,"woe_note":"Exact WOE match as country","adm0_iso":"ALB","adm0_diff":null,"adm0_tlc":"ALB","adm0_a3_us":"ALB","adm0_a3_fr":"ALB","adm0_a3_ru":"ALB","adm0_a3_es":"ALB","adm0_a3_cn":"ALB","adm0_a3_tw":"ALB","adm0_a3_in":"ALB","adm0_a3_np":"ALB","adm0_a3_pk":"ALB","adm0_a3_de":"ALB","adm0_a3_gb":"ALB","adm0_a3_br":"ALB","adm0_a3_il":"ALB","adm0_a3_ps":"ALB","adm0_a3_sa":"ALB","adm0_a3_eg":"ALB","adm0_a3_ma":"ALB","adm0_a3_pt":"ALB","adm0_a3_ar":"ALB","adm0_a3_jp":"ALB","adm0_a3_ko":"ALB","adm0_a3_vn":"ALB","adm0_a3_tr":"ALB","adm0_a3_id":"ALB","adm0_a3_pl":"ALB","adm0_a3_gr":"ALB","adm0_a3_it":"ALB","adm0_a3_nl":"ALB","adm0_a3_se":"ALB","adm0_a3_bd":"ALB","adm0_a3_ua":"ALB","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":5,"max_label":10,"label_x":20.11384,"label_y":40.654855,"ne_id":1159320325,"wikidataid":"Q222","name_ar":"ألبانيا","name_bn":"আলবেনিয়া","name_de":"Albanien","name_en":"Albania","name_es":"Albania","name_fa":"آلبانی","name_fr":"Albanie","name_el":"Αλβανία","name_he":"אלבניה","name_hi":"अल्बानिया","name_hu":"Albánia","name_id":"Albania","name_it":"Albania","name_ja":"アルバニア","name_ko":"알바니아","name_nl":"Albanië","name_pl":"Albania","name_pt":"Albânia","name_ru":"Албания","name_sv":"Albanien","name_tr":"Arnavutluk","name_uk":"Албанія","name_ur":"البانیا","name_vi":"Albania","name_zh":"阿尔巴尼亚","name_zht":"阿爾巴尼亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"ALB.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[20.590247,41.855409],[20.71731,41.84711],[20.76216,42.05186],[21.3527,42.2068],[21.576636,42.245224],[21.54332,42.32025],[21.66292,42.43922],[21.77505,42.6827],[21.63302,42.67717],[21.43866,42.86255],[21.27421,42.90959],[21.143395,43.068685],[20.95651,43.13094],[20.81448,43.27205],[20.63508,43.21671],[20.49679,42.88469],[20.25758,42.81275],[20.0707,42.58863],[20.283755,42.32026],[20.52295,42.21787],[20.590247,41.855409]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Kosovo","sov_a3":"KOS","adm0_dif":0,"level":2,"type":"Disputed","tlc":"1","admin":"Kosovo","adm0_a3":"KOS","geou_dif":0,"geounit":"Kosovo","gu_a3":"KOS","su_dif":0,"subunit":"Kosovo","su_a3":"KOS","brk_diff":0,"name":"Kosovo","name_long":"Kosovo","brk_a3":"KOS","brk_name":"Kosovo","brk_group":null,"abbrev":"Kos.","postal":"KO","formal_en":"Republic of Kosovo","formal_fr":null,"name_ciawf":"Kosovo","note_adm0":null,"note_brk":null,"name_sort":"Kosovo","name_alt":null,"mapcolor7":2,"mapcolor8":2,"mapcolor9":3,"mapcolor13":11,"pop_est":1794248,"pop_rank":12,"pop_year":2019,"gdp_md":7926,"gdp_year":2019,"economy":"6. Developing region","income_grp":"4. Lower middle income","fips_10":"KV","iso_a2":"-99","iso_a2_eh":"XK","iso_a3":"-99","iso_a3_eh":"-99","iso_n3":"-99","iso_n3_eh":"-99","un_a3":"-099","wb_a2":"KV","wb_a3":"KSV","woe_id":-90,"woe_id_eh":29389201,"woe_note":"Subunit of Serbia in WOE still; should include 29389201, 29389207, 29389218, 29389209 and 29389214.","adm0_iso":"SRB","adm0_diff":"1","adm0_tlc":"KOS","adm0_a3_us":"KOS","adm0_a3_fr":"KOS","adm0_a3_ru":"SRB","adm0_a3_es":"SRB","adm0_a3_cn":"SRB","adm0_a3_tw":"KOS","adm0_a3_in":"SRB","adm0_a3_np":"SRB","adm0_a3_pk":"KOS","adm0_a3_de":"KOS","adm0_a3_gb":"SRB","adm0_a3_br":"KOS","adm0_a3_il":"KOS","adm0_a3_ps":"SRB","adm0_a3_sa":"KOS","adm0_a3_eg":"KOS","adm0_a3_ma":"SRB","adm0_a3_pt":"KOS","adm0_a3_ar":"SRB","adm0_a3_jp":"KOS","adm0_a3_ko":"KOS","adm0_a3_vn":"SRB","adm0_a3_tr":"KOS","adm0_a3_id":"SRB","adm0_a3_pl":"KOS","adm0_a3_gr":"SRB","adm0_a3_it":"KOS","adm0_a3_nl":"KOS","adm0_a3_se":"KOS","adm0_a3_bd":"KOS","adm0_a3_ua":"SRB","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":5,"max_label":10,"label_x":20.860719,"label_y":42.593587,"ne_id":1159321007,"wikidataid":"Q1246","name_ar":"كوسوفو","name_bn":"কসোভো","name_de":"Kosovo","name_en":"Kosovo","name_es":"Kosovo","name_fa":"کوزووو","name_fr":"Kosovo","name_el":"Κοσσυφοπέδιο","name_he":"קוסובו","name_hi":"कोसोवो गणराज्य","name_hu":"Koszovó","name_id":"Kosovo","name_it":"Kosovo","name_ja":"コソボ共和国","name_ko":"코소보","name_nl":"Kosovo","name_pl":"Kosowo","name_pt":"Kosovo","name_ru":"Республика Косово","name_sv":"Kosovo","name_tr":"Kosova","name_uk":"Косово","name_ur":"کوسووہ","name_vi":"Kosovo","name_zh":"科索沃","name_zht":"科索沃","fclass_iso":"Unrecognized","tlc_diff":"1","fclass_tlc":"Admin-0 country","fclass_us":"Admin-0 country","fclass_fr":"Admin-0 country","fclass_ru":"Admin-1 region","fclass_es":"Unrecognized","fclass_cn":"Unrecognized","fclass_tw":"Admin-0 country","fclass_in":"Admin-1 region","fclass_np":"Unrecognized","fclass_pk":"Admin-0 country","fclass_de":"Admin-0 country","fclass_gb":"Admin-0 country","fclass_br":"Unrecognized","fclass_il":"Admin-0 country","fclass_ps":"Unrecognized","fclass_sa":"Admin-0 country","fclass_eg":"Admin-0 country","fclass_ma":"Unrecognized","fclass_pt":"Admin-0 country","fclass_ar":"Unrecognized","fclass_jp":"Admin-0 country","fclass_ko":"Admin-0 country","fclass_vn":"Unrecognized","fclass_tr":"Admin-0 country","fclass_id":"Unrecognized","fclass_pl":"Admin-0 country","fclass_gr":"Unrecognized","fclass_it":"Admin-0 country","fclass_nl":"Admin-0 country","fclass_se":"Admin-0 country","fclass_bd":"Admin-0 country","fclass_ua":"Unrecognized","filename":"kosovo.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-7.453726,37.097788],[-6.520191,36.942913],[-6.236694,36.367677],[-5.866432,36.029817],[-5.37716,35.94685],[-4.995219,36.324708],[-4.368901,36.677839],[-3.415781,36.6589],[-2.146453,36.674144],[-1.438382,37.443064],[-0.683389,37.642354],[-0.467124,38.292366],[0.111291,38.738514],[-0.278711,39.309978],[0.106692,40.123934],[0.721331,40.678318],[0.810525,41.014732],[2.091842,41.226089],[3.039484,41.89212],[2.985999,42.473015],[1.826793,42.343385],[0.701591,42.795734],[0.338047,42.579546],[-1.502771,43.034014],[-1.901351,43.422802],[-3.517532,43.455901],[-4.347843,43.403449],[-5.411886,43.57424],[-6.754492,43.567909],[-7.97819,43.748338],[-9.392884,43.026625],[-8.984433,42.592775],[-9.034818,41.880571],[-8.671946,42.134689],[-8.263857,42.280469],[-8.013175,41.790886],[-7.422513,41.792075],[-7.251309,41.918346],[-6.668606,41.883387],[-6.389088,41.381815],[-6.851127,41.111083],[-6.86402,40.330872],[-7.026413,40.184524],[-7.066592,39.711892],[-7.498632,39.629571],[-7.098037,39.030073],[-7.374092,38.373059],[-7.029281,38.075764],[-7.166508,37.803894],[-7.537105,37.428904],[-7.453726,37.097788]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"Spain","sov_a3":"ESP","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Spain","adm0_a3":"ESP","geou_dif":0,"geounit":"Spain","gu_a3":"ESP","su_dif":0,"subunit":"Spain","su_a3":"ESP","brk_diff":0,"name":"Spain","name_long":"Spain","brk_a3":"ESP","brk_name":"Spain","brk_group":null,"abbrev":"Sp.","postal":"E","formal_en":"Kingdom of Spain","formal_fr":null,"name_ciawf":"Spain","note_adm0":null,"note_brk":null,"name_sort":"Spain","name_alt":null,"mapcolor7":4,"mapcolor8":5,"mapcolor9":5,"mapcolor13":5,"pop_est":47076781,"pop_rank":15,"pop_year":2019,"gdp_md":1393490,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"SP","iso_a2":"ES","iso_a2_eh":"ES","iso_a3":"ESP","iso_a3_eh":"ESP","iso_n3":"724","iso_n3_eh":"724","un_a3":"724","wb_a2":"ES","wb_a3":"ESP","woe_id":23424950,"woe_id_eh":23424950,"woe_note":"Exact WOE match as country","adm0_iso":"ESP","adm0_diff":null,"adm0_tlc":"ESP","adm0_a3_us":"ESP","adm0_a3_fr":"ESP","adm0_a3_ru":"ESP","adm0_a3_es":"ESP","adm0_a3_cn":"ESP","adm0_a3_tw":"ESP","adm0_a3_in":"ESP","adm0_a3_np":"ESP","adm0_a3_pk":"ESP","adm0_a3_de":"ESP","adm0_a3_gb":"ESP","adm0_a3_br":"ESP","adm0_a3_il":"ESP","adm0_a3_ps":"ESP","adm0_a3_sa":"ESP","adm0_a3_eg":"ESP","adm0_a3_ma":"ESP","adm0_a3_pt":"ESP","adm0_a3_ar":"ESP","adm0_a3_jp":"ESP","adm0_a3_ko":"ESP","adm0_a3_vn":"ESP","adm0_a3_tr":"ESP","adm0_a3_id":"ESP","adm0_a3_pl":"ESP","adm0_a3_gr":"ESP","adm0_a3_it":"ESP","adm0_a3_nl":"ESP","adm0_a3_se":"ESP","adm0_a3_bd":"ESP","adm0_a3_ua":"ESP","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":5,"long_len":5,"abbrev_len":3,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2,"max_label":7,"label_x":-3.464718,"label_y":40.090953,"ne_id":1159320587,"wikidataid":"Q29","name_ar":"إسبانيا","name_bn":"স্পেন","name_de":"Spanien","name_en":"Spain","name_es":"España","name_fa":"اسپانیا","name_fr":"Espagne","name_el":"Ισπανία","name_he":"ספרד","name_hi":"स्पेन","name_hu":"Spanyolország","name_id":"Spanyol","name_it":"Spagna","name_ja":"スペイン","name_ko":"스페인","name_nl":"Spanje","name_pl":"Hiszpania","name_pt":"Espanha","name_ru":"Испания","name_sv":"Spanien","name_tr":"İspanya","name_uk":"Іспанія","name_ur":"ہسپانیہ","name_vi":"Tây Ban Nha","name_zh":"西班牙","name_zht":"西班牙","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"ESP.geojson"}},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[9.921906,54.983104],[9.649985,55.469999],[10.369993,56.190007],[10.667804,56.081383],[10.912182,56.458621],[10.369993,56.609982],[10.25,56.890016],[10.546106,57.215733],[10.580006,57.730017],[9.775559,57.447941],[9.424469,57.172066],[8.543438,57.110003],[8.256582,56.809969],[8.089977,56.540012],[8.120311,55.517723],[8.526229,54.962744],[9.282049,54.830865],[9.921906,54.983104]]],[[[12.370904,56.111407],[10.903914,55.779955],[11.043543,55.364864],[12.089991,54.800015],[12.690006,55.609991],[12.370904,56.111407]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":4,"sovereignt":"Denmark","sov_a3":"DN1","adm0_dif":1,"level":2,"type":"Country","tlc":"1","admin":"Denmark","adm0_a3":"DNK","geou_dif":0,"geounit":"Denmark","gu_a3":"DNK","su_dif":0,"subunit":"Denmark","su_a3":"DNK","brk_diff":0,"name":"Denmark","name_long":"Denmark","brk_a3":"DNK","brk_name":"Denmark","brk_group":null,"abbrev":"Den.","postal":"DK","formal_en":"Kingdom of Denmark","formal_fr":null,"name_ciawf":"Denmark","note_adm0":null,"note_brk":null,"name_sort":"Denmark","name_alt":null,"mapcolor7":4,"mapcolor8":1,"mapcolor9":3,"mapcolor13":12,"pop_est":5818553,"pop_rank":13,"pop_year":2019,"gdp_md":350104,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"DA","iso_a2":"DK","iso_a2_eh":"DK","iso_a3":"DNK","iso_a3_eh":"DNK","iso_n3":"208","iso_n3_eh":"208","un_a3":"208","wb_a2":"DK","wb_a3":"DNK","woe_id":23424796,"woe_id_eh":23424796,"woe_note":"Exact WOE match as country","adm0_iso":"DNK","adm0_diff":null,"adm0_tlc":"DNK","adm0_a3_us":"DNK","adm0_a3_fr":"DNK","adm0_a3_ru":"DNK","adm0_a3_es":"DNK","adm0_a3_cn":"DNK","adm0_a3_tw":"DNK","adm0_a3_in":"DNK","adm0_a3_np":"DNK","adm0_a3_pk":"DNK","adm0_a3_de":"DNK","adm0_a3_gb":"DNK","adm0_a3_br":"DNK","adm0_a3_il":"DNK","adm0_a3_ps":"DNK","adm0_a3_sa":"DNK","adm0_a3_eg":"DNK","adm0_a3_ma":"DNK","adm0_a3_pt":"DNK","adm0_a3_ar":"DNK","adm0_a3_jp":"DNK","adm0_a3_ko":"DNK","adm0_a3_vn":"DNK","adm0_a3_tr":"DNK","adm0_a3_id":"DNK","adm0_a3_pl":"DNK","adm0_a3_gr":"DNK","adm0_a3_it":"DNK","adm0_a3_nl":"DNK","adm0_a3_se":"DNK","adm0_a3_bd":"DNK","adm0_a3_ua":"DNK","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":9.018163,"label_y":55.966965,"ne_id":1159320547,"wikidataid":"Q35","name_ar":"الدنمارك","name_bn":"ডেনমার্ক","name_de":"Dänemark","name_en":"Denmark","name_es":"Dinamarca","name_fa":"دانمارک","name_fr":"Danemark","name_el":"Δανία","name_he":"דנמרק","name_hi":"डेनमार्क","name_hu":"Dánia","name_id":"Denmark","name_it":"Danimarca","name_ja":"デンマーク","name_ko":"덴마크","name_nl":"Denemarken","name_pl":"Dania","name_pt":"Dinamarca","name_ru":"Дания","name_sv":"Danmark","name_tr":"Danimarka","name_uk":"Данія","name_ur":"ڈنمارک","name_vi":"Đan Mạch","name_zh":"丹麦","name_zht":"丹麥","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"DNK.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[28.233554,45.488283],[28.054443,45.944586],[28.160018,46.371563],[28.12803,46.810476],[27.551166,47.405117],[27.233873,47.826771],[26.924176,48.123264],[26.619337,48.220726],[26.19745,48.220881],[25.945941,47.987149],[25.207743,47.891056],[24.866317,47.737526],[24.402056,47.981878],[23.760958,47.985598],[23.142236,48.096341],[22.710531,47.882194],[22.099768,47.672439],[21.626515,46.994238],[21.021952,46.316088],[20.220192,46.127469],[20.762175,45.734573],[20.874313,45.416375],[21.483526,45.18117],[21.562023,44.768947],[22.145088,44.478422],[22.459022,44.702517],[22.705726,44.578003],[22.474008,44.409228],[22.65715,44.234923],[22.944832,43.823785],[23.332302,43.897011],[24.100679,43.741051],[25.569272,43.688445],[26.065159,43.943494],[27.2424,44.175986],[27.970107,43.812468],[28.558081,43.707462],[28.837858,44.913874],[29.141612,44.82021],[29.626543,45.035391],[29.603289,45.293308],[29.149725,45.464925],[28.679779,45.304031],[28.233554,45.488283]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Romania","sov_a3":"ROU","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Romania","adm0_a3":"ROU","geou_dif":0,"geounit":"Romania","gu_a3":"ROU","su_dif":0,"subunit":"Romania","su_a3":"ROU","brk_diff":0,"name":"Romania","name_long":"Romania","brk_a3":"ROU","brk_name":"Romania","brk_group":null,"abbrev":"Rom.","postal":"RO","formal_en":"Romania","formal_fr":null,"name_ciawf":"Romania","note_adm0":null,"note_brk":null,"name_sort":"Romania","name_alt":null,"mapcolor7":1,"mapcolor8":4,"mapcolor9":3,"mapcolor13":13,"pop_est":19356544,"pop_rank":14,"pop_year":2019,"gdp_md":250077,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"3. Upper middle income","fips_10":"RO","iso_a2":"RO","iso_a2_eh":"RO","iso_a3":"ROU","iso_a3_eh":"ROU","iso_n3":"642","iso_n3_eh":"642","un_a3":"642","wb_a2":"RO","wb_a3":"ROM","woe_id":23424933,"woe_id_eh":23424933,"woe_note":"Exact WOE match as country","adm0_iso":"ROU","adm0_diff":null,"adm0_tlc":"ROU","adm0_a3_us":"ROU","adm0_a3_fr":"ROU","adm0_a3_ru":"ROU","adm0_a3_es":"ROU","adm0_a3_cn":"ROU","adm0_a3_tw":"ROU","adm0_a3_in":"ROU","adm0_a3_np":"ROU","adm0_a3_pk":"ROU","adm0_a3_de":"ROU","adm0_a3_gb":"ROU","adm0_a3_br":"ROU","adm0_a3_il":"ROU","adm0_a3_ps":"ROU","adm0_a3_sa":"ROU","adm0_a3_eg":"ROU","adm0_a3_ma":"ROU","adm0_a3_pt":"ROU","adm0_a3_ar":"ROU","adm0_a3_jp":"ROU","adm0_a3_ko":"ROU","adm0_a3_vn":"ROU","adm0_a3_tr":"ROU","adm0_a3_id":"ROU","adm0_a3_pl":"ROU","adm0_a3_gr":"ROU","adm0_a3_it":"ROU","adm0_a3_nl":"ROU","adm0_a3_se":"ROU","adm0_a3_bd":"ROU","adm0_a3_ua":"ROU","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":24.972624,"label_y":45.733237,"ne_id":1159321199,"wikidataid":"Q218","name_ar":"رومانيا","name_bn":"রোমানিয়া","name_de":"Rumänien","name_en":"Romania","name_es":"Rumania","name_fa":"رومانی","name_fr":"Roumanie","name_el":"Ρουμανία","name_he":"רומניה","name_hi":"रोमानिया","name_hu":"Románia","name_id":"Rumania","name_it":"Romania","name_ja":"ルーマニア","name_ko":"루마니아","name_nl":"Roemenië","name_pl":"Rumunia","name_pt":"Roménia","name_ru":"Румыния","name_sv":"Rumänien","name_tr":"Romanya","name_uk":"Румунія","name_ur":"رومانیہ","name_vi":"Romania","name_zh":"罗马尼亚","name_zht":"羅馬尼亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"ROU.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[22.085608,48.422264],[21.872236,48.319971],[20.801294,48.623854],[20.473562,48.56285],[20.239054,48.327567],[19.769471,48.202691],[19.661364,48.266615],[19.174365,48.111379],[18.777025,48.081768],[18.696513,47.880954],[17.857133,47.758429],[17.488473,47.867466],[16.979667,48.123497],[16.903754,47.714866],[16.340584,47.712902],[16.534268,47.496171],[16.202298,46.852386],[16.370505,46.841327],[16.564808,46.503751],[16.882515,46.380632],[17.630066,45.951769],[18.456062,45.759481],[18.829825,45.908872],[18.829838,45.908878],[19.596045,46.17173],[20.220192,46.127469],[21.021952,46.316088],[21.626515,46.994238],[22.099768,47.672439],[22.710531,47.882194],[22.64082,48.15024],[22.085608,48.422264]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Hungary","sov_a3":"HUN","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Hungary","adm0_a3":"HUN","geou_dif":0,"geounit":"Hungary","gu_a3":"HUN","su_dif":0,"subunit":"Hungary","su_a3":"HUN","brk_diff":0,"name":"Hungary","name_long":"Hungary","brk_a3":"HUN","brk_name":"Hungary","brk_group":null,"abbrev":"Hun.","postal":"HU","formal_en":"Republic of Hungary","formal_fr":null,"name_ciawf":"Hungary","note_adm0":null,"note_brk":null,"name_sort":"Hungary","name_alt":null,"mapcolor7":4,"mapcolor8":6,"mapcolor9":1,"mapcolor13":5,"pop_est":9769949,"pop_rank":13,"pop_year":2019,"gdp_md":163469,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"HU","iso_a2":"HU","iso_a2_eh":"HU","iso_a3":"HUN","iso_a3_eh":"HUN","iso_n3":"348","iso_n3_eh":"348","un_a3":"348","wb_a2":"HU","wb_a3":"HUN","woe_id":23424844,"woe_id_eh":23424844,"woe_note":"Exact WOE match as country","adm0_iso":"HUN","adm0_diff":null,"adm0_tlc":"HUN","adm0_a3_us":"HUN","adm0_a3_fr":"HUN","adm0_a3_ru":"HUN","adm0_a3_es":"HUN","adm0_a3_cn":"HUN","adm0_a3_tw":"HUN","adm0_a3_in":"HUN","adm0_a3_np":"HUN","adm0_a3_pk":"HUN","adm0_a3_de":"HUN","adm0_a3_gb":"HUN","adm0_a3_br":"HUN","adm0_a3_il":"HUN","adm0_a3_ps":"HUN","adm0_a3_sa":"HUN","adm0_a3_eg":"HUN","adm0_a3_ma":"HUN","adm0_a3_pt":"HUN","adm0_a3_ar":"HUN","adm0_a3_jp":"HUN","adm0_a3_ko":"HUN","adm0_a3_vn":"HUN","adm0_a3_tr":"HUN","adm0_a3_id":"HUN","adm0_a3_pl":"HUN","adm0_a3_gr":"HUN","adm0_a3_it":"HUN","adm0_a3_nl":"HUN","adm0_a3_se":"HUN","adm0_a3_bd":"HUN","adm0_a3_ua":"HUN","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":19.447867,"label_y":47.086841,"ne_id":1159320841,"wikidataid":"Q28","name_ar":"المجر","name_bn":"হাঙ্গেরি","name_de":"Ungarn","name_en":"Hungary","name_es":"Hungría","name_fa":"مجارستان","name_fr":"Hongrie","name_el":"Ουγγαρία","name_he":"הונגריה","name_hi":"हंगरी","name_hu":"Magyarország","name_id":"Hongaria","name_it":"Ungheria","name_ja":"ハンガリー","name_ko":"헝가리","name_nl":"Hongarije","name_pl":"Węgry","name_pt":"Hungria","name_ru":"Венгрия","name_sv":"Ungern","name_tr":"Macaristan","name_uk":"Угорщина","name_ur":"ہنگری","name_vi":"Hungary","name_zh":"匈牙利","name_zht":"匈牙利","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"HUN.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[22.558138,49.085738],[21.607808,49.470107],[20.887955,49.328772],[20.415839,49.431453],[19.825023,49.217125],[19.320713,49.571574],[18.909575,49.435846],[18.853144,49.49623],[18.554971,49.495015],[18.399994,49.315001],[18.170498,49.271515],[18.104973,49.043983],[17.913512,48.996493],[17.886485,48.903475],[17.545007,48.800019],[17.101985,48.816969],[16.960288,48.596982],[16.879983,48.470013],[16.979667,48.123497],[17.488473,47.867466],[17.857133,47.758429],[18.696513,47.880954],[18.777025,48.081768],[19.174365,48.111379],[19.661364,48.266615],[19.769471,48.202691],[20.239054,48.327567],[20.473562,48.56285],[20.801294,48.623854],[21.872236,48.319971],[22.085608,48.422264],[22.280842,48.825392],[22.558138,49.085738]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Slovakia","sov_a3":"SVK","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Slovakia","adm0_a3":"SVK","geou_dif":0,"geounit":"Slovakia","gu_a3":"SVK","su_dif":0,"subunit":"Slovakia","su_a3":"SVK","brk_diff":0,"name":"Slovakia","name_long":"Slovakia","brk_a3":"SVK","brk_name":"Slovakia","brk_group":null,"abbrev":"Svk.","postal":"SK","formal_en":"Slovak Republic","formal_fr":null,"name_ciawf":"Slovakia","note_adm0":null,"note_brk":null,"name_sort":"Slovak Republic","name_alt":null,"mapcolor7":2,"mapcolor8":4,"mapcolor9":4,"mapcolor13":9,"pop_est":5454073,"pop_rank":13,"pop_year":2019,"gdp_md":105079,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"LO","iso_a2":"SK","iso_a2_eh":"SK","iso_a3":"SVK","iso_a3_eh":"SVK","iso_n3":"703","iso_n3_eh":"703","un_a3":"703","wb_a2":"SK","wb_a3":"SVK","woe_id":23424877,"woe_id_eh":23424877,"woe_note":"Exact WOE match as country","adm0_iso":"SVK","adm0_diff":null,"adm0_tlc":"SVK","adm0_a3_us":"SVK","adm0_a3_fr":"SVK","adm0_a3_ru":"SVK","adm0_a3_es":"SVK","adm0_a3_cn":"SVK","adm0_a3_tw":"SVK","adm0_a3_in":"SVK","adm0_a3_np":"SVK","adm0_a3_pk":"SVK","adm0_a3_de":"SVK","adm0_a3_gb":"SVK","adm0_a3_br":"SVK","adm0_a3_il":"SVK","adm0_a3_ps":"SVK","adm0_a3_sa":"SVK","adm0_a3_eg":"SVK","adm0_a3_ma":"SVK","adm0_a3_pt":"SVK","adm0_a3_ar":"SVK","adm0_a3_jp":"SVK","adm0_a3_ko":"SVK","adm0_a3_vn":"SVK","adm0_a3_tr":"SVK","adm0_a3_id":"SVK","adm0_a3_pl":"SVK","adm0_a3_gr":"SVK","adm0_a3_it":"SVK","adm0_a3_nl":"SVK","adm0_a3_se":"SVK","adm0_a3_bd":"SVK","adm0_a3_ua":"SVK","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":8,"long_len":8,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":19.049868,"label_y":48.734044,"ne_id":1159321283,"wikidataid":"Q214","name_ar":"سلوفاكيا","name_bn":"স্লোভাকিয়া","name_de":"Slowakei","name_en":"Slovakia","name_es":"Eslovaquia","name_fa":"اسلواکی","name_fr":"Slovaquie","name_el":"Σλοβακία","name_he":"סלובקיה","name_hi":"स्लोवाकिया","name_hu":"Szlovákia","name_id":"Slowakia","name_it":"Slovacchia","name_ja":"スロバキア","name_ko":"슬로바키아","name_nl":"Slowakije","name_pl":"Słowacja","name_pt":"Eslováquia","name_ru":"Словакия","name_sv":"Slovakien","name_tr":"Slovakya","name_uk":"Словаччина","name_ur":"سلوواکیہ","name_vi":"Slovakia","name_zh":"斯洛伐克","name_zht":"斯洛伐克","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"SVK.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[23.484128,53.912498],[23.243987,54.220567],[22.731099,54.327537],[20.892245,54.312525],[19.66064,54.426084],[18.696255,54.438719],[18.620859,54.682606],[17.622832,54.851536],[16.363477,54.513159],[14.8029,54.050706],[14.119686,53.757029],[14.353315,53.248171],[14.074521,52.981263],[14.4376,52.62485],[14.685026,52.089947],[14.607098,51.745188],[15.016996,51.106674],[15.490972,50.78473],[16.238627,50.697733],[16.176253,50.422607],[16.719476,50.215747],[16.868769,50.473974],[17.554567,50.362146],[17.649445,50.049038],[18.392914,49.988629],[18.853144,49.49623],[18.909575,49.435846],[19.320713,49.571574],[19.825023,49.217125],[20.415839,49.431453],[20.887955,49.328772],[21.607808,49.470107],[22.558138,49.085738],[22.776419,49.027395],[22.51845,49.476774],[23.426508,50.308506],[23.922757,50.424881],[24.029986,50.705407],[23.527071,51.578454],[23.508002,52.023647],[23.199494,52.486977],[23.799199,52.691099],[23.804935,53.089731],[23.527536,53.470122],[23.484128,53.912498]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Poland","sov_a3":"POL","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Poland","adm0_a3":"POL","geou_dif":0,"geounit":"Poland","gu_a3":"POL","su_dif":0,"subunit":"Poland","su_a3":"POL","brk_diff":0,"name":"Poland","name_long":"Poland","brk_a3":"POL","brk_name":"Poland","brk_group":null,"abbrev":"Pol.","postal":"PL","formal_en":"Republic of Poland","formal_fr":null,"name_ciawf":"Poland","note_adm0":null,"note_brk":null,"name_sort":"Poland","name_alt":null,"mapcolor7":3,"mapcolor8":7,"mapcolor9":1,"mapcolor13":2,"pop_est":37970874,"pop_rank":15,"pop_year":2019,"gdp_md":595858,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"PL","iso_a2":"PL","iso_a2_eh":"PL","iso_a3":"POL","iso_a3_eh":"POL","iso_n3":"616","iso_n3_eh":"616","un_a3":"616","wb_a2":"PL","wb_a3":"POL","woe_id":23424923,"woe_id_eh":23424923,"woe_note":"Exact WOE match as country","adm0_iso":"POL","adm0_diff":null,"adm0_tlc":"POL","adm0_a3_us":"POL","adm0_a3_fr":"POL","adm0_a3_ru":"POL","adm0_a3_es":"POL","adm0_a3_cn":"POL","adm0_a3_tw":"POL","adm0_a3_in":"POL","adm0_a3_np":"POL","adm0_a3_pk":"POL","adm0_a3_de":"POL","adm0_a3_gb":"POL","adm0_a3_br":"POL","adm0_a3_il":"POL","adm0_a3_ps":"POL","adm0_a3_sa":"POL","adm0_a3_eg":"POL","adm0_a3_ma":"POL","adm0_a3_pt":"POL","adm0_a3_ar":"POL","adm0_a3_jp":"POL","adm0_a3_ko":"POL","adm0_a3_vn":"POL","adm0_a3_tr":"POL","adm0_a3_id":"POL","adm0_a3_pl":"POL","adm0_a3_gr":"POL","adm0_a3_it":"POL","adm0_a3_nl":"POL","adm0_a3_se":"POL","adm0_a3_bd":"POL","adm0_a3_ua":"POL","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2.5,"max_label":7,"label_x":19.490468,"label_y":51.990316,"ne_id":1159321179,"wikidataid":"Q36","name_ar":"بولندا","name_bn":"পোল্যান্ড","name_de":"Polen","name_en":"Poland","name_es":"Polonia","name_fa":"لهستان","name_fr":"Pologne","name_el":"Πολωνία","name_he":"פולין","name_hi":"पोलैंड","name_hu":"Lengyelország","name_id":"Polandia","name_it":"Polonia","name_ja":"ポーランド","name_ko":"폴란드","name_nl":"Polen","name_pl":"Polska","name_pt":"Polónia","name_ru":"Польша","name_sv":"Polen","name_tr":"Polonya","name_uk":"Польща","name_ur":"پولینڈ","name_vi":"Ba Lan","name_zh":"波兰","name_zht":"波蘭","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"POL.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-6.197885,53.867565],[-6.95373,54.073702],[-7.572168,54.059956],[-7.366031,54.595841],[-7.572168,55.131622],[-8.327987,54.664519],[-9.688525,53.881363],[-9.166283,52.864629],[-9.977086,51.820455],[-8.561617,51.669301],[-6.788857,52.260118],[-6.032985,53.153164],[-6.197885,53.867565]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Ireland","sov_a3":"IRL","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Ireland","adm0_a3":"IRL","geou_dif":0,"geounit":"Ireland","gu_a3":"IRL","su_dif":0,"subunit":"Ireland","su_a3":"IRL","brk_diff":0,"name":"Ireland","name_long":"Ireland","brk_a3":"IRL","brk_name":"Ireland","brk_group":null,"abbrev":"Ire.","postal":"IRL","formal_en":"Ireland","formal_fr":null,"name_ciawf":"Ireland","note_adm0":null,"note_brk":null,"name_sort":"Ireland","name_alt":null,"mapcolor7":2,"mapcolor8":3,"mapcolor9":2,"mapcolor13":2,"pop_est":4941444,"pop_rank":12,"pop_year":2019,"gdp_md":388698,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"EI","iso_a2":"IE","iso_a2_eh":"IE","iso_a3":"IRL","iso_a3_eh":"IRL","iso_n3":"372","iso_n3_eh":"372","un_a3":"372","wb_a2":"IE","wb_a3":"IRL","woe_id":23424803,"woe_id_eh":23424803,"woe_note":"Exact WOE match as country","adm0_iso":"IRL","adm0_diff":null,"adm0_tlc":"IRL","adm0_a3_us":"IRL","adm0_a3_fr":"IRL","adm0_a3_ru":"IRL","adm0_a3_es":"IRL","adm0_a3_cn":"IRL","adm0_a3_tw":"IRL","adm0_a3_in":"IRL","adm0_a3_np":"IRL","adm0_a3_pk":"IRL","adm0_a3_de":"IRL","adm0_a3_gb":"IRL","adm0_a3_br":"IRL","adm0_a3_il":"IRL","adm0_a3_ps":"IRL","adm0_a3_sa":"IRL","adm0_a3_eg":"IRL","adm0_a3_ma":"IRL","adm0_a3_pt":"IRL","adm0_a3_ar":"IRL","adm0_a3_jp":"IRL","adm0_a3_ko":"IRL","adm0_a3_vn":"IRL","adm0_a3_tr":"IRL","adm0_a3_id":"IRL","adm0_a3_pl":"IRL","adm0_a3_gr":"IRL","adm0_a3_it":"IRL","adm0_a3_nl":"IRL","adm0_a3_se":"IRL","adm0_a3_bd":"IRL","adm0_a3_ua":"IRL","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":-7.798588,"label_y":53.078726,"ne_id":1159320877,"wikidataid":"Q27","name_ar":"جمهورية أيرلندا","name_bn":"প্রজাতন্ত্রী আয়ারল্যান্ড","name_de":"Irland","name_en":"Ireland","name_es":"Irlanda","name_fa":"ایرلند","name_fr":"Irlande","name_el":"Δημοκρατία της Ιρλανδίας","name_he":"אירלנד","name_hi":"आयरलैण्ड","name_hu":"Írország","name_id":"Republik Irlandia","name_it":"Irlanda","name_ja":"アイルランド","name_ko":"아일랜드","name_nl":"Ierland","name_pl":"Irlandia","name_pt":"República da Irlanda","name_ru":"Ирландия","name_sv":"Irland","name_tr":"İrlanda","name_uk":"Ірландія","name_ur":"جمہوریہ آئرلینڈ","name_vi":"Cộng hòa Ireland","name_zh":"爱尔兰","name_zht":"愛爾蘭","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"IRL.geojson"}},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-6.197885,53.867565],[-5.661949,54.554603],[-6.733847,55.17286],[-7.572168,55.131622],[-7.366031,54.595841],[-7.572168,54.059956],[-6.95373,54.073702],[-6.197885,53.867565]]],[[[-3.093831,53.404547],[-4.579999,53.495004],[-4.770013,52.840005],[-4.222347,52.301356],[-5.267296,51.9914],[-4.984367,51.593466],[-3.422719,51.426848],[-3.414851,51.426009],[-4.30999,51.210001],[-5.776567,50.159678],[-5.245023,49.96],[-4.542508,50.341837],[-3.617448,50.228356],[-2.956274,50.69688],[-2.489998,50.500019],[-0.787517,50.774989],[0.550334,50.765739],[1.449865,51.289428],[1.050562,51.806761],[1.559988,52.099998],[1.681531,52.73952],[0.469977,52.929999],[0.184981,53.325014],[-0.430485,54.464376],[-1.114991,54.624986],[-2.005676,55.804903],[-2.085009,55.909998],[-3.119003,55.973793],[-2.219988,56.870017],[-1.959281,57.6848],[-3.055002,57.690019],[-4.073828,57.553025],[-3.005005,58.635],[-4.211495,58.550845],[-5.009999,58.630013],[-5.786825,57.818848],[-6.149981,56.78501],[-5.644999,56.275015],[-5.586398,55.311146],[-5.047981,55.783986],[-4.719112,55.508473],[-5.082527,55.061601],[-4.844169,54.790971],[-3.630005,54.615013],[-3.614701,54.600937],[-2.945009,53.985],[-3.09208,53.404441],[-3.093831,53.404547]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"United Kingdom","sov_a3":"GB1","adm0_dif":1,"level":2,"type":"Country","tlc":"1","admin":"United Kingdom","adm0_a3":"GBR","geou_dif":0,"geounit":"United Kingdom","gu_a3":"GBR","su_dif":0,"subunit":"United Kingdom","su_a3":"GBR","brk_diff":0,"name":"United Kingdom","name_long":"United Kingdom","brk_a3":"GBR","brk_name":"United Kingdom","brk_group":null,"abbrev":"U.K.","postal":"GB","formal_en":"United Kingdom of Great Britain and Northern Ireland","formal_fr":null,"name_ciawf":"United Kingdom","note_adm0":null,"note_brk":null,"name_sort":"United Kingdom","name_alt":null,"mapcolor7":6,"mapcolor8":6,"mapcolor9":6,"mapcolor13":3,"pop_est":66834405,"pop_rank":16,"pop_year":2019,"gdp_md":2829108,"gdp_year":2019,"economy":"1. Developed region: G7","income_grp":"1. High income: OECD","fips_10":"UK","iso_a2":"GB","iso_a2_eh":"GB","iso_a3":"GBR","iso_a3_eh":"GBR","iso_n3":"826","iso_n3_eh":"826","un_a3":"826","wb_a2":"GB","wb_a3":"GBR","woe_id":-90,"woe_id_eh":23424975,"woe_note":"Eh ID includes Channel Islands and Isle of Man. UK constituent countries of England (24554868), Wales (12578049), Scotland (12578048), and Northern Ireland (20070563).","adm0_iso":"GBR","adm0_diff":null,"adm0_tlc":"GBR","adm0_a3_us":"GBR","adm0_a3_fr":"GBR","adm0_a3_ru":"GBR","adm0_a3_es":"GBR","adm0_a3_cn":"GBR","adm0_a3_tw":"GBR","adm0_a3_in":"GBR","adm0_a3_np":"GBR","adm0_a3_pk":"GBR","adm0_a3_de":"GBR","adm0_a3_gb":"GBR","adm0_a3_br":"GBR","adm0_a3_il":"GBR","adm0_a3_ps":"GBR","adm0_a3_sa":"GBR","adm0_a3_eg":"GBR","adm0_a3_ma":"GBR","adm0_a3_pt":"GBR","adm0_a3_ar":"GBR","adm0_a3_jp":"GBR","adm0_a3_ko":"GBR","adm0_a3_vn":"GBR","adm0_a3_tr":"GBR","adm0_a3_id":"GBR","adm0_a3_pl":"GBR","adm0_a3_gr":"GBR","adm0_a3_it":"GBR","adm0_a3_nl":"GBR","adm0_a3_se":"GBR","adm0_a3_bd":"GBR","adm0_a3_ua":"GBR","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":14,"long_len":14,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":1.7,"max_label":6.7,"label_x":-2.116346,"label_y":54.402739,"ne_id":1159320713,"wikidataid":"Q145","name_ar":"المملكة المتحدة","name_bn":"যুক্তরাজ্য","name_de":"Vereinigtes Königreich","name_en":"United Kingdom","name_es":"Reino Unido","name_fa":"بریتانیا","name_fr":"Royaume-Uni","name_el":"Ηνωμένο Βασίλειο","name_he":"הממלכה המאוחדת","name_hi":"यूनाइटेड किंगडम","name_hu":"Egyesült Királyság","name_id":"Britania Raya","name_it":"Regno Unito","name_ja":"イギリス","name_ko":"영국","name_nl":"Verenigd Koninkrijk","name_pl":"Wielka Brytania","name_pt":"Reino Unido","name_ru":"Великобритания","name_sv":"Storbritannien","name_tr":"Birleşik Krallık","name_uk":"Велика Британія","name_ur":"مملکت متحدہ","name_vi":"Vương quốc Liên hiệp Anh và Bắc Ireland","name_zh":"英国","name_zht":"英國","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"GBR.geojson"}},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[26.290003,35.29999],[25.745023,35.179998],[25.769208,35.354018],[25.025015,35.424996],[24.246665,35.368022],[23.69998,35.705004],[23.514978,35.279992],[24.735007,35.084991],[24.724982,34.919988],[26.164998,35.004995],[26.290003,35.29999]]],[[[22.952377,41.337994],[22.76177,41.3048],[22.597308,41.130487],[22.055378,41.149866],[21.674161,40.931275],[21.02004,40.842727],[20.99999,40.580004],[20.674997,40.435],[20.615,40.110007],[20.150016,39.624998],[20.217712,39.340235],[20.730032,38.769985],[21.120034,38.310323],[21.295011,37.644989],[21.670026,36.844986],[22.490028,36.41],[23.154225,36.422506],[22.774972,37.30501],[23.409972,37.409991],[23.115003,37.920011],[24.040011,37.655015],[24.025025,38.219993],[23.530016,38.510001],[22.973099,38.970903],[23.350027,39.190011],[22.849748,39.659311],[22.626299,40.256561],[22.813988,40.476005],[23.342999,39.960998],[23.899968,39.962006],[24.407999,40.124993],[23.714811,40.687129],[24.925848,40.947062],[25.447677,40.852545],[26.056942,40.824123],[26.294602,40.936261],[26.604196,41.562115],[26.117042,41.826905],[26.106138,41.328899],[25.197201,41.234486],[24.492645,41.583896],[23.692074,41.309081],[22.952377,41.337994]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Greece","sov_a3":"GRC","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Greece","adm0_a3":"GRC","geou_dif":0,"geounit":"Greece","gu_a3":"GRC","su_dif":0,"subunit":"Greece","su_a3":"GRC","brk_diff":0,"name":"Greece","name_long":"Greece","brk_a3":"GRC","brk_name":"Greece","brk_group":null,"abbrev":"Greece","postal":"GR","formal_en":"Hellenic Republic","formal_fr":null,"name_ciawf":"Greece","note_adm0":null,"note_brk":null,"name_sort":"Greece","name_alt":null,"mapcolor7":2,"mapcolor8":2,"mapcolor9":2,"mapcolor13":9,"pop_est":10716322,"pop_rank":14,"pop_year":2019,"gdp_md":209852,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"GR","iso_a2":"GR","iso_a2_eh":"GR","iso_a3":"GRC","iso_a3_eh":"GRC","iso_n3":"300","iso_n3_eh":"300","un_a3":"300","wb_a2":"GR","wb_a3":"GRC","woe_id":23424833,"woe_id_eh":23424833,"woe_note":"Exact WOE match as country","adm0_iso":"GRC","adm0_diff":null,"adm0_tlc":"GRC","adm0_a3_us":"GRC","adm0_a3_fr":"GRC","adm0_a3_ru":"GRC","adm0_a3_es":"GRC","adm0_a3_cn":"GRC","adm0_a3_tw":"GRC","adm0_a3_in":"GRC","adm0_a3_np":"GRC","adm0_a3_pk":"GRC","adm0_a3_de":"GRC","adm0_a3_gb":"GRC","adm0_a3_br":"GRC","adm0_a3_il":"GRC","adm0_a3_ps":"GRC","adm0_a3_sa":"GRC","adm0_a3_eg":"GRC","adm0_a3_ma":"GRC","adm0_a3_pt":"GRC","adm0_a3_ar":"GRC","adm0_a3_jp":"GRC","adm0_a3_ko":"GRC","adm0_a3_vn":"GRC","adm0_a3_tr":"GRC","adm0_a3_id":"GRC","adm0_a3_pl":"GRC","adm0_a3_gr":"GRC","adm0_a3_it":"GRC","adm0_a3_nl":"GRC","adm0_a3_se":"GRC","adm0_a3_bd":"GRC","adm0_a3_ua":"GRC","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":6,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2.7,"max_label":8,"label_x":21.72568,"label_y":39.492763,"ne_id":1159320811,"wikidataid":"Q41","name_ar":"اليونان","name_bn":"গ্রিস","name_de":"Griechenland","name_en":"Greece","name_es":"Grecia","name_fa":"یونان","name_fr":"Grèce","name_el":"Ελλάδα","name_he":"יוון","name_hi":"यूनान","name_hu":"Görögország","name_id":"Yunani","name_it":"Grecia","name_ja":"ギリシャ","name_ko":"그리스","name_nl":"Griekenland","name_pl":"Grecja","name_pt":"Grécia","name_ru":"Греция","name_sv":"Grekland","name_tr":"Yunanistan","name_uk":"Греція","name_ur":"یونان","name_vi":"Hy Lạp","name_zh":"希腊","name_zht":"希臘","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"GRC.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[16.979667,48.123497],[16.879983,48.470013],[16.960288,48.596982],[16.499283,48.785808],[16.029647,48.733899],[15.253416,49.039074],[14.901447,48.964402],[14.338898,48.555305],[13.595946,48.877172],[13.243357,48.416115],[12.884103,48.289146],[13.025851,47.637584],[12.932627,47.467646],[12.62076,47.672388],[12.141357,47.703083],[11.426414,47.523766],[10.544504,47.566399],[10.402084,47.302488],[9.896068,47.580197],[9.594226,47.525058],[9.632932,47.347601],[9.47997,47.10281],[9.932448,46.920728],[10.442701,46.893546],[11.048556,46.751359],[11.164828,46.941579],[12.153088,47.115393],[12.376485,46.767559],[13.806475,46.509306],[14.632472,46.431817],[15.137092,46.658703],[16.011664,46.683611],[16.202298,46.852386],[16.534268,47.496171],[16.340584,47.712902],[16.903754,47.714866],[16.979667,48.123497]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":4,"sovereignt":"Austria","sov_a3":"AUT","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Austria","adm0_a3":"AUT","geou_dif":0,"geounit":"Austria","gu_a3":"AUT","su_dif":0,"subunit":"Austria","su_a3":"AUT","brk_diff":0,"name":"Austria","name_long":"Austria","brk_a3":"AUT","brk_name":"Austria","brk_group":null,"abbrev":"Aust.","postal":"A","formal_en":"Republic of Austria","formal_fr":null,"name_ciawf":"Austria","note_adm0":null,"note_brk":null,"name_sort":"Austria","name_alt":null,"mapcolor7":3,"mapcolor8":1,"mapcolor9":3,"mapcolor13":4,"pop_est":8877067,"pop_rank":13,"pop_year":2019,"gdp_md":445075,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"AU","iso_a2":"AT","iso_a2_eh":"AT","iso_a3":"AUT","iso_a3_eh":"AUT","iso_n3":"040","iso_n3_eh":"040","un_a3":"040","wb_a2":"AT","wb_a3":"AUT","woe_id":23424750,"woe_id_eh":23424750,"woe_note":"Exact WOE match as country","adm0_iso":"AUT","adm0_diff":null,"adm0_tlc":"AUT","adm0_a3_us":"AUT","adm0_a3_fr":"AUT","adm0_a3_ru":"AUT","adm0_a3_es":"AUT","adm0_a3_cn":"AUT","adm0_a3_tw":"AUT","adm0_a3_in":"AUT","adm0_a3_np":"AUT","adm0_a3_pk":"AUT","adm0_a3_de":"AUT","adm0_a3_gb":"AUT","adm0_a3_br":"AUT","adm0_a3_il":"AUT","adm0_a3_ps":"AUT","adm0_a3_sa":"AUT","adm0_a3_eg":"AUT","adm0_a3_ma":"AUT","adm0_a3_pt":"AUT","adm0_a3_ar":"AUT","adm0_a3_jp":"AUT","adm0_a3_ko":"AUT","adm0_a3_vn":"AUT","adm0_a3_tr":"AUT","adm0_a3_id":"AUT","adm0_a3_pl":"AUT","adm0_a3_gr":"AUT","adm0_a3_it":"AUT","adm0_a3_nl":"AUT","adm0_a3_se":"AUT","adm0_a3_bd":"AUT","adm0_a3_ua":"AUT","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":14.130515,"label_y":47.518859,"ne_id":1159320379,"wikidataid":"Q40","name_ar":"النمسا","name_bn":"অস্ট্রিয়া","name_de":"Österreich","name_en":"Austria","name_es":"Austria","name_fa":"اتریش","name_fr":"Autriche","name_el":"Αυστρία","name_he":"אוסטריה","name_hi":"ऑस्ट्रिया","name_hu":"Ausztria","name_id":"Austria","name_it":"Austria","name_ja":"オーストリア","name_ko":"오스트리아","name_nl":"Oostenrijk","name_pl":"Austria","name_pt":"Áustria","name_ru":"Австрия","name_sv":"Österrike","name_tr":"Avusturya","name_uk":"Австрія","name_ur":"آسٹریا","name_vi":"Áo","name_zh":"奥地利","name_zht":"奧地利","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"AUT.geojson"}},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[10.442701,46.893546],[10.363378,46.483571],[9.922837,46.314899],[9.182882,46.440215],[8.966306,46.036932],[8.489952,46.005151],[8.31663,46.163642],[7.755992,45.82449],[7.273851,45.776948],[6.843593,45.991147],[6.802355,45.70858],[7.096652,45.333099],[6.749955,45.028518],[7.007562,44.254767],[7.549596,44.127901],[7.435185,43.693845],[7.850767,43.767148],[8.428561,44.231228],[8.888946,44.366336],[9.702488,44.036279],[10.200029,43.920007],[10.511948,42.931463],[11.191906,42.355425],[12.106683,41.704535],[12.888082,41.25309],[13.627985,41.188287],[14.060672,40.786348],[14.703268,40.60455],[14.998496,40.172949],[15.413613,40.048357],[15.718814,39.544072],[16.109332,38.964547],[15.891981,38.750942],[15.687963,38.214593],[15.684087,37.908849],[16.100961,37.985899],[16.635088,38.843572],[17.052841,38.902871],[17.17149,39.4247],[16.448743,39.795401],[16.869596,40.442235],[17.73838,40.277671],[18.293385,39.810774],[18.480247,40.168866],[18.376687,40.355625],[17.519169,40.877143],[16.785002,41.179606],[15.889346,41.541082],[16.169897,41.740295],[15.926191,41.961315],[15.14257,41.95514],[14.029821,42.761008],[13.526906,43.587727],[12.589237,44.091366],[12.261453,44.600482],[12.383875,44.885374],[12.328581,45.381778],[13.141606,45.736692],[13.93763,45.591016],[13.69811,46.016778],[13.806475,46.509306],[12.376485,46.767559],[12.153088,47.115393],[11.164828,46.941579],[11.048556,46.751359],[10.442701,46.893546]]],[[[14.761249,38.143874],[13.741156,38.034966],[12.570944,38.126381],[12.431004,37.61295],[13.826733,37.104531],[14.335229,36.996631],[15.099988,36.619987],[15.309898,37.134219],[15.160243,37.444046],[15.520376,38.231155],[14.761249,38.143874]]],[[[8.709991,40.899984],[8.159998,40.950007],[8.388253,40.378311],[8.428302,39.171847],[8.806936,38.906618],[9.214818,39.240473],[9.669519,39.177376],[9.809975,40.500009],[9.210012,41.209991],[8.709991,40.899984]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"Italy","sov_a3":"ITA","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Italy","adm0_a3":"ITA","geou_dif":0,"geounit":"Italy","gu_a3":"ITA","su_dif":0,"subunit":"Italy","su_a3":"ITA","brk_diff":0,"name":"Italy","name_long":"Italy","brk_a3":"ITA","brk_name":"Italy","brk_group":null,"abbrev":"Italy","postal":"I","formal_en":"Italian Republic","formal_fr":null,"name_ciawf":"Italy","note_adm0":null,"note_brk":null,"name_sort":"Italy","name_alt":null,"mapcolor7":6,"mapcolor8":7,"mapcolor9":8,"mapcolor13":7,"pop_est":60297396,"pop_rank":16,"pop_year":2019,"gdp_md":2003576,"gdp_year":2019,"economy":"1. Developed region: G7","income_grp":"1. High income: OECD","fips_10":"IT","iso_a2":"IT","iso_a2_eh":"IT","iso_a3":"ITA","iso_a3_eh":"ITA","iso_n3":"380","iso_n3_eh":"380","un_a3":"380","wb_a2":"IT","wb_a3":"ITA","woe_id":23424853,"woe_id_eh":23424853,"woe_note":"Exact WOE match as country","adm0_iso":"ITA","adm0_diff":null,"adm0_tlc":"ITA","adm0_a3_us":"ITA","adm0_a3_fr":"ITA","adm0_a3_ru":"ITA","adm0_a3_es":"ITA","adm0_a3_cn":"ITA","adm0_a3_tw":"ITA","adm0_a3_in":"ITA","adm0_a3_np":"ITA","adm0_a3_pk":"ITA","adm0_a3_de":"ITA","adm0_a3_gb":"ITA","adm0_a3_br":"ITA","adm0_a3_il":"ITA","adm0_a3_ps":"ITA","adm0_a3_sa":"ITA","adm0_a3_eg":"ITA","adm0_a3_ma":"ITA","adm0_a3_pt":"ITA","adm0_a3_ar":"ITA","adm0_a3_jp":"ITA","adm0_a3_ko":"ITA","adm0_a3_vn":"ITA","adm0_a3_tr":"ITA","adm0_a3_id":"ITA","adm0_a3_pl":"ITA","adm0_a3_gr":"ITA","adm0_a3_it":"ITA","adm0_a3_nl":"ITA","adm0_a3_se":"ITA","adm0_a3_bd":"ITA","adm0_a3_ua":"ITA","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":5,"long_len":5,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2,"max_label":7,"label_x":11.076907,"label_y":44.732482,"ne_id":1159320919,"wikidataid":"Q38","name_ar":"إيطاليا","name_bn":"ইতালি","name_de":"Italien","name_en":"Italy","name_es":"Italia","name_fa":"ایتالیا","name_fr":"Italie","name_el":"Ιταλία","name_he":"איטליה","name_hi":"इटली","name_hu":"Olaszország","name_id":"Italia","name_it":"Italia","name_ja":"イタリア","name_ko":"이탈리아","name_nl":"Italië","name_pl":"Włochy","name_pt":"Itália","name_ru":"Италия","name_sv":"Italien","name_tr":"İtalya","name_uk":"Італія","name_ur":"اطالیہ","name_vi":"Ý","name_zh":"意大利","name_zht":"義大利","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"ITA.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[9.594226,47.525058],[8.522612,47.830828],[8.317301,47.61358],[7.466759,47.620582],[7.192202,47.449766],[6.736571,47.541801],[6.768714,47.287708],[6.037389,46.725779],[6.022609,46.27299],[6.5001,46.429673],[6.843593,45.991147],[7.273851,45.776948],[7.755992,45.82449],[8.31663,46.163642],[8.489952,46.005151],[8.966306,46.036932],[9.182882,46.440215],[9.922837,46.314899],[10.363378,46.483571],[10.442701,46.893546],[9.932448,46.920728],[9.47997,47.10281],[9.632932,47.347601],[9.594226,47.525058]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":4,"sovereignt":"Switzerland","sov_a3":"CHE","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Switzerland","adm0_a3":"CHE","geou_dif":0,"geounit":"Switzerland","gu_a3":"CHE","su_dif":0,"subunit":"Switzerland","su_a3":"CHE","brk_diff":0,"name":"Switzerland","name_long":"Switzerland","brk_a3":"CHE","brk_name":"Switzerland","brk_group":null,"abbrev":"Switz.","postal":"CH","formal_en":"Swiss Confederation","formal_fr":null,"name_ciawf":"Switzerland","note_adm0":null,"note_brk":null,"name_sort":"Switzerland","name_alt":null,"mapcolor7":5,"mapcolor8":2,"mapcolor9":7,"mapcolor13":3,"pop_est":8574832,"pop_rank":13,"pop_year":2019,"gdp_md":703082,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"SZ","iso_a2":"CH","iso_a2_eh":"CH","iso_a3":"CHE","iso_a3_eh":"CHE","iso_n3":"756","iso_n3_eh":"756","un_a3":"756","wb_a2":"CH","wb_a3":"CHE","woe_id":23424957,"woe_id_eh":23424957,"woe_note":"Exact WOE match as country","adm0_iso":"CHE","adm0_diff":null,"adm0_tlc":"CHE","adm0_a3_us":"CHE","adm0_a3_fr":"CHE","adm0_a3_ru":"CHE","adm0_a3_es":"CHE","adm0_a3_cn":"CHE","adm0_a3_tw":"CHE","adm0_a3_in":"CHE","adm0_a3_np":"CHE","adm0_a3_pk":"CHE","adm0_a3_de":"CHE","adm0_a3_gb":"CHE","adm0_a3_br":"CHE","adm0_a3_il":"CHE","adm0_a3_ps":"CHE","adm0_a3_sa":"CHE","adm0_a3_eg":"CHE","adm0_a3_ma":"CHE","adm0_a3_pt":"CHE","adm0_a3_ar":"CHE","adm0_a3_jp":"CHE","adm0_a3_ko":"CHE","adm0_a3_vn":"CHE","adm0_a3_tr":"CHE","adm0_a3_id":"CHE","adm0_a3_pl":"CHE","adm0_a3_gr":"CHE","adm0_a3_it":"CHE","adm0_a3_nl":"CHE","adm0_a3_se":"CHE","adm0_a3_bd":"CHE","adm0_a3_ua":"CHE","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":11,"long_len":11,"abbrev_len":6,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":7.463965,"label_y":46.719114,"ne_id":1159320491,"wikidataid":"Q39","name_ar":"سويسرا","name_bn":"সুইজারল্যান্ড","name_de":"Schweiz","name_en":"Switzerland","name_es":"Suiza","name_fa":"سوئیس","name_fr":"Suisse","name_el":"Ελβετία","name_he":"שווייץ","name_hi":"स्विट्ज़रलैण्ड","name_hu":"Svájc","name_id":"Swiss","name_it":"Svizzera","name_ja":"スイス","name_ko":"스위스","name_nl":"Zwitserland","name_pl":"Szwajcaria","name_pt":"Suíça","name_ru":"Швейцария","name_sv":"Schweiz","name_tr":"İsviçre","name_uk":"Швейцарія","name_ur":"سویٹزرلینڈ","name_vi":"Thụy Sĩ","name_zh":"瑞士","name_zht":"瑞士","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"CHE.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[6.90514,53.482162],[6.074183,53.510403],[4.705997,53.091798],[3.830289,51.620545],[3.315011,51.345777],[3.314971,51.345755],[4.047071,51.267259],[4.973991,51.475024],[5.606976,51.037298],[6.156658,50.803721],[5.988658,51.851616],[6.589397,51.852029],[6.84287,52.22844],[7.092053,53.144043],[6.90514,53.482162]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Netherlands","sov_a3":"NL1","adm0_dif":1,"level":2,"type":"Country","tlc":"1","admin":"Netherlands","adm0_a3":"NLD","geou_dif":0,"geounit":"Netherlands","gu_a3":"NLD","su_dif":0,"subunit":"Netherlands","su_a3":"NLD","brk_diff":0,"name":"Netherlands","name_long":"Netherlands","brk_a3":"NLD","brk_name":"Netherlands","brk_group":null,"abbrev":"Neth.","postal":"NL","formal_en":"Kingdom of the Netherlands","formal_fr":null,"name_ciawf":"Netherlands","note_adm0":null,"note_brk":null,"name_sort":"Netherlands","name_alt":null,"mapcolor7":4,"mapcolor8":2,"mapcolor9":2,"mapcolor13":9,"pop_est":17332850,"pop_rank":14,"pop_year":2019,"gdp_md":907050,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"NL","iso_a2":"NL","iso_a2_eh":"NL","iso_a3":"NLD","iso_a3_eh":"NLD","iso_n3":"528","iso_n3_eh":"528","un_a3":"528","wb_a2":"NL","wb_a3":"NLD","woe_id":-90,"woe_id_eh":23424909,"woe_note":"Doesn't include new former units of Netherlands Antilles (24549811, 24549808, and 24549809)","adm0_iso":"NLD","adm0_diff":null,"adm0_tlc":"NLD","adm0_a3_us":"NLD","adm0_a3_fr":"NLD","adm0_a3_ru":"NLD","adm0_a3_es":"NLD","adm0_a3_cn":"NLD","adm0_a3_tw":"NLD","adm0_a3_in":"NLD","adm0_a3_np":"NLD","adm0_a3_pk":"NLD","adm0_a3_de":"NLD","adm0_a3_gb":"NLD","adm0_a3_br":"NLD","adm0_a3_il":"NLD","adm0_a3_ps":"NLD","adm0_a3_sa":"NLD","adm0_a3_eg":"NLD","adm0_a3_ma":"NLD","adm0_a3_pt":"NLD","adm0_a3_ar":"NLD","adm0_a3_jp":"NLD","adm0_a3_ko":"NLD","adm0_a3_vn":"NLD","adm0_a3_tr":"NLD","adm0_a3_id":"NLD","adm0_a3_pl":"NLD","adm0_a3_gr":"NLD","adm0_a3_it":"NLD","adm0_a3_nl":"NLD","adm0_a3_se":"NLD","adm0_a3_bd":"NLD","adm0_a3_ua":"NLD","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":11,"long_len":11,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":10,"label_x":5.61144,"label_y":52.422211,"ne_id":1159321101,"wikidataid":"Q55","name_ar":"هولندا","name_bn":"নেদারল্যান্ডস","name_de":"Niederlande","name_en":"Netherlands","name_es":"Países Bajos","name_fa":"هلند","name_fr":"Pays-Bas","name_el":"Ολλανδία","name_he":"הולנד","name_hi":"नीदरलैण्ड","name_hu":"Hollandia","name_id":"Belanda","name_it":"Paesi Bassi","name_ja":"オランダ","name_ko":"네덜란드","name_nl":"Nederland","name_pl":"Holandia","name_pt":"Países Baixos","name_ru":"Нидерланды","name_sv":"Nederländerna","name_tr":"Hollanda","name_uk":"Нідерланди","name_ur":"نیدرلینڈز","name_vi":"Hà Lan","name_zh":"荷兰","name_zht":"荷蘭","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"NLD.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[18.829825,45.908872],[19.072769,45.521511],[19.390476,45.236516],[19.005485,44.860234],[19.00548,44.86023],[19.36803,44.863],[19.11761,44.42307],[19.59976,44.03847],[19.454,43.5681],[19.21852,43.52384],[19.48389,43.35229],[19.63,43.21378],[19.95857,43.10604],[20.3398,42.89852],[20.25758,42.81275],[20.49679,42.88469],[20.63508,43.21671],[20.81448,43.27205],[20.95651,43.13094],[21.143395,43.068685],[21.27421,42.90959],[21.43866,42.86255],[21.63302,42.67717],[21.77505,42.6827],[21.66292,42.43922],[21.54332,42.32025],[21.576636,42.245224],[21.91708,42.30364],[22.380526,42.32026],[22.545012,42.461362],[22.436595,42.580321],[22.604801,42.898519],[22.986019,43.211161],[22.500157,43.642814],[22.410446,44.008063],[22.65715,44.234923],[22.474008,44.409228],[22.705726,44.578003],[22.459022,44.702517],[22.145088,44.478422],[21.562023,44.768947],[21.483526,45.18117],[20.874313,45.416375],[20.762175,45.734573],[20.220192,46.127469],[19.596045,46.17173],[18.829838,45.908878],[18.829825,45.908872]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Republic of Serbia","sov_a3":"SRB","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Republic of Serbia","adm0_a3":"SRB","geou_dif":0,"geounit":"Republic of Serbia","gu_a3":"SRB","su_dif":0,"subunit":"Republic of Serbia","su_a3":"SRB","brk_diff":0,"name":"Serbia","name_long":"Serbia","brk_a3":"SRB","brk_name":"Serbia","brk_group":null,"abbrev":"Serb.","postal":"RS","formal_en":"Republic of Serbia","formal_fr":null,"name_ciawf":"Serbia","note_adm0":null,"note_brk":null,"name_sort":"Serbia","name_alt":null,"mapcolor7":3,"mapcolor8":3,"mapcolor9":2,"mapcolor13":10,"pop_est":6944975,"pop_rank":13,"pop_year":2019,"gdp_md":51475,"gdp_year":2019,"economy":"6. Developing region","income_grp":"3. Upper middle income","fips_10":"RI","iso_a2":"RS","iso_a2_eh":"RS","iso_a3":"SRB","iso_a3_eh":"SRB","iso_n3":"688","iso_n3_eh":"688","un_a3":"688","wb_a2":"YF","wb_a3":"SRB","woe_id":-90,"woe_id_eh":20069818,"woe_note":"Expired WOE also contains Kosovo.","adm0_iso":"SRB","adm0_diff":null,"adm0_tlc":"SRB","adm0_a3_us":"SRB","adm0_a3_fr":"SRB","adm0_a3_ru":"SRB","adm0_a3_es":"SRB","adm0_a3_cn":"SRB","adm0_a3_tw":"SRB","adm0_a3_in":"SRB","adm0_a3_np":"SRB","adm0_a3_pk":"SRB","adm0_a3_de":"SRB","adm0_a3_gb":"SRB","adm0_a3_br":"SRB","adm0_a3_il":"SRB","adm0_a3_ps":"SRB","adm0_a3_sa":"SRB","adm0_a3_eg":"SRB","adm0_a3_ma":"SRB","adm0_a3_pt":"SRB","adm0_a3_ar":"SRB","adm0_a3_jp":"SRB","adm0_a3_ko":"SRB","adm0_a3_vn":"SRB","adm0_a3_tr":"SRB","adm0_a3_id":"SRB","adm0_a3_pl":"SRB","adm0_a3_gr":"SRB","adm0_a3_it":"SRB","adm0_a3_nl":"SRB","adm0_a3_se":"SRB","adm0_a3_bd":"SRB","adm0_a3_ua":"SRB","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":7,"label_x":20.787989,"label_y":44.189919,"ne_id":1159321267,"wikidataid":"Q403","name_ar":"صربيا","name_bn":"সার্বিয়া","name_de":"Serbien","name_en":"Serbia","name_es":"Serbia","name_fa":"صربستان","name_fr":"Serbie","name_el":"Σερβία","name_he":"סרביה","name_hi":"सर्बिया","name_hu":"Szerbia","name_id":"Serbia","name_it":"Serbia","name_ja":"セルビア","name_ko":"세르비아","name_nl":"Servië","name_pl":"Serbia","name_pt":"Sérvia","name_ru":"Сербия","name_sv":"Serbien","name_tr":"Sırbistan","name_uk":"Сербія","name_ur":"سربیا","name_vi":"Serbia","name_zh":"塞尔维亚","name_zht":"塞爾維亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"SRB.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[16.564808,46.503751],[15.768733,46.238108],[15.67153,45.834154],[15.323954,45.731783],[15.327675,45.452316],[14.935244,45.471695],[14.595109,45.634941],[14.411968,45.466166],[13.71506,45.500324],[13.679403,45.484149],[13.656976,45.136935],[13.952255,44.802124],[14.258748,45.233777],[14.901602,45.07606],[14.920309,44.738484],[15.37625,44.317915],[15.174454,44.243191],[16.015385,43.507215],[16.930006,43.209998],[17.50997,42.849995],[18.450016,42.479991],[18.450017,42.479992],[18.56,42.65],[17.674922,43.028563],[17.297373,43.446341],[16.916156,43.667722],[16.456443,44.04124],[16.23966,44.351143],[15.750026,44.818712],[15.959367,45.233777],[16.318157,45.004127],[16.534939,45.211608],[17.002146,45.233777],[17.861783,45.06774],[18.553214,45.08159],[19.005485,44.860234],[19.390476,45.236516],[19.072769,45.521511],[18.829825,45.908872],[18.456062,45.759481],[17.630066,45.951769],[16.882515,46.380632],[16.564808,46.503751]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Croatia","sov_a3":"HRV","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Croatia","adm0_a3":"HRV","geou_dif":0,"geounit":"Croatia","gu_a3":"HRV","su_dif":0,"subunit":"Croatia","su_a3":"HRV","brk_diff":0,"name":"Croatia","name_long":"Croatia","brk_a3":"HRV","brk_name":"Croatia","brk_group":null,"abbrev":"Cro.","postal":"HR","formal_en":"Republic of Croatia","formal_fr":null,"name_ciawf":"Croatia","note_adm0":null,"note_brk":null,"name_sort":"Croatia","name_alt":null,"mapcolor7":5,"mapcolor8":4,"mapcolor9":5,"mapcolor13":1,"pop_est":4067500,"pop_rank":12,"pop_year":2019,"gdp_md":60752,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"2. High income: nonOECD","fips_10":"HR","iso_a2":"HR","iso_a2_eh":"HR","iso_a3":"HRV","iso_a3_eh":"HRV","iso_n3":"191","iso_n3_eh":"191","un_a3":"191","wb_a2":"HR","wb_a3":"HRV","woe_id":23424843,"woe_id_eh":23424843,"woe_note":"Exact WOE match as country","adm0_iso":"HRV","adm0_diff":null,"adm0_tlc":"HRV","adm0_a3_us":"HRV","adm0_a3_fr":"HRV","adm0_a3_ru":"HRV","adm0_a3_es":"HRV","adm0_a3_cn":"HRV","adm0_a3_tw":"HRV","adm0_a3_in":"HRV","adm0_a3_np":"HRV","adm0_a3_pk":"HRV","adm0_a3_de":"HRV","adm0_a3_gb":"HRV","adm0_a3_br":"HRV","adm0_a3_il":"HRV","adm0_a3_ps":"HRV","adm0_a3_sa":"HRV","adm0_a3_eg":"HRV","adm0_a3_ma":"HRV","adm0_a3_pt":"HRV","adm0_a3_ar":"HRV","adm0_a3_jp":"HRV","adm0_a3_ko":"HRV","adm0_a3_vn":"HRV","adm0_a3_tr":"HRV","adm0_a3_id":"HRV","adm0_a3_pl":"HRV","adm0_a3_gr":"HRV","adm0_a3_it":"HRV","adm0_a3_nl":"HRV","adm0_a3_se":"HRV","adm0_a3_bd":"HRV","adm0_a3_ua":"HRV","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":16.37241,"label_y":45.805799,"ne_id":1159320833,"wikidataid":"Q224","name_ar":"كرواتيا","name_bn":"ক্রোয়েশিয়া","name_de":"Kroatien","name_en":"Croatia","name_es":"Croacia","name_fa":"کرواسی","name_fr":"Croatie","name_el":"Κροατία","name_he":"קרואטיה","name_hi":"क्रोएशिया","name_hu":"Horvátország","name_id":"Kroasia","name_it":"Croazia","name_ja":"クロアチア","name_ko":"크로아티아","name_nl":"Kroatië","name_pl":"Chorwacja","name_pt":"Croácia","name_ru":"Хорватия","name_sv":"Kroatien","name_tr":"Hırvatistan","name_uk":"Хорватія","name_ur":"کروشیا","name_vi":"Croatia","name_zh":"克罗地亚","name_zht":"克羅地亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"HRV.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[13.806475,46.509306],[13.69811,46.016778],[13.93763,45.591016],[13.71506,45.500324],[14.411968,45.466166],[14.595109,45.634941],[14.935244,45.471695],[15.327675,45.452316],[15.323954,45.731783],[15.67153,45.834154],[15.768733,46.238108],[16.564808,46.503751],[16.370505,46.841327],[16.202298,46.852386],[16.011664,46.683611],[15.137092,46.658703],[14.632472,46.431817],[13.806475,46.509306]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Slovenia","sov_a3":"SVN","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Slovenia","adm0_a3":"SVN","geou_dif":0,"geounit":"Slovenia","gu_a3":"SVN","su_dif":0,"subunit":"Slovenia","su_a3":"SVN","brk_diff":0,"name":"Slovenia","name_long":"Slovenia","brk_a3":"SVN","brk_name":"Slovenia","brk_group":null,"abbrev":"Slo.","postal":"SLO","formal_en":"Republic of Slovenia","formal_fr":null,"name_ciawf":"Slovenia","note_adm0":null,"note_brk":null,"name_sort":"Slovenia","name_alt":null,"mapcolor7":2,"mapcolor8":3,"mapcolor9":2,"mapcolor13":12,"pop_est":2087946,"pop_rank":12,"pop_year":2019,"gdp_md":54174,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"SI","iso_a2":"SI","iso_a2_eh":"SI","iso_a3":"SVN","iso_a3_eh":"SVN","iso_n3":"705","iso_n3_eh":"705","un_a3":"705","wb_a2":"SI","wb_a3":"SVN","woe_id":23424945,"woe_id_eh":23424945,"woe_note":"Exact WOE match as country","adm0_iso":"SVN","adm0_diff":null,"adm0_tlc":"SVN","adm0_a3_us":"SVN","adm0_a3_fr":"SVN","adm0_a3_ru":"SVN","adm0_a3_es":"SVN","adm0_a3_cn":"SVN","adm0_a3_tw":"SVN","adm0_a3_in":"SVN","adm0_a3_np":"SVN","adm0_a3_pk":"SVN","adm0_a3_de":"SVN","adm0_a3_gb":"SVN","adm0_a3_br":"SVN","adm0_a3_il":"SVN","adm0_a3_ps":"SVN","adm0_a3_sa":"SVN","adm0_a3_eg":"SVN","adm0_a3_ma":"SVN","adm0_a3_pt":"SVN","adm0_a3_ar":"SVN","adm0_a3_jp":"SVN","adm0_a3_ko":"SVN","adm0_a3_vn":"SVN","adm0_a3_tr":"SVN","adm0_a3_id":"SVN","adm0_a3_pl":"SVN","adm0_a3_gr":"SVN","adm0_a3_it":"SVN","adm0_a3_nl":"SVN","adm0_a3_se":"SVN","adm0_a3_bd":"SVN","adm0_a3_ua":"SVN","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":8,"long_len":8,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":5,"max_label":10,"label_x":14.915312,"label_y":46.06076,"ne_id":1159321285,"wikidataid":"Q215","name_ar":"سلوفينيا","name_bn":"স্লোভেনিয়া","name_de":"Slowenien","name_en":"Slovenia","name_es":"Eslovenia","name_fa":"اسلوونی","name_fr":"Slovénie","name_el":"Σλοβενία","name_he":"סלובניה","name_hi":"स्लोवेनिया","name_hu":"Szlovénia","name_id":"Slovenia","name_it":"Slovenia","name_ja":"スロベニア","name_ko":"슬로베니아","name_nl":"Slovenië","name_pl":"Słowenia","name_pt":"Eslovénia","name_ru":"Словения","name_sv":"Slovenien","name_tr":"Slovenya","name_uk":"Словенія","name_ur":"سلووینیا","name_vi":"Slovenia","name_zh":"斯洛文尼亚","name_zht":"斯洛維尼亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"SVN.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[22.65715,44.234923],[22.410446,44.008063],[22.500157,43.642814],[22.986019,43.211161],[22.604801,42.898519],[22.436595,42.580321],[22.545012,42.461362],[22.380526,42.32026],[22.881374,41.999297],[22.952377,41.337994],[23.692074,41.309081],[24.492645,41.583896],[25.197201,41.234486],[26.106138,41.328899],[26.117042,41.826905],[27.135739,42.141485],[27.99672,42.007359],[27.673898,42.577892],[28.039095,43.293172],[28.558081,43.707462],[27.970107,43.812468],[27.2424,44.175986],[26.065159,43.943494],[25.569272,43.688445],[24.100679,43.741051],[23.332302,43.897011],[22.944832,43.823785],[22.65715,44.234923]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":4,"sovereignt":"Bulgaria","sov_a3":"BGR","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Bulgaria","adm0_a3":"BGR","geou_dif":0,"geounit":"Bulgaria","gu_a3":"BGR","su_dif":0,"subunit":"Bulgaria","su_a3":"BGR","brk_diff":0,"name":"Bulgaria","name_long":"Bulgaria","brk_a3":"BGR","brk_name":"Bulgaria","brk_group":null,"abbrev":"Bulg.","postal":"BG","formal_en":"Republic of Bulgaria","formal_fr":null,"name_ciawf":"Bulgaria","note_adm0":null,"note_brk":null,"name_sort":"Bulgaria","name_alt":null,"mapcolor7":4,"mapcolor8":5,"mapcolor9":1,"mapcolor13":8,"pop_est":6975761,"pop_rank":13,"pop_year":2019,"gdp_md":68558,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"3. Upper middle income","fips_10":"BU","iso_a2":"BG","iso_a2_eh":"BG","iso_a3":"BGR","iso_a3_eh":"BGR","iso_n3":"100","iso_n3_eh":"100","un_a3":"100","wb_a2":"BG","wb_a3":"BGR","woe_id":23424771,"woe_id_eh":23424771,"woe_note":"Exact WOE match as country","adm0_iso":"BGR","adm0_diff":null,"adm0_tlc":"BGR","adm0_a3_us":"BGR","adm0_a3_fr":"BGR","adm0_a3_ru":"BGR","adm0_a3_es":"BGR","adm0_a3_cn":"BGR","adm0_a3_tw":"BGR","adm0_a3_in":"BGR","adm0_a3_np":"BGR","adm0_a3_pk":"BGR","adm0_a3_de":"BGR","adm0_a3_gb":"BGR","adm0_a3_br":"BGR","adm0_a3_il":"BGR","adm0_a3_ps":"BGR","adm0_a3_sa":"BGR","adm0_a3_eg":"BGR","adm0_a3_ma":"BGR","adm0_a3_pt":"BGR","adm0_a3_ar":"BGR","adm0_a3_jp":"BGR","adm0_a3_ko":"BGR","adm0_a3_vn":"BGR","adm0_a3_tr":"BGR","adm0_a3_id":"BGR","adm0_a3_pl":"BGR","adm0_a3_gr":"BGR","adm0_a3_it":"BGR","adm0_a3_nl":"BGR","adm0_a3_se":"BGR","adm0_a3_bd":"BGR","adm0_a3_ua":"BGR","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":8,"long_len":8,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":25.15709,"label_y":42.508785,"ne_id":1159320409,"wikidataid":"Q219","name_ar":"بلغاريا","name_bn":"বুলগেরিয়া","name_de":"Bulgarien","name_en":"Bulgaria","name_es":"Bulgaria","name_fa":"بلغارستان","name_fr":"Bulgarie","name_el":"Βουλγαρία","name_he":"בולגריה","name_hi":"बुल्गारिया","name_hu":"Bulgária","name_id":"Bulgaria","name_it":"Bulgaria","name_ja":"ブルガリア","name_ko":"불가리아","name_nl":"Bulgarije","name_pl":"Bułgaria","name_pt":"Bulgária","name_ru":"Болгария","name_sv":"Bulgarien","name_tr":"Bulgaristan","name_uk":"Болгарія","name_ur":"بلغاریہ","name_vi":"Bulgaria","name_zh":"保加利亚","name_zht":"保加利亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"BGR.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[20.0707,42.58863],[20.25758,42.81275],[20.3398,42.89852],[19.95857,43.10604],[19.63,43.21378],[19.48389,43.35229],[19.21852,43.52384],[19.03165,43.43253],[18.70648,43.20011],[18.56,42.65],[18.450017,42.479992],[18.88214,42.28151],[19.16246,41.95502],[19.371768,41.877551],[19.304486,42.195745],[19.738051,42.688247],[19.801613,42.500093],[20.0707,42.58863]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Montenegro","sov_a3":"MNE","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Montenegro","adm0_a3":"MNE","geou_dif":0,"geounit":"Montenegro","gu_a3":"MNE","su_dif":0,"subunit":"Montenegro","su_a3":"MNE","brk_diff":0,"name":"Montenegro","name_long":"Montenegro","brk_a3":"MNE","brk_name":"Montenegro","brk_group":null,"abbrev":"Mont.","postal":"ME","formal_en":"Montenegro","formal_fr":null,"name_ciawf":"Montenegro","note_adm0":null,"note_brk":null,"name_sort":"Montenegro","name_alt":null,"mapcolor7":4,"mapcolor8":1,"mapcolor9":4,"mapcolor13":5,"pop_est":622137,"pop_rank":11,"pop_year":2019,"gdp_md":5542,"gdp_year":2019,"economy":"6. Developing region","income_grp":"3. Upper middle income","fips_10":"MJ","iso_a2":"ME","iso_a2_eh":"ME","iso_a3":"MNE","iso_a3_eh":"MNE","iso_n3":"499","iso_n3_eh":"499","un_a3":"499","wb_a2":"ME","wb_a3":"MNE","woe_id":20069817,"woe_id_eh":20069817,"woe_note":"Exact WOE match as country","adm0_iso":"MNE","adm0_diff":null,"adm0_tlc":"MNE","adm0_a3_us":"MNE","adm0_a3_fr":"MNE","adm0_a3_ru":"MNE","adm0_a3_es":"MNE","adm0_a3_cn":"MNE","adm0_a3_tw":"MNE","adm0_a3_in":"MNE","adm0_a3_np":"MNE","adm0_a3_pk":"MNE","adm0_a3_de":"MNE","adm0_a3_gb":"MNE","adm0_a3_br":"MNE","adm0_a3_il":"MNE","adm0_a3_ps":"MNE","adm0_a3_sa":"MNE","adm0_a3_eg":"MNE","adm0_a3_ma":"MNE","adm0_a3_pt":"MNE","adm0_a3_ar":"MNE","adm0_a3_jp":"MNE","adm0_a3_ko":"MNE","adm0_a3_vn":"MNE","adm0_a3_tr":"MNE","adm0_a3_id":"MNE","adm0_a3_pl":"MNE","adm0_a3_gr":"MNE","adm0_a3_it":"MNE","adm0_a3_nl":"MNE","adm0_a3_se":"MNE","adm0_a3_bd":"MNE","adm0_a3_ua":"MNE","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":10,"long_len":10,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":5,"max_label":10,"label_x":19.143727,"label_y":42.803101,"ne_id":1159321069,"wikidataid":"Q236","name_ar":"الجبل الأسود","name_bn":"মন্টিনিগ্রো","name_de":"Montenegro","name_en":"Montenegro","name_es":"Montenegro","name_fa":"مونتهنگرو","name_fr":"Monténégro","name_el":"Μαυροβούνιο","name_he":"מונטנגרו","name_hi":"मॉन्टेनीग्रो","name_hu":"Montenegró","name_id":"Montenegro","name_it":"Montenegro","name_ja":"モンテネグロ","name_ko":"몬테네그로","name_nl":"Montenegro","name_pl":"Czarnogóra","name_pt":"Montenegro","name_ru":"Черногория","name_sv":"Montenegro","name_tr":"Karadağ","name_uk":"Чорногорія","name_ur":"مونٹینیگرو","name_vi":"Montenegro","name_zh":"黑山","name_zht":"蒙特內哥羅","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"MNE.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-9.034818,41.880571],[-8.990789,41.543459],[-8.790853,41.184334],[-8.768684,40.760639],[-8.977353,40.159306],[-9.048305,39.755093],[-9.446989,39.392066],[-9.526571,38.737429],[-9.287464,38.358486],[-8.839998,38.266243],[-8.746101,37.651346],[-8.898857,36.868809],[-8.382816,36.97888],[-7.855613,36.838269],[-7.453726,37.097788],[-7.537105,37.428904],[-7.166508,37.803894],[-7.029281,38.075764],[-7.374092,38.373059],[-7.098037,39.030073],[-7.498632,39.629571],[-7.066592,39.711892],[-7.026413,40.184524],[-6.86402,40.330872],[-6.851127,41.111083],[-6.389088,41.381815],[-6.668606,41.883387],[-7.251309,41.918346],[-7.422513,41.792075],[-8.013175,41.790886],[-8.263857,42.280469],[-8.671946,42.134689],[-9.034818,41.880571]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"Portugal","sov_a3":"PRT","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Portugal","adm0_a3":"PRT","geou_dif":0,"geounit":"Portugal","gu_a3":"PRT","su_dif":1,"subunit":"Portugal","su_a3":"PR1","brk_diff":0,"name":"Portugal","name_long":"Portugal","brk_a3":"PR1","brk_name":"Portugal","brk_group":null,"abbrev":"Port.","postal":"P","formal_en":"Portuguese Republic","formal_fr":null,"name_ciawf":"Portugal","note_adm0":null,"note_brk":null,"name_sort":"Portugal","name_alt":null,"mapcolor7":1,"mapcolor8":7,"mapcolor9":1,"mapcolor13":4,"pop_est":10269417,"pop_rank":14,"pop_year":2019,"gdp_md":238785,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"PO","iso_a2":"PT","iso_a2_eh":"PT","iso_a3":"PRT","iso_a3_eh":"PRT","iso_n3":"620","iso_n3_eh":"620","un_a3":"620","wb_a2":"PT","wb_a3":"PRT","woe_id":23424925,"woe_id_eh":23424925,"woe_note":"Exact WOE match as country","adm0_iso":"PR1","adm0_diff":null,"adm0_tlc":"PR1","adm0_a3_us":"PRT","adm0_a3_fr":"PRT","adm0_a3_ru":"PRT","adm0_a3_es":"PRT","adm0_a3_cn":"PRT","adm0_a3_tw":"PRT","adm0_a3_in":"PRT","adm0_a3_np":"PRT","adm0_a3_pk":"PRT","adm0_a3_de":"PRT","adm0_a3_gb":"PRT","adm0_a3_br":"PRT","adm0_a3_il":"PRT","adm0_a3_ps":"PRT","adm0_a3_sa":"PRT","adm0_a3_eg":"PRT","adm0_a3_ma":"PRT","adm0_a3_pt":"PRT","adm0_a3_ar":"PRT","adm0_a3_jp":"PRT","adm0_a3_ko":"PRT","adm0_a3_vn":"PRT","adm0_a3_tr":"PRT","adm0_a3_id":"PRT","adm0_a3_pl":"PRT","adm0_a3_gr":"PRT","adm0_a3_it":"PRT","adm0_a3_nl":"PRT","adm0_a3_se":"PRT","adm0_a3_bd":"PRT","adm0_a3_ua":"PRT","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":8,"long_len":8,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":-8.271754,"label_y":39.606675,"ne_id":1159321187,"wikidataid":"Q45","name_ar":"البرتغال","name_bn":"পর্তুগাল","name_de":"Portugal","name_en":"Portugal","name_es":"Portugal","name_fa":"پرتغال","name_fr":"Portugal","name_el":"Πορτογαλία","name_he":"פורטוגל","name_hi":"पुर्तगाल","name_hu":"Portugália","name_id":"Portugal","name_it":"Portogallo","name_ja":"ポルトガル","name_ko":"포르투갈","name_nl":"Portugal","name_pl":"Portugalia","name_pt":"Portugal","name_ru":"Португалия","name_sv":"Portugal","name_tr":"Portekiz","name_uk":"Португалія","name_ur":"پرتگال","name_vi":"Bồ Đào Nha","name_zh":"葡萄牙","name_zht":"葡萄牙","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"PRT.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.619337,48.220726],[26.924176,48.123264],[27.233873,47.826771],[27.551166,47.405117],[28.12803,46.810476],[28.160018,46.371563],[28.054443,45.944586],[28.233554,45.488283],[28.485269,45.596907],[28.659987,45.939987],[28.933717,46.25883],[28.862972,46.437889],[29.072107,46.517678],[29.170654,46.379262],[29.759972,46.349988],[30.024659,46.423937],[29.83821,46.525326],[29.908852,46.674361],[29.559674,46.928583],[29.415135,47.346645],[29.050868,47.510227],[29.122698,47.849095],[28.670891,48.118149],[28.259547,48.155562],[27.522537,48.467119],[26.857824,48.368211],[26.619337,48.220726]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Moldova","sov_a3":"MDA","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Moldova","adm0_a3":"MDA","geou_dif":0,"geounit":"Moldova","gu_a3":"MDA","su_dif":0,"subunit":"Moldova","su_a3":"MDA","brk_diff":0,"name":"Moldova","name_long":"Moldova","brk_a3":"MDA","brk_name":"Moldova","brk_group":null,"abbrev":"Mda.","postal":"MD","formal_en":"Republic of Moldova","formal_fr":null,"name_ciawf":"Moldova","note_adm0":null,"note_brk":null,"name_sort":"Moldova","name_alt":null,"mapcolor7":3,"mapcolor8":5,"mapcolor9":4,"mapcolor13":12,"pop_est":2657637,"pop_rank":12,"pop_year":2019,"gdp_md":11968,"gdp_year":2019,"economy":"6. Developing region","income_grp":"4. Lower middle income","fips_10":"MD","iso_a2":"MD","iso_a2_eh":"MD","iso_a3":"MDA","iso_a3_eh":"MDA","iso_n3":"498","iso_n3_eh":"498","un_a3":"498","wb_a2":"MD","wb_a3":"MDA","woe_id":23424885,"woe_id_eh":23424885,"woe_note":"Exact WOE match as country","adm0_iso":"MDA","adm0_diff":null,"adm0_tlc":"MDA","adm0_a3_us":"MDA","adm0_a3_fr":"MDA","adm0_a3_ru":"MDA","adm0_a3_es":"MDA","adm0_a3_cn":"MDA","adm0_a3_tw":"MDA","adm0_a3_in":"MDA","adm0_a3_np":"MDA","adm0_a3_pk":"MDA","adm0_a3_de":"MDA","adm0_a3_gb":"MDA","adm0_a3_br":"MDA","adm0_a3_il":"MDA","adm0_a3_ps":"MDA","adm0_a3_sa":"MDA","adm0_a3_eg":"MDA","adm0_a3_ma":"MDA","adm0_a3_pt":"MDA","adm0_a3_ar":"MDA","adm0_a3_jp":"MDA","adm0_a3_ko":"MDA","adm0_a3_vn":"MDA","adm0_a3_tr":"MDA","adm0_a3_id":"MDA","adm0_a3_pl":"MDA","adm0_a3_gr":"MDA","adm0_a3_it":"MDA","adm0_a3_nl":"MDA","adm0_a3_se":"MDA","adm0_a3_bd":"MDA","adm0_a3_ua":"MDA","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":5,"max_label":10,"label_x":28.487904,"label_y":47.434999,"ne_id":1159321045,"wikidataid":"Q217","name_ar":"مولدوفا","name_bn":"মলদোভা","name_de":"Republik Moldau","name_en":"Moldova","name_es":"Moldavia","name_fa":"مولداوی","name_fr":"Moldavie","name_el":"Μολδαβία","name_he":"מולדובה","name_hi":"मॉल्डोवा","name_hu":"Moldova","name_id":"Moldova","name_it":"Moldavia","name_ja":"モルドバ","name_ko":"몰도바","name_nl":"Moldavië","name_pl":"Mołdawia","name_pt":"Moldávia","name_ru":"Молдавия","name_sv":"Moldavien","name_tr":"Moldova","name_uk":"Молдова","name_ur":"مالدووا","name_vi":"Moldova","name_zh":"摩尔多瓦","name_zht":"摩爾多瓦","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"MDA.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-14.508695,66.455892],[-16.167819,66.526792],[-17.798624,65.993853],[-19.056842,66.276601],[-20.576284,65.732112],[-22.134922,66.410469],[-23.650515,66.262519],[-24.326184,65.611189],[-22.227423,65.378594],[-22.184403,65.084968],[-23.955044,64.89113],[-21.778484,64.402116],[-22.762972,63.960179],[-19.972755,63.643635],[-18.656246,63.496383],[-17.794438,63.678749],[-14.909834,64.364082],[-13.609732,65.126671],[-14.739637,65.808748],[-14.508695,66.455892]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Iceland","sov_a3":"ISL","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Iceland","adm0_a3":"ISL","geou_dif":0,"geounit":"Iceland","gu_a3":"ISL","su_dif":0,"subunit":"Iceland","su_a3":"ISL","brk_diff":0,"name":"Iceland","name_long":"Iceland","brk_a3":"ISL","brk_name":"Iceland","brk_group":null,"abbrev":"Iceland","postal":"IS","formal_en":"Republic of Iceland","formal_fr":null,"name_ciawf":"Iceland","note_adm0":null,"note_brk":null,"name_sort":"Iceland","name_alt":null,"mapcolor7":1,"mapcolor8":4,"mapcolor9":4,"mapcolor13":9,"pop_est":361313,"pop_rank":10,"pop_year":2019,"gdp_md":24188,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"IC","iso_a2":"IS","iso_a2_eh":"IS","iso_a3":"ISL","iso_a3_eh":"ISL","iso_n3":"352","iso_n3_eh":"352","un_a3":"352","wb_a2":"IS","wb_a3":"ISL","woe_id":23424845,"woe_id_eh":23424845,"woe_note":"Exact WOE match as country","adm0_iso":"ISL","adm0_diff":null,"adm0_tlc":"ISL","adm0_a3_us":"ISL","adm0_a3_fr":"ISL","adm0_a3_ru":"ISL","adm0_a3_es":"ISL","adm0_a3_cn":"ISL","adm0_a3_tw":"ISL","adm0_a3_in":"ISL","adm0_a3_np":"ISL","adm0_a3_pk":"ISL","adm0_a3_de":"ISL","adm0_a3_gb":"ISL","adm0_a3_br":"ISL","adm0_a3_il":"ISL","adm0_a3_ps":"ISL","adm0_a3_sa":"ISL","adm0_a3_eg":"ISL","adm0_a3_ma":"ISL","adm0_a3_pt":"ISL","adm0_a3_ar":"ISL","adm0_a3_jp":"ISL","adm0_a3_ko":"ISL","adm0_a3_vn":"ISL","adm0_a3_tr":"ISL","adm0_a3_id":"ISL","adm0_a3_pl":"ISL","adm0_a3_gr":"ISL","adm0_a3_it":"ISL","adm0_a3_nl":"ISL","adm0_a3_se":"ISL","adm0_a3_bd":"ISL","adm0_a3_ua":"ISL","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":7,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2,"max_label":7,"label_x":-18.673711,"label_y":64.779286,"ne_id":1159320917,"wikidataid":"Q189","name_ar":"آيسلندا","name_bn":"আইসল্যান্ড","name_de":"Island","name_en":"Iceland","name_es":"Islandia","name_fa":"ایسلند","name_fr":"Islande","name_el":"Ισλανδία","name_he":"איסלנד","name_hi":"आइसलैण्ड","name_hu":"Izland","name_id":"Islandia","name_it":"Islanda","name_ja":"アイスランド","name_ko":"아이슬란드","name_nl":"IJsland","name_pl":"Islandia","name_pt":"Islândia","name_ru":"Исландия","name_sv":"Island","name_tr":"İzlanda","name_uk":"Ісландія","name_ur":"آئس لینڈ","name_vi":"Iceland","name_zh":"冰岛","name_zht":"冰島","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"ISL.geojson"}}]`),Cl={features:O3};let kl=!0;const U=Ll({isEnabled:!1,isDialogEnabled:!1,isLoaded:!1,mode:"start",game:null,timer:null,bbox:[],minesweeperOptions:{enableSpeciesDisplay:!0,size:20,geotiff:{projection:"EPSG:4326",url:"https://eox-ideas.s3.eu-central-1.amazonaws.com/indicator2/AR3_wildlife_1.tif"},minColor:{r:0,g:100,b:0,a:.6},maxColor:{r:0,g:255,b:0,a:.6},minValue:1,maxValue:8,locations:[{name:"Global Coverage",bbox:[-24,33,42,71],horizontalExtent:5,isMineCondition:n=>n>=3.5}]},elapsedSeconds:0});async function fs(n){if(!n)return;U.minesweeperOptions=n,document.addEventListener("minesweeper:start",Qo),document.addEventListener("minesweeper:continue",Jo),document.addEventListener("minesweeper:win",$o),document.addEventListener("minesweeper:gameover",Yo),document.addEventListener("minesweeper:restart",Xo);const t=Zo();let e=new Date;kl||(e=new Date(ms.states.datetime.value));let a=e.toDateString();const i=U.minesweeperOptions.locations[0],s=Rl(i.bbox,i.horizontalExtent,a);U.bbox=s;let l=(await Al(s,Cl)).length>0;for(;!l;){a+="0";const u=Rl(i.bbox,i.horizontalExtent,a);(await Al(u,Cl)).length>0&&(l=!0,U.bbox=u)}U.game=new T3(t,{...U.minesweeperOptions,bbox:U.bbox}),U.isEnabled=!0,U.isDialogEnabled=!0;const o=Rh(U.bbox,"EPSG:4326",t.getView().getProjection());t.getView().fit(o,{duration:500}),kl=!1}function ds(){var n;(n=U.game)!=null&&n.vectorLayer&&Zo().getLayers().getArray().find(a=>a.get("id")==="AnalysisGroup").getLayers().remove(xh(U.game.vectorLayer)),U.game&&U.game.removeEventListeners(),U.game=null,U.isEnabled=!1,U.isDialogEnabled=!1,document.removeEventListener("minesweeper:start",Qo),document.removeEventListener("minesweeper:continue",Jo),document.removeEventListener("minesweeper:win",$o),document.removeEventListener("minesweeper:gameover",Yo),document.removeEventListener("minesweeper:restart",Xo)}async function Xo(){if(console.log("Minesweeper::Restart"),await ds(),U.mode="start",!U.minesweeperOptions){console.error("Minesweeper options are not set");return}await fs(U.minesweeperOptions)}async function $o(){U.timer&&(clearInterval(U.timer),U.mode="win",U.isDialogEnabled=!0)}function Yo(){U.timer&&(clearInterval(U.timer),U.mode="gameover",U.isDialogEnabled=!0)}function Zo(){var n;return(n=ms.states.mapEl.value)==null?void 0:n.map}function Jo(){var n;(n=U.game)!=null&&n.isGameCompleted&&document.dispatchEvent(new Event("minesweeper:win"))}function Qo(){U.elapsedSeconds=0,console.info("Minesweeper::StartTimer"),U.timer=setInterval(()=>{U.elapsedSeconds+=1},1e3)}const D3={class:"d-flex flex-column align-strech fill-height fill-width"},N3={__name:"index",props:{minesweeperOptions:{type:Object,required:!0}},setup(n){setTimeout(()=>{fs(n.minesweeperOptions)},1e3);const t=fh(()=>U.game?U.game.mineCount-U.game.flagCount:0);return dh([()=>n.minesweeperOptions,()=>ms.states.datetime.value],async()=>{ds(),setTimeout(()=>{fs(n.minesweeperOptions)},1e3)}),mh(()=>{ds()}),(e,a)=>{var i;return ph(),gh("span",D3,[sr(Sh,{color:"primary",height:"50%",class:"btn-open"},{default:yh(()=>[bh(vh(t.value)+" 💣 remaining",1)]),_:1}),sr(Mh,{mode:Ne(U).mode,game:Ne(U).game,elapsedSeconds:Ne(U).elapsedSeconds,"is-enabled":Ne(U).isDialogEnabled,bbox:Ne(U).bbox,enableSpeciesDisplay:(i=Ne(U).minesweeperOptions)==null?void 0:i.enableSpeciesDisplay,onClose:a[0]||(a[0]=s=>Ne(U).isDialogEnabled=!1)},null,8,["mode","game","elapsedSeconds","is-enabled","bbox","enableSpeciesDisplay"])])}}},P3=Eh(N3,[["__scopeId","data-v-cb6bf022"]]),e2=Object.freeze(Object.defineProperty({__proto__:null,default:P3},Symbol.toStringTag,{value:"Module"}));export{Z3 as L,J3 as a,yo as g,e2 as i};
