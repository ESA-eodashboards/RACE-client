import{r as $,Y as C,m as P,K as p,D as w,P as V,T as b}from"./framework.CoZp-P4G.js";import{u as I,V as D,f as W,m as M,a as y,g as q,n as K}from"./forwardRefs-CswFzwtB.CRkbRzf1.js";import{k as O,p as R,n as Y,I as H,o as N,aY as A,aG as L,aZ as T,P as B,a_ as F,aW as U}from"./eo-dash.Dc8q8S7X.js";const X=R({target:[Object,Array]},"v-dialog-transition"),x=new WeakMap,j=O()({name:"VDialogTransition",props:X(),setup(e,m){let{slots:i}=m;const c={onBeforeEnter(t){t.style.pointerEvents="none",t.style.visibility="hidden"},async onEnter(t,g){var o;await new Promise(s=>requestAnimationFrame(s)),await new Promise(s=>requestAnimationFrame(s)),t.style.visibility="";const a=k(e.target,t),{x:l,y:f,sx:v,sy:h,speed:n}=a;if(x.set(t,a),L())y(t,[{opacity:0},{}],{duration:125*n,easing:F}).finished.then(()=>g());else{const s=y(t,[{transform:`translate(${l}px, ${f}px) scale(${v}, ${h})`,opacity:0},{}],{duration:225*n,easing:F});(o=S(t))==null||o.forEach(r=>{y(r,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*n,easing:B})}),s.finished.then(()=>g())}},onAfterEnter(t){t.style.removeProperty("pointer-events")},onBeforeLeave(t){t.style.pointerEvents="none"},async onLeave(t,g){var o;await new Promise(s=>requestAnimationFrame(s));let a;!x.has(t)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?a=k(e.target,t):a=x.get(t);const{x:l,y:f,sx:v,sy:h,speed:n}=a;L()?y(t,[{},{opacity:0}],{duration:85*n,easing:T}).finished.then(()=>g()):(y(t,[{},{transform:`translate(${l}px, ${f}px) scale(${v}, ${h})`,opacity:0}],{duration:125*n,easing:T}).finished.then(()=>g()),(o=S(t))==null||o.forEach(r=>{y(r,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*n,easing:B})}))},onAfterLeave(t){t.style.removeProperty("pointer-events")}};return()=>e.target?w(b,p({name:"dialog-transition"},c,{css:!1}),i):w(b,{name:"dialog-transition"},i)}});function S(e){var i;const m=(i=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:i.children;return m&&[...m]}function k(e,m){const i=q(e),c=K(m),[t,g]=getComputedStyle(m).transformOrigin.split(" ").map(E=>parseFloat(E)),[a,l]=getComputedStyle(m).getPropertyValue("--v-overlay-anchor-origin").split(" ");let f=i.left+i.width/2;a==="left"||l==="left"?f-=i.width/2:(a==="right"||l==="right")&&(f+=i.width/2);let v=i.top+i.height/2;a==="top"||l==="top"?v-=i.height/2:(a==="bottom"||l==="bottom")&&(v+=i.height/2);const h=i.width/c.width,n=i.height/c.height,o=Math.max(1,h,n),s=h/o||0,r=n/o||0,d=c.width*c.height/(window.innerWidth*window.innerHeight),u=d>.12?Math.min(1.5,(d-.12)*10+1):1;return{x:f-(t+c.left),y:v-(g+c.top),sx:s,sy:r,speed:u}}const z=R({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...M({origin:"center center",scrollStrategy:"block",transition:{component:j},zIndex:2400})},"VDialog"),Q=O()({name:"VDialog",props:z(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,m){let{emit:i,slots:c}=m;const t=Y(e,"modelValue"),{scopeId:g}=I(),a=$();async function l(n){var r,d,u;const o=n.relatedTarget,s=n.target;await V(),t.value&&o!==s&&((r=a.value)!=null&&r.contentEl)&&((d=a.value)!=null&&d.globalTop)&&![document,a.value.contentEl].includes(s)&&!a.value.contentEl.contains(s)&&((u=A(a.value.contentEl)[0])==null||u.focus())}function f(n){var u;if(n.key!=="Tab"||!((u=a.value)!=null&&u.contentEl))return;const o=A(a.value.contentEl);if(!o.length)return;const s=o[0],r=o[o.length-1],d=document.activeElement;n.shiftKey&&d===s?(n.preventDefault(),r.focus()):!n.shiftKey&&d===r&&(n.preventDefault(),s.focus())}C(()=>{document.removeEventListener("focusin",l),document.removeEventListener("keydown",f)}),H&&P(()=>t.value&&e.retainFocus,n=>{n?(document.addEventListener("focusin",l,{once:!0}),document.addEventListener("keydown",f)):(document.removeEventListener("focusin",l),document.removeEventListener("keydown",f))},{immediate:!0});function v(){var n;i("afterEnter"),(e.scrim||e.retainFocus)&&((n=a.value)!=null&&n.contentEl)&&!a.value.contentEl.contains(document.activeElement)&&a.value.contentEl.focus({preventScroll:!0})}function h(){i("afterLeave")}return P(t,async n=>{var o;n||(await V(),(o=a.value.activatorEl)==null||o.focus({preventScroll:!0}))}),N(()=>{const n=D.filterProps(e),o=p({"aria-haspopup":"dialog"},e.activatorProps),s=p({tabindex:-1},e.contentProps);return w(D,p({ref:a,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},n,{modelValue:t.value,"onUpdate:modelValue":r=>t.value=r,"aria-modal":"true",activatorProps:o,contentProps:s,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:v,onAfterLeave:h},g),{activator:c.activator,default:function(){for(var r=arguments.length,d=new Array(r),u=0;u<r;u++)d[u]=arguments[u];return w(U,{root:"VDialog"},{default:()=>{var E;return[(E=c.default)==null?void 0:E.call(c,...d)]}})}})}),W({},a)}});export{Q as V};
