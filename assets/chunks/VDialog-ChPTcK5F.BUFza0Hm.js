import{r as B,m as O,K as y,D as p,T as w,P as C}from"./framework.CQuUbdjo.js";import{u as M,V as E,f as R,m as I,a as h,g as q,n as W}from"./forwardRefs-CcH9vg_A.DxZDBkZc.js";import{J as S,K as T,L as k,M as H,N,aU as P,ba as V,ab as b,bb as A,b8 as U}from"./eo-dash.9LhApkIt.js";const K=T({target:[Object,Array]},"v-dialog-transition"),x=new WeakMap,X=S()({name:"VDialogTransition",props:K(),setup(e,f){let{slots:a}=f;const i={onBeforeEnter(t){t.style.pointerEvents="none",t.style.visibility="hidden"},async onEnter(t,g){var s;await new Promise(r=>requestAnimationFrame(r)),await new Promise(r=>requestAnimationFrame(r)),t.style.visibility="";const n=F(e.target,t),{x:u,y:m,sx:o,sy:c,speed:l}=n;if(x.set(t,n),P())h(t,[{opacity:0},{}],{duration:125*l,easing:A}).finished.then(()=>g());else{const r=h(t,[{transform:`translate(${u}px, ${m}px) scale(${o}, ${c})`,opacity:0},{}],{duration:225*l,easing:A});(s=D(t))==null||s.forEach(d=>{h(d,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*l,easing:b})}),r.finished.then(()=>g())}},onAfterEnter(t){t.style.removeProperty("pointer-events")},onBeforeLeave(t){t.style.pointerEvents="none"},async onLeave(t,g){var s;await new Promise(r=>requestAnimationFrame(r));let n;!x.has(t)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?n=F(e.target,t):n=x.get(t);const{x:u,y:m,sx:o,sy:c,speed:l}=n;P()?h(t,[{},{opacity:0}],{duration:85*l,easing:V}).finished.then(()=>g()):(h(t,[{},{transform:`translate(${u}px, ${m}px) scale(${o}, ${c})`,opacity:0}],{duration:125*l,easing:V}).finished.then(()=>g()),(s=D(t))==null||s.forEach(d=>{h(d,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*l,easing:b})}))},onAfterLeave(t){t.style.removeProperty("pointer-events")}};return()=>e.target?p(w,y({name:"dialog-transition"},i,{css:!1}),a):p(w,{name:"dialog-transition"},a)}});function D(e){var a;const f=(a=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:a.children;return f&&[...f]}function F(e,f){const a=q(e),i=W(f),[t,g]=getComputedStyle(f).transformOrigin.split(" ").map($=>parseFloat($)),[n,u]=getComputedStyle(f).getPropertyValue("--v-overlay-anchor-origin").split(" ");let m=a.left+a.width/2;n==="left"||u==="left"?m-=a.width/2:(n==="right"||u==="right")&&(m+=a.width/2);let o=a.top+a.height/2;n==="top"||u==="top"?o-=a.height/2:(n==="bottom"||u==="bottom")&&(o+=a.height/2);const c=a.width/i.width,l=a.height/i.height,s=Math.max(1,c,l),r=c/s||0,d=l/s||0,v=i.width*i.height/(window.innerWidth*window.innerHeight),L=v>.12?Math.min(1.5,(v-.12)*10+1):1;return{x:m-(t+i.left),y:o-(g+i.top),sx:r,sy:d,speed:L}}const Y=T({fullscreen:Boolean,scrollable:Boolean,...N(I({captureFocus:!0,origin:"center center",scrollStrategy:"block",transition:{component:X},zIndex:2400,retainFocus:!0}),["disableInitialFocus"])},"VDialog"),G=S()({name:"VDialog",props:Y(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,f){let{emit:a,slots:i}=f;const t=k(e,"modelValue"),{scopeId:g}=M(),n=B();function u(){var o;a("afterEnter"),(e.scrim||e.retainFocus)&&((o=n.value)!=null&&o.contentEl)&&!n.value.contentEl.contains(document.activeElement)&&n.value.contentEl.focus({preventScroll:!0})}function m(){a("afterLeave")}return O(t,async o=>{var c;o||(await C(),(c=n.value.activatorEl)==null||c.focus({preventScroll:!0}))}),H(()=>{const o=E.filterProps(e),c=y({"aria-haspopup":"dialog"},e.activatorProps),l=y({tabindex:-1},e.contentProps);return p(E,y({ref:n,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},o,{modelValue:t.value,"onUpdate:modelValue":s=>t.value=s,"aria-modal":"true",activatorProps:c,contentProps:l,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:u,onAfterLeave:m},g),{activator:i.activator,default:function(){for(var s=arguments.length,r=new Array(s),d=0;d<s;d++)r[d]=arguments[d];return p(U,{root:"VDialog"},{default:()=>{var v;return[(v=i.default)==null?void 0:v.call(i,...r)]}})}})}),R({},n)}});export{G as V};
