const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/raw-Ctlamky6.lG6ojroe.js","assets/chunks/basedecoder-DZxXIv4c.B2c5_Eok.js","assets/chunks/lzw-D2MxT2zA.DmRYnG5C.js","assets/chunks/jpeg-CsvjaiEQ.A0lbw6YY.js","assets/chunks/deflate-BsBbGVWD.DOOJQnHL.js","assets/chunks/pako.esm-KbdoS3Oq.BkaqWuDM.js","assets/chunks/packbits-DJxVZ9kH.CBEwDSj4.js","assets/chunks/lerc-BqxMpIZw.CjqNdLxn.js","assets/chunks/framework.CfLZVW8t.js","assets/chunks/eo-dash.PV-gecK0.js","assets/chunks/commonjsHelpers.BosuxZz1.js","assets/chunks/MinesweeperDialog-C6znVabM.DKHnOPTg.js","assets/chunks/SpeciesList-B9froCv4.bzSRvV54.js","assets/chunks/VDialog-CGjsgszO.BpDDuMwv.js","assets/chunks/VOverlay-BT1-jDdV.DBS8wxz7.js","assets/chunks/forwardRefs-HH7XfZ0m.BafvOfOS.js","assets/chunks/transition-DdLQscTv.BdUfxuEM.js","assets/chunks/VCard-CvuTMXsw.iiTIZr_I.js","assets/chunks/VImg-Bg-G9iAc.AKy0J11o.js","assets/chunks/easing-CH0-9wR8.CTB3jml5.js","assets/chunks/webimage-Bg_w2qlD.C0wZFOAS.js"])))=>i.map(i=>d[i]);
var qu=Object.defineProperty;var Ku=(e,t,n)=>t in e?qu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var $r=(e,t,n)=>Ku(e,typeof t!="symbol"?t+"":t,n);import{h as Xu,ag as Bl,q as $u,x as Yu,c as Zu,o as Ju,G as Yr,w as Qu,a as tc,t as ec,k as qe,ak as nc,a0 as un}from"./framework.CfLZVW8t.js";import{K as ic,V as ac,aL as Ys}from"./eo-dash.PV-gecK0.js";import{M as sc,g as rc}from"./MinesweeperDialog-C6znVabM.DKHnOPTg.js";import{i as oc,e as lc}from"./easing-CH0-9wR8.CTB3jml5.js";import"./commonjsHelpers.BosuxZz1.js";import"./SpeciesList-B9froCv4.bzSRvV54.js";import"./VDialog-CGjsgszO.BpDDuMwv.js";import"./VOverlay-BT1-jDdV.DBS8wxz7.js";import"./forwardRefs-HH7XfZ0m.BafvOfOS.js";import"./transition-DdLQscTv.BdUfxuEM.js";import"./VCard-CvuTMXsw.iiTIZr_I.js";import"./VImg-Bg-G9iAc.AKy0J11o.js";const Mn={ADD:"add",REMOVE:"remove"},Ul={PROPERTYCHANGE:"propertychange"},$t={CHANGE:"change"};class hc{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function uc(e,t,n){let i,a;n=n||en;let s=0,r=e.length,o=!1;for(;s<r;)i=s+(r-s>>1),a=+n(e[i],t),a<0?s=i+1:(r=i,o=!a);return o?s:~s}function en(e,t){return e>t?1:e<t?-1:0}function cc(e,t){return e<t?1:e>t?-1:0}function zl(e,t,n){if(e[0]<=t)return 0;const i=e.length;if(t<=e[i-1])return i-1;if(typeof n=="function"){for(let a=1;a<i;++a){const s=e[a];if(s===t)return a;if(s<t)return n(t,e[a-1],s)>0?a-1:a}return i-1}if(n>0){for(let a=1;a<i;++a)if(e[a]<t)return a-1;return i-1}if(n<0){for(let a=1;a<i;++a)if(e[a]<=t)return a;return i-1}for(let a=1;a<i;++a){if(e[a]==t)return a;if(e[a]<t)return e[a-1]-t<t-e[a]?a-1:a}return i-1}function _c(e,t,n){for(;t<n;){const i=e[t];e[t]=e[n],e[n]=i,++t,--n}}function Zs(e,t){const n=Array.isArray(t)?t:[t],i=n.length;for(let a=0;a<i;a++)e[e.length]=n[a]}function Kn(e,t){const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function fc(){return!0}function Si(){}function Vl(e){let t,n,i;return function(){const a=Array.prototype.slice.call(arguments);return(!n||this!==i||!Kn(a,n))&&(i=this,n=a,t=e.apply(this,arguments)),t}}function Js(e){for(const t in e)delete e[t]}function Dn(e){let t;for(t in e)return!1;return!t}class zi{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class jl extends hc{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,n){if(!t||!n)return;const i=this.listeners_||(this.listeners_={}),a=i[t]||(i[t]=[]);a.includes(n)||a.push(n)}dispatchEvent(t){const n=typeof t=="string",i=n?t:t.type,a=this.listeners_&&this.listeners_[i];if(!a)return;const s=n?new zi(t):t;s.target||(s.target=this.eventTarget_||this);const r=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});i in r||(r[i]=0,o[i]=0),++r[i];let l;for(let h=0,u=a.length;h<u;++h)if("handleEvent"in a[h]?l=a[h].handleEvent(s):l=a[h].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--r[i]===0){let h=o[i];for(delete o[i];h--;)this.removeEventListener(i,Si);delete r[i]}return l}disposeInternal(){this.listeners_&&Js(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,n){if(!this.listeners_)return;const i=this.listeners_[t];if(!i)return;const a=i.indexOf(n);a!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[a]=Si,++this.pendingRemovals_[t]):(i.splice(a,1),i.length===0&&delete this.listeners_[t]))}}function ge(e,t,n,i,a){if(a){const r=n;n=function(o){return e.removeEventListener(t,n),r.call(i??this,o)}}else i&&i!==e&&(n=n.bind(i));const s={target:e,type:t,listener:n};return e.addEventListener(t,n),s}function Zr(e,t,n,i){return ge(e,t,n,i,!0)}function ke(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Js(e))}class Hl extends jl{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent($t.CHANGE)}getRevision(){return this.revision_}onInternal(t,n){if(Array.isArray(t)){const i=t.length,a=new Array(i);for(let s=0;s<i;++s)a[s]=ge(this,t[s],n);return a}return ge(this,t,n)}onceInternal(t,n){let i;if(Array.isArray(t)){const a=t.length;i=new Array(a);for(let s=0;s<a;++s)i[s]=Zr(this,t[s],n)}else i=Zr(this,t,n);return n.ol_key=i,i}unInternal(t,n){const i=n.ol_key;if(i)dc(i);else if(Array.isArray(t))for(let a=0,s=t.length;a<s;++a)this.removeEventListener(t[a],n);else this.removeEventListener(t,n)}}function dc(e){if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)ke(e[t]);else ke(e)}function J(){throw new Error("Unimplemented abstract method.")}let mc=0;function rt(e){return e.ol_uid||(e.ol_uid=String(++mc))}class Jr extends zi{constructor(t,n,i){super(t),this.key=n,this.oldValue=i}}class Ge extends Hl{constructor(t){super(),this.on,this.once,this.un,rt(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let n;return this.values_&&this.values_.hasOwnProperty(t)&&(n=this.values_[t]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,n){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new Jr(i,t,n)),i=Ul.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Jr(i,t,n))}addChangeListener(t,n){this.addEventListener(`change:${t}`,n)}removeChangeListener(t,n){this.removeEventListener(`change:${t}`,n)}set(t,n,i){const a=this.values_||(this.values_={});if(i)a[t]=n;else{const s=a[t];a[t]=n,s!==n&&this.notify(t,s)}}setProperties(t,n){for(const i in t)this.set(i,t[i],n)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,n){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],Dn(this.values_)&&(this.values_=null),n||this.notify(t,i)}}}const Qr={LENGTH:"length"};class na extends zi{constructor(t,n,i){super(t),this.element=n,this.index=i}}class gc extends Ge{constructor(t,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=t||[],this.unique_)for(let i=0,a=this.array_.length;i<a;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let n=0,i=t.length;n<i;++n)this.push(t[n]);return this}forEach(t){const n=this.array_;for(let i=0,a=n.length;i<a;++i)t(n[i],i,n)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Qr.LENGTH)}insertAt(t,n){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n),this.array_.splice(t,0,n),this.updateLength_(),this.dispatchEvent(new na(Mn.ADD,n,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const n=this.getLength();return this.insertAt(n,t),this.getLength()}remove(t){const n=this.array_;for(let i=0,a=n.length;i<a;++i)if(n[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const n=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new na(Mn.REMOVE,n,t)),n}setAt(t,n){const i=this.getLength();if(t>=i){this.insertAt(t,n);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n,t);const a=this.array_[t];this.array_[t]=n,this.dispatchEvent(new na(Mn.REMOVE,a,t)),this.dispatchEvent(new na(Mn.ADD,n,t))}updateLength_(){this.set(Qr.LENGTH,this.array_.length)}assertUnique_(t,n){for(let i=0,a=this.array_.length;i<a;++i)if(this.array_[i]===t&&i!==n)throw new Error("Duplicate item added to a unique collection")}}function ht(e,t){if(!e)throw new Error(t)}class Va extends Ge{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const n=t;this.setGeometry(n)}else{const n=t;this.setProperties(n)}}clone(){const t=new Va(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&t.setGeometry(n.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(ke(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=ge(t,$t.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?pc(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function pc(e){if(typeof e=="function")return e;let t;return Array.isArray(e)?t=e:(ht(typeof e.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[e]),function(){return t}}const st={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function yc(e,t,n){const i=Math.min.apply(null,e),a=Math.min.apply(null,t),s=Math.max.apply(null,e),r=Math.max.apply(null,t);return an(i,a,s,r,n)}function Qs(e,t,n){return n?(n[0]=e[0]-t,n[1]=e[1]-t,n[2]=e[2]+t,n[3]=e[3]+t,n):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]}function vc(e,t){return e.slice()}function Wl(e,t,n){let i,a;return t<e[0]?i=e[0]-t:e[2]<t?i=t-e[2]:i=0,n<e[1]?a=e[1]-n:e[3]<n?a=n-e[3]:a=0,i*i+a*a}function As(e,t){return ql(e,t[0],t[1])}function oi(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function ql(e,t,n){return e[0]<=t&&t<=e[2]&&e[1]<=n&&n<=e[3]}function Cs(e,t){const n=e[0],i=e[1],a=e[2],s=e[3],r=t[0],o=t[1];let l=st.UNKNOWN;return r<n?l=l|st.LEFT:r>a&&(l=l|st.RIGHT),o<i?l=l|st.BELOW:o>s&&(l=l|st.ABOVE),l===st.UNKNOWN&&(l=st.INTERSECTING),l}function nn(){return[1/0,1/0,-1/0,-1/0]}function an(e,t,n,i,a){return a?(a[0]=e,a[1]=t,a[2]=n,a[3]=i,a):[e,t,n,i]}function tr(e){return an(1/0,1/0,-1/0,-1/0,e)}function Kl(e,t){const n=e[0],i=e[1];return an(n,i,n,i,t)}function er(e,t,n,i,a){const s=tr(a);return $l(s,e,t,n,i)}function Xl(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function bc(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function $l(e,t,n,i,a){for(;n<i;n+=a)xc(e,t[n],t[n+1]);return e}function xc(e,t,n){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],n),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],n)}function Mc(e,t){let n;return n=t(Yl(e)),n||(n=t(Zl(e)),n)||(n=t(Ql(e)),n)||(n=t(Jl(e)),n)?n:!1}function Yl(e){return[e[0],e[1]]}function Zl(e){return[e[2],e[1]]}function Fn(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function wc(e,t,n,i,a){const[s,r,o,l,h,u,c,_]=Ec(e,t,n,i);return an(Math.min(s,o,h,c),Math.min(r,l,u,_),Math.max(s,o,h,c),Math.max(r,l,u,_),a)}function Ec(e,t,n,i){const a=t*i[0]/2,s=t*i[1]/2,r=Math.cos(n),o=Math.sin(n),l=a*r,h=a*o,u=s*r,c=s*o,_=e[0],f=e[1];return[_-l+c,f-h-u,_-l-c,f-h+u,_+l-c,f+h+u,_+l+c,f+h-u,_-l+c,f-h-u]}function xe(e){return e[3]-e[1]}function Jl(e){return[e[0],e[3]]}function Ql(e){return[e[2],e[3]]}function Rt(e){return e[2]-e[0]}function qt(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function nr(e){return e[2]<e[0]||e[3]<e[1]}function Sc(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function Rc(e,t,n){let i=!1;const a=Cs(e,t),s=Cs(e,n);if(a===st.INTERSECTING||s===st.INTERSECTING)i=!0;else{const r=e[0],o=e[1],l=e[2],h=e[3],u=t[0],c=t[1],_=n[0],f=n[1],d=(f-c)/(_-u);let m,g;s&st.ABOVE&&!(a&st.ABOVE)&&(m=_-(f-h)/d,i=m>=r&&m<=l),!i&&s&st.RIGHT&&!(a&st.RIGHT)&&(g=f-(_-l)*d,i=g>=o&&g<=h),!i&&s&st.BELOW&&!(a&st.BELOW)&&(m=_-(f-o)/d,i=m>=r&&m<=l),!i&&s&st.LEFT&&!(a&st.LEFT)&&(g=f-(_-r)*d,i=g>=o&&g<=h)}return i}function Ic(e,t,n,i){if(nr(e))return tr(n);let a=[];a=[e[0],e[1],e[2],e[1],e[2],e[3],e[0],e[3]],t(a,a,2);const s=[],r=[];for(let o=0,l=a.length;o<l;o+=2)s.push(a[o]),r.push(a[o+1]);return yc(s,r,n)}function th(e,t){const n=t.getExtent(),i=Fn(e);if(t.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const a=Rt(n),r=Math.floor((i[0]-n[0])/a)*a;e[0]-=r,e[2]-=r}return e}function Ac(e,t,n){if(t.canWrapX()){const i=t.getExtent();if(!isFinite(e[0])||!isFinite(e[2]))return[[i[0],e[1],i[2],e[3]]];th(e,t);const a=Rt(i);if(Rt(e)>a)return[[i[0],e[1],i[2],e[3]]];if(e[0]<i[0])return[[e[0]+a,e[1],i[2],e[3]],[i[0],e[1],e[2],e[3]]];if(e[2]>i[2])return[[e[0],e[1],i[2],e[3]],[i[0],e[1],e[2]-a,e[3]]]}return[e]}function mt(e,t,n){return Math.min(Math.max(e,t),n)}function Cc(e,t,n,i,a,s){const r=a-n,o=s-i;if(r!==0||o!==0){const l=((e-n)*r+(t-i)*o)/(r*r+o*o);l>1?(n=a,i=s):l>0&&(n+=r*l,i+=o*l)}return Ln(e,t,n,i)}function Ln(e,t,n,i){const a=n-e,s=i-t;return a*a+s*s}function to(e){return e*180/Math.PI}function yi(e){return e*Math.PI/180}function eo(e,t){const n=e%t;return n*t<0?n+t:n}function zt(e,t,n){return e+n*(t-e)}function Lc(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}function Ls(e,t,n){if(e>=t&&e<n)return e;const i=n-t;return((e-t)%i+i)%i+t}function kc(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function Sa(e,t){let n=!0;for(let i=e.length-1;i>=0;--i)if(e[i]!=t[i]){n=!1;break}return n}function Tc(e,t){const n=Math.cos(t),i=Math.sin(t),a=e[0]*n-e[1]*i,s=e[1]*n+e[0]*i;return e[0]=a,e[1]=s,e}function Pc(e,t){if(t.canWrapX()){const n=Rt(t.getExtent()),i=Oc(e,t,n);i&&(e[0]-=i*n)}return e}function Oc(e,t,n){const i=t.getExtent();let a=0;return t.canWrapX()&&(e[0]<i[0]||e[0]>i[2])&&(n=n||Rt(i),a=Math.floor((e[0]-i[0])/n)),a}function Nc(...e){console.warn(...e)}const eh={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let ir=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||eh[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const Vi=6378137,wn=Math.PI*Vi,Dc=[-wn,-wn,wn,wn],Fc=[-180,-85,180,85],ia=Vi*Math.log(Math.tan(Math.PI/2));class _n extends ir{constructor(t){super({code:t,units:"m",extent:Dc,global:!0,worldExtent:Fc,getPointResolution:function(n,i){return n/Math.cosh(i[1]/Vi)}})}}const no=[new _n("EPSG:3857"),new _n("EPSG:102100"),new _n("EPSG:102113"),new _n("EPSG:900913"),new _n("http://www.opengis.net/def/crs/EPSG/0/3857"),new _n("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Gc(e,t,n,i){const a=e.length;n=n>1?n:2,i=i??n,t===void 0&&(n>2?t=e.slice():t=new Array(a));for(let s=0;s<a;s+=i){t[s]=wn*e[s]/180;let r=Vi*Math.log(Math.tan(Math.PI*(+e[s+1]+90)/360));r>ia?r=ia:r<-ia&&(r=-ia),t[s+1]=r}return t}function Bc(e,t,n,i){const a=e.length;n=n>1?n:2,i=i??n,t===void 0&&(n>2?t=e.slice():t=new Array(a));for(let s=0;s<a;s+=i)t[s]=180*e[s]/wn,t[s+1]=360*Math.atan(Math.exp(e[s+1]/Vi))/Math.PI-90;return t}const Uc=6378137,io=[-180,-90,180,90],zc=Math.PI*Uc/180;class Ke extends ir{constructor(t,n){super({code:t,units:"degrees",extent:io,axisOrientation:n,global:!0,metersPerUnit:zc,worldExtent:io})}}const ao=[new Ke("CRS:84"),new Ke("EPSG:4326","neu"),new Ke("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ke("urn:ogc:def:crs:OGC:2:84"),new Ke("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ke("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ke("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let ks={};function Vc(e){return ks[e]||ks[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function jc(e,t){ks[e]=t}let kn={};function Ri(e,t,n){const i=e.getCode(),a=t.getCode();i in kn||(kn[i]={}),kn[i][a]=n}function os(e,t){return e in kn&&t in kn[e]?kn[e][t]:null}const Ra=.9996,Vt=.00669438,ja=Vt*Vt,Ha=ja*Vt,$e=Vt/(1-Vt),so=Math.sqrt(1-Vt),Gn=(1-so)/(1+so),nh=Gn*Gn,ar=nh*Gn,sr=ar*Gn,ih=sr*Gn,ah=1-Vt/4-3*ja/64-5*Ha/256,Hc=3*Vt/8+3*ja/32+45*Ha/1024,Wc=15*ja/256+45*Ha/1024,qc=35*Ha/3072,Kc=3/2*Gn-27/32*ar+269/512*ih,Xc=21/16*nh-55/32*sr,$c=151/96*ar-417/128*ih,Yc=1097/512*sr,Ia=6378137;function Zc(e,t,n){const i=e-5e5,r=(n.north?t:t-1e7)/Ra/(Ia*ah),o=r+Kc*Math.sin(2*r)+Xc*Math.sin(4*r)+$c*Math.sin(6*r)+Yc*Math.sin(8*r),l=Math.sin(o),h=l*l,u=Math.cos(o),c=l/u,_=c*c,f=_*_,d=1-Vt*h,m=Math.sqrt(1-Vt*h),g=Ia/m,p=(1-Vt)/d,y=$e*u**2,b=y*y,v=i/(g*Ra),x=v*v,M=x*v,R=M*v,w=R*v,I=w*v,k=o-c/p*(x/2-R/24*(5+3*_+10*y-4*b-9*$e))+I/720*(61+90*_+298*y+45*f-252*$e-3*b);let T=(v-M/6*(1+2*_+y)+w/120*(5-2*y+28*_-3*b+8*$e+24*f))/u;return T=Ls(T+yi(sh(n.number)),-Math.PI,Math.PI),[to(T),to(k)]}const ro=-80,oo=84,Jc=-180,Qc=180;function t_(e,t,n){e=Ls(e,Jc,Qc),t<ro?t=ro:t>oo&&(t=oo);const i=yi(t),a=Math.sin(i),s=Math.cos(i),r=a/s,o=r*r,l=o*o,h=yi(e),u=sh(n.number),c=yi(u),_=Ia/Math.sqrt(1-Vt*a**2),f=$e*s**2,d=s*Ls(h-c,-Math.PI,Math.PI),m=d*d,g=m*d,p=g*d,y=p*d,b=y*d,v=Ia*(ah*i-Hc*Math.sin(2*i)+Wc*Math.sin(4*i)-qc*Math.sin(6*i)),x=Ra*_*(d+g/6*(1-o+f)+y/120*(5-18*o+l+72*f-58*$e))+5e5;let M=Ra*(v+_*r*(m/2+p/24*(5-o+9*f+4*f**2)+b/720*(61-58*o+l+600*f-330*$e)));return n.north||(M+=1e7),[x,M]}function sh(e){return(e-1)*6-180+3}const e_=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function rh(e){let t=0;for(const a of e_){const s=e.match(a);if(s){t=parseInt(s[1]);break}}if(!t)return null;let n=0,i=!1;return t>32700&&t<32761?n=t-32700:t>32600&&t<32661&&(i=!0,n=t-32600),n?{number:n,north:i}:null}function lo(e,t){return function(n,i,a,s){const r=n.length;a=a>1?a:2,s=s??a,i||(a>2?i=n.slice():i=new Array(r));for(let o=0;o<r;o+=s){const l=n[o],h=n[o+1],u=e(l,h,t);i[o]=u[0],i[o+1]=u[1]}return i}}function n_(e){return rh(e)?new ir({code:e,units:"m"}):null}function i_(e){const t=rh(e.getCode());return t?{forward:lo(t_,t),inverse:lo(Zc,t)}:null}const a_=[i_],s_=[n_];let Ts=!0;function r_(e){Ts=!1}function oh(e,t){if(t!==void 0){for(let n=0,i=e.length;n<i;++n)t[n]=e[n];t=t}else t=e.slice();return t}function Ps(e){jc(e.getCode(),e),Ri(e,e,oh)}function o_(e){e.forEach(Ps)}function sn(e){if(typeof e!="string")return e;const t=Vc(e);if(t)return t;for(const n of s_){const i=n(e);if(i)return i}return null}function ho(e){o_(e),e.forEach(function(t){e.forEach(function(n){t!==n&&Ri(t,n,oh)})})}function l_(e,t,n,i){e.forEach(function(a){t.forEach(function(s){Ri(a,s,n),Ri(s,a,i)})})}function rr(e,t){return e?typeof e=="string"?sn(e):e:sn(t)}function h_(e,t){const n=e.getCode(),i=t.getCode();let a=os(n,i);if(a)return a;let s=null,r=null;for(const l of a_)s||(s=l(e)),r||(r=l(t));if(!s&&!r)return null;const o="EPSG:4326";if(r)if(s)a=ls(s.inverse,r.forward);else{const l=os(n,o);l&&(a=ls(l,r.forward))}else{const l=os(o,i);l&&(a=ls(s.inverse,l))}return a&&(Ps(e),Ps(t),Ri(e,t,a)),a}function ls(e,t){return function(n,i,a,s){return i=e(n,i,a,s),t(i,i,a,s)}}function Os(e,t){const n=sn(e),i=sn(t);return h_(n,i)}function u_(e,t,n,i){const a=Os(t,n);return Ic(e,a,void 0)}function uo(e,t){return e}function Ee(e,t){return Ts&&!Sa(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(Ts=!1,Nc("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e}function lh(e,t){return e}function li(e,t){return e}function c_(){ho(no),ho(ao),l_(ao,no,Gc,Bc)}c_();new Array(6);function pe(){return[1,0,0,1,0,0]}function __(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Tt(e,t){const n=t[0],i=t[1];return t[0]=e[0]*n+e[2]*i+e[4],t[1]=e[1]*n+e[3]*i+e[5],t}function rn(e,t,n,i,a,s,r,o){const l=Math.sin(s),h=Math.cos(s);return e[0]=i*h,e[1]=a*l,e[2]=-i*l,e[3]=a*h,e[4]=r*i*h-o*i*l+t,e[5]=r*a*l+o*a*h+n,e}function f_(e,t){const n=d_(t);ht(n!==0,"Transformation matrix cannot be inverted");const i=t[0],a=t[1],s=t[2],r=t[3],o=t[4],l=t[5];return e[0]=r/n,e[1]=-a/n,e[2]=-s/n,e[3]=i/n,e[4]=(s*l-r*o)/n,e[5]=-(i*l-a*o)/n,e}function d_(e){return e[0]*e[3]-e[1]*e[2]}const co=[1e6,1e6,1e6,1e6,2,2];function m_(e){return"matrix("+e.map((n,i)=>Math.round(n*co[i])/co[i]).join(", ")+")"}function Te(e,t,n,i,a,s,r){s=s||[],r=r||2;let o=0;for(let l=t;l<n;l+=i){const h=e[l],u=e[l+1];s[o++]=a[0]*h+a[2]*u+a[4],s[o++]=a[1]*h+a[3]*u+a[5];for(let c=2;c<r;c++)s[o++]=e[l+c]}return s&&s.length!=o&&(s.length=o),s}function hh(e,t,n,i,a,s,r){r=r||[];const o=Math.cos(a),l=Math.sin(a),h=s[0],u=s[1];let c=0;for(let _=t;_<n;_+=i){const f=e[_]-h,d=e[_+1]-u;r[c++]=h+f*o-d*l,r[c++]=u+f*l+d*o;for(let m=_+2;m<_+i;++m)r[c++]=e[m]}return r&&r.length!=c&&(r.length=c),r}function g_(e,t,n,i,a,s,r,o){o=o||[];const l=r[0],h=r[1];let u=0;for(let c=t;c<n;c+=i){const _=e[c]-l,f=e[c+1]-h;o[u++]=l+a*_,o[u++]=h+s*f;for(let d=c+2;d<c+i;++d)o[u++]=e[d]}return o&&o.length!=u&&(o.length=u),o}function p_(e,t,n,i,a,s,r){r=r||[];let o=0;for(let l=t;l<n;l+=i){r[o++]=e[l]+a,r[o++]=e[l+1]+s;for(let h=l+2;h<l+i;++h)r[o++]=e[h]}return r&&r.length!=o&&(r.length=o),r}const _o=pe(),y_=[NaN,NaN];class v_ extends Ge{constructor(){super(),this.extent_=nn(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Vl((t,n,i)=>{if(!i)return this.getSimplifiedGeometry(n);const a=this.clone();return a.applyTransform(i),a.getSimplifiedGeometry(n)})}simplifyTransformed(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)}clone(){return J()}closestPointXY(t,n,i,a){return J()}containsXY(t,n){return this.closestPointXY(t,n,y_,Number.MIN_VALUE)===0}getClosestPoint(t,n){return n=n||[NaN,NaN],this.closestPointXY(t[0],t[1],n,1/0),n}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return J()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&tr(n),this.extentRevision_=this.getRevision()}return Sc(this.extent_,t)}rotate(t,n){J()}scale(t,n,i){J()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return J()}getType(){return J()}applyTransform(t){J()}intersectsExtent(t){return J()}translate(t,n){J()}transform(t,n){const i=sn(t),a=i.getUnits()=="tile-pixels"?function(s,r,o){const l=i.getExtent(),h=i.getWorldExtent(),u=xe(h)/xe(l);rn(_o,h[0],h[3],u,-u,0,0,0);const c=Te(s,0,s.length,o,_o,r),_=Os(i,n);return _?_(c,c,o):c}:Os(i,n);return this.applyTransform(a),this}}class or extends v_{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return er(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return J()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,n){this.stride=fo(t),this.layout=t,this.flatCoordinates=n}setCoordinates(t,n){J()}setLayout(t,n,i){let a;if(t)a=fo(t);else{for(let s=0;s<i;++s){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}a=n.length,t=b_(a)}this.layout=t,this.stride=a}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,n){const i=this.getFlatCoordinates();if(i){const a=this.getStride();hh(i,0,i.length,a,t,n,i),this.changed()}}scale(t,n,i){n===void 0&&(n=t),i||(i=Fn(this.getExtent()));const a=this.getFlatCoordinates();if(a){const s=this.getStride();g_(a,0,a.length,s,t,n,i,a),this.changed()}}translate(t,n){const i=this.getFlatCoordinates();if(i){const a=this.getStride();p_(i,0,i.length,a,t,n,i),this.changed()}}}function b_(e){let t;return e==2?t="XY":e==3?t="XYZ":e==4&&(t="XYZM"),t}function fo(e){let t;return e=="XY"?t=2:e=="XYZ"||e=="XYM"?t=3:e=="XYZM"&&(t=4),t}function x_(e,t,n){const i=e.getFlatCoordinates();if(!i)return null;const a=e.getStride();return Te(i,0,i.length,a,t,n)}function mo(e,t,n,i,a,s,r){const o=e[t],l=e[t+1],h=e[n]-o,u=e[n+1]-l;let c;if(h===0&&u===0)c=t;else{const _=((a-o)*h+(s-l)*u)/(h*h+u*u);if(_>1)c=n;else if(_>0){for(let f=0;f<i;++f)r[f]=zt(e[t+f],e[n+f],_);r.length=i;return}else c=t}for(let _=0;_<i;++_)r[_]=e[c+_];r.length=i}function uh(e,t,n,i,a){let s=e[t],r=e[t+1];for(t+=i;t<n;t+=i){const o=e[t],l=e[t+1],h=Ln(s,r,o,l);h>a&&(a=h),s=o,r=l}return a}function M_(e,t,n,i,a){for(let s=0,r=n.length;s<r;++s){const o=n[s];a=uh(e,t,o,i,a),t=o}return a}function ch(e,t,n,i,a,s,r,o,l,h,u){if(t==n)return h;let c,_;if(a===0){if(_=Ln(r,o,e[t],e[t+1]),_<h){for(c=0;c<i;++c)l[c]=e[t+c];return l.length=i,_}return h}u=u||[NaN,NaN];let f=t+i;for(;f<n;)if(mo(e,f-i,f,i,r,o,u),_=Ln(r,o,u[0],u[1]),_<h){for(h=_,c=0;c<i;++c)l[c]=u[c];l.length=i,f+=i}else f+=i*Math.max((Math.sqrt(_)-Math.sqrt(h))/a|0,1);if(mo(e,n-i,t,i,r,o,u),_=Ln(r,o,u[0],u[1]),_<h){for(h=_,c=0;c<i;++c)l[c]=u[c];l.length=i}return h}function w_(e,t,n,i,a,s,r,o,l,h,u){u=u||[NaN,NaN];for(let c=0,_=n.length;c<_;++c){const f=n[c];h=ch(e,t,f,i,a,s,r,o,l,h,u),t=f}return h}function E_(e,t,n,i){for(let a=0,s=n.length;a<s;++a)e[t++]=n[a];return t}function _h(e,t,n,i){for(let a=0,s=n.length;a<s;++a){const r=n[a];for(let o=0;o<i;++o)e[t++]=r[o]}return t}function S_(e,t,n,i,a){a=a||[];let s=0;for(let r=0,o=n.length;r<o;++r){const l=_h(e,t,n[r],i);a[s++]=l,t=l}return a.length=s,a}function En(e,t,n,i,a){a=a!==void 0?a:[];let s=0;for(let r=t;r<n;r+=i)a[s++]=e.slice(r,r+i);return a.length=s,a}function Aa(e,t,n,i,a){a=a!==void 0?a:[];let s=0;for(let r=0,o=n.length;r<o;++r){const l=n[r];a[s++]=En(e,t,l,i,a[s]),t=l}return a.length=s,a}function go(e,t,n,i,a){a=a!==void 0?a:[];let s=0;for(let r=0,o=n.length;r<o;++r){const l=n[r];a[s++]=l.length===1&&l[0]===t?[]:Aa(e,t,l,i,a[s]),t=l[l.length-1]}return a.length=s,a}function po(e,t,n,i,a,s,r){let o,l;const h=(n-t)/i;if(h===1)o=t;else if(h===2)o=t,l=a;else if(h!==0){let u=e[t],c=e[t+1],_=0;const f=[0];for(let g=t+i;g<n;g+=i){const p=e[g],y=e[g+1];_+=Math.sqrt((p-u)*(p-u)+(y-c)*(y-c)),f.push(_),u=p,c=y}const d=a*_,m=uc(f,d);m<0?(l=(d-f[-m-2])/(f[-m-1]-f[-m-2]),o=t+(-m-2)*i):o=t+m*i}r=r>1?r:2,s=s||new Array(r);for(let u=0;u<r;++u)s[u]=o===void 0?NaN:l===void 0?e[o+u]:zt(e[o+u],e[o+i+u],l);return s}function R_(e,t,n,i,a){return!Mc(a,function(r){return!Ye(e,t,n,i,r[0],r[1])})}function Ye(e,t,n,i,a,s){let r=0,o=e[n-i],l=e[n-i+1];for(;t<n;t+=i){const h=e[t],u=e[t+1];l<=s?u>s&&(h-o)*(s-l)-(a-o)*(u-l)>0&&r++:u<=s&&(h-o)*(s-l)-(a-o)*(u-l)<0&&r--,o=h,l=u}return r!==0}function fh(e,t,n,i,a,s){if(n.length===0||!Ye(e,t,n[0],i,a,s))return!1;for(let r=1,o=n.length;r<o;++r)if(Ye(e,n[r-1],n[r],i,a,s))return!1;return!0}function I_(e,t,n,i,a){let s;for(t+=i;t<n;t+=i)if(s=a(e.slice(t-i,t),e.slice(t,t+i)),s)return s;return!1}function dh(e,t,n,i,a,s){return s=s??$l(nn(),e,t,n,i),qt(a,s)?s[0]>=a[0]&&s[2]<=a[2]||s[1]>=a[1]&&s[3]<=a[3]?!0:I_(e,t,n,i,function(r,o){return Rc(a,r,o)}):!1}function A_(e,t,n,i,a){return!!(dh(e,t,n,i,a)||Ye(e,t,n,i,a[0],a[1])||Ye(e,t,n,i,a[0],a[3])||Ye(e,t,n,i,a[2],a[1])||Ye(e,t,n,i,a[2],a[3]))}function C_(e,t,n,i,a){if(!A_(e,t,n[0],i,a))return!1;if(n.length===1)return!0;for(let s=1,r=n.length;s<r;++s)if(R_(e,n[s-1],n[s],i,a)&&!dh(e,n[s-1],n[s],i,a))return!1;return!0}function L_(e,t,n,i){let a=e[t],s=e[t+1],r=0;for(let o=t+i;o<n;o+=i){const l=e[o],h=e[o+1];r+=Math.sqrt((l-a)*(l-a)+(h-s)*(h-s)),a=l,s=h}return r}function lr(e,t,n,i,a,s,r){const o=(n-t)/i;if(o<3){for(;t<n;t+=i)s[r++]=e[t],s[r++]=e[t+1];return r}const l=new Array(o);l[0]=1,l[o-1]=1;const h=[t,n-i];let u=0;for(;h.length>0;){const c=h.pop(),_=h.pop();let f=0;const d=e[_],m=e[_+1],g=e[c],p=e[c+1];for(let y=_+i;y<c;y+=i){const b=e[y],v=e[y+1],x=Cc(b,v,d,m,g,p);x>f&&(u=y,f=x)}f>a&&(l[(u-t)/i]=1,_+i<u&&h.push(_,u),u+i<c&&h.push(u,c))}for(let c=0;c<o;++c)l[c]&&(s[r++]=e[t+c*i],s[r++]=e[t+c*i+1]);return r}function k_(e,t,n,i,a,s,r,o){for(let l=0,h=n.length;l<h;++l){const u=n[l];r=lr(e,t,u,i,a,s,r),o.push(r),t=u}return r}function Xe(e,t){return t*Math.round(e/t)}function T_(e,t,n,i,a,s,r){if(t==n)return r;let o=Xe(e[t],a),l=Xe(e[t+1],a);t+=i,s[r++]=o,s[r++]=l;let h,u;do if(h=Xe(e[t],a),u=Xe(e[t+1],a),t+=i,t==n)return s[r++]=h,s[r++]=u,r;while(h==o&&u==l);for(;t<n;){const c=Xe(e[t],a),_=Xe(e[t+1],a);if(t+=i,c==h&&_==u)continue;const f=h-o,d=u-l,m=c-o,g=_-l;if(f*g==d*m&&(f<0&&m<f||f==m||f>0&&m>f)&&(d<0&&g<d||d==g||d>0&&g>d)){h=c,u=_;continue}s[r++]=h,s[r++]=u,o=h,l=u,h=c,u=_}return s[r++]=h,s[r++]=u,r}function mh(e,t,n,i,a,s,r,o){for(let l=0,h=n.length;l<h;++l){const u=n[l];r=T_(e,t,u,i,a,s,r),o.push(r),t=u}return r}let P_=class gh extends or{constructor(t,n){super(),this.setCoordinates(t,n)}clone(){const t=new gh(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,a){const s=this.flatCoordinates,r=Ln(t,n,s[0],s[1]);if(r<a){const o=this.stride;for(let l=0;l<o;++l)i[l]=s[l];return i.length=o,r}return a}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return Kl(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return ql(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=E_(this.flatCoordinates,0,t,this.stride),this.changed()}};const Ze={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose"},Oe=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"";Oe.includes("firefox");const O_=Oe.includes("safari")&&!Oe.includes("chrom");O_&&(Oe.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Oe));Oe.includes("webkit")&&Oe.includes("edge");Oe.includes("macintosh");const ph=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,N_=typeof Image<"u"&&Image.prototype.decode;(function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return e})();const j={IDLE:0,LOADING:1,LOADED:2,ERROR:3},yo={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var vo={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function D_(e){var u,c;var t,n=[],i=1,a;if(typeof e=="number")return{space:"rgb",values:[e>>>16,(e&65280)>>>8,e&255],alpha:1};if(typeof e=="number")return{space:"rgb",values:[e>>>16,(e&65280)>>>8,e&255],alpha:1};if(e=String(e).toLowerCase(),yo[e])n=yo[e].slice(),a="rgb";else if(e==="transparent")i=0,a="rgb",n=[0,0,0];else if(e[0]==="#"){var s=e.slice(1),r=s.length,o=r<=4;i=1,o?(n=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],r===4&&(i=parseInt(s[3]+s[3],16)/255)):(n=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],r===8&&(i=parseInt(s[6]+s[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),a="rgb"}else if(t=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(e)){var l=t[1];a=l.replace(/a$/,"");var h=a==="cmyk"?4:a==="gray"?1:3;n=t[2].trim().split(/\s*[,\/]\s*|\s+/),a==="color"&&(a=n.shift()),n=n.map(function(_,f){if(_[_.length-1]==="%")return _=parseFloat(_)/100,f===3?_:a==="rgb"?_*255:a[0]==="h"||a[0]==="l"&&!f?_*100:a==="lab"?_*125:a==="lch"?f<2?_*150:_*360:a[0]==="o"&&!f?_:a==="oklab"?_*.4:a==="oklch"?f<2?_*.4:_*360:_;if(a[f]==="h"||f===2&&a[a.length-1]==="h"){if(vo[_]!==void 0)return vo[_];if(_.endsWith("deg"))return parseFloat(_);if(_.endsWith("turn"))return parseFloat(_)*360;if(_.endsWith("grad"))return parseFloat(_)*360/400;if(_.endsWith("rad"))return parseFloat(_)*180/Math.PI}return _==="none"?0:parseFloat(_)}),i=n.length>h?n.pop():1}else/[0-9](?:\s|\/|,)/.test(e)&&(n=e.match(/([0-9]+)/g).map(function(_){return parseFloat(_)}),a=((c=(u=e.match(/([a-z])/ig))==null?void 0:u.join(""))==null?void 0:c.toLowerCase())||"rgb");return{space:a,values:n,alpha:i}}const Ii={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},hs={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t=e[0]/360,n=e[1]/100,i=e[2]/100,a,s,r,o,l,h=0;if(n===0)return l=i*255,[l,l,l];for(s=i<.5?i*(1+n):i+n-i*n,a=2*i-s,o=[0,0,0];h<3;)r=t+1/3*-(h-1),r<0?r++:r>1&&r--,l=6*r<1?a+(s-a)*6*r:2*r<1?s:3*r<2?a+(s-a)*(2/3-r)*6:a,o[h++]=l*255;return o}};Ii.hsl=function(e){var t=e[0]/255,n=e[1]/255,i=e[2]/255,a=Math.min(t,n,i),s=Math.max(t,n,i),r=s-a,o,l,h;return s===a?o=0:t===s?o=(n-i)/r:n===s?o=2+(i-t)/r:i===s&&(o=4+(t-n)/r),o=Math.min(o*60,360),o<0&&(o+=360),h=(a+s)/2,s===a?l=0:h<=.5?l=r/(s+a):l=r/(2-s-a),[o,l*100,h*100]};function F_(e){Array.isArray(e)&&e.raw&&(e=String.raw(...arguments)),e instanceof Number&&(e=+e);var t,n=D_(e);if(!n.space)return[];const i=n.space[0]==="h"?hs.min:Ii.min,a=n.space[0]==="h"?hs.max:Ii.max;return t=Array(3),t[0]=Math.min(Math.max(n.values[0],i[0]),a[0]),t[1]=Math.min(Math.max(n.values[1],i[1]),a[1]),t[2]=Math.min(Math.max(n.values[2],i[2]),a[2]),n.space[0]==="h"&&(t=hs.rgb(t)),t.push(Math.min(Math.max(n.alpha,0),1)),t}var ut={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};ut.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};ut.max=ut.whitepoint[2].D65;ut.rgb=function(e,t){t=t||ut.whitepoint[2].E;var n=e[0]/t[0],i=e[1]/t[1],a=e[2]/t[2],s,r,o;return s=n*3.240969941904521+i*-1.537383177570093+a*-.498610760293,r=n*-.96924363628087+i*1.87596750150772+a*.041555057407175,o=n*.055630079696993+i*-.20397695888897+a*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r=r*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,s=Math.min(Math.max(0,s),1),r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),[s*255,r*255,o*255]};Ii.xyz=function(e,t){var n=e[0]/255,i=e[1]/255,a=e[2]/255;n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92;var s=n*.41239079926595+i*.35758433938387+a*.18048078840183,r=n*.21263900587151+i*.71516867876775+a*.072192315360733,o=n*.019330818715591+i*.11919477979462+a*.95053215224966;return t=t||ut.whitepoint[2].E,[s*t[0],r*t[1],o*t[2]]};const hr={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(e,t,n){var i,a,s,r,o,l,h,u,c,_,f,d,m;if(s=e[0],r=e[1],o=e[2],s===0)return[0,0,0];var g=.0011070564598794539;return t=t||"D65",n=n||2,c=ut.whitepoint[n][t][0],_=ut.whitepoint[n][t][1],f=ut.whitepoint[n][t][2],d=4*c/(c+15*_+3*f),m=9*_/(c+15*_+3*f),i=r/(13*s)+d||0,a=o/(13*s)+m||0,h=s>8?_*Math.pow((s+16)/116,3):_*s*g,l=h*9*i/(4*a)||0,u=h*(12-3*i-20*a)/(4*a)||0,[l,h,u]}};ut.luv=function(e,t,n){var i,a,s,r,o,l,h,u,c,_,f,d,m,g=.008856451679035631,p=903.2962962962961;t=t||"D65",n=n||2,c=ut.whitepoint[n][t][0],_=ut.whitepoint[n][t][1],f=ut.whitepoint[n][t][2],d=4*c/(c+15*_+3*f),m=9*_/(c+15*_+3*f),l=e[0],h=e[1],u=e[2],i=4*l/(l+15*h+3*u)||0,a=9*h/(l+15*h+3*u)||0;var y=h/_;return s=y<=g?p*y:116*Math.pow(y,1/3)-16,r=13*s*(i-d),o=13*s*(a-m),[s,r,o]};var yh={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(e){var t=e[0],n=e[1],i=e[2],a,s,r;return r=i/360*2*Math.PI,a=n*Math.cos(r),s=n*Math.sin(r),[t,a,s]},xyz:function(e){return hr.xyz(yh.luv(e))}};hr.lchuv=function(e){var t=e[0],n=e[1],i=e[2],a=Math.sqrt(n*n+i*i),s=Math.atan2(i,n),r=s*360/2/Math.PI;return r<0&&(r+=360),[t,a,r]};ut.lchuv=function(e){return hr.lchuv(ut.luv(e))};const ur=[NaN,NaN,NaN,0];function G_(e){return typeof e=="string"?e:_r(e)}const B_=1024,ii={};let us=0;function U_(e){if(e.length===4)return e;const t=e.slice();return t[3]=1,t}function bo(e){const t=ut.lchuv(Ii.xyz(e));return t[3]=e[3],t}function z_(e){const t=ut.rgb(yh.xyz(e));return t[3]=e[3],t}function cr(e){if(e==="none")return ur;if(ii.hasOwnProperty(e))return ii[e];if(us>=B_){let n=0;for(const i in ii)n++&3||(delete ii[i],--us)}const t=F_(e);if(t.length!==4)throw new Error('failed to parse "'+e+'" as color');for(const n of t)if(isNaN(n))throw new Error('failed to parse "'+e+'" as color');return vh(t),ii[e]=t,++us,t}function Bn(e){return Array.isArray(e)?e:cr(e)}function vh(e){return e[0]=mt(e[0]+.5|0,0,255),e[1]=mt(e[1]+.5|0,0,255),e[2]=mt(e[2]+.5|0,0,255),e[3]=mt(e[3],0,1),e}function _r(e){let t=e[0];t!=(t|0)&&(t=t+.5|0);let n=e[1];n!=(n|0)&&(n=n+.5|0);let i=e[2];i!=(i|0)&&(i=i+.5|0);const a=e[3]===void 0?1:Math.round(e[3]*1e3)/1e3;return"rgba("+t+","+n+","+i+","+a+")"}function Ct(e,t,n,i){let a;return n&&n.length?a=n.shift():ph?a=new OffscreenCanvas(e||300,t||300):a=document.createElement("canvas"),e&&(a.width=e),t&&(a.height=t),a.getContext("2d",i)}let cs;function Ca(){return cs||(cs=Ct(1,1)),cs}function V_(e){const t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function j_(e,t){return new Promise((n,i)=>{function a(){r(),n(e)}function s(){r(),i(new Error("Image load error"))}function r(){e.removeEventListener("load",a),e.removeEventListener("error",s)}e.addEventListener("load",a),e.addEventListener("error",s)})}function H_(e,t){return t&&(e.src=t),e.src&&N_?new Promise((n,i)=>e.decode().then(()=>n(e)).catch(a=>e.complete&&e.width?n(e):i(a))):j_(e)}class W_{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const n in this.cache_){const i=this.cache_[n];!(t++&3)&&!i.hasListener()&&(delete this.cache_[n],delete this.patternCache_[n],--this.cacheSize_)}}}get(t,n,i){const a=_s(t,n,i);return a in this.cache_?this.cache_[a]:null}getPattern(t,n,i){const a=_s(t,n,i);return a in this.patternCache_?this.patternCache_[a]:null}set(t,n,i,a,s){const r=_s(t,n,i),o=r in this.cache_;this.cache_[r]=a,s&&(a.getImageState()===j.IDLE&&a.load(),a.getImageState()===j.LOADING?a.ready().then(()=>{this.patternCache_[r]=Ca().createPattern(a.getImage(1),"repeat")}):this.patternCache_[r]=Ca().createPattern(a.getImage(1),"repeat")),o||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function _s(e,t,n){const i=n?Bn(n):"null";return t+":"+e+":"+i}const se=new W_;let ai=null;class bh extends jl{constructor(t,n,i,a,s){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=a===void 0?j.IDLE:a,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=n,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===j.LOADED){ai||(ai=Ct(1,1,void 0,{willReadFrequently:!0})),ai.drawImage(this.image_,0,0);try{ai.getImageData(0,0,1,1),this.tainted_=!1}catch{ai=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent($t.CHANGE)}handleImageError_(){this.imageState_=j.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=j.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],n=this.size_[1],i=Ct(t,n);i.fillRect(0,0,t,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===j.IDLE){this.image_||this.initializeImage_(),this.imageState_=j.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&H_(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==j.LOADED)return;const n=this.image_,i=Ct(Math.ceil(n.width*t),Math.ceil(n.height*t)),a=i.canvas;i.scale(t,t),i.drawImage(n,0,0),i.globalCompositeOperation="multiply",i.fillStyle=G_(this.color_),i.fillRect(0,0,a.width/t,a.height/t),i.globalCompositeOperation="destination-in",i.drawImage(n,0,0),this.canvas_[t]=a}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===j.LOADED||this.imageState_===j.ERROR)t();else{const n=()=>{(this.imageState_===j.LOADED||this.imageState_===j.ERROR)&&(this.removeEventListener($t.CHANGE,n),t())};this.addEventListener($t.CHANGE,n)}})),this.ready_}}function fr(e,t,n,i,a,s){let r=t===void 0?void 0:se.get(t,n,a);return r||(r=new bh(e,e&&"src"in e?e.src||void 0:t,n,i,a),se.set(t,n,a,r,s)),s&&r&&!se.getPattern(t,n,a)&&se.set(t,n,a,r,s),r}function re(e){return e?Array.isArray(e)?_r(e):typeof e=="object"&&"src"in e?q_(e):e:null}function q_(e){if(!e.offset||!e.size)return se.getPattern(e.src,"anonymous",e.color);const t=e.src+":"+e.offset,n=se.getPattern(t,void 0,e.color);if(n)return n;const i=se.get(e.src,"anonymous",null);if(i.getImageState()!==j.LOADED)return null;const a=Ct(e.size[0],e.size[1]);return a.drawImage(i.getImage(1),e.offset[0],e.offset[1],e.size[0],e.size[1],0,0,e.size[0],e.size[1]),fr(a.canvas,t,void 0,j.LOADED,e.color,!0),se.getPattern(t,void 0,e.color)}class xh{drawCustom(t,n,i,a,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,n,i){}drawFeature(t,n,i){}drawGeometryCollection(t,n,i){}drawLineString(t,n,i){}drawMultiLineString(t,n,i){}drawMultiPoint(t,n,i){}drawMultiPolygon(t,n,i){}drawPoint(t,n,i){}drawPolygon(t,n,i){}drawText(t,n,i){}setFillStrokeStyle(t,n){}setImageStyle(t,n){}setTextStyle(t,n){}}const K_=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),xo=["style","variant","weight","size","lineHeight","family"],Mh=function(e){const t=e.match(K_);if(!t)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,a=xo.length;i<a;++i){const s=t[i+1];s!==void 0&&(n[xo[i]]=s)}return n.families=n.family.split(/,\s?/),n},wh="10px sans-serif",Et="#000",Un="round",ye=[],ve=0,zn="round",Ai=10,Ci="#000",Li="center",La="middle",Je=[0,0,0,0],ki=1,Se=new Ge;let yn=null,Ns;const Ds={},X_=function(){const t="32px ",n=["monospace","serif"],i=n.length,a="wmytzilWMYTZIL@#/&?$%10";let s,r;function o(h,u,c){let _=!0;for(let f=0;f<i;++f){const d=n[f];if(r=ka(h+" "+u+" "+t+d,a),c!=d){const m=ka(h+" "+u+" "+t+c+","+d,a);_=_&&m!=r}}return!!_}function l(){let h=!0;const u=Se.getKeys();for(let c=0,_=u.length;c<_;++c){const f=u[c];if(Se.get(f)<100){const[d,m,g]=f.split(`
`);o(d,m,g)?(Js(Ds),yn=null,Ns=void 0,Se.set(f,100)):(Se.set(f,Se.get(f)+1,!0),h=!1)}}h&&(clearInterval(s),s=void 0)}return function(h){const u=Mh(h);if(!u)return;const c=u.families;for(let _=0,f=c.length;_<f;++_){const d=c[_],m=u.style+`
`+u.weight+`
`+d;Se.get(m)===void 0&&(Se.set(m,100,!0),o(u.style,u.weight,d)||(Se.set(m,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),$_=function(){let e;return function(t){let n=Ds[t];if(n==null){if(ph){const i=Mh(t),a=Eh(t,"Žg");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(a.actualBoundingBoxAscent+a.actualBoundingBoxDescent)}else e||(e=document.createElement("div"),e.innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=t,document.body.appendChild(e),n=e.offsetHeight,document.body.removeChild(e);Ds[t]=n}return n}}();function Eh(e,t){return yn||(yn=Ct(1,1)),e!=Ns&&(yn.font=e,Ns=yn.font),yn.measureText(t)}function ka(e,t){return Eh(e,t).width}function Mo(e,t,n){if(t in n)return n[t];const i=t.split(`
`).reduce((a,s)=>Math.max(a,ka(e,s)),0);return n[t]=i,i}function Y_(e,t){const n=[],i=[],a=[];let s=0,r=0,o=0,l=0;for(let h=0,u=t.length;h<=u;h+=2){const c=t[h];if(c===`
`||h===u){s=Math.max(s,r),a.push(r),r=0,o+=l,l=0;continue}const _=t[h+1]||e.font,f=ka(_,c);n.push(f),r+=f;const d=$_(_);i.push(d),l=Math.max(l,d)}return{width:s,height:o,widths:n,heights:i,lineWidths:a}}function Z_(e,t,n,i,a,s,r,o,l,h,u){e.save(),n!==1&&(e.globalAlpha===void 0?e.globalAlpha=c=>c.globalAlpha*=n:e.globalAlpha*=n),t&&e.transform.apply(e,t),i.contextInstructions?(e.translate(l,h),e.scale(u[0],u[1]),J_(i,e)):u[0]<0||u[1]<0?(e.translate(l,h),e.scale(u[0],u[1]),e.drawImage(i,a,s,r,o,0,0,r,o)):e.drawImage(i,a,s,r,o,l,h,r*u[0],o*u[1]),e.restore()}function J_(e,t){const n=e.contextInstructions;for(let i=0,a=n.length;i<a;i+=2)Array.isArray(n[i+1])?t[n[i]].apply(t,n[i+1]):t[n[i]]=n[i+1]}class Q_ extends xh{constructor(t,n,i,a,s,r,o){super(),this.context_=t,this.pixelRatio_=n,this.extent_=i,this.transform_=a,this.transformRotation_=a?Lc(Math.atan2(a[1],a[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=r,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=pe()}drawImages_(t,n,i,a){if(!this.image_)return;const s=Te(t,n,i,a,this.transform_,this.pixelCoordinates_),r=this.context_,o=this.tmpLocalTransform_,l=r.globalAlpha;this.imageOpacity_!=1&&(r.globalAlpha=l*this.imageOpacity_);let h=this.imageRotation_;this.transformRotation_===0&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let u=0,c=s.length;u<c;u+=2){const _=s[u]-this.imageAnchorX_,f=s[u+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const d=_+this.imageAnchorX_,m=f+this.imageAnchorY_;rn(o,d,m,1,1,h,-d,-m),r.save(),r.transform.apply(r,o),r.translate(d,m),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.restore()}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,_,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(r.globalAlpha=l)}drawText_(t,n,i,a){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Te(t,n,i,a,this.transform_,this.pixelCoordinates_),r=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);n<i;n+=a){const l=s[n]+this.textOffsetX_,h=s[n+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(r.save(),r.translate(l-this.textOffsetX_,h-this.textOffsetY_),r.rotate(o),r.translate(this.textOffsetX_,this.textOffsetY_),r.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&r.strokeText(this.text_,0,0),this.textFillState_&&r.fillText(this.text_,0,0),r.restore()):(this.textStrokeState_&&r.strokeText(this.text_,l,h),this.textFillState_&&r.fillText(this.text_,l,h))}}moveToLineTo_(t,n,i,a,s){const r=this.context_,o=Te(t,n,i,a,this.transform_,this.pixelCoordinates_);r.moveTo(o[0],o[1]);let l=o.length;s&&(l-=2);for(let h=2;h<l;h+=2)r.lineTo(o[h],o[h+1]);return s&&r.closePath(),i}drawRings_(t,n,i,a){for(let s=0,r=i.length;s<r;++s)n=this.moveToLineTo_(t,n,i[s],a,!0);return n}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!qt(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=x_(t,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],a=n[3]-n[1],s=Math.sqrt(i*i+a*a),r=this.context_;r.beginPath(),r.arc(n[0],n[1],s,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,n){const i=n.getGeometryFunction()(t);i&&(this.setStyle(n),this.drawGeometry(i))}drawGeometryCollection(t){const n=t.getGeometriesArray();for(let i=0,a=n.length;i<a;++i)this.drawGeometry(n[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!qt(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=t.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),n.stroke()}if(this.text_!==""){const n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getExtent();if(qt(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,a=t.getFlatCoordinates();let s=0;const r=t.getEnds(),o=t.getStride();i.beginPath();for(let l=0,h=r.length;l<h;++l)s=this.moveToLineTo_(a,s,r[l],o,!1);i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!qt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_;n.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!qt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=t.getOrientedFlatCoordinates();let a=0;const s=t.getEndss(),r=t.getStride();n.beginPath();for(let o=0,l=s.length;o<l;++o){const h=s[o];a=this.drawRings_(i,a,h,r)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=t.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(t){const n=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,n.lineCap=t.lineCap),Kn(i.lineDash,t.lineDash)||n.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset,n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const n=this.context_,i=this.contextTextState_,a=t.textAlign?t.textAlign:Li;i?(i.font!=t.font&&(i.font=t.font,n.font=t.font),i.textAlign!=a&&(i.textAlign=a,n.textAlign=a),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=a,n.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:a,textBaseline:t.textBaseline})}setFillStrokeStyle(t,n){if(!t)this.fillState_=null;else{const i=t.getColor();this.fillState_={fillStyle:re(i||Et)}}if(!n)this.strokeState_=null;else{const i=n.getColor(),a=n.getLineCap(),s=n.getLineDash(),r=n.getLineDashOffset(),o=n.getLineJoin(),l=n.getWidth(),h=n.getMiterLimit(),u=s||ye;this.strokeState_={lineCap:a!==void 0?a:Un,lineDash:this.pixelRatio_===1?u:u.map(c=>c*this.pixelRatio_),lineDashOffset:(r||ve)*this.pixelRatio_,lineJoin:o!==void 0?o:zn,lineWidth:(l!==void 0?l:ki)*this.pixelRatio_,miterLimit:h!==void 0?h:Ai,strokeStyle:re(i||Ci)}}}setImageStyle(t){let n;if(!t||!(n=t.getSize())){this.image_=null;return}const i=t.getPixelRatio(this.pixelRatio_),a=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=a[0]*i,this.imageAnchorY_=a[1]*i,this.imageHeight_=n[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const r=t.getScaleArray();this.imageScale_=[r[0]*this.pixelRatio_/i,r[1]*this.pixelRatio_/i],this.imageWidth_=n[0]*i}setTextStyle(t){if(!t)this.text_="";else{const n=t.getFill();if(!n)this.textFillState_=null;else{const f=n.getColor();this.textFillState_={fillStyle:re(f||Et)}}const i=t.getStroke();if(!i)this.textStrokeState_=null;else{const f=i.getColor(),d=i.getLineCap(),m=i.getLineDash(),g=i.getLineDashOffset(),p=i.getLineJoin(),y=i.getWidth(),b=i.getMiterLimit();this.textStrokeState_={lineCap:d!==void 0?d:Un,lineDash:m||ye,lineDashOffset:g||ve,lineJoin:p!==void 0?p:zn,lineWidth:y!==void 0?y:ki,miterLimit:b!==void 0?b:Ai,strokeStyle:re(f||Ci)}}const a=t.getFont(),s=t.getOffsetX(),r=t.getOffsetY(),o=t.getRotateWithView(),l=t.getRotation(),h=t.getScaleArray(),u=t.getText(),c=t.getTextAlign(),_=t.getTextBaseline();this.textState_={font:a!==void 0?a:wh,textAlign:c!==void 0?c:Li,textBaseline:_!==void 0?_:La},this.text_=u!==void 0?Array.isArray(u)?u.reduce((f,d,m)=>f+=m%2?" ":d,""):u:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=r!==void 0?this.pixelRatio_*r:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}}}const t0=.5,Sh={Point:l0,LineString:s0,Polygon:u0,MultiPoint:h0,MultiLineString:r0,MultiPolygon:o0,GeometryCollection:a0,Circle:n0};function e0(e,t){return parseInt(rt(e),10)-parseInt(rt(t),10)}function wo(e,t){const n=Rh(e,t);return n*n}function Rh(e,t){return t0*e/t}function n0(e,t,n,i,a){const s=n.getFill(),r=n.getStroke();if(s||r){const l=e.getBuilder(n.getZIndex(),"Circle");l.setFillStrokeStyle(s,r),l.drawCircle(t,i,a)}const o=n.getText();if(o&&o.getText()){const l=e.getBuilder(n.getZIndex(),"Text");l.setTextStyle(o),l.drawText(t,i)}}function Eo(e,t,n,i,a,s,r,o){const l=[],h=n.getImage();if(h){let _=!0;const f=h.getImageState();f==j.LOADED||f==j.ERROR?_=!1:f==j.IDLE&&h.load(),_&&l.push(h.ready())}const u=n.getFill();u&&u.loading()&&l.push(u.ready());const c=l.length>0;return c&&Promise.all(l).then(()=>a(null)),i0(e,t,n,i,s,r,o),c}function i0(e,t,n,i,a,s,r){const o=n.getGeometryFunction()(t);if(!o)return;const l=o.simplifyTransformed(i,a);if(n.getRenderer())Ih(e,l,n,t,r);else{const u=Sh[l.getType()];u(e,l,n,t,r,s)}}function Ih(e,t,n,i,a){if(t.getType()=="GeometryCollection"){const r=t.getGeometries();for(let o=0,l=r.length;o<l;++o)Ih(e,r[o],n,i,a);return}e.getBuilder(n.getZIndex(),"Default").drawCustom(t,i,n.getRenderer(),n.getHitDetectionRenderer(),a)}function a0(e,t,n,i,a,s){const r=t.getGeometriesArray();let o,l;for(o=0,l=r.length;o<l;++o){const h=Sh[r[o].getType()];h(e,r[o],n,i,a,s)}}function s0(e,t,n,i,a){const s=n.getStroke();if(s){const o=e.getBuilder(n.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(t,i,a)}const r=n.getText();if(r&&r.getText()){const o=e.getBuilder(n.getZIndex(),"Text");o.setTextStyle(r),o.drawText(t,i,a)}}function r0(e,t,n,i,a){const s=n.getStroke();if(s){const o=e.getBuilder(n.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(t,i,a)}const r=n.getText();if(r&&r.getText()){const o=e.getBuilder(n.getZIndex(),"Text");o.setTextStyle(r),o.drawText(t,i,a)}}function o0(e,t,n,i,a){const s=n.getFill(),r=n.getStroke();if(r||s){const l=e.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,r),l.drawMultiPolygon(t,i,a)}const o=n.getText();if(o&&o.getText()){const l=e.getBuilder(n.getZIndex(),"Text");l.setTextStyle(o),l.drawText(t,i,a)}}function l0(e,t,n,i,a,s){const r=n.getImage(),o=n.getText(),l=o&&o.getText(),h=s&&r&&l?{}:void 0;if(r){if(r.getImageState()!=j.LOADED)return;const u=e.getBuilder(n.getZIndex(),"Image");u.setImageStyle(r,h),u.drawPoint(t,i,a)}if(l){const u=e.getBuilder(n.getZIndex(),"Text");u.setTextStyle(o,h),u.drawText(t,i,a)}}function h0(e,t,n,i,a,s){const r=n.getImage(),o=r&&r.getOpacity()!==0,l=n.getText(),h=l&&l.getText(),u=s&&o&&h?{}:void 0;if(o){if(r.getImageState()!=j.LOADED)return;const c=e.getBuilder(n.getZIndex(),"Image");c.setImageStyle(r,u),c.drawMultiPoint(t,i,a)}if(h){const c=e.getBuilder(n.getZIndex(),"Text");c.setTextStyle(l,u),c.drawText(t,i,a)}}function u0(e,t,n,i,a){const s=n.getFill(),r=n.getStroke();if(s||r){const l=e.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,r),l.drawPolygon(t,i,a)}const o=n.getText();if(o&&o.getText()){const l=e.getBuilder(n.getZIndex(),"Text");l.setTextStyle(o),l.drawText(t,i,a)}}let c0=!1;function _0(e,t,n,i,a,s,r){const o=new XMLHttpRequest;o.open("GET",typeof e=="function"?e(n,i,a):e,!0),t.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=c0,o.onload=function(l){if(!o.status||o.status>=200&&o.status<300){const h=t.getType();try{let u;h=="text"||h=="json"?u=o.responseText:h=="xml"?u=o.responseXML||o.responseText:h=="arraybuffer"&&(u=o.response),u?s(t.readFeatures(u,{extent:n,featureProjection:a}),t.readProjection(u)):r()}catch{r()}}else r()},o.onerror=r,o.send()}function So(e,t){return function(n,i,a,s,r){_0(e,t,n,i,a,(o,l)=>{this.addFeatures(o),s!==void 0&&s(o)},r||Si)}}function f0(e,t){return[[-1/0,-1/0,1/0,1/0]]}function d0(e,t,n,i){const a=[];let s=nn();for(let r=0,o=n.length;r<o;++r){const l=n[r];s=er(e,t,l[0],i),a.push((s[0]+s[2])/2,(s[1]+s[3])/2),t=l[l.length-1]}return a}function dr(e,t,n,i,a,s,r){let o,l,h,u,c,_,f;const d=a[s+1],m=[];for(let y=0,b=n.length;y<b;++y){const v=n[y];for(u=e[v-i],_=e[v-i+1],o=t;o<v;o+=i)c=e[o],f=e[o+1],(d<=_&&f<=d||_<=d&&d<=f)&&(h=(d-_)/(f-_)*(c-u)+u,m.push(h)),u=c,_=f}let g=NaN,p=-1/0;for(m.sort(en),u=m[0],o=1,l=m.length;o<l;++o){c=m[o];const y=Math.abs(c-u);y>p&&(h=(u+c)/2,fh(e,t,n,i,h,d)&&(g=h,p=y)),u=c}return isNaN(g)&&(g=a[s]),r?(r.push(g,d,p),r):[g,d,p]}function m0(e,t,n,i,a){let s=[];for(let r=0,o=n.length;r<o;++r){const l=n[r];s=dr(e,t,l,i,a,2*r,s),t=l[l.length-1]}return s}function g0(e,t,n,i){for(;t<n-i;){for(let a=0;a<i;++a){const s=e[t+a];e[t+a]=e[n-i+a],e[n-i+a]=s}t+=i,n-=i}}function mr(e,t,n,i){let a=0,s=e[n-i],r=e[n-i+1];for(;t<n;t+=i){const o=e[t],l=e[t+1];a+=(o-s)*(l+r),s=o,r=l}return a===0?void 0:a>0}function p0(e,t,n,i,a){a=a!==void 0?a:!1;for(let s=0,r=n.length;s<r;++s){const o=n[s],l=mr(e,t,o,i);if(s===0){if(a&&l||!a&&!l)return!1}else if(a&&!l||!a&&l)return!1;t=o}return!0}function Ro(e,t,n,i,a){a=a!==void 0?a:!1;for(let s=0,r=n.length;s<r;++s){const o=n[s],l=mr(e,t,o,i);(s===0?a&&l||!a&&!l:a&&!l||!a&&l)&&g0(e,t,o,i),t=o}return t}function y0(e,t){const n=[];let i=0,a=0,s;for(let r=0,o=t.length;r<o;++r){const l=t[r],h=mr(e,i,l,2);if(s===void 0&&(s=h),h===s)n.push(t.slice(a,r+1));else{if(n.length===0)continue;n[n.length-1].push(t[a])}a=r+1,i=l}return n}function Ah(e,t,n,i){let a=0;const s=e[n-i],r=e[n-i+1];let o=0,l=0;for(;t<n;t+=i){const h=e[t]-s,u=e[t+1]-r;a+=l*h-o*u,o=h,l=u}return a/2}function v0(e,t,n,i){let a=0;for(let s=0,r=n.length;s<r;++s){const o=n[s];a+=Ah(e,t,o,i),t=o}return a}class Ti extends or{constructor(t,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}clone(){return new Ti(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,n,i,a){return a<Wl(this.getExtent(),t,n)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(uh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ch(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,n,i,a))}getArea(){return Ah(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return En(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const n=[];return n.length=lr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new Ti(n,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=_h(this.flatCoordinates,0,t,this.stride),this.changed()}}class Vn extends or{constructor(t,n,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&i?(this.setFlatCoordinates(n,t),this.ends_=i):this.setCoordinates(t,n)}appendLinearRing(t){this.flatCoordinates?Zs(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Vn(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,n,i,a){return a<Wl(this.getExtent(),t,n)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(M_(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),w_(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,n,i,a))}containsXY(t,n){return fh(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,n)}getArea(){return v0(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),Ro(n,0,this.ends_,this.stride,t)):n=this.flatCoordinates,Aa(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Fn(this.getExtent());this.flatInteriorPoint_=dr(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new P_(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Ti(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,n=this.flatCoordinates,i=this.ends_,a=[];let s=0;for(let r=0,o=i.length;r<o;++r){const l=i[r],h=new Ti(n.slice(s,l),t);a.push(h),s=l}return a}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;p0(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Ro(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=mh(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,i),new Vn(n,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return C_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=S_(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function Io(e){if(nr(e))throw new Error("Cannot create polygon from empty extent");const t=e[0],n=e[1],i=e[2],a=e[3],s=[t,n,t,a,i,a,i,n,t,n];return new Vn(s,"XY",[s.length])}const Ao=pe();class Wt{constructor(t,n,i,a,s,r){this.styleFunction,this.extent_,this.id_=r,this.type_=t,this.flatCoordinates_=n,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=s,this.squaredTolerance_,this.stride_=a,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Kl(this.flatCoordinates_):er(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=Fn(this.getExtent());this.flatInteriorPoints_=dr(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=y0(this.flatCoordinates_,this.ends_),n=d0(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=m0(this.flatCoordinates_,0,t,2,n)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=po(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let n=0;const i=this.ends_;for(let a=0,s=i.length;a<s;++a){const r=i[a],o=po(t,n,r,2,.5);Zs(this.flatMidpoints_,o),n=r}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,n){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){t=sn(t);const n=t.getExtent(),i=t.getWorldExtent();if(n&&i){const a=xe(i)/xe(n);rn(Ao,i[0],i[3],a,-a,0,0,0),Te(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Ao,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var t;return new Wt(this.type_,this.flatCoordinates_.slice(),(t=this.ends_)==null?void 0:t.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Vl((t,n)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),n&&this.simplifiedGeometry_.applyTransform(n);const i=this.simplifiedGeometry_.getFlatCoordinates();let a;switch(this.type_){case"LineString":i.length=lr(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,i,0),a=[i.length];break;case"MultiLineString":a=[],i.length=k_(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,i,0,a);break;case"Polygon":a=[],i.length=mh(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),i,0,a);break}return a&&(this.simplifiedGeometry_=new Wt(this.type_,i,a,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}Wt.prototype.getFlatCoordinates=Wt.prototype.getOrientedFlatCoordinates;function Ch(e,t,n=0,i=e.length-1,a=b0){for(;i>n;){if(i-n>600){const l=i-n+1,h=t-n+1,u=Math.log(l),c=.5*Math.exp(2*u/3),_=.5*Math.sqrt(u*c*(l-c)/l)*(h-l/2<0?-1:1),f=Math.max(n,Math.floor(t-h*c/l+_)),d=Math.min(i,Math.floor(t+(l-h)*c/l+_));Ch(e,t,f,d,a)}const s=e[t];let r=n,o=i;for(si(e,n,t),a(e[i],s)>0&&si(e,n,i);r<o;){for(si(e,r,o),r++,o--;a(e[r],s)<0;)r++;for(;a(e[o],s)>0;)o--}a(e[n],s)===0?si(e,n,o):(o++,si(e,o,i)),o<=t&&(n=o+1),t<=o&&(i=o-1)}}function si(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function b0(e,t){return e<t?-1:e>t?1:0}let Lh=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let n=this.data;const i=[];if(!sa(t,n))return i;const a=this.toBBox,s=[];for(;n;){for(let r=0;r<n.children.length;r++){const o=n.children[r],l=n.leaf?a(o):o;sa(t,l)&&(n.leaf?i.push(o):ds(t,l)?this._all(o,i):s.push(o))}n=s.pop()}return i}collides(t){let n=this.data;if(!sa(t,n))return!1;const i=[];for(;n;){for(let a=0;a<n.children.length;a++){const s=n.children[a],r=n.leaf?this.toBBox(s):s;if(sa(t,r)){if(n.leaf||ds(t,r))return!0;i.push(s)}}n=i.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let i=0;i<t.length;i++)this.insert(t[i]);return this}let n=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=vn([]),this}remove(t,n){if(!t)return this;let i=this.data;const a=this.toBBox(t),s=[],r=[];let o,l,h;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],o=r.pop(),h=!0),i.leaf){const u=x0(t,i.children,n);if(u!==-1)return i.children.splice(u,1),s.push(i),this._condense(s),this}!h&&!i.leaf&&ds(i,a)?(s.push(i),r.push(o),o=0,l=i,i=i.children[0]):l?(o++,i=l.children[o],h=!1):i=null}return this}toBBox(t){return t}compareMinX(t,n){return t.minX-n.minX}compareMinY(t,n){return t.minY-n.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,n){const i=[];for(;t;)t.leaf?n.push(...t.children):i.push(...t.children),t=i.pop();return n}_build(t,n,i,a){const s=i-n+1;let r=this._maxEntries,o;if(s<=r)return o=vn(t.slice(n,i+1)),fn(o,this.toBBox),o;a||(a=Math.ceil(Math.log(s)/Math.log(r)),r=Math.ceil(s/Math.pow(r,a-1))),o=vn([]),o.leaf=!1,o.height=a;const l=Math.ceil(s/r),h=l*Math.ceil(Math.sqrt(r));Co(t,n,i,h,this.compareMinX);for(let u=n;u<=i;u+=h){const c=Math.min(u+h-1,i);Co(t,u,c,l,this.compareMinY);for(let _=u;_<=c;_+=l){const f=Math.min(_+l-1,c);o.children.push(this._build(t,_,f,a-1))}}return fn(o,this.toBBox),o}_chooseSubtree(t,n,i,a){for(;a.push(n),!(n.leaf||a.length-1===i);){let s=1/0,r=1/0,o;for(let l=0;l<n.children.length;l++){const h=n.children[l],u=fs(h),c=E0(t,h)-u;c<r?(r=c,s=u<s?u:s,o=h):c===r&&u<s&&(s=u,o=h)}n=o||n.children[0]}return n}_insert(t,n,i){const a=i?t:this.toBBox(t),s=[],r=this._chooseSubtree(a,this.data,n,s);for(r.children.push(t),ui(r,a);n>=0&&s[n].children.length>this._maxEntries;)this._split(s,n),n--;this._adjustParentBBoxes(a,s,n)}_split(t,n){const i=t[n],a=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,a);const r=this._chooseSplitIndex(i,s,a),o=vn(i.children.splice(r,i.children.length-r));o.height=i.height,o.leaf=i.leaf,fn(i,this.toBBox),fn(o,this.toBBox),n?t[n-1].children.push(o):this._splitRoot(i,o)}_splitRoot(t,n){this.data=vn([t,n]),this.data.height=t.height+1,this.data.leaf=!1,fn(this.data,this.toBBox)}_chooseSplitIndex(t,n,i){let a,s=1/0,r=1/0;for(let o=n;o<=i-n;o++){const l=hi(t,0,o,this.toBBox),h=hi(t,o,i,this.toBBox),u=S0(l,h),c=fs(l)+fs(h);u<s?(s=u,a=o,r=c<r?c:r):u===s&&c<r&&(r=c,a=o)}return a||i-n}_chooseSplitAxis(t,n,i){const a=t.leaf?this.compareMinX:M0,s=t.leaf?this.compareMinY:w0,r=this._allDistMargin(t,n,i,a),o=this._allDistMargin(t,n,i,s);r<o&&t.children.sort(a)}_allDistMargin(t,n,i,a){t.children.sort(a);const s=this.toBBox,r=hi(t,0,n,s),o=hi(t,i-n,i,s);let l=aa(r)+aa(o);for(let h=n;h<i-n;h++){const u=t.children[h];ui(r,t.leaf?s(u):u),l+=aa(r)}for(let h=i-n-1;h>=n;h--){const u=t.children[h];ui(o,t.leaf?s(u):u),l+=aa(o)}return l}_adjustParentBBoxes(t,n,i){for(let a=i;a>=0;a--)ui(n[a],t)}_condense(t){for(let n=t.length-1,i;n>=0;n--)t[n].children.length===0?n>0?(i=t[n-1].children,i.splice(i.indexOf(t[n]),1)):this.clear():fn(t[n],this.toBBox)}};function x0(e,t,n){if(!n)return t.indexOf(e);for(let i=0;i<t.length;i++)if(n(e,t[i]))return i;return-1}function fn(e,t){hi(e,0,e.children.length,t,e)}function hi(e,t,n,i,a){a||(a=vn(null)),a.minX=1/0,a.minY=1/0,a.maxX=-1/0,a.maxY=-1/0;for(let s=t;s<n;s++){const r=e.children[s];ui(a,e.leaf?i(r):r)}return a}function ui(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function M0(e,t){return e.minX-t.minX}function w0(e,t){return e.minY-t.minY}function fs(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function aa(e){return e.maxX-e.minX+(e.maxY-e.minY)}function E0(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function S0(e,t){const n=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),a=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,a-n)*Math.max(0,s-i)}function ds(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function sa(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function vn(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Co(e,t,n,i,a){const s=[t,n];for(;s.length;){if(n=s.pop(),t=s.pop(),n-t<=i)continue;const r=t+Math.ceil((n-t)/i/2)*i;Ch(e,r,t,n,a),s.push(t,r,r,n)}}class Lo{constructor(t){this.rbush_=new Lh(t),this.items_={}}insert(t,n){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:n};this.rbush_.insert(i),this.items_[rt(n)]=i}load(t,n){const i=new Array(n.length);for(let a=0,s=n.length;a<s;a++){const r=t[a],o=n[a],l={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:o};i[a]=l,this.items_[rt(o)]=l}this.rbush_.load(i)}remove(t){const n=rt(t),i=this.items_[n];return delete this.items_[n],this.rbush_.remove(i)!==null}update(t,n){const i=this.items_[rt(n)],a=[i.minX,i.minY,i.maxX,i.maxY];Xl(a,t)||(this.remove(n),this.insert(t,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(t){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(n).map(function(a){return a.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,n){return this.forEach_(this.getInExtent(t),n)}forEach_(t,n){let i;for(let a=0,s=t.length;a<s;a++)if(i=n(t[a]),i)return i;return i}isEmpty(){return Dn(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const n=this.rbush_.toJSON();return an(n.minX,n.minY,n.maxX,n.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const n in t.items_)this.items_[n]=t.items_[n]}}class R0 extends Ge{constructor(t){super(),this.projection=sn(t.projection),this.attributions_=ko(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(i,a){n.viewResolver=i,n.viewRejector=a})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=ko(t),this.changed()}setState(t){this.state_=t,this.changed()}}function ko(e){return e?typeof e=="function"?e:(Array.isArray(e)||(e=[e]),t=>e):null}const Ft={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class Re extends zi{constructor(t,n,i){super(t),this.feature=n,this.features=i}}class I0 extends R0{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=Si,this.format_=t.format||null,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(ht(this.format_,"`format` must be set when `url` is set"),this.loader_=So(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:f0;const n=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=n?new Lo:null,this.loadedExtentsRtree_=new Lo,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,a;Array.isArray(t.features)?a=t.features:t.features&&(i=t.features,a=i.getArray()),!n&&i===void 0&&(i=new gc(a)),a!==void 0&&this.addFeaturesInternal(a),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const n=rt(t);if(!this.addToIndex_(n,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(n,t);const i=t.getGeometry();if(i){const a=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(a,t)}else this.nullGeometryFeatures_[n]=t;this.dispatchEvent(new Re(Ft.ADDFEATURE,t))}setupChangeEvents_(t,n){n instanceof Wt||(this.featureChangeKeys_[t]=[ge(n,$t.CHANGE,this.handleFeatureChange_,this),ge(n,Ul.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,n){let i=!0;if(n.getId()!==void 0){const a=String(n.getId());if(!(a in this.idIndex_))this.idIndex_[a]=n;else if(n instanceof Wt){const s=this.idIndex_[a];s instanceof Wt?Array.isArray(s)?s.push(n):this.idIndex_[a]=[s,n]:i=!1}else i=!1}return i&&(ht(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=n),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const n=[],i=[],a=[];for(let s=0,r=t.length;s<r;s++){const o=t[s],l=rt(o);this.addToIndex_(l,o)&&i.push(o)}for(let s=0,r=i.length;s<r;s++){const o=i[s],l=rt(o);this.setupChangeEvents_(l,o);const h=o.getGeometry();if(h){const u=h.getExtent();n.push(u),a.push(o)}else this.nullGeometryFeatures_[l]=o}if(this.featuresRtree_&&this.featuresRtree_.load(n,a),this.hasListener(Ft.ADDFEATURE))for(let s=0,r=i.length;s<r;s++)this.dispatchEvent(new Re(Ft.ADDFEATURE,i[s]))}bindFeaturesCollection_(t){let n=!1;this.addEventListener(Ft.ADDFEATURE,function(i){n||(n=!0,t.push(i.feature),n=!1)}),this.addEventListener(Ft.REMOVEFEATURE,function(i){n||(n=!0,t.remove(i.feature),n=!1)}),t.addEventListener(Mn.ADD,i=>{n||(n=!0,this.addFeature(i.element),n=!1)}),t.addEventListener(Mn.REMOVE,i=>{n||(n=!0,this.removeFeature(i.element),n=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(ke);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new Re(Ft.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,n){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(a){const s=a.getGeometry();if(s instanceof Wt||s.intersectsCoordinate(t))return n(a)})}forEachFeatureInExtent(t,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(t,n){return this.forEachFeatureInExtent(t,function(i){const a=i.getGeometry();if(a instanceof Wt||a.intersectsExtent(t)){const s=n(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Dn(this.nullGeometryFeatures_)||Zs(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const n=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){n.push(i)}),n}getFeaturesInExtent(t,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const a=Ac(t,n);return[].concat(...a.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,n){const i=t[0],a=t[1];let s=null;const r=[NaN,NaN];let o=1/0;const l=[-1/0,-1/0,1/0,1/0];return n=n||fc,this.featuresRtree_.forEachInExtent(l,function(h){if(n(h)){const u=h.getGeometry(),c=o;if(o=u instanceof Wt?0:u.closestPointXY(i,a,r,o),o<c){s=h;const _=Math.sqrt(o);l[0]=i-_,l[1]=a-_,l[2]=i+_,l[3]=a+_}}}),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const n=this.idIndex_[t.toString()];return n!==void 0?n:null}getFeatureByUid(t){const n=this.uidIndex_[t];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const n=t.target,i=rt(n),a=n.getGeometry();if(!a)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{const r=a.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(r,n)):this.featuresRtree_&&this.featuresRtree_.update(r,n)}const s=n.getId();if(s!==void 0){const r=s.toString();this.idIndex_[r]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[r]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new Re(Ft.CHANGEFEATURE,n))}hasFeature(t){const n=t.getId();return n!==void 0?n in this.idIndex_:rt(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Dn(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,n,i){const a=this.loadedExtentsRtree_,s=this.strategy_(t,n,i);for(let r=0,o=s.length;r<o;++r){const l=s[r];a.forEachInExtent(l,function(u){return oi(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Re(Ft.FEATURESLOADSTART)),this.loader_.call(this,l,n,i,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new Re(Ft.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Re(Ft.FEATURESLOADERROR))}),a.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const n=this.loadedExtentsRtree_,i=n.forEachInExtent(t,function(a){if(Xl(a.extent,t))return a});i&&n.remove(i)}removeFeatures(t){let n=!1;for(let i=0,a=t.length;i<a;++i)n=this.removeFeatureInternal(t[i])||n;n&&this.changed()}removeFeature(t){if(!t)return;this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const n=rt(t);if(!(n in this.uidIndex_))return!1;n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(t);const i=this.featureChangeKeys_[n];i==null||i.forEach(ke),delete this.featureChangeKeys_[n];const a=t.getId();if(a!==void 0){const s=a.toString(),r=this.idIndex_[s];r===t?delete this.idIndex_[s]:Array.isArray(r)&&(r.splice(r.indexOf(t),1),r.length===1&&(this.idIndex_[s]=r[0]))}return delete this.uidIndex_[n],this.hasListener(Ft.REMOVEFEATURE)&&this.dispatchEvent(new Re(Ft.REMOVEFEATURE,t)),!0}removeFromIdIndex_(t){for(const n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n];break}}setLoader(t){this.loader_=t}setUrl(t){ht(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(So(t,this.format_))}setOverlaps(t){this.overlaps_=t,this.changed()}}class Ut{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new Ut({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const n=fr(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));n.ready().then(()=>{this.patternImage_=null}),n.getImageState()===j.IDLE&&n.load(),n.getImageState()===j.LOADING&&(this.patternImage_=n)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?rt(t):typeof t=="object"&&"src"in t?t.src+":"+t.offset:Bn(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Ht{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Ht({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}function jn(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}class Wa{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=jn(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Wa({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return J()}getImage(t){return J()}getHitDetectionImage(){return J()}getPixelRatio(t){return 1}getImageState(){return J()}getImageSize(){return J()}getOrigin(){return J()}getSize(){return J()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=jn(t)}listenImageChange(t){J()}load(){J()}unlistenImageChange(t){J()}ready(){return Promise.resolve()}}class qa extends Wa{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?j.LOADING:j.LOADED,this.imageState_===j.LOADING&&this.ready().then(()=>this.imageState_=j.LOADED),this.render()}clone(){const t=this.getScale(),n=new qa({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const t=this.size_,n=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-n[0]/i[0],t[1]/2+n[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){var s,r;const n=(s=this.fill_)==null?void 0:s.getKey(),i=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${n}`+Object.values(this.renderOptions_).join(",");let a=(r=se.get(i,null,null))==null?void 0:r.getImage(1);if(!a){const o=this.renderOptions_,l=Math.ceil(o.size*t),h=Ct(l,l);this.draw_(o,h,t),a=h.canvas,se.set(i,null,null,new bh(a,void 0,null,j.LOADED,null))}return a}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,n,i){if(n===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return n;let a=this.radius,s=this.radius2_===void 0?a:this.radius2_;if(a<s){const M=a;a=s,s=M}const r=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/r,l=s*Math.sin(o),h=Math.sqrt(s*s-l*l),u=a-h,c=Math.sqrt(l*l+u*u),_=c/l;if(t==="miter"&&_<=i)return _*n;const f=n/2/_,d=n/2*(u/c),g=Math.sqrt((a+f)*(a+f)+d*d)-a;if(this.radius2_===void 0||t==="bevel")return g*2;const p=a*Math.sin(o),y=Math.sqrt(a*a-p*p),b=s-y,x=Math.sqrt(p*p+b*b)/p;if(x<=i){const M=x*n/2-s-a;return 2*Math.max(g,M)}return g*2}createRenderOptions(){let t=Un,n=zn,i=0,a=null,s=0,r,o=0;this.stroke_&&(r=re(this.stroke_.getColor()??Ci),o=this.stroke_.getWidth()??ki,a=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??zn,t=this.stroke_.getLineCap()??Un,i=this.stroke_.getMiterLimit()??Ai);const l=this.calculateLineJoinSize_(n,o,i),h=Math.max(this.radius,this.radius2_||0),u=Math.ceil(2*h+l);return{strokeStyle:r,strokeWidth:o,size:u,lineCap:t,lineDash:a,lineDashOffset:s,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,n,i){if(n.scale(i,i),n.translate(t.size/2,t.size/2),this.createPath_(n),this.fill_){let a=this.fill_.getColor();a===null&&(a=Et),n.fillStyle=re(a),n.fill()}t.strokeStyle&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineCap=t.lineCap,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())}createHitDetectionCanvas_(t){let n;if(this.fill_){let i=this.fill_.getColor(),a=0;typeof i=="string"&&(i=Bn(i)),i===null?a=1:Array.isArray(i)&&(a=i.length===4?i[3]:1),a===0&&(n=Ct(t.size,t.size),this.drawHitDetectionCanvas_(t,n))}return n?n.canvas:this.getImage(1)}createPath_(t){let n=this.points_;const i=this.radius;if(n===1/0)t.arc(0,0,i,0,2*Math.PI);else{const a=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);const s=this.angle_-Math.PI/2,r=2*Math.PI/n;for(let o=0;o<n;o++){const l=s+o*r,h=o%2===0?i:a;t.lineTo(h*Math.cos(l),h*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,n){n.translate(t.size/2,t.size/2),this.createPath_(n),n.fillStyle=Et,n.fill(),t.strokeStyle&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Ka extends qa{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),n=new Ka({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(t){this.radius=t,this.render()}}class Xt{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=To,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new Xt({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(n){return n.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=To,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function A0(e){let t;if(typeof e=="function")t=e;else{let n;Array.isArray(e)?n=e:(ht(typeof e.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[e]),t=function(){return n}}return t}let ms=null;function kh(e,t){if(!ms){const n=new Ut({color:"rgba(255,255,255,0.4)"}),i=new Ht({color:"#3399CC",width:1.25});ms=[new Xt({image:new Ka({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return ms}function To(e){return e.getGeometry()}const C0="#333";class Qe{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.keepUpright_=t.keepUpright,this.scale_=t.scale,this.scaleArray_=jn(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Ut({color:C0}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Qe({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setKeepUpright(t){this.keepUpright_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=jn(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const Bt={ANIMATING:0,INTERACTING:1},O={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},ra=[O.FILL],Le=[O.STROKE],tn=[O.BEGIN_PATH],Po=[O.CLOSE_PATH];class ji extends xh{constructor(t,n,i,a){super(),this.tolerance=t,this.maxExtent=n,this.pixelRatio=a,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const n=this.pixelRatio;return n==1?t:t.map(function(i){return i*n})}appendFlatPointCoordinates(t,n){const i=this.getBufferedMaxExtent(),a=this.tmpCoordinate_,s=this.coordinates;let r=s.length;for(let o=0,l=t.length;o<l;o+=n)a[0]=t[o],a[1]=t[o+1],As(i,a)&&(s[r++]=a[0],s[r++]=a[1]);return r}appendFlatLineCoordinates(t,n,i,a,s,r){const o=this.coordinates;let l=o.length;const h=this.getBufferedMaxExtent();r&&(n+=a);let u=t[n],c=t[n+1];const _=this.tmpCoordinate_;let f=!0,d,m,g;for(d=n+a;d<i;d+=a)_[0]=t[d],_[1]=t[d+1],g=Cs(h,_),g!==m?(f&&(o[l++]=u,o[l++]=c,f=!1),o[l++]=_[0],o[l++]=_[1]):g===st.INTERSECTING?(o[l++]=_[0],o[l++]=_[1],f=!1):f=!0,u=_[0],c=_[1],m=g;return(s&&f||d===n+a)&&(o[l++]=u,o[l++]=c),l}drawCustomCoordinates_(t,n,i,a,s){for(let r=0,o=i.length;r<o;++r){const l=i[r],h=this.appendFlatLineCoordinates(t,n,l,a,!1,!1);s.push(h),n=l}return n}drawCustom(t,n,i,a,s){this.beginGeometry(t,n,s);const r=t.getType(),o=t.getStride(),l=this.coordinates.length;let h,u,c,_,f;switch(r){case"MultiPolygon":h=t.getOrientedFlatCoordinates(),_=[];const d=t.getEndss();f=0;for(let m=0,g=d.length;m<g;++m){const p=[];f=this.drawCustomCoordinates_(h,f,d[m],o,p),_.push(p)}this.instructions.push([O.CUSTOM,l,_,t,i,go,s]),this.hitDetectionInstructions.push([O.CUSTOM,l,_,t,a||i,go,s]);break;case"Polygon":case"MultiLineString":c=[],h=r=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),f=this.drawCustomCoordinates_(h,0,t.getEnds(),o,c),this.instructions.push([O.CUSTOM,l,c,t,i,Aa,s]),this.hitDetectionInstructions.push([O.CUSTOM,l,c,t,a||i,Aa,s]);break;case"LineString":case"Circle":h=t.getFlatCoordinates(),u=this.appendFlatLineCoordinates(h,0,h.length,o,!1,!1),this.instructions.push([O.CUSTOM,l,u,t,i,En,s]),this.hitDetectionInstructions.push([O.CUSTOM,l,u,t,a||i,En,s]);break;case"MultiPoint":h=t.getFlatCoordinates(),u=this.appendFlatPointCoordinates(h,o),u>l&&(this.instructions.push([O.CUSTOM,l,u,t,i,En,s]),this.hitDetectionInstructions.push([O.CUSTOM,l,u,t,a||i,En,s]));break;case"Point":h=t.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),u=this.coordinates.length,this.instructions.push([O.CUSTOM,l,u,t,i,void 0,s]),this.hitDetectionInstructions.push([O.CUSTOM,l,u,t,a||i,void 0,s]);break}this.endGeometry(n)}beginGeometry(t,n,i){this.beginGeometryInstruction1_=[O.BEGIN_GEOMETRY,n,0,t,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[O.BEGIN_GEOMETRY,n,0,t,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let n;const i=t.length;let a,s,r=-1;for(n=0;n<i;++n)a=t[n],s=a[0],s==O.END_GEOMETRY?r=n:s==O.BEGIN_GEOMETRY&&(a[2]=n,_c(this.hitDetectionInstructions,r,n),r=-1)}fillStyleToState(t,n={}){if(t){const i=t.getColor();n.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,n.fillStyle=re(i||Et)}else n.fillStyle=void 0;return n}strokeStyleToState(t,n={}){if(t){const i=t.getColor();n.strokeStyle=re(i||Ci);const a=t.getLineCap();n.lineCap=a!==void 0?a:Un;const s=t.getLineDash();n.lineDash=s?s.slice():ye;const r=t.getLineDashOffset();n.lineDashOffset=r||ve;const o=t.getLineJoin();n.lineJoin=o!==void 0?o:zn;const l=t.getWidth();n.lineWidth=l!==void 0?l:ki;const h=t.getMiterLimit();n.miterLimit=h!==void 0?h:Ai,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0;return n}setFillStrokeStyle(t,n){const i=this.state;this.fillStyleToState(t,i),this.strokeStyleToState(n,i)}createFill(t){const n=t.fillStyle,i=[O.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(t.fillPatternScale),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[O.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash?this.applyPixelRatio(t.lineDash):null,t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,n){const i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,n){const i=t.strokeStyle,a=t.lineCap,s=t.lineDash,r=t.lineDashOffset,o=t.lineJoin,l=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=a||s!=t.currentLineDash&&!Kn(t.currentLineDash,s)||t.currentLineDashOffset!=r||t.currentLineJoin!=o||t.currentLineWidth!=l||t.currentMiterLimit!=h)&&(i!==void 0&&n.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=a,t.currentLineDash=s,t.currentLineDashOffset=r,t.currentLineJoin=o,t.currentLineWidth=l,t.currentMiterLimit=h)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[O.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=vc(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;Qs(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class L0 extends ji{constructor(t,n,i,a){super(t,n,i,a),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,n,i){if(!this.image_||this.maxExtent&&!As(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,n,i);const a=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(a,s);this.instructions.push([O.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([O.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(t,n,i){if(!this.image_)return;this.beginGeometry(t,n,i);const a=t.getFlatCoordinates(),s=[];for(let l=0,h=a.length;l<h;l+=t.getStride())(!this.maxExtent||As(this.maxExtent,a.slice(l,l+2)))&&s.push(a[l],a[l+1]);const r=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([O.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([O.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,n){const i=t.getAnchor(),a=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=a[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=a[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=n}}class k0 extends ji{constructor(t,n,i,a){super(t,n,i,a)}drawFlatCoordinates_(t,n,i,a){const s=this.coordinates.length,r=this.appendFlatLineCoordinates(t,n,i,a,!1,!1),o=[O.MOVE_TO_LINE_TO,s,r];return this.instructions.push(o),this.hitDetectionInstructions.push(o),i}drawLineString(t,n,i){const a=this.state,s=a.strokeStyle,r=a.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(a,this.applyStroke),this.beginGeometry(t,n,i),this.hitDetectionInstructions.push([O.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,ye,ve],tn);const o=t.getFlatCoordinates(),l=t.getStride();this.drawFlatCoordinates_(o,0,o.length,l),this.hitDetectionInstructions.push(Le),this.endGeometry(n)}drawMultiLineString(t,n,i){const a=this.state,s=a.strokeStyle,r=a.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(a,this.applyStroke),this.beginGeometry(t,n,i),this.hitDetectionInstructions.push([O.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,ye,ve],tn);const o=t.getEnds(),l=t.getFlatCoordinates(),h=t.getStride();let u=0;for(let c=0,_=o.length;c<_;++c)u=this.drawFlatCoordinates_(l,u,o[c],h);this.hitDetectionInstructions.push(Le),this.endGeometry(n)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Le),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Le),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(tn)}}class Oo extends ji{constructor(t,n,i,a){super(t,n,i,a)}drawFlatCoordinatess_(t,n,i,a){const s=this.state,r=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,l=i.length;this.instructions.push(tn),this.hitDetectionInstructions.push(tn);for(let h=0;h<l;++h){const u=i[h],c=this.coordinates.length,_=this.appendFlatLineCoordinates(t,n,u,a,!0,!o),f=[O.MOVE_TO_LINE_TO,c,_];this.instructions.push(f),this.hitDetectionInstructions.push(f),o&&(this.instructions.push(Po),this.hitDetectionInstructions.push(Po)),n=u}return r&&(this.instructions.push(ra),this.hitDetectionInstructions.push(ra)),o&&(this.instructions.push(Le),this.hitDetectionInstructions.push(Le)),n}drawCircle(t,n,i){const a=this.state,s=a.fillStyle,r=a.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n,i),a.fillStyle!==void 0&&this.hitDetectionInstructions.push([O.SET_FILL_STYLE,Et]),a.strokeStyle!==void 0&&this.hitDetectionInstructions.push([O.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,ye,ve]);const o=t.getFlatCoordinates(),l=t.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,l,!1,!1);const u=[O.CIRCLE,h];this.instructions.push(tn,u),this.hitDetectionInstructions.push(tn,u),a.fillStyle!==void 0&&(this.instructions.push(ra),this.hitDetectionInstructions.push(ra)),a.strokeStyle!==void 0&&(this.instructions.push(Le),this.hitDetectionInstructions.push(Le)),this.endGeometry(n)}drawPolygon(t,n,i){const a=this.state,s=a.fillStyle,r=a.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n,i),a.fillStyle!==void 0&&this.hitDetectionInstructions.push([O.SET_FILL_STYLE,Et]),a.strokeStyle!==void 0&&this.hitDetectionInstructions.push([O.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,ye,ve]);const o=t.getEnds(),l=t.getOrientedFlatCoordinates(),h=t.getStride();this.drawFlatCoordinatess_(l,0,o,h),this.endGeometry(n)}drawMultiPolygon(t,n,i){const a=this.state,s=a.fillStyle,r=a.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n,i),a.fillStyle!==void 0&&this.hitDetectionInstructions.push([O.SET_FILL_STYLE,Et]),a.strokeStyle!==void 0&&this.hitDetectionInstructions.push([O.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,ye,ve]);const o=t.getEndss(),l=t.getOrientedFlatCoordinates(),h=t.getStride();let u=0;for(let c=0,_=o.length;c<_;++c)u=this.drawFlatCoordinatess_(l,u,o[c],h);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const n=this.coordinates;for(let i=0,a=n.length;i<a;++i)n[i]=Xe(n[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}function T0(e,t,n,i,a){const s=[];let r=n,o=0,l=t.slice(n,2);for(;o<e&&r+a<i;){const[h,u]=l.slice(-2),c=t[r+a],_=t[r+a+1],f=Math.sqrt((c-h)*(c-h)+(_-u)*(_-u));if(o+=f,o>=e){const d=(e-o+f)/f,m=zt(h,c,d),g=zt(u,_,d);l.push(m,g),s.push(l),l=[m,g],o==e&&(r+=a),o=0}else if(o<e)l.push(t[r+a],t[r+a+1]),r+=a;else{const d=f-o,m=zt(h,c,d/f),g=zt(u,_,d/f);l.push(m,g),s.push(l),l=[m,g],o=0,r+=a}}return o>0&&s.push(l),s}function P0(e,t,n,i,a){let s=n,r=n,o=0,l=0,h=n,u,c,_,f,d,m,g,p,y,b;for(c=n;c<i;c+=a){const v=t[c],x=t[c+1];d!==void 0&&(y=v-d,b=x-m,f=Math.sqrt(y*y+b*b),g!==void 0&&(l+=_,u=Math.acos((g*y+p*b)/(_*f)),u>e&&(l>o&&(o=l,s=h,r=c),l=0,h=c-a)),_=f,g=y,p=b),d=v,m=x}return l+=f,l>o?[h,c]:[s,r]}const Ta={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class O0 extends ji{constructor(t,n,i,a){super(t,n,i,a),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Et]={fillStyle:Et},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,n,i){const a=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!a&&!s)return;const o=this.coordinates;let l=o.length;const h=t.getType();let u=null,c=t.getStride();if(r.placement==="line"&&(h=="LineString"||h=="MultiLineString"||h=="Polygon"||h=="MultiPolygon")){if(!qt(this.maxExtent,t.getExtent()))return;let _;if(u=t.getFlatCoordinates(),h=="LineString")_=[u.length];else if(h=="MultiLineString")_=t.getEnds();else if(h=="Polygon")_=t.getEnds().slice(0,1);else if(h=="MultiPolygon"){const g=t.getEndss();_=[];for(let p=0,y=g.length;p<y;++p)_.push(g[p][0])}this.beginGeometry(t,n,i);const f=r.repeat,d=f?void 0:r.textAlign;let m=0;for(let g=0,p=_.length;g<p;++g){let y;f?y=T0(f*this.resolution,u,m,_[g],c):y=[u.slice(m,_[g])];for(let b=0,v=y.length;b<v;++b){const x=y[b];let M=0,R=x.length;if(d==null){const I=P0(r.maxAngle,x,0,x.length,2);M=I[0],R=I[1]}for(let I=M;I<R;I+=c)o.push(x[I],x[I+1]);const w=o.length;m=_[g],this.drawChars_(l,w),l=w}}this.endGeometry(n)}else{let _=r.overflow?null:[];switch(h){case"Point":case"MultiPoint":u=t.getFlatCoordinates();break;case"LineString":u=t.getFlatMidpoint();break;case"Circle":u=t.getCenter();break;case"MultiLineString":u=t.getFlatMidpoints(),c=2;break;case"Polygon":u=t.getFlatInteriorPoint(),r.overflow||_.push(u[2]/this.resolution),c=3;break;case"MultiPolygon":const v=t.getFlatInteriorPoints();u=[];for(let x=0,M=v.length;x<M;x+=3)r.overflow||_.push(v[x+2]/this.resolution),u.push(v[x],v[x+1]);if(u.length===0)return;c=2;break}const f=this.appendFlatPointCoordinates(u,c);if(f===l)return;if(_&&(f-l)/2!==u.length/c){let v=l/2;_=_.filter((x,M)=>{const R=o[(v+M)*2]===u[M*c]&&o[(v+M)*2+1]===u[M*c+1];return R||--v,R})}this.saveTextStates_();const d=r.backgroundFill?this.createFill(this.fillStyleToState(r.backgroundFill)):null,m=r.backgroundStroke?this.createStroke(this.strokeStyleToState(r.backgroundStroke)):null;this.beginGeometry(t,n,i);let g=r.padding;if(g!=Je&&(r.scale[0]<0||r.scale[1]<0)){let v=r.padding[0],x=r.padding[1],M=r.padding[2],R=r.padding[3];r.scale[0]<0&&(x=-x,R=-R),r.scale[1]<0&&(v=-v,M=-M),g=[v,x,M,R]}const p=this.pixelRatio;this.instructions.push([O.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,g==Je?Je:g.map(function(v){return v*p}),d,m,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,_]);const y=1/p,b=d?d.slice(0):null;b&&(b[1]=Et),this.hitDetectionInstructions.push([O.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[y,y],NaN,this.declutterMode_,this.declutterImageWithText_,g,b,m,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Et:this.fillKey_,this.textOffsetX_,this.textOffsetY_,_]),this.endGeometry(n)}}saveTextStates_(){const t=this.textStrokeState_,n=this.textState_,i=this.textFillState_,a=this.strokeKey_;t&&(a in this.strokeStates||(this.strokeStates[a]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:n.font,textAlign:n.textAlign||Li,justify:n.justify,textBaseline:n.textBaseline||La,scale:n.scale});const r=this.fillKey_;i&&(r in this.fillStates||(this.fillStates[r]={fillStyle:i.fillStyle}))}drawChars_(t,n){const i=this.textStrokeState_,a=this.textState_,s=this.strokeKey_,r=this.textKey_,o=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,h=Ta[a.textBaseline],u=this.textOffsetY_*l,c=this.text_,_=i?i.lineWidth*Math.abs(a.scale[0])/2:0;this.instructions.push([O.DRAW_CHARS,t,n,h,a.overflow,o,a.maxAngle,l,u,s,_*l,c,r,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([O.DRAW_CHARS,t,n,h,a.overflow,o&&Et,a.maxAngle,l,u,s,_*l,c,r,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(t,n){let i,a,s;if(!t)this.text_="";else{const r=t.getFill();r?(a=this.textFillState_,a||(a={},this.textFillState_=a),a.fillStyle=re(r.getColor()||Et)):(a=null,this.textFillState_=a);const o=t.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const m=o.getLineDash(),g=o.getLineDashOffset(),p=o.getWidth(),y=o.getMiterLimit();s.lineCap=o.getLineCap()||Un,s.lineDash=m?m.slice():ye,s.lineDashOffset=g===void 0?ve:g,s.lineJoin=o.getLineJoin()||zn,s.lineWidth=p===void 0?ki:p,s.miterLimit=y===void 0?Ai:y,s.strokeStyle=re(o.getColor()||Ci)}i=this.textState_;const l=t.getFont()||wh;X_(l);const h=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||La,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Je,i.scale=h===void 0?[1,1]:h;const u=t.getOffsetX(),c=t.getOffsetY(),_=t.getRotateWithView(),f=t.getKeepUpright(),d=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=c===void 0?0:c,this.textRotateWithView_=_===void 0?!1:_,this.textKeepUpright_=f===void 0?!0:f,this.textRotation_=d===void 0?0:d,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:rt(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=a&&a.fillStyle?typeof a.fillStyle=="string"?a.fillStyle:"|"+rt(a.fillStyle):""}this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=n}}const N0={Circle:Oo,Default:ji,Image:L0,LineString:k0,Polygon:Oo,Text:O0};class D0{constructor(t,n,i,a){this.tolerance_=t,this.maxExtent_=n,this.pixelRatio_=a,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const n in this.buildersByZIndex_){t[n]=t[n]||{};const i=this.buildersByZIndex_[n];for(const a in i){const s=i[a].finish();t[n][a]=s}}return t}getBuilder(t,n){const i=t!==void 0?t.toString():"0";let a=this.buildersByZIndex_[i];a===void 0&&(a={},this.buildersByZIndex_[i]=a);let s=a[n];if(s===void 0){const r=N0[n];s=new r(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),a[n]=s}return s}}function F0(e,t,n,i,a,s,r,o,l,h,u,c,_=!0){let f=e[t],d=e[t+1],m=0,g=0,p=0,y=0;function b(){m=f,g=d,t+=i,f=e[t],d=e[t+1],y+=p,p=Math.sqrt((f-m)*(f-m)+(d-g)*(d-g))}do b();while(t<n-i&&y+p<s);let v=p===0?0:(s-y)/p;const x=zt(m,f,v),M=zt(g,d,v),R=t-i,w=y,I=s+o*l(h,a,u);for(;t<n-i&&y+p<I;)b();v=p===0?0:(I-y)/p;const k=zt(m,f,v),T=zt(g,d,v);let P=!1;if(_)if(c){const H=[x,M,k,T];hh(H,0,4,2,c,H,H),P=H[0]>H[2]}else P=x>k;const B=Math.PI,N=[],Y=R+i===t;t=R,p=0,y=w,f=e[t],d=e[t+1];let G;if(Y){b(),G=Math.atan2(d-g,f-m),P&&(G+=G>0?-B:B);const H=(k+x)/2,q=(T+M)/2;return N[0]=[H,q,(I-s)/2,G,a],N}a=a.replace(/\n/g," ");for(let H=0,q=a.length;H<q;){b();let tt=Math.atan2(d-g,f-m);if(P&&(tt+=tt>0?-B:B),G!==void 0){let Pt=tt-G;if(Pt+=Pt>B?-2*B:Pt<-B?2*B:0,Math.abs(Pt)>r)return null}G=tt;const Q=H;let nt=0;for(;H<q;++H){const Pt=P?q-H-1:H,Jt=o*l(h,a[Pt],u);if(t+i<n&&y+p<s+nt+Jt/2)break;nt+=Jt}if(H===Q)continue;const A=P?a.substring(q-Q,q-H):a.substring(Q,H);v=p===0?0:(s+nt/2-y)/p;const ze=zt(m,f,v),Ve=zt(g,d,v);N.push([ze,Ve,nt/2,tt,A]),s+=nt}return N}class Th{constructor(){$r(this,"pushMethodArgs_",(...t)=>(this.instructions_[this.zIndex+this.offset_].push(t),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Ca(),{get:(t,n)=>{if(typeof Ca()[n]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(n),this.pushMethodArgs_},set:(t,n,i)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(n,i),!0)})}pushFunction(t){this.instructions_[this.zIndex+this.offset_].push(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(n=>{for(let i=0,a=n.length;i<a;++i){const s=n[i];if(typeof s=="function"){s(t);continue}const r=n[++i];if(typeof t[s]=="function")t[s](...r);else{if(typeof r=="function"){t[s]=r(t);continue}t[s]=r}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const dn=nn(),Ie=[],fe=[],de=[],Ae=[];function No(e){return e[3].declutterBox}const Do=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function gs(e,t){return t==="start"?t=Do.test(e)?"right":"left":t==="end"&&(t=Do.test(e)?"left":"right"),Ta[t]}function G0(e,t,n){return n>0&&e.push(`
`,""),e.push(t,""),e}class B0{constructor(t,n,i,a,s){this.overlaps=i,this.pixelRatio=n,this.resolution=t,this.alignAndScaleFill_,this.instructions=a.instructions,this.coordinates=a.coordinates,this.coordinateCache_={},this.renderedTransform_=pe(),this.hitDetectionInstructions=a.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=a.fillStates||{},this.strokeStates=a.strokeStates||{},this.textStates=a.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new Th:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,n,i,a){const s=t+n+i+a;if(this.labels_[s])return this.labels_[s];const r=a?this.strokeStates[a]:null,o=i?this.fillStates[i]:null,l=this.textStates[n],h=this.pixelRatio,u=[l.scale[0]*h,l.scale[1]*h],c=l.justify?Ta[l.justify]:gs(Array.isArray(t)?t[0]:t,l.textAlign||Li),_=a&&r.lineWidth?r.lineWidth:0,f=Array.isArray(t)?t:String(t).split(`
`).reduce(G0,[]),{width:d,height:m,widths:g,heights:p,lineWidths:y}=Y_(l,f),b=d+_,v=[],x=(b+2)*u[0],M=(m+_)*u[1],R={width:x<0?Math.floor(x):Math.ceil(x),height:M<0?Math.floor(M):Math.ceil(M),contextInstructions:v};(u[0]!=1||u[1]!=1)&&v.push("scale",u),a&&(v.push("strokeStyle",r.strokeStyle),v.push("lineWidth",_),v.push("lineCap",r.lineCap),v.push("lineJoin",r.lineJoin),v.push("miterLimit",r.miterLimit),v.push("setLineDash",[r.lineDash]),v.push("lineDashOffset",r.lineDashOffset)),i&&v.push("fillStyle",o.fillStyle),v.push("textBaseline","middle"),v.push("textAlign","center");const w=.5-c;let I=c*b+w*_;const k=[],T=[];let P=0,B=0,N=0,Y=0,G;for(let H=0,q=f.length;H<q;H+=2){const tt=f[H];if(tt===`
`){B+=P,P=0,I=c*b+w*_,++Y;continue}const Q=f[H+1]||l.font;Q!==G&&(a&&k.push("font",Q),i&&T.push("font",Q),G=Q),P=Math.max(P,p[N]);const nt=[tt,I+w*g[N]+c*(g[N]-y[Y]),.5*(_+P)+B];I+=g[N],a&&k.push("strokeText",nt),i&&T.push("fillText",nt),++N}return Array.prototype.push.apply(v,k),Array.prototype.push.apply(v,T),this.labels_[s]=R,R}replayTextBackground_(t,n,i,a,s,r,o){t.beginPath(),t.moveTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,a),t.lineTo.apply(t,s),t.lineTo.apply(t,n),r&&(this.alignAndScaleFill_=r[2],t.fillStyle=r[1],this.fill_(t)),o&&(this.setStrokeStyle_(t,o),t.stroke())}calculateImageOrLabelDimensions_(t,n,i,a,s,r,o,l,h,u,c,_,f,d,m,g){o*=_[0],l*=_[1];let p=i-o,y=a-l;const b=s+h>t?t-h:s,v=r+u>n?n-u:r,x=d[3]+b*_[0]+d[1],M=d[0]+v*_[1]+d[2],R=p-d[3],w=y-d[0];(m||c!==0)&&(Ie[0]=R,Ae[0]=R,Ie[1]=w,fe[1]=w,fe[0]=R+x,de[0]=fe[0],de[1]=w+M,Ae[1]=de[1]);let I;return c!==0?(I=rn(pe(),i,a,1,1,c,-i,-a),Tt(I,Ie),Tt(I,fe),Tt(I,de),Tt(I,Ae),an(Math.min(Ie[0],fe[0],de[0],Ae[0]),Math.min(Ie[1],fe[1],de[1],Ae[1]),Math.max(Ie[0],fe[0],de[0],Ae[0]),Math.max(Ie[1],fe[1],de[1],Ae[1]),dn)):an(Math.min(R,R+x),Math.min(w,w+M),Math.max(R,R+x),Math.max(w,w+M),dn),f&&(p=Math.round(p),y=Math.round(y)),{drawImageX:p,drawImageY:y,drawImageW:b,drawImageH:v,originX:h,originY:u,declutterBox:{minX:dn[0],minY:dn[1],maxX:dn[2],maxY:dn[3],value:g},canvasTransform:I,scale:_}}replayImageOrLabel_(t,n,i,a,s,r,o){const l=!!(r||o),h=a.declutterBox,u=o?o[2]*a.scale[0]/2:0;return h.minX-u<=n[0]&&h.maxX+u>=0&&h.minY-u<=n[1]&&h.maxY+u>=0&&(l&&this.replayTextBackground_(t,Ie,fe,de,Ae,r,o),Z_(t,a.canvasTransform,s,i,a.originX,a.originY,a.drawImageW,a.drawImageH,a.drawImageX,a.drawImageY,a.scale)),!0}fill_(t){const n=this.alignAndScaleFill_;if(n){const i=Tt(this.renderedTransform_,[0,0]),a=512*this.pixelRatio;t.save(),t.translate(i[0]%a,i[1]%a),n!==1&&t.scale(n,n),t.rotate(this.viewRotation_)}t.fill(),n&&t.restore()}setStrokeStyle_(t,n){t.strokeStyle=n[1],t.lineWidth=n[2],t.lineCap=n[3],t.lineJoin=n[4],t.miterLimit=n[5],t.lineDashOffset=n[7],t.setLineDash(n[6])}drawLabelWithPointPlacement_(t,n,i,a){const s=this.textStates[n],r=this.createLabel(t,n,a,i),o=this.strokeStates[i],l=this.pixelRatio,h=gs(Array.isArray(t)?t[0]:t,s.textAlign||Li),u=Ta[s.textBaseline||La],c=o&&o.lineWidth?o.lineWidth:0,_=r.width/l-2*s.scale[0],f=h*_+2*(.5-h)*c,d=u*r.height/l+2*(.5-u)*c;return{label:r,anchorX:f,anchorY:d}}execute_(t,n,i,a,s,r,o,l){const h=this.zIndexContext_;let u;this.pixelCoordinates_&&Kn(i,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=Te(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),__(this.renderedTransform_,i));let c=0;const _=a.length;let f=0,d,m,g,p,y,b,v,x,M,R,w,I,k,T=0,P=0;const B=this.coordinateCache_,N=this.viewRotation_,Y=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,G={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:N},H=this.instructions!=a||this.overlaps?0:200;let q,tt,Q,nt;for(;c<_;){const A=a[c];switch(A[0]){case O.BEGIN_GEOMETRY:q=A[1],nt=A[3],q.getGeometry()?o!==void 0&&!qt(o,nt.getExtent())?c=A[2]+1:++c:c=A[2],h&&(h.zIndex=A[4]);break;case O.BEGIN_PATH:T>H&&(this.fill_(t),T=0),P>H&&(t.stroke(),P=0),!T&&!P&&(t.beginPath(),y=NaN,b=NaN),++c;break;case O.CIRCLE:f=A[1];const Ve=u[f],Pt=u[f+1],Jt=u[f+2],je=u[f+3],Ji=Jt-Ve,Zn=je-Pt,He=Math.sqrt(Ji*Ji+Zn*Zn);t.moveTo(Ve+He,Pt),t.arc(Ve,Pt,He,0,2*Math.PI,!0),++c;break;case O.CLOSE_PATH:t.closePath(),++c;break;case O.CUSTOM:f=A[1],d=A[2];const Nu=A[3],Du=A[4],Ur=A[5];G.geometry=Nu,G.feature=q,c in B||(B[c]=[]);const Jn=B[c];Ur?Ur(u,f,d,2,Jn):(Jn[0]=u[f],Jn[1]=u[f+1],Jn.length=2),h&&(h.zIndex=A[6]),Du(Jn,G),++c;break;case O.DRAW_IMAGE:f=A[1],d=A[2],M=A[3],m=A[4],g=A[5];let ts=A[6];const Fu=A[7],Gu=A[8],Bu=A[9],zr=A[10];let es=A[11];const Uu=A[12];let Qi=A[13];p=A[14]||"declutter";const Qn=A[15];if(!M&&A.length>=20){R=A[19],w=A[20],I=A[21],k=A[22];const Ot=this.drawLabelWithPointPlacement_(R,w,I,k);M=Ot.label,A[3]=M;const We=A[23];m=(Ot.anchorX-We)*this.pixelRatio,A[4]=m;const Nt=A[24];g=(Ot.anchorY-Nt)*this.pixelRatio,A[5]=g,ts=M.height,A[6]=ts,Qi=M.width,A[13]=Qi}let ns;A.length>25&&(ns=A[25]);let is,ta,ea;A.length>17?(is=A[16],ta=A[17],ea=A[18]):(is=Je,ta=null,ea=null),zr&&Y?es+=N:!zr&&!Y&&(es-=N);let zu=0;for(;f<d;f+=2){if(ns&&ns[zu++]<Qi/this.pixelRatio)continue;const Ot=this.calculateImageOrLabelDimensions_(M.width,M.height,u[f],u[f+1],Qi,ts,m,g,Gu,Bu,es,Uu,s,is,!!ta||!!ea,q),We=[t,n,M,Ot,Fu,ta,ea];if(l){let Nt,Qt,Dt;if(Qn){const it=d-f;if(!Qn[it]){Qn[it]={args:We,declutterMode:p};continue}const gt=Qn[it];Nt=gt.args,Qt=gt.declutterMode,delete Qn[it],Dt=No(Nt)}let ue,ce;if(Nt&&(Qt!=="declutter"||!l.collides(Dt))&&(ue=!0),(p!=="declutter"||!l.collides(Ot.declutterBox))&&(ce=!0),Qt==="declutter"&&p==="declutter"){const it=ue&&ce;ue=it,ce=it}ue&&(Qt!=="none"&&l.insert(Dt),this.replayImageOrLabel_.apply(this,Nt)),ce&&(p!=="none"&&l.insert(Ot.declutterBox),this.replayImageOrLabel_.apply(this,We))}else this.replayImageOrLabel_.apply(this,We)}++c;break;case O.DRAW_CHARS:const Vr=A[1],jr=A[2],as=A[3],Vu=A[4];k=A[5];const ju=A[6],Hr=A[7],Wr=A[8];I=A[9];const ss=A[10];R=A[11],w=A[12];const qr=[A[13],A[13]];p=A[14]||"declutter";const Hu=A[15],rs=this.textStates[w],ti=rs.font,ei=[rs.scale[0]*Hr,rs.scale[1]*Hr];let ni;ti in this.widths_?ni=this.widths_[ti]:(ni={},this.widths_[ti]=ni);const Kr=L_(u,Vr,jr,2),Xr=Math.abs(ei[0])*Mo(ti,R,ni);if(Vu||Xr<=Kr){const Ot=this.textStates[w].textAlign,We=(Kr-Xr)*gs(R,Ot),Nt=F0(u,Vr,jr,2,R,We,ju,Math.abs(ei[0]),Mo,ti,ni,Y?0:this.viewRotation_,Hu);t:if(Nt){const Qt=[];let Dt,ue,ce,it,gt;if(I)for(Dt=0,ue=Nt.length;Dt<ue;++Dt){gt=Nt[Dt],ce=gt[4],it=this.createLabel(ce,w,"",I),m=gt[2]+(ei[0]<0?-ss:ss),g=as*it.height+(.5-as)*2*ss*ei[1]/ei[0]-Wr;const _e=this.calculateImageOrLabelDimensions_(it.width,it.height,gt[0],gt[1],it.width,it.height,m,g,0,0,gt[3],qr,!1,Je,!1,q);if(l&&p==="declutter"&&l.collides(_e.declutterBox))break t;Qt.push([t,n,it,_e,1,null,null])}if(k)for(Dt=0,ue=Nt.length;Dt<ue;++Dt){gt=Nt[Dt],ce=gt[4],it=this.createLabel(ce,w,k,""),m=gt[2],g=as*it.height-Wr;const _e=this.calculateImageOrLabelDimensions_(it.width,it.height,gt[0],gt[1],it.width,it.height,m,g,0,0,gt[3],qr,!1,Je,!1,q);if(l&&p==="declutter"&&l.collides(_e.declutterBox))break t;Qt.push([t,n,it,_e,1,null,null])}l&&p!=="none"&&l.load(Qt.map(No));for(let _e=0,Wu=Qt.length;_e<Wu;++_e)this.replayImageOrLabel_.apply(this,Qt[_e])}}++c;break;case O.END_GEOMETRY:if(r!==void 0){q=A[1];const Ot=r(q,nt,p);if(Ot)return Ot}++c;break;case O.FILL:H?T++:this.fill_(t),++c;break;case O.MOVE_TO_LINE_TO:for(f=A[1],d=A[2],tt=u[f],Q=u[f+1],t.moveTo(tt,Q),y=tt+.5|0,b=Q+.5|0,f+=2;f<d;f+=2)tt=u[f],Q=u[f+1],v=tt+.5|0,x=Q+.5|0,(f==d-2||v!==y||x!==b)&&(t.lineTo(tt,Q),y=v,b=x);++c;break;case O.SET_FILL_STYLE:this.alignAndScaleFill_=A[2],T&&(this.fill_(t),T=0,P&&(t.stroke(),P=0)),t.fillStyle=A[1],++c;break;case O.SET_STROKE_STYLE:P&&(t.stroke(),P=0),this.setStrokeStyle_(t,A),++c;break;case O.STROKE:H?P++:t.stroke(),++c;break;default:++c;break}}T&&this.fill_(t),P&&t.stroke()}execute(t,n,i,a,s,r){this.viewRotation_=a,this.execute_(t,n,i,this.instructions,s,void 0,void 0,r)}executeHitDetection(t,n,i,a,s){return this.viewRotation_=i,this.execute_(t,[t.canvas.width,t.canvas.height],n,this.hitDetectionInstructions,!0,a,s)}}const Sn=["Polygon","Circle","LineString","Image","Text","Default"],Ph=["Image","Text"],U0=Sn.filter(e=>!Ph.includes(e));class z0{constructor(t,n,i,a,s,r,o){this.maxExtent_=t,this.overlaps_=a,this.pixelRatio_=i,this.resolution_=n,this.renderBuffer_=r,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=pe(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(t,n){const i=this.getClipCoords(n);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t,n){for(const i in t){let a=this.executorsByZIndex_[i];a===void 0&&(a={},this.executorsByZIndex_[i]=a);const s=t[i];for(const r in s){const o=s[r];a[r]=new B0(this.resolution_,this.pixelRatio_,this.overlaps_,o,n)}}}hasExecutors(t){for(const n in this.executorsByZIndex_){const i=this.executorsByZIndex_[n];for(let a=0,s=t.length;a<s;++a)if(t[a]in i)return!0}return!1}forEachFeatureAtCoordinate(t,n,i,a,s,r){a=Math.round(a);const o=a*2+1,l=rn(this.hitDetectionTransform_,a+.5,a+.5,1/n,-1/n,-i,-t[0],-t[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=Ct(o,o,void 0,{willReadFrequently:!0}));const u=this.hitDetectionContext_;u.canvas.width!==o||u.canvas.height!==o?(u.canvas.width=o,u.canvas.height=o):h||u.clearRect(0,0,o,o);let c;this.renderBuffer_!==void 0&&(c=nn(),bc(c,t),Qs(c,n*(this.renderBuffer_+a),c));const _=V0(a);let f;function d(x,M,R){const w=u.getImageData(0,0,o,o).data;for(let I=0,k=_.length;I<k;I++)if(w[_[I]]>0){if(!r||R==="none"||f!=="Image"&&f!=="Text"||r.includes(x)){const T=(_[I]-3)/4,P=a-T%o,B=a-(T/o|0),N=s(x,M,P*P+B*B);if(N)return N}u.clearRect(0,0,o,o);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(en);let g,p,y,b,v;for(g=m.length-1;g>=0;--g){const x=m[g].toString();for(y=this.executorsByZIndex_[x],p=Sn.length-1;p>=0;--p)if(f=Sn[p],b=y[f],b!==void 0&&(v=b.executeHitDetection(u,l,i,d,c),v))return v}}getClipCoords(t){const n=this.maxExtent_;if(!n)return null;const i=n[0],a=n[1],s=n[2],r=n[3],o=[i,a,i,r,s,r,s,a];return Te(o,0,8,2,t,o),o}isEmpty(){return Dn(this.executorsByZIndex_)}execute(t,n,i,a,s,r,o){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(o?cc:en),r=r||Sn;const h=Sn.length;for(let u=0,c=l.length;u<c;++u){const _=l[u].toString(),f=this.executorsByZIndex_[_];for(let d=0,m=r.length;d<m;++d){const g=r[d],p=f[g];if(p!==void 0){const y=o===null?void 0:p.getZIndexContext(),b=y?y.getContext():t,v=this.maxExtent_&&g!=="Image"&&g!=="Text";if(v&&(b.save(),this.clip(b,i)),!y||g==="Text"||g==="Image"?p.execute(b,n,i,a,s,o):y.pushFunction(x=>p.execute(x,n,i,a,s,o)),v&&b.restore(),y){y.offset();const x=l[u]*h+d;this.deferredZIndexContexts_[x]||(this.deferredZIndexContexts_[x]=[]),this.deferredZIndexContexts_[x].push(y)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,n=Object.keys(t).map(Number).sort(en);for(let i=0,a=n.length;i<a;++i)t[n[i]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),t[n[i]].length=0}}const ps={};function V0(e){if(ps[e]!==void 0)return ps[e];const t=e*2+1,n=e*e,i=new Array(n+1);for(let s=0;s<=e;++s)for(let r=0;r<=e;++r){const o=s*s+r*r;if(o>n)break;let l=i[o];l||(l=[],i[o]=l),l.push(((e+s)*t+(e+r))*4+3),s>0&&l.push(((e-s)*t+(e+r))*4+3),r>0&&(l.push(((e+s)*t+(e-r))*4+3),s>0&&l.push(((e-s)*t+(e-r))*4+3))}const a=[];for(let s=0,r=i.length;s<r;++s)i[s]&&a.push(...i[s]);return ps[e]=a,a}function Fo(e,t,n,i){return n!==void 0&&i!==void 0?[n/e,i/t]:n!==void 0?n/e:i!==void 0?i/t:1}class Xa extends Wa{constructor(t){t=t||{};const n=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,a=t.scale!==void 0?t.scale:1,s=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:n,rotation:i,scale:a,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const r=t.img!==void 0?t.img:null;let o=t.src;ht(!(o!==void 0&&r),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&r&&(o=r.src||rt(r)),ht(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),ht(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(t.src!==void 0?l=j.IDLE:r!==void 0&&("complete"in r?r.complete?l=r.src?j.LOADED:j.IDLE:l=j.LOADING:l=j.LOADED),this.color_=t.color!==void 0?Bn(t.color):null,this.iconImage_=fr(r,o,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,this.initialOptions_,t.width!==void 0||t.height!==void 0){let h,u;if(t.size)[h,u]=t.size;else{const c=this.getImage(1);if(c.width&&c.height)h=c.width,u=c.height;else if(c instanceof HTMLImageElement){this.initialOptions_=t;const _=()=>{if(this.unlistenImageChange(_),!this.initialOptions_)return;const f=this.iconImage_.getSize();this.setScale(Fo(f[0],f[1],t.width,t.height))};this.listenImageChange(_);return}}h!==void 0&&this.setScale(Fo(h,u,t.width,t.height))}}clone(){let t,n,i;return this.initialOptions_?(n=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new Xa({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:n,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const a=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!a)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=a[0]),this.anchorYUnits_=="fraction"&&(t[1]*=a[1])}if(this.anchorOrigin_!="top-left"){if(!a)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+a[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+a[1])}this.normalizedAnchor_=t}const n=this.getDisplacement(),i=this.getScaleArray();return[t[0]-n[0]/i[0],t[1]+n[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-n[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-n[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==j.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==j.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener($t.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener($t.CHANGE,t)}ready(){return this.iconImage_.ready()}}const ae=.5;function j0(e,t,n,i,a,s,r,o,l){const h=a,u=e[0]*ae,c=e[1]*ae,_=Ct(u,c);_.imageSmoothingEnabled=!1;const f=_.canvas,d=new Q_(_,ae,a,null,r,o,null),m=n.length,g=Math.floor((256*256*256-1)/m),p={};for(let b=1;b<=m;++b){const v=n[b-1],x=v.getStyleFunction()||i;if(!x)continue;let M=x(v,s);if(!M)continue;Array.isArray(M)||(M=[M]);const w=(b*g).toString(16).padStart(7,"#00000");for(let I=0,k=M.length;I<k;++I){const T=M[I],P=T.getGeometryFunction()(v);if(!P||!qt(h,P.getExtent()))continue;const B=T.clone(),N=B.getFill();N&&N.setColor(w);const Y=B.getStroke();Y&&(Y.setColor(w),Y.setLineDash(null)),B.setText(void 0);const G=T.getImage();if(G){const Q=G.getImageSize();if(!Q)continue;const nt=Ct(Q[0],Q[1],void 0,{alpha:!1}),A=nt.canvas;nt.fillStyle=w,nt.fillRect(0,0,A.width,A.height),B.setImage(new Xa({img:A,anchor:G.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:G.getOrigin(),opacity:1,size:G.getSize(),scale:G.getScale(),rotation:G.getRotation(),rotateWithView:G.getRotateWithView()}))}const H=B.getZIndex()||0;let q=p[H];q||(q={},p[H]=q,q.Polygon=[],q.Circle=[],q.LineString=[],q.Point=[]);const tt=P.getType();if(tt==="GeometryCollection"){const Q=P.getGeometriesArrayRecursive();for(let nt=0,A=Q.length;nt<A;++nt){const ze=Q[nt];q[ze.getType().replace("Multi","")].push(ze,B)}}else q[tt.replace("Multi","")].push(P,B)}}const y=Object.keys(p).map(Number).sort(en);for(let b=0,v=y.length;b<v;++b){const x=p[y[b]];for(const M in x){const R=x[M];for(let w=0,I=R.length;w<I;w+=2){d.setStyle(R[w+1]);for(let k=0,T=t.length;k<T;++k)d.setTransform(t[k]),d.drawGeometry(R[w])}}}return _.getImageData(0,0,f.width,f.height)}function H0(e,t,n){const i=[];if(n){const a=Math.floor(Math.round(e[0])*ae),s=Math.floor(Math.round(e[1])*ae),r=(mt(a,0,n.width-1)+mt(s,0,n.height-1)*n.width)*4,o=n.data[r],l=n.data[r+1],u=n.data[r+2]+256*(l+256*o),c=Math.floor((256*256*256-1)/t.length);u&&u%c===0&&i.push(t[u/c-1])}return i}class W0 extends zi{constructor(t,n,i,a){super(t),this.inversePixelTransform=n,this.frameState=i,this.context=a}}const q0=5;class K0 extends Hl{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=q0}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return J()}getData(t){return null}prepareFrame(t){return J()}renderFrame(t,n){return J()}forEachFeatureAtCoordinate(t,n,i,a,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const n=t.target;(n.getState()===j.LOADED||n.getState()===j.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let n=t.getState();return n!=j.LOADED&&n!=j.ERROR&&t.addEventListener($t.CHANGE,this.boundHandleImageChange_),n==j.IDLE&&(t.load(),n=t.getState()),n==j.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const Go=[];let bn=null;function X0(){bn=Ct(1,1,void 0,{willReadFrequently:!0})}class $0 extends K0{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=pe(),this.pixelTransform=pe(),this.inversePixelTransform=pe(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,n,i){bn||X0(),bn.clearRect(0,0,1,1);let a;try{bn.drawImage(t,n,i,1,1,0,0,1,1),a=bn.getImageData(0,0,1,1).data}catch{return bn=null,null}return a}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,n,i){const a=this.getLayer().getClassName();let s,r;if(t&&t.className===a&&(!i||t&&t.style.backgroundColor&&Kn(Bn(t.style.backgroundColor),Bn(i)))){const o=t.firstElementChild;o instanceof HTMLCanvasElement&&(r=o.getContext("2d"))}if(r&&r.canvas.style.transform===n?(this.container=t,this.context=r,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=a;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",r=Ct();const l=r.canvas;s.appendChild(l),o=l.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=r}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,n,i){const a=Jl(i),s=Ql(i),r=Zl(i),o=Yl(i);Tt(n.coordinateToPixelTransform,a),Tt(n.coordinateToPixelTransform,s),Tt(n.coordinateToPixelTransform,r),Tt(n.coordinateToPixelTransform,o);const l=this.inversePixelTransform;Tt(l,a),Tt(l,s),Tt(l,r),Tt(l,o),t.save(),t.beginPath(),t.moveTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.clip()}prepareContainer(t,n){const i=t.extent,a=t.viewState.resolution,s=t.viewState.rotation,r=t.pixelRatio,o=Math.round(Rt(i)/a*r),l=Math.round(xe(i)/a*r);rn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/r,1/r,s,-o/2,-l/2),f_(this.inversePixelTransform,this.pixelTransform);const h=m_(this.pixelTransform);if(this.useContainer(n,h,this.getBackground(t)),!this.containerReused){const u=this.context.canvas;u.width!=o||u.height!=l?(u.width=o,u.height=l):this.context.clearRect(0,0,o,l),h!==u.style.transform&&(u.style.transform=h)}}dispatchRenderEvent_(t,n,i){const a=this.getLayer();if(a.hasListener(t)){const s=new W0(t,this.inversePixelTransform,i,n);a.dispatchEvent(s)}}preRender(t,n){this.frameState=n,!n.declutter&&this.dispatchRenderEvent_(Ze.PRERENDER,t,n)}postRender(t,n){n.declutter||this.dispatchRenderEvent_(Ze.POSTRENDER,t,n)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new Th),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(Ze.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(Ze.POSTRENDER,this.context,t))}getRenderTransform(t,n,i,a,s,r,o){const l=s/2,h=r/2,u=a/n,c=-u,_=-t[0]+o,f=-t[1];return rn(this.tempTransform,l,h,u,c,-i,_,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class Y0 extends $0{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=nn(),this.wrappedRenderedExtent_=nn(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,n,i){const a=n.extent,s=n.viewState,r=s.center,o=s.resolution,l=s.projection,h=s.rotation,u=l.getExtent(),c=this.getLayer().getSource(),_=this.getLayer().getDeclutter(),f=n.pixelRatio,d=n.viewHints,m=!(d[Bt.ANIMATING]||d[Bt.INTERACTING]),g=this.context,p=Math.round(Rt(a)/o*f),y=Math.round(xe(a)/o*f),b=c.getWrapX()&&l.canWrapX(),v=b?Rt(u):null,x=b?Math.ceil((a[2]-u[2])/v)+1:1;let M=b?Math.floor((a[0]-u[0])/v):0;do{let R=this.getRenderTransform(r,o,0,f,p,y,M*v);n.declutter&&(R=R.slice(0)),t.execute(g,[g.canvas.width,g.canvas.height],R,h,m,i===void 0?Sn:i?Ph:U0,i?_&&n.declutter[_]:void 0)}while(++M<x)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Ct(this.context.canvas.width,this.context.canvas.height,Go))}resetDrawContext_(){if(this.opacity_!==1){const t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,V_(this.context),Go.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,n){const i=t.layerStatesArray[t.layerIndex];this.opacity_=i.opacity;const a=t.viewState;this.prepareContainer(t,n);const s=this.context,r=this.replayGroup_;let o=r&&!r.isEmpty();if(!o&&!(this.getLayer().hasListener(Ze.PRERENDER)||this.getLayer().hasListener(Ze.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(s,t),a.projection,this.clipped_=!1,o&&i.extent&&this.clipping){const l=li(i.extent);o=qt(l,t.extent),this.clipped_=o&&!oi(l,t.extent),this.clipped_&&this.clipUnrotated(s,t,l)}return o&&this.renderWorlds(r,t,this.getLayer().getDeclutter()?!1:void 0),!t.declutter&&this.clipped_&&s.restore(),this.postRender(s,t),this.renderedRotation_!==a.rotation&&(this.renderedRotation_=a.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise(n=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),a=this.renderedCenter_,s=this.renderedResolution_,r=this.renderedRotation_,o=this.renderedProjection_,l=this.wrappedRenderedExtent_,h=this.getLayer(),u=[],c=i[0]*ae,_=i[1]*ae;u.push(this.getRenderTransform(a,s,r,ae,c,_,0).slice());const f=h.getSource(),d=o.getExtent();if(f.getWrapX()&&o.canWrapX()&&!oi(d,l)){let m=l[0];const g=Rt(d);let p=0,y;for(;m<d[0];)--p,y=g*p,u.push(this.getRenderTransform(a,s,r,ae,c,_,y).slice()),m+=g;for(p=0,m=l[2];m>d[2];)++p,y=g*p,u.push(this.getRenderTransform(a,s,r,ae,c,_,y).slice()),m-=g}this.hitDetectionImageData_=j0(i,u,this.renderedFeatures_,h.getStyleFunction(),l,s,r,wo(s,this.renderedPixelRatio_))}n(H0(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,n,i,a,s){var _,f;if(!this.replayGroup_)return;const r=n.viewState.resolution,o=n.viewState.rotation,l=this.getLayer(),h={},u=function(d,m,g){const p=rt(d),y=h[p];if(y){if(y!==!0&&g<y.distanceSq){if(g===0)return h[p]=!0,s.splice(s.lastIndexOf(y),1),a(d,l,m);y.geometry=m,y.distanceSq=g}}else{if(g===0)return h[p]=!0,a(d,l,m);s.push(h[p]={feature:d,layer:l,geometry:m,distanceSq:g,callback:a})}},c=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(t,r,o,i,u,c?(f=(_=n.declutter)==null?void 0:_[c])==null?void 0:f.all().map(d=>d.value):null)}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const n=this.getLayer(),i=n.getSource();if(!i)return!1;const a=t.viewHints[Bt.ANIMATING],s=t.viewHints[Bt.INTERACTING],r=n.getUpdateWhileAnimating(),o=n.getUpdateWhileInteracting();if(this.ready&&!r&&a||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,h=t.viewState,u=h.projection,c=h.resolution,_=t.pixelRatio,f=n.getRevision(),d=n.getRenderBuffer();let m=n.getRenderOrder();m===void 0&&(m=e0);const g=h.center.slice(),p=Qs(l,d*c),y=p.slice(),b=[p.slice()],v=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!oi(v,t.extent)){const N=Rt(v),Y=Math.max(Rt(p)/2,N);p[0]=v[0]-Y,p[2]=v[2]+Y,Pc(g,u);const G=th(b[0],u);G[0]<v[0]&&G[2]<v[2]?b.push([G[0]+N,G[1],G[2]+N,G[3]]):G[0]>v[0]&&G[2]>v[2]&&b.push([G[0]-N,G[1],G[2]-N,G[3]])}if(this.ready&&this.renderedResolution_==c&&this.renderedRevision_==f&&this.renderedRenderOrder_==m&&this.renderedFrameDeclutter_===!!t.declutter&&oi(this.wrappedRenderedExtent_,p))return Kn(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=g,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const x=new D0(Rh(c,_),p,c,_);let M;for(let N=0,Y=b.length;N<Y;++N)i.loadFeatures(b[N],c,u);const R=wo(c,_);let w=!0;const I=(N,Y)=>{let G;const H=N.getStyleFunction()||n.getStyleFunction();if(H&&(G=H(N,c)),G){const q=this.renderFeature(N,R,G,x,M,this.getLayer().getDeclutter(),Y);w=w&&!q}},k=lh(p),T=i.getFeaturesInExtent(k);m&&T.sort(m);for(let N=0,Y=T.length;N<Y;++N)I(T[N],N);this.renderedFeatures_=T,this.ready=w;const P=x.finish(),B=new z0(p,c,_,i.getOverlaps(),P,n.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=c,this.renderedRevision_=f,this.renderedRenderOrder_=m,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=y,this.wrappedRenderedExtent_=p,this.renderedCenter_=g,this.renderedProjection_=u,this.renderedPixelRatio_=_,this.replayGroup_=B,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,n,i,a,s,r,o){if(!i)return!1;let l=!1;if(Array.isArray(i))for(let h=0,u=i.length;h<u;++h)l=Eo(a,t,i[h],n,this.boundHandleStyleImageChange_,s,r,o)||l;else l=Eo(a,t,i,n,this.boundHandleStyleImageChange_,s,r,o);return l}}let cn=0;const vt=1<<cn++,W=1<<cn++,St=1<<cn++,Kt=1<<cn++,on=1<<cn++,ci=1<<cn++,oa=Math.pow(2,cn)-1,gr={[vt]:"boolean",[W]:"number",[St]:"string",[Kt]:"color",[on]:"number[]",[ci]:"size"},Z0=Object.keys(gr).map(Number).sort(en);function J0(e){return e in gr}function _i(e){const t=[];for(const n of Z0)fi(e,n)&&t.push(gr[n]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function fi(e,t){return(e&t)===t}function Ce(e,t){return e===t}class at{constructor(t,n){if(!J0(t))throw new Error(`literal expressions must have a specific type, got ${_i(t)}`);this.type=t,this.value=n}}class Q0{constructor(t,n,...i){this.type=t,this.operator=n,this.args=i}}function Oh(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function ct(e,t,n){switch(typeof e){case"boolean":{if(Ce(t,St))return new at(St,e?"true":"false");if(!fi(t,vt))throw new Error(`got a boolean, but expected ${_i(t)}`);return new at(vt,e)}case"number":{if(Ce(t,ci))return new at(ci,jn(e));if(Ce(t,vt))return new at(vt,!!e);if(Ce(t,St))return new at(St,e.toString());if(!fi(t,W))throw new Error(`got a number, but expected ${_i(t)}`);return new at(W,e)}case"string":{if(Ce(t,Kt))return new at(Kt,cr(e));if(Ce(t,vt))return new at(vt,!!e);if(!fi(t,St))throw new Error(`got a string, but expected ${_i(t)}`);return new at(St,e)}}if(!Array.isArray(e))throw new Error("expression must be an array or a primitive value");if(e.length===0)throw new Error("empty expression");if(typeof e[0]=="string")return cf(e,t,n);for(const i of e)if(typeof i!="number")throw new Error("expected an array of numbers");if(Ce(t,ci)){if(e.length!==2)throw new Error(`expected an array of two values for a size, got ${e.length}`);return new at(ci,e)}if(Ce(t,Kt)){if(e.length===3)return new at(Kt,[...e,1]);if(e.length===4)return new at(Kt,e);throw new Error(`expected an array of 3 or 4 values for a color, got ${e.length}`)}if(!fi(t,on))throw new Error(`got an array of numbers, but expected ${_i(t)}`);return new at(on,e)}const E={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},tf={[E.Get]:D(z(1,1/0),Bo),[E.Var]:D(z(1,1),ef),[E.Has]:D(z(1,1/0),Bo),[E.Id]:D(nf,mn),[E.Concat]:D(z(2,1/0),K(St)),[E.GeometryType]:D(af,mn),[E.LineMetric]:D(mn),[E.Resolution]:D(ys,mn),[E.Zoom]:D(ys,mn),[E.Time]:D(ys,mn),[E.Any]:D(z(2,1/0),K(vt)),[E.All]:D(z(2,1/0),K(vt)),[E.Not]:D(z(1,1),K(vt)),[E.Equal]:D(z(2,2),K(oa)),[E.NotEqual]:D(z(2,2),K(oa)),[E.GreaterThan]:D(z(2,2),K(W)),[E.GreaterThanOrEqualTo]:D(z(2,2),K(W)),[E.LessThan]:D(z(2,2),K(W)),[E.LessThanOrEqualTo]:D(z(2,2),K(W)),[E.Multiply]:D(z(2,1/0),Uo),[E.Coalesce]:D(z(2,1/0),Uo),[E.Divide]:D(z(2,2),K(W)),[E.Add]:D(z(2,1/0),K(W)),[E.Subtract]:D(z(2,2),K(W)),[E.Clamp]:D(z(3,3),K(W)),[E.Mod]:D(z(2,2),K(W)),[E.Pow]:D(z(2,2),K(W)),[E.Abs]:D(z(1,1),K(W)),[E.Floor]:D(z(1,1),K(W)),[E.Ceil]:D(z(1,1),K(W)),[E.Round]:D(z(1,1),K(W)),[E.Sin]:D(z(1,1),K(W)),[E.Cos]:D(z(1,1),K(W)),[E.Atan]:D(z(1,2),K(W)),[E.Sqrt]:D(z(1,1),K(W)),[E.Match]:D(z(4,1/0),zo,rf),[E.Between]:D(z(3,3),K(W)),[E.Interpolate]:D(z(6,1/0),zo,of),[E.Case]:D(z(3,1/0),sf,lf),[E.In]:D(z(2,2),hf),[E.Number]:D(z(1,1/0),K(oa)),[E.String]:D(z(1,1/0),K(oa)),[E.Array]:D(z(1,1/0),K(W)),[E.Color]:D(z(1,4),K(W)),[E.Band]:D(z(1,3),K(W)),[E.Palette]:D(z(2,2),uf),[E.ToString]:D(z(1,1),K(vt|W|St|Kt))};function Bo(e,t,n){const i=e.length-1,a=new Array(i);for(let s=0;s<i;++s){const r=e[s+1];switch(typeof r){case"number":{a[s]=new at(W,r);break}case"string":{a[s]=new at(St,r);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${r}`)}s===0&&n.properties.add(String(r))}return a}function ef(e,t,n){const i=e[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return n.variables.add(i),[new at(St,i)]}function nf(e,t,n){n.featureId=!0}function af(e,t,n){n.geometryType=!0}function ys(e,t,n){n.mapState=!0}function mn(e,t,n){const i=e[0];if(e.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function z(e,t){return function(n,i,a){const s=n[0],r=n.length-1;if(e===t){if(r!==e){const o=e===1?"":"s";throw new Error(`expected ${e} argument${o} for ${s}, got ${r}`)}}else if(r<e||r>t){const o=t===1/0?`${e} or more`:`${e} to ${t}`;throw new Error(`expected ${o} arguments for ${s}, got ${r}`)}}}function Uo(e,t,n){const i=e.length-1,a=new Array(i);for(let s=0;s<i;++s){const r=ct(e[s+1],t,n);a[s]=r}return a}function K(e){return function(t,n,i){const a=t.length-1,s=new Array(a);for(let r=0;r<a;++r){const o=ct(t[r+1],e,i);s[r]=o}return s}}function sf(e,t,n){const i=e[0],a=e.length-1;if(a%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${a} instead`)}function zo(e,t,n){const i=e[0],a=e.length-1;if(a%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${a} instead`)}function rf(e,t,n){const i=e.length-1,a=St|W|vt,s=ct(e[1],a,n),r=ct(e[e.length-1],t,n),o=new Array(i-2);for(let l=0;l<i-2;l+=2){try{const h=ct(e[l+2],s.type,n);o[l]=h}catch(h){throw new Error(`failed to parse argument ${l+1} of match expression: ${h.message}`)}try{const h=ct(e[l+3],r.type,n);o[l+1]=h}catch(h){throw new Error(`failed to parse argument ${l+2} of match expression: ${h.message}`)}}return[s,...o,r]}function of(e,t,n){const i=e[1];let a;switch(i[0]){case"linear":a=1;break;case"exponential":const l=i[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);a=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const s=new at(W,a);let r;try{r=ct(e[2],W,n)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const o=new Array(e.length-3);for(let l=0;l<o.length;l+=2){try{const h=ct(e[l+3],W,n);o[l]=h}catch(h){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${h.message}`)}try{const h=ct(e[l+4],t,n);o[l+1]=h}catch(h){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${h.message}`)}}return[s,r,...o]}function lf(e,t,n){const i=ct(e[e.length-1],t,n),a=new Array(e.length-1);for(let s=0;s<a.length-1;s+=2){try{const r=ct(e[s+1],vt,n);a[s]=r}catch(r){throw new Error(`failed to parse argument ${s} of case expression: ${r.message}`)}try{const r=ct(e[s+2],i.type,n);a[s+1]=r}catch(r){throw new Error(`failed to parse argument ${s+1} of case expression: ${r.message}`)}}return a[a.length-1]=i,a}function hf(e,t,n){let i=e[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let a;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],a=St}else a=W;const s=new Array(i.length);for(let o=0;o<s.length;o++)try{const l=ct(i[o],a,n);s[o]=l}catch(l){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${l.message}`)}return[ct(e[1],a,n),...s]}function uf(e,t,n){let i;try{i=ct(e[1],W,n)}catch(r){throw new Error(`failed to parse first argument in palette expression: ${r.message}`)}const a=e[2];if(!Array.isArray(a))throw new Error("the second argument of palette must be an array");const s=new Array(a.length);for(let r=0;r<s.length;r++){let o;try{o=ct(a[r],Kt,n)}catch(l){throw new Error(`failed to parse color at index ${r} in palette expression: ${l.message}`)}if(!(o instanceof at))throw new Error(`the palette color at index ${r} must be a literal value`);s[r]=o}return[i,...s]}function D(...e){return function(t,n,i){const a=t[0];let s;for(let r=0;r<e.length;r++){const o=e[r](t,n,i);if(r==e.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new Q0(n,a,...s)}}function cf(e,t,n){const i=e[0],a=tf[i];if(!a)throw new Error(`unknown operator: ${i}`);return a(e,t,n)}function Nh(e){if(!e)return"";const t=e.getType();switch(t){case"Point":case"LineString":case"Polygon":return t;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return Nh(e.getGeometries()[0]);default:return""}}function Dh(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Me(e,t,n){const i=ct(e,t,n);return Zt(i)}function Zt(e,t){if(e instanceof at){if(e.type===Kt&&typeof e.value=="string"){const i=cr(e.value);return function(){return i}}return function(){return e.value}}const n=e.operator;switch(n){case E.Number:case E.String:case E.Coalesce:return _f(e);case E.Get:case E.Var:case E.Has:return ff(e);case E.Id:return i=>i.featureId;case E.GeometryType:return i=>i.geometryType;case E.Concat:{const i=e.args.map(a=>Zt(a));return a=>"".concat(...i.map(s=>s(a).toString()))}case E.Resolution:return i=>i.resolution;case E.Any:case E.All:case E.Between:case E.In:case E.Not:return mf(e);case E.Equal:case E.NotEqual:case E.LessThan:case E.LessThanOrEqualTo:case E.GreaterThan:case E.GreaterThanOrEqualTo:return df(e);case E.Multiply:case E.Divide:case E.Add:case E.Subtract:case E.Clamp:case E.Mod:case E.Pow:case E.Abs:case E.Floor:case E.Ceil:case E.Round:case E.Sin:case E.Cos:case E.Atan:case E.Sqrt:return gf(e);case E.Case:return pf(e);case E.Match:return yf(e);case E.Interpolate:return vf(e);case E.ToString:return bf(e);default:throw new Error(`Unsupported operator ${n}`)}}function _f(e,t){const n=e.operator,i=e.args.length,a=new Array(i);for(let s=0;s<i;++s)a[s]=Zt(e.args[s]);switch(n){case E.Coalesce:return s=>{for(let r=0;r<i;++r){const o=a[r](s);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case E.Number:case E.String:return s=>{for(let r=0;r<i;++r){const o=a[r](s);if(typeof o===n)return o}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function ff(e,t){const i=e.args[0].value;switch(e.operator){case E.Get:return a=>{const s=e.args;let r=a.properties[i];for(let o=1,l=s.length;o<l;++o){const u=s[o].value;r=r[u]}return r};case E.Var:return a=>a.variables[i];case E.Has:return a=>{const s=e.args;if(!(i in a.properties))return!1;let r=a.properties[i];for(let o=1,l=s.length;o<l;++o){const u=s[o].value;if(!r||!Object.hasOwn(r,u))return!1;r=r[u]}return!0};default:throw new Error(`Unsupported accessor operator ${e.operator}`)}}function df(e,t){const n=e.operator,i=Zt(e.args[0]),a=Zt(e.args[1]);switch(n){case E.Equal:return s=>i(s)===a(s);case E.NotEqual:return s=>i(s)!==a(s);case E.LessThan:return s=>i(s)<a(s);case E.LessThanOrEqualTo:return s=>i(s)<=a(s);case E.GreaterThan:return s=>i(s)>a(s);case E.GreaterThanOrEqualTo:return s=>i(s)>=a(s);default:throw new Error(`Unsupported comparison operator ${n}`)}}function mf(e,t){const n=e.operator,i=e.args.length,a=new Array(i);for(let s=0;s<i;++s)a[s]=Zt(e.args[s]);switch(n){case E.Any:return s=>{for(let r=0;r<i;++r)if(a[r](s))return!0;return!1};case E.All:return s=>{for(let r=0;r<i;++r)if(!a[r](s))return!1;return!0};case E.Between:return s=>{const r=a[0](s),o=a[1](s),l=a[2](s);return r>=o&&r<=l};case E.In:return s=>{const r=a[0](s);for(let o=1;o<i;++o)if(r===a[o](s))return!0;return!1};case E.Not:return s=>!a[0](s);default:throw new Error(`Unsupported logical operator ${n}`)}}function gf(e,t){const n=e.operator,i=e.args.length,a=new Array(i);for(let s=0;s<i;++s)a[s]=Zt(e.args[s]);switch(n){case E.Multiply:return s=>{let r=1;for(let o=0;o<i;++o)r*=a[o](s);return r};case E.Divide:return s=>a[0](s)/a[1](s);case E.Add:return s=>{let r=0;for(let o=0;o<i;++o)r+=a[o](s);return r};case E.Subtract:return s=>a[0](s)-a[1](s);case E.Clamp:return s=>{const r=a[0](s),o=a[1](s);if(r<o)return o;const l=a[2](s);return r>l?l:r};case E.Mod:return s=>a[0](s)%a[1](s);case E.Pow:return s=>Math.pow(a[0](s),a[1](s));case E.Abs:return s=>Math.abs(a[0](s));case E.Floor:return s=>Math.floor(a[0](s));case E.Ceil:return s=>Math.ceil(a[0](s));case E.Round:return s=>Math.round(a[0](s));case E.Sin:return s=>Math.sin(a[0](s));case E.Cos:return s=>Math.cos(a[0](s));case E.Atan:return i===2?s=>Math.atan2(a[0](s),a[1](s)):s=>Math.atan(a[0](s));case E.Sqrt:return s=>Math.sqrt(a[0](s));default:throw new Error(`Unsupported numeric operator ${n}`)}}function pf(e,t){const n=e.args.length,i=new Array(n);for(let a=0;a<n;++a)i[a]=Zt(e.args[a]);return a=>{for(let s=0;s<n-1;s+=2)if(i[s](a))return i[s+1](a);return i[n-1](a)}}function yf(e,t){const n=e.args.length,i=new Array(n);for(let a=0;a<n;++a)i[a]=Zt(e.args[a]);return a=>{const s=i[0](a);for(let r=1;r<n;r+=2)if(s===i[r](a))return i[r+1](a);return i[n-1](a)}}function vf(e,t){const n=e.args.length,i=new Array(n);for(let a=0;a<n;++a)i[a]=Zt(e.args[a]);return a=>{const s=i[0](a),r=i[1](a);let o,l;for(let h=2;h<n;h+=2){const u=i[h](a);let c=i[h+1](a);const _=Array.isArray(c);if(_&&(c=U_(c)),u>=r)return h===2?c:_?xf(s,r,o,l,u,c):di(s,r,o,l,u,c);o=u,l=c}return l}}function bf(e,t){const n=e.operator,i=e.args.length,a=new Array(i);for(let s=0;s<i;++s)a[s]=Zt(e.args[s]);switch(n){case E.ToString:return s=>{const r=a[0](s);return e.args[0].type===Kt?_r(r):r.toString()};default:throw new Error(`Unsupported convert operator ${n}`)}}function di(e,t,n,i,a,s){const r=a-n;if(r===0)return i;const o=t-n,l=e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1);return i+l*(s-i)}function xf(e,t,n,i,a,s){if(a-n===0)return i;const o=bo(i),l=bo(s);let h=l[2]-o[2];h>180?h-=360:h<-180&&(h+=360);const u=[di(e,t,n,o[0],a,l[0]),di(e,t,n,o[1],a,l[1]),o[2]+di(e,t,n,0,a,h),di(e,t,n,i[3],a,s[3])];return vh(z_(u))}function Mf(e){return!0}function wf(e){const t=Oh(),n=Ef(e,t),i=Dh();return function(a,s){if(i.properties=a.getPropertiesInternal(),i.resolution=s,t.featureId){const r=a.getId();r!==void 0?i.featureId=r:i.featureId=null}return t.geometryType&&(i.geometryType=Nh(a.getGeometry())),n(i)}}function Vo(e){const t=Oh(),n=e.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Fs(e[r],t);const a=Dh(),s=new Array(n);return function(r,o){if(a.properties=r.getPropertiesInternal(),a.resolution=o,t.featureId){const h=r.getId();h!==void 0?a.featureId=h:a.featureId=null}let l=0;for(let h=0;h<n;++h){const u=i[h](a);u&&(s[l]=u,l+=1)}return s.length=l,s}}function Ef(e,t){const n=e.length,i=new Array(n);for(let a=0;a<n;++a){const s=e[a],r="filter"in s?Me(s.filter,vt,t):Mf;let o;if(Array.isArray(s.style)){const l=s.style.length;o=new Array(l);for(let h=0;h<l;++h)o[h]=Fs(s.style[h],t)}else o=[Fs(s.style,t)];i[a]={filter:r,styles:o}}return function(a){const s=[];let r=!1;for(let o=0;o<n;++o){const l=i[o].filter;if(l(a)&&!(e[o].else&&r)){r=!0;for(const h of i[o].styles){const u=h(a);u&&s.push(u)}}}return s}}function Fs(e,t){const n=Pi(e,"",t),i=Oi(e,"",t),a=Sf(e,t),s=Rf(e,t),r=It(e,"z-index",t);if(!n&&!i&&!a&&!s&&!Dn(e))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(e));const o=new Xt;return function(l){let h=!0;if(n){const u=n(l);u&&(h=!1),o.setFill(u)}if(i){const u=i(l);u&&(h=!1),o.setStroke(u)}if(a){const u=a(l);u&&(h=!1),o.setText(u)}if(s){const u=s(l);u&&(h=!1),o.setImage(u)}return r&&o.setZIndex(r(l)),h?null:o}}function Pi(e,t,n){let i;if(t+"fill-pattern-src"in e)i=Lf(e,t+"fill-",n);else{if(e[t+"fill-color"]==="none")return s=>null;i=pr(e,t+"fill-color",n)}if(!i)return null;const a=new Ut;return function(s){const r=i(s);return r===ur?null:(a.setColor(r),a)}}function Oi(e,t,n){const i=It(e,t+"stroke-width",n),a=pr(e,t+"stroke-color",n);if(!i&&!a)return null;const s=me(e,t+"stroke-line-cap",n),r=me(e,t+"stroke-line-join",n),o=Fh(e,t+"stroke-line-dash",n),l=It(e,t+"stroke-line-dash-offset",n),h=It(e,t+"stroke-miter-limit",n),u=new Ht;return function(c){if(a){const _=a(c);if(_===ur)return null;u.setColor(_)}if(i&&u.setWidth(i(c)),s){const _=s(c);if(_!=="butt"&&_!=="round"&&_!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(_)}if(r){const _=r(c);if(_!=="bevel"&&_!=="round"&&_!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(_)}return o&&u.setLineDash(o(c)),l&&u.setLineDashOffset(l(c)),h&&u.setMiterLimit(h(c)),u}}function Sf(e,t){const n="text-",i=me(e,n+"value",t);if(!i)return null;const a=Pi(e,n,t),s=Pi(e,n+"background-",t),r=Oi(e,n,t),o=Oi(e,n+"background-",t),l=me(e,n+"font",t),h=It(e,n+"max-angle",t),u=It(e,n+"offset-x",t),c=It(e,n+"offset-y",t),_=Tn(e,n+"overflow",t),f=me(e,n+"placement",t),d=It(e,n+"repeat",t),m=$a(e,n+"scale",t),g=Tn(e,n+"rotate-with-view",t),p=It(e,n+"rotation",t),y=me(e,n+"align",t),b=me(e,n+"justify",t),v=me(e,n+"baseline",t),x=Tn(e,n+"keep-upright",t),M=Fh(e,n+"padding",t),R=Ya(e,n+"declutter-mode"),w=new Qe({declutterMode:R});return function(I){if(w.setText(i(I)),a&&w.setFill(a(I)),s&&w.setBackgroundFill(s(I)),r&&w.setStroke(r(I)),o&&w.setBackgroundStroke(o(I)),l&&w.setFont(l(I)),h&&w.setMaxAngle(h(I)),u&&w.setOffsetX(u(I)),c&&w.setOffsetY(c(I)),_&&w.setOverflow(_(I)),f){const k=f(I);if(k!=="point"&&k!=="line")throw new Error("Expected point or line for text-placement");w.setPlacement(k)}if(d&&w.setRepeat(d(I)),m&&w.setScale(m(I)),g&&w.setRotateWithView(g(I)),p&&w.setRotation(p(I)),y){const k=y(I);if(k!=="left"&&k!=="center"&&k!=="right"&&k!=="end"&&k!=="start")throw new Error("Expected left, right, center, start, or end for text-align");w.setTextAlign(k)}if(b){const k=b(I);if(k!=="left"&&k!=="right"&&k!=="center")throw new Error("Expected left, right, or center for text-justify");w.setJustify(k)}if(v){const k=v(I);if(k!=="bottom"&&k!=="top"&&k!=="middle"&&k!=="alphabetic"&&k!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");w.setTextBaseline(k)}return M&&w.setPadding(M(I)),x&&w.setKeepUpright(x(I)),w}}function Rf(e,t){return"icon-src"in e?If(e,t):"shape-points"in e?Af(e,t):"circle-radius"in e?Cf(e,t):null}function If(e,t){const n="icon-",i=n+"src",a=Gh(e[i],i),s=Pa(e,n+"anchor",t),r=$a(e,n+"scale",t),o=It(e,n+"opacity",t),l=Pa(e,n+"displacement",t),h=It(e,n+"rotation",t),u=Tn(e,n+"rotate-with-view",t),c=Ho(e,n+"anchor-origin"),_=Wo(e,n+"anchor-x-units"),f=Wo(e,n+"anchor-y-units"),d=Of(e,n+"color"),m=Tf(e,n+"cross-origin"),g=Pf(e,n+"offset"),p=Ho(e,n+"offset-origin"),y=Oa(e,n+"width"),b=Oa(e,n+"height"),v=kf(e,n+"size"),x=Ya(e,n+"declutter-mode"),M=new Xa({src:a,anchorOrigin:c,anchorXUnits:_,anchorYUnits:f,color:d,crossOrigin:m,offset:g,offsetOrigin:p,height:b,width:y,size:v,declutterMode:x});return function(R){return o&&M.setOpacity(o(R)),l&&M.setDisplacement(l(R)),h&&M.setRotation(h(R)),u&&M.setRotateWithView(u(R)),r&&M.setScale(r(R)),s&&M.setAnchor(s(R)),M}}function Af(e,t){const n="shape-",i=n+"points",a=n+"radius",s=Gs(e[i],i),r=Gs(e[a],a),o=Pi(e,n,t),l=Oi(e,n,t),h=$a(e,n+"scale",t),u=Pa(e,n+"displacement",t),c=It(e,n+"rotation",t),_=Tn(e,n+"rotate-with-view",t),f=Oa(e,n+"radius2"),d=Oa(e,n+"angle"),m=Ya(e,n+"declutter-mode"),g=new qa({points:s,radius:r,radius2:f,angle:d,declutterMode:m});return function(p){return o&&g.setFill(o(p)),l&&g.setStroke(l(p)),u&&g.setDisplacement(u(p)),c&&g.setRotation(c(p)),_&&g.setRotateWithView(_(p)),h&&g.setScale(h(p)),g}}function Cf(e,t){const n="circle-",i=Pi(e,n,t),a=Oi(e,n,t),s=It(e,n+"radius",t),r=$a(e,n+"scale",t),o=Pa(e,n+"displacement",t),l=It(e,n+"rotation",t),h=Tn(e,n+"rotate-with-view",t),u=Ya(e,n+"declutter-mode"),c=new Ka({radius:5,declutterMode:u});return function(_){return s&&c.setRadius(s(_)),i&&c.setFill(i(_)),a&&c.setStroke(a(_)),o&&c.setDisplacement(o(_)),l&&c.setRotation(l(_)),h&&c.setRotateWithView(h(_)),r&&c.setScale(r(_)),c}}function It(e,t,n){if(!(t in e))return;const i=Me(e[t],W,n);return function(a){return Gs(i(a),t)}}function me(e,t,n){if(!(t in e))return null;const i=Me(e[t],St,n);return function(a){return Gh(i(a),t)}}function Lf(e,t,n){const i=me(e,t+"pattern-src",n),a=jo(e,t+"pattern-offset",n),s=jo(e,t+"pattern-size",n),r=pr(e,t+"color",n);return function(o){return{src:i(o),offset:a&&a(o),size:s&&s(o),color:r&&r(o)}}}function Tn(e,t,n){if(!(t in e))return null;const i=Me(e[t],vt,n);return function(a){const s=i(a);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${t}`);return s}}function pr(e,t,n){if(!(t in e))return null;const i=Me(e[t],Kt,n);return function(a){return Bh(i(a),t)}}function Fh(e,t,n){if(!(t in e))return null;const i=Me(e[t],on,n);return function(a){return Hi(i(a),t)}}function Pa(e,t,n){if(!(t in e))return null;const i=Me(e[t],on,n);return function(a){const s=Hi(i(a),t);if(s.length!==2)throw new Error(`Expected two numbers for ${t}`);return s}}function jo(e,t,n){if(!(t in e))return null;const i=Me(e[t],on,n);return function(a){return Uh(i(a),t)}}function $a(e,t,n){if(!(t in e))return null;const i=Me(e[t],on|W,n);return function(a){return Nf(i(a),t)}}function Oa(e,t){const n=e[t];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${t}`);return n}}function kf(e,t){const n=e[t];if(n!==void 0){if(typeof n=="number")return jn(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${t}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return n}}function Tf(e,t){const n=e[t];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);return n}}function Ho(e,t){const n=e[t];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return n}}function Wo(e,t){const n=e[t];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return n}}function Pf(e,t){const n=e[t];if(n!==void 0)return Hi(n,t)}function Ya(e,t){const n=e[t];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return n}}function Of(e,t){const n=e[t];if(n!==void 0)return Bh(n,t)}function Hi(e,t){if(!Array.isArray(e))throw new Error(`Expected an array for ${t}`);const n=e.length;for(let i=0;i<n;++i)if(typeof e[i]!="number")throw new Error(`Expected an array of numbers for ${t}`);return e}function Gh(e,t){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}function Gs(e,t){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}function Bh(e,t){if(typeof e=="string")return e;const n=Hi(e,t),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return n}function Uh(e,t){const n=Hi(e,t);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return n}function Nf(e,t){return typeof e=="number"?e:Uh(e,t)}const jt={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function qo(e,t,n){return function(i,a,s,r,o){if(!i)return;if(!a&&!t)return i;const l=t?0:s[0]*a,h=t?0:s[1]*a,u=o?o[0]:0,c=o?o[1]:0;let _=e[0]+l/2+u,f=e[2]-l/2+u,d=e[1]+h/2+c,m=e[3]-h/2+c;_>f&&(_=(f+_)/2,f=_),d>m&&(d=(m+d)/2,m=d);let g=mt(i[0],_,f),p=mt(i[1],d,m);if(r&&n&&a){const y=30*a;g+=-y*Math.log(1+Math.max(0,_-i[0])/y)+y*Math.log(1+Math.max(0,i[0]-f)/y),p+=-y*Math.log(1+Math.max(0,d-i[1])/y)+y*Math.log(1+Math.max(0,i[1]-m)/y)}return[g,p]}}function Df(e){return e}function yr(e,t,n,i){const a=Rt(t)/n[0],s=xe(t)/n[1];return i?Math.min(e,Math.max(a,s)):Math.min(e,Math.min(a,s))}function vr(e,t,n){let i=Math.min(e,t);const a=50;return i*=Math.log(1+a*Math.max(0,e/t-1))/a+1,n&&(i=Math.max(i,n),i/=Math.log(1+a*Math.max(0,n/e-1))/a+1),mt(i,n/2,t*2)}function Ff(e,t,n,i){return t=t!==void 0?t:!0,function(a,s,r,o){if(a!==void 0){const l=e[0],h=e[e.length-1],u=n?yr(l,n,r,i):l;if(o)return t?vr(a,u,h):mt(a,h,u);const c=Math.min(u,a),_=Math.floor(zl(e,c,s));return e[_]>u&&_<e.length-1?e[_+1]:e[_]}}}function Gf(e,t,n,i,a,s){return i=i!==void 0?i:!0,n=n!==void 0?n:0,function(r,o,l,h){if(r!==void 0){const u=a?yr(t,a,l,s):t;if(h)return i?vr(r,u,n):mt(r,n,u);const c=1e-9,_=Math.ceil(Math.log(t/u)/Math.log(e)-c),f=-o*(.5-c)+.5,d=Math.min(u,r),m=Math.floor(Math.log(t/d)/Math.log(e)+f),g=Math.max(_,m),p=t/Math.pow(e,g);return mt(p,n,u)}}}function Ko(e,t,n,i,a){return n=n!==void 0?n:!0,function(s,r,o,l){if(s!==void 0){const h=i?yr(e,i,o,a):e;return!n||!l?mt(s,t,h):vr(s,h,t)}}}function Bf(e){if(e!==void 0)return 0}function Xo(e){if(e!==void 0)return e}function Uf(e){const t=2*Math.PI/e;return function(n,i){if(i)return n;if(n!==void 0)return n=Math.floor(n/t+.5)*t,n}}function zf(e){const t=yi(5);return function(n,i){return i||n===void 0?n:Math.abs(n)<=t?0:n}}const Vf=256,vs=0;class $o extends Ge{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=rr(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&r_(),t.center&&(t.center=Ee(t.center,this.projection_)),t.extent&&(t.extent=li(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const n=Object.assign({},t);for(const o in jt)delete n[o];this.setProperties(n,!0);const i=Hf(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const a=jf(t),s=i.constraint,r=Wf(t);this.constraints_={center:a,resolution:s,rotation:r},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let n=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const a=t||[0,0,0,0];n=n||[0,0,0,0];const s=this.getResolution(),r=s/2*(a[3]-n[3]+n[1]-a[1]),o=s/2*(a[0]-n[0]+n[2]-a[2]);this.setCenterInternal([i[0]+r,i[1]-o])}}getUpdatedOptions_(t){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let i=0;i<n.length;++i){let a=arguments[i];a.center&&(a=Object.assign({},a),a.center=Ee(a.center,this.getProjection())),a.anchor&&(a=Object.assign({},a),a.anchor=Ee(a.anchor,this.getProjection())),n[i]=a}this.animateInternal.apply(this,n)}animateInternal(t){let n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);let a=0;for(;a<n&&!this.isDef();++a){const u=arguments[a];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(a===n){i&&la(i,!0);return}let s=Date.now(),r=this.targetCenter_.slice(),o=this.targetResolution_,l=this.targetRotation_;const h=[];for(;a<n;++a){const u=arguments[a],c={start:s,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||oc,callback:i};if(u.center&&(c.sourceCenter=r,c.targetCenter=u.center.slice(),r=c.targetCenter),u.zoom!==void 0?(c.sourceResolution=o,c.targetResolution=this.getResolutionForZoom(u.zoom),o=c.targetResolution):u.resolution&&(c.sourceResolution=o,c.targetResolution=u.resolution,o=c.targetResolution),u.rotation!==void 0){c.sourceRotation=l;const _=eo(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=l+_,l=c.targetRotation}qf(c)?c.complete=!0:s+=c.duration,h.push(c)}this.animations_.push(h),this.setHint(Bt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Bt.ANIMATING]>0}getInteracting(){return this.hints_[Bt.INTERACTING]>0}cancelAnimations(){this.setHint(Bt.ANIMATING,-this.hints_[Bt.ANIMATING]);let t;for(let n=0,i=this.animations_.length;n<i;++n){const a=this.animations_[n];if(a[0].callback&&la(a[0].callback,!1),!t)for(let s=0,r=a.length;s<r;++s){const o=a[s];if(!o.complete){t=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let n=!1;for(let i=this.animations_.length-1;i>=0;--i){const a=this.animations_[i];let s=!0;for(let r=0,o=a.length;r<o;++r){const l=a[r];if(l.complete)continue;const h=t-l.start;let u=l.duration>0?h/l.duration:1;u>=1?(l.complete=!0,u=1):s=!1;const c=l.easing(u);if(l.sourceCenter){const _=l.sourceCenter[0],f=l.sourceCenter[1],d=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const g=_+c*(d-_),p=f+c*(m-f);this.targetCenter_=[g,p]}if(l.sourceResolution&&l.targetResolution){const _=c===1?l.targetResolution:l.sourceResolution+c*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),d=this.constraints_.resolution(_,0,f,!0);this.targetCenter_=this.calculateCenterZoom(d,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=_,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const _=c===1?eo(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+c*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(_,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=_}if(this.applyTargetState_(!0),n=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(Bt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const r=a[0].callback;r&&la(r,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,n){let i;const a=this.getCenterInternal();return a!==void 0&&(i=[a[0]-n[0],a[1]-n[1]],Tc(i,t-this.getRotation()),kc(i,n)),i}calculateCenterZoom(t,n){let i;const a=this.getCenterInternal(),s=this.getResolution();if(a!==void 0&&s!==void 0){const r=n[0]-t*(n[0]-a[0])/s,o=n[1]-t*(n[1]-a[1])/s;i=[r,o]}return i}getViewportSize_(t){const n=this.viewportSize_;if(t){const i=n[0],a=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(a*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(a*Math.cos(t))]}return n}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&uo(t,this.getProjection())}getCenterInternal(){return this.get(jt.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const n=this.calculateExtentInternal(t);return lh(n,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();ht(n,"The view center is not defined");const i=this.getResolution();ht(i!==void 0,"The view resolution is not defined");const a=this.getRotation();return ht(a!==void 0,"The view rotation is not defined"),wc(n,i,a,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(jt.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,n){return this.getResolutionForExtentInternal(li(t,this.getProjection()),n)}getResolutionForExtentInternal(t,n){n=n||this.getViewportSizeMinusPadding_();const i=Rt(t)/n[0],a=xe(t)/n[1];return Math.max(i,a)}getResolutionForValueFunction(t){t=t||2;const n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,a=Math.log(n/i)/Math.log(t);return function(s){return n/Math.pow(t,s*a)}}getRotation(){return this.get(jt.ROTATION)}getValueForResolutionFunction(t){const n=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,s=Math.log(i/a)/n;return function(r){return Math.log(i/r)/n/s}}getViewportSizeMinusPadding_(t){let n=this.getViewportSize_(t);const i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n}getState(){const t=this.getProjection(),n=this.getResolution(),i=this.getRotation();let a=this.getCenterInternal();const s=this.padding_;if(s){const r=this.getViewportSizeMinusPadding_();a=bs(a,this.getViewportSize_(),[r[0]/2+s[3],r[1]/2+s[0]],n,i)}return{center:a.slice(0),projection:t!==void 0?t:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const n=this.getResolution();return n!==void 0&&(t=this.getZoomForResolution(n)),t}getZoomForResolution(t){let n=this.minZoom_||0,i,a;if(this.resolutions_){const s=zl(this.resolutions_,t,1);n=s,i=this.resolutions_[s],s==this.resolutions_.length-1?a=2:a=i/this.resolutions_[s+1]}else i=this.maxResolution_,a=this.zoomFactor_;return n+Math.log(i/t)/Math.log(a)}getResolutionForZoom(t){var n;if((n=this.resolutions_)!=null&&n.length){if(this.resolutions_.length===1)return this.resolutions_[0];const i=mt(Math.floor(t),0,this.resolutions_.length-2),a=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(a,mt(t-i,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,n){let i;if(ht(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){ht(!nr(t),"Cannot fit empty extent provided as `geometry`");const a=li(t,this.getProjection());i=Io(a)}else if(t.getType()==="Circle"){const a=li(t.getExtent(),this.getProjection());i=Io(a),i.rotate(this.getRotation(),Fn(a))}else i=t;this.fitInternal(i,n)}rotatedExtentForGeometry(t){const n=this.getRotation(),i=Math.cos(n),a=Math.sin(-n),s=t.getFlatCoordinates(),r=t.getStride();let o=1/0,l=1/0,h=-1/0,u=-1/0;for(let c=0,_=s.length;c<_;c+=r){const f=s[c]*i-s[c+1]*a,d=s[c]*a+s[c+1]*i;o=Math.min(o,f),l=Math.min(l,d),h=Math.max(h,f),u=Math.max(u,d)}return[o,l,h,u]}fitInternal(t,n){n=n||{};let i=n.size;i||(i=this.getViewportSizeMinusPadding_());const a=n.padding!==void 0?n.padding:[0,0,0,0],s=n.nearest!==void 0?n.nearest:!1;let r;n.minResolution!==void 0?r=n.minResolution:n.maxZoom!==void 0?r=this.getResolutionForZoom(n.maxZoom):r=0;const o=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(o,[i[0]-a[1]-a[3],i[1]-a[0]-a[2]]);l=isNaN(l)?r:Math.max(l,r),l=this.getConstrainedResolution(l,s?0:1);const h=this.getRotation(),u=Math.sin(h),c=Math.cos(h),_=Fn(o);_[0]+=(a[1]-a[3])/2*l,_[1]+=(a[0]-a[2])/2*l;const f=_[0]*c-_[1]*u,d=_[1]*c+_[0]*u,m=this.getConstrainedCenter([f,d],l),g=n.callback?n.callback:Si;n.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:n.duration,easing:n.easing},g):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),la(g,!0))}centerOn(t,n,i){this.centerOnInternal(Ee(t,this.getProjection()),n,i)}centerOnInternal(t,n,i){this.setCenterInternal(bs(t,n,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,n,i,a){let s;const r=this.padding_;if(r&&t){const o=this.getViewportSizeMinusPadding_(-i),l=bs(t,a,[o[0]/2+r[3],o[1]/2+r[0]],n,i);s=[t[0]-l[0],t[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const n=uo(this.targetCenter_,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])}adjustCenterInternal(t){const n=this.targetCenter_;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])}adjustResolution(t,n){n=n&&Ee(n,this.getProjection()),this.adjustResolutionInternal(t,n)}adjustResolutionInternal(t,n){const i=this.getAnimating()||this.getInteracting(),a=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,a,i);n&&(this.targetCenter_=this.calculateCenterZoom(s,n)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,n){this.adjustResolution(Math.pow(this.zoomFactor_,-t),n)}adjustRotation(t,n){n&&(n=Ee(n,this.getProjection())),this.adjustRotationInternal(t,n)}adjustRotationInternal(t,n){const i=this.getAnimating()||this.getInteracting(),a=this.constraints_.rotation(this.targetRotation_+t,i);n&&(this.targetCenter_=this.calculateCenterRotate(a,n)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&Ee(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,n){return this.hints_[t]+=n,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,n){const i=this.getAnimating()||this.getInteracting()||n,a=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(a),r=this.constraints_.resolution(this.targetResolution_,0,s,i),o=this.constraints_.center(this.targetCenter_,r,s,i,this.calculateCenterShift(this.targetCenter_,r,a,s));this.get(jt.ROTATION)!==a&&this.set(jt.ROTATION,a),this.get(jt.RESOLUTION)!==r&&(this.set(jt.RESOLUTION,r),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(jt.CENTER)||!Sa(this.get(jt.CENTER),o))&&this.set(jt.CENTER,o),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,n,i){t=t!==void 0?t:200;const a=n||0,s=this.constraints_.rotation(this.targetRotation_),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,a,r),l=this.constraints_.center(this.targetCenter_,o,r,!1,this.calculateCenterShift(this.targetCenter_,o,s,r));if(t===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!Sa(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:o,duration:t,easing:lc,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Bt.INTERACTING,1)}endInteraction(t,n,i){i=i&&Ee(i,this.getProjection()),this.endInteractionInternal(t,n,i)}endInteractionInternal(t,n,i){this.getInteracting()&&(this.setHint(Bt.INTERACTING,-1),this.resolveConstraints(t,n,i))}getConstrainedCenter(t,n){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,n||this.getResolution(),i)}getConstrainedZoom(t,n){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n))}getConstrainedResolution(t,n){n=n||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,i)}}function la(e,t){setTimeout(function(){e(t)},0)}function jf(e){if(e.extent!==void 0){const n=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return qo(e.extent,e.constrainOnlyCenter,n)}const t=rr(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&t.isGlobal()){const n=t.getExtent().slice();return n[0]=-1/0,n[2]=1/0,qo(n,!1,!1)}return Df}function Hf(e){let t,n,i,r=e.minZoom!==void 0?e.minZoom:vs,o=e.maxZoom!==void 0?e.maxZoom:28;const l=e.zoomFactor!==void 0?e.zoomFactor:2,h=e.multiWorld!==void 0?e.multiWorld:!1,u=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,c=e.showFullExtent!==void 0?e.showFullExtent:!1,_=rr(e.projection,"EPSG:3857"),f=_.getExtent();let d=e.constrainOnlyCenter,m=e.extent;if(!h&&!m&&_.isGlobal()&&(d=!1,m=f),e.resolutions!==void 0){const g=e.resolutions;n=g[r],i=g[o]!==void 0?g[o]:g[g.length-1],e.constrainResolution?t=Ff(g,u,!d&&m,c):t=Ko(n,i,u,!d&&m,c)}else{const p=(f?Math.max(Rt(f),xe(f)):360*eh.degrees/_.getMetersPerUnit())/Vf/Math.pow(2,vs),y=p/Math.pow(2,28-vs);n=e.maxResolution,n!==void 0?r=0:n=p/Math.pow(l,r),i=e.minResolution,i===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?i=n/Math.pow(l,o):i=p/Math.pow(l,o):i=y),o=r+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,o-r),e.constrainResolution?t=Gf(l,n,i,u,!d&&m,c):t=Ko(n,i,u,!d&&m,c)}return{constraint:t,maxResolution:n,minResolution:i,minZoom:r,zoomFactor:l}}function Wf(e){if(e.enableRotation!==void 0?e.enableRotation:!0){const n=e.constrainRotation;return n===void 0||n===!0?zf():n===!1?Xo:typeof n=="number"?Uf(n):Xo}return Bf}function qf(e){return!(e.sourceCenter&&e.targetCenter&&!Sa(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function bs(e,t,n,i,a){const s=Math.cos(-a);let r=Math.sin(-a),o=e[0]*s-e[1]*r,l=e[1]*s+e[0]*r;o+=(t[0]/2-n[0])*i,l+=(n[1]-t[1]/2)*i,r=-r;const h=o*s-l*r,u=l*s+o*r;return[h,u]}const Z={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Kf extends Ge{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const n=Object.assign({},t);typeof t.properties=="object"&&(delete n.properties,Object.assign(n,t.properties)),n[Z.OPACITY]=t.opacity!==void 0?t.opacity:1,ht(typeof n[Z.OPACITY]=="number","Layer opacity must be a number"),n[Z.VISIBLE]=t.visible!==void 0?t.visible:!0,n[Z.Z_INDEX]=t.zIndex,n[Z.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,n[Z.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,n[Z.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,n[Z.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const n=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return n.opacity=mt(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(t){return J()}getLayerStatesArray(t){return J()}getExtent(){return this.get(Z.EXTENT)}getMaxResolution(){return this.get(Z.MAX_RESOLUTION)}getMinResolution(){return this.get(Z.MIN_RESOLUTION)}getMinZoom(){return this.get(Z.MIN_ZOOM)}getMaxZoom(){return this.get(Z.MAX_ZOOM)}getOpacity(){return this.get(Z.OPACITY)}getSourceState(){return J()}getVisible(){return this.get(Z.VISIBLE)}getZIndex(){return this.get(Z.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Z.EXTENT,t)}setMaxResolution(t){this.set(Z.MAX_RESOLUTION,t)}setMinResolution(t){this.set(Z.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(Z.MAX_ZOOM,t)}setMinZoom(t){this.set(Z.MIN_ZOOM,t)}setOpacity(t){ht(typeof t=="number","Layer opacity must be a number"),this.set(Z.OPACITY,t)}setVisible(t){this.set(Z.VISIBLE,t)}setZIndex(t){this.set(Z.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Xf extends Kf{constructor(t){const n=Object.assign({},t);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Z.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(Z.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(ke(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=ge(t,$t.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0)),this.clearRenderer()),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let n;const i=this.getMapInternal();!t&&i&&(t=i.getView()),t instanceof $o?n={viewState:t.getState(),extent:t.calculateExtent()}:n=t,!n.layerStatesArray&&i&&(n.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let a;if(n.layerStatesArray){if(a=n.layerStatesArray.find(r=>r.layer===this),!a)return!1}else a=this.getLayerState();const s=this.getExtent();return $f(a,n.viewState)&&(!s||qt(s,n.extent))}getAttributions(t){var s;if(!this.isVisible(t))return[];const n=(s=this.getSource())==null?void 0:s.getAttributions();if(!n)return[];const i=t instanceof $o?t.getViewStateAndExtent():t;let a=n(i);return Array.isArray(a)||(a=[a]),a}render(t,n){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,n)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,n){}renderDeferred(t){const n=this.getRenderer();n&&n.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(Z.MAP,t)}getMapInternal(){return this.get(Z.MAP)}setMap(t){this.mapPrecomposeKey_&&(ke(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(ke(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=ge(t,Ze.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=ge(this,$t.CHANGE,t.render,t),this.changed())}handlePrecompose_(t){const n=t.frameState.layerStatesArray,i=this.getLayerState(!1);ht(!n.some(a=>a.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),n.push(i)}setSource(t){this.set(Z.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function $f(e,t){if(!e.visible)return!1;const n=t.resolution;if(n<e.minResolution||n>=e.maxResolution)return!1;const i=t.zoom;return i>e.minZoom&&i<=e.maxZoom}const Yo={RENDER_ORDER:"renderOrder"};class Yf extends Xf{constructor(t){t=t||{};const n=Object.assign({},t);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Yo.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,n){const i=this.getDeclutter();i in t.declutter||(t.declutter[i]=new Lh(9)),this.getRenderer().renderDeclutter(t,n)}setRenderOrder(t){this.set(Yo.RENDER_ORDER,t)}setStyle(t){this.style_=t===void 0?kh:t;const n=Zf(t);this.styleFunction_=t===null?void 0:A0(n),this.changed()}setDeclutter(t){this.declutter_=t?String(t):void 0,this.changed()}}function Zf(e){if(e===void 0)return kh;if(!e)return null;if(typeof e=="function"||e instanceof Xt)return e;if(!Array.isArray(e))return Vo([e]);if(e.length===0)return[];const t=e.length,n=e[0];if(n instanceof Xt){const a=new Array(t);for(let s=0;s<t;++s){const r=e[s];if(!(r instanceof Xt))throw new Error("Expected a list of style instances");a[s]=r}return a}if("style"in n){const a=new Array(t);for(let s=0;s<t;++s){const r=e[s];if(!("style"in r))throw new Error("Expected a list of rules with a style property");a[s]=r}return wf(a)}return Vo(e)}class Jf extends Yf{constructor(t){super(t)}createRenderer(){return new Y0(this)}}function _t(e){return(t,...n)=>Qf(e,t,n)}function Xn(e,t){return _t(zh(e,t).get)}const{apply:Qf,getOwnPropertyDescriptor:zh,getPrototypeOf:br,ownKeys:td}=Reflect,{iterator:Wi,toStringTag:ed}=Symbol,nd=Object,{create:xr,defineProperty:id}=nd,ad=Array,sd=ad.prototype,Vh=sd[Wi],rd=_t(Vh),jh=ArrayBuffer,od=jh.prototype;Xn(od,"byteLength");const Zo=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;Zo&&Xn(Zo.prototype,"byteLength");const Hh=br(Uint8Array);Hh.from;const Mt=Hh.prototype;Mt[Wi];_t(Mt.keys);_t(Mt.values);_t(Mt.entries);_t(Mt.set);_t(Mt.reverse);_t(Mt.fill);_t(Mt.copyWithin);_t(Mt.sort);_t(Mt.slice);_t(Mt.subarray);Xn(Mt,"buffer");Xn(Mt,"byteOffset");Xn(Mt,"length");Xn(Mt,ed);const ld=Uint8Array,Wh=Uint16Array,Mr=Uint32Array,hd=Float32Array,Ni=br([][Wi]()),qh=_t(Ni.next),ud=_t(function*(){}().next),cd=br(Ni),_d=DataView.prototype,fd=_t(_d.getUint16),wr=WeakMap,Kh=wr.prototype,Xh=_t(Kh.get),dd=_t(Kh.set),$h=new wr,md=xr(null,{next:{value:function(){const t=Xh($h,this);return qh(t)}},[Wi]:{value:function(){return this}}});function gd(e){if(e[Wi]===Vh&&Ni.next===qh)return e;const t=xr(md);return dd($h,t,rd(e)),t}const pd=new wr,yd=xr(cd,{next:{value:function(){const t=Xh(pd,this);return ud(t)},writable:!0,configurable:!0}});for(const e of td(Ni))e!=="next"&&id(yd,e,zh(Ni,e));const Yh=new jh(4),vd=new hd(Yh),bd=new Mr(Yh),te=new Wh(512),ee=new ld(512);for(let e=0;e<256;++e){const t=e-127;t<-24?(te[e]=0,te[e|256]=32768,ee[e]=24,ee[e|256]=24):t<-14?(te[e]=1024>>-t-14,te[e|256]=1024>>-t-14|32768,ee[e]=-t-1,ee[e|256]=-t-1):t<=15?(te[e]=t+15<<10,te[e|256]=t+15<<10|32768,ee[e]=13,ee[e|256]=13):t<128?(te[e]=31744,te[e|256]=64512,ee[e]=24,ee[e|256]=24):(te[e]=31744,te[e|256]=64512,ee[e]=13,ee[e|256]=13)}const Er=new Mr(2048);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;!(t&8388608);)t<<=1,n-=8388608;t&=-8388609,n+=947912704,Er[e]=t|n}for(let e=1024;e<2048;++e)Er[e]=939524096+(e-1024<<13);const $n=new Mr(64);for(let e=1;e<31;++e)$n[e]=e<<23;$n[31]=1199570944;$n[32]=2147483648;for(let e=33;e<63;++e)$n[e]=2147483648+(e-32<<23);$n[63]=3347054592;const Zh=new Wh(64);for(let e=1;e<64;++e)e!==32&&(Zh[e]=1024);function xd(e){const t=e>>10;return bd[0]=Er[Zh[t]+(e&1023)]+$n[t],vd[0]}function Jh(e,t,...n){return xd(fd(e,t,...gd(n)))}function Qh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ha={exports:{}},Jo;function Md(){if(Jo)return ha.exports;Jo=1;function e(t,n,i){const a=i&&i.debug||!1;a&&console.log("[xml-utils] getting "+n+" in "+t);const s=typeof t=="object"?t.outer:t,r=s.slice(0,s.indexOf(">")+1),o=['"',"'"];for(let l=0;l<o.length;l++){const h=o[l],u=n+"\\="+h+"([^"+h+"]*)"+h;a&&console.log("[xml-utils] pattern:",u);const _=new RegExp(u).exec(r);if(a&&console.log("[xml-utils] match:",_),_)return _[1]}}return ha.exports=e,ha.exports.default=e,ha.exports}var wd=Md();const xs=Qh(wd);var ua={exports:{}},ca={exports:{}},_a={exports:{}},Qo;function Ed(){if(Qo)return _a.exports;Qo=1;function e(t,n,i){const s=new RegExp(n).exec(t.slice(i));return s?i+s.index:-1}return _a.exports=e,_a.exports.default=e,_a.exports}var fa={exports:{}},tl;function Sd(){if(tl)return fa.exports;tl=1;function e(t,n,i){const s=new RegExp(n).exec(t.slice(i));return s?i+s.index+s[0].length-1:-1}return fa.exports=e,fa.exports.default=e,fa.exports}var da={exports:{}},el;function Rd(){if(el)return da.exports;el=1;function e(t,n){const i=new RegExp(n,"g"),a=t.match(i);return a?a.length:0}return da.exports=e,da.exports.default=e,da.exports}var nl;function Id(){if(nl)return ca.exports;nl=1;const e=Ed(),t=Sd(),n=Rd();function i(a,s,r){const o=r&&r.debug||!1,l=!(r&&typeof r.nested===!1),h=r&&r.startIndex||0;o&&console.log("[xml-utils] starting findTagByName with",s," and ",r);const u=e(a,`<${s}[ 
>/]`,h);if(o&&console.log("[xml-utils] start:",u),u===-1)return;const c=a.slice(u+s.length);let _=t(c,"^[^<]*[ /]>",0);const f=_!==-1&&c[_-1]==="/";if(o&&console.log("[xml-utils] selfClosing:",f),f===!1)if(l){let p=0,y=1,b=0;for(;(_=t(c,"[ /]"+s+">",p))!==-1;){const v=c.substring(p,_+1);if(y+=n(v,"<"+s+`[ 
	>]`),b+=n(v,"</"+s+">"),b>=y)break;p=_}}else _=t(c,"[ /]"+s+">",0);const d=u+s.length+_+1;if(o&&console.log("[xml-utils] end:",d),d===-1)return;const m=a.slice(u,d);let g;return f?g=null:g=m.slice(m.indexOf(">")+1,m.lastIndexOf("<")),{inner:g,outer:m,start:u,end:d}}return ca.exports=i,ca.exports.default=i,ca.exports}var il;function Ad(){if(il)return ua.exports;il=1;const e=Id();function t(n,i,a){const s=[],r=a&&a.debug||!1,o=a&&typeof a.nested=="boolean"?a.nested:!0;let l=a&&a.startIndex||0,h;for(;h=e(n,i,{debug:r,startIndex:l});)o?l=h.start+1+i.length:l=h.end,s.push(h);return r&&console.log("findTagsByName found",s.length,"tags"),s}return ua.exports=t,ua.exports.default=t,ua.exports}var Cd=Ad();const Ld=Qh(Cd),vi={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},ie={};for(const e in vi)vi.hasOwnProperty(e)&&(ie[vi[e]]=parseInt(e,10));const kd=[ie.BitsPerSample,ie.ExtraSamples,ie.SampleFormat,ie.StripByteCounts,ie.StripOffsets,ie.StripRowCounts,ie.TileByteCounts,ie.TileOffsets,ie.SubIFDs],Ms={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},V={};for(const e in Ms)Ms.hasOwnProperty(e)&&(V[Ms[e]]=parseInt(e,10));const kt={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,CMYK:5,YCbCr:6,CIELab:8},Td={Unspecified:0},R4={AddCompression:1},I4={None:0,Deflate:1,Zstandard:2},Pd={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function Od(e,t){const{width:n,height:i}=e,a=new Uint8Array(n*i*3);let s;for(let r=0,o=0;r<e.length;++r,o+=3)s=256-e[r]/t*256,a[o]=s,a[o+1]=s,a[o+2]=s;return a}function Nd(e,t){const{width:n,height:i}=e,a=new Uint8Array(n*i*3);let s;for(let r=0,o=0;r<e.length;++r,o+=3)s=e[r]/t*256,a[o]=s,a[o+1]=s,a[o+2]=s;return a}function Dd(e,t){const{width:n,height:i}=e,a=new Uint8Array(n*i*3),s=t.length/3,r=t.length/3*2;for(let o=0,l=0;o<e.length;++o,l+=3){const h=e[o];a[l]=t[h]/65536*256,a[l+1]=t[h+s]/65536*256,a[l+2]=t[h+r]/65536*256}return a}function Fd(e){const{width:t,height:n}=e,i=new Uint8Array(t*n*3);for(let a=0,s=0;a<e.length;a+=4,s+=3){const r=e[a],o=e[a+1],l=e[a+2],h=e[a+3];i[s]=255*((255-r)/256)*((255-h)/256),i[s+1]=255*((255-o)/256)*((255-h)/256),i[s+2]=255*((255-l)/256)*((255-h)/256)}return i}function Gd(e){const{width:t,height:n}=e,i=new Uint8ClampedArray(t*n*3);for(let a=0,s=0;a<e.length;a+=3,s+=3){const r=e[a],o=e[a+1],l=e[a+2];i[s]=r+1.402*(l-128),i[s+1]=r-.34414*(o-128)-.71414*(l-128),i[s+2]=r+1.772*(o-128)}return i}const Bd=.95047,Ud=1,zd=1.08883;function Vd(e){const{width:t,height:n}=e,i=new Uint8Array(t*n*3);for(let a=0,s=0;a<e.length;a+=3,s+=3){const r=e[a+0],o=e[a+1]<<24>>24,l=e[a+2]<<24>>24;let h=(r+16)/116,u=o/500+h,c=h-l/200,_,f,d;u=Bd*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),h=Ud*(h*h*h>.008856?h*h*h:(h-16/116)/7.787),c=zd*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),_=u*3.2406+h*-1.5372+c*-.4986,f=u*-.9689+h*1.8758+c*.0415,d=u*.0557+h*-.204+c*1.057,_=_>.0031308?1.055*_**(1/2.4)-.055:12.92*_,f=f>.0031308?1.055*f**(1/2.4)-.055:12.92*f,d=d>.0031308?1.055*d**(1/2.4)-.055:12.92*d,i[s]=Math.max(0,Math.min(1,_))*255,i[s+1]=Math.max(0,Math.min(1,f))*255,i[s+2]=Math.max(0,Math.min(1,d))*255}return i}const tu=new Map;function Be(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>tu.set(n,t))}async function jd(e){const t=tu.get(e.Compression);if(!t)throw new Error(`Unknown compression method identifier: ${e.Compression}`);const n=await t();return new n(e)}Be([void 0,1],()=>un(()=>import("./raw-Ctlamky6.lG6ojroe.js"),__vite__mapDeps([0,1])).then(e=>e.default));Be(5,()=>un(()=>import("./lzw-D2MxT2zA.DmRYnG5C.js"),__vite__mapDeps([2,1])).then(e=>e.default));Be(6,()=>{throw new Error("old style JPEG compression is not supported.")});Be(7,()=>un(()=>import("./jpeg-CsvjaiEQ.A0lbw6YY.js"),__vite__mapDeps([3,1])).then(e=>e.default));Be([8,32946],()=>un(()=>import("./deflate-BsBbGVWD.DOOJQnHL.js"),__vite__mapDeps([4,5,1])).then(e=>e.default));Be(32773,()=>un(()=>import("./packbits-DJxVZ9kH.CBEwDSj4.js"),__vite__mapDeps([6,1])).then(e=>e.default));Be(34887,()=>un(()=>import("./lerc-BqxMpIZw.CjqNdLxn.js"),__vite__mapDeps([7,5,1,8,9,10,11,12,13,14,15,16,17,18,19])).then(async e=>(await e.zstd.init(),e)).then(e=>e.default));Be(50001,()=>un(()=>import("./webimage-Bg_w2qlD.C0wZFOAS.js"),__vite__mapDeps([20,1])).then(e=>e.default));function Za(e,t,n,i=1){return new(Object.getPrototypeOf(e)).constructor(t*n*i)}function Hd(e,t,n,i,a){const s=t/i,r=n/a;return e.map(o=>{const l=Za(o,i,a);for(let h=0;h<a;++h){const u=Math.min(Math.round(r*h),n-1);for(let c=0;c<i;++c){const _=Math.min(Math.round(s*c),t-1),f=o[u*t+_];l[h*i+c]=f}}return l})}function Pn(e,t,n){return(1-n)*e+n*t}function Wd(e,t,n,i,a){const s=t/i,r=n/a;return e.map(o=>{const l=Za(o,i,a);for(let h=0;h<a;++h){const u=r*h,c=Math.floor(u),_=Math.min(Math.ceil(u),n-1);for(let f=0;f<i;++f){const d=s*f,m=d%1,g=Math.floor(d),p=Math.min(Math.ceil(d),t-1),y=o[c*t+g],b=o[c*t+p],v=o[_*t+g],x=o[_*t+p],M=Pn(Pn(y,b,m),Pn(v,x,m),u%1);l[h*i+f]=M}}return l})}function qd(e,t,n,i,a,s="nearest"){switch(s.toLowerCase()){case"nearest":return Hd(e,t,n,i,a);case"bilinear":case"linear":return Wd(e,t,n,i,a);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function Kd(e,t,n,i,a,s){const r=t/i,o=n/a,l=Za(e,i,a,s);for(let h=0;h<a;++h){const u=Math.min(Math.round(o*h),n-1);for(let c=0;c<i;++c){const _=Math.min(Math.round(r*c),t-1);for(let f=0;f<s;++f){const d=e[u*t*s+_*s+f];l[h*i*s+c*s+f]=d}}}return l}function Xd(e,t,n,i,a,s){const r=t/i,o=n/a,l=Za(e,i,a,s);for(let h=0;h<a;++h){const u=o*h,c=Math.floor(u),_=Math.min(Math.ceil(u),n-1);for(let f=0;f<i;++f){const d=r*f,m=d%1,g=Math.floor(d),p=Math.min(Math.ceil(d),t-1);for(let y=0;y<s;++y){const b=e[c*t*s+g*s+y],v=e[c*t*s+p*s+y],x=e[_*t*s+g*s+y],M=e[_*t*s+p*s+y],R=Pn(Pn(b,v,m),Pn(x,M,m),u%1);l[h*i*s+f*s+y]=R}}}return l}function $d(e,t,n,i,a,s,r="nearest"){switch(r.toLowerCase()){case"nearest":return Kd(e,t,n,i,a,s);case"bilinear":case"linear":return Xd(e,t,n,i,a,s);default:throw new Error(`Unsupported resampling method: '${r}'`)}}function Yd(e,t,n){let i=0;for(let a=t;a<n;++a)i+=e[a];return i}function Bs(e,t,n){switch(e){case 1:if(t<=8)return new Uint8Array(n);if(t<=16)return new Uint16Array(n);if(t<=32)return new Uint32Array(n);break;case 2:if(t===8)return new Int8Array(n);if(t===16)return new Int16Array(n);if(t===32)return new Int32Array(n);break;case 3:switch(t){case 16:case 32:return new Float32Array(n);case 64:return new Float64Array(n)}break}throw Error("Unsupported data format/bitsPerSample")}function Zd(e,t){return(e===1||e===2)&&t<=32&&t%8===0?!1:!(e===3&&(t===16||t===32||t===64))}function Jd(e,t,n,i,a,s,r){const o=new DataView(e),l=n===2?r*s:r*s*i,h=n===2?1:i,u=Bs(t,a,l),c=parseInt("1".repeat(a),2);if(t===1){let _;n===1?_=i*a:_=a;let f=s*_;f&7&&(f=f+7&-8);for(let d=0;d<r;++d){const m=d*f;for(let g=0;g<s;++g){const p=m+g*h*a;for(let y=0;y<h;++y){const b=p+y*a,v=(d*s+g)*h+y,x=Math.floor(b/8),M=b%8;if(M+a<=8)u[v]=o.getUint8(x)>>8-a-M&c;else if(M+a<=16)u[v]=o.getUint16(x)>>16-a-M&c;else if(M+a<=24){const R=o.getUint16(x)<<8|o.getUint8(x+2);u[v]=R>>24-a-M&c}else u[v]=o.getUint32(x)>>32-a-M&c}}}}return u.buffer}class Qd{constructor(t,n,i,a,s,r){this.fileDirectory=t,this.geoKeys=n,this.dataView=i,this.littleEndian=a,this.tiles=s?{}:null,this.isTiled=!t.StripOffsets;const o=t.PlanarConfiguration;if(this.planarConfiguration=typeof o>"u"?1:o,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=r}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0;for(let n=0;n<this.fileDirectory.BitsPerSample.length;++n)t+=this.getSampleByteSize(n);return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const n=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,i=this.fileDirectory.BitsPerSample[t];switch(n){case 1:if(i<=8)return DataView.prototype.getUint8;if(i<=16)return DataView.prototype.getUint16;if(i<=32)return DataView.prototype.getUint32;break;case 2:if(i<=8)return DataView.prototype.getInt8;if(i<=16)return DataView.prototype.getInt16;if(i<=32)return DataView.prototype.getInt32;break;case 3:switch(i){case 16:return function(a,s){return Jh(this,a,s)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,n){const i=this.getSampleFormat(t),a=this.getBitsPerSample(t);return Bs(i,a,n)}async getTileOrStrip(t,n,i,a,s){const r=Math.ceil(this.getWidth()/this.getTileWidth()),o=Math.ceil(this.getHeight()/this.getTileHeight());let l;const{tiles:h}=this;this.planarConfiguration===1?l=n*r+t:this.planarConfiguration===2&&(l=i*r*o+n*r+t);let u,c;this.isTiled?(u=this.fileDirectory.TileOffsets[l],c=this.fileDirectory.TileByteCounts[l]):(u=this.fileDirectory.StripOffsets[l],c=this.fileDirectory.StripByteCounts[l]);const _=(await this.source.fetch([{offset:u,length:c}],s))[0];let f;return h===null||!h[l]?(f=(async()=>{let d=await a.decode(this.fileDirectory,_);const m=this.getSampleFormat(),g=this.getBitsPerSample();return Zd(m,g)&&(d=Jd(d,m,this.planarConfiguration,this.getSamplesPerPixel(),g,this.getTileWidth(),this.getBlockHeight(n))),d})(),h!==null&&(h[l]=f)):f=h[l],{x:t,y:n,sample:i,data:await f}}async _readRaster(t,n,i,a,s,r,o,l,h){const u=this.getTileWidth(),c=this.getTileHeight(),_=this.getWidth(),f=this.getHeight(),d=Math.max(Math.floor(t[0]/u),0),m=Math.min(Math.ceil(t[2]/u),Math.ceil(_/u)),g=Math.max(Math.floor(t[1]/c),0),p=Math.min(Math.ceil(t[3]/c),Math.ceil(f/c)),y=t[2]-t[0];let b=this.getBytesPerPixel();const v=[],x=[];for(let w=0;w<n.length;++w)this.planarConfiguration===1?v.push(Yd(this.fileDirectory.BitsPerSample,0,n[w])/8):v.push(0),x.push(this.getReaderForSample(n[w]));const M=[],{littleEndian:R}=this;for(let w=g;w<p;++w)for(let I=d;I<m;++I){let k;this.planarConfiguration===1&&(k=this.getTileOrStrip(I,w,0,s,h));for(let T=0;T<n.length;++T){const P=T,B=n[T];this.planarConfiguration===2&&(b=this.getSampleByteSize(B),k=this.getTileOrStrip(I,w,B,s,h));const N=k.then(Y=>{const G=Y.data,H=new DataView(G),q=this.getBlockHeight(Y.y),tt=Y.y*c,Q=Y.x*u,nt=tt+q,A=(Y.x+1)*u,ze=x[P],Ve=Math.min(q,q-(nt-t[3]),f-tt),Pt=Math.min(u,u-(A-t[2]),_-Q);for(let Jt=Math.max(0,t[1]-tt);Jt<Ve;++Jt)for(let je=Math.max(0,t[0]-Q);je<Pt;++je){const Ji=(Jt*u+je)*b,Zn=ze.call(H,Ji+v[P],R);let He;a?(He=(Jt+tt-t[1])*y*n.length+(je+Q-t[0])*n.length+P,i[He]=Zn):(He=(Jt+tt-t[1])*y+je+Q-t[0],i[P][He]=Zn)}});M.push(N)}}if(await Promise.all(M),r&&t[2]-t[0]!==r||o&&t[3]-t[1]!==o){let w;return a?w=$d(i,t[2]-t[0],t[3]-t[1],r,o,n.length,l):w=qd(i,t[2]-t[0],t[3]-t[1],r,o,l),w.width=r,w.height=o,w}return i.width=r||t[2]-t[0],i.height=o||t[3]-t[1],i}async readRasters({window:t,samples:n=[],interleave:i,pool:a=null,width:s,height:r,resampleMethod:o,fillValue:l,signal:h}={}){const u=t||[0,0,this.getWidth(),this.getHeight()];if(u[0]>u[2]||u[1]>u[3])throw new Error("Invalid subsets");const c=u[2]-u[0],_=u[3]-u[1],f=c*_,d=this.getSamplesPerPixel();if(!n||!n.length)for(let y=0;y<d;++y)n.push(y);else for(let y=0;y<n.length;++y)if(n[y]>=d)return Promise.reject(new RangeError(`Invalid sample index '${n[y]}'.`));let m;if(i){const y=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,b=Math.max.apply(null,this.fileDirectory.BitsPerSample);m=Bs(y,b,f*n.length),l&&m.fill(l)}else{m=[];for(let y=0;y<n.length;++y){const b=this.getArrayForSample(n[y],f);Array.isArray(l)&&y<l.length?b.fill(l[y]):l&&!Array.isArray(l)&&b.fill(l),m.push(b)}}const g=a||await jd(this.fileDirectory);return await this._readRaster(u,n,m,i,g,s,r,o,h)}async readRGB({window:t,interleave:n=!0,pool:i=null,width:a,height:s,resampleMethod:r,enableAlpha:o=!1,signal:l}={}){const h=t||[0,0,this.getWidth(),this.getHeight()];if(h[0]>h[2]||h[1]>h[3])throw new Error("Invalid subsets");const u=this.fileDirectory.PhotometricInterpretation;if(u===kt.RGB){let p=[0,1,2];if(this.fileDirectory.ExtraSamples!==Td.Unspecified&&o){p=[];for(let y=0;y<this.fileDirectory.BitsPerSample.length;y+=1)p.push(y)}return this.readRasters({window:t,interleave:n,samples:p,pool:i,width:a,height:s,resampleMethod:r,signal:l})}let c;switch(u){case kt.WhiteIsZero:case kt.BlackIsZero:case kt.Palette:c=[0];break;case kt.CMYK:c=[0,1,2,3];break;case kt.YCbCr:case kt.CIELab:c=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const _={window:h,interleave:!0,samples:c,pool:i,width:a,height:s,resampleMethod:r,signal:l},{fileDirectory:f}=this,d=await this.readRasters(_),m=2**this.fileDirectory.BitsPerSample[0];let g;switch(u){case kt.WhiteIsZero:g=Od(d,m);break;case kt.BlackIsZero:g=Nd(d,m);break;case kt.Palette:g=Dd(d,f.ColorMap);break;case kt.CMYK:g=Fd(d);break;case kt.YCbCr:g=Gd(d);break;case kt.CIELab:g=Vd(d);break;default:throw new Error("Unsupported photometric interpretation.")}if(!n){const p=new Uint8Array(g.length/3),y=new Uint8Array(g.length/3),b=new Uint8Array(g.length/3);for(let v=0,x=0;v<g.length;v+=3,++x)p[x]=g[v],y[x]=g[v+1],b[x]=g[v+2];g=[p,y,b]}return g.width=d.width,g.height=d.height,g}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const t=[];for(let n=0;n<this.fileDirectory.ModelTiepoint.length;n+=6)t.push({i:this.fileDirectory.ModelTiepoint[n],j:this.fileDirectory.ModelTiepoint[n+1],k:this.fileDirectory.ModelTiepoint[n+2],x:this.fileDirectory.ModelTiepoint[n+3],y:this.fileDirectory.ModelTiepoint[n+4],z:this.fileDirectory.ModelTiepoint[n+5]});return t}getGDALMetadata(t=null){const n={};if(!this.fileDirectory.GDAL_METADATA)return null;const i=this.fileDirectory.GDAL_METADATA;let a=Ld(i,"Item");t===null?a=a.filter(s=>xs(s,"sample")===void 0):a=a.filter(s=>Number(xs(s,"sample"))===t);for(let s=0;s<a.length;++s){const r=a[s];n[xs(r,"name")]=r.inner}return n}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,n=this.fileDirectory.ModelTransformation;if(t&&t.length===6)return[t[3],t[4],t[5]];if(n)return[n[3],n[7],n[11]];throw new Error("The image does not have an affine transformation.")}getResolution(t=null){const n=this.fileDirectory.ModelPixelScale,i=this.fileDirectory.ModelTransformation;if(n)return[n[0],-n[1],n[2]];if(i)return i[1]===0&&i[4]===0?[i[0],-i[5],i[10]]:[Math.sqrt(i[0]*i[0]+i[4]*i[4]),-Math.sqrt(i[1]*i[1]+i[5]*i[5]),i[10]];if(t){const[a,s,r]=t.getResolution();return[a*t.getWidth()/this.getWidth(),s*t.getHeight()/this.getHeight(),r*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(t=!1){const n=this.getHeight(),i=this.getWidth();if(this.fileDirectory.ModelTransformation&&!t){const[a,s,r,o,l,h,u,c]=this.fileDirectory.ModelTransformation,f=[[0,0],[0,n],[i,0],[i,n]].map(([g,p])=>[o+a*g+s*p,c+l*g+h*p]),d=f.map(g=>g[0]),m=f.map(g=>g[1]);return[Math.min(...d),Math.min(...m),Math.max(...d),Math.max(...m)]}else{const a=this.getOrigin(),s=this.getResolution(),r=a[0],o=a[1],l=r+s[0]*i,h=o+s[1]*n;return[Math.min(r,l),Math.min(o,h),Math.max(r,l),Math.max(o,h)]}}}class tm{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,n){const i=this.getUint32(t,n),a=this.getUint32(t+4,n);let s;if(n){if(s=i+2**32*a,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}if(s=2**32*i+a,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}getInt64(t,n){let i=0;const a=(this._dataView.getUint8(t+(n?7:0))&128)>0;let s=!0;for(let r=0;r<8;r++){let o=this._dataView.getUint8(t+(n?r:7-r));a&&(s?o!==0&&(o=~(o-1)&255,s=!1):o=~o&255),i+=o*256**r}return a&&(i=-i),i}getUint8(t,n){return this._dataView.getUint8(t,n)}getInt8(t,n){return this._dataView.getInt8(t,n)}getUint16(t,n){return this._dataView.getUint16(t,n)}getInt16(t,n){return this._dataView.getInt16(t,n)}getUint32(t,n){return this._dataView.getUint32(t,n)}getInt32(t,n){return this._dataView.getInt32(t,n)}getFloat16(t,n){return Jh(this._dataView,t,n)}getFloat32(t,n){return this._dataView.getFloat32(t,n)}getFloat64(t,n){return this._dataView.getFloat64(t,n)}}class em{constructor(t,n,i,a){this._dataView=new DataView(t),this._sliceOffset=n,this._littleEndian=i,this._bigTiff=a}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,n){return this.sliceOffset<=t&&this.sliceTop>=t+n}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const n=this.readUint32(t),i=this.readUint32(t+4);let a;if(this._littleEndian){if(a=n+2**32*i,!Number.isSafeInteger(a))throw new Error(`${a} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return a}if(a=2**32*n+i,!Number.isSafeInteger(a))throw new Error(`${a} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return a}readInt64(t){let n=0;const i=(this._dataView.getUint8(t+(this._littleEndian?7:0))&128)>0;let a=!0;for(let s=0;s<8;s++){let r=this._dataView.getUint8(t+(this._littleEndian?s:7-s));i&&(a?r!==0&&(r=~(r-1)&255,a=!1):r=~r&255),n+=r*256**s}return i&&(n=-n),n}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}const al=`\r
\r
`;function eu(e){if(typeof Object.fromEntries<"u")return Object.fromEntries(e);const t={};for(const[n,i]of e)t[n.toLowerCase()]=i;return t}function nm(e){const t=e.split(`\r
`).map(n=>{const i=n.split(":").map(a=>a.trim());return i[0]=i[0].toLowerCase(),i});return eu(t)}function im(e){const[t,...n]=e.split(";").map(a=>a.trim()),i=n.map(a=>a.split("="));return{type:t,params:eu(i)}}function Us(e){let t,n,i;return e&&([,t,n,i]=e.match(/bytes (\d+)-(\d+)\/(\d+)/),t=parseInt(t,10),n=parseInt(n,10),i=parseInt(i,10)),{start:t,end:n,total:i}}function am(e,t){let n=null;const i=new TextDecoder("ascii"),a=[],s=`--${t}`,r=`${s}--`;for(let o=0;o<10;++o)i.decode(new Uint8Array(e,o,s.length))===s&&(n=o);if(n===null)throw new Error("Could not find initial boundary");for(;n<e.byteLength;){const o=i.decode(new Uint8Array(e,n,Math.min(s.length+1024,e.byteLength-n)));if(o.length===0||o.startsWith(r))break;if(!o.startsWith(s))throw new Error("Part does not start with boundary");const l=o.substr(s.length+2);if(l.length===0)break;const h=l.indexOf(al),u=nm(l.substr(0,h)),{start:c,end:_,total:f}=Us(u["content-range"]),d=n+s.length+h+al.length,m=parseInt(_,10)+1-parseInt(c,10);a.push({headers:u,data:e.slice(d,d+m),offset:c,length:m,fileSize:f}),n=d+m+4}return a}class nu{async fetch(t,n=void 0){return Promise.all(t.map(i=>this.fetchSlice(i,n)))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}class sm extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof t.maxAge=="number"&&t.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if(typeof this.onEviction=="function")for(const[n,i]of t)this.onEviction(n,i.value)}_deleteIfExpired(t,n){return typeof n.expiry=="number"&&n.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(t,n.value),this.delete(t)):!1}_getOrDeleteIfExpired(t,n){if(this._deleteIfExpired(t,n)===!1)return n.value}_getItemValue(t,n){return n.expiry?this._getOrDeleteIfExpired(t,n):n.value}_peek(t,n){const i=n.get(t);return this._getItemValue(t,i)}_set(t,n){this.cache.set(t,n),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,n){this.oldCache.delete(t),this._set(t,n)}*_entriesAscending(){for(const t of this.oldCache){const[n,i]=t;this.cache.has(n)||this._deleteIfExpired(n,i)===!1&&(yield t)}for(const t of this.cache){const[n,i]=t;this._deleteIfExpired(n,i)===!1&&(yield t)}}get(t){if(this.cache.has(t)){const n=this.cache.get(t);return this._getItemValue(t,n)}if(this.oldCache.has(t)){const n=this.oldCache.get(t);if(this._deleteIfExpired(t,n)===!1)return this._moveToRecent(t,n),n.value}}set(t,n,{maxAge:i=this.maxAge}={}){const a=typeof i=="number"&&i!==Number.POSITIVE_INFINITY?Date.now()+i:void 0;return this.cache.has(t)?this.cache.set(t,{value:n,expiry:a}):this._set(t,{value:n,expiry:a}),this}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):this.oldCache.has(t)?!this._deleteIfExpired(t,this.oldCache.get(t)):!1}peek(t){if(this.cache.has(t))return this._peek(t,this.cache);if(this.oldCache.has(t))return this._peek(t,this.oldCache)}delete(t){const n=this.cache.delete(t);return n&&this._size--,this.oldCache.delete(t)||n}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");const n=[...this._entriesAscending()],i=n.length-t;i<0?(this.cache=new Map(n),this.oldCache=new Map,this._size=n.length):(i>0&&this._emitEvictions(n.slice(0,i)),this.oldCache=new Map(n.slice(i)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache){const[n,i]=t;this._deleteIfExpired(n,i)===!1&&(yield[n,i.value])}for(const t of this.oldCache){const[n,i]=t;this.cache.has(n)||this._deleteIfExpired(n,i)===!1&&(yield[n,i.value])}}*entriesDescending(){let t=[...this.cache];for(let n=t.length-1;n>=0;--n){const i=t[n],[a,s]=i;this._deleteIfExpired(a,s)===!1&&(yield[a,s.value])}t=[...this.oldCache];for(let n=t.length-1;n>=0;--n){const i=t[n],[a,s]=i;this.cache.has(a)||this._deleteIfExpired(a,s)===!1&&(yield[a,s.value])}}*entriesAscending(){for(const[t,n]of this._entriesAscending())yield[t,n.value]}get size(){if(!this._size)return this.oldCache.size;let t=0;for(const n of this.oldCache.keys())this.cache.has(n)||t++;return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,n=this){for(const[i,a]of this.entriesAscending())t.call(n,a,i,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function rm(e){return new Promise(t=>setTimeout(t,e))}function om(e,t){const n=Array.isArray(e)?e:Array.from(e),i=Array.isArray(t)?t:Array.from(t);return n.map((a,s)=>[a,i[s]])}class Hn extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,Hn),this.name="AbortError"}}class lm extends Error{constructor(t,n){super(n),this.errors=t,this.message=n,this.name="AggregateError"}}const hm=lm;class um{constructor(t,n,i=null){this.offset=t,this.length=n,this.data=i}get top(){return this.offset+this.length}}class sl{constructor(t,n,i){this.offset=t,this.length=n,this.blockIds=i}}class cm extends nu{constructor(t,{blockSize:n=65536,cacheSize:i=100}={}){super(),this.source=t,this.blockSize=n,this.blockCache=new sm({maxSize:i,onEviction:(a,s)=>{this.evictedBlocks.set(a,s)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,n){const i=[],a=[],s=[];this.evictedBlocks.clear();for(const{offset:_,length:f}of t){let d=_+f;const{fileSize:m}=this;m!==null&&(d=Math.min(d,m));const g=Math.floor(_/this.blockSize)*this.blockSize;for(let p=g;p<d;p+=this.blockSize){const y=Math.floor(p/this.blockSize);!this.blockCache.has(y)&&!this.blockRequests.has(y)&&(this.blockIdsToFetch.add(y),a.push(y)),this.blockRequests.has(y)&&i.push(this.blockRequests.get(y)),s.push(y)}}await rm(),this.fetchBlocks(n);const r=[];for(const _ of a)this.blockRequests.has(_)&&r.push(this.blockRequests.get(_));await Promise.allSettled(i),await Promise.allSettled(r);const o=[],l=s.filter(_=>this.abortedBlockIds.has(_)||!this.blockCache.has(_));if(l.forEach(_=>this.blockIdsToFetch.add(_)),l.length>0&&n&&!n.aborted){this.fetchBlocks(null);for(const _ of l){const f=this.blockRequests.get(_);if(!f)throw new Error(`Block ${_} is not in the block requests`);o.push(f)}await Promise.allSettled(o)}if(n&&n.aborted)throw new Hn("Request was aborted");const h=s.map(_=>this.blockCache.get(_)||this.evictedBlocks.get(_)),u=h.filter(_=>!_);if(u.length)throw new hm(u,"Request failed");const c=new Map(om(s,h));return this.readSliceData(t,c)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const n=this.groupBlocks(this.blockIdsToFetch),i=this.source.fetch(n,t);for(let a=0;a<n.length;++a){const s=n[a];for(const r of s.blockIds)this.blockRequests.set(r,(async()=>{try{const o=(await i)[a],l=r*this.blockSize,h=l-o.offset,u=Math.min(h+this.blockSize,o.data.byteLength),c=o.data.slice(h,u),_=new um(l,c.byteLength,c,r);this.blockCache.set(r,_),this.abortedBlockIds.delete(r)}catch(o){if(o.name==="AbortError")o.signal=t,this.blockCache.delete(r),this.abortedBlockIds.add(r);else throw o}finally{this.blockRequests.delete(r)}})())}this.blockIdsToFetch.clear()}}groupBlocks(t){const n=Array.from(t).sort((r,o)=>r-o);if(n.length===0)return[];let i=[],a=null;const s=[];for(const r of n)a===null||a+1===r?(i.push(r),a=r):(s.push(new sl(i[0]*this.blockSize,i.length*this.blockSize,i)),i=[r],a=r);return s.push(new sl(i[0]*this.blockSize,i.length*this.blockSize,i)),s}readSliceData(t,n){return t.map(i=>{let a=i.offset+i.length;this.fileSize!==null&&(a=Math.min(this.fileSize,a));const s=Math.floor(i.offset/this.blockSize),r=Math.floor(a/this.blockSize),o=new ArrayBuffer(i.length),l=new Uint8Array(o);for(let h=s;h<=r;++h){const u=n.get(h),c=u.offset-i.offset,_=u.top-a;let f=0,d=0,m;c<0?f=-c:c>0&&(d=c),_<0?m=u.length-f:m=a-u.offset-f;const g=new Uint8Array(u.data,f,m);l.set(g,d)}return o})}}class Sr{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class Rr{constructor(t){this.url=t}async request({headers:t,signal:n}={}){throw new Error("request is not implemented")}}class _m extends Sr{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class fm extends Rr{constructor(t,n){super(t),this.credentials=n}async request({headers:t,signal:n}={}){const i=await fetch(this.url,{headers:t,credentials:this.credentials,signal:n});return new _m(i)}}class dm extends Sr{constructor(t,n){super(),this.xhr=t,this.data=n}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class mm extends Rr{constructRequest(t,n){return new Promise((i,a)=>{const s=new XMLHttpRequest;s.open("GET",this.url),s.responseType="arraybuffer";for(const[r,o]of Object.entries(t))s.setRequestHeader(r,o);s.onload=()=>{const r=s.response;i(new dm(s,r))},s.onerror=a,s.onabort=()=>a(new Hn("Request aborted")),s.send(),n&&(n.aborted&&s.abort(),n.addEventListener("abort",()=>s.abort()))})}async request({headers:t,signal:n}={}){return await this.constructRequest(t,n)}}const ws={};class gm extends Sr{constructor(t,n){super(),this.response=t,this.dataPromise=n}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){return await this.dataPromise}}class pm extends Rr{constructor(t){super(t),this.parsedUrl=ws.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",ws)}constructRequest(t,n){return new Promise((i,a)=>{const s=this.httpApi.get({...this.parsedUrl,headers:t},r=>{const o=new Promise(l=>{const h=[];r.on("data",u=>{h.push(u)}),r.on("end",()=>{const u=Buffer.concat(h).buffer;l(u)}),r.on("error",a)});i(new gm(r,o))});s.on("error",a),n&&(n.aborted&&s.destroy(new Hn("Request aborted")),n.addEventListener("abort",()=>s.destroy(new Hn("Request aborted"))))})}async request({headers:t,signal:n}={}){return await this.constructRequest(t,n)}}class Ir extends nu{constructor(t,n,i,a){super(),this.client=t,this.headers=n,this.maxRanges=i,this.allowFullFile=a,this._fileSize=null}async fetch(t,n){return this.maxRanges>=t.length?this.fetchSlices(t,n):(this.maxRanges>0&&t.length>1,Promise.all(t.map(i=>this.fetchSlice(i,n))))}async fetchSlices(t,n){const i=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map(({offset:a,length:s})=>`${a}-${a+s}`).join(",")}`},signal:n});if(i.ok)if(i.status===206){const{type:a,params:s}=im(i.getHeader("content-type"));if(a==="multipart/byteranges"){const c=am(await i.getData(),s.boundary);return this._fileSize=c[0].fileSize||null,c}const r=await i.getData(),{start:o,end:l,total:h}=Us(i.getHeader("content-range"));this._fileSize=h||null;const u=[{data:r,offset:o,length:l-o}];if(t.length>1){const c=await Promise.all(t.slice(1).map(_=>this.fetchSlice(_,n)));return u.concat(c)}return u}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const a=await i.getData();return this._fileSize=a.byteLength,[{data:a,offset:0,length:a.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(t,n){const{offset:i,length:a}=t,s=await this.client.request({headers:{...this.headers,Range:`bytes=${i}-${i+a}`},signal:n});if(s.ok)if(s.status===206){const r=await s.getData(),{total:o}=Us(s.getHeader("content-range"));return this._fileSize=o||null,{data:r,offset:i,length:a}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const r=await s.getData();return this._fileSize=r.byteLength,{data:r,offset:0,length:r.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function Ar(e,{blockSize:t,cacheSize:n}){return t===null?e:new cm(e,{blockSize:t,cacheSize:n})}function ym(e,{headers:t={},credentials:n,maxRanges:i=0,allowFullFile:a=!1,...s}={}){const r=new fm(e,n),o=new Ir(r,t,i,a);return Ar(o,s)}function vm(e,{headers:t={},maxRanges:n=0,allowFullFile:i=!1,...a}={}){const s=new mm(e),r=new Ir(s,t,n,i);return Ar(r,a)}function bm(e,{headers:t={},maxRanges:n=0,allowFullFile:i=!1,...a}={}){const s=new pm(e),r=new Ir(s,t,n,i);return Ar(r,a)}function xm(e,{forceXHR:t=!1,...n}={}){return typeof fetch=="function"&&!t?ym(e,n):typeof XMLHttpRequest<"u"?vm(e,n):bm(e,n)}function zs(e){switch(e){case V.BYTE:case V.ASCII:case V.SBYTE:case V.UNDEFINED:return 1;case V.SHORT:case V.SSHORT:return 2;case V.LONG:case V.SLONG:case V.FLOAT:case V.IFD:return 4;case V.RATIONAL:case V.SRATIONAL:case V.DOUBLE:case V.LONG8:case V.SLONG8:case V.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${e}`)}}function Mm(e){const t=e.GeoKeyDirectory;if(!t)return null;const n={};for(let i=4;i<=t[3]*4;i+=4){const a=Pd[t[i]],s=t[i+1]?vi[t[i+1]]:null,r=t[i+2],o=t[i+3];let l=null;if(!s)l=o;else{if(l=e[s],typeof l>"u"||l===null)throw new Error(`Could not get value of geoKey '${a}'.`);typeof l=="string"?l=l.substring(o,o+r-1):l.subarray&&(l=l.subarray(o,o+r),r===1&&(l=l[0]))}n[a]=l}return n}function gn(e,t,n,i){let a=null,s=null;const r=zs(t);switch(t){case V.BYTE:case V.ASCII:case V.UNDEFINED:a=new Uint8Array(n),s=e.readUint8;break;case V.SBYTE:a=new Int8Array(n),s=e.readInt8;break;case V.SHORT:a=new Uint16Array(n),s=e.readUint16;break;case V.SSHORT:a=new Int16Array(n),s=e.readInt16;break;case V.LONG:case V.IFD:a=new Uint32Array(n),s=e.readUint32;break;case V.SLONG:a=new Int32Array(n),s=e.readInt32;break;case V.LONG8:case V.IFD8:a=new Array(n),s=e.readUint64;break;case V.SLONG8:a=new Array(n),s=e.readInt64;break;case V.RATIONAL:a=new Uint32Array(n*2),s=e.readUint32;break;case V.SRATIONAL:a=new Int32Array(n*2),s=e.readInt32;break;case V.FLOAT:a=new Float32Array(n),s=e.readFloat32;break;case V.DOUBLE:a=new Float64Array(n),s=e.readFloat64;break;default:throw new RangeError(`Invalid field type: ${t}`)}if(t===V.RATIONAL||t===V.SRATIONAL)for(let o=0;o<n;o+=2)a[o]=s.call(e,i+o*r),a[o+1]=s.call(e,i+(o*r+4));else for(let o=0;o<n;++o)a[o]=s.call(e,i+o*r);return t===V.ASCII?new TextDecoder("utf-8").decode(a):a}class wm{constructor(t,n,i){this.fileDirectory=t,this.geoKeyDirectory=n,this.nextIFDByteOffset=i}}class ma extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class Em{async readRasters(t={}){const{window:n,width:i,height:a}=t;let{resX:s,resY:r,bbox:o}=t;const l=await this.getImage();let h=l;const u=await this.getImageCount(),c=l.getBoundingBox();if(n&&o)throw new Error('Both "bbox" and "window" passed.');if(i||a){if(n){const[d,m]=l.getOrigin(),[g,p]=l.getResolution();o=[d+n[0]*g,m+n[1]*p,d+n[2]*g,m+n[3]*p]}const f=o||c;if(i){if(s)throw new Error("Both width and resX passed");s=(f[2]-f[0])/i}if(a){if(r)throw new Error("Both width and resY passed");r=(f[3]-f[1])/a}}if(s||r){const f=[];for(let d=0;d<u;++d){const m=await this.getImage(d),{SubfileType:g,NewSubfileType:p}=m.fileDirectory;(d===0||g===2||p&1)&&f.push(m)}f.sort((d,m)=>d.getWidth()-m.getWidth());for(let d=0;d<f.length;++d){const m=f[d],g=(c[2]-c[0])/m.getWidth(),p=(c[3]-c[1])/m.getHeight();if(h=m,s&&s>g||r&&r>p)break}}let _=n;if(o){const[f,d]=l.getOrigin(),[m,g]=h.getResolution(l);_=[Math.round((o[0]-f)/m),Math.round((o[1]-d)/g),Math.round((o[2]-f)/m),Math.round((o[3]-d)/g)],_=[Math.min(_[0],_[2]),Math.min(_[1],_[3]),Math.max(_[0],_[2]),Math.max(_[1],_[3])]}return h.readRasters({...t,window:_})}}class Cr extends Em{constructor(t,n,i,a,s={}){super(),this.source=t,this.littleEndian=n,this.bigTiff=i,this.firstIFDOffset=a,this.cache=s.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,n){const i=this.bigTiff?4048:1024;return new em((await this.source.fetch([{offset:t,length:typeof n<"u"?n:i}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const n=this.bigTiff?20:12,i=this.bigTiff?8:2;let a=await this.getSlice(t);const s=this.bigTiff?a.readUint64(t):a.readUint16(t),r=s*n+(this.bigTiff?16:6);a.covers(t,r)||(a=await this.getSlice(t,r));const o={};let l=t+(this.bigTiff?8:2);for(let c=0;c<s;l+=n,++c){const _=a.readUint16(l),f=a.readUint16(l+2),d=this.bigTiff?a.readUint64(l+4):a.readUint32(l+4);let m,g;const p=zs(f),y=l+(this.bigTiff?12:8);if(p*d<=(this.bigTiff?8:4))m=gn(a,f,d,y);else{const b=a.readOffset(y),v=zs(f)*d;if(a.covers(b,v))m=gn(a,f,d,b);else{const x=await this.getSlice(b,v);m=gn(x,f,d,b)}}d===1&&kd.indexOf(_)===-1&&!(f===V.RATIONAL||f===V.SRATIONAL)?g=m[0]:g=m,o[vi[_]]=g}const h=Mm(o),u=a.readOffset(t+i+n*s);return new wm(o,h,u)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t];if(t===0)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t];if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(n){throw n instanceof ma?new ma(t):n}return this.ifdRequests[t]=(async()=>{const n=await this.ifdRequests[t-1];if(n.nextIFDByteOffset===0)throw new ma(t);return this.parseFileDirectoryAt(n.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){const n=await this.requestIFD(t);return new Qd(n.fileDirectory,n.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,n=!0;for(;n;)try{await this.requestIFD(t),++t}catch(i){if(i instanceof ma)n=!1;else throw i}return t}async getGhostValues(){const t=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const n="GDAL_STRUCTURAL_METADATA_SIZE=",i=n.length+100;let a=await this.getSlice(t,i);if(n===gn(a,V.ASCII,n.length,t)){const r=gn(a,V.ASCII,i,t).split(`
`)[0],o=Number(r.split("=")[1].split(" ")[0])+r.length;o>i&&(a=await this.getSlice(t,o));const l=gn(a,V.ASCII,o,t);this.ghostValues={},l.split(`
`).filter(h=>h.length>0).map(h=>h.split("=")).forEach(([h,u])=>{this.ghostValues[h]=u})}return this.ghostValues}static async fromSource(t,n,i){const a=(await t.fetch([{offset:0,length:1024}],i))[0],s=new tm(a),r=s.getUint16(0,0);let o;if(r===18761)o=!0;else if(r===19789)o=!1;else throw new TypeError("Invalid byte order value.");const l=s.getUint16(2,o);let h;if(l===42)h=!1;else if(l===43){if(h=!0,s.getUint16(4,o)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const u=h?s.getUint64(8,o):s.getUint32(4,o);return new Cr(t,o,h,u,n)}close(){return typeof this.source.close=="function"?this.source.close():!1}}async function Sm(e,t={},n){return Cr.fromSource(xm(e,t),n)}function Rm(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var t=1;t<=60;++t)e("EPSG:"+(32600+t),"+proj=utm +zone="+t+" +datum=WGS84 +units=m"),e("EPSG:"+(32700+t),"+proj=utm +zone="+t+" +south +datum=WGS84 +units=m");e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var ln=1,hn=2,On=3,Im=4,Vs=5,rl=6378137,Am=6356752314e-3,ol=.0066943799901413165,bi=484813681109536e-20,S=Math.PI/2,Cm=.16666666666666666,Lm=.04722222222222222,km=.022156084656084655,C=1e-10,ot=.017453292519943295,oe=57.29577951308232,X=Math.PI/4,Di=Math.PI*2,lt=3.14159265359,Lt={};Lt.greenwich=0;Lt.lisbon=-9.131906111111;Lt.paris=2.337229166667;Lt.bogota=-74.080916666667;Lt.madrid=-3.687938888889;Lt.rome=12.452333333333;Lt.bern=7.439583333333;Lt.jakarta=106.807719444444;Lt.ferro=-17.666666666667;Lt.brussels=4.367975;Lt.stockholm=18.058277777778;Lt.athens=23.7163375;Lt.oslo=10.722916666667;const Tm={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var ll=/[\s_\-\/\(\)]/g;function Ne(e,t){if(e[t])return e[t];for(var n=Object.keys(e),i=t.toLowerCase().replace(ll,""),a=-1,s,r;++a<n.length;)if(s=n[a],r=s.toLowerCase().replace(ll,""),r===i)return e[s]}function js(e){var t={},n=e.split("+").map(function(o){return o.trim()}).filter(function(o){return o}).reduce(function(o,l){var h=l.split("=");return h.push(!0),o[h[0].toLowerCase()]=h[1],o},{}),i,a,s,r={proj:"projName",datum:"datumCode",rf:function(o){t.rf=parseFloat(o)},lat_0:function(o){t.lat0=o*ot},lat_1:function(o){t.lat1=o*ot},lat_2:function(o){t.lat2=o*ot},lat_ts:function(o){t.lat_ts=o*ot},lon_0:function(o){t.long0=o*ot},lon_1:function(o){t.long1=o*ot},lon_2:function(o){t.long2=o*ot},alpha:function(o){t.alpha=parseFloat(o)*ot},gamma:function(o){t.rectified_grid_angle=parseFloat(o)},lonc:function(o){t.longc=o*ot},x_0:function(o){t.x0=parseFloat(o)},y_0:function(o){t.y0=parseFloat(o)},k_0:function(o){t.k0=parseFloat(o)},k:function(o){t.k0=parseFloat(o)},a:function(o){t.a=parseFloat(o)},b:function(o){t.b=parseFloat(o)},r:function(o){t.a=t.b=parseFloat(o)},r_a:function(){t.R_A=!0},zone:function(o){t.zone=parseInt(o,10)},south:function(){t.utmSouth=!0},towgs84:function(o){t.datum_params=o.split(",").map(function(l){return parseFloat(l)})},to_meter:function(o){t.to_meter=parseFloat(o)},units:function(o){t.units=o;var l=Ne(Tm,o);l&&(t.to_meter=l.to_meter)},from_greenwich:function(o){t.from_greenwich=o*ot},pm:function(o){var l=Ne(Lt,o);t.from_greenwich=(l||parseFloat(o))*ot},nadgrids:function(o){o==="@null"?t.datumCode="none":t.nadgrids=o},axis:function(o){var l="ewnsud";o.length===3&&l.indexOf(o.substr(0,1))!==-1&&l.indexOf(o.substr(1,1))!==-1&&l.indexOf(o.substr(2,1))!==-1&&(t.axis=o)},approx:function(){t.approx=!0}};for(i in n)a=n[i],i in r?(s=r[i],typeof s=="function"?s(a):t[s]=a):t[i]=a;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var Fi=1,iu=2,au=3,Na=4,su=5,Lr=-1,Pm=/\s/,Om=/[A-Za-z]/,Nm=/[A-Za-z84_]/,Ja=/[,\]]/,ru=/[\d\.E\-\+]/;function we(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Fi}we.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==Na)for(;Pm.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case Fi:return this.neutral(e);case iu:return this.keyword(e);case Na:return this.quoted(e);case su:return this.afterquote(e);case au:return this.number(e);case Lr:return}};we.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=Na;return}if(Ja.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};we.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Fi;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Fi,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Lr);return}};we.prototype.number=function(e){if(ru.test(e)){this.word+=e;return}if(Ja.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};we.prototype.quoted=function(e){if(e==='"'){this.state=su;return}this.word+=e};we.prototype.keyword=function(e){if(Nm.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=Fi;return}if(Ja.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};we.prototype.neutral=function(e){if(Om.test(e)){this.word=e,this.state=iu;return}if(e==='"'){this.word="",this.state=Na;return}if(ru.test(e)){this.word=e,this.state=au;return}if(Ja.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};we.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Lr)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Dm(e){var t=new we(e);return t.output()}function Es(e,t,n){Array.isArray(t)&&(n.unshift(t),t=null);var i=t?{}:e,a=n.reduce(function(s,r){return Rn(r,s),s},i);t&&(e[t]=a)}function Rn(e,t){if(!Array.isArray(e)){t[e]=!0;return}var n=e.shift();if(n==="PARAMETER"&&(n=e.shift()),e.length===1){if(Array.isArray(e[0])){t[n]={},Rn(e[0],t[n]);return}t[n]=e[0];return}if(!e.length){t[n]=!0;return}if(n==="TOWGS84"){t[n]=e;return}if(n==="AXIS"){n in t||(t[n]=[]),t[n].push(e);return}Array.isArray(n)||(t[n]={});var i;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[n]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&Rn(e[2],t[n]);return;case"SPHEROID":case"ELLIPSOID":t[n]={name:e[0],a:e[1],rf:e[2]},e.length===4&&Rn(e[3],t[n]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":e[0]=["name",e[0]],Es(t,n,e);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":e[0]=["name",e[0]],Es(t,n,e),t[n].type=n;return;default:for(i=-1;++i<e.length;)if(!Array.isArray(e[i]))return Rn(e,t[n]);return Es(t,n,e)}}var Fm=.017453292519943295,Gm=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Bm(e,t){var n=t[0],i=t[1];!(n in e)&&i in e&&(e[n]=e[i],t.length===3&&(e[n]=t[2](e[n])))}function ne(e){return e*Fm}function ou(e){for(var t=Object.keys(e),n=0,i=t.length;n<i;++n){var a=t[n];Gm.indexOf(a)!==-1&&Um(e[a]),typeof e[a]=="object"&&ou(e[a])}}function Um(e){if(e.AUTHORITY){var t=Object.keys(e.AUTHORITY)[0];t&&t in e.AUTHORITY&&(e.title=t+":"+e.AUTHORITY[t])}if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var n="",i=0,a=e.AXIS.length;i<a;++i){var s=[e.AXIS[i][0].toLowerCase(),e.AXIS[i][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?n+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?n+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?n+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(n+="w")}n.length===2&&(n+="u"),n.length===3&&(e.axis=n)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var r=e.GEOGCS;e.type==="GEOGCS"&&(r=e),r&&(r.DATUM?e.datumCode=r.DATUM.name.toLowerCase():e.datumCode=r.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),e.datumCode==="new_zealand_1949"&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode==="belge_1972"&&(e.datumCode="rnb72"),r.DATUM&&r.DATUM.SPHEROID&&(e.ellps=r.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=r.DATUM.SPHEROID.a,e.rf=parseFloat(r.DATUM.SPHEROID.rf,10)),r.DATUM&&r.DATUM.TOWGS84&&(e.datum_params=r.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function o(u){var c=e.to_meter||1;return u*c}var l=function(u){return Bm(e,u)},h=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",ne],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",ne],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",ne],["lat0","latitude_of_origin",ne],["lat0","standard_parallel_1",ne],["lat1","standard_parallel_1",ne],["lat2","standard_parallel_2",ne],["azimuth","Azimuth"],["alpha","azimuth",ne],["srsCode","name"]];h.forEach(l),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")?(e.lat0=ne(e.lat1>0?90:-90),e.lat_ts=e.lat1):!e.lat_ts&&e.lat0&&e.projName==="Polar_Stereographic"&&(e.lat_ts=e.lat0,e.lat0=ne(e.lat0>0?90:-90))}function lu(e){var t=Dm(e),n=t[0],i={};return Rn(t,i),ou(i),i[n]}function yt(e){var t=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?yt[e]=js(arguments[1]):yt[e]=lu(arguments[1]):yt[e]=n}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(i){Array.isArray(i)?yt.apply(t,i):yt(i)});if(typeof e=="string"){if(e in yt)return yt[e]}else"EPSG"in e?yt["EPSG:"+e.EPSG]=e:"ESRI"in e?yt["ESRI:"+e.ESRI]=e:"IAU2000"in e?yt["IAU2000:"+e.IAU2000]=e:console.log(e);return}}Rm(yt);function zm(e){return typeof e=="string"}function Vm(e){return e in yt}var jm=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Hm(e){return jm.some(function(t){return e.indexOf(t)>-1})}var Wm=["3857","900913","3785","102113"];function qm(e){var t=Ne(e,"authority");if(t){var n=Ne(t,"epsg");return n&&Wm.indexOf(n)>-1}}function Km(e){var t=Ne(e,"extension");if(t)return Ne(t,"proj4")}function Xm(e){return e[0]==="+"}function $m(e){if(zm(e)){if(Vm(e))return yt[e];if(Hm(e)){var t=lu(e);if(qm(t))return yt["EPSG:3857"];var n=Km(t);return n?js(n):t}if(Xm(e))return js(e)}else return e}function hl(e,t){e=e||{};var n,i;if(!t)return e;for(i in t)n=t[i],n!==void 0&&(e[i]=n);return e}function he(e,t,n){var i=e*t;return n/Math.sqrt(1-i*i)}function qi(e){return e<0?-1:1}function L(e){return Math.abs(e)<=lt?e:e-qi(e)*Di}function Yt(e,t,n){var i=e*n,a=.5*e;return i=Math.pow((1-i)/(1+i),a),Math.tan(.5*(S-t))/i}function Gi(e,t){for(var n=.5*e,i,a,s=S-2*Math.atan(t),r=0;r<=15;r++)if(i=e*Math.sin(s),a=S-2*Math.atan(t*Math.pow((1-i)/(1+i),n))-s,s+=a,Math.abs(a)<=1e-10)return s;return-9999}function Ym(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=he(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Zm(e){var t=e.x,n=e.y;if(n*oe>90&&n*oe<-90&&t*oe>180&&t*oe<-180)return null;var i,a;if(Math.abs(Math.abs(n)-S)<=C)return null;if(this.sphere)i=this.x0+this.a*this.k0*L(t-this.long0),a=this.y0+this.a*this.k0*Math.log(Math.tan(X+.5*n));else{var s=Math.sin(n),r=Yt(this.e,n,s);i=this.x0+this.a*this.k0*L(t-this.long0),a=this.y0-this.a*this.k0*Math.log(r)}return e.x=i,e.y=a,e}function Jm(e){var t=e.x-this.x0,n=e.y-this.y0,i,a;if(this.sphere)a=S-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var s=Math.exp(-n/(this.a*this.k0));if(a=Gi(this.e,s),a===-9999)return null}return i=L(this.long0+t/(this.a*this.k0)),e.x=i,e.y=a,e}var Qm=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const t1={init:Ym,forward:Zm,inverse:Jm,names:Qm};function e1(){}function ul(e){return e}var n1=["longlat","identity"];const i1={init:e1,forward:ul,inverse:ul,names:n1};var a1=[t1,i1],xa={},Da=[];function hu(e,t){var n=Da.length;return e.names?(Da[n]=e,e.names.forEach(function(i){xa[i.toLowerCase()]=n}),this):(console.log(t),!0)}function s1(e){if(!e)return!1;var t=e.toLowerCase();if(typeof xa[t]<"u"&&Da[xa[t]])return Da[xa[t]]}function r1(){a1.forEach(hu)}const o1={start:r1,add:hu,get:s1};var F={};F.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};F.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};F.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};F.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};F.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};F.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};F.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};F.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};F.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};F.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};F.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};F.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};F.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};F.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};F.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};F.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};F.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};F.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};F.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};F.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};F.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};F.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};F.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};F.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};F.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};F.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};F.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};F.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};F.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};F.hough={a:6378270,rf:297,ellipseName:"Hough"};F.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};F.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};F.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};F.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};F.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};F.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};F.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};F.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};F.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};F.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};F.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};F.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var l1=F.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};F.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function h1(e,t,n,i){var a=e*e,s=t*t,r=(a-s)/a,o=0;i?(e*=1-r*(Cm+r*(Lm+r*km)),a=e*e,r=0):o=Math.sqrt(r);var l=(a-s)/s;return{es:r,e:o,ep2:l}}function u1(e,t,n,i,a){if(!e){var s=Ne(F,i);s||(s=l1),e=s.a,t=s.b,n=s.rf}return n&&!t&&(t=(1-1/n)*e),(n===0||Math.abs(e-t)<C)&&(a=!0,t=e),{a:e,b:t,rf:n,sphere:a}}var Ma={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var c1 in Ma){var cl=Ma[c1];Ma[cl.datumName]=cl}function _1(e,t,n,i,a,s,r){var o={};return e===void 0||e==="none"?o.datum_type=Vs:o.datum_type=Im,t&&(o.datum_params=t.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=ln),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=hn,o.datum_params[3]*=bi,o.datum_params[4]*=bi,o.datum_params[5]*=bi,o.datum_params[6]=o.datum_params[6]/1e6+1)),r&&(o.datum_type=On,o.grids=r),o.a=n,o.b=i,o.es=a,o.ep2=s,o}var uu={};function f1(e,t){var n=new DataView(t),i=g1(n),a=p1(n,i),s=y1(n,a,i),r={header:a,subgrids:s};return uu[e]=r,r}function d1(e){if(e===void 0)return null;var t=e.split(",");return t.map(m1)}function m1(e){if(e.length===0)return null;var t=e[0]==="@";return t&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:uu[e]||null,isNull:!1}}function In(e){return e/3600*Math.PI/180}function g1(e){var t=e.getInt32(8,!1);return t===11?!1:(t=e.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function p1(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:Hs(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}function Hs(e,t,n){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,n)))}function y1(e,t,n){for(var i=176,a=[],s=0;s<t.nSubgrids;s++){var r=b1(e,i,n),o=x1(e,i,r,n),l=Math.round(1+(r.upperLongitude-r.lowerLongitude)/r.longitudeInterval),h=Math.round(1+(r.upperLatitude-r.lowerLatitude)/r.latitudeInterval);a.push({ll:[In(r.lowerLongitude),In(r.lowerLatitude)],del:[In(r.longitudeInterval),In(r.latitudeInterval)],lim:[l,h],count:r.gridNodeCount,cvs:v1(o)}),i+=176+r.gridNodeCount*16}return a}function v1(e){return e.map(function(t){return[In(t.longitudeShift),In(t.latitudeShift)]})}function b1(e,t,n){return{name:Hs(e,t+8,t+16).trim(),parent:Hs(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,n),upperLatitude:e.getFloat64(t+88,n),lowerLongitude:e.getFloat64(t+104,n),upperLongitude:e.getFloat64(t+120,n),latitudeInterval:e.getFloat64(t+136,n),longitudeInterval:e.getFloat64(t+152,n),gridNodeCount:e.getInt32(t+168,n)}}function x1(e,t,n,i){for(var a=t+176,s=16,r=[],o=0;o<n.gridNodeCount;o++){var l={latitudeShift:e.getFloat32(a+o*s,i),longitudeShift:e.getFloat32(a+o*s+4,i),latitudeAccuracy:e.getFloat32(a+o*s+8,i),longitudeAccuracy:e.getFloat32(a+o*s+12,i)};r.push(l)}return r}function le(e,t){if(!(this instanceof le))return new le(e);t=t||function(h){if(h)throw h};var n=$m(e);if(typeof n!="object"){t("Could not parse to valid json: "+e);return}var i=le.projections.get(n.projName);if(!i){t("Could not get projection name from: "+e);return}if(n.datumCode&&n.datumCode!=="none"){var a=Ne(Ma,n.datumCode);a&&(n.datum_params=n.datum_params||(a.towgs84?a.towgs84.split(","):null),n.ellps=a.ellipse,n.datumName=a.datumName?a.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var s=u1(n.a,n.b,n.rf,n.ellps,n.sphere),r=h1(s.a,s.b,s.rf,n.R_A),o=d1(n.nadgrids),l=n.datum||_1(n.datumCode,n.datum_params,s.a,s.b,r.es,r.ep2,o);hl(this,n),hl(this,i),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=r.es,this.e=r.e,this.ep2=r.ep2,this.datum=l,this.init(),t(null,this)}le.projections=o1;le.projections.start();function M1(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===ln?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===hn?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function cu(e,t,n){var i=e.x,a=e.y,s=e.z?e.z:0,r,o,l,h;if(a<-S&&a>-1.001*S)a=-S;else if(a>S&&a<1.001*S)a=S;else{if(a<-S)return{x:-1/0,y:-1/0,z:e.z};if(a>S)return{x:1/0,y:1/0,z:e.z}}return i>Math.PI&&(i-=2*Math.PI),o=Math.sin(a),h=Math.cos(a),l=o*o,r=n/Math.sqrt(1-t*l),{x:(r+s)*h*Math.cos(i),y:(r+s)*h*Math.sin(i),z:(r*(1-t)+s)*o}}function _u(e,t,n,i){var a=1e-12,s=a*a,r=30,o,l,h,u,c,_,f,d,m,g,p,y,b,v=e.x,x=e.y,M=e.z?e.z:0,R,w,I;if(o=Math.sqrt(v*v+x*x),l=Math.sqrt(v*v+x*x+M*M),o/n<a){if(R=0,l/n<a)return w=S,I=-i,{x:e.x,y:e.y,z:e.z}}else R=Math.atan2(x,v);h=M/l,u=o/l,c=1/Math.sqrt(1-t*(2-t)*u*u),d=u*(1-t)*c,m=h*c,b=0;do b++,f=n/Math.sqrt(1-t*m*m),I=o*d+M*m-f*(1-t*m*m),_=t*f/(f+I),c=1/Math.sqrt(1-_*(2-_)*u*u),g=u*(1-_)*c,p=h*c,y=p*d-g*m,d=g,m=p;while(y*y>s&&b<r);return w=Math.atan(p/Math.abs(g)),{x:R,y:w,z:I}}function w1(e,t,n){if(t===ln)return{x:e.x+n[0],y:e.y+n[1],z:e.z+n[2]};if(t===hn){var i=n[0],a=n[1],s=n[2],r=n[3],o=n[4],l=n[5],h=n[6];return{x:h*(e.x-l*e.y+o*e.z)+i,y:h*(l*e.x+e.y-r*e.z)+a,z:h*(-o*e.x+r*e.y+e.z)+s}}}function E1(e,t,n){if(t===ln)return{x:e.x-n[0],y:e.y-n[1],z:e.z-n[2]};if(t===hn){var i=n[0],a=n[1],s=n[2],r=n[3],o=n[4],l=n[5],h=n[6],u=(e.x-i)/h,c=(e.y-a)/h,_=(e.z-s)/h;return{x:u+l*c-o*_,y:-l*u+c+r*_,z:o*u-r*c+_}}}function ga(e){return e===ln||e===hn}function S1(e,t,n){if(M1(e,t)||e.datum_type===Vs||t.datum_type===Vs)return n;var i=e.a,a=e.es;if(e.datum_type===On){var s=_l(e,!1,n);if(s!==0)return;i=rl,a=ol}var r=t.a,o=t.b,l=t.es;if(t.datum_type===On&&(r=rl,o=Am,l=ol),a===l&&i===r&&!ga(e.datum_type)&&!ga(t.datum_type))return n;if(n=cu(n,a,i),ga(e.datum_type)&&(n=w1(n,e.datum_type,e.datum_params)),ga(t.datum_type)&&(n=E1(n,t.datum_type,t.datum_params)),n=_u(n,l,r,o),t.datum_type===On){var h=_l(t,!0,n);if(h!==0)return}return n}function _l(e,t,n){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;var i={x:-n.x,y:n.y},a={x:Number.NaN,y:Number.NaN},s=[];t:for(var r=0;r<e.grids.length;r++){var o=e.grids[r];if(s.push(o.name),o.isNull){a=i;break}if(o.mandatory,o.grid===null){if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1;continue}for(var l=o.grid.subgrids,h=0,u=l.length;h<u;h++){var c=l[h],_=(Math.abs(c.del[1])+Math.abs(c.del[0]))/1e4,f=c.ll[0]-_,d=c.ll[1]-_,m=c.ll[0]+(c.lim[0]-1)*c.del[0]+_,g=c.ll[1]+(c.lim[1]-1)*c.del[1]+_;if(!(d>i.y||f>i.x||g<i.y||m<i.x)&&(a=R1(i,t,c),!isNaN(a.x)))break t}}return isNaN(a.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*oe+" "+i.y*oe+" tried: '"+s+"'"),-1):(n.x=-a.x,n.y=a.y,0)}function R1(e,t,n){var i={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return i;var a={x:e.x,y:e.y};a.x-=n.ll[0],a.y-=n.ll[1],a.x=L(a.x-Math.PI)+Math.PI;var s=fl(a,n);if(t){if(isNaN(s.x))return i;s.x=a.x-s.x,s.y=a.y-s.y;var r=9,o=1e-12,l,h;do{if(h=fl(s,n),isNaN(h.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:a.x-(h.x+s.x),y:a.y-(h.y+s.y)},s.x+=l.x,s.y+=l.y}while(r--&&Math.abs(l.x)>o&&Math.abs(l.y)>o);if(r<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=L(s.x+n.ll[0]),i.y=s.y+n.ll[1]}else isNaN(s.x)||(i.x=e.x+s.x,i.y=e.y+s.y);return i}function fl(e,t){var n={x:e.x/t.del[0],y:e.y/t.del[1]},i={x:Math.floor(n.x),y:Math.floor(n.y)},a={x:n.x-1*i.x,y:n.y-1*i.y},s={x:Number.NaN,y:Number.NaN},r;if(i.x<0||i.x>=t.lim[0]||i.y<0||i.y>=t.lim[1])return s;r=i.y*t.lim[0]+i.x;var o={x:t.cvs[r][0],y:t.cvs[r][1]};r++;var l={x:t.cvs[r][0],y:t.cvs[r][1]};r+=t.lim[0];var h={x:t.cvs[r][0],y:t.cvs[r][1]};r--;var u={x:t.cvs[r][0],y:t.cvs[r][1]},c=a.x*a.y,_=a.x*(1-a.y),f=(1-a.x)*(1-a.y),d=(1-a.x)*a.y;return s.x=f*o.x+_*l.x+d*u.x+c*h.x,s.y=f*o.y+_*l.y+d*u.y+c*h.y,s}function dl(e,t,n){var i=n.x,a=n.y,s=n.z||0,r,o,l,h={};for(l=0;l<3;l++)if(!(t&&l===2&&n.z===void 0))switch(l===0?(r=i,"ew".indexOf(e.axis[l])!==-1?o="x":o="y"):l===1?(r=a,"ns".indexOf(e.axis[l])!==-1?o="y":o="x"):(r=s,o="z"),e.axis[l]){case"e":h[o]=r;break;case"w":h[o]=-r;break;case"n":h[o]=r;break;case"s":h[o]=-r;break;case"u":n[o]!==void 0&&(h.z=r);break;case"d":n[o]!==void 0&&(h.z=-r);break;default:return null}return h}function fu(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function I1(e){ml(e.x),ml(e.y)}function ml(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function A1(e,t){return(e.datum.datum_type===ln||e.datum.datum_type===hn||e.datum.datum_type===On)&&t.datumCode!=="WGS84"||(t.datum.datum_type===ln||t.datum.datum_type===hn||t.datum.datum_type===On)&&e.datumCode!=="WGS84"}function Fa(e,t,n,i){var a;Array.isArray(n)?n=fu(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var s=n.z!==void 0;if(I1(n),e.datum&&t.datum&&A1(e,t)&&(a=new le("WGS84"),n=Fa(e,a,n,i),e=a),i&&e.axis!=="enu"&&(n=dl(e,!1,n)),e.projName==="longlat")n={x:n.x*ot,y:n.y*ot,z:n.z||0};else if(e.to_meter&&(n={x:n.x*e.to_meter,y:n.y*e.to_meter,z:n.z||0}),n=e.inverse(n),!n)return;if(e.from_greenwich&&(n.x+=e.from_greenwich),n=S1(e.datum,t.datum,n),!!n)return t.from_greenwich&&(n={x:n.x-t.from_greenwich,y:n.y,z:n.z||0}),t.projName==="longlat"?n={x:n.x*oe,y:n.y*oe,z:n.z||0}:(n=t.forward(n),t.to_meter&&(n={x:n.x/t.to_meter,y:n.y/t.to_meter,z:n.z||0})),i&&t.axis!=="enu"?dl(t,!0,n):(n&&!s&&delete n.z,n)}var gl=le("WGS84");function Ss(e,t,n,i){var a,s,r;return Array.isArray(n)?(a=Fa(e,t,n,i)||{x:NaN,y:NaN},n.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof a.z=="number"?[a.x,a.y,a.z].concat(n.slice(3)):[a.x,a.y,n[2]].concat(n.slice(3)):[a.x,a.y].concat(n.slice(2)):[a.x,a.y]):(s=Fa(e,t,n,i),r=Object.keys(n),r.length===2||r.forEach(function(o){if(typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;s[o]=n[o]}),s)}function pl(e){return e instanceof le?e:e.oProj?e.oProj:le(e)}function xt(e,t,n){e=pl(e);var i=!1,a;return typeof t>"u"?(t=e,e=gl,i=!0):(typeof t.x<"u"||Array.isArray(t))&&(n=t,t=e,e=gl,i=!0),t=pl(t),n?Ss(e,t,n):(a={forward:function(s,r){return Ss(e,t,s,r)},inverse:function(s,r){return Ss(t,e,s,r)}},i&&(a.oProj=t),a)}var yl=6,du="AJSAJS",mu="AFAFAF",An=65,wt=73,Gt=79,mi=86,gi=90;const C1={forward:gu,inverse:L1,toPoint:pu};function gu(e,t){return t=t||5,P1(k1({lat:e[1],lon:e[0]}),t)}function L1(e){var t=kr(vu(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function pu(e){var t=kr(vu(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function Rs(e){return e*(Math.PI/180)}function vl(e){return 180*(e/Math.PI)}function k1(e){var t=e.lat,n=e.lon,i=6378137,a=.00669438,s=.9996,r,o,l,h,u,c,_,f=Rs(t),d=Rs(n),m,g;g=Math.floor((n+180)/6)+1,n===180&&(g=60),t>=56&&t<64&&n>=3&&n<12&&(g=32),t>=72&&t<84&&(n>=0&&n<9?g=31:n>=9&&n<21?g=33:n>=21&&n<33?g=35:n>=33&&n<42&&(g=37)),r=(g-1)*6-180+3,m=Rs(r),o=a/(1-a),l=i/Math.sqrt(1-a*Math.sin(f)*Math.sin(f)),h=Math.tan(f)*Math.tan(f),u=o*Math.cos(f)*Math.cos(f),c=Math.cos(f)*(d-m),_=i*((1-a/4-3*a*a/64-5*a*a*a/256)*f-(3*a/8+3*a*a/32+45*a*a*a/1024)*Math.sin(2*f)+(15*a*a/256+45*a*a*a/1024)*Math.sin(4*f)-35*a*a*a/3072*Math.sin(6*f));var p=s*l*(c+(1-h+u)*c*c*c/6+(5-18*h+h*h+72*u-58*o)*c*c*c*c*c/120)+5e5,y=s*(_+l*Math.tan(f)*(c*c/2+(5-h+9*u+4*u*u)*c*c*c*c/24+(61-58*h+h*h+600*u-330*o)*c*c*c*c*c*c/720));return t<0&&(y+=1e7),{northing:Math.round(y),easting:Math.round(p),zoneNumber:g,zoneLetter:T1(t)}}function kr(e){var t=e.northing,n=e.easting,i=e.zoneLetter,a=e.zoneNumber;if(a<0||a>60)return null;var s=.9996,r=6378137,o=.00669438,l,h=(1-Math.sqrt(1-o))/(1+Math.sqrt(1-o)),u,c,_,f,d,m,g,p,y,b=n-5e5,v=t;i<"N"&&(v-=1e7),g=(a-1)*6-180+3,l=o/(1-o),m=v/s,p=m/(r*(1-o/4-3*o*o/64-5*o*o*o/256)),y=p+(3*h/2-27*h*h*h/32)*Math.sin(2*p)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*p)+151*h*h*h/96*Math.sin(6*p),u=r/Math.sqrt(1-o*Math.sin(y)*Math.sin(y)),c=Math.tan(y)*Math.tan(y),_=l*Math.cos(y)*Math.cos(y),f=r*(1-o)/Math.pow(1-o*Math.sin(y)*Math.sin(y),1.5),d=b/(u*s);var x=y-u*Math.tan(y)/f*(d*d/2-(5+3*c+10*_-4*_*_-9*l)*d*d*d*d/24+(61+90*c+298*_+45*c*c-252*l-3*_*_)*d*d*d*d*d*d/720);x=vl(x);var M=(d-(1+2*c+_)*d*d*d/6+(5-2*_+28*c-3*_*_+8*l+24*c*c)*d*d*d*d*d/120)/Math.cos(y);M=g+vl(M);var R;if(e.accuracy){var w=kr({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});R={top:w.lat,right:w.lon,bottom:x,left:M}}else R={lat:x,lon:M};return R}function T1(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function P1(e,t){var n="00000"+e.easting,i="00000"+e.northing;return e.zoneNumber+e.zoneLetter+O1(e.easting,e.northing,e.zoneNumber)+n.substr(n.length-5,t)+i.substr(i.length-5,t)}function O1(e,t,n){var i=yu(n),a=Math.floor(e/1e5),s=Math.floor(t/1e5)%20;return N1(a,s,i)}function yu(e){var t=e%yl;return t===0&&(t=yl),t}function N1(e,t,n){var i=n-1,a=du.charCodeAt(i),s=mu.charCodeAt(i),r=a+e-1,o=s+t,l=!1;r>gi&&(r=r-gi+An-1,l=!0),(r===wt||a<wt&&r>wt||(r>wt||a<wt)&&l)&&r++,(r===Gt||a<Gt&&r>Gt||(r>Gt||a<Gt)&&l)&&(r++,r===wt&&r++),r>gi&&(r=r-gi+An-1),o>mi?(o=o-mi+An-1,l=!0):l=!1,(o===wt||s<wt&&o>wt||(o>wt||s<wt)&&l)&&o++,(o===Gt||s<Gt&&o>Gt||(o>Gt||s<Gt)&&l)&&(o++,o===wt&&o++),o>mi&&(o=o-mi+An-1);var h=String.fromCharCode(r)+String.fromCharCode(o);return h}function vu(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,n=null,i="",a,s=0;!/[A-Z]/.test(a=e.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+e;i+=a,s++}var r=parseInt(i,10);if(s===0||s+3>t)throw"MGRSPoint bad conversion from: "+e;var o=e.charAt(s++);if(o<="A"||o==="B"||o==="Y"||o>="Z"||o==="I"||o==="O")throw"MGRSPoint zone letter "+o+" not handled: "+e;n=e.substring(s,s+=2);for(var l=yu(r),h=D1(n.charAt(0),l),u=F1(n.charAt(1),l);u<G1(o);)u+=2e6;var c=t-s;if(c%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var _=c/2,f=0,d=0,m,g,p,y,b;return _>0&&(m=1e5/Math.pow(10,_),g=e.substring(s,s+_),f=parseFloat(g)*m,p=e.substring(s+_),d=parseFloat(p)*m),y=f+h,b=d+u,{easting:y,northing:b,zoneLetter:o,zoneNumber:r,accuracy:m}}function D1(e,t){for(var n=du.charCodeAt(t-1),i=1e5,a=!1;n!==e.charCodeAt(0);){if(n++,n===wt&&n++,n===Gt&&n++,n>gi){if(a)throw"Bad character: "+e;n=An,a=!0}i+=1e5}return i}function F1(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var n=mu.charCodeAt(t-1),i=0,a=!1;n!==e.charCodeAt(0);){if(n++,n===wt&&n++,n===Gt&&n++,n>mi){if(a)throw"Bad character: "+e;n=An,a=!0}i+=1e5}return i}function G1(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function Wn(e,t,n){if(!(this instanceof Wn))return new Wn(e,t,n);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t>"u"){var i=e.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=e,this.y=t,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Wn.fromMGRS=function(e){return new Wn(pu(e))};Wn.prototype.toMGRS=function(e){return gu([this.x,this.y],e)};var B1=1,U1=.25,bl=.046875,xl=.01953125,Ml=.01068115234375,z1=.75,V1=.46875,j1=.013020833333333334,H1=.007120768229166667,W1=.3645833333333333,q1=.005696614583333333,K1=.3076171875;function Tr(e){var t=[];t[0]=B1-e*(U1+e*(bl+e*(xl+e*Ml))),t[1]=e*(z1-e*(bl+e*(xl+e*Ml)));var n=e*e;return t[2]=n*(V1-e*(j1+e*H1)),n*=e,t[3]=n*(W1-e*q1),t[4]=n*e*K1,t}function Yn(e,t,n,i){return n*=t,t*=t,i[0]*e-n*(i[1]+t*(i[2]+t*(i[3]+t*i[4])))}var X1=20;function Pr(e,t,n){for(var i=1/(1-t),a=e,s=X1;s;--s){var r=Math.sin(a),o=1-t*r*r;if(o=(Yn(a,r,Math.cos(a),n)-e)*(o*Math.sqrt(o))*i,a-=o,Math.abs(o)<C)return a}return a}function $1(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Tr(this.es),this.ml0=Yn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Y1(e){var t=e.x,n=e.y,i=L(t-this.long0),a,s,r,o=Math.sin(n),l=Math.cos(n);if(this.es){var u=l*i,c=Math.pow(u,2),_=this.ep2*Math.pow(l,2),f=Math.pow(_,2),d=Math.abs(l)>C?Math.tan(n):0,m=Math.pow(d,2),g=Math.pow(m,2);a=1-this.es*Math.pow(o,2),u=u/Math.sqrt(a);var p=Yn(n,o,l,this.en);s=this.a*(this.k0*u*(1+c/6*(1-m+_+c/20*(5-18*m+g+14*_-58*m*_+c/42*(61+179*g-g*m-479*m)))))+this.x0,r=this.a*(this.k0*(p-this.ml0+o*i*u/2*(1+c/12*(5-m+9*_+4*f+c/30*(61+g-58*m+270*_-330*m*_+c/56*(1385+543*g-g*m-3111*m))))))+this.y0}else{var h=l*Math.sin(i);if(Math.abs(Math.abs(h)-1)<C)return 93;if(s=.5*this.a*this.k0*Math.log((1+h)/(1-h))+this.x0,r=l*Math.cos(i)/Math.sqrt(1-Math.pow(h,2)),h=Math.abs(r),h>=1){if(h-1>C)return 93;r=0}else r=Math.acos(r);n<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return e.x=s,e.y=r,e}function Z1(e){var t,n,i,a,s=(e.x-this.x0)*(1/this.a),r=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+r/this.k0,n=Pr(t,this.es,this.en),Math.abs(n)<S){var c=Math.sin(n),_=Math.cos(n),f=Math.abs(_)>C?Math.tan(n):0,d=this.ep2*Math.pow(_,2),m=Math.pow(d,2),g=Math.pow(f,2),p=Math.pow(g,2);t=1-this.es*Math.pow(c,2);var y=s*Math.sqrt(t)/this.k0,b=Math.pow(y,2);t=t*f,i=n-t*b/(1-this.es)*.5*(1-b/12*(5+3*g-9*d*g+d-4*m-b/30*(61+90*g-252*d*g+45*p+46*d-b/56*(1385+3633*g+4095*p+1574*p*g)))),a=L(this.long0+y*(1-b/6*(1+2*g+d-b/20*(5+28*g+24*p+8*d*g+6*d-b/42*(61+662*g+1320*p+720*p*g))))/_)}else i=S*qi(r),a=0;else{var o=Math.exp(s/this.k0),l=.5*(o-1/o),h=this.lat0+r/this.k0,u=Math.cos(h);t=Math.sqrt((1-Math.pow(u,2))/(1+Math.pow(l,2))),i=Math.asin(t),r<0&&(i=-i),l===0&&u===0?a=0:a=L(Math.atan2(l,u)+this.long0)}return e.x=a,e.y=i,e}var J1=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const wa={init:$1,forward:Y1,inverse:Z1,names:J1};function bu(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function At(e,t){e=Math.abs(e),t=Math.abs(t);var n=Math.max(e,t),i=Math.min(e,t)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))}function Q1(e){var t=1+e,n=t-1;return n===0?e:e*Math.log(t)/n}function tg(e){var t=Math.abs(e);return t=Q1(t*(1+t/(At(1,t)+1))),e<0?-t:t}function Or(e,t){for(var n=2*Math.cos(2*t),i=e.length-1,a=e[i],s=0,r;--i>=0;)r=-s+n*a+e[i],s=a,a=r;return t+r*Math.sin(2*t)}function eg(e,t){for(var n=2*Math.cos(t),i=e.length-1,a=e[i],s=0,r;--i>=0;)r=-s+n*a+e[i],s=a,a=r;return Math.sin(t)*r}function ng(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function xu(e,t,n){for(var i=Math.sin(t),a=Math.cos(t),s=bu(n),r=ng(n),o=2*a*r,l=-2*i*s,h=e.length-1,u=e[h],c=0,_=0,f=0,d,m;--h>=0;)d=_,m=c,_=u,c=f,u=-d+o*_-l*c+e[h],f=-m+l*_+o*c;return o=i*r,l=a*s,[o*u-l*f,o*f+l*u]}function ig(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(wa.init.apply(this),this.forward=wa.forward,this.inverse=wa.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),n=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),n=n*t,this.cgb[1]=n*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=n*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),n=n*t,this.cgb[2]=n*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=n*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),n=n*t,this.cgb[3]=n*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=n*(1237/630+t*(-12/5+t*(-24832/14175))),n=n*t,this.cgb[4]=n*(4174/315+t*(-144838/6237)),this.cbg[4]=n*(-734/315+t*(109598/31185)),n=n*t,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=n*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=n*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),n=n*t,this.utg[2]=n*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=n*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),n=n*t,this.utg[3]=n*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=n*(49561/161280+t*(-179/168+t*(6601661/7257600))),n=n*t,this.utg[4]=n*(-4583/161280+t*(108847/3991680)),this.gtu[4]=n*(34729/80640+t*(-3418889/1995840)),n=n*t,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var i=Or(this.cbg,this.lat0);this.Zb=-this.Qn*(i+eg(this.gtu,2*i))}function ag(e){var t=L(e.x-this.long0),n=e.y;n=Or(this.cbg,n);var i=Math.sin(n),a=Math.cos(n),s=Math.sin(t),r=Math.cos(t);n=Math.atan2(i,r*a),t=Math.atan2(s*a,At(i,a*r)),t=tg(Math.tan(t));var o=xu(this.gtu,2*n,2*t);n=n+o[0],t=t+o[1];var l,h;return Math.abs(t)<=2.623395162778?(l=this.a*(this.Qn*t)+this.x0,h=this.a*(this.Qn*n+this.Zb)+this.y0):(l=1/0,h=1/0),e.x=l,e.y=h,e}function sg(e){var t=(e.x-this.x0)*(1/this.a),n=(e.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,t=t/this.Qn;var i,a;if(Math.abs(t)<=2.623395162778){var s=xu(this.utg,2*n,2*t);n=n+s[0],t=t+s[1],t=Math.atan(bu(t));var r=Math.sin(n),o=Math.cos(n),l=Math.sin(t),h=Math.cos(t);n=Math.atan2(r*h,At(l,h*o)),t=Math.atan2(l,h*o),i=L(t+this.long0),a=Or(this.cgb,n)}else i=1/0,a=1/0;return e.x=i,e.y=a,e}var rg=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const Ea={init:ig,forward:ag,inverse:sg,names:rg};function og(e,t){if(e===void 0){if(e=Math.floor((L(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var lg="etmerc";function hg(){var e=og(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*ot,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Ea.init.apply(this),this.forward=Ea.forward,this.inverse=Ea.inverse}var ug=["Universal Transverse Mercator System","utm"];const cg={init:hg,names:ug,dependsOn:lg};function Nr(e,t){return Math.pow((1-e)/(1+e),t)}var _g=20;function fg(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+X)/(Math.pow(Math.tan(.5*this.lat0+X),this.C)*Nr(this.e*e,this.ratexp))}function dg(e){var t=e.x,n=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+X),this.C)*Nr(this.e*Math.sin(n),this.ratexp))-S,e.x=this.C*t,e}function mg(e){for(var t=1e-14,n=e.x/this.C,i=e.y,a=Math.pow(Math.tan(.5*i+X)/this.K,1/this.C),s=_g;s>0&&(i=2*Math.atan(a*Nr(this.e*Math.sin(e.y),-.5*this.e))-S,!(Math.abs(i-e.y)<t));--s)e.y=i;return s?(e.x=n,e.y=i,e):null}const Dr={init:fg,forward:dg,inverse:mg};function gg(){Dr.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function pg(e){var t,n,i,a;return e.x=L(e.x-this.long0),Dr.forward.apply(this,[e]),t=Math.sin(e.y),n=Math.cos(e.y),i=Math.cos(e.x),a=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*n*i),e.x=a*n*Math.sin(e.x),e.y=a*(this.cosc0*t-this.sinc0*n*i),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function yg(e){var t,n,i,a,s;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,s=At(e.x,e.y)){var r=2*Math.atan2(s,this.R2);t=Math.sin(r),n=Math.cos(r),a=Math.asin(n*this.sinc0+e.y*t*this.cosc0/s),i=Math.atan2(e.x*t,s*this.cosc0*n-e.y*this.sinc0*t)}else a=this.phic0,i=0;return e.x=i,e.y=a,Dr.inverse.apply(this,[e]),e.x=L(e.x+this.long0),e}var vg=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const bg={init:gg,forward:pg,inverse:yg,names:vg};function xg(e,t,n){return t*=n,Math.tan(.5*(S+e))*Math.pow((1-t)/(1+t),.5*n)}function Mg(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=C&&(this.k0=.5*(1+qi(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=C&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=C&&Math.abs(Math.cos(this.lat_ts))>C&&(this.k0=.5*this.cons*he(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Yt(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=he(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-S,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function wg(e){var t=e.x,n=e.y,i=Math.sin(n),a=Math.cos(n),s,r,o,l,h,u,c=L(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=C&&Math.abs(n+this.lat0)<=C?(e.x=NaN,e.y=NaN,e):this.sphere?(s=2*this.k0/(1+this.sinlat0*i+this.coslat0*a*Math.cos(c)),e.x=this.a*s*a*Math.sin(c)+this.x0,e.y=this.a*s*(this.coslat0*i-this.sinlat0*a*Math.cos(c))+this.y0,e):(r=2*Math.atan(this.ssfn_(n,i,this.e))-S,l=Math.cos(r),o=Math.sin(r),Math.abs(this.coslat0)<=C?(h=Yt(this.e,n*this.con,this.con*i),u=2*this.a*this.k0*h/this.cons,e.x=this.x0+u*Math.sin(t-this.long0),e.y=this.y0-this.con*u*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<C?(s=2*this.a*this.k0/(1+l*Math.cos(c)),e.y=s*o):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*l*Math.cos(c))),e.y=s*(this.cosX0*o-this.sinX0*l*Math.cos(c))+this.y0),e.x=s*l*Math.sin(c)+this.x0,e))}function Eg(e){e.x-=this.x0,e.y-=this.y0;var t,n,i,a,s,r=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var o=2*Math.atan(r/(2*this.a*this.k0));return t=this.long0,n=this.lat0,r<=C?(e.x=t,e.y=n,e):(n=Math.asin(Math.cos(o)*this.sinlat0+e.y*Math.sin(o)*this.coslat0/r),Math.abs(this.coslat0)<C?this.lat0>0?t=L(this.long0+Math.atan2(e.x,-1*e.y)):t=L(this.long0+Math.atan2(e.x,e.y)):t=L(this.long0+Math.atan2(e.x*Math.sin(o),r*this.coslat0*Math.cos(o)-e.y*this.sinlat0*Math.sin(o))),e.x=t,e.y=n,e)}else if(Math.abs(this.coslat0)<=C){if(r<=C)return n=this.lat0,t=this.long0,e.x=t,e.y=n,e;e.x*=this.con,e.y*=this.con,i=r*this.cons/(2*this.a*this.k0),n=this.con*Gi(this.e,i),t=this.con*L(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else a=2*Math.atan(r*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,r<=C?s=this.X0:(s=Math.asin(Math.cos(a)*this.sinX0+e.y*Math.sin(a)*this.cosX0/r),t=L(this.long0+Math.atan2(e.x*Math.sin(a),r*this.cosX0*Math.cos(a)-e.y*this.sinX0*Math.sin(a)))),n=-1*Gi(this.e,Math.tan(.5*(S+s)));return e.x=t,e.y=n,e}var Sg=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const Rg={init:Mg,forward:wg,inverse:Eg,names:Sg,ssfn_:xg};function Ig(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),n=this.a,i=this.rf,a=1/i,s=2*a-Math.pow(a,2),r=this.e=Math.sqrt(s);this.R=this.k0*n*Math.sqrt(1-s)/(1-s*Math.pow(t,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+e/2)),h=Math.log((1+r*t)/(1-r*t));this.K=o-this.alpha*l+this.alpha*r/2*h}function Ag(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),i=-this.alpha*(t+n)+this.K,a=2*(Math.atan(Math.exp(i))-Math.PI/4),s=this.alpha*(e.x-this.lambda0),r=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(a)+Math.cos(this.b0)*Math.cos(s))),o=Math.asin(Math.cos(this.b0)*Math.sin(a)-Math.sin(this.b0)*Math.cos(a)*Math.cos(s));return e.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,e.x=this.R*r+this.x0,e}function Cg(e){for(var t=e.x-this.x0,n=e.y-this.y0,i=t/this.R,a=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(a)+Math.sin(this.b0)*Math.cos(a)*Math.cos(i)),r=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(a))),o=this.lambda0+r/this.alpha,l=0,h=s,u=-1e3,c=0;Math.abs(h-u)>1e-7;){if(++c>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),u=h,h=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=o,e.y=h,e}var Lg=["somerc"];const kg={init:Ig,forward:Ag,inverse:Cg,names:Lg};var xn=1e-7;function Tg(e){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof e.PROJECTION=="object"?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||t.indexOf(n)!==-1}function Pg(){var e,t,n,i,a,s,r,o,l,h,u=0,c,_=0,f=0,d=0,m=0,g=0,p=0;this.no_off=Tg(this),this.no_rot="no_rot"in this;var y=!1;"alpha"in this&&(y=!0);var b=!1;if("rectified_grid_angle"in this&&(b=!0),y&&(p=this.alpha),b&&(u=this.rectified_grid_angle*ot),y||b)_=this.longc;else if(f=this.long1,m=this.lat1,d=this.long2,g=this.lat2,Math.abs(m-g)<=xn||(e=Math.abs(m))<=xn||Math.abs(e-S)<=xn||Math.abs(Math.abs(this.lat0)-S)<=xn||Math.abs(Math.abs(g)-S)<=xn)throw new Error;var v=1-this.es;t=Math.sqrt(v),Math.abs(this.lat0)>C?(o=Math.sin(this.lat0),n=Math.cos(this.lat0),e=1-this.es*o*o,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/v),this.A=this.B*this.k0*t/e,i=this.B*t/(n*Math.sqrt(e)),a=i*i-1,a<=0?a=0:(a=Math.sqrt(a),this.lat0<0&&(a=-a)),this.E=a+=i,this.E*=Math.pow(Yt(this.e,this.lat0,o),this.B)):(this.B=1/t,this.A=this.k0,this.E=i=a=1),y||b?(y?(c=Math.asin(Math.sin(p)/i),b||(u=p)):(c=u,p=Math.asin(i*Math.sin(c))),this.lam0=_-Math.asin(.5*(a-1/a)*Math.tan(c))/this.B):(s=Math.pow(Yt(this.e,m,Math.sin(m)),this.B),r=Math.pow(Yt(this.e,g,Math.sin(g)),this.B),a=this.E/s,l=(r-s)/(r+s),h=this.E*this.E,h=(h-r*s)/(h+r*s),e=f-d,e<-Math.pi?d-=Di:e>Math.pi&&(d+=Di),this.lam0=L(.5*(f+d)-Math.atan(h*Math.tan(.5*this.B*(f-d))/l)/this.B),c=Math.atan(2*Math.sin(this.B*L(f-this.lam0))/(a-1/a)),u=p=Math.asin(i*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(u),this.cosrot=Math.cos(u),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(p))),this.lat0<0&&(this.u_0=-this.u_0)),a=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(X-a)),this.v_pole_s=this.ArB*Math.log(Math.tan(X+a))}function Og(e){var t={},n,i,a,s,r,o,l,h;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-S)>C){if(r=this.E/Math.pow(Yt(this.e,e.y,Math.sin(e.y)),this.B),o=1/r,n=.5*(r-o),i=.5*(r+o),s=Math.sin(this.B*e.x),a=(n*this.singam-s*this.cosgam)/i,Math.abs(Math.abs(a)-1)<C)throw new Error;h=.5*this.ArB*Math.log((1-a)/(1+a)),o=Math.cos(this.B*e.x),Math.abs(o)<xn?l=this.A*e.x:l=this.ArB*Math.atan2(n*this.cosgam+s*this.singam,o)}else h=e.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*e.y;return this.no_rot?(t.x=l,t.y=h):(l-=this.u_0,t.x=h*this.cosrot+l*this.sinrot,t.y=l*this.cosrot-h*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function Ng(e){var t,n,i,a,s,r,o,l={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(n=e.y,t=e.x):(n=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*n),a=.5*(i-1/i),s=.5*(i+1/i),r=Math.sin(this.BrA*t),o=(r*this.cosgam+a*this.singam)/s,Math.abs(Math.abs(o)-1)<C)l.x=0,l.y=o<0?-S:S;else{if(l.y=this.E/Math.sqrt((1+o)/(1-o)),l.y=Gi(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(a*this.cosgam-r*this.singam,Math.cos(this.BrA*t))}return l.x+=this.lam0,l}var Dg=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const Fg={init:Pg,forward:Og,inverse:Ng,names:Dg};function Gg(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<C)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),n=Math.cos(this.lat1),i=he(this.e,t,n),a=Yt(this.e,this.lat1,t),s=Math.sin(this.lat2),r=Math.cos(this.lat2),o=he(this.e,s,r),l=Yt(this.e,this.lat2,s),h=Yt(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>C?this.ns=Math.log(i/o)/Math.log(a/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=i/(this.ns*Math.pow(a,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function Bg(e){var t=e.x,n=e.y;Math.abs(2*Math.abs(n)-Math.PI)<=C&&(n=qi(n)*(S-2*C));var i=Math.abs(Math.abs(n)-S),a,s;if(i>C)a=Yt(this.e,n,Math.sin(n)),s=this.a*this.f0*Math.pow(a,this.ns);else{if(i=n*this.ns,i<=0)return null;s=0}var r=this.ns*L(t-this.long0);return e.x=this.k0*(s*Math.sin(r))+this.x0,e.y=this.k0*(this.rh-s*Math.cos(r))+this.y0,e}function Ug(e){var t,n,i,a,s,r=(e.x-this.x0)/this.k0,o=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(r*r+o*o),n=1):(t=-Math.sqrt(r*r+o*o),n=-1);var l=0;if(t!==0&&(l=Math.atan2(n*r,n*o)),t!==0||this.ns>0){if(n=1/this.ns,i=Math.pow(t/(this.a*this.f0),n),a=Gi(this.e,i),a===-9999)return null}else a=-S;return s=L(l/this.ns+this.long0),e.x=s,e.y=a,e}var zg=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const Vg={init:Gg,forward:Bg,inverse:Ug,names:zg};function jg(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Hg(e){var t,n,i,a,s,r,o,l=e.x,h=e.y,u=L(l-this.long0);return t=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/t)-this.s45),i=-u*this.alfa,a=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),s=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(a)),r=this.n*s,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(a/2+this.s45),this.n),e.y=o*Math.cos(r)/1,e.x=o*Math.sin(r)/1,this.czech||(e.y*=-1,e.x*=-1),e}function Wg(e){var t,n,i,a,s,r,o,l,h=e.x;e.x=e.y,e.y=h,this.czech||(e.y*=-1,e.x*=-1),r=Math.sqrt(e.x*e.x+e.y*e.y),s=Math.atan2(e.y,e.x),a=s/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/r,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(a)),n=Math.asin(Math.cos(i)*Math.sin(a)/Math.cos(t)),e.x=this.long0-n/this.alfa,o=t,l=0;var u=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-e.y)<1e-10&&(l=1),o=e.y,u+=1;while(l===0&&u<15);return u>=15?null:e}var qg=["Krovak","krovak"];const Kg={init:jg,forward:Hg,inverse:Wg,names:qg};function bt(e,t,n,i,a){return e*a-t*Math.sin(2*a)+n*Math.sin(4*a)-i*Math.sin(6*a)}function Ki(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function Xi(e){return .375*e*(1+.25*e*(1+.46875*e))}function $i(e){return .05859375*e*e*(1+.75*e)}function Yi(e){return e*e*e*(35/3072)}function qn(e,t,n){var i=t*n;return e/Math.sqrt(1-i*i)}function Ue(e){return Math.abs(e)<S?e:e-qi(e)*Math.PI}function Ga(e,t,n,i,a){var s,r;s=e/t;for(var o=0;o<15;o++)if(r=(e-(t*s-n*Math.sin(2*s)+i*Math.sin(4*s)-a*Math.sin(6*s)))/(t-2*n*Math.cos(2*s)+4*i*Math.cos(4*s)-6*a*Math.cos(6*s)),s+=r,Math.abs(r)<=1e-10)return s;return NaN}function Xg(){this.sphere||(this.e0=Ki(this.es),this.e1=Xi(this.es),this.e2=$i(this.es),this.e3=Yi(this.es),this.ml0=this.a*bt(this.e0,this.e1,this.e2,this.e3,this.lat0))}function $g(e){var t,n,i=e.x,a=e.y;if(i=L(i-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(a)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(a),Math.cos(i))-this.lat0);else{var s=Math.sin(a),r=Math.cos(a),o=qn(this.a,this.e,s),l=Math.tan(a)*Math.tan(a),h=i*Math.cos(a),u=h*h,c=this.es*r*r/(1-this.es),_=this.a*bt(this.e0,this.e1,this.e2,this.e3,a);t=o*h*(1-u*l*(1/6-(8-l+8*c)*u/120)),n=_-this.ml0+o*s/r*u*(.5+(5-l+6*c)*u/24)}return e.x=t+this.x0,e.y=n+this.y0,e}function Yg(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,n=e.y/this.a,i,a;if(this.sphere){var s=n+this.lat0;i=Math.asin(Math.sin(s)*Math.cos(t)),a=Math.atan2(Math.tan(t),Math.cos(s))}else{var r=this.ml0/this.a+n,o=Ga(r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-S)<=C)return e.x=this.long0,e.y=S,n<0&&(e.y*=-1),e;var l=qn(this.a,this.e,Math.sin(o)),h=l*l*l/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(o),2),c=t*this.a/l,_=c*c;i=o-l*Math.tan(o)/h*c*c*(.5-(1+3*u)*c*c/24),a=c*(1-_*(u/3+(1+3*u)*u*_/15))/Math.cos(o)}return e.x=L(a+this.long0),e.y=Ue(i),e}var Zg=["Cassini","Cassini_Soldner","cass"];const Jg={init:Xg,forward:$g,inverse:Yg,names:Zg};function Pe(e,t){var n;return e>1e-7?(n=e*t,(1-e*e)*(t/(1-n*n)-.5/e*Math.log((1-n)/(1+n)))):2*t}var Qg=1,t2=2,e2=3,n2=4;function i2(){var e=Math.abs(this.lat0);if(Math.abs(e-S)<C?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<C?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=Pe(this.e,1),this.mmf=.5/(1-this.es),this.apa=_2(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Pe(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function a2(e){var t,n,i,a,s,r,o,l,h,u,c=e.x,_=e.y;if(c=L(c-this.long0),this.sphere){if(s=Math.sin(_),u=Math.cos(_),i=Math.cos(c),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+u*i:1+this.sinph0*s+this.cosph0*u*i,n<=C)return null;n=Math.sqrt(2/n),t=n*u*Math.sin(c),n*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*u*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(_+this.lat0)<C)return null;n=X-_*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),t=n*Math.sin(c),n*=i}}else{switch(o=0,l=0,h=0,i=Math.cos(c),a=Math.sin(c),s=Math.sin(_),r=Pe(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=r/this.qp,l=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:h=1+this.sinb1*o+this.cosb1*l*i;break;case this.EQUIT:h=1+l*i;break;case this.N_POLE:h=S+_,r=this.qp-r;break;case this.S_POLE:h=_-S,r=this.qp+r;break}if(Math.abs(h)<C)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),this.mode===this.OBLIQ?n=this.ymf*h*(this.cosb1*o-this.sinb1*l*i):n=(h=Math.sqrt(2/(1+l*i)))*o*this.ymf,t=this.xmf*h*l*a;break;case this.N_POLE:case this.S_POLE:r>=0?(t=(h=Math.sqrt(r))*a,n=i*(this.mode===this.S_POLE?h:-h)):t=n=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*n+this.y0,e}function s2(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,n=e.y/this.a,i,a,s,r,o,l,h;if(this.sphere){var u=0,c,_=0;if(c=Math.sqrt(t*t+n*n),a=c*.5,a>1)return null;switch(a=2*Math.asin(a),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(_=Math.sin(a),u=Math.cos(a)),this.mode){case this.EQUIT:a=Math.abs(c)<=C?0:Math.asin(n*_/c),t*=_,n=u*c;break;case this.OBLIQ:a=Math.abs(c)<=C?this.lat0:Math.asin(u*this.sinph0+n*_*this.cosph0/c),t*=_*this.cosph0,n=(u-Math.sin(a)*this.sinph0)*c;break;case this.N_POLE:n=-n,a=S-a;break;case this.S_POLE:a-=S;break}i=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,n)}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,n*=this.dd,l=Math.sqrt(t*t+n*n),l<C)return e.x=this.long0,e.y=this.lat0,e;r=2*Math.asin(.5*l/this.rq),s=Math.cos(r),t*=r=Math.sin(r),this.mode===this.OBLIQ?(h=s*this.sinb1+n*r*this.cosb1/l,o=this.qp*h,n=l*this.cosb1*s-n*this.sinb1*r):(h=n*r/l,o=this.qp*h,n=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),o=t*t+n*n,!o)return e.x=this.long0,e.y=this.lat0,e;h=1-o/this.qp,this.mode===this.S_POLE&&(h=-h)}i=Math.atan2(t,n),a=f2(Math.asin(h),this.apa)}return e.x=L(this.long0+i),e.y=a,e}var r2=.3333333333333333,o2=.17222222222222222,l2=.10257936507936508,h2=.06388888888888888,u2=.0664021164021164,c2=.016415012942191543;function _2(e){var t,n=[];return n[0]=e*r2,t=e*e,n[0]+=t*o2,n[1]=t*h2,t*=e,n[0]+=t*l2,n[1]+=t*u2,n[2]=t*c2,n}function f2(e,t){var n=e+e;return e+t[0]*Math.sin(n)+t[1]*Math.sin(n+n)+t[2]*Math.sin(n+n+n)}var d2=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const m2={init:i2,forward:a2,inverse:s2,names:d2,S_POLE:Qg,N_POLE:t2,EQUIT:e2,OBLIQ:n2};function De(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function g2(){Math.abs(this.lat1+this.lat2)<C||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=he(this.e3,this.sin_po,this.cos_po),this.qs1=Pe(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=he(this.e3,this.sin_po,this.cos_po),this.qs2=Pe(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Pe(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>C?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function p2(e){var t=e.x,n=e.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=Pe(this.e3,this.sin_phi),a=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,s=this.ns0*L(t-this.long0),r=a*Math.sin(s)+this.x0,o=this.rh-a*Math.cos(s)+this.y0;return e.x=r,e.y=o,e}function y2(e){var t,n,i,a,s,r;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),i=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),i=-1),a=0,t!==0&&(a=Math.atan2(i*e.x,i*e.y)),i=t*this.ns0/this.a,this.sphere?r=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,r=this.phi1z(this.e3,n)),s=L(a/this.ns0+this.long0),e.x=s,e.y=r,e}function v2(e,t){var n,i,a,s,r,o=De(.5*t);if(e<C)return o;for(var l=e*e,h=1;h<=25;h++)if(n=Math.sin(o),i=Math.cos(o),a=e*n,s=1-a*a,r=.5*s*s/i*(t/(1-l)-n/s+.5/e*Math.log((1-a)/(1+a))),o=o+r,Math.abs(r)<=1e-7)return o;return null}var b2=["Albers_Conic_Equal_Area","Albers","aea"];const x2={init:g2,forward:p2,inverse:y2,names:b2,phi1z:v2};function M2(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function w2(e){var t,n,i,a,s,r,o,l,h=e.x,u=e.y;return i=L(h-this.long0),t=Math.sin(u),n=Math.cos(u),a=Math.cos(i),r=this.sin_p14*t+this.cos_p14*n*a,s=1,r>0||Math.abs(r)<=C?(o=this.x0+this.a*s*n*Math.sin(i)/r,l=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*n*a)/r):(o=this.x0+this.infinity_dist*n*Math.sin(i),l=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*n*a)),e.x=o,e.y=l,e}function E2(e){var t,n,i,a,s,r;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(a=Math.atan2(t,this.rc),n=Math.sin(a),i=Math.cos(a),r=De(i*this.sin_p14+e.y*n*this.cos_p14/t),s=Math.atan2(e.x*n,t*this.cos_p14*i-e.y*this.sin_p14*n),s=L(this.long0+s)):(r=this.phic0,s=0),e.x=s,e.y=r,e}var S2=["gnom"];const R2={init:M2,forward:w2,inverse:E2,names:S2};function I2(e,t){var n=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-n)<1e-6)return t<0?-1*S:S;for(var i=Math.asin(.5*t),a,s,r,o,l=0;l<30;l++)if(s=Math.sin(i),r=Math.cos(i),o=e*s,a=Math.pow(1-o*o,2)/(2*r)*(t/(1-e*e)-s/(1-o*o)+.5/e*Math.log((1-o)/(1+o))),i+=a,Math.abs(a)<=1e-10)return i;return NaN}function A2(){this.sphere||(this.k0=he(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function C2(e){var t=e.x,n=e.y,i,a,s=L(t-this.long0);if(this.sphere)i=this.x0+this.a*s*Math.cos(this.lat_ts),a=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var r=Pe(this.e,Math.sin(n));i=this.x0+this.a*this.k0*s,a=this.y0+this.a*r*.5/this.k0}return e.x=i,e.y=a,e}function L2(e){e.x-=this.x0,e.y-=this.y0;var t,n;return this.sphere?(t=L(this.long0+e.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(n=I2(this.e,2*e.y*this.k0/this.a),t=L(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=n,e}var k2=["cea"];const T2={init:A2,forward:C2,inverse:L2,names:k2};function P2(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function O2(e){var t=e.x,n=e.y,i=L(t-this.long0),a=Ue(n-this.lat0);return e.x=this.x0+this.a*i*this.rc,e.y=this.y0+this.a*a,e}function N2(e){var t=e.x,n=e.y;return e.x=L(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=Ue(this.lat0+(n-this.y0)/this.a),e}var D2=["Equirectangular","Equidistant_Cylindrical","eqc"];const F2={init:P2,forward:O2,inverse:N2,names:D2};var wl=20;function G2(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ki(this.es),this.e1=Xi(this.es),this.e2=$i(this.es),this.e3=Yi(this.es),this.ml0=this.a*bt(this.e0,this.e1,this.e2,this.e3,this.lat0)}function B2(e){var t=e.x,n=e.y,i,a,s,r=L(t-this.long0);if(s=r*Math.sin(n),this.sphere)Math.abs(n)<=C?(i=this.a*r,a=-1*this.a*this.lat0):(i=this.a*Math.sin(s)/Math.tan(n),a=this.a*(Ue(n-this.lat0)+(1-Math.cos(s))/Math.tan(n)));else if(Math.abs(n)<=C)i=this.a*r,a=-1*this.ml0;else{var o=qn(this.a,this.e,Math.sin(n))/Math.tan(n);i=o*Math.sin(s),a=this.a*bt(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+o*(1-Math.cos(s))}return e.x=i+this.x0,e.y=a+this.y0,e}function U2(e){var t,n,i,a,s,r,o,l,h;if(i=e.x-this.x0,a=e.y-this.y0,this.sphere)if(Math.abs(a+this.a*this.lat0)<=C)t=L(i/this.a+this.long0),n=0;else{r=this.lat0+a/this.a,o=i*i/this.a/this.a+r*r,l=r;var u;for(s=wl;s;--s)if(u=Math.tan(l),h=-1*(r*(l*u+1)-l-.5*(l*l+o)*u)/((l-r)/u-1),l+=h,Math.abs(h)<=C){n=l;break}t=L(this.long0+Math.asin(i*Math.tan(l)/this.a)/Math.sin(n))}else if(Math.abs(a+this.ml0)<=C)n=0,t=L(this.long0+i/this.a);else{r=(this.ml0+a)/this.a,o=i*i/this.a/this.a+r*r,l=r;var c,_,f,d,m;for(s=wl;s;--s)if(m=this.e*Math.sin(l),c=Math.sqrt(1-m*m)*Math.tan(l),_=this.a*bt(this.e0,this.e1,this.e2,this.e3,l),f=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),d=_/this.a,h=(r*(c*d+1)-d-.5*c*(d*d+o))/(this.es*Math.sin(2*l)*(d*d+o-2*r*d)/(4*c)+(r-d)*(c*f-2/Math.sin(2*l))-f),l-=h,Math.abs(h)<=C){n=l;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),t=L(this.long0+Math.asin(i*c/this.a)/Math.sin(n))}return e.x=t,e.y=n,e}var z2=["Polyconic","poly"];const V2={init:G2,forward:B2,inverse:U2,names:z2};function j2(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function H2(e){var t,n=e.x,i=e.y,a=i-this.lat0,s=n-this.long0,r=a/bi*1e-5,o=s,l=1,h=0;for(t=1;t<=10;t++)l=l*r,h=h+this.A[t]*l;var u=h,c=o,_=1,f=0,d,m,g=0,p=0;for(t=1;t<=6;t++)d=_*u-f*c,m=f*u+_*c,_=d,f=m,g=g+this.B_re[t]*_-this.B_im[t]*f,p=p+this.B_im[t]*_+this.B_re[t]*f;return e.x=p*this.a+this.x0,e.y=g*this.a+this.y0,e}function W2(e){var t,n=e.x,i=e.y,a=n-this.x0,s=i-this.y0,r=s/this.a,o=a/this.a,l=1,h=0,u,c,_=0,f=0;for(t=1;t<=6;t++)u=l*r-h*o,c=h*r+l*o,l=u,h=c,_=_+this.C_re[t]*l-this.C_im[t]*h,f=f+this.C_im[t]*l+this.C_re[t]*h;for(var d=0;d<this.iterations;d++){var m=_,g=f,p,y,b=r,v=o;for(t=2;t<=6;t++)p=m*_-g*f,y=g*_+m*f,m=p,g=y,b=b+(t-1)*(this.B_re[t]*m-this.B_im[t]*g),v=v+(t-1)*(this.B_im[t]*m+this.B_re[t]*g);m=1,g=0;var x=this.B_re[1],M=this.B_im[1];for(t=2;t<=6;t++)p=m*_-g*f,y=g*_+m*f,m=p,g=y,x=x+t*(this.B_re[t]*m-this.B_im[t]*g),M=M+t*(this.B_im[t]*m+this.B_re[t]*g);var R=x*x+M*M;_=(b*x+v*M)/R,f=(v*x-b*M)/R}var w=_,I=f,k=1,T=0;for(t=1;t<=9;t++)k=k*w,T=T+this.D[t]*k;var P=this.lat0+T*bi*1e5,B=this.long0+I;return e.x=B,e.y=P,e}var q2=["New_Zealand_Map_Grid","nzmg"];const K2={init:j2,forward:H2,inverse:W2,names:q2};function X2(){}function $2(e){var t=e.x,n=e.y,i=L(t-this.long0),a=this.x0+this.a*i,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return e.x=a,e.y=s,e}function Y2(e){e.x-=this.x0,e.y-=this.y0;var t=L(this.long0+e.x/this.a),n=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=n,e}var Z2=["Miller_Cylindrical","mill"];const J2={init:X2,forward:$2,inverse:Y2,names:Z2};var Q2=20;function t3(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Tr(this.es)}function e3(e){var t,n,i=e.x,a=e.y;if(i=L(i-this.long0),this.sphere){if(!this.m)a=this.n!==1?Math.asin(this.n*Math.sin(a)):a;else for(var s=this.n*Math.sin(a),r=Q2;r;--r){var o=(this.m*a+Math.sin(a)-s)/(this.m+Math.cos(a));if(a-=o,Math.abs(o)<C)break}t=this.a*this.C_x*i*(this.m+Math.cos(a)),n=this.a*this.C_y*a}else{var l=Math.sin(a),h=Math.cos(a);n=this.a*Yn(a,l,h,this.en),t=this.a*i*h/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=n,e}function n3(e){var t,n,i,a;return e.x-=this.x0,i=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(t))),this.m?t=De((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=De(Math.sin(t)/this.n)),i=L(i+this.long0),t=Ue(t)):(t=Pr(e.y/this.a,this.es,this.en),a=Math.abs(t),a<S?(a=Math.sin(t),n=this.long0+e.x*Math.sqrt(1-this.es*a*a)/(this.a*Math.cos(t)),i=L(n)):a-C<S&&(i=this.long0)),e.x=i,e.y=t,e}var i3=["Sinusoidal","sinu"];const a3={init:t3,forward:e3,inverse:n3,names:i3};function s3(){}function r3(e){for(var t=e.x,n=e.y,i=L(t-this.long0),a=n,s=Math.PI*Math.sin(n);;){var r=-(a+Math.sin(a)-s)/(1+Math.cos(a));if(a+=r,Math.abs(r)<C)break}a/=2,Math.PI/2-Math.abs(n)<C&&(i=0);var o=.900316316158*this.a*i*Math.cos(a)+this.x0,l=1.4142135623731*this.a*Math.sin(a)+this.y0;return e.x=o,e.y=l,e}function o3(e){var t,n;e.x-=this.x0,e.y-=this.y0,n=e.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),t=Math.asin(n);var i=L(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*t+Math.sin(2*t))/Math.PI,Math.abs(n)>1&&(n=1);var a=Math.asin(n);return e.x=i,e.y=a,e}var l3=["Mollweide","moll"];const h3={init:s3,forward:r3,inverse:o3,names:l3};function u3(){Math.abs(this.lat1+this.lat2)<C||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ki(this.es),this.e1=Xi(this.es),this.e2=$i(this.es),this.e3=Yi(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=he(this.e,this.sinphi,this.cosphi),this.ml1=bt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<C?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=he(this.e,this.sinphi,this.cosphi),this.ml2=bt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=bt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function c3(e){var t=e.x,n=e.y,i;if(this.sphere)i=this.a*(this.g-n);else{var a=bt(this.e0,this.e1,this.e2,this.e3,n);i=this.a*(this.g-a)}var s=this.ns*L(t-this.long0),r=this.x0+i*Math.sin(s),o=this.y0+this.rh-i*Math.cos(s);return e.x=r,e.y=o,e}function _3(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,n,i,a;this.ns>=0?(n=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(n=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var s=0;if(n!==0&&(s=Math.atan2(t*e.x,t*e.y)),this.sphere)return a=L(this.long0+s/this.ns),i=Ue(this.g-n/this.a),e.x=a,e.y=i,e;var r=this.g-n/this.a;return i=Ga(r,this.e0,this.e1,this.e2,this.e3),a=L(this.long0+s/this.ns),e.x=a,e.y=i,e}var f3=["Equidistant_Conic","eqdc"];const d3={init:u3,forward:c3,inverse:_3,names:f3};function m3(){this.R=this.a}function g3(e){var t=e.x,n=e.y,i=L(t-this.long0),a,s;Math.abs(n)<=C&&(a=this.x0+this.R*i,s=this.y0);var r=De(2*Math.abs(n/Math.PI));(Math.abs(i)<=C||Math.abs(Math.abs(n)-S)<=C)&&(a=this.x0,n>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*r):s=this.y0+Math.PI*this.R*-Math.tan(.5*r));var o=.5*Math.abs(Math.PI/i-i/Math.PI),l=o*o,h=Math.sin(r),u=Math.cos(r),c=u/(h+u-1),_=c*c,f=c*(2/h-1),d=f*f,m=Math.PI*this.R*(o*(c-d)+Math.sqrt(l*(c-d)*(c-d)-(d+l)*(_-d)))/(d+l);i<0&&(m=-m),a=this.x0+m;var g=l+c;return m=Math.PI*this.R*(f*g-o*Math.sqrt((d+l)*(l+1)-g*g))/(d+l),n>=0?s=this.y0+m:s=this.y0-m,e.x=a,e.y=s,e}function p3(e){var t,n,i,a,s,r,o,l,h,u,c,_,f;return e.x-=this.x0,e.y-=this.y0,c=Math.PI*this.R,i=e.x/c,a=e.y/c,s=i*i+a*a,r=-Math.abs(a)*(1+s),o=r-2*a*a+i*i,l=-2*r+1+2*a*a+s*s,f=a*a/l+(2*o*o*o/l/l/l-9*r*o/l/l)/27,h=(r-o*o/3/l)/l,u=2*Math.sqrt(-h/3),c=3*f/h/u,Math.abs(c)>1&&(c>=0?c=1:c=-1),_=Math.acos(c)/3,e.y>=0?n=(-u*Math.cos(_+Math.PI/3)-o/3/l)*Math.PI:n=-(-u*Math.cos(_+Math.PI/3)-o/3/l)*Math.PI,Math.abs(i)<C?t=this.long0:t=L(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(i*i-a*a)+s*s))/2/i),e.x=t,e.y=n,e}var y3=["Van_der_Grinten_I","VanDerGrinten","vandg"];const v3={init:m3,forward:g3,inverse:p3,names:y3};function b3(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function x3(e){var t=e.x,n=e.y,i=Math.sin(e.y),a=Math.cos(e.y),s=L(t-this.long0),r,o,l,h,u,c,_,f,d,m,g,p,y,b,v,x,M,R,w,I,k,T,P;return this.sphere?Math.abs(this.sin_p12-1)<=C?(e.x=this.x0+this.a*(S-n)*Math.sin(s),e.y=this.y0-this.a*(S-n)*Math.cos(s),e):Math.abs(this.sin_p12+1)<=C?(e.x=this.x0+this.a*(S+n)*Math.sin(s),e.y=this.y0+this.a*(S+n)*Math.cos(s),e):(R=this.sin_p12*i+this.cos_p12*a*Math.cos(s),x=Math.acos(R),M=x?x/Math.sin(x):1,e.x=this.x0+this.a*M*a*Math.sin(s),e.y=this.y0+this.a*M*(this.cos_p12*i-this.sin_p12*a*Math.cos(s)),e):(r=Ki(this.es),o=Xi(this.es),l=$i(this.es),h=Yi(this.es),Math.abs(this.sin_p12-1)<=C?(u=this.a*bt(r,o,l,h,S),c=this.a*bt(r,o,l,h,n),e.x=this.x0+(u-c)*Math.sin(s),e.y=this.y0-(u-c)*Math.cos(s),e):Math.abs(this.sin_p12+1)<=C?(u=this.a*bt(r,o,l,h,S),c=this.a*bt(r,o,l,h,n),e.x=this.x0+(u+c)*Math.sin(s),e.y=this.y0+(u+c)*Math.cos(s),e):(_=i/a,f=qn(this.a,this.e,this.sin_p12),d=qn(this.a,this.e,i),m=Math.atan((1-this.es)*_+this.es*f*this.sin_p12/(d*a)),g=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(m)-this.sin_p12*Math.cos(s)),g===0?w=Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):Math.abs(Math.abs(g)-Math.PI)<=C?w=-Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):w=Math.asin(Math.sin(s)*Math.cos(m)/Math.sin(g)),p=this.e*this.sin_p12/Math.sqrt(1-this.es),y=this.e*this.cos_p12*Math.cos(g)/Math.sqrt(1-this.es),b=p*y,v=y*y,I=w*w,k=I*w,T=k*w,P=T*w,x=f*w*(1-I*v*(1-v)/6+k/8*b*(1-2*v)+T/120*(v*(4-7*v)-3*p*p*(1-7*v))-P/48*b),e.x=this.x0+x*Math.sin(g),e.y=this.y0+x*Math.cos(g),e))}function M3(e){e.x-=this.x0,e.y-=this.y0;var t,n,i,a,s,r,o,l,h,u,c,_,f,d,m,g,p,y,b,v,x,M,R,w;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*S*this.a?void 0:(n=t/this.a,i=Math.sin(n),a=Math.cos(n),s=this.long0,Math.abs(t)<=C?r=this.lat0:(r=De(a*this.sin_p12+e.y*i*this.cos_p12/t),o=Math.abs(this.lat0)-S,Math.abs(o)<=C?this.lat0>=0?s=L(this.long0+Math.atan2(e.x,-e.y)):s=L(this.long0-Math.atan2(-e.x,e.y)):s=L(this.long0+Math.atan2(e.x*i,t*this.cos_p12*a-e.y*this.sin_p12*i))),e.x=s,e.y=r,e)):(l=Ki(this.es),h=Xi(this.es),u=$i(this.es),c=Yi(this.es),Math.abs(this.sin_p12-1)<=C?(_=this.a*bt(l,h,u,c,S),t=Math.sqrt(e.x*e.x+e.y*e.y),f=_-t,r=Ga(f/this.a,l,h,u,c),s=L(this.long0+Math.atan2(e.x,-1*e.y)),e.x=s,e.y=r,e):Math.abs(this.sin_p12+1)<=C?(_=this.a*bt(l,h,u,c,S),t=Math.sqrt(e.x*e.x+e.y*e.y),f=t-_,r=Ga(f/this.a,l,h,u,c),s=L(this.long0+Math.atan2(e.x,e.y)),e.x=s,e.y=r,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),g=Math.atan2(e.x,e.y),d=qn(this.a,this.e,this.sin_p12),p=Math.cos(g),y=this.e*this.cos_p12*p,b=-y*y/(1-this.es),v=3*this.es*(1-b)*this.sin_p12*this.cos_p12*p/(1-this.es),x=t/d,M=x-b*(1+b)*Math.pow(x,3)/6-v*(1+3*b)*Math.pow(x,4)/24,R=1-b*M*M/2-x*M*M*M/6,m=Math.asin(this.sin_p12*Math.cos(M)+this.cos_p12*Math.sin(M)*p),s=L(this.long0+Math.asin(Math.sin(g)*Math.sin(M)/Math.cos(m))),w=Math.sin(m),r=Math.atan2((w-this.es*R*this.sin_p12)*Math.tan(m),w*(1-this.es)),e.x=s,e.y=r,e))}var w3=["Azimuthal_Equidistant","aeqd"];const E3={init:b3,forward:x3,inverse:M3,names:w3};function S3(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function R3(e){var t,n,i,a,s,r,o,l,h=e.x,u=e.y;return i=L(h-this.long0),t=Math.sin(u),n=Math.cos(u),a=Math.cos(i),r=this.sin_p14*t+this.cos_p14*n*a,s=1,(r>0||Math.abs(r)<=C)&&(o=this.a*s*n*Math.sin(i),l=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*n*a)),e.x=o,e.y=l,e}function I3(e){var t,n,i,a,s,r,o;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),n=De(t/this.a),i=Math.sin(n),a=Math.cos(n),r=this.long0,Math.abs(t)<=C?(o=this.lat0,e.x=r,e.y=o,e):(o=De(a*this.sin_p14+e.y*i*this.cos_p14/t),s=Math.abs(this.lat0)-S,Math.abs(s)<=C?(this.lat0>=0?r=L(this.long0+Math.atan2(e.x,-e.y)):r=L(this.long0-Math.atan2(-e.x,e.y)),e.x=r,e.y=o,e):(r=L(this.long0+Math.atan2(e.x*i,t*this.cos_p14*a-e.y*this.sin_p14*i)),e.x=r,e.y=o,e))}var A3=["ortho"];const C3={init:S3,forward:R3,inverse:I3,names:A3};var et={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},$={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function L3(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=S-X/2?this.face=et.TOP:this.lat0<=-(S-X/2)?this.face=et.BOTTOM:Math.abs(this.long0)<=X?this.face=et.FRONT:Math.abs(this.long0)<=S+X?this.face=this.long0>0?et.RIGHT:et.LEFT:this.face=et.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function k3(e){var t={x:0,y:0},n,i,a,s,r,o,l={value:0};if(e.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):n=e.y,i=e.x,this.face===et.TOP)s=S-n,i>=X&&i<=S+X?(l.value=$.AREA_0,a=i-S):i>S+X||i<=-(S+X)?(l.value=$.AREA_1,a=i>0?i-lt:i+lt):i>-(S+X)&&i<=-X?(l.value=$.AREA_2,a=i+S):(l.value=$.AREA_3,a=i);else if(this.face===et.BOTTOM)s=S+n,i>=X&&i<=S+X?(l.value=$.AREA_0,a=-i+S):i<X&&i>=-X?(l.value=$.AREA_1,a=-i):i<-X&&i>=-(S+X)?(l.value=$.AREA_2,a=-i-S):(l.value=$.AREA_3,a=i>0?-i+lt:-i-lt);else{var h,u,c,_,f,d,m;this.face===et.RIGHT?i=Nn(i,+S):this.face===et.BACK?i=Nn(i,3.14159265359):this.face===et.LEFT&&(i=Nn(i,-S)),_=Math.sin(n),f=Math.cos(n),d=Math.sin(i),m=Math.cos(i),h=f*m,u=f*d,c=_,this.face===et.FRONT?(s=Math.acos(h),a=pa(s,c,u,l)):this.face===et.RIGHT?(s=Math.acos(u),a=pa(s,c,-h,l)):this.face===et.BACK?(s=Math.acos(-h),a=pa(s,c,-u,l)):this.face===et.LEFT?(s=Math.acos(-u),a=pa(s,c,h,l)):(s=a=0,l.value=$.AREA_0)}return o=Math.atan(12/lt*(a+Math.acos(Math.sin(a)*Math.cos(X))-S)),r=Math.sqrt((1-Math.cos(s))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(a))))),l.value===$.AREA_1?o+=S:l.value===$.AREA_2?o+=lt:l.value===$.AREA_3&&(o+=1.5*lt),t.x=r*Math.cos(o),t.y=r*Math.sin(o),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function T3(e){var t={lam:0,phi:0},n,i,a,s,r,o,l,h,u,c={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,i=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),n=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?c.value=$.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(c.value=$.AREA_1,n-=S):e.x<0&&-e.x>=Math.abs(e.y)?(c.value=$.AREA_2,n=n<0?n+lt:n-lt):(c.value=$.AREA_3,n+=S),u=lt/12*Math.tan(n),r=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),o=Math.atan(r),a=Math.cos(n),s=Math.tan(i),l=1-a*a*s*s*(1-Math.cos(Math.atan(1/Math.cos(o)))),l<-1?l=-1:l>1&&(l=1),this.face===et.TOP)h=Math.acos(l),t.phi=S-h,c.value===$.AREA_0?t.lam=o+S:c.value===$.AREA_1?t.lam=o<0?o+lt:o-lt:c.value===$.AREA_2?t.lam=o-S:t.lam=o;else if(this.face===et.BOTTOM)h=Math.acos(l),t.phi=h-S,c.value===$.AREA_0?t.lam=-o+S:c.value===$.AREA_1?t.lam=-o:c.value===$.AREA_2?t.lam=-o-S:t.lam=o<0?-o-lt:-o+lt;else{var _,f,d;_=l,u=_*_,u>=1?d=0:d=Math.sqrt(1-u)*Math.sin(o),u+=d*d,u>=1?f=0:f=Math.sqrt(1-u),c.value===$.AREA_1?(u=f,f=-d,d=u):c.value===$.AREA_2?(f=-f,d=-d):c.value===$.AREA_3&&(u=f,f=d,d=-u),this.face===et.RIGHT?(u=_,_=-f,f=u):this.face===et.BACK?(_=-_,f=-f):this.face===et.LEFT&&(u=_,_=f,f=-u),t.phi=Math.acos(-d)-S,t.lam=Math.atan2(f,_),this.face===et.RIGHT?t.lam=Nn(t.lam,-S):this.face===et.BACK?t.lam=Nn(t.lam,-3.14159265359):this.face===et.LEFT&&(t.lam=Nn(t.lam,+S))}if(this.es!==0){var m,g,p;m=t.phi<0?1:0,g=Math.tan(t.phi),p=this.b/Math.sqrt(g*g+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-p*p)/(this.one_minus_f*p)),m&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function pa(e,t,n,i){var a;return e<C?(i.value=$.AREA_0,a=0):(a=Math.atan2(t,n),Math.abs(a)<=X?i.value=$.AREA_0:a>X&&a<=S+X?(i.value=$.AREA_1,a-=S):a>S+X||a<=-(S+X)?(i.value=$.AREA_2,a=a>=0?a-lt:a+lt):(i.value=$.AREA_3,a+=S)),a}function Nn(e,t){var n=e+t;return n<-3.14159265359?n+=Di:n>3.14159265359&&(n-=Di),n}var P3=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const O3={init:L3,forward:k3,inverse:T3,names:P3};var Ws=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],pi=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Mu=.8487,wu=1.3523,Eu=oe/5,N3=1/Eu,Cn=18,Ba=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},D3=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function F3(e,t,n,i){for(var a=t;i;--i){var s=e(a);if(a-=s,Math.abs(s)<n)break}return a}function G3(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function B3(e){var t=L(e.x-this.long0),n=Math.abs(e.y),i=Math.floor(n*Eu);i<0?i=0:i>=Cn&&(i=Cn-1),n=oe*(n-N3*i);var a={x:Ba(Ws[i],n)*t,y:Ba(pi[i],n)};return e.y<0&&(a.y=-a.y),a.x=a.x*this.a*Mu+this.x0,a.y=a.y*this.a*wu+this.y0,a}function U3(e){var t={x:(e.x-this.x0)/(this.a*Mu),y:Math.abs(e.y-this.y0)/(this.a*wu)};if(t.y>=1)t.x/=Ws[Cn][0],t.y=e.y<0?-S:S;else{var n=Math.floor(t.y*Cn);for(n<0?n=0:n>=Cn&&(n=Cn-1);;)if(pi[n][0]>t.y)--n;else if(pi[n+1][0]<=t.y)++n;else break;var i=pi[n],a=5*(t.y-i[0])/(pi[n+1][0]-i[0]);a=F3(function(s){return(Ba(i,s)-t.y)/D3(i,s)},a,C,100),t.x/=Ba(Ws[n],a),t.y=(5*n+a)*ot,e.y<0&&(t.y=-t.y)}return t.x=L(t.x+this.long0),t}var z3=["Robinson","robin"];const V3={init:G3,forward:B3,inverse:U3,names:z3};function j3(){this.name="geocent"}function H3(e){var t=cu(e,this.es,this.a);return t}function W3(e){var t=_u(e,this.es,this.a,this.b);return t}var q3=["Geocentric","geocentric","geocent","Geocent"];const K3={init:j3,forward:H3,inverse:W3,names:q3};var dt={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},ri={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function X3(){if(Object.keys(ri).forEach((function(n){if(typeof this[n]>"u")this[n]=ri[n].def;else{if(ri[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);ri[n].num&&(this[n]=parseFloat(this[n]))}ri[n].degrees&&(this[n]=this[n]*ot)}).bind(this)),Math.abs(Math.abs(this.lat0)-S)<C?this.mode=this.lat0<0?dt.S_POLE:dt.N_POLE:Math.abs(this.lat0)<C?this.mode=dt.EQUIT:(this.mode=dt.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)}function $3(e){e.x-=this.long0;var t=Math.sin(e.y),n=Math.cos(e.y),i=Math.cos(e.x),a,s;switch(this.mode){case dt.OBLIQ:s=this.sinph0*t+this.cosph0*n*i;break;case dt.EQUIT:s=n*i;break;case dt.S_POLE:s=-t;break;case dt.N_POLE:s=t;break}switch(s=this.pn1/(this.p-s),a=s*n*Math.sin(e.x),this.mode){case dt.OBLIQ:s*=this.cosph0*t-this.sinph0*n*i;break;case dt.EQUIT:s*=t;break;case dt.N_POLE:s*=-(n*i);break;case dt.S_POLE:s*=n*i;break}var r,o;return r=s*this.cg+a*this.sg,o=1/(r*this.sw*this.h1+this.cw),a=(a*this.cg-s*this.sg)*this.cw*o,s=r*o,e.x=a*this.a,e.y=s*this.a,e}function Y3(e){e.x/=this.a,e.y/=this.a;var t={x:e.x,y:e.y},n,i,a;a=1/(this.pn1-e.y*this.sw),n=this.pn1*e.x*a,i=this.pn1*e.y*this.cw*a,e.x=n*this.cg+i*this.sg,e.y=i*this.cg-n*this.sg;var s=At(e.x,e.y);if(Math.abs(s)<C)t.x=0,t.y=e.y;else{var r,o;switch(o=1-s*s*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/s+s/this.pn1),r=Math.sqrt(1-o*o),this.mode){case dt.OBLIQ:t.y=Math.asin(r*this.sinph0+e.y*o*this.cosph0/s),e.y=(r-this.sinph0*Math.sin(t.y))*s,e.x*=o*this.cosph0;break;case dt.EQUIT:t.y=Math.asin(e.y*o/s),e.y=r*s,e.x*=o;break;case dt.N_POLE:t.y=Math.asin(r),e.y=-e.y;break;case dt.S_POLE:t.y=-Math.asin(r);break}t.x=Math.atan2(e.x,e.y)}return e.x=t.x+this.long0,e.y=t.y,e}var Z3=["Tilted_Perspective","tpers"];const J3={init:X3,forward:$3,inverse:Y3,names:Z3};function Q3(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function tp(e){var t=e.x,n=e.y,i,a,s,r;if(t=t-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var o=this.radius_p/At(this.radius_p*Math.cos(n),Math.sin(n));if(a=o*Math.cos(t)*Math.cos(n),s=o*Math.sin(t)*Math.cos(n),r=o*Math.sin(n),(this.radius_g-a)*a-s*s-r*r*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;i=this.radius_g-a,this.flip_axis?(e.x=this.radius_g_1*Math.atan(s/At(r,i)),e.y=this.radius_g_1*Math.atan(r/i)):(e.x=this.radius_g_1*Math.atan(s/i),e.y=this.radius_g_1*Math.atan(r/At(s,i)))}else this.shape==="sphere"&&(i=Math.cos(n),a=Math.cos(t)*i,s=Math.sin(t)*i,r=Math.sin(n),i=this.radius_g-a,this.flip_axis?(e.x=this.radius_g_1*Math.atan(s/At(r,i)),e.y=this.radius_g_1*Math.atan(r/i)):(e.x=this.radius_g_1*Math.atan(s/i),e.y=this.radius_g_1*Math.atan(r/At(s,i))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function ep(e){var t=-1,n=0,i=0,a,s,r,o;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(i=Math.tan(e.y/this.radius_g_1),n=Math.tan(e.x/this.radius_g_1)*At(1,i)):(n=Math.tan(e.x/this.radius_g_1),i=Math.tan(e.y/this.radius_g_1)*At(1,n));var l=i/this.radius_p;if(a=n*n+l*l+t*t,s=2*this.radius_g*t,r=s*s-4*a*this.C,r<0)return e.x=Number.NaN,e.y=Number.NaN,e;o=(-s-Math.sqrt(r))/(2*a),t=this.radius_g+o*t,n*=o,i*=o,e.x=Math.atan2(n,t),e.y=Math.atan(i*Math.cos(e.x)/t),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(i=Math.tan(e.y/this.radius_g_1),n=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+i*i)):(n=Math.tan(e.x/this.radius_g_1),i=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+n*n)),a=n*n+i*i+t*t,s=2*this.radius_g*t,r=s*s-4*a*this.C,r<0)return e.x=Number.NaN,e.y=Number.NaN,e;o=(-s-Math.sqrt(r))/(2*a),t=this.radius_g+o*t,n*=o,i*=o,e.x=Math.atan2(n,t),e.y=Math.atan(i*Math.cos(e.x)/t)}return e.x=e.x+this.long0,e}var np=["Geostationary Satellite View","Geostationary_Satellite","geos"];const ip={init:Q3,forward:tp,inverse:ep,names:np};var xi=1.340264,Mi=-.081106,wi=893e-6,Ei=.003796,Ua=Math.sqrt(3)/2;function ap(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function sp(e){var t=L(e.x-this.long0),n=e.y,i=Math.asin(Ua*Math.sin(n)),a=i*i,s=a*a*a;return e.x=t*Math.cos(i)/(Ua*(xi+3*Mi*a+s*(7*wi+9*Ei*a))),e.y=i*(xi+Mi*a+s*(wi+Ei*a)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function rp(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;var t=1e-9,n=12,i=e.y,a,s,r,o,l,h;for(h=0;h<n&&(a=i*i,s=a*a*a,r=i*(xi+Mi*a+s*(wi+Ei*a))-e.y,o=xi+3*Mi*a+s*(7*wi+9*Ei*a),i-=l=r/o,!(Math.abs(l)<t));++h);return a=i*i,s=a*a*a,e.x=Ua*e.x*(xi+3*Mi*a+s*(7*wi+9*Ei*a))/Math.cos(i),e.y=Math.asin(Math.sin(i)/Ua),e.x=L(e.x+this.long0),e}var op=["eqearth","Equal Earth","Equal_Earth"];const lp={init:ap,forward:sp,inverse:rp,names:op};var Bi=1e-10;function hp(){var e;if(this.phi1=this.lat1,Math.abs(this.phi1)<Bi)throw new Error;this.es?(this.en=Tr(this.es),this.m1=Yn(this.phi1,this.am1=Math.sin(this.phi1),e=Math.cos(this.phi1),this.en),this.am1=e/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=cp,this.forward=up):(Math.abs(this.phi1)+Bi>=S?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=fp,this.forward=_p)}function up(e){var t=L(e.x-(this.long0||0)),n=e.y,i,a,s;return i=this.am1+this.m1-Yn(n,a=Math.sin(n),s=Math.cos(n),this.en),a=s*t/(i*Math.sqrt(1-this.es*a*a)),e.x=i*Math.sin(a),e.y=this.am1-i*Math.cos(a),e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function cp(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,n,i,a;if(n=At(e.x,e.y=this.am1-e.y),a=Pr(this.am1+this.m1-n,this.es,this.en),(t=Math.abs(a))<S)t=Math.sin(a),i=n*Math.atan2(e.x,e.y)*Math.sqrt(1-this.es*t*t)/Math.cos(a);else if(Math.abs(t-S)<=Bi)i=0;else throw new Error;return e.x=L(i+(this.long0||0)),e.y=Ue(a),e}function _p(e){var t=L(e.x-(this.long0||0)),n=e.y,i,a;return a=this.cphi1+this.phi1-n,Math.abs(a)>Bi?(e.x=a*Math.sin(i=t*Math.cos(n)/a),e.y=this.cphi1-a*Math.cos(i)):e.x=e.y=0,e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function fp(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,n,i=At(e.x,e.y=this.cphi1-e.y);if(n=this.cphi1+this.phi1-i,Math.abs(n)>S)throw new Error;return Math.abs(Math.abs(n)-S)<=Bi?t=0:t=i*Math.atan2(e.x,e.y)/Math.cos(n),e.x=L(t+(this.long0||0)),e.y=Ue(n),e}var dp=["bonne","Bonne (Werner lat_1=90)"];const mp={init:hp,names:dp};function gp(e){e.Proj.projections.add(wa),e.Proj.projections.add(Ea),e.Proj.projections.add(cg),e.Proj.projections.add(bg),e.Proj.projections.add(Rg),e.Proj.projections.add(kg),e.Proj.projections.add(Fg),e.Proj.projections.add(Vg),e.Proj.projections.add(Kg),e.Proj.projections.add(Jg),e.Proj.projections.add(m2),e.Proj.projections.add(x2),e.Proj.projections.add(R2),e.Proj.projections.add(T2),e.Proj.projections.add(F2),e.Proj.projections.add(V2),e.Proj.projections.add(K2),e.Proj.projections.add(J2),e.Proj.projections.add(a3),e.Proj.projections.add(h3),e.Proj.projections.add(d3),e.Proj.projections.add(v3),e.Proj.projections.add(E3),e.Proj.projections.add(C3),e.Proj.projections.add(O3),e.Proj.projections.add(V3),e.Proj.projections.add(K3),e.Proj.projections.add(J3),e.Proj.projections.add(ip),e.Proj.projections.add(lp),e.Proj.projections.add(mp)}xt.defaultDatum="WGS84";xt.Proj=le;xt.WGS84=new xt.Proj("WGS84");xt.Point=Wn;xt.toPoint=fu;xt.defs=yt;xt.nadgrid=f1;xt.transform=Fa;xt.mgrs=C1;xt.version="__VERSION__";gp(xt);const El=[[-1,-1],[0,-1],[-1,0],[1,0],[-1,1],[0,1]],Sl=[[0,-1],[1,-1],[-1,0],[1,0],[0,1],[1,1]];class pp{constructor(t){this.width=t.width,this.height=t.height,this.size=t.size,this.locations=t.locations,this.bbox=t.bbox,this.board=Bl([]),this.center=[],this.gameSize=null,this.fieldCount=0,this.mineCount=0,this.minColor=t.minColor,this.maxColor=t.maxColor,this.minValue=t.minValue,this.maxValue=t.maxValue}getUncoveredAreaPercent(){let t=0;for(let n=0;n<this.height;n++)for(let i=0;i<this.width;i++)this.board[n][i].isRevealed&&t++;return t/this.fieldCount}revealAllTiles(){for(let t=0;t<this.height;t++)for(let n=0;n<this.width;n++){const i=this.board[t][n];i.isMine?i.isFlagged=!0:i.isRevealed=!0}}async fromGeoTIFF(t){try{const i=await(await Sm(t.geotiff.url)).getImage(),a=this.locations[0],{bbox:s}=this,r=xt(t.geotiff.projection,"EPSG:3857",[s[0],s[1]]),o=xt(t.geotiff.projection,"EPSG:3857",[s[2],s[3]]),l=o[0]-r[0],h=o[1]-r[1];this.gameSize=Math.round(l/this.size/1.75),this.width=this.size,this.height=Math.round(h/l*this.size*1.18);const[u,c]=i.getOrigin(),[_,f]=i.getResolution(i);let d=[Math.round((s[0]-u)/_),Math.round((s[1]-c)/f),Math.round((s[2]-u)/_),Math.round((s[3]-c)/f)];d=[Math.min(d[0],d[2]),Math.min(d[1],d[3]),Math.max(d[0],d[2]),Math.max(d[1],d[3])];let m=(await i.readRasters({window:d,width:this.width,height:this.height}))[0];m=m.reverse();const g=new Array(m.length);for(let v=0;v<this.height;v++)for(let x=0;x<this.width;x++){const M=m[v*this.width+(this.width-1-x)];g[v*this.width+x]=M}m=g;const p=[s[0],s[1]],y=xt(t.geotiff.projection,"EPSG:3857",p);this.center=[y[0]-1*this.gameSize,y[1]+.5*this.gameSize];let b=0;typeof a.isMineCondition=="number"&&(b=rc(m,a.isMineCondition));for(let v=0;v<this.height;v++){const x=[];for(let M=0;M<this.width;M++){const R=m[v*this.width+M];let w;typeof a.isMineCondition=="function"?w=!Number.isNaN(R)&&a.isMineCondition(R):typeof a.isMineCondition=="number"?w=!Number.isNaN(R)&&R>b:w=Math.round(Math.random()),x.push({isMine:w,adjacentMines:0,isRevealed:!1,isFlagged:!1,element:null,value:R})}this.board.push(x)}this.fieldCount=this.width*this.height;for(let v=0;v<this.height;v++)for(let x=0;x<this.width;x++)this.board[v][x].isMine&&this.mineCount++;for(let v=0;v<this.height;v++)for(let x=0;x<this.width;x++){const M=this.calculateAdjacentMines(x,v);this.board[v][x].adjacentMines=M}}catch(n){console.error("Error loading GeoTIFF data:",n)}}getNeighborCoordinates(t,n){return(n%2===0?El:Sl).map(([a,s])=>[t+a,n+s])}convertAxialToGameCoords(t,n){return{x:t+Math.floor(n/2),y:n}}convertGameCoordsToAxial(t,n){return[t-Math.floor(n/2),n]}calculateAdjacentMines(t,n){let i=0;const a=n%2===0?El:Sl;for(const[s,r]of a){const o=t+s,l=n+r;o>=0&&o<this.width&&l>=0&&l<this.height&&this.board[l]&&this.board[l][o].isMine&&i++}return i}revealTile(t,n){let i=[[t,n]];const a=this.get(t,n);return a?a.isRevealed||a.isFlagged?[]:(a.isRevealed=!0,a.adjacentMines>0&&!a.isMine||this.getNeighborCoordinates(t,n).forEach(([r,o])=>{this.isValidCoordinate(r,o)&&!this.board[o][r].isRevealed&&(!this.board[o][r].isMine&&this.board[o][r].adjacentMines===0?i=i.concat(this.revealTile(r,o)??[]):this.board[o][r].isMine||(this.board[o][r].isRevealed=!0,i.push([r,o])))}),i):null}isValidCoordinate(t,n){return!!(this.board[n]&&this.board[n][t])}isOutOfBounds(t,n){return!this.isValidCoordinate(t,n)}isMine(t,n){return this.board[n]&&this.board[n][t]&&this.board[n][t].isMine}get(t,n){return this.isOutOfBounds(t,n)?null:this.board[n][t]}}var Fr=class extends Ge{constructor(t){t=t||{},super(t),this.size_=t.size||8e4,this.origin_=t.origin||[0,0],this.layout_=this.layout[t.layout]||this.layout.pointy}setLayout(t){this.layout_=this.layout[t]||this.layout.pointy,this.changed()}getLayout(){return this.layout_[9]!=0?"pointy":"flat"}setOrigin(t){this.origin_=t,this.changed()}getOrigin(){return this.origin_}setSize(t){this.size_=t||8e4,this.changed()}getSize(){return this.size_}cube2hex(t){return[t[0],t[2]]}hex2cube(t){return[t[0],-t[0]-t[1],t[1]]}hex2offset(t){return this.layout_[9]?[t[0]+(t[1]-(t[1]&1))/2,t[1]]:[t[0],t[1]+(t[0]+(t[0]&1))/2]}offset2hex(t){return this.layout_[9]?[t[0]-(t[1]-(t[1]&1))/2,t[1]]:[t[0],t[1]-(t[0]+(t[0]&1))/2]}cube2offset(t){return this.hex2offset(this.cube2hex(t))}offset2cube(t){return this.hex2cube(this.offset2Hex(t))}cube_round(t){var n=Math.round(t[0]),i=Math.round(t[1]),a=Math.round(t[2]),s=Math.abs(n-t[0]),r=Math.abs(i-t[1]),o=Math.abs(a-t[2]);return s>r&&s>o?n=-i-a:r>o?i=-n-a:a=-n-i,[n,i,a]}hex_round(t){return this.cube2hex(this.cube_round(this.hex2cube(t)))}hex_corner(t,n,i){return[t[0]+n*this.layout_[8+2*(i%6)],t[1]+n*this.layout_[9+2*(i%6)]]}getHexagonAtCoord(t){return this.getHexagon(this.coord2hex(t))}getHexagon(t){for(var n=[],i=this.hex2coord(t),a=0;a<=7;a++)n.push(this.hex_corner(i,this.size_,a,this.layout_[8]));return n}hex2coord(t){return[this.origin_[0]+this.size_*(this.layout_[0]*t[0]+this.layout_[1]*t[1]),this.origin_[1]+this.size_*(this.layout_[2]*t[0]+this.layout_[3]*t[1])]}coord2hex(t){var n=[(t[0]-this.origin_[0])/this.size_,(t[1]-this.origin_[1])/this.size_],i=this.layout_[4]*n[0]+this.layout_[5]*n[1],a=this.layout_[6]*n[0]+this.layout_[7]*n[1];return this.hex_round([i,a])}cube_distance(t,n){return Math.max(Math.abs(t[0]-n[0]),Math.abs(t[1]-n[1]),Math.abs(t[2]-n[2]))}lerp(t,n,i){return t+(n-t)*i}cube_lerp(t,n,i){return[this.lerp(t[0]+1e-6,n[0],i),this.lerp(t[1]+1e-6,n[1],i),this.lerp(t[2]+1e-6,n[2],i)]}cube_line(t,n){var i=this.cube_distance(t,n);if(!i)return[t];for(var a=[],s=0;s<=i;s++)a.push(this.cube_round(this.cube_lerp(t,n,s/i)));return a}hex_neighbors(t,n){if(n!==void 0)return[t[0]+this.neighbors.hex[n%6][0],t[1]+this.neighbors.hex[n%6][1]];var i=[];for(n=0;n<6;n++)i.push([t[0]+this.neighbors.hex[n][0],t[1]+this.neighbors.hex[n][1]]);return i}cube_neighbors(t,n){if(n!==void 0)return[t[0]+this.neighbors.cube[n%6][0],t[1]+this.neighbors.cube[n%6][1],t[2]+this.neighbors.cube[n%6][2]];var i=[];for(n=0;n<6;n++)i.push([t[0]+this.neighbors.cube[n][0],t[1]+this.neighbors.cube[n][1],t[2]+this.neighbors.cube[n][2]]);for(n=0;n<6;n++)i[n]=this.cube2hex(i[n]);return i}};Fr.prototype.layout={pointy:[Math.sqrt(3),Math.sqrt(3)/2,0,3/2,Math.sqrt(3)/3,-1/3,0,2/3,Math.cos(Math.PI/180*(60*0+30)),Math.sin(Math.PI/180*(60*0+30)),Math.cos(Math.PI/180*(60*1+30)),Math.sin(Math.PI/180*(60*1+30)),Math.cos(Math.PI/180*(60*2+30)),Math.sin(Math.PI/180*(60*2+30)),Math.cos(Math.PI/180*(60*3+30)),Math.sin(Math.PI/180*(60*3+30)),Math.cos(Math.PI/180*(60*4+30)),Math.sin(Math.PI/180*(60*4+30)),Math.cos(Math.PI/180*(60*5+30)),Math.sin(Math.PI/180*(60*5+30))],flat:[3/2,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,Math.cos(Math.PI/180*(60*0)),Math.sin(Math.PI/180*(60*0)),Math.cos(Math.PI/180*(60*1)),Math.sin(Math.PI/180*(60*1)),Math.cos(Math.PI/180*(60*2)),Math.sin(Math.PI/180*(60*2)),Math.cos(Math.PI/180*(60*3)),Math.sin(Math.PI/180*(60*3)),Math.cos(Math.PI/180*(60*4)),Math.sin(Math.PI/180*(60*4)),Math.cos(Math.PI/180*(60*5)),Math.sin(Math.PI/180*(60*5))]};Fr.prototype.neighbors={cube:[[1,-1,0],[1,0,-1],[0,1,-1],[-1,1,0],[-1,0,1],[0,-1,1]],hex:[[1,0],[1,-1],[0,-1],[-1,0],[-1,1],[0,1]]};function Fe(e,t,n={}){const i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function yp(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Rl(e[0])||!Rl(e[1]))throw new Error("coordinates must contain numbers");return Fe({type:"Point",coordinates:e},t,n)}function vp(e,t,n={}){for(const a of e){if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(a[a.length-1].length!==a[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return Fe({type:"Polygon",coordinates:e},t,n)}function bp(e,t,n={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return Fe({type:"LineString",coordinates:e},t,n)}function qs(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function xp(e,t,n={}){return Fe({type:"MultiLineString",coordinates:e},t,n)}function Rl(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function Mp(e,t={}){const n=Number(e[0]),i=Number(e[1]),a=Number(e[2]),s=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");const r=[n,i];return vp([[r,[a,i],[a,s],[n,s],r]],t.properties,{bbox:e,id:t.id})}var wp=Mp;const be=11102230246251565e-32,ft=134217729,Ep=(3+8*be)*be;function Is(e,t,n,i,a){let s,r,o,l,h=t[0],u=i[0],c=0,_=0;u>h==u>-h?(s=h,h=t[++c]):(s=u,u=i[++_]);let f=0;if(c<e&&_<n)for(u>h==u>-h?(r=h+s,o=s-(r-h),h=t[++c]):(r=u+s,o=s-(r-u),u=i[++_]),s=r,o!==0&&(a[f++]=o);c<e&&_<n;)u>h==u>-h?(r=s+h,l=r-s,o=s-(r-l)+(h-l),h=t[++c]):(r=s+u,l=r-s,o=s-(r-l)+(u-l),u=i[++_]),s=r,o!==0&&(a[f++]=o);for(;c<e;)r=s+h,l=r-s,o=s-(r-l)+(h-l),h=t[++c],s=r,o!==0&&(a[f++]=o);for(;_<n;)r=s+u,l=r-s,o=s-(r-l)+(u-l),u=i[++_],s=r,o!==0&&(a[f++]=o);return(s!==0||f===0)&&(a[f++]=s),f}function Sp(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function Zi(e){return new Float64Array(e)}const Rp=(3+16*be)*be,Ip=(2+12*be)*be,Ap=(9+64*be)*be*be,pn=Zi(4),Il=Zi(8),Al=Zi(12),Cl=Zi(16),pt=Zi(4);function Cp(e,t,n,i,a,s,r){let o,l,h,u,c,_,f,d,m,g,p,y,b,v,x,M,R,w;const I=e-a,k=n-a,T=t-s,P=i-s;v=I*P,_=ft*I,f=_-(_-I),d=I-f,_=ft*P,m=_-(_-P),g=P-m,x=d*g-(v-f*m-d*m-f*g),M=T*k,_=ft*T,f=_-(_-T),d=T-f,_=ft*k,m=_-(_-k),g=k-m,R=d*g-(M-f*m-d*m-f*g),p=x-R,c=x-p,pn[0]=x-(p+c)+(c-R),y=v+p,c=y-v,b=v-(y-c)+(p-c),p=b-M,c=b-p,pn[1]=b-(p+c)+(c-M),w=y+p,c=w-y,pn[2]=y-(w-c)+(p-c),pn[3]=w;let B=Sp(4,pn),N=Ip*r;if(B>=N||-B>=N||(c=e-I,o=e-(I+c)+(c-a),c=n-k,h=n-(k+c)+(c-a),c=t-T,l=t-(T+c)+(c-s),c=i-P,u=i-(P+c)+(c-s),o===0&&l===0&&h===0&&u===0)||(N=Ap*r+Ep*Math.abs(B),B+=I*u+P*o-(T*h+k*l),B>=N||-B>=N))return B;v=o*P,_=ft*o,f=_-(_-o),d=o-f,_=ft*P,m=_-(_-P),g=P-m,x=d*g-(v-f*m-d*m-f*g),M=l*k,_=ft*l,f=_-(_-l),d=l-f,_=ft*k,m=_-(_-k),g=k-m,R=d*g-(M-f*m-d*m-f*g),p=x-R,c=x-p,pt[0]=x-(p+c)+(c-R),y=v+p,c=y-v,b=v-(y-c)+(p-c),p=b-M,c=b-p,pt[1]=b-(p+c)+(c-M),w=y+p,c=w-y,pt[2]=y-(w-c)+(p-c),pt[3]=w;const Y=Is(4,pn,4,pt,Il);v=I*u,_=ft*I,f=_-(_-I),d=I-f,_=ft*u,m=_-(_-u),g=u-m,x=d*g-(v-f*m-d*m-f*g),M=T*h,_=ft*T,f=_-(_-T),d=T-f,_=ft*h,m=_-(_-h),g=h-m,R=d*g-(M-f*m-d*m-f*g),p=x-R,c=x-p,pt[0]=x-(p+c)+(c-R),y=v+p,c=y-v,b=v-(y-c)+(p-c),p=b-M,c=b-p,pt[1]=b-(p+c)+(c-M),w=y+p,c=w-y,pt[2]=y-(w-c)+(p-c),pt[3]=w;const G=Is(Y,Il,4,pt,Al);v=o*u,_=ft*o,f=_-(_-o),d=o-f,_=ft*u,m=_-(_-u),g=u-m,x=d*g-(v-f*m-d*m-f*g),M=l*h,_=ft*l,f=_-(_-l),d=l-f,_=ft*h,m=_-(_-h),g=h-m,R=d*g-(M-f*m-d*m-f*g),p=x-R,c=x-p,pt[0]=x-(p+c)+(c-R),y=v+p,c=y-v,b=v-(y-c)+(p-c),p=b-M,c=b-p,pt[1]=b-(p+c)+(c-M),w=y+p,c=w-y,pt[2]=y-(w-c)+(p-c),pt[3]=w;const H=Is(G,Al,4,pt,Cl);return Cl[H-1]}function Lp(e,t,n,i,a,s){const r=(t-s)*(n-a),o=(e-a)*(i-s),l=r-o,h=Math.abs(r+o);return Math.abs(l)>=Rp*h?l:-Cp(e,t,n,i,a,s,h)}function kp(e,t){var n,i,a=0,s,r,o,l,h,u,c,_=e[0],f=e[1],d=t.length;for(n=0;n<d;n++){i=0;var m=t[n],g=m.length-1;if(u=m[0],u[0]!==m[g][0]&&u[1]!==m[g][1])throw new Error("First and last coordinates in a ring must be the same");for(r=u[0]-_,o=u[1]-f,i;i<g;i++){if(c=m[i+1],l=c[0]-_,h=c[1]-f,o===0&&h===0){if(l<=0&&r>=0||r<=0&&l>=0)return 0}else if(h>=0&&o<=0||h<=0&&o>=0){if(s=Lp(r,l,o,h,0,0),s===0)return 0;(s>0&&h>0&&o<=0||s<0&&h<=0&&o>0)&&a++}u=c,o=h,r=l}}return a%2!==0}function Tp(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Qa(e){return e.type==="Feature"?e.geometry:e}function Ui(e,t,n={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const i=Tp(e),a=Qa(t),s=a.type,r=t.bbox;let o=a.coordinates;if(r&&Pp(i,r)===!1)return!1;s==="Polygon"&&(o=[o]);let l=!1;for(var h=0;h<o.length;++h){const u=kp(i,o[h]);if(u===0)return!n.ignoreBoundary;u&&(l=!0)}return l}function Pp(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}class Su{constructor(t=[],n=Op){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:i}=this,a=n[t];for(;t>0;){const s=t-1>>1,r=n[s];if(i(a,r)>=0)break;n[t]=r,t=s}n[t]=a}_down(t){const{data:n,compare:i}=this,a=this.length>>1,s=n[t];for(;t<a;){let r=(t<<1)+1,o=n[r];const l=r+1;if(l<this.length&&i(n[l],o)<0&&(r=l,o=n[l]),i(o,s)>=0)break;n[t]=o,t=r}n[t]=s}}function Op(e,t){return e<t?-1:e>t?1:0}function Ru(e,t){return e.p.x>t.p.x?1:e.p.x<t.p.x?-1:e.p.y!==t.p.y?e.p.y>t.p.y?1:-1:1}function Np(e,t){return e.rightSweepEvent.p.x>t.rightSweepEvent.p.x?1:e.rightSweepEvent.p.x<t.rightSweepEvent.p.x?-1:e.rightSweepEvent.p.y!==t.rightSweepEvent.p.y?e.rightSweepEvent.p.y<t.rightSweepEvent.p.y?1:-1:1}let Ll=class{constructor(t,n,i,a){this.p={x:t[0],y:t[1]},this.featureId=n,this.ringId=i,this.eventId=a,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(t){return this.p.x===t.p.x&&this.p.y===t.p.y}};function Dp(e,t){if(e.type==="FeatureCollection"){const n=e.features;for(let i=0;i<n.length;i++)kl(n[i],t)}else kl(e,t)}let ya=0,va=0,ba=0;function kl(e,t){const n=e.type==="Feature"?e.geometry:e;let i=n.coordinates;(n.type==="Polygon"||n.type==="MultiLineString")&&(i=[i]),n.type==="LineString"&&(i=[[i]]);for(let a=0;a<i.length;a++)for(let s=0;s<i[a].length;s++){let r=i[a][s][0],o=null;va=va+1;for(let l=0;l<i[a][s].length-1;l++){o=i[a][s][l+1];const h=new Ll(r,ya,va,ba),u=new Ll(o,ya,va,ba+1);h.otherEvent=u,u.otherEvent=h,Ru(h,u)>0?(u.isLeftEndpoint=!0,h.isLeftEndpoint=!1):(h.isLeftEndpoint=!0,u.isLeftEndpoint=!1),t.push(h),t.push(u),r=o,ba=ba+1}}ya=ya+1}class Fp{constructor(t){this.leftSweepEvent=t,this.rightSweepEvent=t.otherEvent}}function Gp(e,t){if(e===null||t===null||e.leftSweepEvent.ringId===t.leftSweepEvent.ringId&&(e.rightSweepEvent.isSamePoint(t.leftSweepEvent)||e.rightSweepEvent.isSamePoint(t.leftSweepEvent)||e.rightSweepEvent.isSamePoint(t.rightSweepEvent)||e.leftSweepEvent.isSamePoint(t.leftSweepEvent)||e.leftSweepEvent.isSamePoint(t.rightSweepEvent)))return!1;const n=e.leftSweepEvent.p.x,i=e.leftSweepEvent.p.y,a=e.rightSweepEvent.p.x,s=e.rightSweepEvent.p.y,r=t.leftSweepEvent.p.x,o=t.leftSweepEvent.p.y,l=t.rightSweepEvent.p.x,h=t.rightSweepEvent.p.y,u=(h-o)*(a-n)-(l-r)*(s-i),c=(l-r)*(i-o)-(h-o)*(n-r),_=(a-n)*(i-o)-(s-i)*(n-r);if(u===0)return!1;const f=c/u,d=_/u;if(f>=0&&f<=1&&d>=0&&d<=1){const m=n+f*(a-n),g=i+f*(s-i);return[m,g]}return!1}function Bp(e,t){t=t||!1;const n=[],i=new Su([],Np);for(;e.length;){const a=e.pop();if(a.isLeftEndpoint){const s=new Fp(a);for(let r=0;r<i.data.length;r++){const o=i.data[r];if(t&&o.leftSweepEvent.featureId===a.featureId)continue;const l=Gp(s,o);l!==!1&&n.push(l)}i.push(s)}else a.isLeftEndpoint===!1&&i.pop()}return n}function Up(e,t){const n=new Su([],Ru);return Dp(e,n),Bp(n,t)}var zp=Up;function Gr(e,t,n={}){const{removeDuplicates:i=!0,ignoreSelfIntersections:a=!0}=n;let s=[];e.type==="FeatureCollection"?s=s.concat(e.features):e.type==="Feature"?s.push(e):(e.type==="LineString"||e.type==="Polygon"||e.type==="MultiLineString"||e.type==="MultiPolygon")&&s.push(Fe(e)),t.type==="FeatureCollection"?s=s.concat(t.features):t.type==="Feature"?s.push(t):(t.type==="LineString"||t.type==="Polygon"||t.type==="MultiLineString"||t.type==="MultiPolygon")&&s.push(Fe(t));const r=zp(qs(s),a);let o=[];if(i){const l={};r.forEach(h=>{const u=h.join(",");l[u]||(l[u]=!0,o.push(h))})}else o=r;return qs(o.map(l=>yp(l)))}function Vp(e,t){var n,i,a,s,r,o,l,h,u,c,_=0,f=e.type==="FeatureCollection",d=e.type==="Feature",m=f?e.features.length:1;for(n=0;n<m;n++){for(o=f?e.features[n].geometry:d?e.geometry:e,h=f?e.features[n].properties:d?e.properties:{},u=f?e.features[n].bbox:d?e.bbox:void 0,c=f?e.features[n].id:d?e.id:void 0,l=o?o.type==="GeometryCollection":!1,r=l?o.geometries.length:1,a=0;a<r;a++){if(s=l?o.geometries[a]:o,s===null){if(t(null,_,h,u,c)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,_,h,u,c)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<s.geometries.length;i++)if(t(s.geometries[i],_,h,u,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}_++}}function za(e,t){Vp(e,function(n,i,a,s,r){var o=n===null?null:n.type;switch(o){case null:case"Point":case"LineString":case"Polygon":return t(Fe(n,a,{bbox:s,id:r}),i,0)===!1?!1:void 0}var l;switch(o){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var h=0;h<n.coordinates.length;h++){var u=n.coordinates[h],c={type:l,coordinates:u};if(t(Fe(c,a),i,h)===!1)return!1}})}function Ks(e,t={}){const n=Qa(e);switch(!t.properties&&e.type==="Feature"&&(t.properties=e.properties),n.type){case"Polygon":return jp(n,t);case"MultiPolygon":return Hp(n,t);default:throw new Error("invalid poly")}}function jp(e,t={}){const i=Qa(e).coordinates,a=t.properties?t.properties:e.type==="Feature"?e.properties:{};return Iu(i,a)}function Hp(e,t={}){const i=Qa(e).coordinates,a=t.properties?t.properties:e.type==="Feature"?e.properties:{},s=[];return i.forEach(r=>{s.push(Iu(r,a))}),qs(s)}function Iu(e,t){return e.length>1?xp(e,t):bp(e[0],t)}function Wp(e,t,{ignoreSelfIntersections:n=!0}={ignoreSelfIntersections:!0}){let i=!0;return za(e,a=>{za(t,s=>{if(i===!1)return!1;i=qp(a.geometry,s.geometry,n)})}),i}function qp(e,t,n){switch(e.type){case"Point":switch(t.type){case"Point":return!Yp(e.coordinates,t.coordinates);case"LineString":return!Tl(t,e);case"Polygon":return!Ui(e,t)}break;case"LineString":switch(t.type){case"Point":return!Tl(e,t);case"LineString":return!Kp(e,t,n);case"Polygon":return!Pl(t,e,n)}break;case"Polygon":switch(t.type){case"Point":return!Ui(t,e);case"LineString":return!Pl(e,t,n);case"Polygon":return!Xp(t,e,n)}}return!1}function Tl(e,t){for(let n=0;n<e.coordinates.length-1;n++)if($p(e.coordinates[n],e.coordinates[n+1],t.coordinates))return!0;return!1}function Kp(e,t,n){return Gr(e,t,{ignoreSelfIntersections:n}).features.length>0}function Pl(e,t,n){for(const a of t.coordinates)if(Ui(a,e))return!0;return Gr(t,Ks(e),{ignoreSelfIntersections:n}).features.length>0}function Xp(e,t,n){for(const a of e.coordinates[0])if(Ui(a,t))return!0;for(const a of t.coordinates[0])if(Ui(a,e))return!0;return Gr(Ks(e),Ks(t),{ignoreSelfIntersections:n}).features.length>0}function $p(e,t,n){const i=n[0]-e[0],a=n[1]-e[1],s=t[0]-e[0],r=t[1]-e[1];return i*r-a*s!==0?!1:Math.abs(s)>=Math.abs(r)?s>0?e[0]<=n[0]&&n[0]<=t[0]:t[0]<=n[0]&&n[0]<=e[0]:r>0?e[1]<=n[1]&&n[1]<=t[1]:t[1]<=n[1]&&n[1]<=e[1]}function Yp(e,t){return e[0]===t[0]&&e[1]===t[1]}function Zp(e,t,{ignoreSelfIntersections:n=!0}={}){let i=!1;return za(e,a=>{za(t,s=>{if(i===!0)return!0;i=!Wp(a.geometry,s.geometry,{ignoreSelfIntersections:n})})}),i}var Jp=Zp;function Qp(e){let t=1779033703,n=3144134277,i=1013904242,a=2773480762;for(let s=0,r;s<e.length;s++)r=e.charCodeAt(s),t=n^Math.imul(t^r,597399067),n=i^Math.imul(n^r,2869860233),i=a^Math.imul(i^r,951274213),a=t^Math.imul(a^r,2716044179);return t=Math.imul(i^t>>>18,597399067),n=Math.imul(a^n>>>22,2869860233),i=Math.imul(t^i>>>17,951274213),a=Math.imul(n^a>>>19,2716044179),t^=n^i^a,n^=t,i^=t,a^=t,[t>>>0,n>>>0,i>>>0,a>>>0]}function t4(e){return()=>{e|=0,e=e+2654435769|0;let t=e^e>>>16;return t=Math.imul(t,569420461),t^=t>>>15,t=Math.imul(t,1935289751),t^=t>>>15,(t>>>0)/4294967296}}function Ol(e,t,n){let i;if(n===void 0)i=Math.random;else{const p=Qp(n);i=t4(p[0])}const a=t/1.18,[s,r,o,l]=e,h=l-a,u=o-t,c=h-r,_=u-s,f=r+i()*c,d=s+i()*_,m=f+a,g=d+t;return[d,f,g,m]}const Nl=e=>({grid:new Fr({size:e.gameSize,origin:e.center})});function e4(e,t=1,n=8,i={r:255,g:255,b:255,a:0},a={r:0,g:0,b:0,a:1}){let s;if(Number.isNaN(e))return"rgba(0, 0, 0, 0)";s=e,s=Math.max(t,Math.min(n,s));const r=(s-t)/(n-t),o=Math.round(a.r*r+i.r*(1-r)),l=Math.round(a.g*r+i.g*(1-r)),h=Math.round(a.b*r+i.b*(1-r)),u=a.a*r+i.a*(1-r);return`rgba(${o}, ${l}, ${h}, ${u})`}const Au=(e,t,n,i,a)=>{let s;return e.isRevealed===!0?e.isMine?s=new Xt({stroke:new Ht({color:"#000",width:1}),fill:new Ut({color:"red"}),text:new Qe({text:"🌸",font:"16px Calibri,sans-serif",fill:new Ut({color:"#fff"}),stroke:new Ht({color:"#000",width:3})})}):s=new Xt({stroke:new Ht({color:"#000",width:1}),fill:new Ut({color:e4(e.value,t,n,i,a)}),text:new Qe({text:e.adjacentMines?e.adjacentMines.toString():"0",font:"16px Calibri,sans-serif",fill:new Ut({color:"#000"}),stroke:new Ht({color:"#fff",width:3})})}):e.isFlagged?s=new Xt({stroke:new Ht({color:"#000",width:1}),fill:new Ut({color:"blue"}),text:new Qe({text:"⚑",font:"16px Calibri,sans-serif",fill:new Ut({color:"#fff"}),stroke:new Ht({color:"#000",width:3})})}):s=new Xt({stroke:new Ht({color:"#000",width:.5}),fill:new Ut({color:"#AAAAAA4D"}),text:new Qe({text:"",font:"16px Calibri,sans-serif"})}),s},Br=(e,t,n,i,a,s)=>{const[r,o]=s.convertGameCoordsToAxial(e+1,t),l=n.getHexagon([r,o]),h=new Va(new Vn([l])),u=s.get(e,t),c=`tile-${e}-${t}`;h.setId(c);const _=i.getFeatureById(c);_&&i.removeFeature(_),h.setStyle(Au(u,s.minValue,s.maxValue,s.minColor,s.maxColor)),i.addFeature(h),a.changed()},n4=(e,t,n,i)=>{n.clear();for(let a=0;a<e.height;a++)for(let s=0;s<e.width;s++)Br(s,a,t,n,i,e);i.changed()},i4=(e,t,n,i,a)=>{e.stopPropagation(),e.preventDefault();let s=!1;const{coordinate:r}=e,[o,l]=n.coord2hex(r),h=t.convertAxialToGameCoords(o,l),[u,c]=[h.x-1,h.y],_=t.revealTile(u,c);if(_){for(const[f,d]of _)s=s||t.get(f,d).isMine,a(f,d,n,i,t);if(s){document.dispatchEvent(new Event("minesweeper:gameover")),t.revealAllTiles();for(let f=0;f<(t.height??NaN);f++)for(let d=0;d<t.width;d++)a(d,f,n,i,t)}else document.dispatchEvent(new Event("minesweeper:continue"))}},a4=(e,t,n,i,a)=>{e.stopPropagation(),e.preventDefault();const{coordinate:s}=e,[r,o]=n.coord2hex(s),l=t.convertAxialToGameCoords(r,o),[h,u]=[l.x-1,l.y],c=t.get(h,u);c&&(c.isFlagged=!c.isFlagged,Br(h,u,n,i,a,t)),document.dispatchEvent(new Event("minesweeper:continue"))},s4=(e,t,n)=>{if(e)for(let i=0;i<e.height;i++){let a=(i%2!==0)*1-i/2;i%2===0?a+=1:a+=.5;for(let s=0;s<e.width;s++){const r=e.board[i][s],o=t.getHexagon([s+a,i]),l=new Va(new Vn([o])),h=Au(r,e.minValue,e.maxValue,e.minColor,e.maxColor);l.setStyle(h),n.addFeature(l)}}},Dl=async(e,t)=>{const n=wp(e);return t.features.filter(a=>Jp(n.geometry,a))};class r4{constructor(t,n){this.vectorSource=new I0,this.vectorLayer=new Jf({source:this.vectorSource,title:"Minesweep game board"}),this.map=t,this.options=n,this.game=new pp(n);const i=t.getLayers().getArray().find(a=>a.get("id")==="AnalysisGroup");i&&i.getLayers().push(this.vectorLayer),this.setupGame(),this.clickEventHandlers=[],this.contextmenuEventHandlers=[]}async setupGame(){await this.game.fromGeoTIFF(this.options);const t=Nl(this.game);this.grid=t.grid,this.drawGameBoard(),this.addEventListeners(),this.updateAllTiles()}get mineCount(){return this.game.board.reduce((t,n)=>[...t,...n],[]).reduce((t,n)=>n.isMine?t+1:t,0)}get flagCount(){return this.game.board.reduce((t,n)=>[...t,...n],[]).reduce((t,n)=>n.isFlagged?t+1:t,0)}get coveredMineCount(){return this.game.board.reduce((t,n)=>[...t,...n],[]).reduce((t,n)=>n.isMine&&!n.isRevealed&&!n.isFlagged?t+1:t,0)}get isGameCompleted(){return this.coveredMineCount===0}revealAllTiles(){this.game.revealAllTiles(),this.updateAllTiles(),document.dispatchEvent(new Event("minesweeper:win"))}setupGrid(){return Nl(this.game)}drawGameBoard(){return s4(this.game,this.grid,this.vectorSource)}addEventListeners(){const t=i=>i4(i,this.game,this.grid,this.vectorSource,this.updateTile.bind(this));this.clickEventHandlers.push(t);const n=i=>a4(i,this.game,this.grid,this.vectorSource,this.vectorLayer);this.contextmenuEventHandlers.push(n),this.map.on("click",t),this.map.on("contextmenu",n)}removeEventListeners(){this.clickEventHandlers.forEach(t=>{this.map.un("click",t)}),this.contextmenuEventHandlers.forEach(t=>{this.map.un("contextmenu",t)})}updateTile(t,n){return Br(t,n,this.grid,this.vectorSource,this.vectorLayer,this.game)}updateAllTiles(){return n4(this.game,this.grid,this.vectorSource,this.vectorLayer)}}const o4=JSON.parse(`[{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-51.657797,4.156232],[-51.823343,4.565768],[-52.882141,5.409851],[-53.618453,5.646529],[-53.958045,5.756548],[-54.478633,4.896756],[-54.399542,4.212611],[-54.006931,3.620038],[-54.181726,3.18978],[-54.269705,2.732392],[-54.524754,2.311849],[-54.088063,2.105557],[-53.778521,2.376703],[-53.554839,2.334897],[-53.418465,2.053389],[-52.939657,2.124858],[-52.556425,2.504705],[-52.249338,3.241094],[-51.657797,4.156232]]],[[[6.18632,49.463803],[5.897759,49.442667],[5.674052,49.529484],[4.799222,49.985373],[4.286023,49.907497],[3.588184,50.378992],[3.123252,50.780363],[2.658422,50.796848],[2.513573,51.148506],[1.639001,50.946606],[1.338761,50.127173],[-0.989469,49.347376],[-1.933494,49.776342],[-1.616511,48.644421],[-3.295814,48.901692],[-4.59235,48.68416],[-4.491555,47.954954],[-2.963276,47.570327],[-2.225724,47.064363],[-1.193798,46.014918],[-1.384225,44.02261],[-1.901351,43.422802],[-1.502771,43.034014],[0.338047,42.579546],[0.701591,42.795734],[1.826793,42.343385],[2.985999,42.473015],[3.100411,43.075201],[4.556963,43.399651],[6.529245,43.128892],[7.435185,43.693845],[7.549596,44.127901],[7.007562,44.254767],[6.749955,45.028518],[7.096652,45.333099],[6.802355,45.70858],[6.843593,45.991147],[6.5001,46.429673],[6.022609,46.27299],[6.037389,46.725779],[6.768714,47.287708],[6.736571,47.541801],[7.192202,47.449766],[7.466759,47.620582],[7.593676,48.333019],[8.099279,49.017784],[6.65823,49.201958],[6.18632,49.463803]]],[[[8.746009,42.628122],[8.544213,42.256517],[8.775723,41.583612],[9.229752,41.380007],[9.560016,42.152492],[9.390001,43.009985],[8.746009,42.628122]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"France","sov_a3":"FR1","adm0_dif":1,"level":2,"type":"Country","tlc":"1","admin":"France","adm0_a3":"FRA","geou_dif":0,"geounit":"France","gu_a3":"FRA","su_dif":0,"subunit":"France","su_a3":"FRA","brk_diff":0,"name":"France","name_long":"France","brk_a3":"FRA","brk_name":"France","brk_group":null,"abbrev":"Fr.","postal":"F","formal_en":"French Republic","formal_fr":null,"name_ciawf":"France","note_adm0":null,"note_brk":null,"name_sort":"France","name_alt":null,"mapcolor7":7,"mapcolor8":5,"mapcolor9":9,"mapcolor13":11,"pop_est":67059887,"pop_rank":16,"pop_year":2019,"gdp_md":2715518,"gdp_year":2019,"economy":"1. Developed region: G7","income_grp":"1. High income: OECD","fips_10":"FR","iso_a2":"-99","iso_a2_eh":"FR","iso_a3":"-99","iso_a3_eh":"FRA","iso_n3":"-99","iso_n3_eh":"250","un_a3":"250","wb_a2":"FR","wb_a3":"FRA","woe_id":-90,"woe_id_eh":23424819,"woe_note":"Includes only Metropolitan France (including Corsica)","adm0_iso":"FRA","adm0_diff":null,"adm0_tlc":"FRA","adm0_a3_us":"FRA","adm0_a3_fr":"FRA","adm0_a3_ru":"FRA","adm0_a3_es":"FRA","adm0_a3_cn":"FRA","adm0_a3_tw":"FRA","adm0_a3_in":"FRA","adm0_a3_np":"FRA","adm0_a3_pk":"FRA","adm0_a3_de":"FRA","adm0_a3_gb":"FRA","adm0_a3_br":"FRA","adm0_a3_il":"FRA","adm0_a3_ps":"FRA","adm0_a3_sa":"FRA","adm0_a3_eg":"FRA","adm0_a3_ma":"FRA","adm0_a3_pt":"FRA","adm0_a3_ar":"FRA","adm0_a3_jp":"FRA","adm0_a3_ko":"FRA","adm0_a3_vn":"FRA","adm0_a3_tr":"FRA","adm0_a3_id":"FRA","adm0_a3_pl":"FRA","adm0_a3_gr":"FRA","adm0_a3_it":"FRA","adm0_a3_nl":"FRA","adm0_a3_se":"FRA","adm0_a3_bd":"FRA","adm0_a3_ua":"FRA","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":3,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":1.7,"max_label":6.7,"label_x":2.552275,"label_y":46.696113,"ne_id":1159320637,"wikidataid":"Q142","name_ar":"فرنسا","name_bn":"ফ্রান্স","name_de":"Frankreich","name_en":"France","name_es":"Francia","name_fa":"فرانسه","name_fr":"France","name_el":"Γαλλία","name_he":"צרפת","name_hi":"फ़्रान्स","name_hu":"Franciaország","name_id":"Prancis","name_it":"Francia","name_ja":"フランス","name_ko":"프랑스","name_nl":"Frankrijk","name_pl":"Francja","name_pt":"França","name_ru":"Франция","name_sv":"Frankrike","name_tr":"Fransa","name_uk":"Франція","name_ur":"فرانس","name_vi":"Pháp","name_zh":"法国","name_zht":"法國","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"FRA.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.494331,55.615107],[25.533047,56.100297],[25.000934,56.164531],[24.860684,56.372528],[23.878264,56.273671],[22.201157,56.337802],[21.0558,56.031076],[21.268449,55.190482],[22.315724,55.015299],[22.757764,54.856574],[22.651052,54.582741],[22.731099,54.327537],[23.243987,54.220567],[23.484128,53.912498],[24.450684,53.905702],[25.536354,54.282423],[25.768433,54.846963],[26.588279,55.167176],[26.494331,55.615107]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Lithuania","sov_a3":"LTU","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Lithuania","adm0_a3":"LTU","geou_dif":0,"geounit":"Lithuania","gu_a3":"LTU","su_dif":0,"subunit":"Lithuania","su_a3":"LTU","brk_diff":0,"name":"Lithuania","name_long":"Lithuania","brk_a3":"LTU","brk_name":"Lithuania","brk_group":null,"abbrev":"Lith.","postal":"LT","formal_en":"Republic of Lithuania","formal_fr":null,"name_ciawf":"Lithuania","note_adm0":null,"note_brk":null,"name_sort":"Lithuania","name_alt":null,"mapcolor7":6,"mapcolor8":3,"mapcolor9":3,"mapcolor13":9,"pop_est":2786844,"pop_rank":12,"pop_year":2019,"gdp_md":54627,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"3. Upper middle income","fips_10":"LH","iso_a2":"LT","iso_a2_eh":"LT","iso_a3":"LTU","iso_a3_eh":"LTU","iso_n3":"440","iso_n3_eh":"440","un_a3":"440","wb_a2":"LT","wb_a3":"LTU","woe_id":23424875,"woe_id_eh":23424875,"woe_note":"Exact WOE match as country","adm0_iso":"LTU","adm0_diff":null,"adm0_tlc":"LTU","adm0_a3_us":"LTU","adm0_a3_fr":"LTU","adm0_a3_ru":"LTU","adm0_a3_es":"LTU","adm0_a3_cn":"LTU","adm0_a3_tw":"LTU","adm0_a3_in":"LTU","adm0_a3_np":"LTU","adm0_a3_pk":"LTU","adm0_a3_de":"LTU","adm0_a3_gb":"LTU","adm0_a3_br":"LTU","adm0_a3_il":"LTU","adm0_a3_ps":"LTU","adm0_a3_sa":"LTU","adm0_a3_eg":"LTU","adm0_a3_ma":"LTU","adm0_a3_pt":"LTU","adm0_a3_ar":"LTU","adm0_a3_jp":"LTU","adm0_a3_ko":"LTU","adm0_a3_vn":"LTU","adm0_a3_tr":"LTU","adm0_a3_id":"LTU","adm0_a3_pl":"LTU","adm0_a3_gr":"LTU","adm0_a3_it":"LTU","adm0_a3_nl":"LTU","adm0_a3_se":"LTU","adm0_a3_bd":"LTU","adm0_a3_ua":"LTU","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":9,"long_len":9,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":24.089932,"label_y":55.103703,"ne_id":1159321029,"wikidataid":"Q37","name_ar":"ليتوانيا","name_bn":"লিথুয়ানিয়া","name_de":"Litauen","name_en":"Lithuania","name_es":"Lituania","name_fa":"لیتوانی","name_fr":"Lituanie","name_el":"Λιθουανία","name_he":"ליטא","name_hi":"लिथुआनिया","name_hu":"Litvánia","name_id":"Lituania","name_it":"Lituania","name_ja":"リトアニア","name_ko":"리투아니아","name_nl":"Litouwen","name_pl":"Litwa","name_pt":"Lituânia","name_ru":"Литва","name_sv":"Litauen","name_tr":"Litvanya","name_uk":"Литва","name_ur":"لتھووینیا","name_vi":"Litva","name_zh":"立陶宛","name_zht":"立陶宛","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"LTU.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[15.016996,51.106674],[14.570718,51.002339],[14.307013,51.117268],[14.056228,50.926918],[13.338132,50.733234],[12.966837,50.484076],[12.240111,50.266338],[12.415191,49.969121],[12.521024,49.547415],[13.031329,49.307068],[13.595946,48.877172],[14.338898,48.555305],[14.901447,48.964402],[15.253416,49.039074],[16.029647,48.733899],[16.499283,48.785808],[16.960288,48.596982],[17.101985,48.816969],[17.545007,48.800019],[17.886485,48.903475],[17.913512,48.996493],[18.104973,49.043983],[18.170498,49.271515],[18.399994,49.315001],[18.554971,49.495015],[18.853144,49.49623],[18.392914,49.988629],[17.649445,50.049038],[17.554567,50.362146],[16.868769,50.473974],[16.719476,50.215747],[16.176253,50.422607],[16.238627,50.697733],[15.490972,50.78473],[15.016996,51.106674]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Czechia","sov_a3":"CZE","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Czechia","adm0_a3":"CZE","geou_dif":0,"geounit":"Czechia","gu_a3":"CZE","su_dif":0,"subunit":"Czechia","su_a3":"CZE","brk_diff":0,"name":"Czechia","name_long":"Czech Republic","brk_a3":"CZE","brk_name":"Czechia","brk_group":null,"abbrev":"Cz.","postal":"CZ","formal_en":"Czech Republic","formal_fr":"la République tchèque","name_ciawf":"Czechia","note_adm0":null,"note_brk":null,"name_sort":"Czechia","name_alt":"Česko","mapcolor7":1,"mapcolor8":1,"mapcolor9":2,"mapcolor13":6,"pop_est":10669709,"pop_rank":14,"pop_year":2019,"gdp_md":250680,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"EZ","iso_a2":"CZ","iso_a2_eh":"CZ","iso_a3":"CZE","iso_a3_eh":"CZE","iso_n3":"203","iso_n3_eh":"203","un_a3":"203","wb_a2":"CZ","wb_a3":"CZE","woe_id":23424810,"woe_id_eh":23424810,"woe_note":"Exact WOE match as country","adm0_iso":"CZE","adm0_diff":null,"adm0_tlc":"CZE","adm0_a3_us":"CZE","adm0_a3_fr":"CZE","adm0_a3_ru":"CZE","adm0_a3_es":"CZE","adm0_a3_cn":"CZE","adm0_a3_tw":"CZE","adm0_a3_in":"CZE","adm0_a3_np":"CZE","adm0_a3_pk":"CZE","adm0_a3_de":"CZE","adm0_a3_gb":"CZE","adm0_a3_br":"CZE","adm0_a3_il":"CZE","adm0_a3_ps":"CZE","adm0_a3_sa":"CZE","adm0_a3_eg":"CZE","adm0_a3_ma":"CZE","adm0_a3_pt":"CZE","adm0_a3_ar":"CZE","adm0_a3_jp":"CZE","adm0_a3_ko":"CZE","adm0_a3_vn":"CZE","adm0_a3_tr":"CZE","adm0_a3_id":"CZE","adm0_a3_pl":"CZE","adm0_a3_gr":"CZE","adm0_a3_it":"CZE","adm0_a3_nl":"CZE","adm0_a3_se":"CZE","adm0_a3_bd":"CZE","adm0_a3_ua":"CZE","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":14,"abbrev_len":3,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":15.377555,"label_y":49.882364,"ne_id":1159320535,"wikidataid":"Q213","name_ar":"التشيك","name_bn":"চেক প্রজাতন্ত্র","name_de":"Tschechien","name_en":"Czech Republic","name_es":"República Checa","name_fa":"جمهوری چک","name_fr":"Tchéquie","name_el":"Τσεχία","name_he":"צ'כיה","name_hi":"चेक गणराज्य","name_hu":"Csehország","name_id":"Republik Ceko","name_it":"Repubblica Ceca","name_ja":"チェコ","name_ko":"체코","name_nl":"Tsjechië","name_pl":"Czechy","name_pt":"Chéquia","name_ru":"Чехия","name_sv":"Tjeckien","name_tr":"Çek Cumhuriyeti","name_uk":"Чехія","name_ur":"چیک جمہوریہ","name_vi":"Cộng hòa Séc","name_zh":"捷克","name_zht":"捷克共和國","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"CZE.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[14.119686,53.757029],[13.647467,54.075511],[12.51844,54.470371],[11.956252,54.196486],[10.939467,54.008693],[10.950112,54.363607],[9.93958,54.596642],[9.921906,54.983104],[9.282049,54.830865],[8.526229,54.962744],[8.572118,54.395646],[8.800734,54.020786],[8.121706,53.527792],[7.936239,53.748296],[7.100425,53.693932],[6.90514,53.482162],[7.092053,53.144043],[6.84287,52.22844],[6.589397,51.852029],[5.988658,51.851616],[6.156658,50.803721],[6.043073,50.128052],[6.242751,49.902226],[6.18632,49.463803],[6.65823,49.201958],[8.099279,49.017784],[7.593676,48.333019],[7.466759,47.620582],[8.317301,47.61358],[8.522612,47.830828],[9.594226,47.525058],[9.896068,47.580197],[10.402084,47.302488],[10.544504,47.566399],[11.426414,47.523766],[12.141357,47.703083],[12.62076,47.672388],[12.932627,47.467646],[13.025851,47.637584],[12.884103,48.289146],[13.243357,48.416115],[13.595946,48.877172],[13.031329,49.307068],[12.521024,49.547415],[12.415191,49.969121],[12.240111,50.266338],[12.966837,50.484076],[13.338132,50.733234],[14.056228,50.926918],[14.307013,51.117268],[14.570718,51.002339],[15.016996,51.106674],[14.607098,51.745188],[14.685026,52.089947],[14.4376,52.62485],[14.074521,52.981263],[14.353315,53.248171],[14.119686,53.757029]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"Germany","sov_a3":"DEU","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Germany","adm0_a3":"DEU","geou_dif":0,"geounit":"Germany","gu_a3":"DEU","su_dif":0,"subunit":"Germany","su_a3":"DEU","brk_diff":0,"name":"Germany","name_long":"Germany","brk_a3":"DEU","brk_name":"Germany","brk_group":null,"abbrev":"Ger.","postal":"D","formal_en":"Federal Republic of Germany","formal_fr":null,"name_ciawf":"Germany","note_adm0":null,"note_brk":null,"name_sort":"Germany","name_alt":null,"mapcolor7":2,"mapcolor8":5,"mapcolor9":5,"mapcolor13":1,"pop_est":83132799,"pop_rank":16,"pop_year":2019,"gdp_md":3861123,"gdp_year":2019,"economy":"1. Developed region: G7","income_grp":"1. High income: OECD","fips_10":"GM","iso_a2":"DE","iso_a2_eh":"DE","iso_a3":"DEU","iso_a3_eh":"DEU","iso_n3":"276","iso_n3_eh":"276","un_a3":"276","wb_a2":"DE","wb_a3":"DEU","woe_id":23424829,"woe_id_eh":23424829,"woe_note":"Exact WOE match as country","adm0_iso":"DEU","adm0_diff":null,"adm0_tlc":"DEU","adm0_a3_us":"DEU","adm0_a3_fr":"DEU","adm0_a3_ru":"DEU","adm0_a3_es":"DEU","adm0_a3_cn":"DEU","adm0_a3_tw":"DEU","adm0_a3_in":"DEU","adm0_a3_np":"DEU","adm0_a3_pk":"DEU","adm0_a3_de":"DEU","adm0_a3_gb":"DEU","adm0_a3_br":"DEU","adm0_a3_il":"DEU","adm0_a3_ps":"DEU","adm0_a3_sa":"DEU","adm0_a3_eg":"DEU","adm0_a3_ma":"DEU","adm0_a3_pt":"DEU","adm0_a3_ar":"DEU","adm0_a3_jp":"DEU","adm0_a3_ko":"DEU","adm0_a3_vn":"DEU","adm0_a3_tr":"DEU","adm0_a3_id":"DEU","adm0_a3_pl":"DEU","adm0_a3_gr":"DEU","adm0_a3_it":"DEU","adm0_a3_nl":"DEU","adm0_a3_se":"DEU","adm0_a3_bd":"DEU","adm0_a3_ua":"DEU","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":1.7,"max_label":6.7,"label_x":9.678348,"label_y":50.961733,"ne_id":1159320539,"wikidataid":"Q183","name_ar":"ألمانيا","name_bn":"জার্মানি","name_de":"Deutschland","name_en":"Germany","name_es":"Alemania","name_fa":"آلمان","name_fr":"Allemagne","name_el":"Γερμανία","name_he":"גרמניה","name_hi":"जर्मनी","name_hu":"Németország","name_id":"Jerman","name_it":"Germania","name_ja":"ドイツ","name_ko":"독일","name_nl":"Duitsland","name_pl":"Niemcy","name_pt":"Alemanha","name_ru":"Германия","name_sv":"Tyskland","name_tr":"Almanya","name_uk":"Німеччина","name_ur":"جرمنی","name_vi":"Đức","name_zh":"德国","name_zht":"德國","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"DEU.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[27.981127,59.475373],[27.981114,59.475388],[26.949136,59.445803],[25.864189,59.61109],[24.604214,59.465854],[23.339795,59.18724],[23.42656,58.612753],[24.061198,58.257375],[24.428928,58.383413],[24.312863,57.793424],[25.164594,57.970157],[25.60281,57.847529],[26.463532,57.476389],[27.288185,57.474528],[27.716686,57.791899],[27.42015,58.72457],[28.131699,59.300825],[27.98112,59.47537],[27.981127,59.475373]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Estonia","sov_a3":"EST","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Estonia","adm0_a3":"EST","geou_dif":0,"geounit":"Estonia","gu_a3":"EST","su_dif":0,"subunit":"Estonia","su_a3":"EST","brk_diff":0,"name":"Estonia","name_long":"Estonia","brk_a3":"EST","brk_name":"Estonia","brk_group":null,"abbrev":"Est.","postal":"EST","formal_en":"Republic of Estonia","formal_fr":null,"name_ciawf":"Estonia","note_adm0":null,"note_brk":null,"name_sort":"Estonia","name_alt":null,"mapcolor7":3,"mapcolor8":2,"mapcolor9":1,"mapcolor13":10,"pop_est":1326590,"pop_rank":12,"pop_year":2019,"gdp_md":31471,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"EN","iso_a2":"EE","iso_a2_eh":"EE","iso_a3":"EST","iso_a3_eh":"EST","iso_n3":"233","iso_n3_eh":"233","un_a3":"233","wb_a2":"EE","wb_a3":"EST","woe_id":23424805,"woe_id_eh":23424805,"woe_note":"Exact WOE match as country","adm0_iso":"EST","adm0_diff":null,"adm0_tlc":"EST","adm0_a3_us":"EST","adm0_a3_fr":"EST","adm0_a3_ru":"EST","adm0_a3_es":"EST","adm0_a3_cn":"EST","adm0_a3_tw":"EST","adm0_a3_in":"EST","adm0_a3_np":"EST","adm0_a3_pk":"EST","adm0_a3_de":"EST","adm0_a3_gb":"EST","adm0_a3_br":"EST","adm0_a3_il":"EST","adm0_a3_ps":"EST","adm0_a3_sa":"EST","adm0_a3_eg":"EST","adm0_a3_ma":"EST","adm0_a3_pt":"EST","adm0_a3_ar":"EST","adm0_a3_jp":"EST","adm0_a3_ko":"EST","adm0_a3_vn":"EST","adm0_a3_tr":"EST","adm0_a3_id":"EST","adm0_a3_pl":"EST","adm0_a3_gr":"EST","adm0_a3_it":"EST","adm0_a3_nl":"EST","adm0_a3_se":"EST","adm0_a3_bd":"EST","adm0_a3_ua":"EST","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":25.867126,"label_y":58.724865,"ne_id":1159320615,"wikidataid":"Q191","name_ar":"إستونيا","name_bn":"এস্তোনিয়া","name_de":"Estland","name_en":"Estonia","name_es":"Estonia","name_fa":"استونی","name_fr":"Estonie","name_el":"Εσθονία","name_he":"אסטוניה","name_hi":"एस्टोनिया","name_hu":"Észtország","name_id":"Estonia","name_it":"Estonia","name_ja":"エストニア","name_ko":"에스토니아","name_nl":"Estland","name_pl":"Estonia","name_pt":"Estónia","name_ru":"Эстония","name_sv":"Estland","name_tr":"Estonya","name_uk":"Естонія","name_ur":"استونیا","name_vi":"Estonia","name_zh":"爱沙尼亚","name_zht":"愛沙尼亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"EST.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[27.288185,57.474528],[26.463532,57.476389],[25.60281,57.847529],[25.164594,57.970157],[24.312863,57.793424],[24.12073,57.025693],[23.318453,57.006236],[22.524341,57.753374],[21.581866,57.411871],[21.090424,56.783873],[21.0558,56.031076],[22.201157,56.337802],[23.878264,56.273671],[24.860684,56.372528],[25.000934,56.164531],[25.533047,56.100297],[26.494331,55.615107],[27.10246,55.783314],[28.176709,56.16913],[27.855282,56.759326],[27.770016,57.244258],[27.288185,57.474528]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Latvia","sov_a3":"LVA","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Latvia","adm0_a3":"LVA","geou_dif":0,"geounit":"Latvia","gu_a3":"LVA","su_dif":0,"subunit":"Latvia","su_a3":"LVA","brk_diff":0,"name":"Latvia","name_long":"Latvia","brk_a3":"LVA","brk_name":"Latvia","brk_group":null,"abbrev":"Lat.","postal":"LV","formal_en":"Republic of Latvia","formal_fr":null,"name_ciawf":"Latvia","note_adm0":null,"note_brk":null,"name_sort":"Latvia","name_alt":null,"mapcolor7":4,"mapcolor8":7,"mapcolor9":6,"mapcolor13":13,"pop_est":1912789,"pop_rank":12,"pop_year":2019,"gdp_md":34102,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"3. Upper middle income","fips_10":"LG","iso_a2":"LV","iso_a2_eh":"LV","iso_a3":"LVA","iso_a3_eh":"LVA","iso_n3":"428","iso_n3_eh":"428","un_a3":"428","wb_a2":"LV","wb_a3":"LVA","woe_id":23424874,"woe_id_eh":23424874,"woe_note":"Exact WOE match as country","adm0_iso":"LVA","adm0_diff":null,"adm0_tlc":"LVA","adm0_a3_us":"LVA","adm0_a3_fr":"LVA","adm0_a3_ru":"LVA","adm0_a3_es":"LVA","adm0_a3_cn":"LVA","adm0_a3_tw":"LVA","adm0_a3_in":"LVA","adm0_a3_np":"LVA","adm0_a3_pk":"LVA","adm0_a3_de":"LVA","adm0_a3_gb":"LVA","adm0_a3_br":"LVA","adm0_a3_il":"LVA","adm0_a3_ps":"LVA","adm0_a3_sa":"LVA","adm0_a3_eg":"LVA","adm0_a3_ma":"LVA","adm0_a3_pt":"LVA","adm0_a3_ar":"LVA","adm0_a3_jp":"LVA","adm0_a3_ko":"LVA","adm0_a3_vn":"LVA","adm0_a3_tr":"LVA","adm0_a3_id":"LVA","adm0_a3_pl":"LVA","adm0_a3_gr":"LVA","adm0_a3_it":"LVA","adm0_a3_nl":"LVA","adm0_a3_se":"LVA","adm0_a3_bd":"LVA","adm0_a3_ua":"LVA","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":25.458723,"label_y":57.066872,"ne_id":1159321033,"wikidataid":"Q211","name_ar":"لاتفيا","name_bn":"লাতভিয়া","name_de":"Lettland","name_en":"Latvia","name_es":"Letonia","name_fa":"لتونی","name_fr":"Lettonie","name_el":"Λετονία","name_he":"לטביה","name_hi":"लातविया","name_hu":"Lettország","name_id":"Latvia","name_it":"Lettonia","name_ja":"ラトビア","name_ko":"라트비아","name_nl":"Letland","name_pl":"Łotwa","name_pt":"Letónia","name_ru":"Латвия","name_sv":"Lettland","name_tr":"Letonya","name_uk":"Латвія","name_ur":"لٹویا","name_vi":"Latvia","name_zh":"拉脱维亚","name_zht":"拉脫維亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"LVA.geojson"}},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[15.14282,79.67431],[13.71852,79.66039],[13.17077,80.01046],[10.44453,79.65239],[11.22231,78.8693],[13.1706,78.02493],[14.66956,77.73565],[13.76259,77.38035],[15.91315,76.77045],[17.1182,76.80941],[17.59441,77.63796],[18.47172,77.82669],[19.02737,78.5626],[21.54383,78.95611],[18.25183,79.70175],[16.99085,80.05086],[15.52255,80.01608],[15.14282,79.67431]]],[[[31.101042,69.558101],[30.005435,70.186259],[31.293418,70.453788],[28.165547,71.185474],[26.37005,70.986262],[24.546543,71.030497],[23.023742,70.202072],[21.378416,70.255169],[19.184028,69.817444],[16.435927,68.563205],[14.761146,67.810642],[12.358347,65.879726],[10.527709,64.486038],[8.553411,63.454008],[5.9129,62.614473],[4.992078,61.970998],[5.308234,59.663232],[5.665835,58.588155],[7.048748,58.078884],[8.382,58.313288],[10.356557,59.469807],[11.027369,58.856149],[11.468272,59.432393],[12.300366,60.117933],[12.631147,61.293572],[11.992064,61.800362],[11.930569,63.128318],[12.579935,64.066219],[13.571916,64.049114],[13.919905,64.445421],[13.55569,64.787028],[15.108411,66.193867],[16.108712,67.302456],[16.768879,68.013937],[17.729182,68.010552],[17.993868,68.567391],[19.87856,68.407194],[20.025269,69.065139],[20.645593,69.106247],[21.244936,69.370443],[22.356238,68.841741],[23.66205,68.891247],[24.735679,68.649557],[25.689213,69.092114],[26.179622,69.825299],[27.732292,70.164193],[29.015573,69.766491],[28.59193,69.064777],[29.39955,69.15692],[31.101042,69.558101]]],[[[27.407506,80.056406],[25.447625,80.40734],[22.919253,80.657144],[21.907945,80.357679],[20.455992,80.598156],[17.368015,80.318896],[18.462264,79.85988],[19.897266,79.842362],[20.075188,79.566823],[23.024466,79.400012],[25.924651,79.517834],[27.407506,80.056406]]],[[[24.72412,77.85385],[23.28134,78.07954],[22.88426,78.45494],[20.8119,78.25463],[21.41611,77.93504],[20.72601,77.67704],[22.49032,77.44493],[24.72412,77.85385]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Norway","sov_a3":"NOR","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":null,"admin":"Norway","adm0_a3":"NOR","geou_dif":0,"geounit":"Norway","gu_a3":"NOR","su_dif":0,"subunit":"Norway","su_a3":"NOR","brk_diff":0,"name":"Norway","name_long":"Norway","brk_a3":"NOR","brk_name":"Norway","brk_group":null,"abbrev":"Nor.","postal":"N","formal_en":"Kingdom of Norway","formal_fr":null,"name_ciawf":"Norway","note_adm0":null,"note_brk":null,"name_sort":"Norway","name_alt":null,"mapcolor7":5,"mapcolor8":3,"mapcolor9":8,"mapcolor13":12,"pop_est":5347896,"pop_rank":13,"pop_year":2019,"gdp_md":403336,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"-99","iso_a2":"-99","iso_a2_eh":"NO","iso_a3":"-99","iso_a3_eh":"NOR","iso_n3":"-99","iso_n3_eh":"578","un_a3":"-99","wb_a2":"-99","wb_a3":"-99","woe_id":-90,"woe_id_eh":23424910,"woe_note":"Does not include Svalbard, Jan Mayen, or Bouvet Islands (28289410).","adm0_iso":"NOR","adm0_diff":null,"adm0_tlc":"NOR","adm0_a3_us":"NOR","adm0_a3_fr":"NOR","adm0_a3_ru":"NOR","adm0_a3_es":"NOR","adm0_a3_cn":"NOR","adm0_a3_tw":"NOR","adm0_a3_in":"NOR","adm0_a3_np":"NOR","adm0_a3_pk":"NOR","adm0_a3_de":"NOR","adm0_a3_gb":"NOR","adm0_a3_br":"NOR","adm0_a3_il":"NOR","adm0_a3_ps":"NOR","adm0_a3_sa":"NOR","adm0_a3_eg":"NOR","adm0_a3_ma":"NOR","adm0_a3_pt":"NOR","adm0_a3_ar":"NOR","adm0_a3_jp":"NOR","adm0_a3_ko":"NOR","adm0_a3_vn":"NOR","adm0_a3_tr":"NOR","adm0_a3_id":"NOR","adm0_a3_pl":"NOR","adm0_a3_gr":"NOR","adm0_a3_it":"NOR","adm0_a3_nl":"NOR","adm0_a3_se":"NOR","adm0_a3_bd":"NOR","adm0_a3_ua":"NOR","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":7,"label_x":9.679975,"label_y":61.357092,"ne_id":1159321109,"wikidataid":"Q20","name_ar":"النرويج","name_bn":"নরওয়ে","name_de":"Norwegen","name_en":"Norway","name_es":"Noruega","name_fa":"نروژ","name_fr":"Norvège","name_el":"Νορβηγία","name_he":"נורווגיה","name_hi":"नॉर्वे","name_hu":"Norvégia","name_id":"Norwegia","name_it":"Norvegia","name_ja":"ノルウェー","name_ko":"노르웨이","name_nl":"Noorwegen","name_pl":"Norwegia","name_pt":"Noruega","name_ru":"Норвегия","name_sv":"Norge","name_tr":"Norveç","name_uk":"Норвегія","name_ur":"ناروے","name_vi":"Na Uy","name_zh":"挪威","name_zht":"挪威","fclass_iso":"Unrecognized","tlc_diff":null,"fclass_tlc":"Unrecognized","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"NOR.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[11.027369,58.856149],[11.787942,57.441817],[12.625101,56.30708],[12.942911,55.361737],[14.100721,55.407781],[14.666681,56.200885],[15.879786,56.104302],[16.44771,57.041118],[16.829185,58.719827],[17.869225,58.953766],[18.787722,60.081914],[17.831346,60.636583],[17.119555,61.341166],[17.847779,62.7494],[19.778876,63.609554],[21.369631,64.413588],[21.213517,65.026005],[22.183173,65.723741],[23.903379,66.006927],[23.56588,66.396051],[23.539473,67.936009],[21.978535,68.616846],[20.645593,69.106247],[20.025269,69.065139],[19.87856,68.407194],[17.993868,68.567391],[17.729182,68.010552],[16.768879,68.013937],[16.108712,67.302456],[15.108411,66.193867],[13.55569,64.787028],[13.919905,64.445421],[13.571916,64.049114],[12.579935,64.066219],[11.930569,63.128318],[11.992064,61.800362],[12.631147,61.293572],[12.300366,60.117933],[11.468272,59.432393],[11.027369,58.856149]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Sweden","sov_a3":"SWE","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Sweden","adm0_a3":"SWE","geou_dif":0,"geounit":"Sweden","gu_a3":"SWE","su_dif":0,"subunit":"Sweden","su_a3":"SWE","brk_diff":0,"name":"Sweden","name_long":"Sweden","brk_a3":"SWE","brk_name":"Sweden","brk_group":null,"abbrev":"Swe.","postal":"S","formal_en":"Kingdom of Sweden","formal_fr":null,"name_ciawf":"Sweden","note_adm0":null,"note_brk":null,"name_sort":"Sweden","name_alt":null,"mapcolor7":1,"mapcolor8":4,"mapcolor9":2,"mapcolor13":4,"pop_est":10285453,"pop_rank":14,"pop_year":2019,"gdp_md":530883,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"SW","iso_a2":"SE","iso_a2_eh":"SE","iso_a3":"SWE","iso_a3_eh":"SWE","iso_n3":"752","iso_n3_eh":"752","un_a3":"752","wb_a2":"SE","wb_a3":"SWE","woe_id":23424954,"woe_id_eh":23424954,"woe_note":"Exact WOE match as country","adm0_iso":"SWE","adm0_diff":null,"adm0_tlc":"SWE","adm0_a3_us":"SWE","adm0_a3_fr":"SWE","adm0_a3_ru":"SWE","adm0_a3_es":"SWE","adm0_a3_cn":"SWE","adm0_a3_tw":"SWE","adm0_a3_in":"SWE","adm0_a3_np":"SWE","adm0_a3_pk":"SWE","adm0_a3_de":"SWE","adm0_a3_gb":"SWE","adm0_a3_br":"SWE","adm0_a3_il":"SWE","adm0_a3_ps":"SWE","adm0_a3_sa":"SWE","adm0_a3_eg":"SWE","adm0_a3_ma":"SWE","adm0_a3_pt":"SWE","adm0_a3_ar":"SWE","adm0_a3_jp":"SWE","adm0_a3_ko":"SWE","adm0_a3_vn":"SWE","adm0_a3_tr":"SWE","adm0_a3_id":"SWE","adm0_a3_pl":"SWE","adm0_a3_gr":"SWE","adm0_a3_it":"SWE","adm0_a3_nl":"SWE","adm0_a3_se":"SWE","adm0_a3_bd":"SWE","adm0_a3_ua":"SWE","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2,"max_label":7,"label_x":19.01705,"label_y":65.85918,"ne_id":1159321287,"wikidataid":"Q34","name_ar":"السويد","name_bn":"সুইডেন","name_de":"Schweden","name_en":"Sweden","name_es":"Suecia","name_fa":"سوئد","name_fr":"Suède","name_el":"Σουηδία","name_he":"שוודיה","name_hi":"स्वीडन","name_hu":"Svédország","name_id":"Swedia","name_it":"Svezia","name_ja":"スウェーデン","name_ko":"스웨덴","name_nl":"Zweden","name_pl":"Szwecja","name_pt":"Suécia","name_ru":"Швеция","name_sv":"Sverige","name_tr":"İsveç","name_uk":"Швеція","name_ur":"سویڈن","name_vi":"Thụy Điển","name_zh":"瑞典","name_zht":"瑞典","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"SWE.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[28.59193,69.064777],[29.015573,69.766491],[27.732292,70.164193],[26.179622,69.825299],[25.689213,69.092114],[24.735679,68.649557],[23.66205,68.891247],[22.356238,68.841741],[21.244936,69.370443],[20.645593,69.106247],[21.978535,68.616846],[23.539473,67.936009],[23.56588,66.396051],[23.903379,66.006927],[25.294043,65.534346],[25.398068,65.111427],[24.730512,64.902344],[22.442744,63.81781],[21.536029,63.189735],[21.059211,62.607393],[21.544866,61.705329],[21.322244,60.72017],[22.290764,60.391921],[22.869695,59.846373],[24.496624,60.057316],[26.255173,60.423961],[28.069998,60.503517],[28.070002,60.503519],[28.07,60.50352],[30.211107,61.780028],[31.139991,62.357693],[31.516092,62.867687],[30.035872,63.552814],[30.444685,64.204453],[29.54443,64.948672],[30.21765,65.80598],[29.054589,66.944286],[29.977426,67.698297],[28.445944,68.364613],[28.59193,69.064777]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Finland","sov_a3":"FI1","adm0_dif":1,"level":2,"type":"Country","tlc":"1","admin":"Finland","adm0_a3":"FIN","geou_dif":0,"geounit":"Finland","gu_a3":"FIN","su_dif":0,"subunit":"Finland","su_a3":"FIN","brk_diff":0,"name":"Finland","name_long":"Finland","brk_a3":"FIN","brk_name":"Finland","brk_group":null,"abbrev":"Fin.","postal":"FIN","formal_en":"Republic of Finland","formal_fr":null,"name_ciawf":"Finland","note_adm0":null,"note_brk":null,"name_sort":"Finland","name_alt":null,"mapcolor7":4,"mapcolor8":1,"mapcolor9":4,"mapcolor13":6,"pop_est":5520314,"pop_rank":13,"pop_year":2019,"gdp_md":269296,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"FI","iso_a2":"FI","iso_a2_eh":"FI","iso_a3":"FIN","iso_a3_eh":"FIN","iso_n3":"246","iso_n3_eh":"246","un_a3":"246","wb_a2":"FI","wb_a3":"FIN","woe_id":23424812,"woe_id_eh":23424812,"woe_note":"Exact WOE match as country","adm0_iso":"FIN","adm0_diff":null,"adm0_tlc":"FIN","adm0_a3_us":"FIN","adm0_a3_fr":"FIN","adm0_a3_ru":"FIN","adm0_a3_es":"FIN","adm0_a3_cn":"FIN","adm0_a3_tw":"FIN","adm0_a3_in":"FIN","adm0_a3_np":"FIN","adm0_a3_pk":"FIN","adm0_a3_de":"FIN","adm0_a3_gb":"FIN","adm0_a3_br":"FIN","adm0_a3_il":"FIN","adm0_a3_ps":"FIN","adm0_a3_sa":"FIN","adm0_a3_eg":"FIN","adm0_a3_ma":"FIN","adm0_a3_pt":"FIN","adm0_a3_ar":"FIN","adm0_a3_jp":"FIN","adm0_a3_ko":"FIN","adm0_a3_vn":"FIN","adm0_a3_tr":"FIN","adm0_a3_id":"FIN","adm0_a3_pl":"FIN","adm0_a3_gr":"FIN","adm0_a3_it":"FIN","adm0_a3_nl":"FIN","adm0_a3_se":"FIN","adm0_a3_bd":"FIN","adm0_a3_ua":"FIN","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":27.276449,"label_y":63.252361,"ne_id":1159320623,"wikidataid":"Q33","name_ar":"فنلندا","name_bn":"ফিনল্যান্ড","name_de":"Finnland","name_en":"Finland","name_es":"Finlandia","name_fa":"فنلاند","name_fr":"Finlande","name_el":"Φινλανδία","name_he":"פינלנד","name_hi":"फ़िनलैण्ड","name_hu":"Finnország","name_id":"Finlandia","name_it":"Finlandia","name_ja":"フィンランド","name_ko":"핀란드","name_nl":"Finland","name_pl":"Finlandia","name_pt":"Finlândia","name_ru":"Финляндия","name_sv":"Finland","name_tr":"Finlandiya","name_uk":"Фінляндія","name_ur":"فن لینڈ","name_vi":"Phần Lan","name_zh":"芬兰","name_zht":"芬蘭","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"FIN.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[6.043073,50.128052],[5.782417,50.090328],[5.674052,49.529484],[5.897759,49.442667],[6.18632,49.463803],[6.242751,49.902226],[6.043073,50.128052]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Luxembourg","sov_a3":"LUX","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Luxembourg","adm0_a3":"LUX","geou_dif":0,"geounit":"Luxembourg","gu_a3":"LUX","su_dif":0,"subunit":"Luxembourg","su_a3":"LUX","brk_diff":0,"name":"Luxembourg","name_long":"Luxembourg","brk_a3":"LUX","brk_name":"Luxembourg","brk_group":null,"abbrev":"Lux.","postal":"L","formal_en":"Grand Duchy of Luxembourg","formal_fr":null,"name_ciawf":"Luxembourg","note_adm0":null,"note_brk":null,"name_sort":"Luxembourg","name_alt":null,"mapcolor7":1,"mapcolor8":7,"mapcolor9":3,"mapcolor13":7,"pop_est":619896,"pop_rank":11,"pop_year":2019,"gdp_md":71104,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"LU","iso_a2":"LU","iso_a2_eh":"LU","iso_a3":"LUX","iso_a3_eh":"LUX","iso_n3":"442","iso_n3_eh":"442","un_a3":"442","wb_a2":"LU","wb_a3":"LUX","woe_id":23424881,"woe_id_eh":23424881,"woe_note":"Exact WOE match as country","adm0_iso":"LUX","adm0_diff":null,"adm0_tlc":"LUX","adm0_a3_us":"LUX","adm0_a3_fr":"LUX","adm0_a3_ru":"LUX","adm0_a3_es":"LUX","adm0_a3_cn":"LUX","adm0_a3_tw":"LUX","adm0_a3_in":"LUX","adm0_a3_np":"LUX","adm0_a3_pk":"LUX","adm0_a3_de":"LUX","adm0_a3_gb":"LUX","adm0_a3_br":"LUX","adm0_a3_il":"LUX","adm0_a3_ps":"LUX","adm0_a3_sa":"LUX","adm0_a3_eg":"LUX","adm0_a3_ma":"LUX","adm0_a3_pt":"LUX","adm0_a3_ar":"LUX","adm0_a3_jp":"LUX","adm0_a3_ko":"LUX","adm0_a3_vn":"LUX","adm0_a3_tr":"LUX","adm0_a3_id":"LUX","adm0_a3_pl":"LUX","adm0_a3_gr":"LUX","adm0_a3_it":"LUX","adm0_a3_nl":"LUX","adm0_a3_se":"LUX","adm0_a3_bd":"LUX","adm0_a3_ua":"LUX","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":10,"long_len":10,"abbrev_len":4,"tiny":5,"homepart":1,"min_zoom":0,"min_label":5.7,"max_label":10,"label_x":6.07762,"label_y":49.733732,"ne_id":1159321031,"wikidataid":"Q32","name_ar":"لوكسمبورغ","name_bn":"লুক্সেমবুর্গ","name_de":"Luxemburg","name_en":"Luxembourg","name_es":"Luxemburgo","name_fa":"لوکزامبورگ","name_fr":"Luxembourg","name_el":"Λουξεμβούργο","name_he":"לוקסמבורג","name_hi":"लक्ज़मबर्ग","name_hu":"Luxemburg","name_id":"Luksemburg","name_it":"Lussemburgo","name_ja":"ルクセンブルク","name_ko":"룩셈부르크","name_nl":"Luxemburg","name_pl":"Luksemburg","name_pt":"Luxemburgo","name_ru":"Люксембург","name_sv":"Luxemburg","name_tr":"Lüksemburg","name_uk":"Люксембург","name_ur":"لکسمبرگ","name_vi":"Luxembourg","name_zh":"卢森堡","name_zht":"盧森堡","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"LUX.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[6.156658,50.803721],[5.606976,51.037298],[4.973991,51.475024],[4.047071,51.267259],[3.314971,51.345755],[3.315011,51.345777],[3.314971,51.345781],[2.513573,51.148506],[2.658422,50.796848],[3.123252,50.780363],[3.588184,50.378992],[4.286023,49.907497],[4.799222,49.985373],[5.674052,49.529484],[5.782417,50.090328],[6.043073,50.128052],[6.156658,50.803721]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"Belgium","sov_a3":"BEL","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Belgium","adm0_a3":"BEL","geou_dif":0,"geounit":"Belgium","gu_a3":"BEL","su_dif":0,"subunit":"Belgium","su_a3":"BEL","brk_diff":0,"name":"Belgium","name_long":"Belgium","brk_a3":"BEL","brk_name":"Belgium","brk_group":null,"abbrev":"Belg.","postal":"B","formal_en":"Kingdom of Belgium","formal_fr":null,"name_ciawf":"Belgium","note_adm0":null,"note_brk":null,"name_sort":"Belgium","name_alt":null,"mapcolor7":3,"mapcolor8":2,"mapcolor9":1,"mapcolor13":8,"pop_est":11484055,"pop_rank":14,"pop_year":2019,"gdp_md":533097,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"BE","iso_a2":"BE","iso_a2_eh":"BE","iso_a3":"BEL","iso_a3_eh":"BEL","iso_n3":"056","iso_n3_eh":"056","un_a3":"056","wb_a2":"BE","wb_a3":"BEL","woe_id":23424757,"woe_id_eh":23424757,"woe_note":"Exact WOE match as country","adm0_iso":"BEL","adm0_diff":null,"adm0_tlc":"BEL","adm0_a3_us":"BEL","adm0_a3_fr":"BEL","adm0_a3_ru":"BEL","adm0_a3_es":"BEL","adm0_a3_cn":"BEL","adm0_a3_tw":"BEL","adm0_a3_in":"BEL","adm0_a3_np":"BEL","adm0_a3_pk":"BEL","adm0_a3_de":"BEL","adm0_a3_gb":"BEL","adm0_a3_br":"BEL","adm0_a3_il":"BEL","adm0_a3_ps":"BEL","adm0_a3_sa":"BEL","adm0_a3_eg":"BEL","adm0_a3_ma":"BEL","adm0_a3_pt":"BEL","adm0_a3_ar":"BEL","adm0_a3_jp":"BEL","adm0_a3_ko":"BEL","adm0_a3_vn":"BEL","adm0_a3_tr":"BEL","adm0_a3_id":"BEL","adm0_a3_pl":"BEL","adm0_a3_gr":"BEL","adm0_a3_it":"BEL","adm0_a3_nl":"BEL","adm0_a3_se":"BEL","adm0_a3_bd":"BEL","adm0_a3_ua":"BEL","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":4.800448,"label_y":50.785392,"ne_id":1159320389,"wikidataid":"Q31","name_ar":"بلجيكا","name_bn":"বেলজিয়াম","name_de":"Belgien","name_en":"Belgium","name_es":"Bélgica","name_fa":"بلژیک","name_fr":"Belgique","name_el":"Βέλγιο","name_he":"בלגיה","name_hi":"बेल्जियम","name_hu":"Belgium","name_id":"Belgia","name_it":"Belgio","name_ja":"ベルギー","name_ko":"벨기에","name_nl":"België","name_pl":"Belgia","name_pt":"Bélgica","name_ru":"Бельгия","name_sv":"Belgien","name_tr":"Belçika","name_uk":"Бельгія","name_ur":"بلجئیم","name_vi":"Bỉ","name_zh":"比利时","name_zht":"比利時","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"BEL.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[21.02004,40.842727],[20.605182,41.086226],[20.463175,41.515089],[20.590247,41.855404],[20.590247,41.855409],[20.52295,42.21787],[20.283755,42.32026],[20.0707,42.58863],[19.801613,42.500093],[19.738051,42.688247],[19.304486,42.195745],[19.371768,41.877551],[19.371769,41.877548],[19.540027,41.719986],[19.40355,41.409566],[19.319059,40.72723],[19.406082,40.250773],[19.960002,39.915006],[19.98,39.694993],[20.150016,39.624998],[20.615,40.110007],[20.674997,40.435],[20.99999,40.580004],[21.02004,40.842727]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Albania","sov_a3":"ALB","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Albania","adm0_a3":"ALB","geou_dif":0,"geounit":"Albania","gu_a3":"ALB","su_dif":0,"subunit":"Albania","su_a3":"ALB","brk_diff":0,"name":"Albania","name_long":"Albania","brk_a3":"ALB","brk_name":"Albania","brk_group":null,"abbrev":"Alb.","postal":"AL","formal_en":"Republic of Albania","formal_fr":null,"name_ciawf":"Albania","note_adm0":null,"note_brk":null,"name_sort":"Albania","name_alt":null,"mapcolor7":1,"mapcolor8":4,"mapcolor9":1,"mapcolor13":6,"pop_est":2854191,"pop_rank":12,"pop_year":2019,"gdp_md":15279,"gdp_year":2019,"economy":"6. Developing region","income_grp":"4. Lower middle income","fips_10":"AL","iso_a2":"AL","iso_a2_eh":"AL","iso_a3":"ALB","iso_a3_eh":"ALB","iso_n3":"008","iso_n3_eh":"008","un_a3":"008","wb_a2":"AL","wb_a3":"ALB","woe_id":23424742,"woe_id_eh":23424742,"woe_note":"Exact WOE match as country","adm0_iso":"ALB","adm0_diff":null,"adm0_tlc":"ALB","adm0_a3_us":"ALB","adm0_a3_fr":"ALB","adm0_a3_ru":"ALB","adm0_a3_es":"ALB","adm0_a3_cn":"ALB","adm0_a3_tw":"ALB","adm0_a3_in":"ALB","adm0_a3_np":"ALB","adm0_a3_pk":"ALB","adm0_a3_de":"ALB","adm0_a3_gb":"ALB","adm0_a3_br":"ALB","adm0_a3_il":"ALB","adm0_a3_ps":"ALB","adm0_a3_sa":"ALB","adm0_a3_eg":"ALB","adm0_a3_ma":"ALB","adm0_a3_pt":"ALB","adm0_a3_ar":"ALB","adm0_a3_jp":"ALB","adm0_a3_ko":"ALB","adm0_a3_vn":"ALB","adm0_a3_tr":"ALB","adm0_a3_id":"ALB","adm0_a3_pl":"ALB","adm0_a3_gr":"ALB","adm0_a3_it":"ALB","adm0_a3_nl":"ALB","adm0_a3_se":"ALB","adm0_a3_bd":"ALB","adm0_a3_ua":"ALB","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":5,"max_label":10,"label_x":20.11384,"label_y":40.654855,"ne_id":1159320325,"wikidataid":"Q222","name_ar":"ألبانيا","name_bn":"আলবেনিয়া","name_de":"Albanien","name_en":"Albania","name_es":"Albania","name_fa":"آلبانی","name_fr":"Albanie","name_el":"Αλβανία","name_he":"אלבניה","name_hi":"अल्बानिया","name_hu":"Albánia","name_id":"Albania","name_it":"Albania","name_ja":"アルバニア","name_ko":"알바니아","name_nl":"Albanië","name_pl":"Albania","name_pt":"Albânia","name_ru":"Албания","name_sv":"Albanien","name_tr":"Arnavutluk","name_uk":"Албанія","name_ur":"البانیا","name_vi":"Albania","name_zh":"阿尔巴尼亚","name_zht":"阿爾巴尼亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"ALB.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[20.590247,41.855409],[20.71731,41.84711],[20.76216,42.05186],[21.3527,42.2068],[21.576636,42.245224],[21.54332,42.32025],[21.66292,42.43922],[21.77505,42.6827],[21.63302,42.67717],[21.43866,42.86255],[21.27421,42.90959],[21.143395,43.068685],[20.95651,43.13094],[20.81448,43.27205],[20.63508,43.21671],[20.49679,42.88469],[20.25758,42.81275],[20.0707,42.58863],[20.283755,42.32026],[20.52295,42.21787],[20.590247,41.855409]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Kosovo","sov_a3":"KOS","adm0_dif":0,"level":2,"type":"Disputed","tlc":"1","admin":"Kosovo","adm0_a3":"KOS","geou_dif":0,"geounit":"Kosovo","gu_a3":"KOS","su_dif":0,"subunit":"Kosovo","su_a3":"KOS","brk_diff":0,"name":"Kosovo","name_long":"Kosovo","brk_a3":"KOS","brk_name":"Kosovo","brk_group":null,"abbrev":"Kos.","postal":"KO","formal_en":"Republic of Kosovo","formal_fr":null,"name_ciawf":"Kosovo","note_adm0":null,"note_brk":null,"name_sort":"Kosovo","name_alt":null,"mapcolor7":2,"mapcolor8":2,"mapcolor9":3,"mapcolor13":11,"pop_est":1794248,"pop_rank":12,"pop_year":2019,"gdp_md":7926,"gdp_year":2019,"economy":"6. Developing region","income_grp":"4. Lower middle income","fips_10":"KV","iso_a2":"-99","iso_a2_eh":"XK","iso_a3":"-99","iso_a3_eh":"-99","iso_n3":"-99","iso_n3_eh":"-99","un_a3":"-099","wb_a2":"KV","wb_a3":"KSV","woe_id":-90,"woe_id_eh":29389201,"woe_note":"Subunit of Serbia in WOE still; should include 29389201, 29389207, 29389218, 29389209 and 29389214.","adm0_iso":"SRB","adm0_diff":"1","adm0_tlc":"KOS","adm0_a3_us":"KOS","adm0_a3_fr":"KOS","adm0_a3_ru":"SRB","adm0_a3_es":"SRB","adm0_a3_cn":"SRB","adm0_a3_tw":"KOS","adm0_a3_in":"SRB","adm0_a3_np":"SRB","adm0_a3_pk":"KOS","adm0_a3_de":"KOS","adm0_a3_gb":"SRB","adm0_a3_br":"KOS","adm0_a3_il":"KOS","adm0_a3_ps":"SRB","adm0_a3_sa":"KOS","adm0_a3_eg":"KOS","adm0_a3_ma":"SRB","adm0_a3_pt":"KOS","adm0_a3_ar":"SRB","adm0_a3_jp":"KOS","adm0_a3_ko":"KOS","adm0_a3_vn":"SRB","adm0_a3_tr":"KOS","adm0_a3_id":"SRB","adm0_a3_pl":"KOS","adm0_a3_gr":"SRB","adm0_a3_it":"KOS","adm0_a3_nl":"KOS","adm0_a3_se":"KOS","adm0_a3_bd":"KOS","adm0_a3_ua":"SRB","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":5,"max_label":10,"label_x":20.860719,"label_y":42.593587,"ne_id":1159321007,"wikidataid":"Q1246","name_ar":"كوسوفو","name_bn":"কসোভো","name_de":"Kosovo","name_en":"Kosovo","name_es":"Kosovo","name_fa":"کوزووو","name_fr":"Kosovo","name_el":"Κοσσυφοπέδιο","name_he":"קוסובו","name_hi":"कोसोवो गणराज्य","name_hu":"Koszovó","name_id":"Kosovo","name_it":"Kosovo","name_ja":"コソボ共和国","name_ko":"코소보","name_nl":"Kosovo","name_pl":"Kosowo","name_pt":"Kosovo","name_ru":"Республика Косово","name_sv":"Kosovo","name_tr":"Kosova","name_uk":"Косово","name_ur":"کوسووہ","name_vi":"Kosovo","name_zh":"科索沃","name_zht":"科索沃","fclass_iso":"Unrecognized","tlc_diff":"1","fclass_tlc":"Admin-0 country","fclass_us":"Admin-0 country","fclass_fr":"Admin-0 country","fclass_ru":"Admin-1 region","fclass_es":"Unrecognized","fclass_cn":"Unrecognized","fclass_tw":"Admin-0 country","fclass_in":"Admin-1 region","fclass_np":"Unrecognized","fclass_pk":"Admin-0 country","fclass_de":"Admin-0 country","fclass_gb":"Admin-0 country","fclass_br":"Unrecognized","fclass_il":"Admin-0 country","fclass_ps":"Unrecognized","fclass_sa":"Admin-0 country","fclass_eg":"Admin-0 country","fclass_ma":"Unrecognized","fclass_pt":"Admin-0 country","fclass_ar":"Unrecognized","fclass_jp":"Admin-0 country","fclass_ko":"Admin-0 country","fclass_vn":"Unrecognized","fclass_tr":"Admin-0 country","fclass_id":"Unrecognized","fclass_pl":"Admin-0 country","fclass_gr":"Unrecognized","fclass_it":"Admin-0 country","fclass_nl":"Admin-0 country","fclass_se":"Admin-0 country","fclass_bd":"Admin-0 country","fclass_ua":"Unrecognized","filename":"kosovo.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-7.453726,37.097788],[-6.520191,36.942913],[-6.236694,36.367677],[-5.866432,36.029817],[-5.37716,35.94685],[-4.995219,36.324708],[-4.368901,36.677839],[-3.415781,36.6589],[-2.146453,36.674144],[-1.438382,37.443064],[-0.683389,37.642354],[-0.467124,38.292366],[0.111291,38.738514],[-0.278711,39.309978],[0.106692,40.123934],[0.721331,40.678318],[0.810525,41.014732],[2.091842,41.226089],[3.039484,41.89212],[2.985999,42.473015],[1.826793,42.343385],[0.701591,42.795734],[0.338047,42.579546],[-1.502771,43.034014],[-1.901351,43.422802],[-3.517532,43.455901],[-4.347843,43.403449],[-5.411886,43.57424],[-6.754492,43.567909],[-7.97819,43.748338],[-9.392884,43.026625],[-8.984433,42.592775],[-9.034818,41.880571],[-8.671946,42.134689],[-8.263857,42.280469],[-8.013175,41.790886],[-7.422513,41.792075],[-7.251309,41.918346],[-6.668606,41.883387],[-6.389088,41.381815],[-6.851127,41.111083],[-6.86402,40.330872],[-7.026413,40.184524],[-7.066592,39.711892],[-7.498632,39.629571],[-7.098037,39.030073],[-7.374092,38.373059],[-7.029281,38.075764],[-7.166508,37.803894],[-7.537105,37.428904],[-7.453726,37.097788]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"Spain","sov_a3":"ESP","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Spain","adm0_a3":"ESP","geou_dif":0,"geounit":"Spain","gu_a3":"ESP","su_dif":0,"subunit":"Spain","su_a3":"ESP","brk_diff":0,"name":"Spain","name_long":"Spain","brk_a3":"ESP","brk_name":"Spain","brk_group":null,"abbrev":"Sp.","postal":"E","formal_en":"Kingdom of Spain","formal_fr":null,"name_ciawf":"Spain","note_adm0":null,"note_brk":null,"name_sort":"Spain","name_alt":null,"mapcolor7":4,"mapcolor8":5,"mapcolor9":5,"mapcolor13":5,"pop_est":47076781,"pop_rank":15,"pop_year":2019,"gdp_md":1393490,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"SP","iso_a2":"ES","iso_a2_eh":"ES","iso_a3":"ESP","iso_a3_eh":"ESP","iso_n3":"724","iso_n3_eh":"724","un_a3":"724","wb_a2":"ES","wb_a3":"ESP","woe_id":23424950,"woe_id_eh":23424950,"woe_note":"Exact WOE match as country","adm0_iso":"ESP","adm0_diff":null,"adm0_tlc":"ESP","adm0_a3_us":"ESP","adm0_a3_fr":"ESP","adm0_a3_ru":"ESP","adm0_a3_es":"ESP","adm0_a3_cn":"ESP","adm0_a3_tw":"ESP","adm0_a3_in":"ESP","adm0_a3_np":"ESP","adm0_a3_pk":"ESP","adm0_a3_de":"ESP","adm0_a3_gb":"ESP","adm0_a3_br":"ESP","adm0_a3_il":"ESP","adm0_a3_ps":"ESP","adm0_a3_sa":"ESP","adm0_a3_eg":"ESP","adm0_a3_ma":"ESP","adm0_a3_pt":"ESP","adm0_a3_ar":"ESP","adm0_a3_jp":"ESP","adm0_a3_ko":"ESP","adm0_a3_vn":"ESP","adm0_a3_tr":"ESP","adm0_a3_id":"ESP","adm0_a3_pl":"ESP","adm0_a3_gr":"ESP","adm0_a3_it":"ESP","adm0_a3_nl":"ESP","adm0_a3_se":"ESP","adm0_a3_bd":"ESP","adm0_a3_ua":"ESP","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":5,"long_len":5,"abbrev_len":3,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2,"max_label":7,"label_x":-3.464718,"label_y":40.090953,"ne_id":1159320587,"wikidataid":"Q29","name_ar":"إسبانيا","name_bn":"স্পেন","name_de":"Spanien","name_en":"Spain","name_es":"España","name_fa":"اسپانیا","name_fr":"Espagne","name_el":"Ισπανία","name_he":"ספרד","name_hi":"स्पेन","name_hu":"Spanyolország","name_id":"Spanyol","name_it":"Spagna","name_ja":"スペイン","name_ko":"스페인","name_nl":"Spanje","name_pl":"Hiszpania","name_pt":"Espanha","name_ru":"Испания","name_sv":"Spanien","name_tr":"İspanya","name_uk":"Іспанія","name_ur":"ہسپانیہ","name_vi":"Tây Ban Nha","name_zh":"西班牙","name_zht":"西班牙","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"ESP.geojson"}},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[9.921906,54.983104],[9.649985,55.469999],[10.369993,56.190007],[10.667804,56.081383],[10.912182,56.458621],[10.369993,56.609982],[10.25,56.890016],[10.546106,57.215733],[10.580006,57.730017],[9.775559,57.447941],[9.424469,57.172066],[8.543438,57.110003],[8.256582,56.809969],[8.089977,56.540012],[8.120311,55.517723],[8.526229,54.962744],[9.282049,54.830865],[9.921906,54.983104]]],[[[12.370904,56.111407],[10.903914,55.779955],[11.043543,55.364864],[12.089991,54.800015],[12.690006,55.609991],[12.370904,56.111407]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":4,"sovereignt":"Denmark","sov_a3":"DN1","adm0_dif":1,"level":2,"type":"Country","tlc":"1","admin":"Denmark","adm0_a3":"DNK","geou_dif":0,"geounit":"Denmark","gu_a3":"DNK","su_dif":0,"subunit":"Denmark","su_a3":"DNK","brk_diff":0,"name":"Denmark","name_long":"Denmark","brk_a3":"DNK","brk_name":"Denmark","brk_group":null,"abbrev":"Den.","postal":"DK","formal_en":"Kingdom of Denmark","formal_fr":null,"name_ciawf":"Denmark","note_adm0":null,"note_brk":null,"name_sort":"Denmark","name_alt":null,"mapcolor7":4,"mapcolor8":1,"mapcolor9":3,"mapcolor13":12,"pop_est":5818553,"pop_rank":13,"pop_year":2019,"gdp_md":350104,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"DA","iso_a2":"DK","iso_a2_eh":"DK","iso_a3":"DNK","iso_a3_eh":"DNK","iso_n3":"208","iso_n3_eh":"208","un_a3":"208","wb_a2":"DK","wb_a3":"DNK","woe_id":23424796,"woe_id_eh":23424796,"woe_note":"Exact WOE match as country","adm0_iso":"DNK","adm0_diff":null,"adm0_tlc":"DNK","adm0_a3_us":"DNK","adm0_a3_fr":"DNK","adm0_a3_ru":"DNK","adm0_a3_es":"DNK","adm0_a3_cn":"DNK","adm0_a3_tw":"DNK","adm0_a3_in":"DNK","adm0_a3_np":"DNK","adm0_a3_pk":"DNK","adm0_a3_de":"DNK","adm0_a3_gb":"DNK","adm0_a3_br":"DNK","adm0_a3_il":"DNK","adm0_a3_ps":"DNK","adm0_a3_sa":"DNK","adm0_a3_eg":"DNK","adm0_a3_ma":"DNK","adm0_a3_pt":"DNK","adm0_a3_ar":"DNK","adm0_a3_jp":"DNK","adm0_a3_ko":"DNK","adm0_a3_vn":"DNK","adm0_a3_tr":"DNK","adm0_a3_id":"DNK","adm0_a3_pl":"DNK","adm0_a3_gr":"DNK","adm0_a3_it":"DNK","adm0_a3_nl":"DNK","adm0_a3_se":"DNK","adm0_a3_bd":"DNK","adm0_a3_ua":"DNK","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":9.018163,"label_y":55.966965,"ne_id":1159320547,"wikidataid":"Q35","name_ar":"الدنمارك","name_bn":"ডেনমার্ক","name_de":"Dänemark","name_en":"Denmark","name_es":"Dinamarca","name_fa":"دانمارک","name_fr":"Danemark","name_el":"Δανία","name_he":"דנמרק","name_hi":"डेनमार्क","name_hu":"Dánia","name_id":"Denmark","name_it":"Danimarca","name_ja":"デンマーク","name_ko":"덴마크","name_nl":"Denemarken","name_pl":"Dania","name_pt":"Dinamarca","name_ru":"Дания","name_sv":"Danmark","name_tr":"Danimarka","name_uk":"Данія","name_ur":"ڈنمارک","name_vi":"Đan Mạch","name_zh":"丹麦","name_zht":"丹麥","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"DNK.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[28.233554,45.488283],[28.054443,45.944586],[28.160018,46.371563],[28.12803,46.810476],[27.551166,47.405117],[27.233873,47.826771],[26.924176,48.123264],[26.619337,48.220726],[26.19745,48.220881],[25.945941,47.987149],[25.207743,47.891056],[24.866317,47.737526],[24.402056,47.981878],[23.760958,47.985598],[23.142236,48.096341],[22.710531,47.882194],[22.099768,47.672439],[21.626515,46.994238],[21.021952,46.316088],[20.220192,46.127469],[20.762175,45.734573],[20.874313,45.416375],[21.483526,45.18117],[21.562023,44.768947],[22.145088,44.478422],[22.459022,44.702517],[22.705726,44.578003],[22.474008,44.409228],[22.65715,44.234923],[22.944832,43.823785],[23.332302,43.897011],[24.100679,43.741051],[25.569272,43.688445],[26.065159,43.943494],[27.2424,44.175986],[27.970107,43.812468],[28.558081,43.707462],[28.837858,44.913874],[29.141612,44.82021],[29.626543,45.035391],[29.603289,45.293308],[29.149725,45.464925],[28.679779,45.304031],[28.233554,45.488283]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Romania","sov_a3":"ROU","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Romania","adm0_a3":"ROU","geou_dif":0,"geounit":"Romania","gu_a3":"ROU","su_dif":0,"subunit":"Romania","su_a3":"ROU","brk_diff":0,"name":"Romania","name_long":"Romania","brk_a3":"ROU","brk_name":"Romania","brk_group":null,"abbrev":"Rom.","postal":"RO","formal_en":"Romania","formal_fr":null,"name_ciawf":"Romania","note_adm0":null,"note_brk":null,"name_sort":"Romania","name_alt":null,"mapcolor7":1,"mapcolor8":4,"mapcolor9":3,"mapcolor13":13,"pop_est":19356544,"pop_rank":14,"pop_year":2019,"gdp_md":250077,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"3. Upper middle income","fips_10":"RO","iso_a2":"RO","iso_a2_eh":"RO","iso_a3":"ROU","iso_a3_eh":"ROU","iso_n3":"642","iso_n3_eh":"642","un_a3":"642","wb_a2":"RO","wb_a3":"ROM","woe_id":23424933,"woe_id_eh":23424933,"woe_note":"Exact WOE match as country","adm0_iso":"ROU","adm0_diff":null,"adm0_tlc":"ROU","adm0_a3_us":"ROU","adm0_a3_fr":"ROU","adm0_a3_ru":"ROU","adm0_a3_es":"ROU","adm0_a3_cn":"ROU","adm0_a3_tw":"ROU","adm0_a3_in":"ROU","adm0_a3_np":"ROU","adm0_a3_pk":"ROU","adm0_a3_de":"ROU","adm0_a3_gb":"ROU","adm0_a3_br":"ROU","adm0_a3_il":"ROU","adm0_a3_ps":"ROU","adm0_a3_sa":"ROU","adm0_a3_eg":"ROU","adm0_a3_ma":"ROU","adm0_a3_pt":"ROU","adm0_a3_ar":"ROU","adm0_a3_jp":"ROU","adm0_a3_ko":"ROU","adm0_a3_vn":"ROU","adm0_a3_tr":"ROU","adm0_a3_id":"ROU","adm0_a3_pl":"ROU","adm0_a3_gr":"ROU","adm0_a3_it":"ROU","adm0_a3_nl":"ROU","adm0_a3_se":"ROU","adm0_a3_bd":"ROU","adm0_a3_ua":"ROU","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":24.972624,"label_y":45.733237,"ne_id":1159321199,"wikidataid":"Q218","name_ar":"رومانيا","name_bn":"রোমানিয়া","name_de":"Rumänien","name_en":"Romania","name_es":"Rumania","name_fa":"رومانی","name_fr":"Roumanie","name_el":"Ρουμανία","name_he":"רומניה","name_hi":"रोमानिया","name_hu":"Románia","name_id":"Rumania","name_it":"Romania","name_ja":"ルーマニア","name_ko":"루마니아","name_nl":"Roemenië","name_pl":"Rumunia","name_pt":"Roménia","name_ru":"Румыния","name_sv":"Rumänien","name_tr":"Romanya","name_uk":"Румунія","name_ur":"رومانیہ","name_vi":"Romania","name_zh":"罗马尼亚","name_zht":"羅馬尼亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"ROU.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[22.085608,48.422264],[21.872236,48.319971],[20.801294,48.623854],[20.473562,48.56285],[20.239054,48.327567],[19.769471,48.202691],[19.661364,48.266615],[19.174365,48.111379],[18.777025,48.081768],[18.696513,47.880954],[17.857133,47.758429],[17.488473,47.867466],[16.979667,48.123497],[16.903754,47.714866],[16.340584,47.712902],[16.534268,47.496171],[16.202298,46.852386],[16.370505,46.841327],[16.564808,46.503751],[16.882515,46.380632],[17.630066,45.951769],[18.456062,45.759481],[18.829825,45.908872],[18.829838,45.908878],[19.596045,46.17173],[20.220192,46.127469],[21.021952,46.316088],[21.626515,46.994238],[22.099768,47.672439],[22.710531,47.882194],[22.64082,48.15024],[22.085608,48.422264]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Hungary","sov_a3":"HUN","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Hungary","adm0_a3":"HUN","geou_dif":0,"geounit":"Hungary","gu_a3":"HUN","su_dif":0,"subunit":"Hungary","su_a3":"HUN","brk_diff":0,"name":"Hungary","name_long":"Hungary","brk_a3":"HUN","brk_name":"Hungary","brk_group":null,"abbrev":"Hun.","postal":"HU","formal_en":"Republic of Hungary","formal_fr":null,"name_ciawf":"Hungary","note_adm0":null,"note_brk":null,"name_sort":"Hungary","name_alt":null,"mapcolor7":4,"mapcolor8":6,"mapcolor9":1,"mapcolor13":5,"pop_est":9769949,"pop_rank":13,"pop_year":2019,"gdp_md":163469,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"HU","iso_a2":"HU","iso_a2_eh":"HU","iso_a3":"HUN","iso_a3_eh":"HUN","iso_n3":"348","iso_n3_eh":"348","un_a3":"348","wb_a2":"HU","wb_a3":"HUN","woe_id":23424844,"woe_id_eh":23424844,"woe_note":"Exact WOE match as country","adm0_iso":"HUN","adm0_diff":null,"adm0_tlc":"HUN","adm0_a3_us":"HUN","adm0_a3_fr":"HUN","adm0_a3_ru":"HUN","adm0_a3_es":"HUN","adm0_a3_cn":"HUN","adm0_a3_tw":"HUN","adm0_a3_in":"HUN","adm0_a3_np":"HUN","adm0_a3_pk":"HUN","adm0_a3_de":"HUN","adm0_a3_gb":"HUN","adm0_a3_br":"HUN","adm0_a3_il":"HUN","adm0_a3_ps":"HUN","adm0_a3_sa":"HUN","adm0_a3_eg":"HUN","adm0_a3_ma":"HUN","adm0_a3_pt":"HUN","adm0_a3_ar":"HUN","adm0_a3_jp":"HUN","adm0_a3_ko":"HUN","adm0_a3_vn":"HUN","adm0_a3_tr":"HUN","adm0_a3_id":"HUN","adm0_a3_pl":"HUN","adm0_a3_gr":"HUN","adm0_a3_it":"HUN","adm0_a3_nl":"HUN","adm0_a3_se":"HUN","adm0_a3_bd":"HUN","adm0_a3_ua":"HUN","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":19.447867,"label_y":47.086841,"ne_id":1159320841,"wikidataid":"Q28","name_ar":"المجر","name_bn":"হাঙ্গেরি","name_de":"Ungarn","name_en":"Hungary","name_es":"Hungría","name_fa":"مجارستان","name_fr":"Hongrie","name_el":"Ουγγαρία","name_he":"הונגריה","name_hi":"हंगरी","name_hu":"Magyarország","name_id":"Hongaria","name_it":"Ungheria","name_ja":"ハンガリー","name_ko":"헝가리","name_nl":"Hongarije","name_pl":"Węgry","name_pt":"Hungria","name_ru":"Венгрия","name_sv":"Ungern","name_tr":"Macaristan","name_uk":"Угорщина","name_ur":"ہنگری","name_vi":"Hungary","name_zh":"匈牙利","name_zht":"匈牙利","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"HUN.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[22.558138,49.085738],[21.607808,49.470107],[20.887955,49.328772],[20.415839,49.431453],[19.825023,49.217125],[19.320713,49.571574],[18.909575,49.435846],[18.853144,49.49623],[18.554971,49.495015],[18.399994,49.315001],[18.170498,49.271515],[18.104973,49.043983],[17.913512,48.996493],[17.886485,48.903475],[17.545007,48.800019],[17.101985,48.816969],[16.960288,48.596982],[16.879983,48.470013],[16.979667,48.123497],[17.488473,47.867466],[17.857133,47.758429],[18.696513,47.880954],[18.777025,48.081768],[19.174365,48.111379],[19.661364,48.266615],[19.769471,48.202691],[20.239054,48.327567],[20.473562,48.56285],[20.801294,48.623854],[21.872236,48.319971],[22.085608,48.422264],[22.280842,48.825392],[22.558138,49.085738]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Slovakia","sov_a3":"SVK","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Slovakia","adm0_a3":"SVK","geou_dif":0,"geounit":"Slovakia","gu_a3":"SVK","su_dif":0,"subunit":"Slovakia","su_a3":"SVK","brk_diff":0,"name":"Slovakia","name_long":"Slovakia","brk_a3":"SVK","brk_name":"Slovakia","brk_group":null,"abbrev":"Svk.","postal":"SK","formal_en":"Slovak Republic","formal_fr":null,"name_ciawf":"Slovakia","note_adm0":null,"note_brk":null,"name_sort":"Slovak Republic","name_alt":null,"mapcolor7":2,"mapcolor8":4,"mapcolor9":4,"mapcolor13":9,"pop_est":5454073,"pop_rank":13,"pop_year":2019,"gdp_md":105079,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"LO","iso_a2":"SK","iso_a2_eh":"SK","iso_a3":"SVK","iso_a3_eh":"SVK","iso_n3":"703","iso_n3_eh":"703","un_a3":"703","wb_a2":"SK","wb_a3":"SVK","woe_id":23424877,"woe_id_eh":23424877,"woe_note":"Exact WOE match as country","adm0_iso":"SVK","adm0_diff":null,"adm0_tlc":"SVK","adm0_a3_us":"SVK","adm0_a3_fr":"SVK","adm0_a3_ru":"SVK","adm0_a3_es":"SVK","adm0_a3_cn":"SVK","adm0_a3_tw":"SVK","adm0_a3_in":"SVK","adm0_a3_np":"SVK","adm0_a3_pk":"SVK","adm0_a3_de":"SVK","adm0_a3_gb":"SVK","adm0_a3_br":"SVK","adm0_a3_il":"SVK","adm0_a3_ps":"SVK","adm0_a3_sa":"SVK","adm0_a3_eg":"SVK","adm0_a3_ma":"SVK","adm0_a3_pt":"SVK","adm0_a3_ar":"SVK","adm0_a3_jp":"SVK","adm0_a3_ko":"SVK","adm0_a3_vn":"SVK","adm0_a3_tr":"SVK","adm0_a3_id":"SVK","adm0_a3_pl":"SVK","adm0_a3_gr":"SVK","adm0_a3_it":"SVK","adm0_a3_nl":"SVK","adm0_a3_se":"SVK","adm0_a3_bd":"SVK","adm0_a3_ua":"SVK","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":8,"long_len":8,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":19.049868,"label_y":48.734044,"ne_id":1159321283,"wikidataid":"Q214","name_ar":"سلوفاكيا","name_bn":"স্লোভাকিয়া","name_de":"Slowakei","name_en":"Slovakia","name_es":"Eslovaquia","name_fa":"اسلواکی","name_fr":"Slovaquie","name_el":"Σλοβακία","name_he":"סלובקיה","name_hi":"स्लोवाकिया","name_hu":"Szlovákia","name_id":"Slowakia","name_it":"Slovacchia","name_ja":"スロバキア","name_ko":"슬로바키아","name_nl":"Slowakije","name_pl":"Słowacja","name_pt":"Eslováquia","name_ru":"Словакия","name_sv":"Slovakien","name_tr":"Slovakya","name_uk":"Словаччина","name_ur":"سلوواکیہ","name_vi":"Slovakia","name_zh":"斯洛伐克","name_zht":"斯洛伐克","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"SVK.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[23.484128,53.912498],[23.243987,54.220567],[22.731099,54.327537],[20.892245,54.312525],[19.66064,54.426084],[18.696255,54.438719],[18.620859,54.682606],[17.622832,54.851536],[16.363477,54.513159],[14.8029,54.050706],[14.119686,53.757029],[14.353315,53.248171],[14.074521,52.981263],[14.4376,52.62485],[14.685026,52.089947],[14.607098,51.745188],[15.016996,51.106674],[15.490972,50.78473],[16.238627,50.697733],[16.176253,50.422607],[16.719476,50.215747],[16.868769,50.473974],[17.554567,50.362146],[17.649445,50.049038],[18.392914,49.988629],[18.853144,49.49623],[18.909575,49.435846],[19.320713,49.571574],[19.825023,49.217125],[20.415839,49.431453],[20.887955,49.328772],[21.607808,49.470107],[22.558138,49.085738],[22.776419,49.027395],[22.51845,49.476774],[23.426508,50.308506],[23.922757,50.424881],[24.029986,50.705407],[23.527071,51.578454],[23.508002,52.023647],[23.199494,52.486977],[23.799199,52.691099],[23.804935,53.089731],[23.527536,53.470122],[23.484128,53.912498]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Poland","sov_a3":"POL","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Poland","adm0_a3":"POL","geou_dif":0,"geounit":"Poland","gu_a3":"POL","su_dif":0,"subunit":"Poland","su_a3":"POL","brk_diff":0,"name":"Poland","name_long":"Poland","brk_a3":"POL","brk_name":"Poland","brk_group":null,"abbrev":"Pol.","postal":"PL","formal_en":"Republic of Poland","formal_fr":null,"name_ciawf":"Poland","note_adm0":null,"note_brk":null,"name_sort":"Poland","name_alt":null,"mapcolor7":3,"mapcolor8":7,"mapcolor9":1,"mapcolor13":2,"pop_est":37970874,"pop_rank":15,"pop_year":2019,"gdp_md":595858,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"PL","iso_a2":"PL","iso_a2_eh":"PL","iso_a3":"POL","iso_a3_eh":"POL","iso_n3":"616","iso_n3_eh":"616","un_a3":"616","wb_a2":"PL","wb_a3":"POL","woe_id":23424923,"woe_id_eh":23424923,"woe_note":"Exact WOE match as country","adm0_iso":"POL","adm0_diff":null,"adm0_tlc":"POL","adm0_a3_us":"POL","adm0_a3_fr":"POL","adm0_a3_ru":"POL","adm0_a3_es":"POL","adm0_a3_cn":"POL","adm0_a3_tw":"POL","adm0_a3_in":"POL","adm0_a3_np":"POL","adm0_a3_pk":"POL","adm0_a3_de":"POL","adm0_a3_gb":"POL","adm0_a3_br":"POL","adm0_a3_il":"POL","adm0_a3_ps":"POL","adm0_a3_sa":"POL","adm0_a3_eg":"POL","adm0_a3_ma":"POL","adm0_a3_pt":"POL","adm0_a3_ar":"POL","adm0_a3_jp":"POL","adm0_a3_ko":"POL","adm0_a3_vn":"POL","adm0_a3_tr":"POL","adm0_a3_id":"POL","adm0_a3_pl":"POL","adm0_a3_gr":"POL","adm0_a3_it":"POL","adm0_a3_nl":"POL","adm0_a3_se":"POL","adm0_a3_bd":"POL","adm0_a3_ua":"POL","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2.5,"max_label":7,"label_x":19.490468,"label_y":51.990316,"ne_id":1159321179,"wikidataid":"Q36","name_ar":"بولندا","name_bn":"পোল্যান্ড","name_de":"Polen","name_en":"Poland","name_es":"Polonia","name_fa":"لهستان","name_fr":"Pologne","name_el":"Πολωνία","name_he":"פולין","name_hi":"पोलैंड","name_hu":"Lengyelország","name_id":"Polandia","name_it":"Polonia","name_ja":"ポーランド","name_ko":"폴란드","name_nl":"Polen","name_pl":"Polska","name_pt":"Polónia","name_ru":"Польша","name_sv":"Polen","name_tr":"Polonya","name_uk":"Польща","name_ur":"پولینڈ","name_vi":"Ba Lan","name_zh":"波兰","name_zht":"波蘭","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"POL.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-6.197885,53.867565],[-6.95373,54.073702],[-7.572168,54.059956],[-7.366031,54.595841],[-7.572168,55.131622],[-8.327987,54.664519],[-9.688525,53.881363],[-9.166283,52.864629],[-9.977086,51.820455],[-8.561617,51.669301],[-6.788857,52.260118],[-6.032985,53.153164],[-6.197885,53.867565]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Ireland","sov_a3":"IRL","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Ireland","adm0_a3":"IRL","geou_dif":0,"geounit":"Ireland","gu_a3":"IRL","su_dif":0,"subunit":"Ireland","su_a3":"IRL","brk_diff":0,"name":"Ireland","name_long":"Ireland","brk_a3":"IRL","brk_name":"Ireland","brk_group":null,"abbrev":"Ire.","postal":"IRL","formal_en":"Ireland","formal_fr":null,"name_ciawf":"Ireland","note_adm0":null,"note_brk":null,"name_sort":"Ireland","name_alt":null,"mapcolor7":2,"mapcolor8":3,"mapcolor9":2,"mapcolor13":2,"pop_est":4941444,"pop_rank":12,"pop_year":2019,"gdp_md":388698,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"EI","iso_a2":"IE","iso_a2_eh":"IE","iso_a3":"IRL","iso_a3_eh":"IRL","iso_n3":"372","iso_n3_eh":"372","un_a3":"372","wb_a2":"IE","wb_a3":"IRL","woe_id":23424803,"woe_id_eh":23424803,"woe_note":"Exact WOE match as country","adm0_iso":"IRL","adm0_diff":null,"adm0_tlc":"IRL","adm0_a3_us":"IRL","adm0_a3_fr":"IRL","adm0_a3_ru":"IRL","adm0_a3_es":"IRL","adm0_a3_cn":"IRL","adm0_a3_tw":"IRL","adm0_a3_in":"IRL","adm0_a3_np":"IRL","adm0_a3_pk":"IRL","adm0_a3_de":"IRL","adm0_a3_gb":"IRL","adm0_a3_br":"IRL","adm0_a3_il":"IRL","adm0_a3_ps":"IRL","adm0_a3_sa":"IRL","adm0_a3_eg":"IRL","adm0_a3_ma":"IRL","adm0_a3_pt":"IRL","adm0_a3_ar":"IRL","adm0_a3_jp":"IRL","adm0_a3_ko":"IRL","adm0_a3_vn":"IRL","adm0_a3_tr":"IRL","adm0_a3_id":"IRL","adm0_a3_pl":"IRL","adm0_a3_gr":"IRL","adm0_a3_it":"IRL","adm0_a3_nl":"IRL","adm0_a3_se":"IRL","adm0_a3_bd":"IRL","adm0_a3_ua":"IRL","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":-7.798588,"label_y":53.078726,"ne_id":1159320877,"wikidataid":"Q27","name_ar":"جمهورية أيرلندا","name_bn":"প্রজাতন্ত্রী আয়ারল্যান্ড","name_de":"Irland","name_en":"Ireland","name_es":"Irlanda","name_fa":"ایرلند","name_fr":"Irlande","name_el":"Δημοκρατία της Ιρλανδίας","name_he":"אירלנד","name_hi":"आयरलैण्ड","name_hu":"Írország","name_id":"Republik Irlandia","name_it":"Irlanda","name_ja":"アイルランド","name_ko":"아일랜드","name_nl":"Ierland","name_pl":"Irlandia","name_pt":"República da Irlanda","name_ru":"Ирландия","name_sv":"Irland","name_tr":"İrlanda","name_uk":"Ірландія","name_ur":"جمہوریہ آئرلینڈ","name_vi":"Cộng hòa Ireland","name_zh":"爱尔兰","name_zht":"愛爾蘭","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"IRL.geojson"}},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-6.197885,53.867565],[-5.661949,54.554603],[-6.733847,55.17286],[-7.572168,55.131622],[-7.366031,54.595841],[-7.572168,54.059956],[-6.95373,54.073702],[-6.197885,53.867565]]],[[[-3.093831,53.404547],[-4.579999,53.495004],[-4.770013,52.840005],[-4.222347,52.301356],[-5.267296,51.9914],[-4.984367,51.593466],[-3.422719,51.426848],[-3.414851,51.426009],[-4.30999,51.210001],[-5.776567,50.159678],[-5.245023,49.96],[-4.542508,50.341837],[-3.617448,50.228356],[-2.956274,50.69688],[-2.489998,50.500019],[-0.787517,50.774989],[0.550334,50.765739],[1.449865,51.289428],[1.050562,51.806761],[1.559988,52.099998],[1.681531,52.73952],[0.469977,52.929999],[0.184981,53.325014],[-0.430485,54.464376],[-1.114991,54.624986],[-2.005676,55.804903],[-2.085009,55.909998],[-3.119003,55.973793],[-2.219988,56.870017],[-1.959281,57.6848],[-3.055002,57.690019],[-4.073828,57.553025],[-3.005005,58.635],[-4.211495,58.550845],[-5.009999,58.630013],[-5.786825,57.818848],[-6.149981,56.78501],[-5.644999,56.275015],[-5.586398,55.311146],[-5.047981,55.783986],[-4.719112,55.508473],[-5.082527,55.061601],[-4.844169,54.790971],[-3.630005,54.615013],[-3.614701,54.600937],[-2.945009,53.985],[-3.09208,53.404441],[-3.093831,53.404547]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"United Kingdom","sov_a3":"GB1","adm0_dif":1,"level":2,"type":"Country","tlc":"1","admin":"United Kingdom","adm0_a3":"GBR","geou_dif":0,"geounit":"United Kingdom","gu_a3":"GBR","su_dif":0,"subunit":"United Kingdom","su_a3":"GBR","brk_diff":0,"name":"United Kingdom","name_long":"United Kingdom","brk_a3":"GBR","brk_name":"United Kingdom","brk_group":null,"abbrev":"U.K.","postal":"GB","formal_en":"United Kingdom of Great Britain and Northern Ireland","formal_fr":null,"name_ciawf":"United Kingdom","note_adm0":null,"note_brk":null,"name_sort":"United Kingdom","name_alt":null,"mapcolor7":6,"mapcolor8":6,"mapcolor9":6,"mapcolor13":3,"pop_est":66834405,"pop_rank":16,"pop_year":2019,"gdp_md":2829108,"gdp_year":2019,"economy":"1. Developed region: G7","income_grp":"1. High income: OECD","fips_10":"UK","iso_a2":"GB","iso_a2_eh":"GB","iso_a3":"GBR","iso_a3_eh":"GBR","iso_n3":"826","iso_n3_eh":"826","un_a3":"826","wb_a2":"GB","wb_a3":"GBR","woe_id":-90,"woe_id_eh":23424975,"woe_note":"Eh ID includes Channel Islands and Isle of Man. UK constituent countries of England (24554868), Wales (12578049), Scotland (12578048), and Northern Ireland (20070563).","adm0_iso":"GBR","adm0_diff":null,"adm0_tlc":"GBR","adm0_a3_us":"GBR","adm0_a3_fr":"GBR","adm0_a3_ru":"GBR","adm0_a3_es":"GBR","adm0_a3_cn":"GBR","adm0_a3_tw":"GBR","adm0_a3_in":"GBR","adm0_a3_np":"GBR","adm0_a3_pk":"GBR","adm0_a3_de":"GBR","adm0_a3_gb":"GBR","adm0_a3_br":"GBR","adm0_a3_il":"GBR","adm0_a3_ps":"GBR","adm0_a3_sa":"GBR","adm0_a3_eg":"GBR","adm0_a3_ma":"GBR","adm0_a3_pt":"GBR","adm0_a3_ar":"GBR","adm0_a3_jp":"GBR","adm0_a3_ko":"GBR","adm0_a3_vn":"GBR","adm0_a3_tr":"GBR","adm0_a3_id":"GBR","adm0_a3_pl":"GBR","adm0_a3_gr":"GBR","adm0_a3_it":"GBR","adm0_a3_nl":"GBR","adm0_a3_se":"GBR","adm0_a3_bd":"GBR","adm0_a3_ua":"GBR","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":14,"long_len":14,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":1.7,"max_label":6.7,"label_x":-2.116346,"label_y":54.402739,"ne_id":1159320713,"wikidataid":"Q145","name_ar":"المملكة المتحدة","name_bn":"যুক্তরাজ্য","name_de":"Vereinigtes Königreich","name_en":"United Kingdom","name_es":"Reino Unido","name_fa":"بریتانیا","name_fr":"Royaume-Uni","name_el":"Ηνωμένο Βασίλειο","name_he":"הממלכה המאוחדת","name_hi":"यूनाइटेड किंगडम","name_hu":"Egyesült Királyság","name_id":"Britania Raya","name_it":"Regno Unito","name_ja":"イギリス","name_ko":"영국","name_nl":"Verenigd Koninkrijk","name_pl":"Wielka Brytania","name_pt":"Reino Unido","name_ru":"Великобритания","name_sv":"Storbritannien","name_tr":"Birleşik Krallık","name_uk":"Велика Британія","name_ur":"مملکت متحدہ","name_vi":"Vương quốc Liên hiệp Anh và Bắc Ireland","name_zh":"英国","name_zht":"英國","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"GBR.geojson"}},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[26.290003,35.29999],[25.745023,35.179998],[25.769208,35.354018],[25.025015,35.424996],[24.246665,35.368022],[23.69998,35.705004],[23.514978,35.279992],[24.735007,35.084991],[24.724982,34.919988],[26.164998,35.004995],[26.290003,35.29999]]],[[[22.952377,41.337994],[22.76177,41.3048],[22.597308,41.130487],[22.055378,41.149866],[21.674161,40.931275],[21.02004,40.842727],[20.99999,40.580004],[20.674997,40.435],[20.615,40.110007],[20.150016,39.624998],[20.217712,39.340235],[20.730032,38.769985],[21.120034,38.310323],[21.295011,37.644989],[21.670026,36.844986],[22.490028,36.41],[23.154225,36.422506],[22.774972,37.30501],[23.409972,37.409991],[23.115003,37.920011],[24.040011,37.655015],[24.025025,38.219993],[23.530016,38.510001],[22.973099,38.970903],[23.350027,39.190011],[22.849748,39.659311],[22.626299,40.256561],[22.813988,40.476005],[23.342999,39.960998],[23.899968,39.962006],[24.407999,40.124993],[23.714811,40.687129],[24.925848,40.947062],[25.447677,40.852545],[26.056942,40.824123],[26.294602,40.936261],[26.604196,41.562115],[26.117042,41.826905],[26.106138,41.328899],[25.197201,41.234486],[24.492645,41.583896],[23.692074,41.309081],[22.952377,41.337994]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Greece","sov_a3":"GRC","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Greece","adm0_a3":"GRC","geou_dif":0,"geounit":"Greece","gu_a3":"GRC","su_dif":0,"subunit":"Greece","su_a3":"GRC","brk_diff":0,"name":"Greece","name_long":"Greece","brk_a3":"GRC","brk_name":"Greece","brk_group":null,"abbrev":"Greece","postal":"GR","formal_en":"Hellenic Republic","formal_fr":null,"name_ciawf":"Greece","note_adm0":null,"note_brk":null,"name_sort":"Greece","name_alt":null,"mapcolor7":2,"mapcolor8":2,"mapcolor9":2,"mapcolor13":9,"pop_est":10716322,"pop_rank":14,"pop_year":2019,"gdp_md":209852,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"GR","iso_a2":"GR","iso_a2_eh":"GR","iso_a3":"GRC","iso_a3_eh":"GRC","iso_n3":"300","iso_n3_eh":"300","un_a3":"300","wb_a2":"GR","wb_a3":"GRC","woe_id":23424833,"woe_id_eh":23424833,"woe_note":"Exact WOE match as country","adm0_iso":"GRC","adm0_diff":null,"adm0_tlc":"GRC","adm0_a3_us":"GRC","adm0_a3_fr":"GRC","adm0_a3_ru":"GRC","adm0_a3_es":"GRC","adm0_a3_cn":"GRC","adm0_a3_tw":"GRC","adm0_a3_in":"GRC","adm0_a3_np":"GRC","adm0_a3_pk":"GRC","adm0_a3_de":"GRC","adm0_a3_gb":"GRC","adm0_a3_br":"GRC","adm0_a3_il":"GRC","adm0_a3_ps":"GRC","adm0_a3_sa":"GRC","adm0_a3_eg":"GRC","adm0_a3_ma":"GRC","adm0_a3_pt":"GRC","adm0_a3_ar":"GRC","adm0_a3_jp":"GRC","adm0_a3_ko":"GRC","adm0_a3_vn":"GRC","adm0_a3_tr":"GRC","adm0_a3_id":"GRC","adm0_a3_pl":"GRC","adm0_a3_gr":"GRC","adm0_a3_it":"GRC","adm0_a3_nl":"GRC","adm0_a3_se":"GRC","adm0_a3_bd":"GRC","adm0_a3_ua":"GRC","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":6,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2.7,"max_label":8,"label_x":21.72568,"label_y":39.492763,"ne_id":1159320811,"wikidataid":"Q41","name_ar":"اليونان","name_bn":"গ্রিস","name_de":"Griechenland","name_en":"Greece","name_es":"Grecia","name_fa":"یونان","name_fr":"Grèce","name_el":"Ελλάδα","name_he":"יוון","name_hi":"यूनान","name_hu":"Görögország","name_id":"Yunani","name_it":"Grecia","name_ja":"ギリシャ","name_ko":"그리스","name_nl":"Griekenland","name_pl":"Grecja","name_pt":"Grécia","name_ru":"Греция","name_sv":"Grekland","name_tr":"Yunanistan","name_uk":"Греція","name_ur":"یونان","name_vi":"Hy Lạp","name_zh":"希腊","name_zht":"希臘","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"GRC.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[16.979667,48.123497],[16.879983,48.470013],[16.960288,48.596982],[16.499283,48.785808],[16.029647,48.733899],[15.253416,49.039074],[14.901447,48.964402],[14.338898,48.555305],[13.595946,48.877172],[13.243357,48.416115],[12.884103,48.289146],[13.025851,47.637584],[12.932627,47.467646],[12.62076,47.672388],[12.141357,47.703083],[11.426414,47.523766],[10.544504,47.566399],[10.402084,47.302488],[9.896068,47.580197],[9.594226,47.525058],[9.632932,47.347601],[9.47997,47.10281],[9.932448,46.920728],[10.442701,46.893546],[11.048556,46.751359],[11.164828,46.941579],[12.153088,47.115393],[12.376485,46.767559],[13.806475,46.509306],[14.632472,46.431817],[15.137092,46.658703],[16.011664,46.683611],[16.202298,46.852386],[16.534268,47.496171],[16.340584,47.712902],[16.903754,47.714866],[16.979667,48.123497]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":4,"sovereignt":"Austria","sov_a3":"AUT","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Austria","adm0_a3":"AUT","geou_dif":0,"geounit":"Austria","gu_a3":"AUT","su_dif":0,"subunit":"Austria","su_a3":"AUT","brk_diff":0,"name":"Austria","name_long":"Austria","brk_a3":"AUT","brk_name":"Austria","brk_group":null,"abbrev":"Aust.","postal":"A","formal_en":"Republic of Austria","formal_fr":null,"name_ciawf":"Austria","note_adm0":null,"note_brk":null,"name_sort":"Austria","name_alt":null,"mapcolor7":3,"mapcolor8":1,"mapcolor9":3,"mapcolor13":4,"pop_est":8877067,"pop_rank":13,"pop_year":2019,"gdp_md":445075,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"AU","iso_a2":"AT","iso_a2_eh":"AT","iso_a3":"AUT","iso_a3_eh":"AUT","iso_n3":"040","iso_n3_eh":"040","un_a3":"040","wb_a2":"AT","wb_a3":"AUT","woe_id":23424750,"woe_id_eh":23424750,"woe_note":"Exact WOE match as country","adm0_iso":"AUT","adm0_diff":null,"adm0_tlc":"AUT","adm0_a3_us":"AUT","adm0_a3_fr":"AUT","adm0_a3_ru":"AUT","adm0_a3_es":"AUT","adm0_a3_cn":"AUT","adm0_a3_tw":"AUT","adm0_a3_in":"AUT","adm0_a3_np":"AUT","adm0_a3_pk":"AUT","adm0_a3_de":"AUT","adm0_a3_gb":"AUT","adm0_a3_br":"AUT","adm0_a3_il":"AUT","adm0_a3_ps":"AUT","adm0_a3_sa":"AUT","adm0_a3_eg":"AUT","adm0_a3_ma":"AUT","adm0_a3_pt":"AUT","adm0_a3_ar":"AUT","adm0_a3_jp":"AUT","adm0_a3_ko":"AUT","adm0_a3_vn":"AUT","adm0_a3_tr":"AUT","adm0_a3_id":"AUT","adm0_a3_pl":"AUT","adm0_a3_gr":"AUT","adm0_a3_it":"AUT","adm0_a3_nl":"AUT","adm0_a3_se":"AUT","adm0_a3_bd":"AUT","adm0_a3_ua":"AUT","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":14.130515,"label_y":47.518859,"ne_id":1159320379,"wikidataid":"Q40","name_ar":"النمسا","name_bn":"অস্ট্রিয়া","name_de":"Österreich","name_en":"Austria","name_es":"Austria","name_fa":"اتریش","name_fr":"Autriche","name_el":"Αυστρία","name_he":"אוסטריה","name_hi":"ऑस्ट्रिया","name_hu":"Ausztria","name_id":"Austria","name_it":"Austria","name_ja":"オーストリア","name_ko":"오스트리아","name_nl":"Oostenrijk","name_pl":"Austria","name_pt":"Áustria","name_ru":"Австрия","name_sv":"Österrike","name_tr":"Avusturya","name_uk":"Австрія","name_ur":"آسٹریا","name_vi":"Áo","name_zh":"奥地利","name_zht":"奧地利","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"AUT.geojson"}},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[10.442701,46.893546],[10.363378,46.483571],[9.922837,46.314899],[9.182882,46.440215],[8.966306,46.036932],[8.489952,46.005151],[8.31663,46.163642],[7.755992,45.82449],[7.273851,45.776948],[6.843593,45.991147],[6.802355,45.70858],[7.096652,45.333099],[6.749955,45.028518],[7.007562,44.254767],[7.549596,44.127901],[7.435185,43.693845],[7.850767,43.767148],[8.428561,44.231228],[8.888946,44.366336],[9.702488,44.036279],[10.200029,43.920007],[10.511948,42.931463],[11.191906,42.355425],[12.106683,41.704535],[12.888082,41.25309],[13.627985,41.188287],[14.060672,40.786348],[14.703268,40.60455],[14.998496,40.172949],[15.413613,40.048357],[15.718814,39.544072],[16.109332,38.964547],[15.891981,38.750942],[15.687963,38.214593],[15.684087,37.908849],[16.100961,37.985899],[16.635088,38.843572],[17.052841,38.902871],[17.17149,39.4247],[16.448743,39.795401],[16.869596,40.442235],[17.73838,40.277671],[18.293385,39.810774],[18.480247,40.168866],[18.376687,40.355625],[17.519169,40.877143],[16.785002,41.179606],[15.889346,41.541082],[16.169897,41.740295],[15.926191,41.961315],[15.14257,41.95514],[14.029821,42.761008],[13.526906,43.587727],[12.589237,44.091366],[12.261453,44.600482],[12.383875,44.885374],[12.328581,45.381778],[13.141606,45.736692],[13.93763,45.591016],[13.69811,46.016778],[13.806475,46.509306],[12.376485,46.767559],[12.153088,47.115393],[11.164828,46.941579],[11.048556,46.751359],[10.442701,46.893546]]],[[[14.761249,38.143874],[13.741156,38.034966],[12.570944,38.126381],[12.431004,37.61295],[13.826733,37.104531],[14.335229,36.996631],[15.099988,36.619987],[15.309898,37.134219],[15.160243,37.444046],[15.520376,38.231155],[14.761249,38.143874]]],[[[8.709991,40.899984],[8.159998,40.950007],[8.388253,40.378311],[8.428302,39.171847],[8.806936,38.906618],[9.214818,39.240473],[9.669519,39.177376],[9.809975,40.500009],[9.210012,41.209991],[8.709991,40.899984]]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"Italy","sov_a3":"ITA","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Italy","adm0_a3":"ITA","geou_dif":0,"geounit":"Italy","gu_a3":"ITA","su_dif":0,"subunit":"Italy","su_a3":"ITA","brk_diff":0,"name":"Italy","name_long":"Italy","brk_a3":"ITA","brk_name":"Italy","brk_group":null,"abbrev":"Italy","postal":"I","formal_en":"Italian Republic","formal_fr":null,"name_ciawf":"Italy","note_adm0":null,"note_brk":null,"name_sort":"Italy","name_alt":null,"mapcolor7":6,"mapcolor8":7,"mapcolor9":8,"mapcolor13":7,"pop_est":60297396,"pop_rank":16,"pop_year":2019,"gdp_md":2003576,"gdp_year":2019,"economy":"1. Developed region: G7","income_grp":"1. High income: OECD","fips_10":"IT","iso_a2":"IT","iso_a2_eh":"IT","iso_a3":"ITA","iso_a3_eh":"ITA","iso_n3":"380","iso_n3_eh":"380","un_a3":"380","wb_a2":"IT","wb_a3":"ITA","woe_id":23424853,"woe_id_eh":23424853,"woe_note":"Exact WOE match as country","adm0_iso":"ITA","adm0_diff":null,"adm0_tlc":"ITA","adm0_a3_us":"ITA","adm0_a3_fr":"ITA","adm0_a3_ru":"ITA","adm0_a3_es":"ITA","adm0_a3_cn":"ITA","adm0_a3_tw":"ITA","adm0_a3_in":"ITA","adm0_a3_np":"ITA","adm0_a3_pk":"ITA","adm0_a3_de":"ITA","adm0_a3_gb":"ITA","adm0_a3_br":"ITA","adm0_a3_il":"ITA","adm0_a3_ps":"ITA","adm0_a3_sa":"ITA","adm0_a3_eg":"ITA","adm0_a3_ma":"ITA","adm0_a3_pt":"ITA","adm0_a3_ar":"ITA","adm0_a3_jp":"ITA","adm0_a3_ko":"ITA","adm0_a3_vn":"ITA","adm0_a3_tr":"ITA","adm0_a3_id":"ITA","adm0_a3_pl":"ITA","adm0_a3_gr":"ITA","adm0_a3_it":"ITA","adm0_a3_nl":"ITA","adm0_a3_se":"ITA","adm0_a3_bd":"ITA","adm0_a3_ua":"ITA","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":5,"long_len":5,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2,"max_label":7,"label_x":11.076907,"label_y":44.732482,"ne_id":1159320919,"wikidataid":"Q38","name_ar":"إيطاليا","name_bn":"ইতালি","name_de":"Italien","name_en":"Italy","name_es":"Italia","name_fa":"ایتالیا","name_fr":"Italie","name_el":"Ιταλία","name_he":"איטליה","name_hi":"इटली","name_hu":"Olaszország","name_id":"Italia","name_it":"Italia","name_ja":"イタリア","name_ko":"이탈리아","name_nl":"Italië","name_pl":"Włochy","name_pt":"Itália","name_ru":"Италия","name_sv":"Italien","name_tr":"İtalya","name_uk":"Італія","name_ur":"اطالیہ","name_vi":"Ý","name_zh":"意大利","name_zht":"義大利","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"ITA.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[9.594226,47.525058],[8.522612,47.830828],[8.317301,47.61358],[7.466759,47.620582],[7.192202,47.449766],[6.736571,47.541801],[6.768714,47.287708],[6.037389,46.725779],[6.022609,46.27299],[6.5001,46.429673],[6.843593,45.991147],[7.273851,45.776948],[7.755992,45.82449],[8.31663,46.163642],[8.489952,46.005151],[8.966306,46.036932],[9.182882,46.440215],[9.922837,46.314899],[10.363378,46.483571],[10.442701,46.893546],[9.932448,46.920728],[9.47997,47.10281],[9.632932,47.347601],[9.594226,47.525058]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":4,"sovereignt":"Switzerland","sov_a3":"CHE","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Switzerland","adm0_a3":"CHE","geou_dif":0,"geounit":"Switzerland","gu_a3":"CHE","su_dif":0,"subunit":"Switzerland","su_a3":"CHE","brk_diff":0,"name":"Switzerland","name_long":"Switzerland","brk_a3":"CHE","brk_name":"Switzerland","brk_group":null,"abbrev":"Switz.","postal":"CH","formal_en":"Swiss Confederation","formal_fr":null,"name_ciawf":"Switzerland","note_adm0":null,"note_brk":null,"name_sort":"Switzerland","name_alt":null,"mapcolor7":5,"mapcolor8":2,"mapcolor9":7,"mapcolor13":3,"pop_est":8574832,"pop_rank":13,"pop_year":2019,"gdp_md":703082,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"SZ","iso_a2":"CH","iso_a2_eh":"CH","iso_a3":"CHE","iso_a3_eh":"CHE","iso_n3":"756","iso_n3_eh":"756","un_a3":"756","wb_a2":"CH","wb_a3":"CHE","woe_id":23424957,"woe_id_eh":23424957,"woe_note":"Exact WOE match as country","adm0_iso":"CHE","adm0_diff":null,"adm0_tlc":"CHE","adm0_a3_us":"CHE","adm0_a3_fr":"CHE","adm0_a3_ru":"CHE","adm0_a3_es":"CHE","adm0_a3_cn":"CHE","adm0_a3_tw":"CHE","adm0_a3_in":"CHE","adm0_a3_np":"CHE","adm0_a3_pk":"CHE","adm0_a3_de":"CHE","adm0_a3_gb":"CHE","adm0_a3_br":"CHE","adm0_a3_il":"CHE","adm0_a3_ps":"CHE","adm0_a3_sa":"CHE","adm0_a3_eg":"CHE","adm0_a3_ma":"CHE","adm0_a3_pt":"CHE","adm0_a3_ar":"CHE","adm0_a3_jp":"CHE","adm0_a3_ko":"CHE","adm0_a3_vn":"CHE","adm0_a3_tr":"CHE","adm0_a3_id":"CHE","adm0_a3_pl":"CHE","adm0_a3_gr":"CHE","adm0_a3_it":"CHE","adm0_a3_nl":"CHE","adm0_a3_se":"CHE","adm0_a3_bd":"CHE","adm0_a3_ua":"CHE","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":11,"long_len":11,"abbrev_len":6,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":7.463965,"label_y":46.719114,"ne_id":1159320491,"wikidataid":"Q39","name_ar":"سويسرا","name_bn":"সুইজারল্যান্ড","name_de":"Schweiz","name_en":"Switzerland","name_es":"Suiza","name_fa":"سوئیس","name_fr":"Suisse","name_el":"Ελβετία","name_he":"שווייץ","name_hi":"स्विट्ज़रलैण्ड","name_hu":"Svájc","name_id":"Swiss","name_it":"Svizzera","name_ja":"スイス","name_ko":"스위스","name_nl":"Zwitserland","name_pl":"Szwajcaria","name_pt":"Suíça","name_ru":"Швейцария","name_sv":"Schweiz","name_tr":"İsviçre","name_uk":"Швейцарія","name_ur":"سویٹزرلینڈ","name_vi":"Thụy Sĩ","name_zh":"瑞士","name_zht":"瑞士","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"CHE.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[6.90514,53.482162],[6.074183,53.510403],[4.705997,53.091798],[3.830289,51.620545],[3.315011,51.345777],[3.314971,51.345755],[4.047071,51.267259],[4.973991,51.475024],[5.606976,51.037298],[6.156658,50.803721],[5.988658,51.851616],[6.589397,51.852029],[6.84287,52.22844],[7.092053,53.144043],[6.90514,53.482162]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Netherlands","sov_a3":"NL1","adm0_dif":1,"level":2,"type":"Country","tlc":"1","admin":"Netherlands","adm0_a3":"NLD","geou_dif":0,"geounit":"Netherlands","gu_a3":"NLD","su_dif":0,"subunit":"Netherlands","su_a3":"NLD","brk_diff":0,"name":"Netherlands","name_long":"Netherlands","brk_a3":"NLD","brk_name":"Netherlands","brk_group":null,"abbrev":"Neth.","postal":"NL","formal_en":"Kingdom of the Netherlands","formal_fr":null,"name_ciawf":"Netherlands","note_adm0":null,"note_brk":null,"name_sort":"Netherlands","name_alt":null,"mapcolor7":4,"mapcolor8":2,"mapcolor9":2,"mapcolor13":9,"pop_est":17332850,"pop_rank":14,"pop_year":2019,"gdp_md":907050,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"NL","iso_a2":"NL","iso_a2_eh":"NL","iso_a3":"NLD","iso_a3_eh":"NLD","iso_n3":"528","iso_n3_eh":"528","un_a3":"528","wb_a2":"NL","wb_a3":"NLD","woe_id":-90,"woe_id_eh":23424909,"woe_note":"Doesn't include new former units of Netherlands Antilles (24549811, 24549808, and 24549809)","adm0_iso":"NLD","adm0_diff":null,"adm0_tlc":"NLD","adm0_a3_us":"NLD","adm0_a3_fr":"NLD","adm0_a3_ru":"NLD","adm0_a3_es":"NLD","adm0_a3_cn":"NLD","adm0_a3_tw":"NLD","adm0_a3_in":"NLD","adm0_a3_np":"NLD","adm0_a3_pk":"NLD","adm0_a3_de":"NLD","adm0_a3_gb":"NLD","adm0_a3_br":"NLD","adm0_a3_il":"NLD","adm0_a3_ps":"NLD","adm0_a3_sa":"NLD","adm0_a3_eg":"NLD","adm0_a3_ma":"NLD","adm0_a3_pt":"NLD","adm0_a3_ar":"NLD","adm0_a3_jp":"NLD","adm0_a3_ko":"NLD","adm0_a3_vn":"NLD","adm0_a3_tr":"NLD","adm0_a3_id":"NLD","adm0_a3_pl":"NLD","adm0_a3_gr":"NLD","adm0_a3_it":"NLD","adm0_a3_nl":"NLD","adm0_a3_se":"NLD","adm0_a3_bd":"NLD","adm0_a3_ua":"NLD","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Western Europe","region_wb":"Europe & Central Asia","name_len":11,"long_len":11,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":10,"label_x":5.61144,"label_y":52.422211,"ne_id":1159321101,"wikidataid":"Q55","name_ar":"هولندا","name_bn":"নেদারল্যান্ডস","name_de":"Niederlande","name_en":"Netherlands","name_es":"Países Bajos","name_fa":"هلند","name_fr":"Pays-Bas","name_el":"Ολλανδία","name_he":"הולנד","name_hi":"नीदरलैण्ड","name_hu":"Hollandia","name_id":"Belanda","name_it":"Paesi Bassi","name_ja":"オランダ","name_ko":"네덜란드","name_nl":"Nederland","name_pl":"Holandia","name_pt":"Países Baixos","name_ru":"Нидерланды","name_sv":"Nederländerna","name_tr":"Hollanda","name_uk":"Нідерланди","name_ur":"نیدرلینڈز","name_vi":"Hà Lan","name_zh":"荷兰","name_zht":"荷蘭","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"NLD.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[18.829825,45.908872],[19.072769,45.521511],[19.390476,45.236516],[19.005485,44.860234],[19.00548,44.86023],[19.36803,44.863],[19.11761,44.42307],[19.59976,44.03847],[19.454,43.5681],[19.21852,43.52384],[19.48389,43.35229],[19.63,43.21378],[19.95857,43.10604],[20.3398,42.89852],[20.25758,42.81275],[20.49679,42.88469],[20.63508,43.21671],[20.81448,43.27205],[20.95651,43.13094],[21.143395,43.068685],[21.27421,42.90959],[21.43866,42.86255],[21.63302,42.67717],[21.77505,42.6827],[21.66292,42.43922],[21.54332,42.32025],[21.576636,42.245224],[21.91708,42.30364],[22.380526,42.32026],[22.545012,42.461362],[22.436595,42.580321],[22.604801,42.898519],[22.986019,43.211161],[22.500157,43.642814],[22.410446,44.008063],[22.65715,44.234923],[22.474008,44.409228],[22.705726,44.578003],[22.459022,44.702517],[22.145088,44.478422],[21.562023,44.768947],[21.483526,45.18117],[20.874313,45.416375],[20.762175,45.734573],[20.220192,46.127469],[19.596045,46.17173],[18.829838,45.908878],[18.829825,45.908872]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":5,"sovereignt":"Republic of Serbia","sov_a3":"SRB","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Republic of Serbia","adm0_a3":"SRB","geou_dif":0,"geounit":"Republic of Serbia","gu_a3":"SRB","su_dif":0,"subunit":"Republic of Serbia","su_a3":"SRB","brk_diff":0,"name":"Serbia","name_long":"Serbia","brk_a3":"SRB","brk_name":"Serbia","brk_group":null,"abbrev":"Serb.","postal":"RS","formal_en":"Republic of Serbia","formal_fr":null,"name_ciawf":"Serbia","note_adm0":null,"note_brk":null,"name_sort":"Serbia","name_alt":null,"mapcolor7":3,"mapcolor8":3,"mapcolor9":2,"mapcolor13":10,"pop_est":6944975,"pop_rank":13,"pop_year":2019,"gdp_md":51475,"gdp_year":2019,"economy":"6. Developing region","income_grp":"3. Upper middle income","fips_10":"RI","iso_a2":"RS","iso_a2_eh":"RS","iso_a3":"SRB","iso_a3_eh":"SRB","iso_n3":"688","iso_n3_eh":"688","un_a3":"688","wb_a2":"YF","wb_a3":"SRB","woe_id":-90,"woe_id_eh":20069818,"woe_note":"Expired WOE also contains Kosovo.","adm0_iso":"SRB","adm0_diff":null,"adm0_tlc":"SRB","adm0_a3_us":"SRB","adm0_a3_fr":"SRB","adm0_a3_ru":"SRB","adm0_a3_es":"SRB","adm0_a3_cn":"SRB","adm0_a3_tw":"SRB","adm0_a3_in":"SRB","adm0_a3_np":"SRB","adm0_a3_pk":"SRB","adm0_a3_de":"SRB","adm0_a3_gb":"SRB","adm0_a3_br":"SRB","adm0_a3_il":"SRB","adm0_a3_ps":"SRB","adm0_a3_sa":"SRB","adm0_a3_eg":"SRB","adm0_a3_ma":"SRB","adm0_a3_pt":"SRB","adm0_a3_ar":"SRB","adm0_a3_jp":"SRB","adm0_a3_ko":"SRB","adm0_a3_vn":"SRB","adm0_a3_tr":"SRB","adm0_a3_id":"SRB","adm0_a3_pl":"SRB","adm0_a3_gr":"SRB","adm0_a3_it":"SRB","adm0_a3_nl":"SRB","adm0_a3_se":"SRB","adm0_a3_bd":"SRB","adm0_a3_ua":"SRB","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":6,"long_len":6,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":7,"label_x":20.787989,"label_y":44.189919,"ne_id":1159321267,"wikidataid":"Q403","name_ar":"صربيا","name_bn":"সার্বিয়া","name_de":"Serbien","name_en":"Serbia","name_es":"Serbia","name_fa":"صربستان","name_fr":"Serbie","name_el":"Σερβία","name_he":"סרביה","name_hi":"सर्बिया","name_hu":"Szerbia","name_id":"Serbia","name_it":"Serbia","name_ja":"セルビア","name_ko":"세르비아","name_nl":"Servië","name_pl":"Serbia","name_pt":"Sérvia","name_ru":"Сербия","name_sv":"Serbien","name_tr":"Sırbistan","name_uk":"Сербія","name_ur":"سربیا","name_vi":"Serbia","name_zh":"塞尔维亚","name_zht":"塞爾維亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"SRB.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[16.564808,46.503751],[15.768733,46.238108],[15.67153,45.834154],[15.323954,45.731783],[15.327675,45.452316],[14.935244,45.471695],[14.595109,45.634941],[14.411968,45.466166],[13.71506,45.500324],[13.679403,45.484149],[13.656976,45.136935],[13.952255,44.802124],[14.258748,45.233777],[14.901602,45.07606],[14.920309,44.738484],[15.37625,44.317915],[15.174454,44.243191],[16.015385,43.507215],[16.930006,43.209998],[17.50997,42.849995],[18.450016,42.479991],[18.450017,42.479992],[18.56,42.65],[17.674922,43.028563],[17.297373,43.446341],[16.916156,43.667722],[16.456443,44.04124],[16.23966,44.351143],[15.750026,44.818712],[15.959367,45.233777],[16.318157,45.004127],[16.534939,45.211608],[17.002146,45.233777],[17.861783,45.06774],[18.553214,45.08159],[19.005485,44.860234],[19.390476,45.236516],[19.072769,45.521511],[18.829825,45.908872],[18.456062,45.759481],[17.630066,45.951769],[16.882515,46.380632],[16.564808,46.503751]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Croatia","sov_a3":"HRV","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Croatia","adm0_a3":"HRV","geou_dif":0,"geounit":"Croatia","gu_a3":"HRV","su_dif":0,"subunit":"Croatia","su_a3":"HRV","brk_diff":0,"name":"Croatia","name_long":"Croatia","brk_a3":"HRV","brk_name":"Croatia","brk_group":null,"abbrev":"Cro.","postal":"HR","formal_en":"Republic of Croatia","formal_fr":null,"name_ciawf":"Croatia","note_adm0":null,"note_brk":null,"name_sort":"Croatia","name_alt":null,"mapcolor7":5,"mapcolor8":4,"mapcolor9":5,"mapcolor13":1,"pop_est":4067500,"pop_rank":12,"pop_year":2019,"gdp_md":60752,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"2. High income: nonOECD","fips_10":"HR","iso_a2":"HR","iso_a2_eh":"HR","iso_a3":"HRV","iso_a3_eh":"HRV","iso_n3":"191","iso_n3_eh":"191","un_a3":"191","wb_a2":"HR","wb_a3":"HRV","woe_id":23424843,"woe_id_eh":23424843,"woe_note":"Exact WOE match as country","adm0_iso":"HRV","adm0_diff":null,"adm0_tlc":"HRV","adm0_a3_us":"HRV","adm0_a3_fr":"HRV","adm0_a3_ru":"HRV","adm0_a3_es":"HRV","adm0_a3_cn":"HRV","adm0_a3_tw":"HRV","adm0_a3_in":"HRV","adm0_a3_np":"HRV","adm0_a3_pk":"HRV","adm0_a3_de":"HRV","adm0_a3_gb":"HRV","adm0_a3_br":"HRV","adm0_a3_il":"HRV","adm0_a3_ps":"HRV","adm0_a3_sa":"HRV","adm0_a3_eg":"HRV","adm0_a3_ma":"HRV","adm0_a3_pt":"HRV","adm0_a3_ar":"HRV","adm0_a3_jp":"HRV","adm0_a3_ko":"HRV","adm0_a3_vn":"HRV","adm0_a3_tr":"HRV","adm0_a3_id":"HRV","adm0_a3_pl":"HRV","adm0_a3_gr":"HRV","adm0_a3_it":"HRV","adm0_a3_nl":"HRV","adm0_a3_se":"HRV","adm0_a3_bd":"HRV","adm0_a3_ua":"HRV","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":16.37241,"label_y":45.805799,"ne_id":1159320833,"wikidataid":"Q224","name_ar":"كرواتيا","name_bn":"ক্রোয়েশিয়া","name_de":"Kroatien","name_en":"Croatia","name_es":"Croacia","name_fa":"کرواسی","name_fr":"Croatie","name_el":"Κροατία","name_he":"קרואטיה","name_hi":"क्रोएशिया","name_hu":"Horvátország","name_id":"Kroasia","name_it":"Croazia","name_ja":"クロアチア","name_ko":"크로아티아","name_nl":"Kroatië","name_pl":"Chorwacja","name_pt":"Croácia","name_ru":"Хорватия","name_sv":"Kroatien","name_tr":"Hırvatistan","name_uk":"Хорватія","name_ur":"کروشیا","name_vi":"Croatia","name_zh":"克罗地亚","name_zht":"克羅地亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"HRV.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[13.806475,46.509306],[13.69811,46.016778],[13.93763,45.591016],[13.71506,45.500324],[14.411968,45.466166],[14.595109,45.634941],[14.935244,45.471695],[15.327675,45.452316],[15.323954,45.731783],[15.67153,45.834154],[15.768733,46.238108],[16.564808,46.503751],[16.370505,46.841327],[16.202298,46.852386],[16.011664,46.683611],[15.137092,46.658703],[14.632472,46.431817],[13.806475,46.509306]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Slovenia","sov_a3":"SVN","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Slovenia","adm0_a3":"SVN","geou_dif":0,"geounit":"Slovenia","gu_a3":"SVN","su_dif":0,"subunit":"Slovenia","su_a3":"SVN","brk_diff":0,"name":"Slovenia","name_long":"Slovenia","brk_a3":"SVN","brk_name":"Slovenia","brk_group":null,"abbrev":"Slo.","postal":"SLO","formal_en":"Republic of Slovenia","formal_fr":null,"name_ciawf":"Slovenia","note_adm0":null,"note_brk":null,"name_sort":"Slovenia","name_alt":null,"mapcolor7":2,"mapcolor8":3,"mapcolor9":2,"mapcolor13":12,"pop_est":2087946,"pop_rank":12,"pop_year":2019,"gdp_md":54174,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"SI","iso_a2":"SI","iso_a2_eh":"SI","iso_a3":"SVN","iso_a3_eh":"SVN","iso_n3":"705","iso_n3_eh":"705","un_a3":"705","wb_a2":"SI","wb_a3":"SVN","woe_id":23424945,"woe_id_eh":23424945,"woe_note":"Exact WOE match as country","adm0_iso":"SVN","adm0_diff":null,"adm0_tlc":"SVN","adm0_a3_us":"SVN","adm0_a3_fr":"SVN","adm0_a3_ru":"SVN","adm0_a3_es":"SVN","adm0_a3_cn":"SVN","adm0_a3_tw":"SVN","adm0_a3_in":"SVN","adm0_a3_np":"SVN","adm0_a3_pk":"SVN","adm0_a3_de":"SVN","adm0_a3_gb":"SVN","adm0_a3_br":"SVN","adm0_a3_il":"SVN","adm0_a3_ps":"SVN","adm0_a3_sa":"SVN","adm0_a3_eg":"SVN","adm0_a3_ma":"SVN","adm0_a3_pt":"SVN","adm0_a3_ar":"SVN","adm0_a3_jp":"SVN","adm0_a3_ko":"SVN","adm0_a3_vn":"SVN","adm0_a3_tr":"SVN","adm0_a3_id":"SVN","adm0_a3_pl":"SVN","adm0_a3_gr":"SVN","adm0_a3_it":"SVN","adm0_a3_nl":"SVN","adm0_a3_se":"SVN","adm0_a3_bd":"SVN","adm0_a3_ua":"SVN","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":8,"long_len":8,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":5,"max_label":10,"label_x":14.915312,"label_y":46.06076,"ne_id":1159321285,"wikidataid":"Q215","name_ar":"سلوفينيا","name_bn":"স্লোভেনিয়া","name_de":"Slowenien","name_en":"Slovenia","name_es":"Eslovenia","name_fa":"اسلوونی","name_fr":"Slovénie","name_el":"Σλοβενία","name_he":"סלובניה","name_hi":"स्लोवेनिया","name_hu":"Szlovénia","name_id":"Slovenia","name_it":"Slovenia","name_ja":"スロベニア","name_ko":"슬로베니아","name_nl":"Slovenië","name_pl":"Słowenia","name_pt":"Eslovénia","name_ru":"Словения","name_sv":"Slovenien","name_tr":"Slovenya","name_uk":"Словенія","name_ur":"سلووینیا","name_vi":"Slovenia","name_zh":"斯洛文尼亚","name_zht":"斯洛維尼亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"SVN.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[22.65715,44.234923],[22.410446,44.008063],[22.500157,43.642814],[22.986019,43.211161],[22.604801,42.898519],[22.436595,42.580321],[22.545012,42.461362],[22.380526,42.32026],[22.881374,41.999297],[22.952377,41.337994],[23.692074,41.309081],[24.492645,41.583896],[25.197201,41.234486],[26.106138,41.328899],[26.117042,41.826905],[27.135739,42.141485],[27.99672,42.007359],[27.673898,42.577892],[28.039095,43.293172],[28.558081,43.707462],[27.970107,43.812468],[27.2424,44.175986],[26.065159,43.943494],[25.569272,43.688445],[24.100679,43.741051],[23.332302,43.897011],[22.944832,43.823785],[22.65715,44.234923]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":4,"sovereignt":"Bulgaria","sov_a3":"BGR","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Bulgaria","adm0_a3":"BGR","geou_dif":0,"geounit":"Bulgaria","gu_a3":"BGR","su_dif":0,"subunit":"Bulgaria","su_a3":"BGR","brk_diff":0,"name":"Bulgaria","name_long":"Bulgaria","brk_a3":"BGR","brk_name":"Bulgaria","brk_group":null,"abbrev":"Bulg.","postal":"BG","formal_en":"Republic of Bulgaria","formal_fr":null,"name_ciawf":"Bulgaria","note_adm0":null,"note_brk":null,"name_sort":"Bulgaria","name_alt":null,"mapcolor7":4,"mapcolor8":5,"mapcolor9":1,"mapcolor13":8,"pop_est":6975761,"pop_rank":13,"pop_year":2019,"gdp_md":68558,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"3. Upper middle income","fips_10":"BU","iso_a2":"BG","iso_a2_eh":"BG","iso_a3":"BGR","iso_a3_eh":"BGR","iso_n3":"100","iso_n3_eh":"100","un_a3":"100","wb_a2":"BG","wb_a3":"BGR","woe_id":23424771,"woe_id_eh":23424771,"woe_note":"Exact WOE match as country","adm0_iso":"BGR","adm0_diff":null,"adm0_tlc":"BGR","adm0_a3_us":"BGR","adm0_a3_fr":"BGR","adm0_a3_ru":"BGR","adm0_a3_es":"BGR","adm0_a3_cn":"BGR","adm0_a3_tw":"BGR","adm0_a3_in":"BGR","adm0_a3_np":"BGR","adm0_a3_pk":"BGR","adm0_a3_de":"BGR","adm0_a3_gb":"BGR","adm0_a3_br":"BGR","adm0_a3_il":"BGR","adm0_a3_ps":"BGR","adm0_a3_sa":"BGR","adm0_a3_eg":"BGR","adm0_a3_ma":"BGR","adm0_a3_pt":"BGR","adm0_a3_ar":"BGR","adm0_a3_jp":"BGR","adm0_a3_ko":"BGR","adm0_a3_vn":"BGR","adm0_a3_tr":"BGR","adm0_a3_id":"BGR","adm0_a3_pl":"BGR","adm0_a3_gr":"BGR","adm0_a3_it":"BGR","adm0_a3_nl":"BGR","adm0_a3_se":"BGR","adm0_a3_bd":"BGR","adm0_a3_ua":"BGR","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":8,"long_len":8,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":4,"max_label":9,"label_x":25.15709,"label_y":42.508785,"ne_id":1159320409,"wikidataid":"Q219","name_ar":"بلغاريا","name_bn":"বুলগেরিয়া","name_de":"Bulgarien","name_en":"Bulgaria","name_es":"Bulgaria","name_fa":"بلغارستان","name_fr":"Bulgarie","name_el":"Βουλγαρία","name_he":"בולגריה","name_hi":"बुल्गारिया","name_hu":"Bulgária","name_id":"Bulgaria","name_it":"Bulgaria","name_ja":"ブルガリア","name_ko":"불가리아","name_nl":"Bulgarije","name_pl":"Bułgaria","name_pt":"Bulgária","name_ru":"Болгария","name_sv":"Bulgarien","name_tr":"Bulgaristan","name_uk":"Болгарія","name_ur":"بلغاریہ","name_vi":"Bulgaria","name_zh":"保加利亚","name_zht":"保加利亞","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"BGR.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[20.0707,42.58863],[20.25758,42.81275],[20.3398,42.89852],[19.95857,43.10604],[19.63,43.21378],[19.48389,43.35229],[19.21852,43.52384],[19.03165,43.43253],[18.70648,43.20011],[18.56,42.65],[18.450017,42.479992],[18.88214,42.28151],[19.16246,41.95502],[19.371768,41.877551],[19.304486,42.195745],[19.738051,42.688247],[19.801613,42.500093],[20.0707,42.58863]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Montenegro","sov_a3":"MNE","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Montenegro","adm0_a3":"MNE","geou_dif":0,"geounit":"Montenegro","gu_a3":"MNE","su_dif":0,"subunit":"Montenegro","su_a3":"MNE","brk_diff":0,"name":"Montenegro","name_long":"Montenegro","brk_a3":"MNE","brk_name":"Montenegro","brk_group":null,"abbrev":"Mont.","postal":"ME","formal_en":"Montenegro","formal_fr":null,"name_ciawf":"Montenegro","note_adm0":null,"note_brk":null,"name_sort":"Montenegro","name_alt":null,"mapcolor7":4,"mapcolor8":1,"mapcolor9":4,"mapcolor13":5,"pop_est":622137,"pop_rank":11,"pop_year":2019,"gdp_md":5542,"gdp_year":2019,"economy":"6. Developing region","income_grp":"3. Upper middle income","fips_10":"MJ","iso_a2":"ME","iso_a2_eh":"ME","iso_a3":"MNE","iso_a3_eh":"MNE","iso_n3":"499","iso_n3_eh":"499","un_a3":"499","wb_a2":"ME","wb_a3":"MNE","woe_id":20069817,"woe_id_eh":20069817,"woe_note":"Exact WOE match as country","adm0_iso":"MNE","adm0_diff":null,"adm0_tlc":"MNE","adm0_a3_us":"MNE","adm0_a3_fr":"MNE","adm0_a3_ru":"MNE","adm0_a3_es":"MNE","adm0_a3_cn":"MNE","adm0_a3_tw":"MNE","adm0_a3_in":"MNE","adm0_a3_np":"MNE","adm0_a3_pk":"MNE","adm0_a3_de":"MNE","adm0_a3_gb":"MNE","adm0_a3_br":"MNE","adm0_a3_il":"MNE","adm0_a3_ps":"MNE","adm0_a3_sa":"MNE","adm0_a3_eg":"MNE","adm0_a3_ma":"MNE","adm0_a3_pt":"MNE","adm0_a3_ar":"MNE","adm0_a3_jp":"MNE","adm0_a3_ko":"MNE","adm0_a3_vn":"MNE","adm0_a3_tr":"MNE","adm0_a3_id":"MNE","adm0_a3_pl":"MNE","adm0_a3_gr":"MNE","adm0_a3_it":"MNE","adm0_a3_nl":"MNE","adm0_a3_se":"MNE","adm0_a3_bd":"MNE","adm0_a3_ua":"MNE","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":10,"long_len":10,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":5,"max_label":10,"label_x":19.143727,"label_y":42.803101,"ne_id":1159321069,"wikidataid":"Q236","name_ar":"الجبل الأسود","name_bn":"মন্টিনিগ্রো","name_de":"Montenegro","name_en":"Montenegro","name_es":"Montenegro","name_fa":"مونتهنگرو","name_fr":"Monténégro","name_el":"Μαυροβούνιο","name_he":"מונטנגרו","name_hi":"मॉन्टेनीग्रो","name_hu":"Montenegró","name_id":"Montenegro","name_it":"Montenegro","name_ja":"モンテネグロ","name_ko":"몬테네그로","name_nl":"Montenegro","name_pl":"Czarnogóra","name_pt":"Montenegro","name_ru":"Черногория","name_sv":"Montenegro","name_tr":"Karadağ","name_uk":"Чорногорія","name_ur":"مونٹینیگرو","name_vi":"Montenegro","name_zh":"黑山","name_zht":"蒙特內哥羅","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"MNE.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-9.034818,41.880571],[-8.990789,41.543459],[-8.790853,41.184334],[-8.768684,40.760639],[-8.977353,40.159306],[-9.048305,39.755093],[-9.446989,39.392066],[-9.526571,38.737429],[-9.287464,38.358486],[-8.839998,38.266243],[-8.746101,37.651346],[-8.898857,36.868809],[-8.382816,36.97888],[-7.855613,36.838269],[-7.453726,37.097788],[-7.537105,37.428904],[-7.166508,37.803894],[-7.029281,38.075764],[-7.374092,38.373059],[-7.098037,39.030073],[-7.498632,39.629571],[-7.066592,39.711892],[-7.026413,40.184524],[-6.86402,40.330872],[-6.851127,41.111083],[-6.389088,41.381815],[-6.668606,41.883387],[-7.251309,41.918346],[-7.422513,41.792075],[-8.013175,41.790886],[-8.263857,42.280469],[-8.671946,42.134689],[-9.034818,41.880571]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":2,"sovereignt":"Portugal","sov_a3":"PRT","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Portugal","adm0_a3":"PRT","geou_dif":0,"geounit":"Portugal","gu_a3":"PRT","su_dif":1,"subunit":"Portugal","su_a3":"PR1","brk_diff":0,"name":"Portugal","name_long":"Portugal","brk_a3":"PR1","brk_name":"Portugal","brk_group":null,"abbrev":"Port.","postal":"P","formal_en":"Portuguese Republic","formal_fr":null,"name_ciawf":"Portugal","note_adm0":null,"note_brk":null,"name_sort":"Portugal","name_alt":null,"mapcolor7":1,"mapcolor8":7,"mapcolor9":1,"mapcolor13":4,"pop_est":10269417,"pop_rank":14,"pop_year":2019,"gdp_md":238785,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"PO","iso_a2":"PT","iso_a2_eh":"PT","iso_a3":"PRT","iso_a3_eh":"PRT","iso_n3":"620","iso_n3_eh":"620","un_a3":"620","wb_a2":"PT","wb_a3":"PRT","woe_id":23424925,"woe_id_eh":23424925,"woe_note":"Exact WOE match as country","adm0_iso":"PR1","adm0_diff":null,"adm0_tlc":"PR1","adm0_a3_us":"PRT","adm0_a3_fr":"PRT","adm0_a3_ru":"PRT","adm0_a3_es":"PRT","adm0_a3_cn":"PRT","adm0_a3_tw":"PRT","adm0_a3_in":"PRT","adm0_a3_np":"PRT","adm0_a3_pk":"PRT","adm0_a3_de":"PRT","adm0_a3_gb":"PRT","adm0_a3_br":"PRT","adm0_a3_il":"PRT","adm0_a3_ps":"PRT","adm0_a3_sa":"PRT","adm0_a3_eg":"PRT","adm0_a3_ma":"PRT","adm0_a3_pt":"PRT","adm0_a3_ar":"PRT","adm0_a3_jp":"PRT","adm0_a3_ko":"PRT","adm0_a3_vn":"PRT","adm0_a3_tr":"PRT","adm0_a3_id":"PRT","adm0_a3_pl":"PRT","adm0_a3_gr":"PRT","adm0_a3_it":"PRT","adm0_a3_nl":"PRT","adm0_a3_se":"PRT","adm0_a3_bd":"PRT","adm0_a3_ua":"PRT","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Southern Europe","region_wb":"Europe & Central Asia","name_len":8,"long_len":8,"abbrev_len":5,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":3,"max_label":8,"label_x":-8.271754,"label_y":39.606675,"ne_id":1159321187,"wikidataid":"Q45","name_ar":"البرتغال","name_bn":"পর্তুগাল","name_de":"Portugal","name_en":"Portugal","name_es":"Portugal","name_fa":"پرتغال","name_fr":"Portugal","name_el":"Πορτογαλία","name_he":"פורטוגל","name_hi":"पुर्तगाल","name_hu":"Portugália","name_id":"Portugal","name_it":"Portogallo","name_ja":"ポルトガル","name_ko":"포르투갈","name_nl":"Portugal","name_pl":"Portugalia","name_pt":"Portugal","name_ru":"Португалия","name_sv":"Portugal","name_tr":"Portekiz","name_uk":"Португалія","name_ur":"پرتگال","name_vi":"Bồ Đào Nha","name_zh":"葡萄牙","name_zht":"葡萄牙","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"PRT.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.619337,48.220726],[26.924176,48.123264],[27.233873,47.826771],[27.551166,47.405117],[28.12803,46.810476],[28.160018,46.371563],[28.054443,45.944586],[28.233554,45.488283],[28.485269,45.596907],[28.659987,45.939987],[28.933717,46.25883],[28.862972,46.437889],[29.072107,46.517678],[29.170654,46.379262],[29.759972,46.349988],[30.024659,46.423937],[29.83821,46.525326],[29.908852,46.674361],[29.559674,46.928583],[29.415135,47.346645],[29.050868,47.510227],[29.122698,47.849095],[28.670891,48.118149],[28.259547,48.155562],[27.522537,48.467119],[26.857824,48.368211],[26.619337,48.220726]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":6,"sovereignt":"Moldova","sov_a3":"MDA","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Moldova","adm0_a3":"MDA","geou_dif":0,"geounit":"Moldova","gu_a3":"MDA","su_dif":0,"subunit":"Moldova","su_a3":"MDA","brk_diff":0,"name":"Moldova","name_long":"Moldova","brk_a3":"MDA","brk_name":"Moldova","brk_group":null,"abbrev":"Mda.","postal":"MD","formal_en":"Republic of Moldova","formal_fr":null,"name_ciawf":"Moldova","note_adm0":null,"note_brk":null,"name_sort":"Moldova","name_alt":null,"mapcolor7":3,"mapcolor8":5,"mapcolor9":4,"mapcolor13":12,"pop_est":2657637,"pop_rank":12,"pop_year":2019,"gdp_md":11968,"gdp_year":2019,"economy":"6. Developing region","income_grp":"4. Lower middle income","fips_10":"MD","iso_a2":"MD","iso_a2_eh":"MD","iso_a3":"MDA","iso_a3_eh":"MDA","iso_n3":"498","iso_n3_eh":"498","un_a3":"498","wb_a2":"MD","wb_a3":"MDA","woe_id":23424885,"woe_id_eh":23424885,"woe_note":"Exact WOE match as country","adm0_iso":"MDA","adm0_diff":null,"adm0_tlc":"MDA","adm0_a3_us":"MDA","adm0_a3_fr":"MDA","adm0_a3_ru":"MDA","adm0_a3_es":"MDA","adm0_a3_cn":"MDA","adm0_a3_tw":"MDA","adm0_a3_in":"MDA","adm0_a3_np":"MDA","adm0_a3_pk":"MDA","adm0_a3_de":"MDA","adm0_a3_gb":"MDA","adm0_a3_br":"MDA","adm0_a3_il":"MDA","adm0_a3_ps":"MDA","adm0_a3_sa":"MDA","adm0_a3_eg":"MDA","adm0_a3_ma":"MDA","adm0_a3_pt":"MDA","adm0_a3_ar":"MDA","adm0_a3_jp":"MDA","adm0_a3_ko":"MDA","adm0_a3_vn":"MDA","adm0_a3_tr":"MDA","adm0_a3_id":"MDA","adm0_a3_pl":"MDA","adm0_a3_gr":"MDA","adm0_a3_it":"MDA","adm0_a3_nl":"MDA","adm0_a3_se":"MDA","adm0_a3_bd":"MDA","adm0_a3_ua":"MDA","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Eastern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":4,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":5,"max_label":10,"label_x":28.487904,"label_y":47.434999,"ne_id":1159321045,"wikidataid":"Q217","name_ar":"مولدوفا","name_bn":"মলদোভা","name_de":"Republik Moldau","name_en":"Moldova","name_es":"Moldavia","name_fa":"مولداوی","name_fr":"Moldavie","name_el":"Μολδαβία","name_he":"מולדובה","name_hi":"मॉल्डोवा","name_hu":"Moldova","name_id":"Moldova","name_it":"Moldavia","name_ja":"モルドバ","name_ko":"몰도바","name_nl":"Moldavië","name_pl":"Mołdawia","name_pt":"Moldávia","name_ru":"Молдавия","name_sv":"Moldavien","name_tr":"Moldova","name_uk":"Молдова","name_ur":"مالدووا","name_vi":"Moldova","name_zh":"摩尔多瓦","name_zht":"摩爾多瓦","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"MDA.geojson"}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-14.508695,66.455892],[-16.167819,66.526792],[-17.798624,65.993853],[-19.056842,66.276601],[-20.576284,65.732112],[-22.134922,66.410469],[-23.650515,66.262519],[-24.326184,65.611189],[-22.227423,65.378594],[-22.184403,65.084968],[-23.955044,64.89113],[-21.778484,64.402116],[-22.762972,63.960179],[-19.972755,63.643635],[-18.656246,63.496383],[-17.794438,63.678749],[-14.909834,64.364082],[-13.609732,65.126671],[-14.739637,65.808748],[-14.508695,66.455892]]]},"properties":{"featurecla":"Admin-0 country","scalerank":1,"labelrank":3,"sovereignt":"Iceland","sov_a3":"ISL","adm0_dif":0,"level":2,"type":"Sovereign country","tlc":"1","admin":"Iceland","adm0_a3":"ISL","geou_dif":0,"geounit":"Iceland","gu_a3":"ISL","su_dif":0,"subunit":"Iceland","su_a3":"ISL","brk_diff":0,"name":"Iceland","name_long":"Iceland","brk_a3":"ISL","brk_name":"Iceland","brk_group":null,"abbrev":"Iceland","postal":"IS","formal_en":"Republic of Iceland","formal_fr":null,"name_ciawf":"Iceland","note_adm0":null,"note_brk":null,"name_sort":"Iceland","name_alt":null,"mapcolor7":1,"mapcolor8":4,"mapcolor9":4,"mapcolor13":9,"pop_est":361313,"pop_rank":10,"pop_year":2019,"gdp_md":24188,"gdp_year":2019,"economy":"2. Developed region: nonG7","income_grp":"1. High income: OECD","fips_10":"IC","iso_a2":"IS","iso_a2_eh":"IS","iso_a3":"ISL","iso_a3_eh":"ISL","iso_n3":"352","iso_n3_eh":"352","un_a3":"352","wb_a2":"IS","wb_a3":"ISL","woe_id":23424845,"woe_id_eh":23424845,"woe_note":"Exact WOE match as country","adm0_iso":"ISL","adm0_diff":null,"adm0_tlc":"ISL","adm0_a3_us":"ISL","adm0_a3_fr":"ISL","adm0_a3_ru":"ISL","adm0_a3_es":"ISL","adm0_a3_cn":"ISL","adm0_a3_tw":"ISL","adm0_a3_in":"ISL","adm0_a3_np":"ISL","adm0_a3_pk":"ISL","adm0_a3_de":"ISL","adm0_a3_gb":"ISL","adm0_a3_br":"ISL","adm0_a3_il":"ISL","adm0_a3_ps":"ISL","adm0_a3_sa":"ISL","adm0_a3_eg":"ISL","adm0_a3_ma":"ISL","adm0_a3_pt":"ISL","adm0_a3_ar":"ISL","adm0_a3_jp":"ISL","adm0_a3_ko":"ISL","adm0_a3_vn":"ISL","adm0_a3_tr":"ISL","adm0_a3_id":"ISL","adm0_a3_pl":"ISL","adm0_a3_gr":"ISL","adm0_a3_it":"ISL","adm0_a3_nl":"ISL","adm0_a3_se":"ISL","adm0_a3_bd":"ISL","adm0_a3_ua":"ISL","adm0_a3_un":-99,"adm0_a3_wb":-99,"continent":"Europe","region_un":"Europe","subregion":"Northern Europe","region_wb":"Europe & Central Asia","name_len":7,"long_len":7,"abbrev_len":7,"tiny":-99,"homepart":1,"min_zoom":0,"min_label":2,"max_label":7,"label_x":-18.673711,"label_y":64.779286,"ne_id":1159320917,"wikidataid":"Q189","name_ar":"آيسلندا","name_bn":"আইসল্যান্ড","name_de":"Island","name_en":"Iceland","name_es":"Islandia","name_fa":"ایسلند","name_fr":"Islande","name_el":"Ισλανδία","name_he":"איסלנד","name_hi":"आइसलैण्ड","name_hu":"Izland","name_id":"Islandia","name_it":"Islanda","name_ja":"アイスランド","name_ko":"아이슬란드","name_nl":"IJsland","name_pl":"Islandia","name_pt":"Islândia","name_ru":"Исландия","name_sv":"Island","name_tr":"İzlanda","name_uk":"Ісландія","name_ur":"آئس لینڈ","name_vi":"Iceland","name_zh":"冰岛","name_zht":"冰島","fclass_iso":"Admin-0 country","tlc_diff":null,"fclass_tlc":"Admin-0 country","fclass_us":null,"fclass_fr":null,"fclass_ru":null,"fclass_es":null,"fclass_cn":null,"fclass_tw":null,"fclass_in":null,"fclass_np":null,"fclass_pk":null,"fclass_de":null,"fclass_gb":null,"fclass_br":null,"fclass_il":null,"fclass_ps":null,"fclass_sa":null,"fclass_eg":null,"fclass_ma":null,"fclass_pt":null,"fclass_ar":null,"fclass_jp":null,"fclass_ko":null,"fclass_vn":null,"fclass_tr":null,"fclass_id":null,"fclass_pl":null,"fclass_gr":null,"fclass_it":null,"fclass_nl":null,"fclass_se":null,"fclass_bd":null,"fclass_ua":null,"filename":"ISL.geojson"}}]`),Fl={features:o4};let Gl=!0;const U=Bl({isEnabled:!1,isDialogEnabled:!1,isLoaded:!1,mode:"start",game:null,timer:null,bbox:[],minesweeperOptions:{enableSpeciesDisplay:!0,size:20,geotiff:{projection:"EPSG:4326",url:"https://eox-ideas.s3.eu-central-1.amazonaws.com/indicator2/AR3_wildlife_1.tif"},minColor:{r:0,g:100,b:0,a:.6},maxColor:{r:0,g:255,b:0,a:.6},minValue:1,maxValue:8,locations:[{name:"Global Coverage",bbox:[-24,33,42,71],horizontalExtent:5,isMineCondition:e=>e>=3.5}]},elapsedSeconds:0});async function Xs(e){if(!e)return;U.minesweeperOptions=e,document.addEventListener("minesweeper:start",Ou),document.addEventListener("minesweeper:continue",Pu),document.addEventListener("minesweeper:win",Lu),document.addEventListener("minesweeper:gameover",ku),document.addEventListener("minesweeper:restart",Cu);const t=Tu();let n=new Date;Gl||(n=new Date(Ys.states.datetime.value));let i=n.toDateString();const a=U.minesweeperOptions.locations[0],s=Ol(a.bbox,a.horizontalExtent,i);U.bbox=s;let o=(await Dl(s,Fl)).length>0;for(;!o;){i+="0";const u=Ol(a.bbox,a.horizontalExtent,i);(await Dl(u,Fl)).length>0&&(o=!0,U.bbox=u)}U.game=new r4(t,{...U.minesweeperOptions,bbox:U.bbox}),U.isEnabled=!0,U.isDialogEnabled=!0;const l=u_(U.bbox,"EPSG:4326",t.getView().getProjection());t.getView().fit(l,{duration:500}),Gl=!1}function $s(){var e;(e=U.game)!=null&&e.vectorLayer&&Tu().getLayers().getArray().find(i=>i.get("id")==="AnalysisGroup").getLayers().remove(nc(U.game.vectorLayer)),U.game&&U.game.removeEventListeners(),U.game=null,U.isEnabled=!1,U.isDialogEnabled=!1,document.removeEventListener("minesweeper:start",Ou),document.removeEventListener("minesweeper:continue",Pu),document.removeEventListener("minesweeper:win",Lu),document.removeEventListener("minesweeper:gameover",ku),document.removeEventListener("minesweeper:restart",Cu)}async function Cu(){if(console.log("Minesweeper::Restart"),await $s(),U.mode="start",!U.minesweeperOptions){console.error("Minesweeper options are not set");return}await Xs(U.minesweeperOptions)}async function Lu(){U.timer&&(clearInterval(U.timer),U.mode="win",U.isDialogEnabled=!0)}function ku(){U.timer&&(clearInterval(U.timer),U.mode="gameover",U.isDialogEnabled=!0)}function Tu(){var e;return(e=Ys.states.mapEl.value)==null?void 0:e.map}function Pu(){var e;(e=U.game)!=null&&e.isGameCompleted&&document.dispatchEvent(new Event("minesweeper:win"))}function Ou(){U.elapsedSeconds=0,console.info("Minesweeper::StartTimer"),U.timer=setInterval(()=>{U.elapsedSeconds+=1},1e3)}const l4={class:"d-flex flex-column align-strech fill-height fill-width"},h4={__name:"index",props:{minesweeperOptions:{type:Object,required:!0}},setup(e){setTimeout(()=>{Xs(e.minesweeperOptions)},1e3);const t=Xu(()=>U.game?U.game.mineCount-U.game.flagCount:0);return $u([()=>e.minesweeperOptions,()=>Ys.states.datetime.value],async()=>{$s(),setTimeout(()=>{Xs(e.minesweeperOptions)},1e3)}),Yu(()=>{$s()}),(n,i)=>{var a;return Ju(),Zu("span",l4,[Yr(ac,{color:"primary",height:"50%",class:"btn-open"},{default:Qu(()=>[tc(ec(t.value)+" 💣 remaining",1)]),_:1}),Yr(sc,{mode:qe(U).mode,game:qe(U).game,elapsedSeconds:qe(U).elapsedSeconds,"is-enabled":qe(U).isDialogEnabled,bbox:qe(U).bbox,enableSpeciesDisplay:(a=qe(U).minesweeperOptions)==null?void 0:a.enableSpeciesDisplay,onClose:i[0]||(i[0]=s=>qe(U).isDialogEnabled=!1)},null,8,["mode","game","elapsedSeconds","is-enabled","bbox","enableSpeciesDisplay"])])}}},u4=ic(h4,[["__scopeId","data-v-cb6bf022"]]),L4=Object.freeze(Object.defineProperty({__proto__:null,default:u4},Symbol.toStringTag,{value:"Module"}));export{R4 as L,I4 as a,Qh as g,L4 as i};
